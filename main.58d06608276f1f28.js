var HDe=Object.defineProperty,VDe=Object.defineProperties,zDe=Object.getOwnPropertyDescriptors,Px=Object.getOwnPropertySymbols,NK=Object.prototype.hasOwnProperty,LK=Object.prototype.propertyIsEnumerable,FK=(Ge,G,F)=>G in Ge?HDe(Ge,G,{enumerable:!0,configurable:!0,writable:!0,value:F}):Ge[G]=F,$t=(Ge,G)=>{for(var F in G||(G={}))NK.call(G,F)&&FK(Ge,F,G[F]);if(Px)for(var F of Px(G))LK.call(G,F)&&FK(Ge,F,G[F]);return Ge},ar=(Ge,G)=>VDe(Ge,zDe(G)),Gg=(Ge,G)=>{var F={};for(var B in Ge)NK.call(Ge,B)&&G.indexOf(B)<0&&(F[B]=Ge[B]);if(null!=Ge&&Px)for(var B of Px(Ge))G.indexOf(B)<0&&LK.call(Ge,B)&&(F[B]=Ge[B]);return F};(self.webpackChunksolid_crypt_pad=self.webpackChunksolid_crypt_pad||[]).push([[179],{609:(Ge,G,F)=>{"use strict";F.r(G),F.d(G,{CordovaIFrameNavigator:()=>C.CordovaIFrameNavigator,CordovaPopupNavigator:()=>C.CordovaPopupNavigator,InMemoryWebStorage:()=>C.InMemoryWebStorage,Log:()=>C.Log,OidcClient:()=>C.OidcClient,SessionMonitor:()=>C.SessionMonitor,User:()=>C.User,UserManager:()=>C.UserManager,Version:()=>C.Version,WebStorageStateStore:()=>C.WebStorageStateStore,clearOidcPersistentStorage:()=>ue,getBearerToken:()=>P,getDpopToken:()=>j,refresh:()=>J,registerClient:()=>f,removeOidcQueryParam:()=>q});var B=F(5861),C=F(3664),b=F(8066);const S=(ce,pe={})=>{const{sorted:fe,skipIndex:Ee,ignorenull:_e,skipBracket:Te,useDot:De,whitespace:be="+"}=pe,de=ee=>String(ee).replace(/[^ !'()~*]/gu,encodeURIComponent).replace(/ /g,be).replace(/[!'()~*]/g,ie=>`%${ie.charCodeAt().toString(16).slice(-2).toUpperCase()}`),we=(ee,ie=Object.keys(ee))=>fe?ie.sort():ie,Ye=ee=>ee.filter(ie=>ie).join("&"),ye=(ee,ie,$=typeof ie,se=null)=>(ie===se?se=_e?se:de(ee)+"="+se:/string|number|boolean/.test($)?se=de(ee)+"="+de(ie):Array.isArray(ie)?se=((ee,ie,$=(Te?"":"[]"))=>ie.length?Ye(ie.map((se,K)=>ye(Ee?ee+$:ee+"["+K+"]",se))):de(ee+$))(ee,ie):ie instanceof Set?se=((ee,ie)=>Ye(Array.from(ie).map($=>ye(ee,$))))(ee,ie):"object"===$&&(se=((ee,ie)=>Ye(we(ie).map($=>ye(De?`${ee}.${$}`:`${ee}[${$}]`,ie[$]))))(ee,ie)),se);return ce&&Ye(we(ce).map(ee=>ye(ee,ce[ee])))};function k(ce,pe){var fe,Ee,_e,Te;throw"invalid_redirect_uri"===ce.error?new Error(`Dynamic client registration failed: the provided redirect uri [${null===(fe=pe.redirectUrl)||void 0===fe?void 0:fe.toString()}] is invalid - ${null!==(Ee=ce.error_description)&&void 0!==Ee?Ee:""}`):"invalid_client_metadata"===ce.error?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(pe)} is invalid - ${null!==(_e=ce.error_description)&&void 0!==_e?_e:""}`):new Error(`Dynamic client registration failed: ${ce.error} - ${null!==(Te=ce.error_description)&&void 0!==Te?Te:""}`)}function h(ce,pe){if(void 0===ce.client_id)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(ce)}`);if(pe.redirectUrl&&(void 0===ce.redirect_uris||ce.redirect_uris[0]!==pe.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(ce.redirect_uris)} don't match the provided ${JSON.stringify([pe.redirectUrl.toString()])}`)}function f(ce,pe){return u.apply(this,arguments)}function u(){return(u=(0,B.Z)(function*(ce,pe){var fe;if(!pe.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(pe.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const Ee=(0,b.determineSigningAlg)(pe.idTokenSigningAlgValuesSupported,b.PREFERRED_SIGNING_ALG),_e={client_name:ce.clientName,application_type:"web",redirect_uris:[null===(fe=ce.redirectUrl)||void 0===fe?void 0:fe.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:Ee,grant_types:["authorization_code","refresh_token"]},Te={"Content-Type":"application/json"};ce.registrationAccessToken&&(Te.Authorization=`Bearer ${ce.registrationAccessToken}`);const De=yield fetch(pe.registrationEndpoint.toString(),{method:"POST",headers:Te,body:JSON.stringify(_e)});if(De.ok){const be=yield De.json();return h(be,ce),{clientId:be.client_id,clientSecret:be.client_secret,idTokenSignedResponseAlg:be.id_token_signed_response_alg,clientType:"dynamic"}}throw 400===De.status&&k(yield De.json(),ce),new Error(`Dynamic client registration failed: the server returned ${De.status} ${De.statusText} - ${yield De.text()}`)})).apply(this,arguments)}function w(ce){return void 0!==ce.error_description&&"string"==typeof ce.error_description}function _(ce){return void 0!==ce.refresh_token&&"string"==typeof ce.refresh_token}function L(ce,pe){if(pe.grantType&&(!ce.grantTypesSupported||!ce.grantTypesSupported.includes(pe.grantType)))throw new Error(`The issuer [${ce.issuer}] does not support the [${pe.grantType}] grant`);if(!ce.tokenEndpoint)throw new Error(`This issuer [${ce.issuer}] does not have a token endpoint`)}function M(ce,pe){if(function p(ce){return void 0!==ce.error&&"string"==typeof ce.error}(ce))throw new b.OidcProviderError(`Token endpoint returned error [${ce.error}]${w(ce)?`: ${ce.error_description}`:""}${function g(ce){return void 0!==ce.error_uri&&"string"==typeof ce.error_uri}(ce)?` (see ${ce.error_uri})`:""}`,ce.error,w(ce)?ce.error_description:void 0);if(!function x(ce){return void 0!==ce.access_token&&"string"==typeof ce.access_token}(ce))throw new b.InvalidResponseError(["access_token"]);if(!function m(ce){return void 0!==ce.id_token&&"string"==typeof ce.id_token}(ce))throw new b.InvalidResponseError(["id_token"]);if(!function T(ce){return void 0!==ce.token_type&&"string"==typeof ce.token_type}(ce))throw new b.InvalidResponseError(["token_type"]);if(!function D(ce){return void 0===ce.expires_in||"number"==typeof ce.expires_in}(ce))throw new b.InvalidResponseError(["expires_in"]);if(!pe&&"bearer"!==ce.token_type.toLowerCase())throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${ce.token_type}].`);return ce}function N(ce,pe,fe,Ee){return I.apply(this,arguments)}function I(){return(I=(0,B.Z)(function*(ce,pe,fe,Ee){L(ce,fe);const _e={"content-type":"application/x-www-form-urlencoded"};let Te;Ee&&(Te=yield(0,b.generateDpopKeyPair)(),_e.DPoP=yield(0,b.createDpopHeader)(ce.tokenEndpoint,"POST",Te)),pe.clientSecret&&(_e.Authorization=`Basic ${btoa(`${pe.clientId}:${pe.clientSecret}`)}`);const De={method:"POST",headers:_e,body:S({grant_type:fe.grantType,redirect_uri:fe.redirectUrl,code:fe.code,code_verifier:fe.codeVerifier,client_id:pe.clientId})},we=M(yield(yield yield fetch(ce.tokenEndpoint,De)).json(),Ee),Ye=yield(0,b.getWebidFromTokenPayload)(we.id_token,ce.jwksUri,ce.issuer,pe.clientId);return{accessToken:we.access_token,idToken:we.id_token,refreshToken:_(we)?we.refresh_token:void 0,webId:Ye,dpopKey:Te,expiresIn:we.expires_in}})).apply(this,arguments)}function P(ce){return V.apply(this,arguments)}function V(){return(V=(0,B.Z)(function*(ce){let pe;try{const fe=new C.OidcClient({response_mode:"query",loadUserInfo:!1});if(pe=yield fe.processSigninResponse(ce),void 0===fe.settings.metadata)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(void 0===fe.settings.metadata.jwks_uri)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(void 0===fe.settings.metadata.issuer)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(void 0===fe.settings.client_id)throw new Error("Missing some client information in storage: 'client_id' is undefined");const Ee=yield(0,b.getWebidFromTokenPayload)(pe.id_token,fe.settings.metadata.jwks_uri,fe.settings.metadata.issuer,fe.settings.client_id);return{accessToken:pe.access_token,idToken:pe.id_token,webId:Ee,refreshToken:pe.refresh_token}}catch(fe){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${ce}]: ${fe}`)}})).apply(this,arguments)}function j(ce,pe,fe){return oe.apply(this,arguments)}function oe(){return(oe=(0,B.Z)(function*(ce,pe,fe){return N(ce,pe,fe,!0)})).apply(this,arguments)}function J(ce,pe,fe,Ee){return le.apply(this,arguments)}function le(){return(le=(0,B.Z)(function*(ce,pe,fe,Ee){const _e={grant_type:"refresh_token",refresh_token:ce,scope:"openid offline_access"};let Te={};void 0!==Ee&&(Te={DPoP:yield(0,b.createDpopHeader)(pe.tokenEndpoint,"POST",Ee)});let De={};void 0!==fe.clientSecret&&(De={Authorization:`Basic ${btoa(`${fe.clientId}:${fe.clientSecret}`)}`});const be=yield fetch(pe.tokenEndpoint,{method:"POST",body:S(_e),headers:ar($t($t({},Te),De),{"Content-Type":"application/x-www-form-urlencoded"})});let de;try{de=yield be.json()}catch(ze){throw new Error(`The token endpoint of issuer ${pe.issuer} returned a malformed response.`)}const we=M(de,void 0!==Ee),Ye=yield(0,b.getWebidFromTokenPayload)(we.id_token,pe.jwksUri,pe.issuer,fe.clientId);return{accessToken:we.access_token,idToken:we.id_token,refreshToken:"string"==typeof we.refresh_token?we.refresh_token:void 0,webId:Ye,dpopKey:Ee,expiresIn:we.expires_in}})).apply(this,arguments)}function q(ce){const pe=new URL(ce);return pe.searchParams.delete("code"),pe.searchParams.delete("state"),pe.hash="",pe.toString()}function ue(){return he.apply(this,arguments)}function he(){return(he=(0,B.Z)(function*(){yield new C.OidcClient({response_mode:"query"}).clearStaleState(new C.WebStorageStateStore({}));const pe=window.localStorage,fe=[];for(let Ee=0;Ee<=pe.length;Ee+=1){const _e=pe.key(Ee);_e&&(_e.match(/^oidc\..+$/)||_e.match(/^solidClientAuthenticationUser:.+$/))&&fe.push(_e)}fe.forEach(Ee=>pe.removeItem(Ee))})).apply(this,arguments)}},3664:function(Ge){Ge.exports=function(G){var F={};function B(C){if(F[C])return F[C].exports;var b=F[C]={i:C,l:!1,exports:{}};return G[C].call(b.exports,b,b.exports,B),b.l=!0,b.exports}return B.m=G,B.c=F,B.d=function(C,b,S){B.o(C,b)||Object.defineProperty(C,b,{enumerable:!0,get:S})},B.r=function(C){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},B.t=function(C,b){if(1&b&&(C=B(C)),8&b||4&b&&"object"==typeof C&&C&&C.__esModule)return C;var S=Object.create(null);if(B.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:C}),2&b&&"string"!=typeof C)for(var k in C)B.d(S,k,function(h){return C[h]}.bind(null,k));return S},B.n=function(C){var b=C&&C.__esModule?function(){return C.default}:function(){return C};return B.d(b,"a",b),b},B.o=function(C,b){return Object.prototype.hasOwnProperty.call(C,b)},B.p="",B(B.s=22)}([function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var C=function(){function h(f,u){for(var p=0;p<u.length;p++){var w=u[p];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,u,p){return u&&h(f.prototype,u),p&&h(f,p),f}}(),b={debug:function(){},info:function(){},warn:function(){},error:function(){}},S=void 0,k=void 0;(F.Log=function(){function h(){!function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,h)}return h.reset=function(){k=3,S=b},h.debug=function(){if(k>=4){for(var u=arguments.length,p=Array(u),w=0;w<u;w++)p[w]=arguments[w];S.debug.apply(S,Array.from(p))}},h.info=function(){if(k>=3){for(var u=arguments.length,p=Array(u),w=0;w<u;w++)p[w]=arguments[w];S.info.apply(S,Array.from(p))}},h.warn=function(){if(k>=2){for(var u=arguments.length,p=Array(u),w=0;w<u;w++)p[w]=arguments[w];S.warn.apply(S,Array.from(p))}},h.error=function(){if(k>=1){for(var u=arguments.length,p=Array(u),w=0;w<u;w++)p[w]=arguments[w];S.error.apply(S,Array.from(p))}},C(h,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return k},set:function(u){if(!(0<=u&&u<=4))throw new Error("Invalid log level");k=u}},{key:"logger",get:function(){return S},set:function(u){if(!u.debug&&u.info&&(u.debug=u.info),!(u.debug&&u.info&&u.warn&&u.error))throw new Error("Invalid logger");S=u}}]),h}()).reset()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var C=function(){function h(f,u){for(var p=0;p<u.length;p++){var w=u[p];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,u,p){return u&&h(f.prototype,u),p&&h(f,p),f}}(),b={setInterval:function(h){function f(u,p){return h.apply(this,arguments)}return f.toString=function(){return h.toString()},f}(function(h,f){return setInterval(h,f)}),clearInterval:function(h){function f(u){return h.apply(this,arguments)}return f.toString=function(){return h.toString()},f}(function(h){return clearInterval(h)})},S=!1,k=null;F.Global=function(){function h(){!function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,h)}return h._testing=function(){S=!0},h.setXMLHttpRequest=function(u){k=u},C(h,null,[{key:"location",get:function(){if(!S)return location}},{key:"localStorage",get:function(){if(!S&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!S&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!S&&"undefined"!=typeof window)return k||XMLHttpRequest}},{key:"timer",get:function(){if(!S)return b}}]),h}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.MetadataService=void 0;var C=function(){function f(u,p){for(var w=0;w<p.length;w++){var g=p[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,p,w){return p&&f(u.prototype,p),w&&f(u,w),u}}(),b=B(0),S=B(7);function k(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}var h=".well-known/openid-configuration";F.MetadataService=function(){function f(u){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.JsonService;if(k(this,f),!u)throw b.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=u,this._jsonService=new p(["application/jwk-set+json"])}return f.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},f.prototype.getMetadata=function(){var p=this;return this._settings.metadata?(b.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(b.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(w){return b.Log.debug("MetadataService.getMetadata: json received"),p._settings.metadata=Object.assign({},p._settings.metadataSeed||{},w),p._settings.metadata})):(b.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},f.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},f.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},f.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},f.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},f.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},f.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},f.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},f.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},f.prototype._getMetadataProperty=function(p){var w=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b.Log.debug("MetadataService.getMetadataProperty for: "+p),this.getMetadata().then(function(g){if(b.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===g[p]){if(!0===w)return void b.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+p);throw b.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+p),new Error("Metadata does not contain property "+p)}return g[p]})},f.prototype.getSigningKeys=function(){var p=this;return this._settings.signingKeys?(b.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(w){return b.Log.debug("MetadataService.getSigningKeys: jwks_uri received",w),p._jsonService.getJson(w).then(function(g){if(b.Log.debug("MetadataService.getSigningKeys: key set received",g),!g.keys)throw b.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return p._settings.signingKeys=g.keys,p._settings.signingKeys})})},C(f,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(h)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=h))),this._metadataUrl}}]),f}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.UrlUtility=void 0;var C=B(0),b=B(1);F.UrlUtility=function(){function S(){!function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}(this,S)}return S.addQueryParam=function(h,f,u){return h.indexOf("?")<0&&(h+="?"),"?"!==h[h.length-1]&&(h+="&"),h+=encodeURIComponent(f),(h+="=")+encodeURIComponent(u)},S.parseUrlFragment=function(h){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof h&&(h=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.Global).location.href);var p=h.lastIndexOf(f);p>=0&&(h=h.substr(p+1)),"?"===f&&(p=h.indexOf("#"))>=0&&(h=h.substr(0,p));for(var w,g={},x=/([^&=]+)=([^&]*)/g,m=0;w=x.exec(h);)if(g[decodeURIComponent(w[1])]=decodeURIComponent(w[2].replace(/\+/g," ")),m++>50)return C.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",h),{error:"Response exceeded expected number of parameters"};for(var _ in g)return g;return{}},S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.JoseUtil=void 0;var k,C=B(26),b=(k=B(33))&&k.__esModule?k:{default:k};F.JoseUtil=(0,b.default)({jws:C.jws,KeyUtil:C.KeyUtil,X509:C.X509,crypto:C.crypto,hextob64u:C.hextob64u,b64tohex:C.b64tohex,AllowedSigningAlgs:C.AllowedSigningAlgs})},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.OidcClientSettings=void 0;var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},b=function(){function _(T,D){for(var L=0;L<D.length;L++){var M=D[L];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(T,M.key,M)}}return function(T,D,L){return D&&_(T.prototype,D),L&&_(T,L),T}}(),S=B(0),k=B(23),h=B(6),f=B(24),u=B(2);function p(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}var w=".well-known/openid-configuration",g="id_token",x="openid",m="client_secret_post";F.OidcClientSettings=function(){function _(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},D=T.authority,L=T.metadataUrl,M=T.metadata,N=T.signingKeys,I=T.metadataSeed,P=T.client_id,V=T.client_secret,j=T.response_type,oe=void 0===j?g:j,J=T.scope,le=void 0===J?x:J,q=T.redirect_uri,ue=T.post_logout_redirect_uri,he=T.client_authentication,ce=void 0===he?m:he,pe=T.prompt,fe=T.display,Ee=T.max_age,_e=T.ui_locales,Te=T.acr_values,De=T.resource,be=T.response_mode,de=T.filterProtocolClaims,we=void 0===de||de,Ye=T.loadUserInfo,ze=void 0===Ye||Ye,He=T.staleStateAge,Ne=void 0===He?900:He,ye=T.clockSkew,ee=void 0===ye?300:ye,ie=T.clockService,$=void 0===ie?new k.ClockService:ie,se=T.userInfoJwtIssuer,K=void 0===se?"OP":se,te=T.mergeClaims,X=void 0!==te&&te,me=T.stateStore,R=void 0===me?new h.WebStorageStateStore:me,H=T.ResponseValidatorCtor,Z=void 0===H?f.ResponseValidator:H,Ae=T.MetadataServiceCtor,Ke=void 0===Ae?u.MetadataService:Ae,Re=T.extraQueryParams,ht=void 0===Re?{}:Re,Et=T.extraTokenParams,Ft=void 0===Et?{}:Et;p(this,_),this._authority=D,this._metadataUrl=L,this._metadata=M,this._metadataSeed=I,this._signingKeys=N,this._client_id=P,this._client_secret=V,this._response_type=oe,this._scope=le,this._redirect_uri=q,this._post_logout_redirect_uri=ue,this._client_authentication=ce,this._prompt=pe,this._display=fe,this._max_age=Ee,this._ui_locales=_e,this._acr_values=Te,this._resource=De,this._response_mode=be,this._filterProtocolClaims=!!we,this._loadUserInfo=!!ze,this._staleStateAge=Ne,this._clockSkew=ee,this._clockService=$,this._userInfoJwtIssuer=K,this._mergeClaims=!!X,this._stateStore=R,this._validator=new Z(this),this._metadataService=new Ke(this),this._extraQueryParams="object"===(void 0===ht?"undefined":C(ht))?ht:{},this._extraTokenParams="object"===(void 0===Ft?"undefined":C(Ft))?Ft:{}}return _.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},b(_,[{key:"client_id",get:function(){return this._client_id},set:function(D){if(this._client_id)throw S.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=D}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(D){if(this._authority)throw S.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=D}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(w)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=w)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(D){this._metadata=D}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(D){this._metadataSeed=D}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(D){this._signingKeys=D}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(D){this._extraQueryParams="object"===(void 0===D?"undefined":C(D))?D:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(D){this._extraTokenParams="object"===(void 0===D?"undefined":C(D))?D:{}}}]),_}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.WebStorageStateStore=void 0;var C=B(0),b=B(1);function S(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}F.WebStorageStateStore=function(){function k(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=h.prefix,u=void 0===f?"oidc.":f,p=h.store,w=void 0===p?b.Global.localStorage:p;S(this,k),this._store=w,this._prefix=u}return k.prototype.set=function(f,u){return C.Log.debug("WebStorageStateStore.set",f),this._store.setItem(f=this._prefix+f,u),Promise.resolve()},k.prototype.get=function(f){C.Log.debug("WebStorageStateStore.get",f);var u=this._store.getItem(f=this._prefix+f);return Promise.resolve(u)},k.prototype.remove=function(f){C.Log.debug("WebStorageStateStore.remove",f);var u=this._store.getItem(f=this._prefix+f);return this._store.removeItem(f),Promise.resolve(u)},k.prototype.getAllKeys=function(){C.Log.debug("WebStorageStateStore.getAllKeys");for(var f=[],u=0;u<this._store.length;u++){var p=this._store.key(u);0===p.indexOf(this._prefix)&&f.push(p.substr(this._prefix.length))}return Promise.resolve(f)},k}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.JsonService=void 0;var C=B(0),b=B(1);function S(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}F.JsonService=function(){function k(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.Global.XMLHttpRequest,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;S(this,k),this._contentTypes=h&&Array.isArray(h)?h.slice():[],this._contentTypes.push("application/json"),u&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=f,this._jwtHandler=u}return k.prototype.getJson=function(f,u){var p=this;if(!f)throw C.Log.error("JsonService.getJson: No url passed"),new Error("url");return C.Log.debug("JsonService.getJson, url: ",f),new Promise(function(w,g){var x=new p._XMLHttpRequest;x.open("GET",f);var m=p._contentTypes,_=p._jwtHandler;x.onload=function(){if(C.Log.debug("JsonService.getJson: HTTP response received, status",x.status),200===x.status){var T=x.getResponseHeader("Content-Type");if(T){var D=m.find(function(L){if(T.startsWith(L))return!0});if("application/jwt"==D)return void _(x).then(w,g);if(D)try{return void w(JSON.parse(x.responseText))}catch(L){return C.Log.error("JsonService.getJson: Error parsing JSON response",L.message),void g(L)}}g(Error("Invalid response Content-Type: "+T+", from URL: "+f))}else g(Error(x.statusText+" ("+x.status+")"))},x.onerror=function(){C.Log.error("JsonService.getJson: network error"),g(Error("Network Error"))},u&&(C.Log.debug("JsonService.getJson: token passed, setting Authorization header"),x.setRequestHeader("Authorization","Bearer "+u)),x.send()})},k.prototype.postForm=function(f,u,p){var w=this;if(!f)throw C.Log.error("JsonService.postForm: No url passed"),new Error("url");return C.Log.debug("JsonService.postForm, url: ",f),new Promise(function(g,x){var m=new w._XMLHttpRequest;m.open("POST",f);var _=w._contentTypes;m.onload=function(){if(C.Log.debug("JsonService.postForm: HTTP response received, status",m.status),200!==m.status){if(400===m.status&&(N=m.getResponseHeader("Content-Type"))&&_.find(function(I){if(N.startsWith(I))return!0}))try{var M=JSON.parse(m.responseText);if(M&&M.error)return C.Log.error("JsonService.postForm: Error from server: ",M.error),void x(new Error(M.error))}catch(I){return C.Log.error("JsonService.postForm: Error parsing JSON response",I.message),void x(I)}x(Error(m.statusText+" ("+m.status+")"))}else{var N;if((N=m.getResponseHeader("Content-Type"))&&_.find(function(I){if(N.startsWith(I))return!0}))try{return void g(JSON.parse(m.responseText))}catch(I){return C.Log.error("JsonService.postForm: Error parsing JSON response",I.message),void x(I)}x(Error("Invalid response Content-Type: "+N+", from URL: "+f))}},m.onerror=function(){C.Log.error("JsonService.postForm: network error"),x(Error("Network Error"))};var T="";for(var D in u){var L=u[D];L&&(T.length>0&&(T+="&"),T+=encodeURIComponent(D),T+="=",T+=encodeURIComponent(L))}m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==p&&m.setRequestHeader("Authorization","Basic "+btoa(p)),m.send(T)})},k}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SigninRequest=void 0;var C=B(0),b=B(3),S=B(13);F.SigninRequest=function(){function k(h){var f=h.url,u=h.client_id,p=h.redirect_uri,w=h.response_type,g=h.scope,x=h.authority,m=h.data,_=h.prompt,T=h.display,D=h.max_age,L=h.ui_locales,M=h.id_token_hint,N=h.login_hint,I=h.acr_values,P=h.resource,V=h.response_mode,j=h.request,oe=h.request_uri,J=h.extraQueryParams,le=h.request_type,q=h.client_secret,ue=h.extraTokenParams,he=h.skipUserInfo;if(function(De,be){if(!(De instanceof be))throw new TypeError("Cannot call a class as a function")}(this,k),!f)throw C.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!u)throw C.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!p)throw C.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!w)throw C.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!g)throw C.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!x)throw C.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var ce=k.isOidc(w),pe=k.isCode(w);V||(V=k.isCode(w)?"query":null),this.state=new S.SigninState({nonce:ce,data:m,client_id:u,authority:x,redirect_uri:p,code_verifier:pe,request_type:le,response_mode:V,client_secret:q,scope:g,extraTokenParams:ue,skipUserInfo:he}),f=b.UrlUtility.addQueryParam(f,"client_id",u),f=b.UrlUtility.addQueryParam(f,"redirect_uri",p),f=b.UrlUtility.addQueryParam(f,"response_type",w),f=b.UrlUtility.addQueryParam(f,"scope",g),f=b.UrlUtility.addQueryParam(f,"state",this.state.id),ce&&(f=b.UrlUtility.addQueryParam(f,"nonce",this.state.nonce)),pe&&(f=b.UrlUtility.addQueryParam(f,"code_challenge",this.state.code_challenge),f=b.UrlUtility.addQueryParam(f,"code_challenge_method","S256"));var fe={prompt:_,display:T,max_age:D,ui_locales:L,id_token_hint:M,login_hint:N,acr_values:I,resource:P,request:j,request_uri:oe,response_mode:V};for(var Ee in fe)fe[Ee]&&(f=b.UrlUtility.addQueryParam(f,Ee,fe[Ee]));for(var _e in J)f=b.UrlUtility.addQueryParam(f,_e,J[_e]);this.url=f}return k.isOidc=function(f){return!!f.split(/\s+/g).filter(function(u){return"id_token"===u})[0]},k.isOAuth=function(f){return!!f.split(/\s+/g).filter(function(u){return"token"===u})[0]},k.isCode=function(f){return!!f.split(/\s+/g).filter(function(u){return"code"===u})[0]},k}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.State=void 0;var f,C=function(){function h(f,u){for(var p=0;p<u.length;p++){var w=u[p];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,u,p){return u&&h(f.prototype,u),p&&h(f,p),f}}(),b=B(0),S=(f=B(14))&&f.__esModule?f:{default:f};function k(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}F.State=function(){function h(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=f.id,p=f.data,w=f.created,g=f.request_type;k(this,h),this._id=u||(0,S.default)(),this._data=p,this._created="number"==typeof w&&w>0?w:parseInt(Date.now()/1e3),this._request_type=g}return h.prototype.toStorageString=function(){return b.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},h.fromStorageString=function(u){return b.Log.debug("State.fromStorageString"),new h(JSON.parse(u))},h.clearStaleState=function(u,p){var w=Date.now()/1e3-p;return u.getAllKeys().then(function(g){b.Log.debug("State.clearStaleState: got keys",g);for(var x=[],m=function(L){var M=g[L];T=u.get(M).then(function(N){var I=!1;if(N)try{var P=h.fromStorageString(N);b.Log.debug("State.clearStaleState: got item from key: ",M,P.created),P.created<=w&&(I=!0)}catch(V){b.Log.error("State.clearStaleState: Error parsing state for key",M,V.message),I=!0}else b.Log.debug("State.clearStaleState: no item in storage for key: ",M),I=!0;if(I)return b.Log.debug("State.clearStaleState: removed item for key: ",M),u.remove(M)}),x.push(T)},_=0;_<g.length;_++){var T;m(_)}return b.Log.debug("State.clearStaleState: waiting on promise count:",x.length),Promise.all(x)})},C(h,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),h}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.OidcClient=void 0;var C=function(){function m(_,T){for(var D=0;D<T.length;D++){var L=T[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(_,L.key,L)}}return function(_,T,D){return T&&m(_.prototype,T),D&&m(_,D),_}}(),b=B(0),S=B(5),k=B(12),h=B(8),f=B(34),u=B(35),p=B(36),w=B(13),g=B(9);function x(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}F.OidcClient=function(){function m(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,m),this._settings=_ instanceof S.OidcClientSettings?_:new S.OidcClientSettings(_)}return m.prototype.createSigninRequest=function(){var T=this,D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},L=D.response_type,M=D.scope,N=D.redirect_uri,I=D.data,P=D.state,V=D.prompt,j=D.display,oe=D.max_age,J=D.ui_locales,le=D.id_token_hint,q=D.login_hint,ue=D.acr_values,he=D.resource,ce=D.request,pe=D.request_uri,fe=D.response_mode,Ee=D.extraQueryParams,_e=D.extraTokenParams,Te=D.request_type,De=D.skipUserInfo,be=arguments[1];b.Log.debug("OidcClient.createSigninRequest");var de=this._settings.client_id;M=M||this._settings.scope,N=N||this._settings.redirect_uri,V=V||this._settings.prompt,j=j||this._settings.display,oe=oe||this._settings.max_age,J=J||this._settings.ui_locales,ue=ue||this._settings.acr_values,he=he||this._settings.resource,fe=fe||this._settings.response_mode,Ee=Ee||this._settings.extraQueryParams,_e=_e||this._settings.extraTokenParams;var we=this._settings.authority;return h.SigninRequest.isCode(L=L||this._settings.response_type)&&"code"!==L?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Ye){b.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Ye);var ze=new h.SigninRequest({url:Ye,client_id:de,redirect_uri:N,response_type:L,scope:M,data:I||P,authority:we,prompt:V,display:j,max_age:oe,ui_locales:J,id_token_hint:le,login_hint:q,acr_values:ue,resource:he,request:ce,request_uri:pe,extraQueryParams:Ee,extraTokenParams:_e,request_type:Te,response_mode:fe,client_secret:T._settings.client_secret,skipUserInfo:De}),He=ze.state;return(be=be||T._stateStore).set(He.id,He.toStorageString()).then(function(){return ze})})},m.prototype.readSigninResponseState=function(T,D){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2];b.Log.debug("OidcClient.readSigninResponseState");var M="query"===this._settings.response_mode||!this._settings.response_mode&&h.SigninRequest.isCode(this._settings.response_type),I=new f.SigninResponse(T,M?"?":"#");return I.state?(D=D||this._stateStore,(L?D.remove.bind(D):D.get.bind(D))(I.state).then(function(V){if(!V)throw b.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:w.SigninState.fromStorageString(V),response:I}})):(b.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},m.prototype.processSigninResponse=function(T,D){var L=this;return b.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(T,D,!0).then(function(M){var N=M.state,I=M.response;return b.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),L._validator.validateSigninResponse(N,I)})},m.prototype.createSignoutRequest=function(){var T=this,D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},L=D.id_token_hint,M=D.data,N=D.state,I=D.post_logout_redirect_uri,P=D.extraQueryParams,V=D.request_type,j=arguments[1];return b.Log.debug("OidcClient.createSignoutRequest"),I=I||this._settings.post_logout_redirect_uri,P=P||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(oe){if(!oe)throw b.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");b.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",oe);var J=new u.SignoutRequest({url:oe,id_token_hint:L,post_logout_redirect_uri:I,data:M||N,extraQueryParams:P,request_type:V}),le=J.state;return le&&(b.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(j=j||T._stateStore).set(le.id,le.toStorageString())),J})},m.prototype.readSignoutResponseState=function(T,D){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2];b.Log.debug("OidcClient.readSignoutResponseState");var M=new p.SignoutResponse(T);if(!M.state)return b.Log.debug("OidcClient.readSignoutResponseState: No state in response"),M.error?(b.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",M.error),Promise.reject(new k.ErrorResponse(M))):Promise.resolve({state:void 0,response:M});var N=M.state;return D=D||this._stateStore,(L?D.remove.bind(D):D.get.bind(D))(N).then(function(P){if(!P)throw b.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:g.State.fromStorageString(P),response:M}})},m.prototype.processSignoutResponse=function(T,D){var L=this;return b.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(T,D,!0).then(function(M){var N=M.state,I=M.response;return N?(b.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),L._validator.validateSignoutResponse(N,I)):(b.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),I)})},m.prototype.clearStaleState=function(T){return b.Log.debug("OidcClient.clearStaleState"),g.State.clearStaleState(T=T||this._stateStore,this.settings.staleStateAge)},C(m,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),m}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.TokenClient=void 0;var C=B(7),b=B(2),S=B(0);function k(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}F.TokenClient=function(){function h(f){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.JsonService,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.MetadataService;if(k(this,h),!f)throw S.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=f,this._jsonService=new u,this._metadataService=new p(this._settings)}return h.prototype.exchangeCode=function(){var u=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(p=Object.assign({},p)).grant_type=p.grant_type||"authorization_code",p.client_id=p.client_id||this._settings.client_id,p.client_secret=p.client_secret||this._settings.client_secret,p.redirect_uri=p.redirect_uri||this._settings.redirect_uri;var w=void 0,g=p._client_authentication||this._settings._client_authentication;return delete p._client_authentication,p.code?p.redirect_uri?p.code_verifier?p.client_id?p.client_secret||"client_secret_basic"!=g?("client_secret_basic"==g&&(w=p.client_id+":"+p.client_secret,delete p.client_id,delete p.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(x){return S.Log.debug("TokenClient.exchangeCode: Received token endpoint"),u._jsonService.postForm(x,p,w).then(function(m){return S.Log.debug("TokenClient.exchangeCode: response received"),m})})):(S.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(S.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(S.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(S.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(S.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},h.prototype.exchangeRefreshToken=function(){var u=this,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(p=Object.assign({},p)).grant_type=p.grant_type||"refresh_token",p.client_id=p.client_id||this._settings.client_id,p.client_secret=p.client_secret||this._settings.client_secret;var w=void 0,g=p._client_authentication||this._settings._client_authentication;return delete p._client_authentication,p.refresh_token?p.client_id?("client_secret_basic"==g&&(w=p.client_id+":"+p.client_secret,delete p.client_id,delete p.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(x){return S.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),u._jsonService.postForm(x,p,w).then(function(m){return S.Log.debug("TokenClient.exchangeRefreshToken: response received"),m})})):(S.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(S.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},h}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ErrorResponse=void 0;var C=B(0);function b(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}function S(k,h){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?k:h}F.ErrorResponse=function(k){function h(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=f.error,p=f.error_description,w=f.error_uri,g=f.state,x=f.session_state;if(b(this,h),!u)throw C.Log.error("No error passed to ErrorResponse"),new Error("error");var m=S(this,k.call(this,p||u));return m.name="ErrorResponse",m.error=u,m.error_description=p,m.error_uri=w,m.state=g,m.session_state=x,m}return function(u,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}(h,k),h}(Error)},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SigninState=void 0;var w,C=function(){function p(w,g){for(var x=0;x<g.length;x++){var m=g[x];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(w,m.key,m)}}return function(w,g,x){return g&&p(w.prototype,g),x&&p(w,x),w}}(),b=B(0),S=B(9),k=B(4),h=(w=B(14))&&w.__esModule?w:{default:w};function f(p,w){if(!(p instanceof w))throw new TypeError("Cannot call a class as a function")}function u(p,w){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||"object"!=typeof w&&"function"!=typeof w?p:w}F.SigninState=function(p){function w(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=g.nonce,m=g.authority,_=g.client_id,T=g.redirect_uri,D=g.code_verifier,L=g.response_mode,M=g.client_secret,N=g.scope,I=g.extraTokenParams,P=g.skipUserInfo;f(this,w);var V=u(this,p.call(this,arguments[0]));if(!0===x?V._nonce=(0,h.default)():x&&(V._nonce=x),!0===D?V._code_verifier=(0,h.default)()+(0,h.default)()+(0,h.default)():D&&(V._code_verifier=D),V.code_verifier){var j=k.JoseUtil.hashString(V.code_verifier,"SHA256");V._code_challenge=k.JoseUtil.hexToBase64Url(j)}return V._redirect_uri=T,V._authority=m,V._client_id=_,V._response_mode=L,V._client_secret=M,V._scope=N,V._extraTokenParams=I,V._skipUserInfo=P,V}return function(x,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}(w,p),w.prototype.toStorageString=function(){return b.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},w.fromStorageString=function(x){return b.Log.debug("SigninState.fromStorageString"),new w(JSON.parse(x))},C(w,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),w}(S.State)},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=function(){return("undefined"!=C&&null!==C&&void 0!==C.getRandomValues?b:S)().replace(/-/g,"")};var C="undefined"!=typeof window?window.crypto||window.msCrypto:null;function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(k){return(k^C.getRandomValues(new Uint8Array(1))[0]&15>>k/4).toString(16)})}function S(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(k){return(k^16*Math.random()>>k/4).toString(16)})}G.exports=F.default},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.User=void 0;var C=function(){function S(k,h){for(var f=0;f<h.length;f++){var u=h[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(k,u.key,u)}}return function(k,h,f){return h&&S(k.prototype,h),f&&S(k,f),k}}(),b=B(0);F.User=function(){function S(k){var h=k.id_token,f=k.session_state,u=k.access_token,p=k.refresh_token,w=k.token_type,g=k.scope,x=k.profile,m=k.expires_at,_=k.state;(function(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")})(this,S),this.id_token=h,this.session_state=f,this.access_token=u,this.refresh_token=p,this.token_type=w,this.scope=g,this.profile=x,this.expires_at=m,this.state=_}return S.prototype.toStorageString=function(){return b.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},S.fromStorageString=function(h){return b.Log.debug("User.fromStorageString"),new S(JSON.parse(h))},C(S,[{key:"expires_in",get:function(){if(this.expires_at){var h=parseInt(Date.now()/1e3);return this.expires_at-h}},set:function(h){var f=parseInt(h);if("number"==typeof f&&f>0){var u=parseInt(Date.now()/1e3);this.expires_at=u+f}}},{key:"expired",get:function(){var h=this.expires_in;if(void 0!==h)return h<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.AccessTokenEvents=void 0;var C=B(0),b=B(46);function S(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}F.AccessTokenEvents=function(){function k(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=h.accessTokenExpiringNotificationTime,u=void 0===f?60:f,p=h.accessTokenExpiringTimer,w=void 0===p?new b.Timer("Access token expiring"):p,g=h.accessTokenExpiredTimer,x=void 0===g?new b.Timer("Access token expired"):g;S(this,k),this._accessTokenExpiringNotificationTime=u,this._accessTokenExpiring=w,this._accessTokenExpired=x}return k.prototype.load=function(f){if(f.access_token&&void 0!==f.expires_in){var u=f.expires_in;if(C.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",u),u>0){var p=u-this._accessTokenExpiringNotificationTime;p<=0&&(p=1),C.Log.debug("AccessTokenEvents.load: registering expiring timer in:",p),this._accessTokenExpiring.init(p)}else C.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var w=u+1;C.Log.debug("AccessTokenEvents.load: registering expired timer in:",w),this._accessTokenExpired.init(w)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},k.prototype.unload=function(){C.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},k.prototype.addAccessTokenExpiring=function(f){this._accessTokenExpiring.addHandler(f)},k.prototype.removeAccessTokenExpiring=function(f){this._accessTokenExpiring.removeHandler(f)},k.prototype.addAccessTokenExpired=function(f){this._accessTokenExpired.addHandler(f)},k.prototype.removeAccessTokenExpired=function(f){this._accessTokenExpired.removeHandler(f)},k}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Event=void 0;var C=B(0);F.Event=function(){function b(S){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,b),this._name=S,this._callbacks=[]}return b.prototype.addHandler=function(k){this._callbacks.push(k)},b.prototype.removeHandler=function(k){var h=this._callbacks.findIndex(function(f){return f===k});h>=0&&this._callbacks.splice(h,1)},b.prototype.raise=function(){C.Log.debug("Event: Raising event: "+this._name);for(var k=0;k<this._callbacks.length;k++){var h;(h=this._callbacks)[k].apply(h,arguments)}},b}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SessionMonitor=void 0;var C=function(){function f(u,p){for(var w=0;w<p.length;w++){var g=p[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,p,w){return p&&f(u.prototype,p),w&&f(u,w),u}}(),b=B(0),S=B(19),k=B(1);function h(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}F.SessionMonitor=function(){function f(u){var p=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.CheckSessionIFrame,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.Global.timer;if(h(this,f),!u)throw b.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=u,this._CheckSessionIFrameCtor=w,this._timer=g,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(x){x?p._start(x):p._settings.monitorAnonymousSession&&p._userManager.querySessionStatus().then(function(m){var _={session_state:m.session_state};m.sub&&m.sid&&(_.profile={sub:m.sub,sid:m.sid}),p._start(_)}).catch(function(m){b.Log.error("SessionMonitor ctor: error from querySessionStatus:",m.message)})}).catch(function(x){b.Log.error("SessionMonitor ctor: error from getUser:",x.message)}))}return f.prototype._start=function(p){var w=this,g=p.session_state;g&&(p.profile?(this._sub=p.profile.sub,this._sid=p.profile.sid,b.Log.debug("SessionMonitor._start: session_state:",g,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,b.Log.debug("SessionMonitor._start: session_state:",g,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(g):this._metadataService.getCheckSessionIframe().then(function(x){if(x){b.Log.debug("SessionMonitor._start: Initializing check session iframe");var m=w._client_id,_=w._checkSessionInterval,T=w._stopCheckSessionOnError;w._checkSessionIFrame=new w._CheckSessionIFrameCtor(w._callback.bind(w),m,x,_,T),w._checkSessionIFrame.load().then(function(){w._checkSessionIFrame.start(g)})}else b.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(x){b.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",x.message)}))},f.prototype._stop=function(){var p=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(b.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var w=this._timer.setInterval(function(){p._timer.clearInterval(w),p._userManager.querySessionStatus().then(function(g){var x={session_state:g.session_state};g.sub&&g.sid&&(x.profile={sub:g.sub,sid:g.sid}),p._start(x)}).catch(function(g){b.Log.error("SessionMonitor: error from querySessionStatus:",g.message)})},1e3)},f.prototype._callback=function(){var p=this;this._userManager.querySessionStatus().then(function(w){var g=!0;w?w.sub===p._sub?(g=!1,p._checkSessionIFrame.start(w.session_state),w.sid===p._sid?b.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",w.session_state):(b.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",w.session_state),p._userManager.events._raiseUserSessionChanged())):b.Log.debug("SessionMonitor._callback: Different subject signed into OP:",w.sub):b.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),g&&(p._sub?(b.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),p._userManager.events._raiseUserSignedOut()):(b.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),p._userManager.events._raiseUserSignedIn()))}).catch(function(w){p._sub&&(b.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",w.message),p._userManager.events._raiseUserSignedOut())})},C(f,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),f}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.CheckSessionIFrame=void 0;var C=B(0);function b(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}F.CheckSessionIFrame=function(){function S(k,h,f,u){var p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];b(this,S),this._callback=k,this._client_id=h,this._url=f,this._interval=u||2e3,this._stopOnError=p;var w=f.indexOf("/",f.indexOf("//")+2);this._frame_origin=f.substr(0,w),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=f}return S.prototype.load=function(){var h=this;return new Promise(function(f){h._frame.onload=function(){f()},window.document.body.appendChild(h._frame),h._boundMessageEvent=h._message.bind(h),window.addEventListener("message",h._boundMessageEvent,!1)})},S.prototype._message=function(h){h.origin===this._frame_origin&&h.source===this._frame.contentWindow&&("error"===h.data?(C.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===h.data?(C.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):C.Log.debug("CheckSessionIFrame: "+h.data+" message from check session op iframe"))},S.prototype.start=function(h){var f=this;if(this._session_state!==h){C.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=h;var u=function(){f._frame.contentWindow.postMessage(f._client_id+" "+f._session_state,f._frame_origin)};u(),this._timer=window.setInterval(u,this._interval)}},S.prototype.stop=function(){this._session_state=null,this._timer&&(C.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.TokenRevocationClient=void 0;var C=B(0),b=B(2),S=B(1);function k(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}var h="access_token",f="refresh_token";F.TokenRevocationClient=function(){function u(p){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Global.XMLHttpRequest,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.MetadataService;if(k(this,u),!p)throw C.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=p,this._XMLHttpRequestCtor=w,this._metadataService=new g(this._settings)}return u.prototype.revoke=function(w,g){var x=this,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!w)throw C.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(m!==h&&m!=f)throw C.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(_){if(_)return C.Log.debug("TokenRevocationClient.revoke: Revoking "+m),x._revoke(_,x._settings.client_id,x._settings.client_secret,w,m);if(g)throw C.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},u.prototype._revoke=function(w,g,x,m,_){var T=this;return new Promise(function(D,L){var M=new T._XMLHttpRequestCtor;M.open("POST",w),M.onload=function(){C.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",M.status),200===M.status?D():L(Error(M.statusText+" ("+M.status+")"))},M.onerror=function(){C.Log.debug("TokenRevocationClient.revoke: Network Error."),L("Network Error")};var N="client_id="+encodeURIComponent(g);x&&(N+="&client_secret="+encodeURIComponent(x)),N+="&token_type_hint="+encodeURIComponent(_),N+="&token="+encodeURIComponent(m),M.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),M.send(N)})},u}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.CordovaPopupWindow=void 0;var C=function(){function S(k,h){for(var f=0;f<h.length;f++){var u=h[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(k,u.key,u)}}return function(k,h,f){return h&&S(k.prototype,h),f&&S(k,f),k}}(),b=B(0);F.CordovaPopupWindow=function(){function S(k){var h=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,S),this._promise=new Promise(function(f,u){h._resolve=f,h._reject=u}),this.features=k.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=k.popupWindowTarget||"_blank",this.redirect_uri=k.startUrl,b.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return S.prototype._isInAppBrowserInstalled=function(h){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(f){return h.hasOwnProperty(f)})},S.prototype.navigate=function(h){if(h&&h.url){if(!window.cordova)return this._error("cordova is undefined");var f=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(f))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(h.url,this.target,this.features),this._popup?(b.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},S.prototype._loadStartCallback=function(h){0===h.url.indexOf(this.redirect_uri)&&this._success({url:h.url})},S.prototype._exitCallback=function(h){this._error(h)},S.prototype._success=function(h){this._cleanup(),b.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(h)},S.prototype._error=function(h){this._cleanup(),b.Log.error(h),this._reject(new Error(h))},S.prototype.close=function(){this._cleanup()},S.prototype._cleanup=function(){this._popup&&(b.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},C(S,[{key:"promise",get:function(){return this._promise}}]),S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var C=B(0),b=B(10),S=B(5),k=B(6),h=B(37),f=B(38),u=B(16),p=B(2),w=B(48),g=B(49),x=B(19),m=B(20),_=B(18),T=B(1),D=B(15),L=B(50);F.default={Version:L.Version,Log:C.Log,OidcClient:b.OidcClient,OidcClientSettings:S.OidcClientSettings,WebStorageStateStore:k.WebStorageStateStore,InMemoryWebStorage:h.InMemoryWebStorage,UserManager:f.UserManager,AccessTokenEvents:u.AccessTokenEvents,MetadataService:p.MetadataService,CordovaPopupNavigator:w.CordovaPopupNavigator,CordovaIFrameNavigator:g.CordovaIFrameNavigator,CheckSessionIFrame:x.CheckSessionIFrame,TokenRevocationClient:m.TokenRevocationClient,SessionMonitor:_.SessionMonitor,Global:T.Global,User:D.User},G.exports=F.default},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ClockService=function(){function C(){!function(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}(this,C)}return C.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},C}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ResponseValidator=void 0;var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},b=B(0),S=B(2),k=B(25),h=B(11),f=B(12),u=B(4);function p(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}var w=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];F.ResponseValidator=function(){function g(x){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.MetadataService,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.UserInfoService,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.JoseUtil,D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.TokenClient;if(p(this,g),!x)throw b.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=x,this._metadataService=new m(this._settings),this._userInfoService=new _(this._settings),this._joseUtil=T,this._tokenClient=new D(this._settings)}return g.prototype.validateSigninResponse=function(m,_){var T=this;return b.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(m,_).then(function(D){return b.Log.debug("ResponseValidator.validateSigninResponse: state processed"),T._validateTokens(m,D).then(function(L){return b.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),T._processClaims(m,L).then(function(M){return b.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),M})})})},g.prototype.validateSignoutResponse=function(m,_){return m.id!==_.state?(b.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(b.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),_.state=m.data,_.error?(b.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",_.error),Promise.reject(new f.ErrorResponse(_))):Promise.resolve(_))},g.prototype._processSigninParams=function(m,_){if(m.id!==_.state)return b.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!m.client_id)return b.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!m.authority)return b.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==m.authority)return b.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=m.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==m.client_id)return b.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=m.client_id;return b.Log.debug("ResponseValidator._processSigninParams: state validated"),_.state=m.data,_.error?(b.Log.warn("ResponseValidator._processSigninParams: Response was error",_.error),Promise.reject(new f.ErrorResponse(_))):m.nonce&&!_.id_token?(b.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!m.nonce&&_.id_token?(b.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):m.code_verifier&&!_.code?(b.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!m.code_verifier&&_.code?(b.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(_.scope||(_.scope=m.scope),Promise.resolve(_))},g.prototype._processClaims=function(m,_){var T=this;if(_.isOpenIdConnect){if(b.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),_.profile=this._filterProtocolClaims(_.profile),!0!==m.skipUserInfo&&this._settings.loadUserInfo&&_.access_token)return b.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(_.access_token).then(function(D){return b.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),D.sub!==_.profile.sub?(b.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(_.profile=T._mergeClaims(_.profile,D),b.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",_.profile),_)});b.Log.debug("ResponseValidator._processClaims: not loading user info")}else b.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(_)},g.prototype._mergeClaims=function(m,_){var T=Object.assign({},m);for(var D in _){var L=_[D];Array.isArray(L)||(L=[L]);for(var M=0;M<L.length;M++){var N=L[M];T[D]?Array.isArray(T[D])?T[D].indexOf(N)<0&&T[D].push(N):T[D]!==N&&(T[D]="object"===(void 0===N?"undefined":C(N))&&this._settings.mergeClaims?this._mergeClaims(T[D],N):[T[D],N]):T[D]=N}}return T},g.prototype._filterProtocolClaims=function(m){b.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",m);var _=Object.assign({},m);return this._settings._filterProtocolClaims?(w.forEach(function(T){delete _[T]}),b.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",_)):b.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),_},g.prototype._validateTokens=function(m,_){return _.code?(b.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(m,_)):_.id_token?_.access_token?(b.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(m,_)):(b.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(m,_)):(b.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(_))},g.prototype._processCode=function(m,_){var T=this,D={client_id:m.client_id,client_secret:m.client_secret,code:_.code,redirect_uri:m.redirect_uri,code_verifier:m.code_verifier};return m.extraTokenParams&&"object"===C(m.extraTokenParams)&&Object.assign(D,m.extraTokenParams),this._tokenClient.exchangeCode(D).then(function(L){for(var M in L)_[M]=L[M];return _.id_token?(b.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),T._validateIdTokenAttributes(m,_)):(b.Log.debug("ResponseValidator._processCode: token response successful, returning response"),_)})},g.prototype._validateIdTokenAttributes=function(m,_){var T=this;return this._metadataService.getIssuer().then(function(D){var L=m.client_id,M=T._settings.clockSkew;return b.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",M),T._settings.getEpochTime().then(function(N){return T._joseUtil.validateJwtAttributes(_.id_token,D,L,M,N).then(function(I){return m.nonce&&m.nonce!==I.nonce?(b.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):I.sub?(_.profile=I,_):(b.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},g.prototype._validateIdTokenAndAccessToken=function(m,_){var T=this;return this._validateIdToken(m,_).then(function(D){return T._validateAccessToken(D)})},g.prototype._getSigningKeyForJwt=function(m){var _=this;return this._metadataService.getSigningKeys().then(function(T){var D=m.header.kid;if(!T)return b.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));b.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var L=void 0;if(D)L=T.filter(function(M){return M.kid===D})[0];else{if((T=_._filterByAlg(T,m.header.alg)).length>1)return b.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));L=T[0]}return Promise.resolve(L)})},g.prototype._getSigningKeyForJwtWithSingleRetry=function(m){var _=this;return this._getSigningKeyForJwt(m).then(function(T){return T?Promise.resolve(T):(_._metadataService.resetSigningKeys(),_._getSigningKeyForJwt(m))})},g.prototype._validateIdToken=function(m,_){var T=this;if(!m.nonce)return b.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var D=this._joseUtil.parseJwt(_.id_token);return D&&D.header&&D.payload?m.nonce!==D.payload.nonce?(b.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(L){return b.Log.debug("ResponseValidator._validateIdToken: Received issuer"),T._getSigningKeyForJwtWithSingleRetry(D).then(function(M){if(!M)return b.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var N=m.client_id,I=T._settings.clockSkew;return b.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",I),T._joseUtil.validateJwt(_.id_token,M,L,N,I).then(function(){return b.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),D.payload.sub?(_.profile=D.payload,_):(b.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(b.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",D),Promise.reject(new Error("Failed to parse id_token")))},g.prototype._filterByAlg=function(m,_){var T=null;if(_.startsWith("RS"))T="RSA";else if(_.startsWith("PS"))T="PS";else{if(!_.startsWith("ES"))return b.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",_),[];T="EC"}return b.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",T),m=m.filter(function(D){return D.kty===T}),b.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",T,m.length),m},g.prototype._validateAccessToken=function(m){if(!m.profile)return b.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!m.profile.at_hash)return b.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!m.id_token)return b.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var _=this._joseUtil.parseJwt(m.id_token);if(!_||!_.header)return b.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",_),Promise.reject(new Error("Failed to parse id_token"));var T=_.header.alg;if(!T||5!==T.length)return b.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",T),Promise.reject(new Error("Unsupported alg: "+T));var D=T.substr(2,3);if(!D)return b.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",T,D),Promise.reject(new Error("Unsupported alg: "+T));if(256!==(D=parseInt(D))&&384!==D&&512!==D)return b.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",T,D),Promise.reject(new Error("Unsupported alg: "+T));var L="sha"+D,M=this._joseUtil.hashString(m.access_token,L);if(!M)return b.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",L),Promise.reject(new Error("Failed to validate at_hash"));var N=M.substr(0,M.length/2),I=this._joseUtil.hexToBase64Url(N);return I!==m.profile.at_hash?(b.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",I,m.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(b.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(m))},g}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.UserInfoService=void 0;var C=B(7),b=B(2),S=B(0),k=B(4);function h(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}F.UserInfoService=function(){function f(u){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.JsonService,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.MetadataService,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k.JoseUtil;if(h(this,f),!u)throw S.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=u,this._jsonService=new p(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new w(this._settings),this._joseUtil=g}return f.prototype.getClaims=function(p){var w=this;return p?this._metadataService.getUserInfoEndpoint().then(function(g){return S.Log.debug("UserInfoService.getClaims: received userinfo url",g),w._jsonService.getJson(g,p).then(function(x){return S.Log.debug("UserInfoService.getClaims: claims received",x),x})}):(S.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},f.prototype._getClaimsFromJwt=function(p){var w=this;try{var g=this._joseUtil.parseJwt(p.responseText);if(!g||!g.header||!g.payload)return S.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",g),Promise.reject(new Error("Failed to parse id_token"));var x=g.header.kid,m=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":m=this._metadataService.getIssuer();break;case"ANY":m=Promise.resolve(g.payload.iss);break;default:m=Promise.resolve(this._settings.userInfoJwtIssuer)}return m.then(function(_){return S.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+_),w._metadataService.getSigningKeys().then(function(T){if(!T)return S.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));S.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var D=void 0;if(x)D=T.filter(function(N){return N.kid===x})[0];else{if((T=w._filterByAlg(T,g.header.alg)).length>1)return S.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));D=T[0]}if(!D)return S.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var L=w._settings.client_id,M=w._settings.clockSkew;return S.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",M),w._joseUtil.validateJwt(p.responseText,D,_,L,M,void 0,!0).then(function(){return S.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),g.payload})})})}catch(_){return S.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",_.message),void reject(_)}},f.prototype._filterByAlg=function(p,w){var g=null;if(w.startsWith("RS"))g="RSA";else if(w.startsWith("PS"))g="PS";else{if(!w.startsWith("ES"))return S.Log.debug("UserInfoService._filterByAlg: alg not supported: ",w),[];g="EC"}return S.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",g),p=p.filter(function(x){return x.kty===g}),S.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",g,p.length),p},f}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.AllowedSigningAlgs=F.b64tohex=F.hextob64u=F.crypto=F.X509=F.KeyUtil=F.jws=void 0;var C=B(27);F.jws=C.jws,F.KeyUtil=C.KEYUTIL,F.X509=C.X509,F.crypto=C.crypto,F.hextob64u=C.hextob64u,F.b64tohex=C.b64tohex,F.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(G,F,B){"use strict";(function(C){Object.defineProperty(F,"__esModule",{value:!0});var b,S,k,h,f,u,p,w,g,x,m,y,O,z,Q,_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},T={userAgent:!1},D={},L=L||(b=Math,k=(S={}).lib={},h=k.Base=function(){function v(){}return{extend:function(O){v.prototype=this;var z=new v;return O&&z.mixIn(O),z.hasOwnProperty("init")||(z.init=function(){z.$super.init.apply(this,arguments)}),z.init.prototype=z,z.$super=this,z},create:function(){var O=this.extend();return O.init.apply(O,arguments),O},init:function(){},mixIn:function(O){for(var z in O)O.hasOwnProperty(z)&&(this[z]=O[z]);O.hasOwnProperty("toString")&&(this.toString=O.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=k.WordArray=h.extend({init:function(y,O){y=this.words=y||[],this.sigBytes=null!=O?O:4*y.length},toString:function(y){return(y||p).stringify(this)},concat:function(y){var O=this.words,z=y.words,Q=this.sigBytes,ge=y.sigBytes;if(this.clamp(),Q%4)for(var ke=0;ke<ge;ke++)O[Q+ke>>>2]|=(z[ke>>>2]>>>24-ke%4*8&255)<<24-(Q+ke)%4*8;else for(ke=0;ke<ge;ke+=4)O[Q+ke>>>2]=z[ke>>>2];return this.sigBytes+=ge,this},clamp:function(){var y=this.words,O=this.sigBytes;y[O>>>2]&=4294967295<<32-O%4*8,y.length=b.ceil(O/4)},clone:function(){var y=h.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var O=[],z=0;z<y;z+=4)O.push(4294967296*b.random()|0);return new f.init(O,y)}}),u=S.enc={},p=u.Hex={stringify:function(y){for(var O=y.words,z=y.sigBytes,Q=[],ge=0;ge<z;ge++){var ke=O[ge>>>2]>>>24-ge%4*8&255;Q.push((ke>>>4).toString(16)),Q.push((15&ke).toString(16))}return Q.join("")},parse:function(y){for(var O=y.length,z=[],Q=0;Q<O;Q+=2)z[Q>>>3]|=parseInt(y.substr(Q,2),16)<<24-Q%8*4;return new f.init(z,O/2)}},w=u.Latin1={stringify:function(y){for(var O=y.words,z=y.sigBytes,Q=[],ge=0;ge<z;ge++)Q.push(String.fromCharCode(O[ge>>>2]>>>24-ge%4*8&255));return Q.join("")},parse:function(y){for(var O=y.length,z=[],Q=0;Q<O;Q++)z[Q>>>2]|=(255&y.charCodeAt(Q))<<24-Q%4*8;return new f.init(z,O)}},g=u.Utf8={stringify:function(y){try{return decodeURIComponent(escape(w.stringify(y)))}catch(O){throw new Error("Malformed UTF-8 data")}},parse:function(y){return w.parse(unescape(encodeURIComponent(y)))}},x=k.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){"string"==typeof y&&(y=g.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var O=this._data,z=O.words,Q=O.sigBytes,ge=this.blockSize,ke=Q/(4*ge),We=(ke=y?b.ceil(ke):b.max((0|ke)-this._minBufferSize,0))*ge,Ue=b.min(4*We,Q);if(We){for(var Fe=0;Fe<We;Fe+=ge)this._doProcessBlock(z,Fe);var qe=z.splice(0,We);O.sigBytes-=Ue}return new f.init(qe,Ue)},clone:function(){var y=h.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),k.Hasher=x.extend({cfg:h.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){return y&&this._append(y),this._doFinalize()},blockSize:16,_createHelper:function(y){return function(O,z){return new y.init(z).finalize(O)}},_createHmacHelper:function(y){return function(O,z){return new m.HMAC.init(y,z).finalize(O)}}}),m=S.algo={},S);O=(y=L).lib,z=O.Base,Q=O.WordArray,(y=y.x64={}).Word=z.extend({init:function(ke,We){this.high=ke,this.low=We}}),y.WordArray=z.extend({init:function(ke,We){ke=this.words=ke||[],this.sigBytes=null!=We?We:8*ke.length},toX32:function(){for(var ke=this.words,We=ke.length,Ue=[],Fe=0;Fe<We;Fe++){var qe=ke[Fe];Ue.push(qe.high),Ue.push(qe.low)}return Q.create(Ue,this.sigBytes)},clone:function(){for(var ke=z.clone.call(this),We=ke.words=this.words.slice(0),Ue=We.length,Fe=0;Fe<Ue;Fe++)We[Fe]=We[Fe].clone();return ke}}),function(){var y=L.lib.WordArray;L.enc.Base64={stringify:function(z){var Q=z.words,ge=z.sigBytes,ke=this._map;z.clamp(),z=[];for(var We=0;We<ge;We+=3)for(var Ue=(Q[We>>>2]>>>24-We%4*8&255)<<16|(Q[We+1>>>2]>>>24-(We+1)%4*8&255)<<8|Q[We+2>>>2]>>>24-(We+2)%4*8&255,Fe=0;4>Fe&&We+.75*Fe<ge;Fe++)z.push(ke.charAt(Ue>>>6*(3-Fe)&63));if(Q=ke.charAt(64))for(;z.length%4;)z.push(Q);return z.join("")},parse:function(z){var Q=z.length,ge=this._map;(ke=ge.charAt(64))&&-1!=(ke=z.indexOf(ke))&&(Q=ke);for(var ke=[],We=0,Ue=0;Ue<Q;Ue++)if(Ue%4){var Fe=ge.indexOf(z.charAt(Ue-1))<<Ue%4*2,qe=ge.indexOf(z.charAt(Ue))>>>6-Ue%4*2;ke[We>>>2]|=(Fe|qe)<<24-We%4*8,We++}return y.create(ke,We)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(v){for(var y=L,O=(Q=y.lib).WordArray,z=Q.Hasher,Q=y.algo,ge=[],ke=[],We=function(ct){return 4294967296*(ct-(0|ct))|0},Ue=2,Fe=0;64>Fe;){var qe;e:{for(var Ve=v.sqrt(qe=Ue),et=2;et<=Ve;et++)if(!(qe%et)){qe=!1;break e}qe=!0}qe&&(8>Fe&&(ge[Fe]=We(v.pow(Ue,.5))),ke[Fe]=We(v.pow(Ue,1/3)),Fe++),Ue++}var rt=[];Q=Q.SHA256=z.extend({_doReset:function(){this._hash=new O.init(ge.slice(0))},_doProcessBlock:function(ct,pt){for(var Me=this._hash.words,Oe=Me[0],Je=Me[1],$e=Me[2],dt=Me[3],mt=Me[4],an=Me[5],Tt=Me[6],Jn=Me[7],jt=0;64>jt;jt++){if(16>jt)rt[jt]=0|ct[pt+jt];else{var xn=rt[jt-15],Ur=rt[jt-2];rt[jt]=((xn<<25|xn>>>7)^(xn<<14|xn>>>18)^xn>>>3)+rt[jt-7]+((Ur<<15|Ur>>>17)^(Ur<<13|Ur>>>19)^Ur>>>10)+rt[jt-16]}xn=Jn+((mt<<26|mt>>>6)^(mt<<21|mt>>>11)^(mt<<7|mt>>>25))+(mt&an^~mt&Tt)+ke[jt]+rt[jt],Ur=((Oe<<30|Oe>>>2)^(Oe<<19|Oe>>>13)^(Oe<<10|Oe>>>22))+(Oe&Je^Oe&$e^Je&$e),Jn=Tt,Tt=an,an=mt,mt=dt+xn|0,dt=$e,$e=Je,Je=Oe,Oe=xn+Ur|0}Me[0]=Me[0]+Oe|0,Me[1]=Me[1]+Je|0,Me[2]=Me[2]+$e|0,Me[3]=Me[3]+dt|0,Me[4]=Me[4]+mt|0,Me[5]=Me[5]+an|0,Me[6]=Me[6]+Tt|0,Me[7]=Me[7]+Jn|0},_doFinalize:function(){var ct=this._data,pt=ct.words,Me=8*this._nDataBytes,Oe=8*ct.sigBytes;return pt[Oe>>>5]|=128<<24-Oe%32,pt[14+(Oe+64>>>9<<4)]=v.floor(Me/4294967296),pt[15+(Oe+64>>>9<<4)]=Me,ct.sigBytes=4*pt.length,this._process(),this._hash},clone:function(){var ct=z.clone.call(this);return ct._hash=this._hash.clone(),ct}}),y.SHA256=z._createHelper(Q),y.HmacSHA256=z._createHmacHelper(Q)}(Math),function(){function v(){return z.create.apply(z,arguments)}for(var y=L,O=y.lib.Hasher,z=(ge=y.x64).Word,Q=ge.WordArray,ge=y.algo,ke=[v(1116352408,3609767458),v(1899447441,602891725),v(3049323471,3964484399),v(3921009573,2173295548),v(961987163,4081628472),v(1508970993,3053834265),v(2453635748,2937671579),v(2870763221,3664609560),v(3624381080,2734883394),v(310598401,1164996542),v(607225278,1323610764),v(1426881987,3590304994),v(1925078388,4068182383),v(2162078206,991336113),v(2614888103,633803317),v(3248222580,3479774868),v(3835390401,2666613458),v(4022224774,944711139),v(264347078,2341262773),v(604807628,2007800933),v(770255983,1495990901),v(1249150122,1856431235),v(1555081692,3175218132),v(1996064986,2198950837),v(2554220882,3999719339),v(2821834349,766784016),v(2952996808,2566594879),v(3210313671,3203337956),v(3336571891,1034457026),v(3584528711,2466948901),v(113926993,3758326383),v(338241895,168717936),v(666307205,1188179964),v(773529912,1546045734),v(1294757372,1522805485),v(1396182291,2643833823),v(1695183700,2343527390),v(1986661051,1014477480),v(2177026350,1206759142),v(2456956037,344077627),v(2730485921,1290863460),v(2820302411,3158454273),v(3259730800,3505952657),v(3345764771,106217008),v(3516065817,3606008344),v(3600352804,1432725776),v(4094571909,1467031594),v(275423344,851169720),v(430227734,3100823752),v(506948616,1363258195),v(659060556,3750685593),v(883997877,3785050280),v(958139571,3318307427),v(1322822218,3812723403),v(1537002063,2003034995),v(1747873779,3602036899),v(1955562222,1575990012),v(2024104815,1125592928),v(2227730452,2716904306),v(2361852424,442776044),v(2428436474,593698344),v(2756734187,3733110249),v(3204031479,2999351573),v(3329325298,3815920427),v(3391569614,3928383900),v(3515267271,566280711),v(3940187606,3454069534),v(4118630271,4000239992),v(116418474,1914138554),v(174292421,2731055270),v(289380356,3203993006),v(460393269,320620315),v(685471733,587496836),v(852142971,1086792851),v(1017036298,365543100),v(1126000580,2618297676),v(1288033470,3409855158),v(1501505948,4234509866),v(1607167915,987167468),v(1816402316,1246189591)],We=[],Ue=0;80>Ue;Ue++)We[Ue]=v();ge=ge.SHA512=O.extend({_doReset:function(){this._hash=new Q.init([new z.init(1779033703,4089235720),new z.init(3144134277,2227873595),new z.init(1013904242,4271175723),new z.init(2773480762,1595750129),new z.init(1359893119,2917565137),new z.init(2600822924,725511199),new z.init(528734635,4215389547),new z.init(1541459225,327033209)])},_doProcessBlock:function(qe,Ve){for(var et=(Je=this._hash.words)[0],rt=Je[1],ot=Je[2],ct=Je[3],pt=Je[4],Me=Je[5],Oe=Je[6],Je=Je[7],$e=et.high,dt=et.low,mt=rt.high,an=rt.low,Tt=ot.high,Jn=ot.low,jt=ct.high,xn=ct.low,Ur=pt.high,ii=pt.low,lr=Me.high,Jo=Me.low,eo=Oe.high,Zo=Oe.low,xi=Je.high,Ti=Je.low,$i=$e,Co=dt,Zl=mt,Mi=an,Ar=Tt,Wc=Jn,Ku=jt,$c=xn,kt=Ur,Bo=ii,mn=lr,_l=Jo,Yl=eo,Xl=Zo,Df=xi,Ql=Ti,ho=0;80>ho;ho++){var As=We[ho];if(16>ho)var ks=As.high=0|qe[Ve+2*ho],qr=As.low=0|qe[Ve+2*ho+1];else{ks=((qr=(ks=We[ho-15]).high)>>>1|(Cn=ks.low)<<31)^(qr>>>8|Cn<<24)^qr>>>7;var Cn=(Cn>>>1|qr<<31)^(Cn>>>8|qr<<24)^(Cn>>>7|qr<<25),qs=((qr=(qs=We[ho-2]).high)>>>19|(fi=qs.low)<<13)^(qr<<3|fi>>>29)^qr>>>6,fi=(fi>>>19|qr<<13)^(fi<<3|qr>>>29)^(fi>>>6|qr<<26),Ds=(qr=We[ho-7]).high,da=(La=We[ho-16]).high,La=La.low;ks=(ks=(ks=ks+Ds+((qr=Cn+qr.low)>>>0<Cn>>>0?1:0))+qs+((qr+=fi)>>>0<fi>>>0?1:0))+da+((qr+=La)>>>0<La>>>0?1:0),As.high=ks,As.low=qr}Ds=kt&mn^~kt&Yl,La=Bo&_l^~Bo&Xl,As=$i&Zl^$i&Ar^Zl&Ar;var Ba=Co&Mi^Co&Wc^Mi&Wc,Ts=(Cn=($i>>>28|Co<<4)^($i<<30|Co>>>2)^($i<<25|Co>>>7),qs=(Co>>>28|$i<<4)^(Co<<30|$i>>>2)^(Co<<25|$i>>>7),(fi=ke[ho]).high),Yg=fi.low;da=Df+((kt>>>14|Bo<<18)^(kt>>>18|Bo<<14)^(kt<<23|Bo>>>9))+((fi=Ql+((Bo>>>14|kt<<18)^(Bo>>>18|kt<<14)^(Bo<<23|kt>>>9)))>>>0<Ql>>>0?1:0),Df=Yl,Ql=Xl,Yl=mn,Xl=_l,mn=kt,_l=Bo,kt=Ku+(da=(da=(da=da+Ds+((fi+=La)>>>0<La>>>0?1:0))+Ts+((fi+=Yg)>>>0<Yg>>>0?1:0))+ks+((fi+=qr)>>>0<qr>>>0?1:0))+((Bo=$c+fi|0)>>>0<$c>>>0?1:0)|0,Ku=Ar,$c=Wc,Ar=Zl,Wc=Mi,Zl=$i,Mi=Co,$i=da+(As=Cn+As+((qr=qs+Ba)>>>0<qs>>>0?1:0))+((Co=fi+qr|0)>>>0<fi>>>0?1:0)|0}dt=et.low=dt+Co,et.high=$e+$i+(dt>>>0<Co>>>0?1:0),an=rt.low=an+Mi,rt.high=mt+Zl+(an>>>0<Mi>>>0?1:0),Jn=ot.low=Jn+Wc,ot.high=Tt+Ar+(Jn>>>0<Wc>>>0?1:0),xn=ct.low=xn+$c,ct.high=jt+Ku+(xn>>>0<$c>>>0?1:0),ii=pt.low=ii+Bo,pt.high=Ur+kt+(ii>>>0<Bo>>>0?1:0),Jo=Me.low=Jo+_l,Me.high=lr+mn+(Jo>>>0<_l>>>0?1:0),Zo=Oe.low=Zo+Xl,Oe.high=eo+Yl+(Zo>>>0<Xl>>>0?1:0),Ti=Je.low=Ti+Ql,Je.high=xi+Df+(Ti>>>0<Ql>>>0?1:0)},_doFinalize:function(){var qe=this._data,Ve=qe.words,et=8*this._nDataBytes,rt=8*qe.sigBytes;return Ve[rt>>>5]|=128<<24-rt%32,Ve[30+(rt+128>>>10<<5)]=Math.floor(et/4294967296),Ve[31+(rt+128>>>10<<5)]=et,qe.sigBytes=4*Ve.length,this._process(),this._hash.toX32()},clone:function(){var qe=O.clone.call(this);return qe._hash=this._hash.clone(),qe},blockSize:32}),y.SHA512=O._createHelper(ge),y.HmacSHA512=O._createHmacHelper(ge)}(),function(){var v=L,y=(Q=v.x64).Word,O=Q.WordArray,z=(Q=v.algo).SHA512,Q=Q.SHA384=z.extend({_doReset:function(){this._hash=new O.init([new y.init(3418070365,3238371032),new y.init(1654270250,914150663),new y.init(2438529370,812702999),new y.init(355462360,4144912697),new y.init(1731405415,4290775857),new y.init(2394180231,1750603025),new y.init(3675008525,1694076839),new y.init(1203062813,3204075428)])},_doFinalize:function(){var ke=z._doFinalize.call(this);return ke.sigBytes-=16,ke}});v.SHA384=z._createHelper(Q),v.HmacSHA384=z._createHmacHelper(Q)}();var M,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function I(v){var y,O,z="";for(y=0;y+3<=v.length;y+=3)O=parseInt(v.substring(y,y+3),16),z+=N.charAt(O>>6)+N.charAt(63&O);for(y+1==v.length?(O=parseInt(v.substring(y,y+1),16),z+=N.charAt(O<<2)):y+2==v.length&&(O=parseInt(v.substring(y,y+2),16),z+=N.charAt(O>>2)+N.charAt((3&O)<<4));(3&z.length)>0;)z+="=";return z}function P(v){var y,O,z,Q="",ge=0;for(y=0;y<v.length&&"="!=v.charAt(y);++y)(z=N.indexOf(v.charAt(y)))<0||(0==ge?(Q+=ue(z>>2),O=3&z,ge=1):1==ge?(Q+=ue(O<<2|z>>4),O=15&z,ge=2):2==ge?(Q+=ue(O),Q+=ue(z>>2),O=3&z,ge=3):(Q+=ue(O<<2|z>>4),Q+=ue(15&z),ge=0));return 1==ge&&(Q+=ue(O<<2)),Q}function V(v){var y,O=P(v),z=new Array;for(y=0;2*y<O.length;++y)z[y]=parseInt(O.substring(2*y,2*y+2),16);return z}function j(v,y,O){null!=v&&("number"==typeof v?this.fromNumber(v,y,O):this.fromString(v,null==y&&"string"!=typeof v?256:y))}function oe(){return new j(null)}"Microsoft Internet Explorer"==T.appName?(j.prototype.am=function(y,O,z,Q,ge,ke){for(var We=32767&O,Ue=O>>15;--ke>=0;){var Fe=32767&this[y],qe=this[y++]>>15,Ve=Ue*Fe+qe*We;ge=((Fe=We*Fe+((32767&Ve)<<15)+z[Q]+(1073741823&ge))>>>30)+(Ve>>>15)+Ue*qe+(ge>>>30),z[Q++]=1073741823&Fe}return ge},M=30):"Netscape"!=T.appName?(j.prototype.am=function(y,O,z,Q,ge,ke){for(;--ke>=0;){var We=O*this[y++]+z[Q]+ge;ge=Math.floor(We/67108864),z[Q++]=67108863&We}return ge},M=26):(j.prototype.am=function(y,O,z,Q,ge,ke){for(var We=16383&O,Ue=O>>14;--ke>=0;){var Fe=16383&this[y],qe=this[y++]>>14,Ve=Ue*Fe+qe*We;ge=((Fe=We*Fe+((16383&Ve)<<14)+z[Q]+ge)>>28)+(Ve>>14)+Ue*qe,z[Q++]=268435455&Fe}return ge},M=28),j.prototype.DB=M,j.prototype.DM=(1<<M)-1,j.prototype.DV=1<<M,j.prototype.FV=Math.pow(2,52),j.prototype.F1=52-M,j.prototype.F2=2*M-52;var J,le,q=new Array;for(J="0".charCodeAt(0),le=0;le<=9;++le)q[J++]=le;for(J="a".charCodeAt(0),le=10;le<36;++le)q[J++]=le;for(J="A".charCodeAt(0),le=10;le<36;++le)q[J++]=le;function ue(v){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(v)}function he(v,y){var O=q[v.charCodeAt(y)];return null==O?-1:O}function ce(v){var y=oe();return y.fromInt(v),y}function pe(v){var y,O=1;return 0!=(y=v>>>16)&&(v=y,O+=16),0!=(y=v>>8)&&(v=y,O+=8),0!=(y=v>>4)&&(v=y,O+=4),0!=(y=v>>2)&&(v=y,O+=2),0!=(y=v>>1)&&(v=y,O+=1),O}function fe(v){this.m=v}function Ee(v){this.m=v,this.mp=v.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<v.DB-15)-1,this.mt2=2*v.t}function _e(v,y){return v&y}function Te(v,y){return v|y}function De(v,y){return v^y}function be(v,y){return v&~y}function de(v){if(0==v)return-1;var y=0;return 0==(65535&v)&&(v>>=16,y+=16),0==(255&v)&&(v>>=8,y+=8),0==(15&v)&&(v>>=4,y+=4),0==(3&v)&&(v>>=2,y+=2),0==(1&v)&&++y,y}function we(v){for(var y=0;0!=v;)v&=v-1,++y;return y}function Ye(){}function ze(v){return v}function He(v){this.r2=oe(),this.q3=oe(),j.ONE.dlShiftTo(2*v.t,this.r2),this.mu=this.r2.divide(v),this.m=v}fe.prototype.convert=function(y){return y.s<0||y.compareTo(this.m)>=0?y.mod(this.m):y},fe.prototype.revert=function(y){return y},fe.prototype.reduce=function(y){y.divRemTo(this.m,null,y)},fe.prototype.mulTo=function(y,O,z){y.multiplyTo(O,z),this.reduce(z)},fe.prototype.sqrTo=function(y,O){y.squareTo(O),this.reduce(O)},Ee.prototype.convert=function(y){var O=oe();return y.abs().dlShiftTo(this.m.t,O),O.divRemTo(this.m,null,O),y.s<0&&O.compareTo(j.ZERO)>0&&this.m.subTo(O,O),O},Ee.prototype.revert=function(y){var O=oe();return y.copyTo(O),this.reduce(O),O},Ee.prototype.reduce=function(y){for(;y.t<=this.mt2;)y[y.t++]=0;for(var O=0;O<this.m.t;++O){var z=32767&y[O],Q=z*this.mpl+((z*this.mph+(y[O]>>15)*this.mpl&this.um)<<15)&y.DM;for(y[z=O+this.m.t]+=this.m.am(0,Q,y,O,0,this.m.t);y[z]>=y.DV;)y[z]-=y.DV,y[++z]++}y.clamp(),y.drShiftTo(this.m.t,y),y.compareTo(this.m)>=0&&y.subTo(this.m,y)},Ee.prototype.mulTo=function(y,O,z){y.multiplyTo(O,z),this.reduce(z)},Ee.prototype.sqrTo=function(y,O){y.squareTo(O),this.reduce(O)},j.prototype.copyTo=function(y){for(var O=this.t-1;O>=0;--O)y[O]=this[O];y.t=this.t,y.s=this.s},j.prototype.fromInt=function(y){this.t=1,this.s=y<0?-1:0,y>0?this[0]=y:y<-1?this[0]=y+this.DV:this.t=0},j.prototype.fromString=function(y,O){var z;if(16==O)z=4;else if(8==O)z=3;else if(256==O)z=8;else if(2==O)z=1;else if(32==O)z=5;else{if(4!=O)return void this.fromRadix(y,O);z=2}this.t=0,this.s=0;for(var Q=y.length,ge=!1,ke=0;--Q>=0;){var We=8==z?255&y[Q]:he(y,Q);We<0?"-"==y.charAt(Q)&&(ge=!0):(ge=!1,0==ke?this[this.t++]=We:ke+z>this.DB?(this[this.t-1]|=(We&(1<<this.DB-ke)-1)<<ke,this[this.t++]=We>>this.DB-ke):this[this.t-1]|=We<<ke,(ke+=z)>=this.DB&&(ke-=this.DB))}8==z&&0!=(128&y[0])&&(this.s=-1,ke>0&&(this[this.t-1]|=(1<<this.DB-ke)-1<<ke)),this.clamp(),ge&&j.ZERO.subTo(this,this)},j.prototype.clamp=function(){for(var y=this.s&this.DM;this.t>0&&this[this.t-1]==y;)--this.t},j.prototype.dlShiftTo=function(y,O){var z;for(z=this.t-1;z>=0;--z)O[z+y]=this[z];for(z=y-1;z>=0;--z)O[z]=0;O.t=this.t+y,O.s=this.s},j.prototype.drShiftTo=function(y,O){for(var z=y;z<this.t;++z)O[z-y]=this[z];O.t=Math.max(this.t-y,0),O.s=this.s},j.prototype.lShiftTo=function(y,O){var z,Q=y%this.DB,ge=this.DB-Q,ke=(1<<ge)-1,We=Math.floor(y/this.DB),Ue=this.s<<Q&this.DM;for(z=this.t-1;z>=0;--z)O[z+We+1]=this[z]>>ge|Ue,Ue=(this[z]&ke)<<Q;for(z=We-1;z>=0;--z)O[z]=0;O[We]=Ue,O.t=this.t+We+1,O.s=this.s,O.clamp()},j.prototype.rShiftTo=function(y,O){O.s=this.s;var z=Math.floor(y/this.DB);if(z>=this.t)O.t=0;else{var Q=y%this.DB,ge=this.DB-Q,ke=(1<<Q)-1;O[0]=this[z]>>Q;for(var We=z+1;We<this.t;++We)O[We-z-1]|=(this[We]&ke)<<ge,O[We-z]=this[We]>>Q;Q>0&&(O[this.t-z-1]|=(this.s&ke)<<ge),O.t=this.t-z,O.clamp()}},j.prototype.subTo=function(y,O){for(var z=0,Q=0,ge=Math.min(y.t,this.t);z<ge;)Q+=this[z]-y[z],O[z++]=Q&this.DM,Q>>=this.DB;if(y.t<this.t){for(Q-=y.s;z<this.t;)Q+=this[z],O[z++]=Q&this.DM,Q>>=this.DB;Q+=this.s}else{for(Q+=this.s;z<y.t;)Q-=y[z],O[z++]=Q&this.DM,Q>>=this.DB;Q-=y.s}O.s=Q<0?-1:0,Q<-1?O[z++]=this.DV+Q:Q>0&&(O[z++]=Q),O.t=z,O.clamp()},j.prototype.multiplyTo=function(y,O){var z=this.abs(),Q=y.abs(),ge=z.t;for(O.t=ge+Q.t;--ge>=0;)O[ge]=0;for(ge=0;ge<Q.t;++ge)O[ge+z.t]=z.am(0,Q[ge],O,ge,0,z.t);O.s=0,O.clamp(),this.s!=y.s&&j.ZERO.subTo(O,O)},j.prototype.squareTo=function(y){for(var O=this.abs(),z=y.t=2*O.t;--z>=0;)y[z]=0;for(z=0;z<O.t-1;++z){var Q=O.am(z,O[z],y,2*z,0,1);(y[z+O.t]+=O.am(z+1,2*O[z],y,2*z+1,Q,O.t-z-1))>=O.DV&&(y[z+O.t]-=O.DV,y[z+O.t+1]=1)}y.t>0&&(y[y.t-1]+=O.am(z,O[z],y,2*z,0,1)),y.s=0,y.clamp()},j.prototype.divRemTo=function(y,O,z){var Q=y.abs();if(!(Q.t<=0)){var ge=this.abs();if(ge.t<Q.t)return null!=O&&O.fromInt(0),void(null!=z&&this.copyTo(z));null==z&&(z=oe());var ke=oe(),We=this.s,Ue=y.s,Fe=this.DB-pe(Q[Q.t-1]);Fe>0?(Q.lShiftTo(Fe,ke),ge.lShiftTo(Fe,z)):(Q.copyTo(ke),ge.copyTo(z));var qe=ke.t,Ve=ke[qe-1];if(0!=Ve){var et=Ve*(1<<this.F1)+(qe>1?ke[qe-2]>>this.F2:0),rt=this.FV/et,ot=(1<<this.F1)/et,ct=1<<this.F2,pt=z.t,Me=pt-qe,Oe=null==O?oe():O;for(ke.dlShiftTo(Me,Oe),z.compareTo(Oe)>=0&&(z[z.t++]=1,z.subTo(Oe,z)),j.ONE.dlShiftTo(qe,Oe),Oe.subTo(ke,ke);ke.t<qe;)ke[ke.t++]=0;for(;--Me>=0;){var Je=z[--pt]==Ve?this.DM:Math.floor(z[pt]*rt+(z[pt-1]+ct)*ot);if((z[pt]+=ke.am(0,Je,z,Me,0,qe))<Je)for(ke.dlShiftTo(Me,Oe),z.subTo(Oe,z);z[pt]<--Je;)z.subTo(Oe,z)}null!=O&&(z.drShiftTo(qe,O),We!=Ue&&j.ZERO.subTo(O,O)),z.t=qe,z.clamp(),Fe>0&&z.rShiftTo(Fe,z),We<0&&j.ZERO.subTo(z,z)}}},j.prototype.invDigit=function(){if(this.t<1)return 0;var y=this[0];if(0==(1&y))return 0;var O=3&y;return(O=(O=(O=(O=O*(2-(15&y)*O)&15)*(2-(255&y)*O)&255)*(2-((65535&y)*O&65535))&65535)*(2-y*O%this.DV)%this.DV)>0?this.DV-O:-O},j.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},j.prototype.exp=function(y,O){if(y>4294967295||y<1)return j.ONE;var z=oe(),Q=oe(),ge=O.convert(this),ke=pe(y)-1;for(ge.copyTo(z);--ke>=0;)if(O.sqrTo(z,Q),(y&1<<ke)>0)O.mulTo(Q,ge,z);else{var We=z;z=Q,Q=We}return O.revert(z)},j.prototype.toString=function(y){if(this.s<0)return"-"+this.negate().toString(y);var O;if(16==y)O=4;else if(8==y)O=3;else if(2==y)O=1;else if(32==y)O=5;else{if(4!=y)return this.toRadix(y);O=2}var z,Q=(1<<O)-1,ge=!1,ke="",We=this.t,Ue=this.DB-We*this.DB%O;if(We-- >0)for(Ue<this.DB&&(z=this[We]>>Ue)>0&&(ge=!0,ke=ue(z));We>=0;)Ue<O?(z=(this[We]&(1<<Ue)-1)<<O-Ue,z|=this[--We]>>(Ue+=this.DB-O)):(z=this[We]>>(Ue-=O)&Q,Ue<=0&&(Ue+=this.DB,--We)),z>0&&(ge=!0),ge&&(ke+=ue(z));return ge?ke:"0"},j.prototype.negate=function(){var y=oe();return j.ZERO.subTo(this,y),y},j.prototype.abs=function(){return this.s<0?this.negate():this},j.prototype.compareTo=function(y){var O=this.s-y.s;if(0!=O)return O;var z=this.t;if(0!=(O=z-y.t))return this.s<0?-O:O;for(;--z>=0;)if(0!=(O=this[z]-y[z]))return O;return 0},j.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+pe(this[this.t-1]^this.s&this.DM)},j.prototype.mod=function(y){var O=oe();return this.abs().divRemTo(y,null,O),this.s<0&&O.compareTo(j.ZERO)>0&&y.subTo(O,O),O},j.prototype.modPowInt=function(y,O){var z;return z=y<256||O.isEven()?new fe(O):new Ee(O),this.exp(y,z)},j.ZERO=ce(0),j.ONE=ce(1),Ye.prototype.convert=ze,Ye.prototype.revert=ze,Ye.prototype.mulTo=function(y,O,z){y.multiplyTo(O,z)},Ye.prototype.sqrTo=function(y,O){y.squareTo(O)},He.prototype.convert=function(y){if(y.s<0||y.t>2*this.m.t)return y.mod(this.m);if(y.compareTo(this.m)<0)return y;var O=oe();return y.copyTo(O),this.reduce(O),O},He.prototype.revert=function(y){return y},He.prototype.reduce=function(y){for(y.drShiftTo(this.m.t-1,this.r2),y.t>this.m.t+1&&(y.t=this.m.t+1,y.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);y.compareTo(this.r2)<0;)y.dAddOffset(1,this.m.t+1);for(y.subTo(this.r2,y);y.compareTo(this.m)>=0;)y.subTo(this.m,y)},He.prototype.mulTo=function(y,O,z){y.multiplyTo(O,z),this.reduce(z)},He.prototype.sqrTo=function(y,O){y.squareTo(O),this.reduce(O)};var ie,$,se,Ne=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ye=(1<<26)/Ne[Ne.length-1];function ee(){this.i=0,this.j=0,this.S=new Array}function K(){!function(y){$[se++]^=255&y,$[se++]^=y>>8&255,$[se++]^=y>>16&255,$[se++]^=y>>24&255,se>=256&&(se-=256)}((new Date).getTime())}if(j.prototype.chunkSize=function(y){return Math.floor(Math.LN2*this.DB/Math.log(y))},j.prototype.toRadix=function(y){if(null==y&&(y=10),0==this.signum()||y<2||y>36)return"0";var O=this.chunkSize(y),z=Math.pow(y,O),Q=ce(z),ge=oe(),ke=oe(),We="";for(this.divRemTo(Q,ge,ke);ge.signum()>0;)We=(z+ke.intValue()).toString(y).substr(1)+We,ge.divRemTo(Q,ge,ke);return ke.intValue().toString(y)+We},j.prototype.fromRadix=function(y,O){this.fromInt(0),null==O&&(O=10);for(var z=this.chunkSize(O),Q=Math.pow(O,z),ge=!1,ke=0,We=0,Ue=0;Ue<y.length;++Ue){var Fe=he(y,Ue);Fe<0?"-"==y.charAt(Ue)&&0==this.signum()&&(ge=!0):(We=O*We+Fe,++ke>=z&&(this.dMultiply(Q),this.dAddOffset(We,0),ke=0,We=0))}ke>0&&(this.dMultiply(Math.pow(O,ke)),this.dAddOffset(We,0)),ge&&j.ZERO.subTo(this,this)},j.prototype.fromNumber=function(y,O,z){if("number"==typeof O)if(y<2)this.fromInt(1);else for(this.fromNumber(y,z),this.testBit(y-1)||this.bitwiseTo(j.ONE.shiftLeft(y-1),Te,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(O);)this.dAddOffset(2,0),this.bitLength()>y&&this.subTo(j.ONE.shiftLeft(y-1),this);else{var Q=new Array,ge=7&y;Q.length=1+(y>>3),O.nextBytes(Q),ge>0?Q[0]&=(1<<ge)-1:Q[0]=0,this.fromString(Q,256)}},j.prototype.bitwiseTo=function(y,O,z){var Q,ge,ke=Math.min(y.t,this.t);for(Q=0;Q<ke;++Q)z[Q]=O(this[Q],y[Q]);if(y.t<this.t){for(ge=y.s&this.DM,Q=ke;Q<this.t;++Q)z[Q]=O(this[Q],ge);z.t=this.t}else{for(ge=this.s&this.DM,Q=ke;Q<y.t;++Q)z[Q]=O(ge,y[Q]);z.t=y.t}z.s=O(this.s,y.s),z.clamp()},j.prototype.changeBit=function(y,O){var z=j.ONE.shiftLeft(y);return this.bitwiseTo(z,O,z),z},j.prototype.addTo=function(y,O){for(var z=0,Q=0,ge=Math.min(y.t,this.t);z<ge;)Q+=this[z]+y[z],O[z++]=Q&this.DM,Q>>=this.DB;if(y.t<this.t){for(Q+=y.s;z<this.t;)Q+=this[z],O[z++]=Q&this.DM,Q>>=this.DB;Q+=this.s}else{for(Q+=this.s;z<y.t;)Q+=y[z],O[z++]=Q&this.DM,Q>>=this.DB;Q+=y.s}O.s=Q<0?-1:0,Q>0?O[z++]=Q:Q<-1&&(O[z++]=this.DV+Q),O.t=z,O.clamp()},j.prototype.dMultiply=function(y){this[this.t]=this.am(0,y-1,this,0,0,this.t),++this.t,this.clamp()},j.prototype.dAddOffset=function(y,O){if(0!=y){for(;this.t<=O;)this[this.t++]=0;for(this[O]+=y;this[O]>=this.DV;)this[O]-=this.DV,++O>=this.t&&(this[this.t++]=0),++this[O]}},j.prototype.multiplyLowerTo=function(y,O,z){var Q,ge=Math.min(this.t+y.t,O);for(z.s=0,z.t=ge;ge>0;)z[--ge]=0;for(Q=z.t-this.t;ge<Q;++ge)z[ge+this.t]=this.am(0,y[ge],z,ge,0,this.t);for(Q=Math.min(y.t,O);ge<Q;++ge)this.am(0,y[ge],z,ge,0,O-ge);z.clamp()},j.prototype.multiplyUpperTo=function(y,O,z){--O;var Q=z.t=this.t+y.t-O;for(z.s=0;--Q>=0;)z[Q]=0;for(Q=Math.max(O-this.t,0);Q<y.t;++Q)z[this.t+Q-O]=this.am(O-Q,y[Q],z,0,0,this.t+Q-O);z.clamp(),z.drShiftTo(1,z)},j.prototype.modInt=function(y){if(y<=0)return 0;var O=this.DV%y,z=this.s<0?y-1:0;if(this.t>0)if(0==O)z=this[0]%y;else for(var Q=this.t-1;Q>=0;--Q)z=(O*z+this[Q])%y;return z},j.prototype.millerRabin=function(y){var O=this.subtract(j.ONE),z=O.getLowestSetBit();if(z<=0)return!1;var Q=O.shiftRight(z);(y=y+1>>1)>Ne.length&&(y=Ne.length);for(var ge=oe(),ke=0;ke<y;++ke){ge.fromInt(Ne[Math.floor(Math.random()*Ne.length)]);var We=ge.modPow(Q,this);if(0!=We.compareTo(j.ONE)&&0!=We.compareTo(O)){for(var Ue=1;Ue++<z&&0!=We.compareTo(O);)if(0==(We=We.modPowInt(2,this)).compareTo(j.ONE))return!1;if(0!=We.compareTo(O))return!1}}return!0},j.prototype.clone=function(){var y=oe();return this.copyTo(y),y},j.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},j.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},j.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},j.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},j.prototype.toByteArray=function(){var y=this.t,O=new Array;O[0]=this.s;var z,Q=this.DB-y*this.DB%8,ge=0;if(y-- >0)for(Q<this.DB&&(z=this[y]>>Q)!=(this.s&this.DM)>>Q&&(O[ge++]=z|this.s<<this.DB-Q);y>=0;)Q<8?(z=(this[y]&(1<<Q)-1)<<8-Q,z|=this[--y]>>(Q+=this.DB-8)):(z=this[y]>>(Q-=8)&255,Q<=0&&(Q+=this.DB,--y)),0!=(128&z)&&(z|=-256),0==ge&&(128&this.s)!=(128&z)&&++ge,(ge>0||z!=this.s)&&(O[ge++]=z);return O},j.prototype.equals=function(y){return 0==this.compareTo(y)},j.prototype.min=function(y){return this.compareTo(y)<0?this:y},j.prototype.max=function(y){return this.compareTo(y)>0?this:y},j.prototype.and=function(y){var O=oe();return this.bitwiseTo(y,_e,O),O},j.prototype.or=function(y){var O=oe();return this.bitwiseTo(y,Te,O),O},j.prototype.xor=function(y){var O=oe();return this.bitwiseTo(y,De,O),O},j.prototype.andNot=function(y){var O=oe();return this.bitwiseTo(y,be,O),O},j.prototype.not=function(){for(var y=oe(),O=0;O<this.t;++O)y[O]=this.DM&~this[O];return y.t=this.t,y.s=~this.s,y},j.prototype.shiftLeft=function(y){var O=oe();return y<0?this.rShiftTo(-y,O):this.lShiftTo(y,O),O},j.prototype.shiftRight=function(y){var O=oe();return y<0?this.lShiftTo(-y,O):this.rShiftTo(y,O),O},j.prototype.getLowestSetBit=function(){for(var y=0;y<this.t;++y)if(0!=this[y])return y*this.DB+de(this[y]);return this.s<0?this.t*this.DB:-1},j.prototype.bitCount=function(){for(var y=0,O=this.s&this.DM,z=0;z<this.t;++z)y+=we(this[z]^O);return y},j.prototype.testBit=function(y){var O=Math.floor(y/this.DB);return O>=this.t?0!=this.s:0!=(this[O]&1<<y%this.DB)},j.prototype.setBit=function(y){return this.changeBit(y,Te)},j.prototype.clearBit=function(y){return this.changeBit(y,be)},j.prototype.flipBit=function(y){return this.changeBit(y,De)},j.prototype.add=function(y){var O=oe();return this.addTo(y,O),O},j.prototype.subtract=function(y){var O=oe();return this.subTo(y,O),O},j.prototype.multiply=function(y){var O=oe();return this.multiplyTo(y,O),O},j.prototype.divide=function(y){var O=oe();return this.divRemTo(y,O,null),O},j.prototype.remainder=function(y){var O=oe();return this.divRemTo(y,null,O),O},j.prototype.divideAndRemainder=function(y){var O=oe(),z=oe();return this.divRemTo(y,O,z),new Array(O,z)},j.prototype.modPow=function(y,O){var z,Q,ge=y.bitLength(),ke=ce(1);if(ge<=0)return ke;z=ge<18?1:ge<48?3:ge<144?4:ge<768?5:6,Q=ge<8?new fe(O):O.isEven()?new He(O):new Ee(O);var We=new Array,Ue=3,Fe=z-1,qe=(1<<z)-1;if(We[1]=Q.convert(this),z>1){var Ve=oe();for(Q.sqrTo(We[1],Ve);Ue<=qe;)We[Ue]=oe(),Q.mulTo(Ve,We[Ue-2],We[Ue]),Ue+=2}var et,rt,ot=y.t-1,ct=!0,pt=oe();for(ge=pe(y[ot])-1;ot>=0;){for(ge>=Fe?et=y[ot]>>ge-Fe&qe:(et=(y[ot]&(1<<ge+1)-1)<<Fe-ge,ot>0&&(et|=y[ot-1]>>this.DB+ge-Fe)),Ue=z;0==(1&et);)et>>=1,--Ue;if((ge-=Ue)<0&&(ge+=this.DB,--ot),ct)We[et].copyTo(ke),ct=!1;else{for(;Ue>1;)Q.sqrTo(ke,pt),Q.sqrTo(pt,ke),Ue-=2;Ue>0?Q.sqrTo(ke,pt):(rt=ke,ke=pt,pt=rt),Q.mulTo(pt,We[et],ke)}for(;ot>=0&&0==(y[ot]&1<<ge);)Q.sqrTo(ke,pt),rt=ke,ke=pt,pt=rt,--ge<0&&(ge=this.DB-1,--ot)}return Q.revert(ke)},j.prototype.modInverse=function(y){var O=y.isEven();if(this.isEven()&&O||0==y.signum())return j.ZERO;for(var z=y.clone(),Q=this.clone(),ge=ce(1),ke=ce(0),We=ce(0),Ue=ce(1);0!=z.signum();){for(;z.isEven();)z.rShiftTo(1,z),O?(ge.isEven()&&ke.isEven()||(ge.addTo(this,ge),ke.subTo(y,ke)),ge.rShiftTo(1,ge)):ke.isEven()||ke.subTo(y,ke),ke.rShiftTo(1,ke);for(;Q.isEven();)Q.rShiftTo(1,Q),O?(We.isEven()&&Ue.isEven()||(We.addTo(this,We),Ue.subTo(y,Ue)),We.rShiftTo(1,We)):Ue.isEven()||Ue.subTo(y,Ue),Ue.rShiftTo(1,Ue);z.compareTo(Q)>=0?(z.subTo(Q,z),O&&ge.subTo(We,ge),ke.subTo(Ue,ke)):(Q.subTo(z,Q),O&&We.subTo(ge,We),Ue.subTo(ke,Ue))}return 0!=Q.compareTo(j.ONE)?j.ZERO:Ue.compareTo(y)>=0?Ue.subtract(y):Ue.signum()<0?(Ue.addTo(y,Ue),Ue.signum()<0?Ue.add(y):Ue):Ue},j.prototype.pow=function(y){return this.exp(y,new Ye)},j.prototype.gcd=function(y){var O=this.s<0?this.negate():this.clone(),z=y.s<0?y.negate():y.clone();if(O.compareTo(z)<0){var Q=O;O=z,z=Q}var ge=O.getLowestSetBit(),ke=z.getLowestSetBit();if(ke<0)return O;for(ge<ke&&(ke=ge),ke>0&&(O.rShiftTo(ke,O),z.rShiftTo(ke,z));O.signum()>0;)(ge=O.getLowestSetBit())>0&&O.rShiftTo(ge,O),(ge=z.getLowestSetBit())>0&&z.rShiftTo(ge,z),O.compareTo(z)>=0?(O.subTo(z,O),O.rShiftTo(1,O)):(z.subTo(O,z),z.rShiftTo(1,z));return ke>0&&z.lShiftTo(ke,z),z},j.prototype.isProbablePrime=function(y){var O,z=this.abs();if(1==z.t&&z[0]<=Ne[Ne.length-1]){for(O=0;O<Ne.length;++O)if(z[0]==Ne[O])return!0;return!1}if(z.isEven())return!1;for(O=1;O<Ne.length;){for(var Q=Ne[O],ge=O+1;ge<Ne.length&&Q<ye;)Q*=Ne[ge++];for(Q=z.modInt(Q);O<ge;)if(Q%Ne[O++]==0)return!1}return z.millerRabin(y)},j.prototype.square=function(){var y=oe();return this.squareTo(y),y},ee.prototype.init=function(y){var O,z,Q;for(O=0;O<256;++O)this.S[O]=O;for(z=0,O=0;O<256;++O)Q=this.S[O],this.S[O]=this.S[z=z+this.S[O]+y[O%y.length]&255],this.S[z]=Q;this.i=0,this.j=0},ee.prototype.next=function(){var y;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,y=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=y,this.S[y+this.S[this.i]&255]},null==$){var te;if($=new Array,se=0,void 0!==D&&(void 0!==D.crypto||void 0!==D.msCrypto)){var X=D.crypto||D.msCrypto;if(X.getRandomValues){var me=new Uint8Array(32);for(X.getRandomValues(me),te=0;te<32;++te)$[se++]=me[te]}else if("Netscape"==T.appName&&T.appVersion<"5"){var R=D.crypto.random(32);for(te=0;te<R.length;++te)$[se++]=255&R.charCodeAt(te)}}for(;se<256;)te=Math.floor(65536*Math.random()),$[se++]=te>>>8,$[se++]=255&te;se=0,K()}function H(){if(null==ie){for(K(),(ie=new ee).init($),se=0;se<$.length;++se)$[se]=0;se=0}return ie.next()}function Z(){}function Ae(v,y){return new j(v,y)}function Ke(v,y,O){for(var z="",Q=0;z.length<y;)z+=O(String.fromCharCode.apply(String,v.concat([(4278190080&Q)>>24,(16711680&Q)>>16,(65280&Q)>>8,255&Q]))),Q+=1;return z}function Re(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ht(v,y){this.x=y,this.q=v}function Et(v,y,O,z){this.curve=v,this.x=y,this.y=O,this.z=null==z?j.ONE:z,this.zinv=null}function Ft(v,y,O){this.q=v,this.a=this.fromBigInteger(y),this.b=this.fromBigInteger(O),this.infinity=new Et(this,null,null)}Z.prototype.nextBytes=function(y){var O;for(O=0;O<y.length;++O)y[O]=H()},Re.prototype.doPublic=function(y){return y.modPowInt(this.e,this.n)},Re.prototype.setPublic=function(y,O){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof y)this.n=y,this.e=O;else{if(!(null!=y&&null!=O&&y.length>0&&O.length>0))throw"Invalid RSA public key";this.n=Ae(y,16),this.e=parseInt(O,16)}},Re.prototype.encrypt=function(y){var O=function(ke,We){if(We<ke.length+11)throw"Message too long for RSA";for(var Ue=new Array,Fe=ke.length-1;Fe>=0&&We>0;){var qe=ke.charCodeAt(Fe--);qe<128?Ue[--We]=qe:qe>127&&qe<2048?(Ue[--We]=63&qe|128,Ue[--We]=qe>>6|192):(Ue[--We]=63&qe|128,Ue[--We]=qe>>6&63|128,Ue[--We]=qe>>12|224)}Ue[--We]=0;for(var Ve=new Z,et=new Array;We>2;){for(et[0]=0;0==et[0];)Ve.nextBytes(et);Ue[--We]=et[0]}return Ue[--We]=2,Ue[--We]=0,new j(Ue)}(y,this.n.bitLength()+7>>3);if(null==O)return null;var z=this.doPublic(O);if(null==z)return null;var Q=z.toString(16);return 0==(1&Q.length)?Q:"0"+Q},Re.prototype.encryptOAEP=function(y,O,z){var Q=function(Ue,Fe,qe,Ve){var et=Ie.crypto.MessageDigest,rt=Ie.crypto.Util,ot=null;if(qe||(qe="sha1"),"string"==typeof qe&&(ot=et.getCanonicalAlgName(qe),Ve=et.getHashLength(ot),qe=function(Tt){return Wi(rt.hashHex(So(Tt),ot))}),Ue.length+2*Ve+2>Fe)throw"Message too long for RSA";var ct,pt="";for(ct=0;ct<Fe-Ue.length-2*Ve-2;ct+=1)pt+="\0";var Me=qe("")+pt+"\x01"+Ue,Oe=new Array(Ve);(new Z).nextBytes(Oe);var Je=Ke(Oe,Me.length,qe),$e=[];for(ct=0;ct<Me.length;ct+=1)$e[ct]=Me.charCodeAt(ct)^Je.charCodeAt(ct);var dt=Ke($e,Oe.length,qe),mt=[0];for(ct=0;ct<Oe.length;ct+=1)mt[ct+1]=Oe[ct]^dt.charCodeAt(ct);return new j(mt.concat($e))}(y,this.n.bitLength()+7>>3,O,z);if(null==Q)return null;var ge=this.doPublic(Q);if(null==ge)return null;var ke=ge.toString(16);return 0==(1&ke.length)?ke:"0"+ke},Re.prototype.type="RSA",ht.prototype.equals=function(y){return y==this||this.q.equals(y.q)&&this.x.equals(y.x)},ht.prototype.toBigInteger=function(){return this.x},ht.prototype.negate=function(){return new ht(this.q,this.x.negate().mod(this.q))},ht.prototype.add=function(y){return new ht(this.q,this.x.add(y.toBigInteger()).mod(this.q))},ht.prototype.subtract=function(y){return new ht(this.q,this.x.subtract(y.toBigInteger()).mod(this.q))},ht.prototype.multiply=function(y){return new ht(this.q,this.x.multiply(y.toBigInteger()).mod(this.q))},ht.prototype.square=function(){return new ht(this.q,this.x.square().mod(this.q))},ht.prototype.divide=function(y){return new ht(this.q,this.x.multiply(y.toBigInteger().modInverse(this.q)).mod(this.q))},Et.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Et.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Et.prototype.equals=function(y){return y==this||(this.isInfinity()?y.isInfinity():y.isInfinity()?this.isInfinity():!!y.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(y.z)).mod(this.curve.q).equals(j.ZERO)&&y.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(y.z)).mod(this.curve.q).equals(j.ZERO))},Et.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(j.ZERO)&&!this.y.toBigInteger().equals(j.ZERO)},Et.prototype.negate=function(){return new Et(this.curve,this.x,this.y.negate(),this.z)},Et.prototype.add=function(y){if(this.isInfinity())return y;if(y.isInfinity())return this;var O=y.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(y.z)).mod(this.curve.q),z=y.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(y.z)).mod(this.curve.q);if(j.ZERO.equals(z))return j.ZERO.equals(O)?this.twice():this.curve.getInfinity();var Q=new j("3"),ge=this.x.toBigInteger(),ke=this.y.toBigInteger(),We=(y.x.toBigInteger(),y.y.toBigInteger(),z.square()),Ue=We.multiply(z),Fe=ge.multiply(We),qe=O.square().multiply(this.z),Ve=qe.subtract(Fe.shiftLeft(1)).multiply(y.z).subtract(Ue).multiply(z).mod(this.curve.q),et=Fe.multiply(Q).multiply(O).subtract(ke.multiply(Ue)).subtract(qe.multiply(O)).multiply(y.z).add(O.multiply(Ue)).mod(this.curve.q),rt=Ue.multiply(this.z).multiply(y.z).mod(this.curve.q);return new Et(this.curve,this.curve.fromBigInteger(Ve),this.curve.fromBigInteger(et),rt)},Et.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var y=new j("3"),O=this.x.toBigInteger(),z=this.y.toBigInteger(),Q=z.multiply(this.z),ge=Q.multiply(z).mod(this.curve.q),ke=this.curve.a.toBigInteger(),We=O.square().multiply(y);j.ZERO.equals(ke)||(We=We.add(this.z.square().multiply(ke)));var Ue=(We=We.mod(this.curve.q)).square().subtract(O.shiftLeft(3).multiply(ge)).shiftLeft(1).multiply(Q).mod(this.curve.q),Fe=We.multiply(y).multiply(O).subtract(ge.shiftLeft(1)).shiftLeft(2).multiply(ge).subtract(We.square().multiply(We)).mod(this.curve.q),qe=Q.square().multiply(Q).shiftLeft(3).mod(this.curve.q);return new Et(this.curve,this.curve.fromBigInteger(Ue),this.curve.fromBigInteger(Fe),qe)},Et.prototype.multiply=function(y){if(this.isInfinity())return this;if(0==y.signum())return this.curve.getInfinity();var O,z=y,Q=z.multiply(new j("3")),ge=this.negate(),ke=this,We=this.curve.q.subtract(y),Ue=We.multiply(new j("3")),Fe=new Et(this.curve,this.x,this.y),qe=Fe.negate();for(O=Q.bitLength()-2;O>0;--O){ke=ke.twice();var Ve=Q.testBit(O);Ve!=z.testBit(O)&&(ke=ke.add(Ve?this:ge))}for(O=Ue.bitLength()-2;O>0;--O){Fe=Fe.twice();var et=Ue.testBit(O);et!=We.testBit(O)&&(Fe=Fe.add(et?Fe:qe))}return ke},Et.prototype.multiplyTwo=function(y,O,z){var Q;Q=y.bitLength()>z.bitLength()?y.bitLength()-1:z.bitLength()-1;for(var ge=this.curve.getInfinity(),ke=this.add(O);Q>=0;)ge=ge.twice(),y.testBit(Q)?ge=z.testBit(Q)?ge.add(ke):ge.add(this):z.testBit(Q)&&(ge=ge.add(O)),--Q;return ge},Ft.prototype.getQ=function(){return this.q},Ft.prototype.getA=function(){return this.a},Ft.prototype.getB=function(){return this.b},Ft.prototype.equals=function(y){return y==this||this.q.equals(y.q)&&this.a.equals(y.a)&&this.b.equals(y.b)},Ft.prototype.getInfinity=function(){return this.infinity},Ft.prototype.fromBigInteger=function(y){return new ht(this.q,y)},Ft.prototype.decodePointHex=function(y){switch(parseInt(y.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var O=(y.length-2)/2,z=y.substr(2,O),Q=y.substr(O+2,O);return new Et(this,this.fromBigInteger(new j(z,16)),this.fromBigInteger(new j(Q,16)))}},ht.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Et.prototype.getEncoded=function(v){var y=function(ke,We){var Ue=ke.toByteArrayUnsigned();if(We<Ue.length)Ue=Ue.slice(Ue.length-We);else for(;We>Ue.length;)Ue.unshift(0);return Ue},O=this.getX().toBigInteger(),z=this.getY().toBigInteger(),Q=y(O,32);return v?z.isEven()?Q.unshift(2):Q.unshift(3):(Q.unshift(4),Q=Q.concat(y(z,32))),Q},Et.decodeFrom=function(v,y){var O=y.length-1,z=y.slice(1,1+O/2),Q=y.slice(1+O/2,1+O);z.unshift(0),Q.unshift(0);var ge=new j(z),ke=new j(Q);return new Et(v,v.fromBigInteger(ge),v.fromBigInteger(ke))},Et.decodeFromHex=function(v,y){y.substr(0,2);var O=y.length-2,z=y.substr(2,O/2),Q=y.substr(2+O/2,O/2),ge=new j(z,16),ke=new j(Q,16);return new Et(v,v.fromBigInteger(ge),v.fromBigInteger(ke))},Et.prototype.add2D=function(v){if(this.isInfinity())return v;if(v.isInfinity())return this;if(this.x.equals(v.x))return this.y.equals(v.y)?this.twice():this.curve.getInfinity();var y=v.x.subtract(this.x),O=v.y.subtract(this.y).divide(y),z=O.square().subtract(this.x).subtract(v.x),Q=O.multiply(this.x.subtract(z)).subtract(this.y);return new Et(this.curve,z,Q)},Et.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var v=this.curve.fromBigInteger(j.valueOf(2)),y=this.curve.fromBigInteger(j.valueOf(3)),O=this.x.square().multiply(y).add(this.curve.a).divide(this.y.multiply(v)),z=O.square().subtract(this.x.multiply(v)),Q=O.multiply(this.x.subtract(z)).subtract(this.y);return new Et(this.curve,z,Q)},Et.prototype.multiply2D=function(v){if(this.isInfinity())return this;if(0==v.signum())return this.curve.getInfinity();var y,O=v,z=O.multiply(new j("3")),Q=this.negate(),ge=this;for(y=z.bitLength()-2;y>0;--y){ge=ge.twice();var ke=z.testBit(y);ke!=O.testBit(y)&&(ge=ge.add2D(ke?this:Q))}return ge},Et.prototype.isOnCurve=function(){var v=this.getX().toBigInteger(),y=this.getY().toBigInteger(),O=this.curve.getA().toBigInteger(),z=this.curve.getB().toBigInteger(),Q=this.curve.getQ(),ge=y.multiply(y).mod(Q),ke=v.multiply(v).multiply(v).add(O.multiply(v)).add(z).mod(Q);return ge.equals(ke)},Et.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Et.prototype.validate=function(){var v=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var y=this.getX().toBigInteger(),O=this.getY().toBigInteger();if(y.compareTo(j.ONE)<0||y.compareTo(v.subtract(j.ONE))>0)throw new Error("x coordinate out of bounds");if(O.compareTo(j.ONE)<0||O.compareTo(v.subtract(j.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(v).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ln=function(){var v=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),y=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),O={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function z(ke,We,Ue){return We?O[We]:String.fromCharCode(parseInt(Ue,16))}var Q=new String(""),ge=Object.hasOwnProperty;return function(ke,We){var Ue,Fe,qe=ke.match(v),Ve=qe[0],et=!1;"{"===Ve?Ue={}:"["===Ve?Ue=[]:(Ue=[],et=!0);for(var rt=[Ue],ot=1-et,ct=qe.length;ot<ct;++ot){var pt;switch((Ve=qe[ot]).charCodeAt(0)){default:(pt=rt[0])[Fe||pt.length]=+Ve,Fe=void 0;break;case 34:if(-1!==(Ve=Ve.substring(1,Ve.length-1)).indexOf("\\")&&(Ve=Ve.replace(y,z)),pt=rt[0],!Fe){if(!(pt instanceof Array)){Fe=Ve||Q;break}Fe=pt.length}pt[Fe]=Ve,Fe=void 0;break;case 91:rt.unshift((pt=rt[0])[Fe||pt.length]=[]),Fe=void 0;break;case 93:case 125:rt.shift();break;case 102:(pt=rt[0])[Fe||pt.length]=!1,Fe=void 0;break;case 110:(pt=rt[0])[Fe||pt.length]=null,Fe=void 0;break;case 116:(pt=rt[0])[Fe||pt.length]=!0,Fe=void 0;break;case 123:rt.unshift((pt=rt[0])[Fe||pt.length]={}),Fe=void 0}}if(et){if(1!==rt.length)throw new Error;Ue=Ue[0]}else if(rt.length)throw new Error;return We&&(Ue=function Me(Oe,Je){var $e=Oe[Je];if($e&&"object"===(void 0===$e?"undefined":_($e))){var dt=null;for(var mt in $e)if(ge.call($e,mt)&&$e!==Oe){var an=Me($e,mt);void 0!==an?$e[mt]=an:(dt||(dt=[]),dt.push(mt))}if(dt)for(var Tt=dt.length;--Tt>=0;)delete $e[dt[Tt]]}return We.call(Oe,Je,$e)}({"":Ue},"")),Ue}}();void 0!==Ie&&Ie||(F.KJUR=Ie={}),void 0!==Ie.asn1&&Ie.asn1||(Ie.asn1={}),Ie.asn1.ASN1Util=new function(){this.integerToByteHex=function(v){var y=v.toString(16);return y.length%2==1&&(y="0"+y),y},this.bigIntToMinTwosComplementsHex=function(v){var y=v.toString(16);if("-"!=y.substr(0,1))y.length%2==1?y="0"+y:y.match(/^[0-7]/)||(y="00"+y);else{var O=y.substr(1).length;O%2==1?O+=1:y.match(/^[0-7]/)||(O+=2);for(var z="",Q=0;Q<O;Q++)z+="f";y=new j(z,16).xor(v).add(j.ONE).toString(16).replace(/^-/,"")}return y},this.getPEMStringFromHex=function(v,y){return uo(v,y)},this.newObject=function(v){var y=Ie.asn1,O=y.ASN1Object,z=y.DERBoolean,Q=y.DERInteger,ge=y.DERBitString,ke=y.DEROctetString,We=y.DERNull,Ue=y.DERObjectIdentifier,Fe=y.DEREnumerated,qe=y.DERUTF8String,Ve=y.DERNumericString,et=y.DERPrintableString,rt=y.DERTeletexString,ot=y.DERIA5String,ct=y.DERUTCTime,pt=y.DERGeneralizedTime,Me=y.DERVisibleString,Oe=y.DERBMPString,Je=y.DERSequence,$e=y.DERSet,dt=y.DERTaggedObject,mt=y.ASN1Util.newObject;if(v instanceof y.ASN1Object)return v;var an=Object.keys(v);if(1!=an.length)throw new Error("key of param shall be only one.");var Tt=an[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Tt+":"))throw new Error("undefined key: "+Tt);if("bool"==Tt)return new z(v[Tt]);if("int"==Tt)return new Q(v[Tt]);if("bitstr"==Tt)return new ge(v[Tt]);if("octstr"==Tt)return new ke(v[Tt]);if("null"==Tt)return new We(v[Tt]);if("oid"==Tt)return new Ue(v[Tt]);if("enum"==Tt)return new Fe(v[Tt]);if("utf8str"==Tt)return new qe(v[Tt]);if("numstr"==Tt)return new Ve(v[Tt]);if("prnstr"==Tt)return new et(v[Tt]);if("telstr"==Tt)return new rt(v[Tt]);if("ia5str"==Tt)return new ot(v[Tt]);if("utctime"==Tt)return new ct(v[Tt]);if("gentime"==Tt)return new pt(v[Tt]);if("visstr"==Tt)return new Me(v[Tt]);if("bmpstr"==Tt)return new Oe(v[Tt]);if("asn1"==Tt)return new O(v[Tt]);if("seq"==Tt){for(var Jn=v[Tt],jt=[],xn=0;xn<Jn.length;xn++){var Ur=mt(Jn[xn]);jt.push(Ur)}return new Je({array:jt})}if("set"==Tt){for(Jn=v[Tt],jt=[],xn=0;xn<Jn.length;xn++)Ur=mt(Jn[xn]),jt.push(Ur);return new $e({array:jt})}if("tag"==Tt){var ii=v[Tt];if("[object Array]"===Object.prototype.toString.call(ii)&&3==ii.length){var lr=mt(ii[2]);return new dt({tag:ii[0],explicit:ii[1],obj:lr})}return new dt(ii)}},this.jsonToASN1HEX=function(v){return this.newObject(v).getEncodedHex()}},Ie.asn1.ASN1Util.oidHexToInt=function(v){for(var y="",O=parseInt(v.substr(0,2),16),z=(y=Math.floor(O/40)+"."+O%40,""),Q=2;Q<v.length;Q+=2){var ge=("00000000"+parseInt(v.substr(Q,2),16).toString(2)).slice(-8);z+=ge.substr(1,7),"0"==ge.substr(0,1)&&(y=y+"."+new j(z,2).toString(10),z="")}return y},Ie.asn1.ASN1Util.oidIntToHex=function(v){var y=function(Ue){var Fe=Ue.toString(16);return 1==Fe.length&&(Fe="0"+Fe),Fe},O=function(Ue){var Fe="",qe=new j(Ue,10).toString(2),Ve=7-qe.length%7;7==Ve&&(Ve=0);for(var et="",rt=0;rt<Ve;rt++)et+="0";for(qe=et+qe,rt=0;rt<qe.length-1;rt+=7){var ot=qe.substr(rt,7);rt!=qe.length-7&&(ot="1"+ot),Fe+=y(parseInt(ot,2))}return Fe};if(!v.match(/^[0-9.]+$/))throw"malformed oid string: "+v;var z="",Q=v.split("."),ge=40*parseInt(Q[0])+parseInt(Q[1]);z+=y(ge),Q.splice(0,2);for(var ke=0;ke<Q.length;ke++)z+=O(Q[ke]);return z},Ie.asn1.ASN1Object=function(v){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var y=this.hV.length/2,O=y.toString(16);if(O.length%2==1&&(O="0"+O),y<128)return O;var z=O.length/2;if(z>15)throw"ASN.1 length too long to represent by 8x: n = "+y.toString(16);return(128+z).toString(16)+O},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(y){this.params=y},null!=v&&null!=v.tlv&&(this.hTLV=v.tlv,this.isModified=!1)},Ie.asn1.DERAbstractString=function(v){Ie.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(y){this.hTLV=null,this.isModified=!0,this.s=y,this.hV=Ko(this.s).toLowerCase()},this.setStringHex=function(y){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=y},this.getFreshValueHex=function(){return this.hV},void 0!==v&&("string"==typeof v?this.setString(v):void 0!==v.str?this.setString(v.str):void 0!==v.hex&&this.setStringHex(v.hex))},hi(Ie.asn1.DERAbstractString,Ie.asn1.ASN1Object),Ie.asn1.DERAbstractTime=function(v){Ie.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(y){var O=y.getTime()+6e4*y.getTimezoneOffset();return new Date(O)},this.formatDate=function(y,O,z){var Q=this.zeroPadding,ge=this.localDateToUTC(y),ke=String(ge.getFullYear());"utc"==O&&(ke=ke.substr(2,2));var We=ke+Q(String(ge.getMonth()+1),2)+Q(String(ge.getDate()),2)+Q(String(ge.getHours()),2)+Q(String(ge.getMinutes()),2)+Q(String(ge.getSeconds()),2);if(!0===z){var Ue=ge.getMilliseconds();if(0!=Ue){var Fe=Q(String(Ue),3);We=We+"."+(Fe=Fe.replace(/[0]+$/,""))}}return We+"Z"},this.zeroPadding=function(y,O){return y.length>=O?y:new Array(O-y.length+1).join("0")+y},this.getString=function(){return this.s},this.setString=function(y){this.hTLV=null,this.isModified=!0,this.s=y,this.hV=Kn(y)},this.setByDateValue=function(y,O,z,Q,ge,ke){var We=new Date(Date.UTC(y,O-1,z,Q,ge,ke,0));this.setByDate(We)},this.getFreshValueHex=function(){return this.hV}},hi(Ie.asn1.DERAbstractTime,Ie.asn1.ASN1Object),Ie.asn1.DERAbstractStructured=function(v){Ie.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(y){this.hTLV=null,this.isModified=!0,this.asn1Array=y},this.appendASN1Object=function(y){this.hTLV=null,this.isModified=!0,this.asn1Array.push(y)},this.asn1Array=new Array,void 0!==v&&void 0!==v.array&&(this.asn1Array=v.array)},hi(Ie.asn1.DERAbstractStructured,Ie.asn1.ASN1Object),Ie.asn1.DERBoolean=function(v){Ie.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==v?"010100":"0101ff"},hi(Ie.asn1.DERBoolean,Ie.asn1.ASN1Object),Ie.asn1.DERInteger=function(v){Ie.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(y){this.hTLV=null,this.isModified=!0,this.hV=Ie.asn1.ASN1Util.bigIntToMinTwosComplementsHex(y)},this.setByInteger=function(y){var O=new j(String(y),10);this.setByBigInteger(O)},this.setValueHex=function(y){this.hV=y},this.getFreshValueHex=function(){return this.hV},void 0!==v&&(void 0!==v.bigint?this.setByBigInteger(v.bigint):void 0!==v.int?this.setByInteger(v.int):"number"==typeof v?this.setByInteger(v):void 0!==v.hex&&this.setValueHex(v.hex))},hi(Ie.asn1.DERInteger,Ie.asn1.ASN1Object),Ie.asn1.DERBitString=function(v){if(void 0!==v&&void 0!==v.obj){var y=Ie.asn1.ASN1Util.newObject(v.obj);v.hex="00"+y.getEncodedHex()}Ie.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(O){this.hTLV=null,this.isModified=!0,this.hV=O},this.setUnusedBitsAndHexValue=function(O,z){if(O<0||7<O)throw"unused bits shall be from 0 to 7: u = "+O;var Q="0"+O;this.hTLV=null,this.isModified=!0,this.hV=Q+z},this.setByBinaryString=function(O){var z=8-(O=O.replace(/0+$/,"")).length%8;8==z&&(z=0);for(var Q=0;Q<=z;Q++)O+="0";var ge="";for(Q=0;Q<O.length-1;Q+=8){var ke=O.substr(Q,8),We=parseInt(ke,2).toString(16);1==We.length&&(We="0"+We),ge+=We}this.hTLV=null,this.isModified=!0,this.hV="0"+z+ge},this.setByBooleanArray=function(O){for(var z="",Q=0;Q<O.length;Q++)z+=1==O[Q]?"1":"0";this.setByBinaryString(z)},this.newFalseArray=function(O){for(var z=new Array(O),Q=0;Q<O;Q++)z[Q]=!1;return z},this.getFreshValueHex=function(){return this.hV},void 0!==v&&("string"==typeof v&&v.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(v):void 0!==v.hex?this.setHexValueIncludingUnusedBits(v.hex):void 0!==v.bin?this.setByBinaryString(v.bin):void 0!==v.array&&this.setByBooleanArray(v.array))},hi(Ie.asn1.DERBitString,Ie.asn1.ASN1Object),Ie.asn1.DEROctetString=function(v){if(void 0!==v&&void 0!==v.obj){var y=Ie.asn1.ASN1Util.newObject(v.obj);v.hex=y.getEncodedHex()}Ie.asn1.DEROctetString.superclass.constructor.call(this,v),this.hT="04"},hi(Ie.asn1.DEROctetString,Ie.asn1.DERAbstractString),Ie.asn1.DERNull=function(){Ie.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},hi(Ie.asn1.DERNull,Ie.asn1.ASN1Object),Ie.asn1.DERObjectIdentifier=function(v){Ie.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(y){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=y},this.setValueOidString=function(y){var O=function(Q){var ge=function(et){var rt=et.toString(16);return 1==rt.length&&(rt="0"+rt),rt},ke=function(et){var rt="",ot=parseInt(et,10).toString(2),ct=7-ot.length%7;7==ct&&(ct=0);for(var pt="",Me=0;Me<ct;Me++)pt+="0";for(ot=pt+ot,Me=0;Me<ot.length-1;Me+=7){var Oe=ot.substr(Me,7);Me!=ot.length-7&&(Oe="1"+Oe),rt+=ge(parseInt(Oe,2))}return rt};try{if(!Q.match(/^[0-9.]+$/))return null;var We="",Ue=Q.split("."),Fe=40*parseInt(Ue[0],10)+parseInt(Ue[1],10);We+=ge(Fe),Ue.splice(0,2);for(var qe=0;qe<Ue.length;qe++)We+=ke(Ue[qe]);return We}catch(Ve){return null}}(y);if(null==O)throw new Error("malformed oid string: "+y);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=O},this.setValueName=function(y){var O=Ie.asn1.x509.OID.name2oid(y);if(""===O)throw new Error("DERObjectIdentifier oidName undefined: "+y);this.setValueOidString(O)},this.setValueNameOrOid=function(y){y.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(y):this.setValueName(y)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(y){"string"==typeof y?this.setValueNameOrOid(y):void 0!==y.oid?this.setValueNameOrOid(y.oid):void 0!==y.name?this.setValueNameOrOid(y.name):void 0!==y.hex&&this.setValueHex(y.hex)},void 0!==v&&this.setByParam(v)},hi(Ie.asn1.DERObjectIdentifier,Ie.asn1.ASN1Object),Ie.asn1.DEREnumerated=function(v){Ie.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(y){this.hTLV=null,this.isModified=!0,this.hV=Ie.asn1.ASN1Util.bigIntToMinTwosComplementsHex(y)},this.setByInteger=function(y){var O=new j(String(y),10);this.setByBigInteger(O)},this.setValueHex=function(y){this.hV=y},this.getFreshValueHex=function(){return this.hV},void 0!==v&&(void 0!==v.int?this.setByInteger(v.int):"number"==typeof v?this.setByInteger(v):void 0!==v.hex&&this.setValueHex(v.hex))},hi(Ie.asn1.DEREnumerated,Ie.asn1.ASN1Object),Ie.asn1.DERUTF8String=function(v){Ie.asn1.DERUTF8String.superclass.constructor.call(this,v),this.hT="0c"},hi(Ie.asn1.DERUTF8String,Ie.asn1.DERAbstractString),Ie.asn1.DERNumericString=function(v){Ie.asn1.DERNumericString.superclass.constructor.call(this,v),this.hT="12"},hi(Ie.asn1.DERNumericString,Ie.asn1.DERAbstractString),Ie.asn1.DERPrintableString=function(v){Ie.asn1.DERPrintableString.superclass.constructor.call(this,v),this.hT="13"},hi(Ie.asn1.DERPrintableString,Ie.asn1.DERAbstractString),Ie.asn1.DERTeletexString=function(v){Ie.asn1.DERTeletexString.superclass.constructor.call(this,v),this.hT="14"},hi(Ie.asn1.DERTeletexString,Ie.asn1.DERAbstractString),Ie.asn1.DERIA5String=function(v){Ie.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="16"},hi(Ie.asn1.DERIA5String,Ie.asn1.DERAbstractString),Ie.asn1.DERVisibleString=function(v){Ie.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="1a"},hi(Ie.asn1.DERVisibleString,Ie.asn1.DERAbstractString),Ie.asn1.DERBMPString=function(v){Ie.asn1.DERBMPString.superclass.constructor.call(this,v),this.hT="1e"},hi(Ie.asn1.DERBMPString,Ie.asn1.DERAbstractString),Ie.asn1.DERUTCTime=function(v){Ie.asn1.DERUTCTime.superclass.constructor.call(this,v),this.hT="17",this.setByDate=function(y){this.hTLV=null,this.isModified=!0,this.date=y,this.s=this.formatDate(this.date,"utc"),this.hV=Kn(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Kn(this.s)),this.hV},void 0!==v&&(void 0!==v.str?this.setString(v.str):"string"==typeof v&&v.match(/^[0-9]{12}Z$/)?this.setString(v):void 0!==v.hex?this.setStringHex(v.hex):void 0!==v.date&&this.setByDate(v.date))},hi(Ie.asn1.DERUTCTime,Ie.asn1.DERAbstractTime),Ie.asn1.DERGeneralizedTime=function(v){Ie.asn1.DERGeneralizedTime.superclass.constructor.call(this,v),this.hT="18",this.withMillis=!1,this.setByDate=function(y){this.hTLV=null,this.isModified=!0,this.date=y,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Kn(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Kn(this.s)),this.hV},void 0!==v&&(void 0!==v.str?this.setString(v.str):"string"==typeof v&&v.match(/^[0-9]{14}Z$/)?this.setString(v):void 0!==v.hex?this.setStringHex(v.hex):void 0!==v.date&&this.setByDate(v.date),!0===v.millis&&(this.withMillis=!0))},hi(Ie.asn1.DERGeneralizedTime,Ie.asn1.DERAbstractTime),Ie.asn1.DERSequence=function(v){Ie.asn1.DERSequence.superclass.constructor.call(this,v),this.hT="30",this.getFreshValueHex=function(){for(var y="",O=0;O<this.asn1Array.length;O++)y+=this.asn1Array[O].getEncodedHex();return this.hV=y,this.hV}},hi(Ie.asn1.DERSequence,Ie.asn1.DERAbstractStructured),Ie.asn1.DERSet=function(v){Ie.asn1.DERSet.superclass.constructor.call(this,v),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var y=new Array,O=0;O<this.asn1Array.length;O++)y.push(this.asn1Array[O].getEncodedHex());return 1==this.sortFlag&&y.sort(),this.hV=y.join(""),this.hV},void 0!==v&&void 0!==v.sortflag&&0==v.sortflag&&(this.sortFlag=!1)},hi(Ie.asn1.DERSet,Ie.asn1.DERAbstractStructured),Ie.asn1.DERTaggedObject=function(v){Ie.asn1.DERTaggedObject.superclass.constructor.call(this);var y=Ie.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(O,z,Q){this.hT=z,this.isExplicit=O,this.asn1Object=Q,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Q.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,z),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(O){null!=O.tag&&(this.hT=O.tag),null!=O.explicit&&(this.isExplicit=O.explicit),null!=O.tage&&(this.hT=O.tage,this.isExplicit=!0),null!=O.tagi&&(this.hT=O.tagi,this.isExplicit=!1),null!=O.obj&&(O.obj instanceof y.ASN1Object?(this.asn1Object=O.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==_(O.obj)&&(this.asn1Object=y.ASN1Util.newObject(O.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=v&&this.setByParam(v)},hi(Ie.asn1.DERTaggedObject,Ie.asn1.ASN1Object);var Ie,bn,Er,xt=new function(){};function ni(v){for(var y=new Array,O=0;O<v.length;O++)y[O]=v.charCodeAt(O);return y}function zi(v){for(var y="",O=0;O<v.length;O++)y+=String.fromCharCode(v[O]);return y}function Fr(v){for(var y="",O=0;O<v.length;O++){var z=v[O].toString(16);1==z.length&&(z="0"+z),y+=z}return y}function Kn(v){return Fr(ni(v))}function ua(v){return(v=(v=v.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ss(v){return v.length%4==2?v+="==":v.length%4==3&&(v+="="),(v=v.replace(/-/g,"+")).replace(/_/g,"/")}function ri(v){return v.length%2==1&&(v="0"+v),ua(I(v))}function Rr(v){return P(Ss(v))}function Ko(v){return Pa(vl(v))}function $r(v){return decodeURIComponent(Or(v))}function Wi(v){for(var y="",O=0;O<v.length-1;O+=2)y+=String.fromCharCode(parseInt(v.substr(O,2),16));return y}function So(v){for(var y="",O=0;O<v.length;O++)y+=("0"+v.charCodeAt(O).toString(16)).slice(-2);return y}function Vc(v){return I(v)}function gl(v){return Vc(v).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function ml(v){return P(v.replace(/[^0-9A-Za-z\/+=]*/g,""))}function uo(v,y){return"-----BEGIN "+y+"-----\r\n"+gl(v)+"\r\n-----END "+y+"-----\r\n"}function Go(v,y){if(-1==v.indexOf("-----BEGIN "))throw"can't find PEM header: "+y;return ml(v=void 0!==y?(v=v.replace(new RegExp("^[^]*-----BEGIN "+y+"-----"),"")).replace(new RegExp("-----END "+y+"-----[^]*$"),""):(v=v.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Oa(v){var y,O,z,Q,ge,ke,We,Ue,Fe,qe,Ve;if(Ve=v.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return Ue=Ve[1],y=parseInt(Ue),2===Ue.length&&(50<=y&&y<100?y=1900+y:0<=y&&y<50&&(y=2e3+y)),O=parseInt(Ve[2])-1,z=parseInt(Ve[3]),Q=parseInt(Ve[4]),ge=parseInt(Ve[5]),ke=parseInt(Ve[6]),We=0,""!==(Fe=Ve[7])&&(qe=(Fe.substr(1)+"00").substr(0,3),We=parseInt(qe)),Date.UTC(y,O,z,Q,ge,ke,We);throw"unsupported zulu format: "+v}function yl(v){return~~(Oa(v)/1e3)}function Pa(v){return v.replace(/%/g,"")}function Or(v){return v.replace(/(..)/g,"%$1")}function Lo(v){var y="malformed IPv6 address";if(!v.match(/^[0-9A-Fa-f:]+$/))throw y;var O=(v=v.toLowerCase()).split(":").length-1;if(O<2)throw y;var z=":".repeat(7-O+2),Q=(v=v.replace("::",z)).split(":");if(8!=Q.length)throw y;for(var ge=0;ge<8;ge++)Q[ge]=("0000"+Q[ge]).slice(-4);return Q.join("")}function Fa(v){if(!v.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var y=(v=v.toLowerCase()).match(/.{1,4}/g),O=0;O<8;O++)y[O]=y[O].replace(/^0+/,""),""==y[O]&&(y[O]="0");var z=(v=":"+y.join(":")+":").match(/:(0:){2,}/g);if(null===z)return v.slice(1,-1);var Q="";for(O=0;O<z.length;O++)z[O].length>Q.length&&(Q=z[O]);return(v=v.replace(Q,"::")).slice(1,-1)}function zc(v){var y="malformed hex value";if(!v.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw y;if(8!=v.length)return 32==v.length?Fa(v):v;try{return parseInt(v.substr(0,2),16)+"."+parseInt(v.substr(2,2),16)+"."+parseInt(v.substr(4,2),16)+"."+parseInt(v.substr(6,2),16)}catch(O){throw y}}function Cf(v){return v.match(/.{4}/g).map(function(O){var z=parseInt(O.substr(0,2),16),Q=parseInt(O.substr(2),16);if(0==z&Q<128)return String.fromCharCode(Q);if(z<8){var ge=128|63&Q;return $r((192|(7&z)<<3|(192&Q)>>6).toString(16)+ge.toString(16))}ge=128|(15&z)<<2|(192&Q)>>6;var ke=128|63&Q;return $r((224|(240&z)>>4).toString(16)+ge.toString(16)+ke.toString(16))}).join("")}function vl(v){for(var y=encodeURIComponent(v),O="",z=0;z<y.length;z++)"%"==y[z]?(O+=y.substr(z,3),z+=2):O=O+"%"+Kn(y[z]);return O}function Na(v){return!(v.length%2!=0||!v.match(/^[0-9a-f]+$/)&&!v.match(/^[0-9A-F]+$/))}function $u(v){return v.length%2==1?"0"+v:v.substr(0,1)>"7"?"00"+v:v}xt.getLblen=function(v,y){if("8"!=v.substr(y+2,1))return 1;var O=parseInt(v.substr(y+3,1));return 0==O?-1:0<O&&O<10?O+1:-2},xt.getL=function(v,y){var O=xt.getLblen(v,y);return O<1?"":v.substr(y+2,2*O)},xt.getVblen=function(v,y){var O;return""==(O=xt.getL(v,y))?-1:("8"===O.substr(0,1)?new j(O.substr(2),16):new j(O,16)).intValue()},xt.getVidx=function(v,y){var O=xt.getLblen(v,y);return O<0?O:y+2*(O+1)},xt.getV=function(v,y){var O=xt.getVidx(v,y),z=xt.getVblen(v,y);return v.substr(O,2*z)},xt.getTLV=function(v,y){return v.substr(y,2)+xt.getL(v,y)+xt.getV(v,y)},xt.getTLVblen=function(v,y){return 2+2*xt.getLblen(v,y)+2*xt.getVblen(v,y)},xt.getNextSiblingIdx=function(v,y){return xt.getVidx(v,y)+2*xt.getVblen(v,y)},xt.getChildIdx=function(v,y){var O,z,Q,ge=xt,ke=[];O=ge.getVidx(v,y),z=2*ge.getVblen(v,y),"03"==v.substr(y,2)&&(O+=2,z-=2),Q=0;for(var We=O;Q<=z;){var Ue=ge.getTLVblen(v,We);if((Q+=Ue)<=z&&ke.push(We),We+=Ue,Q>=z)break}return ke},xt.getNthChildIdx=function(v,y,O){return xt.getChildIdx(v,y)[O]},xt.getIdxbyList=function(v,y,O,z){var Q,ge,ke=xt;return 0==O.length?void 0!==z&&v.substr(y,2)!==z?-1:y:(Q=O.shift())>=(ge=ke.getChildIdx(v,y)).length?-1:ke.getIdxbyList(v,ge[Q],O,z)},xt.getIdxbyListEx=function(v,y,O,z){var Q,ge,ke=xt;if(0==O.length)return void 0!==z&&v.substr(y,2)!==z?-1:y;Q=O.shift(),ge=ke.getChildIdx(v,y);for(var We=0,Ue=0;Ue<ge.length;Ue++){var Fe=v.substr(ge[Ue],2);if("number"==typeof Q&&!ke.isContextTag(Fe)&&We==Q||"string"==typeof Q&&ke.isContextTag(Fe,Q))return ke.getIdxbyListEx(v,ge[Ue],O,z);ke.isContextTag(Fe)||We++}return-1},xt.getTLVbyList=function(v,y,O,z){var Q=xt,ge=Q.getIdxbyList(v,y,O,z);return-1==ge||ge>=v.length?null:Q.getTLV(v,ge)},xt.getTLVbyListEx=function(v,y,O,z){var Q=xt,ge=Q.getIdxbyListEx(v,y,O,z);return-1==ge?null:Q.getTLV(v,ge)},xt.getVbyList=function(v,y,O,z,Q){var ge,ke,We=xt;return-1==(ge=We.getIdxbyList(v,y,O,z))||ge>=v.length?null:(ke=We.getV(v,ge),!0===Q&&(ke=ke.substr(2)),ke)},xt.getVbyListEx=function(v,y,O,z,Q){var ge,ke,We=xt;return-1==(ge=We.getIdxbyListEx(v,y,O,z))?null:(ke=We.getV(v,ge),"03"==v.substr(ge,2)&&!1!==Q&&(ke=ke.substr(2)),ke)},xt.getInt=function(v,y,O){null==O&&(O=-1);try{var z=v.substr(y,2);if("02"!=z&&"03"!=z)return O;var Q=xt.getV(v,y);return"02"==z?parseInt(Q,16):function(ke){try{var We=ke.substr(0,2);if("00"==We)return parseInt(ke.substr(2),16);var Ue=parseInt(We,16),Fe=ke.substr(2),qe=parseInt(Fe,16).toString(2);return"0"==qe&&(qe="00000000"),qe=qe.slice(0,0-Ue),parseInt(qe,2)}catch(Ve){return-1}}(Q)}catch(ge){return O}},xt.getOID=function(v,y,O){null==O&&(O=null);try{return"06"!=v.substr(y,2)?O:function(Q){if(!Na(Q))return null;try{var ge=[],ke=Q.substr(0,2),We=parseInt(ke,16);ge[0]=new String(Math.floor(We/40)),ge[1]=new String(We%40);for(var Ue=Q.substr(2),Fe=[],qe=0;qe<Ue.length/2;qe++)Fe.push(parseInt(Ue.substr(2*qe,2),16));var Ve=[],et="";for(qe=0;qe<Fe.length;qe++)128&Fe[qe]?et+=Cs((127&Fe[qe]).toString(2),7):(et+=Cs((127&Fe[qe]).toString(2),7),Ve.push(new String(parseInt(et,2))),et="");var rt=ge.join(".");return Ve.length>0&&(rt=rt+"."+Ve.join(".")),rt}catch(ot){return null}}(xt.getV(v,y))}catch(z){return O}},xt.getOIDName=function(v,y,O){null==O&&(O=null);try{var z=xt.getOID(v,y,O);if(z==O)return O;var Q=Ie.asn1.x509.OID.oid2name(z);return""==Q?z:Q}catch(ge){return O}},xt.getString=function(v,y,O){null==O&&(O=null);try{return Wi(xt.getV(v,y))}catch(z){return O}},xt.hextooidstr=function(v){var y=function(et,rt){return et.length>=rt?et:new Array(rt-et.length+1).join("0")+et},O=[],z=v.substr(0,2),Q=parseInt(z,16);O[0]=new String(Math.floor(Q/40)),O[1]=new String(Q%40);for(var ge=v.substr(2),ke=[],We=0;We<ge.length/2;We++)ke.push(parseInt(ge.substr(2*We,2),16));var Ue=[],Fe="";for(We=0;We<ke.length;We++)128&ke[We]?Fe+=y((127&ke[We]).toString(2),7):(Fe+=y((127&ke[We]).toString(2),7),Ue.push(new String(parseInt(Fe,2))),Fe="");var qe=O.join(".");return Ue.length>0&&(qe=qe+"."+Ue.join(".")),qe},xt.dump=function(v,y,O,z){var Q=xt,ge=Q.getV,ke=Q.dump,We=Q.getChildIdx,Ue=v;v instanceof Ie.asn1.ASN1Object&&(Ue=v.getEncodedHex());var Fe=function(Tt,Jn){return Tt.length<=2*Jn?Tt:Tt.substr(0,Jn)+"..(total "+Tt.length/2+"bytes).."+Tt.substr(Tt.length-Jn,Jn)};void 0===y&&(y={ommit_long_octet:32}),void 0===O&&(O=0),void 0===z&&(z="");var qe,Ve=y.ommit_long_octet;if("01"==(qe=Ue.substr(O,2)))return"00"==(et=ge(Ue,O))?z+"BOOLEAN FALSE\n":z+"BOOLEAN TRUE\n";if("02"==qe)return z+"INTEGER "+Fe(et=ge(Ue,O),Ve)+"\n";if("03"==qe){var et=ge(Ue,O);return Q.isASN1HEX(et.substr(2))?(rt=z+"BITSTRING, encapsulates\n")+ke(et.substr(2),y,0,z+"  "):z+"BITSTRING "+Fe(et,Ve)+"\n"}if("04"==qe)return et=ge(Ue,O),Q.isASN1HEX(et)?(rt=z+"OCTETSTRING, encapsulates\n",rt+=ke(et,y,0,z+"  ")):z+"OCTETSTRING "+Fe(et,Ve)+"\n";if("05"==qe)return z+"NULL\n";if("06"==qe){var ot=ge(Ue,O),ct=Ie.asn1.ASN1Util.oidHexToInt(ot),pt=Ie.asn1.x509.OID.oid2name(ct),Me=ct.replace(/\./g," ");return""!=pt?z+"ObjectIdentifier "+pt+" ("+Me+")\n":z+"ObjectIdentifier ("+Me+")\n"}if("0a"==qe)return z+"ENUMERATED "+parseInt(ge(Ue,O))+"\n";if("0c"==qe)return z+"UTF8String '"+$r(ge(Ue,O))+"'\n";if("13"==qe)return z+"PrintableString '"+$r(ge(Ue,O))+"'\n";if("14"==qe)return z+"TeletexString '"+$r(ge(Ue,O))+"'\n";if("16"==qe)return z+"IA5String '"+$r(ge(Ue,O))+"'\n";if("17"==qe)return z+"UTCTime "+$r(ge(Ue,O))+"\n";if("18"==qe)return z+"GeneralizedTime "+$r(ge(Ue,O))+"\n";if("1a"==qe)return z+"VisualString '"+$r(ge(Ue,O))+"'\n";if("1e"==qe)return z+"BMPString '"+Cf(ge(Ue,O))+"'\n";if("30"==qe){if("3000"==Ue.substr(O,4))return z+"SEQUENCE {}\n";rt=z+"SEQUENCE\n";var Oe=y;if((2==(dt=We(Ue,O)).length||3==dt.length)&&"06"==Ue.substr(dt[0],2)&&"04"==Ue.substr(dt[dt.length-1],2)){pt=Q.oidname(ge(Ue,dt[0]));var Je=JSON.parse(JSON.stringify(y));Je.x509ExtName=pt,Oe=Je}for(var $e=0;$e<dt.length;$e++)rt+=ke(Ue,Oe,dt[$e],z+"  ");return rt}if("31"==qe){rt=z+"SET\n";var dt=We(Ue,O);for($e=0;$e<dt.length;$e++)rt+=ke(Ue,y,dt[$e],z+"  ");return rt}if(0!=(128&(qe=parseInt(qe,16)))){var rt,mt=31&qe;if(0!=(32&qe)){for(rt=z+"["+mt+"]\n",dt=We(Ue,O),$e=0;$e<dt.length;$e++)rt+=ke(Ue,y,dt[$e],z+"  ");return rt}return et=ge(Ue,O),xt.isASN1HEX(et)?(rt=z+"["+mt+"]\n")+ke(et,y,0,z+"  "):(("68747470"==et.substr(0,8)||"subjectAltName"===y.x509ExtName&&2==mt)&&(et=$r(et)),z+"["+mt+"] "+et+"\n")}return z+"UNKNOWN("+qe+") "+ge(Ue,O)+"\n"},xt.isContextTag=function(v,y){var O,z;v=v.toLowerCase();try{O=parseInt(v,16)}catch(Q){return-1}if(void 0===y)return 128==(192&O);try{return null!=y.match(/^\[[0-9]+\]$/)&&!((z=parseInt(y.substr(1,y.length-1),10))>31)&&128==(192&O)&&(31&O)==z}catch(Q){return!1}},xt.isASN1HEX=function(v){var y=xt;if(v.length%2==1)return!1;var O=y.getVblen(v,0),z=v.substr(0,2),Q=y.getL(v,0);return v.length-z.length-Q.length==2*O},xt.checkStrictDER=function(v,y,O,z,Q){var ge=xt;if(void 0===O){if("string"!=typeof v)throw new Error("not hex string");if(v=v.toLowerCase(),!Ie.lang.String.isHex(v))throw new Error("not hex string");O=v.length,Q=(z=v.length/2)<128?1:Math.ceil(z.toString(16))+1}if(ge.getL(v,y).length>2*Q)throw new Error("L of TLV too long: idx="+y);var ke=ge.getVblen(v,y);if(ke>z)throw new Error("value of L too long than hex: idx="+y);var We=ge.getTLV(v,y),Ue=We.length-2-ge.getL(v,y).length;if(Ue!==2*ke)throw new Error("V string length and L's value not the same:"+Ue+"/"+2*ke);if(0===y&&v.length!=We.length)throw new Error("total length and TLV length unmatch:"+v.length+"!="+We.length);var Fe=v.substr(y,2);if("02"===Fe){var qe=ge.getVidx(v,y);if("00"==v.substr(qe,2)&&v.charCodeAt(qe+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Fe,16)){for(var Ve=ge.getVblen(v,y),et=0,rt=ge.getChildIdx(v,y),ot=0;ot<rt.length;ot++)et+=ge.getTLV(v,rt[ot]).length,ge.checkStrictDER(v,rt[ot],O,z,Q);if(2*Ve!=et)throw new Error("sum of children's TLV length and L unmatch: "+2*Ve+"!="+et)}},xt.oidname=function(v){var y=Ie.asn1;Ie.lang.String.isHex(v)&&(v=y.ASN1Util.oidHexToInt(v));var O=y.x509.OID.oid2name(v);return""===O&&(O=v),O},void 0!==Ie&&Ie||(F.KJUR=Ie={}),void 0!==Ie.lang&&Ie.lang||(Ie.lang={}),Ie.lang.String=function(){},"function"==typeof C?(F.utf8tob64u=bn=function(y){return ua(C.from(y,"utf8").toString("base64"))},F.b64utoutf8=Er=function(y){return C.from(Ss(y),"base64").toString("utf8")}):(F.utf8tob64u=bn=function(y){return ri(Pa(vl(y)))},F.b64utoutf8=Er=function(y){return decodeURIComponent(Or(Rr(y)))}),Ie.lang.String.isInteger=function(v){return!!v.match(/^[0-9]+$/)||!!v.match(/^-[0-9]+$/)},Ie.lang.String.isHex=function(v){return Na(v)},Ie.lang.String.isBase64=function(v){return!(!(v=v.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||v.length%4!=0)},Ie.lang.String.isBase64URL=function(v){return!v.match(/[+/=]/)&&(v=Ss(v),Ie.lang.String.isBase64(v))},Ie.lang.String.isIntegerArray=function(v){return!!(v=v.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},Ie.lang.String.isPrintable=function(v){return null!==v.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},Ie.lang.String.isIA5=function(v){return null!==v.match(/^[\x20-\x21\x23-\x7f]*$/)},Ie.lang.String.isMail=function(v){return null!==v.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Cs=function(y,O,z){return null==z&&(z="0"),y.length>=O?y:new Array(O-y.length+1).join(z)+y};function hi(v,y){var O=function(){};O.prototype=y.prototype,v.prototype=new O,v.prototype.constructor=v,v.superclass=y.prototype,y.prototype.constructor==Object.prototype.constructor&&(y.prototype.constructor=y)}void 0!==Ie&&Ie||(F.KJUR=Ie={}),void 0!==Ie.crypto&&Ie.crypto||(Ie.crypto={}),Ie.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:L.algo.MD5,sha1:L.algo.SHA1,sha224:L.algo.SHA224,sha256:L.algo.SHA256,sha384:L.algo.SHA384,sha512:L.algo.SHA512,ripemd160:L.algo.RIPEMD160},this.getDigestInfoHex=function(v,y){if(void 0===this.DIGESTINFOHEAD[y])throw"alg not supported in Util.DIGESTINFOHEAD: "+y;return this.DIGESTINFOHEAD[y]+v},this.getPaddedDigestInfoHex=function(v,y,O){var z=this.getDigestInfoHex(v,y),Q=O/4;if(z.length+22>Q)throw"key is too short for SigAlg: keylen="+O+","+y;for(var ke="00"+z,We="",Ue=Q-"0001".length-ke.length,Fe=0;Fe<Ue;Fe+=2)We+="ff";return"0001"+We+ke},this.hashString=function(v,y){return new Ie.crypto.MessageDigest({alg:y}).digestString(v)},this.hashHex=function(v,y){return new Ie.crypto.MessageDigest({alg:y}).digestHex(v)},this.sha1=function(v){return this.hashString(v,"sha1")},this.sha256=function(v){return this.hashString(v,"sha256")},this.sha256Hex=function(v){return this.hashHex(v,"sha256")},this.sha512=function(v){return this.hashString(v,"sha512")},this.sha512Hex=function(v){return this.hashHex(v,"sha512")},this.isKey=function(v){return v instanceof Re||v instanceof Ie.crypto.DSA||v instanceof Ie.crypto.ECDSA}},Ie.crypto.Util.md5=function(v){return new Ie.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(v)},Ie.crypto.Util.ripemd160=function(v){return new Ie.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(v)},Ie.crypto.Util.SECURERANDOMGEN=new Z,Ie.crypto.Util.getRandomHexOfNbytes=function(v){var y=new Array(v);return Ie.crypto.Util.SECURERANDOMGEN.nextBytes(y),Fr(y)},Ie.crypto.Util.getRandomBigIntegerOfNbytes=function(v){return new j(Ie.crypto.Util.getRandomHexOfNbytes(v),16)},Ie.crypto.Util.getRandomHexOfNbits=function(v){var y=v%8,O=new Array((v-y)/8+1);return Ie.crypto.Util.SECURERANDOMGEN.nextBytes(O),O[0]=(255<<y&255^255)&O[0],Fr(O)},Ie.crypto.Util.getRandomBigIntegerOfNbits=function(v){return new j(Ie.crypto.Util.getRandomHexOfNbits(v),16)},Ie.crypto.Util.getRandomBigIntegerZeroToMax=function(v){for(var y=v.bitLength();;){var O=Ie.crypto.Util.getRandomBigIntegerOfNbits(y);if(-1!=v.compareTo(O))return O}},Ie.crypto.Util.getRandomBigIntegerMinToMax=function(v,y){var O=v.compareTo(y);if(1==O)throw"biMin is greater than biMax";if(0==O)return v;var z=y.subtract(v);return Ie.crypto.Util.getRandomBigIntegerZeroToMax(z).add(v)},Ie.crypto.MessageDigest=function(v){this.setAlgAndProvider=function(y,O){if(null!==(y=Ie.crypto.MessageDigest.getCanonicalAlgName(y))&&void 0===O&&(O=Ie.crypto.Util.DEFAULTPROVIDER[y]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(y)&&"cryptojs"==O){try{this.md=Ie.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[y].create()}catch(z){throw"setAlgAndProvider hash alg set fail alg="+y+"/"+z}this.updateString=function(z){this.md.update(z)},this.updateHex=function(z){var Q=L.enc.Hex.parse(z);this.md.update(Q)},this.digest=function(){return this.md.finalize().toString(L.enc.Hex)},this.digestString=function(z){return this.updateString(z),this.digest()},this.digestHex=function(z){return this.updateHex(z),this.digest()}}if(-1!=":sha256:".indexOf(y)&&"sjcl"==O){try{this.md=new sjcl.hash.sha256}catch(z){throw"setAlgAndProvider hash alg set fail alg="+y+"/"+z}this.updateString=function(z){this.md.update(z)},this.updateHex=function(z){var Q=sjcl.codec.hex.toBits(z);this.md.update(Q)},this.digest=function(){var z=this.md.finalize();return sjcl.codec.hex.fromBits(z)},this.digestString=function(z){return this.updateString(z),this.digest()},this.digestHex=function(z){return this.updateHex(z),this.digest()}}},this.updateString=function(y){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(y){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(y){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==v&&void 0!==v.alg&&(this.algName=v.alg,void 0===v.prov&&(this.provName=Ie.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Ie.crypto.MessageDigest.getCanonicalAlgName=function(v){return"string"==typeof v&&(v=(v=v.toLowerCase()).replace(/-/,"")),v},Ie.crypto.MessageDigest.getHashLength=function(v){var y=Ie.crypto.MessageDigest,O=y.getCanonicalAlgName(v);if(void 0===y.HASHLENGTH[O])throw"not supported algorithm: "+v;return y.HASHLENGTH[O]},Ie.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Ie.crypto.Mac=function(v){this.setAlgAndProvider=function(y,O){if(null==(y=y.toLowerCase())&&(y="hmacsha1"),"hmac"!=(y=y.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+y;void 0===O&&(O=Ie.crypto.Util.DEFAULTPROVIDER[y]),this.algProv=y+"/"+O;var z=y.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(z)&&"cryptojs"==O){try{this.mac=L.algo.HMAC.create(Ie.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[z],this.pass)}catch(ge){throw"setAlgAndProvider hash alg set fail hashAlg="+z+"/"+ge}this.updateString=function(ge){this.mac.update(ge)},this.updateHex=function(ge){var ke=L.enc.Hex.parse(ge);this.mac.update(ke)},this.doFinal=function(){return this.mac.finalize().toString(L.enc.Hex)},this.doFinalString=function(ge){return this.updateString(ge),this.doFinal()},this.doFinalHex=function(ge){return this.updateHex(ge),this.doFinal()}}},this.updateString=function(y){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(y){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(y){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(y){if("string"==typeof y){var O=y;return y.length%2!=1&&y.match(/^[0-9A-Fa-f]+$/)||(O=So(y)),void(this.pass=L.enc.Hex.parse(O))}if("object"!=(void 0===y?"undefined":_(y)))throw"KJUR.crypto.Mac unsupported password type: "+y;if(O=null,void 0!==y.hex){if(y.hex.length%2!=0||!y.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+y.hex;O=y.hex}if(void 0!==y.utf8&&(O=Ko(y.utf8)),void 0!==y.rstr&&(O=So(y.rstr)),void 0!==y.b64&&(O=P(y.b64)),void 0!==y.b64u&&(O=Rr(y.b64u)),null==O)throw"KJUR.crypto.Mac unsupported password type: "+y;this.pass=L.enc.Hex.parse(O)},void 0!==v&&(void 0!==v.pass&&this.setPassword(v.pass),void 0!==v.alg&&(this.algName=v.alg,void 0===v.prov&&(this.provName=Ie.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Ie.crypto.Signature=function(v){var y=null;if(this._setAlgNames=function(){var O=this.algName.match(/^(.+)with(.+)$/);O&&(this.mdAlgName=O[1].toLowerCase(),this.pubkeyAlgName=O[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(O,z){for(var Q="",ge=z/4-O.length,ke=0;ke<ge;ke++)Q+="0";return Q+O},this.setAlgAndProvider=function(O,z){if(this._setAlgNames(),"cryptojs/jsrsa"!=z)throw new Error("provider not supported: "+z);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Ie.crypto.MessageDigest({alg:this.mdAlgName})}catch(Q){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Q)}this.init=function(Q,ge){var ke=null;try{ke=void 0===ge?Yn.getKey(Q):Yn.getKey(Q,ge)}catch(We){throw"init failed:"+We}if(!0===ke.isPrivate)this.prvKey=ke,this.state="SIGN";else{if(!0!==ke.isPublic)throw"init failed.:"+ke;this.pubKey=ke,this.state="VERIFY"}},this.updateString=function(Q){this.md.updateString(Q)},this.updateHex=function(Q){this.md.updateHex(Q)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==Ie.crypto.ECDSA&&(this.prvKey=new Ie.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Re&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Re&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Ie.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Ie.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Q){return this.updateString(Q),this.sign()},this.signHex=function(Q){return this.updateHex(Q),this.sign()},this.verify=function(Q){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==Ie.crypto.ECDSA&&(this.pubKey=new Ie.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Re&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Q,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Re&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,Q);if(void 0!==Ie.crypto.ECDSA&&this.pubKey instanceof Ie.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Q);if(void 0!==Ie.crypto.DSA&&this.pubKey instanceof Ie.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Q);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(O,z){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(O){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(O){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(O){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(O){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(O){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=v,void 0!==v&&(void 0!==v.alg&&(this.algName=v.alg,this.provName=void 0===v.prov?Ie.crypto.Util.DEFAULTPROVIDER[this.algName]:v.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==v.psssaltlen&&(this.pssSaltLen=v.psssaltlen),void 0!==v.prvkeypem)){if(void 0!==v.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{y=Yn.getKey(v.prvkeypem),this.init(y)}catch(O){throw"fatal error to load pem private key: "+O}}},Ie.crypto.Cipher=function(v){},Ie.crypto.Cipher.encrypt=function(v,y,O){if(y instanceof Re&&y.isPublic){var z=Ie.crypto.Cipher.getAlgByKeyAndName(y,O);if("RSA"===z)return y.encrypt(v);if("RSAOAEP"===z)return y.encryptOAEP(v,"sha1");var Q=z.match(/^RSAOAEP(\d+)$/);if(null!==Q)return y.encryptOAEP(v,"sha"+Q[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+O}throw"Cipher.encrypt: unsupported key or algorithm"},Ie.crypto.Cipher.decrypt=function(v,y,O){if(y instanceof Re&&y.isPrivate){var z=Ie.crypto.Cipher.getAlgByKeyAndName(y,O);if("RSA"===z)return y.decrypt(v);if("RSAOAEP"===z)return y.decryptOAEP(v,"sha1");var Q=z.match(/^RSAOAEP(\d+)$/);if(null!==Q)return y.decryptOAEP(v,"sha"+Q[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+O}throw"Cipher.decrypt: unsupported key or algorithm"},Ie.crypto.Cipher.getAlgByKeyAndName=function(v,y){if(v instanceof Re){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(y))return y;if(null==y)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+y}throw"getAlgByKeyAndName: not supported algorithm name: "+y},Ie.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Ie&&Ie||(F.KJUR=Ie={}),void 0!==Ie.crypto&&Ie.crypto||(Ie.crypto={}),Ie.crypto.ECDSA=function(v){var y=Error,O=j,z=Et,Q=Ie.crypto.ECDSA,ge=Ie.crypto.ECParameterDB,ke=Q.getName,Ue=xt.getVbyListEx,Fe=xt.isASN1HEX,qe=new Z;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Ve){return new O(Ve.bitLength(),qe).mod(Ve.subtract(O.ONE)).add(O.ONE)},this.setNamedCurve=function(Ve){this.ecparams=ge.getByName(Ve),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Ve},this.setPrivateKeyHex=function(Ve){this.isPrivate=!0,this.prvKeyHex=Ve},this.setPublicKeyHex=function(Ve){this.isPublic=!0,this.pubKeyHex=Ve},this.getPublicKeyXYHex=function(){var Ve=this.pubKeyHex;if("04"!==Ve.substr(0,2))throw"this method supports uncompressed format(04) only";var et=this.ecparams.keylen/4;if(Ve.length!==2+2*et)throw"malformed public key hex length";var rt={};return rt.x=Ve.substr(2,et),rt.y=Ve.substr(2+et),rt},this.getShortNISTPCurveName=function(){var Ve=this.curveName;return"secp256r1"===Ve||"NIST P-256"===Ve||"P-256"===Ve||"prime256v1"===Ve?"P-256":"secp384r1"===Ve||"NIST P-384"===Ve||"P-384"===Ve?"P-384":null},this.generateKeyPairHex=function(){var et=this.getBigRandom(this.ecparams.n),rt=this.ecparams.G.multiply(et),ot=rt.getX().toBigInteger(),ct=rt.getY().toBigInteger(),pt=this.ecparams.keylen/4,Me=("0000000000"+et.toString(16)).slice(-pt),Oe="04"+("0000000000"+ot.toString(16)).slice(-pt)+("0000000000"+ct.toString(16)).slice(-pt);return this.setPrivateKeyHex(Me),this.setPublicKeyHex(Oe),{ecprvhex:Me,ecpubhex:Oe}},this.signWithMessageHash=function(Ve){return this.signHex(Ve,this.prvKeyHex)},this.signHex=function(Ve,et){var rt=new O(et,16),ot=this.ecparams.n,ct=new O(Ve.substring(0,this.ecparams.keylen/4),16);do{var pt=this.getBigRandom(ot),Me=this.ecparams.G.multiply(pt).getX().toBigInteger().mod(ot)}while(Me.compareTo(O.ZERO)<=0);var Oe=pt.modInverse(ot).multiply(ct.add(rt.multiply(Me))).mod(ot);return Q.biRSSigToASN1Sig(Me,Oe)},this.sign=function(Ve,et){var rt=et,ot=this.ecparams.n,ct=O.fromByteArrayUnsigned(Ve);do{var pt=this.getBigRandom(ot),Me=this.ecparams.G.multiply(pt).getX().toBigInteger().mod(ot)}while(Me.compareTo(j.ZERO)<=0);var Oe=pt.modInverse(ot).multiply(ct.add(rt.multiply(Me))).mod(ot);return this.serializeSig(Me,Oe)},this.verifyWithMessageHash=function(Ve,et){return this.verifyHex(Ve,et,this.pubKeyHex)},this.verifyHex=function(Ve,et,rt){try{var ot,ct,pt=Q.parseSigHex(et);ot=pt.r,ct=pt.s;var Me=z.decodeFromHex(this.ecparams.curve,rt),Oe=new O(Ve.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(Oe,ot,ct,Me)}catch(Je){return!1}},this.verify=function(Ve,et,rt){var ot,ct,pt;if(Bitcoin.Util.isArray(et)){var Me=this.parseSig(et);ot=Me.r,ct=Me.s}else{if("object"!==(void 0===et?"undefined":_(et))||!et.r||!et.s)throw"Invalid value for signature";ot=et.r,ct=et.s}if(rt instanceof Et)pt=rt;else{if(!Bitcoin.Util.isArray(rt))throw"Invalid format for pubkey value, must be byte array or ECPointFp";pt=z.decodeFrom(this.ecparams.curve,rt)}var Oe=O.fromByteArrayUnsigned(Ve);return this.verifyRaw(Oe,ot,ct,pt)},this.verifyRaw=function(Ve,et,rt,ot){var ct=this.ecparams.n,pt=this.ecparams.G;if(et.compareTo(O.ONE)<0||et.compareTo(ct)>=0||rt.compareTo(O.ONE)<0||rt.compareTo(ct)>=0)return!1;var Me=rt.modInverse(ct),Oe=Ve.multiply(Me).mod(ct),Je=et.multiply(Me).mod(ct);return pt.multiply(Oe).add(ot.multiply(Je)).getX().toBigInteger().mod(ct).equals(et)},this.serializeSig=function(Ve,et){var rt=Ve.toByteArraySigned(),ot=et.toByteArraySigned(),ct=[];return ct.push(2),ct.push(rt.length),(ct=ct.concat(rt)).push(2),ct.push(ot.length),(ct=ct.concat(ot)).unshift(ct.length),ct.unshift(48),ct},this.parseSig=function(Ve){var et;if(48!=Ve[0])throw new Error("Signature not a valid DERSequence");if(2!=Ve[et=2])throw new Error("First element in signature must be a DERInteger");var rt=Ve.slice(et+2,et+2+Ve[et+1]);if(2!=Ve[et+=2+Ve[et+1]])throw new Error("Second element in signature must be a DERInteger");var ot=Ve.slice(et+2,et+2+Ve[et+1]);return et+=2+Ve[et+1],{r:O.fromByteArrayUnsigned(rt),s:O.fromByteArrayUnsigned(ot)}},this.parseSigCompact=function(Ve){if(65!==Ve.length)throw"Signature has the wrong length";var et=Ve[0]-27;if(et<0||et>7)throw"Invalid signature type";var rt=this.ecparams.n;return{r:O.fromByteArrayUnsigned(Ve.slice(1,33)).mod(rt),s:O.fromByteArrayUnsigned(Ve.slice(33,65)).mod(rt),i:et}},this.readPKCS5PrvKeyHex=function(Ve){if(!1===Fe(Ve))throw new Error("not ASN.1 hex string");var et,rt,ot;try{et=Ue(Ve,0,["[0]",0],"06"),rt=Ue(Ve,0,[1],"04");try{ot=Ue(Ve,0,["[1]",0],"03")}catch(ct){}}catch(ct){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=ke(et),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(ot),this.setPrivateKeyHex(rt),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Ve){if(!1===Fe(Ve))throw new y("not ASN.1 hex string");var et,rt,ot;try{Ue(Ve,0,[1,0],"06"),et=Ue(Ve,0,[1,1],"06"),rt=Ue(Ve,0,[2,0,1],"04");try{ot=Ue(Ve,0,[2,0,"[1]",0],"03")}catch(ct){}}catch(ct){throw new y("malformed PKCS#8 plain ECC private key")}if(this.curveName=ke(et),void 0===this.curveName)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(ot),this.setPrivateKeyHex(rt),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Ve){if(!1===Fe(Ve))throw new y("not ASN.1 hex string");var et,rt;try{Ue(Ve,0,[0,0],"06"),et=Ue(Ve,0,[0,1],"06"),rt=Ue(Ve,0,[1],"03")}catch(ot){throw new y("malformed PKCS#8 ECC public key")}if(this.curveName=ke(et),null===this.curveName)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(rt)},this.readCertPubKeyHex=function(Ve,et){if(!1===Fe(Ve))throw new y("not ASN.1 hex string");var rt,ot;try{rt=Ue(Ve,0,[0,5,0,1],"06"),ot=Ue(Ve,0,[0,5,1],"03")}catch(ct){throw new y("malformed X.509 certificate ECC public key")}if(this.curveName=ke(rt),null===this.curveName)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(ot)},void 0!==v&&void 0!==v.curve&&(this.curveName=v.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==v&&(void 0!==v.prv&&this.setPrivateKeyHex(v.prv),void 0!==v.pub&&this.setPublicKeyHex(v.pub))},Ie.crypto.ECDSA.parseSigHex=function(v){var y=Ie.crypto.ECDSA.parseSigHexInHexRS(v);return{r:new j(y.r,16),s:new j(y.s,16)}},Ie.crypto.ECDSA.parseSigHexInHexRS=function(v){var O=xt.getChildIdx,z=xt.getV;if(xt.checkStrictDER(v,0),"30"!=v.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var Q=O(v,0);if(2!=Q.length)throw new Error("signature shall have two elements");var ge=Q[0],ke=Q[1];if("02"!=v.substr(ge,2))throw new Error("1st item not ASN.1 integer");if("02"!=v.substr(ke,2))throw new Error("2nd item not ASN.1 integer");return{r:z(v,ge),s:z(v,ke)}},Ie.crypto.ECDSA.asn1SigToConcatSig=function(v){var y=Ie.crypto.ECDSA.parseSigHexInHexRS(v),O=y.r,z=y.s;if("00"==O.substr(0,2)&&O.length%32==2&&(O=O.substr(2)),"00"==z.substr(0,2)&&z.length%32==2&&(z=z.substr(2)),O.length%32==30&&(O="00"+O),z.length%32==30&&(z="00"+z),O.length%32!=0)throw"unknown ECDSA sig r length error";if(z.length%32!=0)throw"unknown ECDSA sig s length error";return O+z},Ie.crypto.ECDSA.concatSigToASN1Sig=function(v){if(v.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var y=v.substr(0,v.length/2),O=v.substr(v.length/2);return Ie.crypto.ECDSA.hexRSSigToASN1Sig(y,O)},Ie.crypto.ECDSA.hexRSSigToASN1Sig=function(v,y){var O=new j(v,16),z=new j(y,16);return Ie.crypto.ECDSA.biRSSigToASN1Sig(O,z)},Ie.crypto.ECDSA.biRSSigToASN1Sig=function(v,y){var O=Ie.asn1,z=new O.DERInteger({bigint:v}),Q=new O.DERInteger({bigint:y});return new O.DERSequence({array:[z,Q]}).getEncodedHex()},Ie.crypto.ECDSA.getName=function(v){return"2b8104001f"===v?"secp192k1":"2a8648ce3d030107"===v?"secp256r1":"2b8104000a"===v?"secp256k1":"2b81040021"===v?"secp224r1":"2b81040022"===v?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(v)?"secp256r1":-1!=="|secp256k1|".indexOf(v)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(v)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(v)?"secp384r1":null},void 0!==Ie&&Ie||(F.KJUR=Ie={}),void 0!==Ie.crypto&&Ie.crypto||(Ie.crypto={}),Ie.crypto.ECParameterDB=new function(){var v={},y={};function O(z){return new j(z,16)}this.getByName=function(z){var Q=z;if(void 0!==y[Q]&&(Q=y[z]),void 0!==v[Q])return v[Q];throw"unregistered EC curve name: "+Q},this.regist=function(z,Q,ge,ke,We,Ue,Fe,qe,Ve,et,rt,ot){v[z]={};var ct=O(ge),pt=O(ke),Me=O(We),Oe=O(Ue),Je=O(Fe),$e=new Ft(ct,pt,Me),dt=$e.decodePointHex("04"+qe+Ve);v[z].name=z,v[z].keylen=Q,v[z].curve=$e,v[z].G=dt,v[z].n=Oe,v[z].h=Je,v[z].oid=rt,v[z].info=ot;for(var mt=0;mt<et.length;mt++)y[et[mt]]=z}},Ie.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Ie.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Ie.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Ie.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Ie.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Ie.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Ie.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Ie.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Ie.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Ie.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Yn=function(){var v=function(Fe,qe,Ve){return y(L.AES,Fe,qe,Ve)},y=function(Fe,qe,Ve,et){var rt=L.enc.Hex.parse(qe),ot=L.enc.Hex.parse(Ve),ct=L.enc.Hex.parse(et),pt={};pt.key=ot,pt.iv=ct,pt.ciphertext=rt;var Me=Fe.decrypt(pt,ot,{iv:ct});return L.enc.Hex.stringify(Me)},O=function(Fe,qe,Ve){return z(L.AES,Fe,qe,Ve)},z=function(Fe,qe,Ve,et){var rt=L.enc.Hex.parse(qe),ot=L.enc.Hex.parse(Ve),ct=L.enc.Hex.parse(et),pt=Fe.encrypt(rt,ot,{iv:ct}),Me=L.enc.Hex.parse(pt.toString());return L.enc.Base64.stringify(Me)},Q={"AES-256-CBC":{proc:v,eproc:O,keylen:32,ivlen:16},"AES-192-CBC":{proc:v,eproc:O,keylen:24,ivlen:16},"AES-128-CBC":{proc:v,eproc:O,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(Fe,qe,Ve){return y(L.TripleDES,Fe,qe,Ve)},eproc:function(Fe,qe,Ve){return z(L.TripleDES,Fe,qe,Ve)},keylen:24,ivlen:8},"DES-CBC":{proc:function(Fe,qe,Ve){return y(L.DES,Fe,qe,Ve)},eproc:function(Fe,qe,Ve){return z(L.DES,Fe,qe,Ve)},keylen:8,ivlen:8}},ge=function(Fe){var qe={},Ve=Fe.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Ve&&(qe.cipher=Ve[1],qe.ivsalt=Ve[2]);var et=Fe.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));et&&(qe.type=et[1]);var rt=-1,ot=0;-1!=Fe.indexOf("\r\n\r\n")&&(rt=Fe.indexOf("\r\n\r\n"),ot=2),-1!=Fe.indexOf("\n\n")&&(rt=Fe.indexOf("\n\n"),ot=1);var ct=Fe.indexOf("-----END");if(-1!=rt&&-1!=ct){var pt=Fe.substring(rt+2*ot,ct-ot);pt=pt.replace(/\s+/g,""),qe.data=pt}return qe},ke=function(Fe,qe,Ve){for(var et=Ve.substring(0,16),rt=L.enc.Hex.parse(et),ot=L.enc.Utf8.parse(qe),ct=Q[Fe].keylen+Q[Fe].ivlen,pt="",Me=null;;){var Oe=L.algo.MD5.create();if(null!=Me&&Oe.update(Me),Oe.update(ot),Oe.update(rt),Me=Oe.finalize(),(pt+=L.enc.Hex.stringify(Me)).length>=2*ct)break}var Je={};return Je.keyhex=pt.substr(0,2*Q[Fe].keylen),Je.ivhex=pt.substr(2*Q[Fe].keylen,2*Q[Fe].ivlen),Je},We=function(Fe,qe,Ve,et){var rt=L.enc.Base64.parse(Fe),ot=L.enc.Hex.stringify(rt);return(0,Q[qe].proc)(ot,Ve,et)};return{version:"1.0.0",parsePKCS5PEM:function(Fe){return ge(Fe)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(Fe,qe,Ve){return ke(Fe,qe,Ve)},decryptKeyB64:function(Fe,qe,Ve,et){return We(Fe,qe,Ve,et)},getDecryptedKeyHex:function(Fe,qe){var Ve=ge(Fe),et=Ve.cipher,rt=Ve.ivsalt,ot=Ve.data,ct=ke(et,qe,rt).keyhex;return We(ot,et,ct,rt)},getEncryptedPKCS5PEMFromPrvKeyHex:function(Fe,qe,Ve,et,rt){var Me,Oe,ot="";if(void 0!==et&&null!=et||(et="AES-256-CBC"),void 0===Q[et])throw new Error("KEYUTIL unsupported algorithm: "+et);void 0!==rt&&null!=rt||(rt=(Me=Q[et].ivlen,Oe=L.lib.WordArray.random(Me),L.enc.Hex.stringify(Oe)).toUpperCase());var ct=function(Me,Oe,Je,$e){return(0,Q[Oe].eproc)(Me,Je,$e)}(qe,et,ke(et,Ve,rt).keyhex,rt);return ot="-----BEGIN "+Fe+" PRIVATE KEY-----\r\n",ot+="Proc-Type: 4,ENCRYPTED\r\n",ot+="DEK-Info: "+et+","+rt+"\r\n",ot+="\r\n",(ot+=ct.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+Fe+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(Fe){var Ve=xt.getChildIdx,et=xt.getV,rt={},ot=Ve(Fe,0);if(2!=ot.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+ot.length);rt.ciphertext=et(Fe,ot[1]);var ct=Ve(Fe,ot[0]);if(2!=ct.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+ct.length);if("2a864886f70d01050d"!=et(Fe,ct[0]))throw new Error("this only supports pkcs5PBES2");var pt=Ve(Fe,ct[1]);if(2!=ct.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+pt.length);var Me=Ve(Fe,pt[1]);if(2!=Me.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+Me.length);if("2a864886f70d0307"!=et(Fe,Me[0]))throw"this only supports TripleDES";rt.encryptionSchemeAlg="TripleDES",rt.encryptionSchemeIV=et(Fe,Me[1]);var Oe=Ve(Fe,pt[0]);if(2!=Oe.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+Oe.length);if("2a864886f70d01050c"!=et(Fe,Oe[0]))throw new Error("this only supports pkcs5PBKDF2");var Je=Ve(Fe,Oe[1]);if(Je.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Je.length);rt.pbkdf2Salt=et(Fe,Je[0]);var $e=et(Fe,Je[1]);try{rt.pbkdf2Iter=parseInt($e,16)}catch(dt){throw new Error("malformed format pbkdf2Iter: "+$e)}return rt},getPBKDF2KeyHexFromParam:function(Fe,qe){var Ve=L.enc.Hex.parse(Fe.pbkdf2Salt),rt=L.PBKDF2(qe,Ve,{keySize:6,iterations:Fe.pbkdf2Iter});return L.enc.Hex.stringify(rt)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(Fe,qe){var Ve=Go(Fe,"ENCRYPTED PRIVATE KEY"),et=this.parseHexOfEncryptedPKCS8(Ve),rt=Yn.getPBKDF2KeyHexFromParam(et,qe),ot={};ot.ciphertext=L.enc.Hex.parse(et.ciphertext);var ct=L.enc.Hex.parse(rt),pt=L.enc.Hex.parse(et.encryptionSchemeIV),Me=L.TripleDES.decrypt(ot,ct,{iv:pt});return L.enc.Hex.stringify(Me)},getKeyFromEncryptedPKCS8PEM:function(Fe,qe){var Ve=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(Fe,qe);return this.getKeyFromPlainPrivatePKCS8Hex(Ve)},parsePlainPrivatePKCS8Hex:function(Fe){var qe=xt,Ve=qe.getChildIdx,et=qe.getV,rt={algparam:null};if("30"!=Fe.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var ot=Ve(Fe,0);if(ot.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=Fe.substr(ot[1],2))throw new Error("malformed PKCS8 private key(code:003)");var ct=Ve(Fe,ot[1]);if(2!=ct.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=Fe.substr(ct[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(rt.algoid=et(Fe,ct[0]),"06"==Fe.substr(ct[1],2)&&(rt.algparam=et(Fe,ct[1])),"04"!=Fe.substr(ot[2],2))throw new Error("malformed PKCS8 private key(code:006)");return rt.keyidx=qe.getVidx(Fe,ot[2]),rt},getKeyFromPlainPrivatePKCS8PEM:function(Fe){var qe=Go(Fe,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(qe)},getKeyFromPlainPrivatePKCS8Hex:function(Fe){var qe,Ve=this.parsePlainPrivatePKCS8Hex(Fe);if("2a864886f70d010101"==Ve.algoid)qe=new Re;else if("2a8648ce380401"==Ve.algoid)qe=new Ie.crypto.DSA;else{if("2a8648ce3d0201"!=Ve.algoid)throw new Error("unsupported private key algorithm");qe=new Ie.crypto.ECDSA}return qe.readPKCS8PrvKeyHex(Fe),qe},_getKeyFromPublicPKCS8Hex:function(Fe){var qe,Ve=xt.getVbyList(Fe,0,[0,0],"06");if("2a864886f70d010101"===Ve)qe=new Re;else if("2a8648ce380401"===Ve)qe=new Ie.crypto.DSA;else{if("2a8648ce3d0201"!==Ve)throw new Error("unsupported PKCS#8 public key hex");qe=new Ie.crypto.ECDSA}return qe.readPKCS8PubKeyHex(Fe),qe},parsePublicRawRSAKeyHex:function(Fe){var Ve=xt.getChildIdx,et=xt.getV,rt={};if("30"!=Fe.substr(0,2))throw new Error("malformed RSA key(code:001)");var ot=Ve(Fe,0);if(2!=ot.length)throw new Error("malformed RSA key(code:002)");if("02"!=Fe.substr(ot[0],2))throw new Error("malformed RSA key(code:003)");if(rt.n=et(Fe,ot[0]),"02"!=Fe.substr(ot[1],2))throw new Error("malformed RSA key(code:004)");return rt.e=et(Fe,ot[1]),rt},parsePublicPKCS8Hex:function(Fe){var qe=xt,Ve=qe.getChildIdx,et=qe.getV,rt={algparam:null},ot=Ve(Fe,0);if(2!=ot.length)throw new Error("outer DERSequence shall have 2 elements: "+ot.length);var ct=ot[0];if("30"!=Fe.substr(ct,2))throw new Error("malformed PKCS8 public key(code:001)");var pt=Ve(Fe,ct);if(2!=pt.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=Fe.substr(pt[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(rt.algoid=et(Fe,pt[0]),"06"==Fe.substr(pt[1],2)?rt.algparam=et(Fe,pt[1]):"30"==Fe.substr(pt[1],2)&&(rt.algparam={},rt.algparam.p=qe.getVbyList(Fe,pt[1],[0],"02"),rt.algparam.q=qe.getVbyList(Fe,pt[1],[1],"02"),rt.algparam.g=qe.getVbyList(Fe,pt[1],[2],"02")),"03"!=Fe.substr(ot[1],2))throw new Error("malformed PKCS8 public key(code:004)");return rt.key=et(Fe,ot[1]).substr(2),rt}}}();function Es(v,y){for(var O="",z=y/4-v.length,Q=0;Q<z;Q++)O+="0";return O+v}function qo(v,y,O){for(var z="",Q=0;z.length<y;)z+=Wi(O(So(v+String.fromCharCode.apply(String,[(4278190080&Q)>>24,(16711680&Q)>>16,(65280&Q)>>8,255&Q])))),Q+=1;return z}function Ef(v){for(var y in Ie.crypto.Util.DIGESTINFOHEAD){var O=Ie.crypto.Util.DIGESTINFOHEAD[y],z=O.length;if(v.substring(0,z)==O)return[y,v.substring(z)]}return[]}function Di(v){var y,O=xt,z=O.getChildIdx,Q=O.getV,ge=O.getTLV,ke=O.getVbyList,We=O.getVbyListEx,Ue=O.getTLVbyList,Fe=O.getTLVbyListEx,qe=O.getIdxbyList,Ve=O.getIdxbyListEx,et=O.getVidx,rt=O.getInt,ot=O.oidname,ct=O.hextooidstr,pt=Go;try{y=Ie.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(Me){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var Me=Ue(this.hex,0,[0,0]);if("a0"==Me.substr(0,2)){var Oe=Ue(Me,0,[0]),Je=rt(Oe,0);if(Je<0||2<Je)throw new Error("malformed version field");return this.version=Je+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return We(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Me=Fe(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Me)},this.getAlgorithmIdentifierName=function(Me){for(var Oe in y)if(Me===y[Oe])return Oe;return ot(We(Me,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Ue(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Ue(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Me=ke(this.hex,0,[0,4+this.foffset,0]);return Me=Me.replace(/(..)/g,"%$1"),decodeURIComponent(Me)},this.getNotAfter=function(){var Me=ke(this.hex,0,[0,4+this.foffset,1]);return Me=Me.replace(/(..)/g,"%$1"),decodeURIComponent(Me)},this.getPublicKeyHex=function(){return O.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return qe(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Me=this.getPublicKeyIdx();return qe(this.hex,Me,[1,0],"30")},this.getPublicKey=function(){return Yn.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Me=Ue(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Me)},this.getSignatureValueHex=function(){return ke(this.hex,0,[2],"03",!0)},this.verifySignature=function(Me){var Oe=this.getSignatureAlgorithmField(),Je=this.getSignatureValueHex(),$e=Ue(this.hex,0,[0],"30"),dt=new Ie.crypto.Signature({alg:Oe});return dt.init(Me),dt.updateHex($e),dt.verify(Je)},this.parseExt=function(Me){var Oe,Je,$e;if(void 0===Me){if(3!==this.version)return-1;Oe=qe($e=this.hex,0,[0,7,0],"30"),Je=z($e,Oe)}else{$e=Go(Me);var dt=qe($e,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=Q($e,dt))return void(this.aExtInfo=new Array);Oe=qe($e,0,[0,3,0,1,0],"30"),Je=z($e,Oe),this.hex=$e}this.aExtInfo=new Array;for(var mt=0;mt<Je.length;mt++){var an={critical:!1},Tt=0;3===z($e,Je[mt]).length&&(an.critical=!0,Tt=1),an.oid=O.hextooidstr(ke($e,Je[mt],[0],"06"));var Jn=qe($e,Je[mt],[1+Tt]);an.vidx=et($e,Jn),this.aExtInfo.push(an)}},this.getExtInfo=function(Me){var Oe=this.aExtInfo,Je=Me;if(Me.match(/^[0-9.]+$/)||(Je=Ie.asn1.x509.OID.name2oid(Me)),""!==Je)for(var $e=0;$e<Oe.length;$e++)if(Oe[$e].oid===Je)return Oe[$e]},this.getExtBasicConstraints=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("basicConstraints");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"basicConstraints"};if(Oe&&($e.critical=!0),"3000"===Me)return $e;if("30030101ff"===Me)return $e.cA=!0,$e;if("30060101ff02"===Me.substr(0,12)){var dt=Q(Me,10),mt=parseInt(dt,16);return $e.cA=!0,$e.pathLen=mt,$e}throw new Error("hExtV parse error: "+Me)},this.getExtKeyUsage=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("keyUsage");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"keyUsage"};return Oe&&($e.critical=!0),$e.names=this.getExtKeyUsageString(Me).split(","),$e},this.getExtKeyUsageBin=function(Me){if(void 0===Me){var Oe=this.getExtInfo("keyUsage");if(void 0===Oe)return"";Me=ge(this.hex,Oe.vidx)}if(8!=Me.length&&10!=Me.length)throw new Error("malformed key usage value: "+Me);var Je="000000000000000"+parseInt(Me.substr(6),16).toString(2);return 8==Me.length&&(Je=Je.slice(-8)),10==Me.length&&(Je=Je.slice(-16)),""==(Je=Je.replace(/0+$/,""))&&(Je="0"),Je},this.getExtKeyUsageString=function(Me){for(var Oe=this.getExtKeyUsageBin(Me),Je=new Array,$e=0;$e<Oe.length;$e++)"1"==Oe.substr($e,1)&&Je.push(Di.KEYUSAGE_NAME[$e]);return Je.join(",")},this.getExtSubjectKeyIdentifier=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("subjectKeyIdentifier");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"subjectKeyIdentifier"};Oe&&($e.critical=!0);var dt=Q(Me,0);return $e.kid={hex:dt},$e},this.getExtAuthorityKeyIdentifier=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("authorityKeyIdentifier");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"authorityKeyIdentifier"};Oe&&($e.critical=!0);for(var dt=z(Me,0),mt=0;mt<dt.length;mt++){var an=Me.substr(dt[mt],2);if("80"===an&&($e.kid={hex:Q(Me,dt[mt])}),"a1"===an){var Tt=ge(Me,dt[mt]),Jn=this.getGeneralNames(Tt);$e.issuer=Jn[0].dn}"82"===an&&($e.sn={hex:Q(Me,dt[mt])})}return $e},this.getExtExtKeyUsage=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("extKeyUsage");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"extKeyUsage",array:[]};Oe&&($e.critical=!0);for(var dt=z(Me,0),mt=0;mt<dt.length;mt++)$e.array.push(ot(Q(Me,dt[mt])));return $e},this.getExtExtKeyUsageName=function(){var Me=this.getExtInfo("extKeyUsage");if(void 0===Me)return Me;var Oe=new Array,Je=ge(this.hex,Me.vidx);if(""===Je)return Oe;for(var $e=z(Je,0),dt=0;dt<$e.length;dt++)Oe.push(ot(Q(Je,$e[dt])));return Oe},this.getExtSubjectAltName=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("subjectAltName");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"subjectAltName",array:[]};return Oe&&($e.critical=!0),$e.array=this.getGeneralNames(Me),$e},this.getExtIssuerAltName=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("issuerAltName");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"issuerAltName",array:[]};return Oe&&($e.critical=!0),$e.array=this.getGeneralNames(Me),$e},this.getGeneralNames=function(Me){for(var Oe=z(Me,0),Je=[],$e=0;$e<Oe.length;$e++){var dt=this.getGeneralName(ge(Me,Oe[$e]));void 0!==dt&&Je.push(dt)}return Je},this.getGeneralName=function(Me){var Oe=Me.substr(0,2),Je=Q(Me,0),$e=Wi(Je);return"81"==Oe?{rfc822:$e}:"82"==Oe?{dns:$e}:"86"==Oe?{uri:$e}:"87"==Oe?{ip:zc(Je)}:"a4"==Oe?{dn:this.getX500Name(Je)}:void 0},this.getExtSubjectAltName2=function(){var Me,Oe,Je,$e=this.getExtInfo("subjectAltName");if(void 0===$e)return $e;for(var dt=new Array,mt=ge(this.hex,$e.vidx),an=z(mt,0),Tt=0;Tt<an.length;Tt++)Je=mt.substr(an[Tt],2),Me=Q(mt,an[Tt]),"81"===Je&&(Oe=$r(Me),dt.push(["MAIL",Oe])),"82"===Je&&(Oe=$r(Me),dt.push(["DNS",Oe])),"84"===Je&&(Oe=Di.hex2dn(Me,0),dt.push(["DN",Oe])),"86"===Je&&(Oe=$r(Me),dt.push(["URI",Oe])),"87"===Je&&(Oe=zc(Me),dt.push(["IP",Oe]));return dt},this.getExtCRLDistributionPoints=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("cRLDistributionPoints");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"cRLDistributionPoints",array:[]};Oe&&($e.critical=!0);for(var dt=z(Me,0),mt=0;mt<dt.length;mt++){var an=ge(Me,dt[mt]);$e.array.push(this.getDistributionPoint(an))}return $e},this.getDistributionPoint=function(Me){for(var Oe={},Je=z(Me,0),$e=0;$e<Je.length;$e++){var dt=Me.substr(Je[$e],2),mt=ge(Me,Je[$e]);"a0"==dt&&(Oe.dpname=this.getDistributionPointName(mt))}return Oe},this.getDistributionPointName=function(Me){for(var Oe={},Je=z(Me,0),$e=0;$e<Je.length;$e++){var dt=Me.substr(Je[$e],2),mt=ge(Me,Je[$e]);"a0"==dt&&(Oe.full=this.getGeneralNames(mt))}return Oe},this.getExtCRLDistributionPointsURI=function(){var Me=this.getExtInfo("cRLDistributionPoints");if(void 0===Me)return Me;for(var Oe=new Array,Je=z(this.hex,Me.vidx),$e=0;$e<Je.length;$e++)try{var dt=$r(ke(this.hex,Je[$e],[0,0,0],"86"));Oe.push(dt)}catch(mt){}return Oe},this.getExtAIAInfo=function(){var Me=this.getExtInfo("authorityInfoAccess");if(void 0===Me)return Me;for(var Oe={ocsp:[],caissuer:[]},Je=z(this.hex,Me.vidx),$e=0;$e<Je.length;$e++){var dt=ke(this.hex,Je[$e],[0],"06"),mt=ke(this.hex,Je[$e],[1],"86");"2b06010505073001"===dt&&Oe.ocsp.push($r(mt)),"2b06010505073002"===dt&&Oe.caissuer.push($r(mt))}return Oe},this.getExtAuthorityInfoAccess=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("authorityInfoAccess");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"authorityInfoAccess",array:[]};Oe&&($e.critical=!0);for(var dt=z(Me,0),mt=0;mt<dt.length;mt++){var an=We(Me,dt[mt],[0],"06"),Tt=$r(ke(Me,dt[mt],[1],"86"));if("2b06010505073001"==an)$e.array.push({ocsp:Tt});else{if("2b06010505073002"!=an)throw new Error("unknown method: "+an);$e.array.push({caissuer:Tt})}}return $e},this.getExtCertificatePolicies=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("certificatePolicies");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"certificatePolicies",array:[]};Oe&&($e.critical=!0);for(var dt=z(Me,0),mt=0;mt<dt.length;mt++){var an=ge(Me,dt[mt]),Tt=this.getPolicyInformation(an);$e.array.push(Tt)}return $e},this.getPolicyInformation=function(Me){var Oe={},Je=ke(Me,0,[0],"06");Oe.policyoid=ot(Je);var $e=Ve(Me,0,[1],"30");if(-1!=$e){Oe.array=[];for(var dt=z(Me,$e),mt=0;mt<dt.length;mt++){var an=ge(Me,dt[mt]),Tt=this.getPolicyQualifierInfo(an);Oe.array.push(Tt)}}return Oe},this.getPolicyQualifierInfo=function(Me){var Oe={},Je=ke(Me,0,[0],"06");if("2b06010505070201"===Je){var $e=We(Me,0,[1],"16");Oe.cps=Wi($e)}else if("2b06010505070202"===Je){var dt=Ue(Me,0,[1],"30");Oe.unotice=this.getUserNotice(dt)}return Oe},this.getUserNotice=function(Me){for(var Oe={},Je=z(Me,0),$e=0;$e<Je.length;$e++){var dt=ge(Me,Je[$e]);"30"!=dt.substr(0,2)&&(Oe.exptext=this.getDisplayText(dt))}return Oe},this.getDisplayText=function(Me){var Oe={};return Oe.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Me.substr(0,2)],Oe.str=Wi(Q(Me,0)),Oe},this.getExtCRLNumber=function(Me,Oe){var Je={extname:"cRLNumber"};if(Oe&&(Je.critical=!0),"02"==Me.substr(0,2))return Je.num={hex:Q(Me,0)},Je;throw new Error("hExtV parse error: "+Me)},this.getExtCRLReason=function(Me,Oe){var Je={extname:"cRLReason"};if(Oe&&(Je.critical=!0),"0a"==Me.substr(0,2))return Je.code=parseInt(Q(Me,0),16),Je;throw new Error("hExtV parse error: "+Me)},this.getExtOcspNonce=function(Me,Oe){var Je={extname:"ocspNonce"};Oe&&(Je.critical=!0);var $e=Q(Me,0);return Je.hex=$e,Je},this.getExtOcspNoCheck=function(Me,Oe){var Je={extname:"ocspNoCheck"};return Oe&&(Je.critical=!0),Je},this.getExtAdobeTimeStamp=function(Me,Oe){if(void 0===Me&&void 0===Oe){var Je=this.getExtInfo("adobeTimeStamp");if(void 0===Je)return;Me=ge(this.hex,Je.vidx),Oe=Je.critical}var $e={extname:"adobeTimeStamp"};Oe&&($e.critical=!0);var dt=z(Me,0);if(dt.length>1){var mt=ge(Me,dt[1]),an=this.getGeneralName(mt);null!=an.uri&&($e.uri=an.uri)}if(dt.length>2){var Tt=ge(Me,dt[2]);"0101ff"==Tt&&($e.reqauth=!0),"010100"==Tt&&($e.reqauth=!1)}return $e},this.getX500NameRule=function(Me){for(var Oe=null,Je=[],$e=0;$e<Me.length;$e++)for(var dt=Me[$e],mt=0;mt<dt.length;mt++)Je.push(dt[mt]);for($e=0;$e<Je.length;$e++){var an=Je[$e],Tt=an.ds,jt=an.type;if("prn"!=Tt&&"utf8"!=Tt&&"ia5"!=Tt)return"mixed";if("ia5"==Tt){if("CN"!=jt)return"mixed";if(Ie.lang.String.isMail(an.value))continue;return"mixed"}if("C"==jt){if("prn"==Tt)continue;return"mixed"}if(null==Oe)Oe=Tt;else if(Oe!==Tt)return"mixed"}return null==Oe?"prn":Oe},this.getX500Name=function(Me){var Oe=this.getX500NameArray(Me);return{array:Oe,str:this.dnarraytostr(Oe)}},this.getX500NameArray=function(Me){for(var Oe=[],Je=z(Me,0),$e=0;$e<Je.length;$e++)Oe.push(this.getRDN(ge(Me,Je[$e])));return Oe},this.getRDN=function(Me){for(var Oe=[],Je=z(Me,0),$e=0;$e<Je.length;$e++)Oe.push(this.getAttrTypeAndValue(ge(Me,Je[$e])));return Oe},this.getAttrTypeAndValue=function(Me){var Oe={type:null,value:null,ds:null},Je=z(Me,0),$e=ke(Me,Je[0],[],"06"),dt=ke(Me,Je[1],[]),mt=Ie.asn1.ASN1Util.oidHexToInt($e);return Oe.type=Ie.asn1.x509.OID.oid2atype(mt),Oe.ds=this.HEX2STAG[Me.substr(Je[1],2)],Oe.value="bmp"!=Oe.ds?$r(dt):Cf(dt),Oe},this.readCertPEM=function(Me){this.readCertHex(pt(Me))},this.readCertHex=function(Me){this.hex=Me,this.getVersion();try{qe(this.hex,0,[0,7],"a3"),this.parseExt()}catch(Oe){}},this.getParam=function(){var Me={};return Me.version=this.getVersion(),Me.serial={hex:this.getSerialNumberHex()},Me.sigalg=this.getSignatureAlgorithmField(),Me.issuer=this.getIssuer(),Me.notbefore=this.getNotBefore(),Me.notafter=this.getNotAfter(),Me.subject=this.getSubject(),Me.sbjpubkey=uo(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Me.ext=this.getExtParamArray()),Me.sighex=this.getSignatureValueHex(),Me},this.getExtParamArray=function(Me){null==Me&&-1!=Ve(this.hex,0,[0,"[3]"])&&(Me=Fe(this.hex,0,[0,"[3]",0],"30"));for(var Oe=[],Je=z(Me,0),$e=0;$e<Je.length;$e++){var dt=ge(Me,Je[$e]),mt=this.getExtParam(dt);null!=mt&&Oe.push(mt)}return Oe},this.getExtParam=function(Me){var Oe=z(Me,0).length;if(2!=Oe&&3!=Oe)throw new Error("wrong number elements in Extension: "+Oe+" "+Me);var Je=ct(ke(Me,0,[0],"06")),$e=!1;3==Oe&&"0101ff"==Ue(Me,0,[1])&&($e=!0);var dt=Ue(Me,0,[Oe-1,0]),mt=void 0;if("2.5.29.14"==Je?mt=this.getExtSubjectKeyIdentifier(dt,$e):"2.5.29.15"==Je?mt=this.getExtKeyUsage(dt,$e):"2.5.29.17"==Je?mt=this.getExtSubjectAltName(dt,$e):"2.5.29.18"==Je?mt=this.getExtIssuerAltName(dt,$e):"2.5.29.19"==Je?mt=this.getExtBasicConstraints(dt,$e):"2.5.29.31"==Je?mt=this.getExtCRLDistributionPoints(dt,$e):"2.5.29.32"==Je?mt=this.getExtCertificatePolicies(dt,$e):"2.5.29.35"==Je?mt=this.getExtAuthorityKeyIdentifier(dt,$e):"2.5.29.37"==Je?mt=this.getExtExtKeyUsage(dt,$e):"1.3.6.1.5.5.7.1.1"==Je?mt=this.getExtAuthorityInfoAccess(dt,$e):"2.5.29.20"==Je?mt=this.getExtCRLNumber(dt,$e):"2.5.29.21"==Je?mt=this.getExtCRLReason(dt,$e):"1.3.6.1.5.5.7.48.1.2"==Je?mt=this.getExtOcspNonce(dt,$e):"1.3.6.1.5.5.7.48.1.5"==Je?mt=this.getExtOcspNoCheck(dt,$e):"1.2.840.113583.1.1.9.1"==Je&&(mt=this.getExtAdobeTimeStamp(dt,$e)),null!=mt)return mt;var an={extname:Je,extn:dt};return $e&&(an.critical=!0),an},this.findExt=function(Me,Oe){for(var Je=0;Je<Me.length;Je++)if(Me[Je].extname==Oe)return Me[Je];return null},this.updateExtCDPFullURI=function(Me,Oe){var Je=this.findExt(Me,"cRLDistributionPoints");if(null!=Je&&null!=Je.array)for(var $e=Je.array,dt=0;dt<$e.length;dt++)if(null!=$e[dt].dpname&&null!=$e[dt].dpname.full)for(var mt=$e[dt].dpname.full,an=0;an<mt.length;an++){var Tt=mt[dt];null!=Tt.uri&&(Tt.uri=Oe)}},this.updateExtAIAOCSP=function(Me,Oe){var Je=this.findExt(Me,"authorityInfoAccess");if(null!=Je&&null!=Je.array)for(var $e=Je.array,dt=0;dt<$e.length;dt++)null!=$e[dt].ocsp&&($e[dt].ocsp=Oe)},this.updateExtAIACAIssuer=function(Me,Oe){var Je=this.findExt(Me,"authorityInfoAccess");if(null!=Je&&null!=Je.array)for(var $e=Je.array,dt=0;dt<$e.length;dt++)null!=$e[dt].caissuer&&($e[dt].caissuer=Oe)},this.dnarraytostr=function(Me){return"/"+Me.map(function(Oe){return($e=Oe,$e.map(function(dt){return(an=dt,an.type+"="+an.value).replace(/\+/,"\\+");var an}).join("+")).replace(/\//,"\\/");var $e}).join("/")},this.getInfo=function(){var Me,Oe,Je,Jo,dt=function(Jo){for(var eo="",Zo=Jo.array,xi=0;xi<Zo.length;xi++){var Ti=Zo[xi];if(eo+="    policy oid: "+Ti.policyoid+"\n",void 0!==Ti.array)for(var $i=0;$i<Ti.array.length;$i++){var Co=Ti.array[$i];void 0!==Co.cps&&(eo+="    cps: "+Co.cps+"\n")}}return eo},mt=function(Jo){for(var eo="",Zo=Jo.array,xi=0;xi<Zo.length;xi++){var Ti=Zo[xi];try{void 0!==Ti.dpname.full[0].uri&&(eo+="    "+Ti.dpname.full[0].uri+"\n")}catch($i){}try{void 0!==Ti.dname.full[0].dn.hex&&(eo+="    "+Di.hex2dn(Ti.dpname.full[0].dn.hex)+"\n")}catch($i){}}return eo},an=function(Jo){for(var eo="",Zo=Jo.array,xi=0;xi<Zo.length;xi++){var Ti=Zo[xi];void 0!==Ti.caissuer&&(eo+="    caissuer: "+Ti.caissuer+"\n"),void 0!==Ti.ocsp&&(eo+="    ocsp: "+Ti.ocsp+"\n")}return eo};if(Me="Basic Fields\n",Me+="  serial number: "+this.getSerialNumberHex()+"\n",Me+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",Me+="  issuer: "+this.getIssuerString()+"\n",Me+="  notBefore: "+this.getNotBefore()+"\n",Me+="  notAfter: "+this.getNotAfter()+"\n",Me+="  subject: "+this.getSubjectString()+"\n",Me+="  subject public key info: \n",Me+="    key algorithm: "+(Oe=this.getPublicKey()).type+"\n","RSA"===Oe.type&&(Me+="    n="+$u(Oe.n.toString(16)).substr(0,16)+"...\n",Me+="    e="+$u(Oe.e.toString(16))+"\n"),null!=(Je=this.aExtInfo)){Me+="X509v3 Extensions:\n";for(var Tt=0;Tt<Je.length;Tt++){var Jn=Je[Tt],jt=Ie.asn1.x509.OID.oid2name(Jn.oid);""===jt&&(jt=Jn.oid);var xn="";if(!0===Jn.critical&&(xn="CRITICAL"),Me+="  "+jt+" "+xn+":\n","basicConstraints"===jt){var Ur=this.getExtBasicConstraints();void 0===Ur.cA?Me+="    {}\n":(Me+="    cA=true",void 0!==Ur.pathLen&&(Me+=", pathLen="+Ur.pathLen),Me+="\n")}else if("keyUsage"===jt)Me+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===jt)Me+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===jt){var ii=this.getExtAuthorityKeyIdentifier();void 0!==ii.kid&&(Me+="    kid="+ii.kid.hex+"\n")}else"extKeyUsage"===jt?Me+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===jt?Me+="    "+(Jo=this.getExtSubjectAltName(),JSON.stringify(Jo.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===jt?Me+=mt(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===jt?Me+=an(this.getExtAuthorityInfoAccess()):"certificatePolicies"===jt&&(Me+=dt(this.getExtCertificatePolicies()))}}return(Me+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof v&&(-1!=v.indexOf("-----BEGIN")?this.readCertPEM(v):Ie.lang.String.isHex(v)&&this.readCertHex(v))}Yn.getKey=function(v,y,O){var lr,z=(pt=xt).getChildIdx,Q=pt.getVbyList,ge=Ie.crypto,ke=ge.ECDSA,We=ge.DSA,Ue=Re,Fe=Go,qe=Yn;if(void 0!==Ue&&v instanceof Ue||void 0!==ke&&v instanceof ke||void 0!==We&&v instanceof We)return v;if(void 0!==v.curve&&void 0!==v.xy&&void 0===v.d)return new ke({pub:v.xy,curve:v.curve});if(void 0!==v.curve&&void 0!==v.d)return new ke({prv:v.d,curve:v.curve});if(void 0===v.kty&&void 0!==v.n&&void 0!==v.e&&void 0===v.d)return(xn=new Ue).setPublic(v.n,v.e),xn;if(void 0===v.kty&&void 0!==v.n&&void 0!==v.e&&void 0!==v.d&&void 0!==v.p&&void 0!==v.q&&void 0!==v.dp&&void 0!==v.dq&&void 0!==v.co&&void 0===v.qi)return(xn=new Ue).setPrivateEx(v.n,v.e,v.d,v.p,v.q,v.dp,v.dq,v.co),xn;if(void 0===v.kty&&void 0!==v.n&&void 0!==v.e&&void 0!==v.d&&void 0===v.p)return(xn=new Ue).setPrivate(v.n,v.e,v.d),xn;if(void 0!==v.p&&void 0!==v.q&&void 0!==v.g&&void 0!==v.y&&void 0===v.x)return(xn=new We).setPublic(v.p,v.q,v.g,v.y),xn;if(void 0!==v.p&&void 0!==v.q&&void 0!==v.g&&void 0!==v.y&&void 0!==v.x)return(xn=new We).setPrivate(v.p,v.q,v.g,v.y,v.x),xn;if("RSA"===v.kty&&void 0!==v.n&&void 0!==v.e&&void 0===v.d)return(xn=new Ue).setPublic(Rr(v.n),Rr(v.e)),xn;if("RSA"===v.kty&&void 0!==v.n&&void 0!==v.e&&void 0!==v.d&&void 0!==v.p&&void 0!==v.q&&void 0!==v.dp&&void 0!==v.dq&&void 0!==v.qi)return(xn=new Ue).setPrivateEx(Rr(v.n),Rr(v.e),Rr(v.d),Rr(v.p),Rr(v.q),Rr(v.dp),Rr(v.dq),Rr(v.qi)),xn;if("RSA"===v.kty&&void 0!==v.n&&void 0!==v.e&&void 0!==v.d)return(xn=new Ue).setPrivate(Rr(v.n),Rr(v.e),Rr(v.d)),xn;if("EC"===v.kty&&void 0!==v.crv&&void 0!==v.x&&void 0!==v.y&&void 0===v.d){var Ve=(jt=new ke({curve:v.crv})).ecparams.keylen/4,et="04"+("0000000000"+Rr(v.x)).slice(-Ve)+("0000000000"+Rr(v.y)).slice(-Ve);return jt.setPublicKeyHex(et),jt}if("EC"===v.kty&&void 0!==v.crv&&void 0!==v.x&&void 0!==v.y&&void 0!==v.d){Ve=(jt=new ke({curve:v.crv})).ecparams.keylen/4,et="04"+("0000000000"+Rr(v.x)).slice(-Ve)+("0000000000"+Rr(v.y)).slice(-Ve);var rt=("0000000000"+Rr(v.d)).slice(-Ve);return jt.setPublicKeyHex(et),jt.setPrivateKeyHex(rt),jt}if("pkcs5prv"===O){var ot,ct=v,pt=xt;if(9===(ot=z(ct,0)).length)(xn=new Ue).readPKCS5PrvKeyHex(ct);else if(6===ot.length)(xn=new We).readPKCS5PrvKeyHex(ct);else{if(!(ot.length>2&&"04"===ct.substr(ot[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(xn=new ke).readPKCS5PrvKeyHex(ct)}return xn}if("pkcs8prv"===O)return qe.getKeyFromPlainPrivatePKCS8Hex(v);if("pkcs8pub"===O)return qe._getKeyFromPublicPKCS8Hex(v);if("x509pub"===O)return Di.getPublicKeyFromCertHex(v);if(-1!=v.indexOf("-END CERTIFICATE-",0)||-1!=v.indexOf("-END X509 CERTIFICATE-",0)||-1!=v.indexOf("-END TRUSTED CERTIFICATE-",0))return Di.getPublicKeyFromCertPEM(v);if(-1!=v.indexOf("-END PUBLIC KEY-")){var Me=Go(v,"PUBLIC KEY");return qe._getKeyFromPublicPKCS8Hex(Me)}if(-1!=v.indexOf("-END RSA PRIVATE KEY-")&&-1==v.indexOf("4,ENCRYPTED")){var Oe=Fe(v,"RSA PRIVATE KEY");return qe.getKey(Oe,null,"pkcs5prv")}if(-1!=v.indexOf("-END DSA PRIVATE KEY-")&&-1==v.indexOf("4,ENCRYPTED")){var Je=Q(lr=Fe(v,"DSA PRIVATE KEY"),0,[1],"02"),$e=Q(lr,0,[2],"02"),dt=Q(lr,0,[3],"02"),mt=Q(lr,0,[4],"02"),an=Q(lr,0,[5],"02");return(xn=new We).setPrivate(new j(Je,16),new j($e,16),new j(dt,16),new j(mt,16),new j(an,16)),xn}if(-1!=v.indexOf("-END EC PRIVATE KEY-")&&-1==v.indexOf("4,ENCRYPTED"))return Oe=Fe(v,"EC PRIVATE KEY"),qe.getKey(Oe,null,"pkcs5prv");if(-1!=v.indexOf("-END PRIVATE KEY-"))return qe.getKeyFromPlainPrivatePKCS8PEM(v);if(-1!=v.indexOf("-END RSA PRIVATE KEY-")&&-1!=v.indexOf("4,ENCRYPTED")){var Tt=qe.getDecryptedKeyHex(v,y),Jn=new Re;return Jn.readPKCS5PrvKeyHex(Tt),Jn}if(-1!=v.indexOf("-END EC PRIVATE KEY-")&&-1!=v.indexOf("4,ENCRYPTED")){var jt,xn=Q(lr=qe.getDecryptedKeyHex(v,y),0,[1],"04"),Ur=Q(lr,0,[2,0],"06"),ii=Q(lr,0,[3,0],"03").substr(2);if(void 0===Ie.crypto.OID.oidhex2name[Ur])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+Ur);return(jt=new ke({curve:Ie.crypto.OID.oidhex2name[Ur]})).setPublicKeyHex(ii),jt.setPrivateKeyHex(xn),jt.isPublic=!1,jt}if(-1!=v.indexOf("-END DSA PRIVATE KEY-")&&-1!=v.indexOf("4,ENCRYPTED"))return Je=Q(lr=qe.getDecryptedKeyHex(v,y),0,[1],"02"),$e=Q(lr,0,[2],"02"),dt=Q(lr,0,[3],"02"),mt=Q(lr,0,[4],"02"),an=Q(lr,0,[5],"02"),(xn=new We).setPrivate(new j(Je,16),new j($e,16),new j(dt,16),new j(mt,16),new j(an,16)),xn;if(-1!=v.indexOf("-END ENCRYPTED PRIVATE KEY-"))return qe.getKeyFromEncryptedPKCS8PEM(v,y);throw new Error("not supported argument")},Yn.generateKeypair=function(v,y){if("RSA"==v){var O=y;(ke=new Re).generate(O,"10001"),ke.isPrivate=!0,ke.isPublic=!0;var z=new Re,Q=ke.n.toString(16),ge=ke.e.toString(16);return z.setPublic(Q,ge),z.isPrivate=!1,z.isPublic=!0,(We={}).prvKeyObj=ke,We.pubKeyObj=z,We}if("EC"==v){var ke,We,Ue=y,Fe=new Ie.crypto.ECDSA({curve:Ue}).generateKeyPairHex();return(ke=new Ie.crypto.ECDSA({curve:Ue})).setPublicKeyHex(Fe.ecpubhex),ke.setPrivateKeyHex(Fe.ecprvhex),ke.isPrivate=!0,ke.isPublic=!1,(z=new Ie.crypto.ECDSA({curve:Ue})).setPublicKeyHex(Fe.ecpubhex),z.isPrivate=!1,z.isPublic=!0,(We={}).prvKeyObj=ke,We.pubKeyObj=z,We}throw new Error("unknown algorithm: "+v)},Yn.getPEM=function(v,y,O,z,Q,ge){var We=Ie.asn1,Ue=We.DERObjectIdentifier,Fe=We.DERInteger,qe=We.ASN1Util.newObject,et=Ie.crypto,rt=et.DSA,ot=et.ECDSA,ct=Re;function pt(jt){return qe({seq:[{int:0},{int:{bigint:jt.n}},{int:jt.e},{int:{bigint:jt.d}},{int:{bigint:jt.p}},{int:{bigint:jt.q}},{int:{bigint:jt.dmp1}},{int:{bigint:jt.dmq1}},{int:{bigint:jt.coeff}}]})}function Me(jt){return qe({seq:[{int:1},{octstr:{hex:jt.prvKeyHex}},{tag:["a0",!0,{oid:{name:jt.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+jt.pubKeyHex}}]}]})}function Oe(jt){return qe({seq:[{int:0},{int:{bigint:jt.p}},{int:{bigint:jt.q}},{int:{bigint:jt.g}},{int:{bigint:jt.y}},{int:{bigint:jt.x}}]})}if((void 0!==ct&&v instanceof ct||void 0!==rt&&v instanceof rt||void 0!==ot&&v instanceof ot)&&1==v.isPublic&&(void 0===y||"PKCS8PUB"==y))return uo(mt=new(0,We.x509.SubjectPublicKeyInfo)(v).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==y&&void 0!==ct&&v instanceof ct&&(void 0===O||null==O)&&1==v.isPrivate)return uo(mt=pt(v).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==y&&void 0!==ot&&v instanceof ot&&(void 0===O||null==O)&&1==v.isPrivate){var Je=new Ue({name:v.curveName}).getEncodedHex(),$e=Me(v).getEncodedHex(),dt="";return(dt+=uo(Je,"EC PARAMETERS"))+uo($e,"EC PRIVATE KEY")}if("PKCS1PRV"==y&&void 0!==rt&&v instanceof rt&&(void 0===O||null==O)&&1==v.isPrivate)return uo(mt=Oe(v).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==y&&void 0!==ct&&v instanceof ct&&void 0!==O&&null!=O&&1==v.isPrivate){var mt=pt(v).getEncodedHex();return void 0===z&&(z="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",mt,O,z,ge)}if("PKCS5PRV"==y&&void 0!==ot&&v instanceof ot&&void 0!==O&&null!=O&&1==v.isPrivate)return mt=Me(v).getEncodedHex(),void 0===z&&(z="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",mt,O,z,ge);if("PKCS5PRV"==y&&void 0!==rt&&v instanceof rt&&void 0!==O&&null!=O&&1==v.isPrivate)return mt=Oe(v).getEncodedHex(),void 0===z&&(z="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",mt,O,z,ge);var an=function(xn,Ur){var ii=Tt(xn,Ur);return new qe({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:ii.pbkdf2Salt}},{int:ii.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:ii.encryptionSchemeIV}}]}]}]},{octstr:{hex:ii.ciphertext}}]}).getEncodedHex()},Tt=function(xn,Ur){var ii=L.lib.WordArray.random(8),lr=L.lib.WordArray.random(8),Jo=L.PBKDF2(Ur,ii,{keySize:6,iterations:100}),eo=L.enc.Hex.parse(xn),Zo=L.TripleDES.encrypt(eo,Jo,{iv:lr})+"",xi={};return xi.ciphertext=Zo,xi.pbkdf2Salt=L.enc.Hex.stringify(ii),xi.pbkdf2Iter=100,xi.encryptionSchemeAlg="DES-EDE3-CBC",xi.encryptionSchemeIV=L.enc.Hex.stringify(lr),xi};if("PKCS8PRV"==y&&null!=ct&&v instanceof ct&&1==v.isPrivate){var Jn=pt(v).getEncodedHex();return mt=qe({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Jn}}]}).getEncodedHex(),void 0===O||null==O?uo(mt,"PRIVATE KEY"):uo($e=an(mt,O),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==y&&void 0!==ot&&v instanceof ot&&1==v.isPrivate)return Jn=new qe({seq:[{int:1},{octstr:{hex:v.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+v.pubKeyHex}}]}]}).getEncodedHex(),mt=qe({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:v.curveName}}]},{octstr:{hex:Jn}}]}).getEncodedHex(),void 0===O||null==O?uo(mt,"PRIVATE KEY"):uo($e=an(mt,O),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==y&&void 0!==rt&&v instanceof rt&&1==v.isPrivate)return Jn=new Fe({bigint:v.x}).getEncodedHex(),mt=qe({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:v.p}},{int:{bigint:v.q}},{int:{bigint:v.g}}]}]},{octstr:{hex:Jn}}]}).getEncodedHex(),void 0===O||null==O?uo(mt,"PRIVATE KEY"):uo($e=an(mt,O),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Yn.getKeyFromCSRPEM=function(v){var y=Go(v,"CERTIFICATE REQUEST");return Yn.getKeyFromCSRHex(y)},Yn.getKeyFromCSRHex=function(v){var y=Yn.parseCSRHex(v);return Yn.getKey(y.p8pubkeyhex,null,"pkcs8pub")},Yn.parseCSRHex=function(v){var O=xt.getChildIdx,z=xt.getTLV,Q={},ge=v;if("30"!=ge.substr(0,2))throw new Error("malformed CSR(code:001)");var ke=O(ge,0);if(ke.length<1)throw new Error("malformed CSR(code:002)");if("30"!=ge.substr(ke[0],2))throw new Error("malformed CSR(code:003)");var We=O(ge,ke[0]);if(We.length<3)throw new Error("malformed CSR(code:004)");return Q.p8pubkeyhex=z(ge,We[2]),Q},Yn.getKeyID=function(v){var y=Yn,O=xt;"string"==typeof v&&-1!=v.indexOf("BEGIN ")&&(v=y.getKey(v));var z=Go(y.getPEM(v)),Q=O.getIdxbyList(z,0,[1]),ge=O.getV(z,Q).substring(2);return Ie.crypto.Util.hashHex(ge,"sha1")},Yn.getJWKFromKey=function(v){var y={};if(v instanceof Re&&v.isPrivate)return y.kty="RSA",y.n=ri(v.n.toString(16)),y.e=ri(v.e.toString(16)),y.d=ri(v.d.toString(16)),y.p=ri(v.p.toString(16)),y.q=ri(v.q.toString(16)),y.dp=ri(v.dmp1.toString(16)),y.dq=ri(v.dmq1.toString(16)),y.qi=ri(v.coeff.toString(16)),y;if(v instanceof Re&&v.isPublic)return y.kty="RSA",y.n=ri(v.n.toString(16)),y.e=ri(v.e.toString(16)),y;if(v instanceof Ie.crypto.ECDSA&&v.isPrivate){if("P-256"!==(z=v.getShortNISTPCurveName())&&"P-384"!==z)throw new Error("unsupported curve name for JWT: "+z);var O=v.getPublicKeyXYHex();return y.kty="EC",y.crv=z,y.x=ri(O.x),y.y=ri(O.y),y.d=ri(v.prvKeyHex),y}if(v instanceof Ie.crypto.ECDSA&&v.isPublic){var z;if("P-256"!==(z=v.getShortNISTPCurveName())&&"P-384"!==z)throw new Error("unsupported curve name for JWT: "+z);return O=v.getPublicKeyXYHex(),y.kty="EC",y.crv=z,y.x=ri(O.x),y.y=ri(O.y),y}throw new Error("not supported key object")},Re.getPosArrayOfChildrenFromHex=function(v){return xt.getChildIdx(v,0)},Re.getHexValueArrayOfChildrenFromHex=function(v){var y,O=xt.getV,z=O(v,(y=Re.getPosArrayOfChildrenFromHex(v))[0]),Q=O(v,y[1]),ge=O(v,y[2]),ke=O(v,y[3]),We=O(v,y[4]),Ue=O(v,y[5]),Fe=O(v,y[6]),qe=O(v,y[7]),Ve=O(v,y[8]);return(y=new Array).push(z,Q,ge,ke,We,Ue,Fe,qe,Ve),y},Re.prototype.readPrivateKeyFromPEMString=function(v){var y=Go(v),O=Re.getHexValueArrayOfChildrenFromHex(y);this.setPrivateEx(O[1],O[2],O[3],O[4],O[5],O[6],O[7],O[8])},Re.prototype.readPKCS5PrvKeyHex=function(v){var y=Re.getHexValueArrayOfChildrenFromHex(v);this.setPrivateEx(y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8])},Re.prototype.readPKCS8PrvKeyHex=function(v){var y,O,z,Q,ge,ke,We,Ue,qe=xt.getVbyListEx;if(!1===xt.isASN1HEX(v))throw new Error("not ASN.1 hex string");try{y=qe(v,0,[2,0,1],"02"),O=qe(v,0,[2,0,2],"02"),z=qe(v,0,[2,0,3],"02"),Q=qe(v,0,[2,0,4],"02"),ge=qe(v,0,[2,0,5],"02"),ke=qe(v,0,[2,0,6],"02"),We=qe(v,0,[2,0,7],"02"),Ue=qe(v,0,[2,0,8],"02")}catch(Ve){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(y,O,z,Q,ge,ke,We,Ue)},Re.prototype.readPKCS5PubKeyHex=function(v){var y=xt,O=y.getV;if(!1===y.isASN1HEX(v))throw new Error("keyHex is not ASN.1 hex string");var z=y.getChildIdx(v,0);if(2!==z.length||"02"!==v.substr(z[0],2)||"02"!==v.substr(z[1],2))throw new Error("wrong hex for PKCS#5 public key");var Q=O(v,z[0]),ge=O(v,z[1]);this.setPublic(Q,ge)},Re.prototype.readPKCS8PubKeyHex=function(v){var y=xt;if(!1===y.isASN1HEX(v))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==y.getTLVbyListEx(v,0,[0,0]))throw new Error("not PKCS8 RSA public key");var O=y.getTLVbyListEx(v,0,[1,0]);this.readPKCS5PubKeyHex(O)},Re.prototype.readCertPubKeyHex=function(v,y){var O,z;(O=new Di).readCertHex(v),z=O.getPublicKeyHex(),this.readPKCS8PubKeyHex(z)},new RegExp("[^0-9a-f]","gi"),Re.prototype.sign=function(v,y){var O=function(Q){return Ie.crypto.Util.hashString(Q,y)}(v);return this.signWithMessageHash(O,y)},Re.prototype.signWithMessageHash=function(v,y){var O=Ae(Ie.crypto.Util.getPaddedDigestInfoHex(v,y,this.n.bitLength()),16);return Es(this.doPrivate(O).toString(16),this.n.bitLength())},Re.prototype.signPSS=function(v,y,O){var ge,z=(ge=So(v),Ie.crypto.Util.hashHex(ge,y));return void 0===O&&(O=-1),this.signWithMessageHashPSS(z,y,O)},Re.prototype.signWithMessageHashPSS=function(v,y,O){var z,Q=Wi(v),ge=Q.length,ke=this.n.bitLength()-1,We=Math.ceil(ke/8),Ue=function(Me){return Ie.crypto.Util.hashHex(Me,y)};if(-1===O||void 0===O)O=ge;else if(-2===O)O=We-ge-2;else if(O<-2)throw new Error("invalid salt length");if(We<ge+O+2)throw new Error("data too long");var Fe="";O>0&&(Fe=new Array(O),(new Z).nextBytes(Fe),Fe=String.fromCharCode.apply(String,Fe));var qe=Wi(Ue(So("\0\0\0\0\0\0\0\0"+Q+Fe))),Ve=[];for(z=0;z<We-O-ge-2;z+=1)Ve[z]=0;var et=String.fromCharCode.apply(String,Ve)+"\x01"+Fe,rt=qo(qe,et.length,Ue),ot=[];for(z=0;z<et.length;z+=1)ot[z]=et.charCodeAt(z)^rt.charCodeAt(z);for(ot[0]&=~(65280>>8*We-ke&255),z=0;z<ge;z++)ot.push(qe.charCodeAt(z));return ot.push(188),Es(this.doPrivate(new j(ot)).toString(16),this.n.bitLength())},Re.prototype.verify=function(v,y){if(null==(y=y.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var O=Ae(y,16),z=this.n.bitLength();if(O.bitLength()>z)return!1;var Q=this.doPublic(O).toString(16);if(Q.length+3!=z/4)return!1;var ge=Ef(Q.replace(/^1f+00/,""));return 0!=ge.length&&ge[1]==Ie.crypto.Util.hashString(v,ge[0])},Re.prototype.verifyWithMessageHash=function(v,y){if(y.length!=Math.ceil(this.n.bitLength()/4))return!1;var O=Ae(y,16);if(O.bitLength()>this.n.bitLength())return 0;var z=Ef(this.doPublic(O).toString(16).replace(/^1f+00/,""));return 0!=z.length&&z[1]==v},Re.prototype.verifyPSS=function(v,y,O,z){var ke,Q=(ke=So(v),Ie.crypto.Util.hashHex(ke,O));return void 0===z&&(z=-1),this.verifyWithMessageHashPSS(Q,y,O,z)},Re.prototype.verifyWithMessageHashPSS=function(v,y,O,z){if(y.length!=Math.ceil(this.n.bitLength()/4))return!1;var Q,ge=new j(y,16),ke=function(Je){return Ie.crypto.Util.hashHex(Je,O)},We=Wi(v),Ue=We.length,Fe=this.n.bitLength()-1,qe=Math.ceil(Fe/8);if(-1===z||void 0===z)z=Ue;else if(-2===z)z=qe-Ue-2;else if(z<-2)throw new Error("invalid salt length");if(qe<Ue+z+2)throw new Error("data too long");var Ve=this.doPublic(ge).toByteArray();for(Q=0;Q<Ve.length;Q+=1)Ve[Q]&=255;for(;Ve.length<qe;)Ve.unshift(0);if(188!==Ve[qe-1])throw new Error("encoded message does not end in 0xbc");var et=(Ve=String.fromCharCode.apply(String,Ve)).substr(0,qe-Ue-1),rt=Ve.substr(et.length,Ue),ot=65280>>8*qe-Fe&255;if(0!=(et.charCodeAt(0)&ot))throw new Error("bits beyond keysize not zero");var ct=qo(rt,et.length,ke),pt=[];for(Q=0;Q<et.length;Q+=1)pt[Q]=et.charCodeAt(Q)^ct.charCodeAt(Q);pt[0]&=~ot;var Me=qe-Ue-z-2;for(Q=0;Q<Me;Q+=1)if(0!==pt[Q])throw new Error("leftmost octets not zero");if(1!==pt[Me])throw new Error("0x01 marker not found");return rt===Wi(ke(So("\0\0\0\0\0\0\0\0"+We+String.fromCharCode.apply(String,pt.slice(-z)))))},Re.SALT_LEN_HLEN=-1,Re.SALT_LEN_MAX=-2,Re.SALT_LEN_RECOVER=-2,Di.hex2dn=function(v,y){void 0===y&&(y=0);var O=new Di;return xt.getTLV(v,y),O.getX500Name(v).str},Di.hex2rdn=function(v,y){if(void 0===y&&(y=0),"31"!==v.substr(y,2))throw new Error("malformed RDN");for(var O=new Array,z=xt.getChildIdx(v,y),Q=0;Q<z.length;Q++)O.push(Di.hex2attrTypeValue(v,z[Q]));return(O=O.map(function(ge){return ge.replace("+","\\+")})).join("+")},Di.hex2attrTypeValue=function(v,y){var O=xt,z=O.getV;if(void 0===y&&(y=0),"30"!==v.substr(y,2))throw new Error("malformed attribute type and value");var Q=O.getChildIdx(v,y);2!==Q.length||v.substr(Q[0],2);var ge=z(v,Q[0]),ke=Ie.asn1.ASN1Util.oidHexToInt(ge);return Ie.asn1.x509.OID.oid2atype(ke)+"="+Wi(z(v,Q[1]))},Di.getPublicKeyFromCertHex=function(v){var y=new Di;return y.readCertHex(v),y.getPublicKey()},Di.getPublicKeyFromCertPEM=function(v){var y=new Di;return y.readCertPEM(v),y.getPublicKey()},Di.getPublicKeyInfoPropOfCertPEM=function(v){var y,O,z=xt.getVbyList,Q={algparam:null};return(y=new Di).readCertPEM(v),O=y.getPublicKeyHex(),Q.keyhex=z(O,0,[1],"03").substr(2),Q.algoid=z(O,0,[0,0],"06"),"2a8648ce3d0201"===Q.algoid&&(Q.algparam=z(O,0,[0,1],"06")),Q},Di.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Ie&&Ie||(F.KJUR=Ie={}),void 0!==Ie.jws&&Ie.jws||(Ie.jws={}),Ie.jws.JWS=function(){var v=Ie.jws.JWS.isSafeJSONString;this.parseJWS=function(y,O){if(void 0===this.parsedJWS||!O&&void 0===this.parsedJWS.sigvalH){var z=y.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==z)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var Q=z[1],ge=z[2],ke=z[3],We=Q+"."+ge;if(this.parsedJWS={},this.parsedJWS.headB64U=Q,this.parsedJWS.payloadB64U=ge,this.parsedJWS.sigvalB64U=ke,this.parsedJWS.si=We,!O){var Ue=Rr(ke),Fe=Ae(Ue,16);this.parsedJWS.sigvalH=Ue,this.parsedJWS.sigvalBI=Fe}var qe=Er(Q),Ve=Er(ge);if(this.parsedJWS.headS=qe,this.parsedJWS.payloadS=Ve,!v(qe,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+qe}}},Ie.jws.JWS.sign=function(v,y,O,z,Q){var ge,ke,We,Fe=Ie.jws.JWS,qe=Fe.readSafeJSONString,Ve=Fe.isSafeJSONString,et=Ie.crypto,rt=et.Mac,ot=et.Signature,ct=JSON;if("string"!=typeof y&&"object"!=(void 0===y?"undefined":_(y)))throw"spHeader must be JSON string or object: "+y;if("object"==(void 0===y?"undefined":_(y))&&(ge=ct.stringify(ke=y)),"string"==typeof y){if(!Ve(ge=y))throw"JWS Head is not safe JSON string: "+ge;ke=qe(ge)}if(We=O,"object"==(void 0===O?"undefined":_(O))&&(We=ct.stringify(O)),""!=v&&null!=v||void 0===ke.alg||(v=ke.alg),""!=v&&null!=v&&void 0===ke.alg&&(ke.alg=v,ge=ct.stringify(ke)),v!==ke.alg)throw"alg and sHeader.alg doesn't match: "+v+"!="+ke.alg;var pt=null;if(void 0===Fe.jwsalg2sigalg[v])throw"unsupported alg name: "+v;pt=Fe.jwsalg2sigalg[v];var Me=bn(ge)+"."+bn(We),Oe="";if("Hmac"==pt.substr(0,4)){if(void 0===z)throw"mac key shall be specified for HS* alg";var Je=new rt({alg:pt,prov:"cryptojs",pass:z});Je.updateString(Me),Oe=Je.doFinal()}else if(-1!=pt.indexOf("withECDSA")){(dt=new ot({alg:pt})).init(z,Q),dt.updateString(Me);var $e=dt.sign();Oe=Ie.crypto.ECDSA.asn1SigToConcatSig($e)}else{var dt;"none"!=pt&&((dt=new ot({alg:pt})).init(z,Q),dt.updateString(Me),Oe=dt.sign())}return Me+"."+ri(Oe)},Ie.jws.JWS.verify=function(v,y,O){var z,ge=Ie.jws.JWS,ke=ge.readSafeJSONString,We=Ie.crypto,Ue=We.ECDSA,Fe=We.Mac,qe=We.Signature;void 0!==_(Re)&&(z=Re);var Ve=v.split(".");if(3!==Ve.length)return!1;var pt,et=Ve[0]+"."+Ve[1],rt=Rr(Ve[2]),ot=ke(Er(Ve[0])),ct=null;if(void 0===ot.alg)throw"algorithm not specified in header";if(pt=(ct=ot.alg).substr(0,2),null!=O&&"[object Array]"===Object.prototype.toString.call(O)&&O.length>0&&-1==(":"+O.join(":")+":").indexOf(":"+ct+":"))throw"algorithm '"+ct+"' not accepted in the list";if("none"!=ct&&null===y)throw"key shall be specified to verify.";if("string"==typeof y&&-1!=y.indexOf("-----BEGIN ")&&(y=Yn.getKey(y)),!("RS"!=pt&&"PS"!=pt||y instanceof z))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==pt&&!(y instanceof Ue))throw"key shall be a ECDSA obj for ES* algs";var Me=null;if(void 0===ge.jwsalg2sigalg[ot.alg])throw"unsupported alg name: "+ct;if("none"==(Me=ge.jwsalg2sigalg[ct]))throw"not supported";if("Hmac"==Me.substr(0,4)){if(void 0===y)throw"hexadecimal key shall be specified for HMAC";var Oe=new Fe({alg:Me,pass:y});return Oe.updateString(et),rt==Oe.doFinal()}if(-1!=Me.indexOf("withECDSA")){var Je,$e=null;try{$e=Ue.concatSigToASN1Sig(rt)}catch(dt){return!1}return(Je=new qe({alg:Me})).init(y),Je.updateString(et),Je.verify($e)}return(Je=new qe({alg:Me})).init(y),Je.updateString(et),Je.verify(rt)},Ie.jws.JWS.parse=function(v){var O,z,Q=v.split("."),ge={};if(2!=Q.length&&3!=Q.length)throw"malformed sJWS: wrong number of '.' splitted elements";return O=Q[1],3==Q.length&&(z=Q[2]),ge.headerObj=Ie.jws.JWS.readSafeJSONString(Er(Q[0])),ge.payloadObj=Ie.jws.JWS.readSafeJSONString(Er(O)),ge.headerPP=JSON.stringify(ge.headerObj,null,"  "),ge.payloadPP=null==ge.payloadObj?Er(O):JSON.stringify(ge.payloadObj,null,"  "),void 0!==z&&(ge.sigHex=Rr(z)),ge},Ie.jws.JWS.verifyJWT=function(v,y,O){var z=Ie.jws,Q=z.JWS,ge=Q.readSafeJSONString,ke=Q.inArray,We=Q.includedArray,Ue=v.split("."),Fe=Ue[0],qe=Ue[1],Ve=(Rr(Ue[2]),ge(Er(Fe))),et=ge(Er(qe));if(void 0===Ve.alg)return!1;if(void 0===O.alg)throw"acceptField.alg shall be specified";if(!ke(Ve.alg,O.alg)||void 0!==et.iss&&"object"===_(O.iss)&&!ke(et.iss,O.iss)||void 0!==et.sub&&"object"===_(O.sub)&&!ke(et.sub,O.sub))return!1;if(void 0!==et.aud&&"object"===_(O.aud))if("string"==typeof et.aud){if(!ke(et.aud,O.aud))return!1}else if("object"==_(et.aud)&&!We(et.aud,O.aud))return!1;var rt=z.IntDate.getNow();return void 0!==O.verifyAt&&"number"==typeof O.verifyAt&&(rt=O.verifyAt),void 0!==O.gracePeriod&&"number"==typeof O.gracePeriod||(O.gracePeriod=0),!(void 0!==et.exp&&"number"==typeof et.exp&&et.exp+O.gracePeriod<rt||void 0!==et.nbf&&"number"==typeof et.nbf&&rt<et.nbf-O.gracePeriod||void 0!==et.iat&&"number"==typeof et.iat&&rt<et.iat-O.gracePeriod||void 0!==et.jti&&void 0!==O.jti&&et.jti!==O.jti||!Q.verify(v,y,O.alg))},Ie.jws.JWS.includedArray=function(v,y){var O=Ie.jws.JWS.inArray;if(null===v||"object"!==(void 0===v?"undefined":_(v))||"number"!=typeof v.length)return!1;for(var z=0;z<v.length;z++)if(!O(v[z],y))return!1;return!0},Ie.jws.JWS.inArray=function(v,y){if(null===y||"object"!==(void 0===y?"undefined":_(y))||"number"!=typeof y.length)return!1;for(var O=0;O<y.length;O++)if(y[O]==v)return!0;return!1},Ie.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Ie.jws.JWS.isSafeJSONString=function(v,y,O){var z=null;try{return"object"!=(void 0===(z=ln(v))?"undefined":_(z))||z.constructor===Array?0:(y&&(y[O]=z),1)}catch(Q){return 0}},Ie.jws.JWS.readSafeJSONString=function(v){var y=null;try{return"object"!=(void 0===(y=ln(v))?"undefined":_(y))||y.constructor===Array?null:y}catch(O){return null}},Ie.jws.JWS.getEncodedSignatureValueFromJWS=function(v){var y=v.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==y)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return y[1]},Ie.jws.JWS.getJWKthumbprint=function(v){if("RSA"!==v.kty&&"EC"!==v.kty&&"oct"!==v.kty)throw"unsupported algorithm for JWK Thumprint";var y="{";if("RSA"===v.kty){if("string"!=typeof v.n||"string"!=typeof v.e)throw"wrong n and e value for RSA key";y+='"e":"'+v.e+'",',y+='"kty":"'+v.kty+'",',y+='"n":"'+v.n+'"}'}else if("EC"===v.kty){if("string"!=typeof v.crv||"string"!=typeof v.x||"string"!=typeof v.y)throw"wrong crv, x and y value for EC key";y+='"crv":"'+v.crv+'",',y+='"kty":"'+v.kty+'",',y+='"x":"'+v.x+'",',y+='"y":"'+v.y+'"}'}else if("oct"===v.kty){if("string"!=typeof v.k)throw"wrong k value for oct(symmetric) key";y+='"kty":"'+v.kty+'",',y+='"k":"'+v.k+'"}'}var O=So(y);return ri(Ie.crypto.Util.hashHex(O,"sha256"))},Ie.jws.IntDate={},Ie.jws.IntDate.get=function(v){var y=Ie.jws.IntDate,O=y.getNow,z=y.getZulu;if("now"==v)return O();if("now + 1hour"==v)return O()+3600;if("now + 1day"==v)return O()+86400;if("now + 1month"==v)return O()+2592e3;if("now + 1year"==v)return O()+31536e3;if(v.match(/Z$/))return z(v);if(v.match(/^[0-9]+$/))return parseInt(v);throw"unsupported format: "+v},Ie.jws.IntDate.getZulu=function(v){return yl(v)},Ie.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Ie.jws.IntDate.intDate2UTCString=function(v){return new Date(1e3*v).toUTCString()},Ie.jws.IntDate.intDate2Zulu=function(v){var y=new Date(1e3*v);return("0000"+y.getUTCFullYear()).slice(-4)+("00"+(y.getUTCMonth()+1)).slice(-2)+("00"+y.getUTCDate()).slice(-2)+("00"+y.getUTCHours()).slice(-2)+("00"+y.getUTCMinutes()).slice(-2)+("00"+y.getUTCSeconds()).slice(-2)+"Z"},F.SecureRandom=Z,F.rng_seed_time=K,F.BigInteger=j,F.RSAKey=Re,F.EDSA=Ie.crypto.EDSA,F.DSA=Ie.crypto.DSA,F.Signature=Ie.crypto.Signature,F.MessageDigest=Ie.crypto.MessageDigest,F.Mac=Ie.crypto.Mac,F.Cipher=Ie.crypto.Cipher,F.KEYUTIL=Yn,F.ASN1HEX=xt,F.X509=Di,F.CryptoJS=L,F.b64tohex=P,F.b64toBA=V,F.stoBA=ni,F.BAtos=zi,F.BAtohex=Fr,F.stohex=Kn,F.stob64=function(y){return I(Kn(y))},F.stob64u=function(y){return ua(I(Kn(y)))},F.b64utos=function(y){return zi(V(Ss(y)))},F.b64tob64u=ua,F.b64utob64=Ss,F.hex2b64=I,F.hextob64u=ri,F.b64utohex=Rr,F.utf8tob64u=bn,F.b64utoutf8=Er,F.utf8tob64=function(y){return I(Pa(vl(y)))},F.b64toutf8=function(y){return decodeURIComponent(Or(P(y)))},F.utf8tohex=Ko,F.hextoutf8=$r,F.hextorstr=Wi,F.rstrtohex=So,F.hextob64=Vc,F.hextob64nl=gl,F.b64nltohex=ml,F.hextopem=uo,F.pemtohex=Go,F.hextoArrayBuffer=function(y){if(y.length%2!=0)throw"input is not even length";if(null==y.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var O=new ArrayBuffer(y.length/2),z=new DataView(O),Q=0;Q<y.length/2;Q++)z.setUint8(Q,parseInt(y.substr(2*Q,2),16));return O},F.ArrayBuffertohex=function(y){for(var O="",z=new DataView(y),Q=0;Q<y.byteLength;Q++)O+=("00"+z.getUint8(Q).toString(16)).slice(-2);return O},F.zulutomsec=Oa,F.zulutosec=yl,F.zulutodate=function(y){return new Date(Oa(y))},F.datetozulu=function(y,O,z){var Q,ge=y.getUTCFullYear();if(O){if(ge<1950||2049<ge)throw"not proper year for UTCTime: "+ge;Q=(""+ge).slice(-2)}else Q=("000"+ge).slice(-4);if(Q+=("0"+(y.getUTCMonth()+1)).slice(-2),Q+=("0"+y.getUTCDate()).slice(-2),Q+=("0"+y.getUTCHours()).slice(-2),Q+=("0"+y.getUTCMinutes()).slice(-2),Q+=("0"+y.getUTCSeconds()).slice(-2),z){var ke=y.getUTCMilliseconds();0!==ke&&(Q+="."+(ke=(ke=("00"+ke).slice(-3)).replace(/0+$/g,"")))}return Q+"Z"},F.uricmptohex=Pa,F.hextouricmp=Or,F.ipv6tohex=Lo,F.hextoipv6=Fa,F.hextoip=zc,F.iptohex=function(y){var O="malformed IP address";if(!(y=y.toLowerCase(y)).match(/^[0-9.]+$/)){if(y.match(/^[0-9a-f:]+$/)&&-1!==y.indexOf(":"))return Lo(y);throw O}var z=y.split(".");if(4!==z.length)throw O;var Q="";try{for(var ge=0;ge<4;ge++)Q+=("0"+parseInt(z[ge]).toString(16)).slice(-2);return Q}catch(ke){throw O}},F.encodeURIComponentAll=vl,F.newline_toUnix=function(y){return y.replace(/\r\n/gm,"\n")},F.newline_toDos=function(y){return(y=y.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},F.hextoposhex=$u,F.intarystrtohex=function(y){y=(y=(y=y.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return y.split(/,/).map(function(O,z,Q){var ge=parseInt(O);if(ge<0||255<ge)throw"integer not in range 0-255";return("00"+ge.toString(16)).slice(-2)}).join("")}catch(O){throw"malformed integer array string: "+O}},F.strdiffidx=function(y,O){var z=y.length;y.length>O.length&&(z=O.length);for(var Q=0;Q<z;Q++)if(y.charCodeAt(Q)!=O.charCodeAt(Q))return Q;return y.length!=O.length?z:-1},F.KJUR=Ie,F.crypto=Ie.crypto,F.asn1=Ie.asn1,F.jws=Ie.jws,F.lang=Ie.lang}).call(this,B(28).Buffer)},function(G,F,B){"use strict";(function(C){var b=B(30),S=B(31),k=B(32);function h(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(ye,ee){if(h()<ee)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(ye=new Uint8Array(ee)).__proto__=u.prototype:(null===ye&&(ye=new u(ee)),ye.length=ee),ye}function u(ye,ee,ie){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(ye,ee,ie);if("number"==typeof ye){if("string"==typeof ee)throw new Error("If encoding is specified then the first argument must be a string");return g(this,ye)}return p(this,ye,ee,ie)}function p(ye,ee,ie,$){if("number"==typeof ee)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&ee instanceof ArrayBuffer?function(K,te,X,me){if(X<0||te.byteLength<X)throw new RangeError("'offset' is out of bounds");if(te.byteLength<X+(me||0))throw new RangeError("'length' is out of bounds");return te=void 0===X&&void 0===me?new Uint8Array(te):void 0===me?new Uint8Array(te,X):new Uint8Array(te,X,me),u.TYPED_ARRAY_SUPPORT?(K=te).__proto__=u.prototype:K=x(K,te),K}(ye,ee,ie,$):"string"==typeof ee?function(K,te,X){if("string"==typeof X&&""!==X||(X="utf8"),!u.isEncoding(X))throw new TypeError('"encoding" must be a valid string encoding');var me=0|_(te,X),R=(K=f(K,me)).write(te,X);return R!==me&&(K=K.slice(0,R)),K}(ye,ee,ie):function(K,te){if(u.isBuffer(te)){var X=0|m(te.length);return 0===(K=f(K,X)).length||te.copy(K,0,0,X),K}if(te){if("undefined"!=typeof ArrayBuffer&&te.buffer instanceof ArrayBuffer||"length"in te)return"number"!=typeof te.length||(R=te.length)!=R?f(K,0):x(K,te);if("Buffer"===te.type&&k(te.data))return x(K,te.data)}var R;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(ye,ee)}function w(ye){if("number"!=typeof ye)throw new TypeError('"size" argument must be a number');if(ye<0)throw new RangeError('"size" argument must not be negative')}function g(ye,ee){if(w(ee),ye=f(ye,ee<0?0:0|m(ee)),!u.TYPED_ARRAY_SUPPORT)for(var ie=0;ie<ee;++ie)ye[ie]=0;return ye}function x(ye,ee){var ie=ee.length<0?0:0|m(ee.length);ye=f(ye,ie);for(var $=0;$<ie;$+=1)ye[$]=255&ee[$];return ye}function m(ye){if(ye>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|ye}function _(ye,ee){if(u.isBuffer(ye))return ye.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(ye)||ye instanceof ArrayBuffer))return ye.byteLength;"string"!=typeof ye&&(ye=""+ye);var ie=ye.length;if(0===ie)return 0;for(var $=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":case void 0:return ze(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ie;case"hex":return ie>>>1;case"base64":return He(ye).length;default:if($)return ze(ye).length;ee=(""+ee).toLowerCase(),$=!0}}function T(ye,ee,ie){var $=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===ie||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0)<=(ee>>>=0))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return ce(this,ee,ie);case"utf8":case"utf-8":return le(this,ee,ie);case"ascii":return ue(this,ee,ie);case"latin1":case"binary":return he(this,ee,ie);case"base64":return J(this,ee,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,ee,ie);default:if($)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),$=!0}}function D(ye,ee,ie){var $=ye[ee];ye[ee]=ye[ie],ye[ie]=$}function L(ye,ee,ie,$,se){if(0===ye.length)return-1;if("string"==typeof ie?($=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,isNaN(ie)&&(ie=se?0:ye.length-1),ie<0&&(ie=ye.length+ie),ie>=ye.length){if(se)return-1;ie=ye.length-1}else if(ie<0){if(!se)return-1;ie=0}if("string"==typeof ee&&(ee=u.from(ee,$)),u.isBuffer(ee))return 0===ee.length?-1:M(ye,ee,ie,$,se);if("number"==typeof ee)return ee&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?se?Uint8Array.prototype.indexOf.call(ye,ee,ie):Uint8Array.prototype.lastIndexOf.call(ye,ee,ie):M(ye,[ee],ie,$,se);throw new TypeError("val must be string, number or Buffer")}function M(ye,ee,ie,$,se){var K,te=1,X=ye.length,me=ee.length;if(void 0!==$&&("ucs2"===($=String($).toLowerCase())||"ucs-2"===$||"utf16le"===$||"utf-16le"===$)){if(ye.length<2||ee.length<2)return-1;te=2,X/=2,me/=2,ie/=2}function R(Ke,Re){return 1===te?Ke[Re]:Ke.readUInt16BE(Re*te)}if(se){var H=-1;for(K=ie;K<X;K++)if(R(ye,K)===R(ee,-1===H?0:K-H)){if(-1===H&&(H=K),K-H+1===me)return H*te}else-1!==H&&(K-=K-H),H=-1}else for(ie+me>X&&(ie=X-me),K=ie;K>=0;K--){for(var Z=!0,Ae=0;Ae<me;Ae++)if(R(ye,K+Ae)!==R(ee,Ae)){Z=!1;break}if(Z)return K}return-1}function N(ye,ee,ie,$){ie=Number(ie)||0;var se=ye.length-ie;$?($=Number($))>se&&($=se):$=se;var K=ee.length;if(K%2!=0)throw new TypeError("Invalid hex string");$>K/2&&($=K/2);for(var te=0;te<$;++te){var X=parseInt(ee.substr(2*te,2),16);if(isNaN(X))return te;ye[ie+te]=X}return te}function I(ye,ee,ie,$){return Ne(ze(ee,ye.length-ie),ye,ie,$)}function P(ye,ee,ie,$){return Ne(function(K){for(var te=[],X=0;X<K.length;++X)te.push(255&K.charCodeAt(X));return te}(ee),ye,ie,$)}function V(ye,ee,ie,$){return P(ye,ee,ie,$)}function j(ye,ee,ie,$){return Ne(He(ee),ye,ie,$)}function oe(ye,ee,ie,$){return Ne(function(K,te){for(var X,me,H=[],Z=0;Z<K.length&&!((te-=2)<0);++Z)me=(X=K.charCodeAt(Z))>>8,H.push(X%256),H.push(me);return H}(ee,ye.length-ie),ye,ie,$)}function J(ye,ee,ie){return b.fromByteArray(0===ee&&ie===ye.length?ye:ye.slice(ee,ie))}function le(ye,ee,ie){ie=Math.min(ye.length,ie);for(var $=[],se=ee;se<ie;){var K,te,X,me,R=ye[se],H=null,Z=R>239?4:R>223?3:R>191?2:1;if(se+Z<=ie)switch(Z){case 1:R<128&&(H=R);break;case 2:128==(192&(K=ye[se+1]))&&(me=(31&R)<<6|63&K)>127&&(H=me);break;case 3:te=ye[se+2],128==(192&(K=ye[se+1]))&&128==(192&te)&&(me=(15&R)<<12|(63&K)<<6|63&te)>2047&&(me<55296||me>57343)&&(H=me);break;case 4:te=ye[se+2],X=ye[se+3],128==(192&(K=ye[se+1]))&&128==(192&te)&&128==(192&X)&&(me=(15&R)<<18|(63&K)<<12|(63&te)<<6|63&X)>65535&&me<1114112&&(H=me)}null===H?(H=65533,Z=1):H>65535&&($.push((H-=65536)>>>10&1023|55296),H=56320|1023&H),$.push(H),se+=Z}return function(Ke){var Re=Ke.length;if(Re<=q)return String.fromCharCode.apply(String,Ke);for(var ht="",Et=0;Et<Re;)ht+=String.fromCharCode.apply(String,Ke.slice(Et,Et+=q));return ht}($)}F.Buffer=u,F.SlowBuffer=function(ee){return+ee!=ee&&(ee=0),u.alloc(+ee)},F.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==C.TYPED_ARRAY_SUPPORT?C.TYPED_ARRAY_SUPPORT:function(){try{var ee=new Uint8Array(1);return ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===ee.foo()&&"function"==typeof ee.subarray&&0===ee.subarray(1,1).byteLength}catch(ie){return!1}}(),F.kMaxLength=h(),u.poolSize=8192,u._augment=function(ye){return ye.__proto__=u.prototype,ye},u.from=function(ye,ee,ie){return p(null,ye,ee,ie)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(ye,ee,ie){return null,te=ee,X=ie,w(K=ye),K<=0?f(null,K):void 0!==te?"string"==typeof X?f(null,K).fill(te,X):f(null,K).fill(te):f(null,K);var K,te,X},u.allocUnsafe=function(ye){return g(null,ye)},u.allocUnsafeSlow=function(ye){return g(null,ye)},u.isBuffer=function(ee){return!(null==ee||!ee._isBuffer)},u.compare=function(ee,ie){if(!u.isBuffer(ee)||!u.isBuffer(ie))throw new TypeError("Arguments must be Buffers");if(ee===ie)return 0;for(var $=ee.length,se=ie.length,K=0,te=Math.min($,se);K<te;++K)if(ee[K]!==ie[K]){$=ee[K],se=ie[K];break}return $<se?-1:se<$?1:0},u.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(ee,ie){if(!k(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ee.length)return u.alloc(0);var $;if(void 0===ie)for(ie=0,$=0;$<ee.length;++$)ie+=ee[$].length;var se=u.allocUnsafe(ie),K=0;for($=0;$<ee.length;++$){var te=ee[$];if(!u.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(se,K),K+=te.length}return se},u.byteLength=_,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var ee=this.length;if(ee%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<ee;ie+=2)D(this,ie,ie+1);return this},u.prototype.swap32=function(){var ee=this.length;if(ee%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<ee;ie+=4)D(this,ie,ie+3),D(this,ie+1,ie+2);return this},u.prototype.swap64=function(){var ee=this.length;if(ee%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<ee;ie+=8)D(this,ie,ie+7),D(this,ie+1,ie+6),D(this,ie+2,ie+5),D(this,ie+3,ie+4);return this},u.prototype.toString=function(){var ee=0|this.length;return 0===ee?"":0===arguments.length?le(this,0,ee):T.apply(this,arguments)},u.prototype.equals=function(ee){if(!u.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee||0===u.compare(this,ee)},u.prototype.inspect=function(){var ee="",ie=F.INSPECT_MAX_BYTES;return this.length>0&&(ee=this.toString("hex",0,ie).match(/.{2}/g).join(" "),this.length>ie&&(ee+=" ... ")),"<Buffer "+ee+">"},u.prototype.compare=function(ee,ie,$,se,K){if(!u.isBuffer(ee))throw new TypeError("Argument must be a Buffer");if(void 0===ie&&(ie=0),void 0===$&&($=ee?ee.length:0),void 0===se&&(se=0),void 0===K&&(K=this.length),ie<0||$>ee.length||se<0||K>this.length)throw new RangeError("out of range index");if(se>=K&&ie>=$)return 0;if(se>=K)return-1;if(ie>=$)return 1;if(this===ee)return 0;for(var te=(K>>>=0)-(se>>>=0),X=($>>>=0)-(ie>>>=0),me=Math.min(te,X),R=this.slice(se,K),H=ee.slice(ie,$),Z=0;Z<me;++Z)if(R[Z]!==H[Z]){te=R[Z],X=H[Z];break}return te<X?-1:X<te?1:0},u.prototype.includes=function(ee,ie,$){return-1!==this.indexOf(ee,ie,$)},u.prototype.indexOf=function(ee,ie,$){return L(this,ee,ie,$,!0)},u.prototype.lastIndexOf=function(ee,ie,$){return L(this,ee,ie,$,!1)},u.prototype.write=function(ee,ie,$,se){if(void 0===ie)se="utf8",$=this.length,ie=0;else if(void 0===$&&"string"==typeof ie)se=ie,$=this.length,ie=0;else{if(!isFinite(ie))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ie|=0,isFinite($)?($|=0,void 0===se&&(se="utf8")):(se=$,$=void 0)}var K=this.length-ie;if((void 0===$||$>K)&&($=K),ee.length>0&&($<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var te=!1;;)switch(se){case"hex":return N(this,ee,ie,$);case"utf8":case"utf-8":return I(this,ee,ie,$);case"ascii":return P(this,ee,ie,$);case"latin1":case"binary":return V(this,ee,ie,$);case"base64":return j(this,ee,ie,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,ee,ie,$);default:if(te)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),te=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;function ue(ye,ee,ie){var $="";ie=Math.min(ye.length,ie);for(var se=ee;se<ie;++se)$+=String.fromCharCode(127&ye[se]);return $}function he(ye,ee,ie){var $="";ie=Math.min(ye.length,ie);for(var se=ee;se<ie;++se)$+=String.fromCharCode(ye[se]);return $}function ce(ye,ee,ie){var $=ye.length;(!ee||ee<0)&&(ee=0),(!ie||ie<0||ie>$)&&(ie=$);for(var se="",K=ee;K<ie;++K)se+=Ye(ye[K]);return se}function pe(ye,ee,ie){for(var $=ye.slice(ee,ie),se="",K=0;K<$.length;K+=2)se+=String.fromCharCode($[K]+256*$[K+1]);return se}function fe(ye,ee,ie){if(ye%1!=0||ye<0)throw new RangeError("offset is not uint");if(ye+ee>ie)throw new RangeError("Trying to access beyond buffer length")}function Ee(ye,ee,ie,$,se,K){if(!u.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>se||ee<K)throw new RangeError('"value" argument is out of bounds');if(ie+$>ye.length)throw new RangeError("Index out of range")}function _e(ye,ee,ie,$){ee<0&&(ee=65535+ee+1);for(var se=0,K=Math.min(ye.length-ie,2);se<K;++se)ye[ie+se]=(ee&255<<8*($?se:1-se))>>>8*($?se:1-se)}function Te(ye,ee,ie,$){ee<0&&(ee=4294967295+ee+1);for(var se=0,K=Math.min(ye.length-ie,4);se<K;++se)ye[ie+se]=ee>>>8*($?se:3-se)&255}function De(ye,ee,ie,$,se,K){if(ie+$>ye.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function be(ye,ee,ie,$,se){return se||De(ye,0,ie,4),S.write(ye,ee,ie,$,23,4),ie+4}function de(ye,ee,ie,$,se){return se||De(ye,0,ie,8),S.write(ye,ee,ie,$,52,8),ie+8}u.prototype.slice=function(ee,ie){var $,se=this.length;if((ee=~~ee)<0?(ee+=se)<0&&(ee=0):ee>se&&(ee=se),(ie=void 0===ie?se:~~ie)<0?(ie+=se)<0&&(ie=0):ie>se&&(ie=se),ie<ee&&(ie=ee),u.TYPED_ARRAY_SUPPORT)($=this.subarray(ee,ie)).__proto__=u.prototype;else{var K=ie-ee;$=new u(K,void 0);for(var te=0;te<K;++te)$[te]=this[te+ee]}return $},u.prototype.readUIntLE=function(ee,ie,$){ee|=0,ie|=0,$||fe(ee,ie,this.length);for(var se=this[ee],K=1,te=0;++te<ie&&(K*=256);)se+=this[ee+te]*K;return se},u.prototype.readUIntBE=function(ee,ie,$){ee|=0,ie|=0,$||fe(ee,ie,this.length);for(var se=this[ee+--ie],K=1;ie>0&&(K*=256);)se+=this[ee+--ie]*K;return se},u.prototype.readUInt8=function(ee,ie){return ie||fe(ee,1,this.length),this[ee]},u.prototype.readUInt16LE=function(ee,ie){return ie||fe(ee,2,this.length),this[ee]|this[ee+1]<<8},u.prototype.readUInt16BE=function(ee,ie){return ie||fe(ee,2,this.length),this[ee]<<8|this[ee+1]},u.prototype.readUInt32LE=function(ee,ie){return ie||fe(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+16777216*this[ee+3]},u.prototype.readUInt32BE=function(ee,ie){return ie||fe(ee,4,this.length),16777216*this[ee]+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},u.prototype.readIntLE=function(ee,ie,$){ee|=0,ie|=0,$||fe(ee,ie,this.length);for(var se=this[ee],K=1,te=0;++te<ie&&(K*=256);)se+=this[ee+te]*K;return se>=(K*=128)&&(se-=Math.pow(2,8*ie)),se},u.prototype.readIntBE=function(ee,ie,$){ee|=0,ie|=0,$||fe(ee,ie,this.length);for(var se=ie,K=1,te=this[ee+--se];se>0&&(K*=256);)te+=this[ee+--se]*K;return te>=(K*=128)&&(te-=Math.pow(2,8*ie)),te},u.prototype.readInt8=function(ee,ie){return ie||fe(ee,1,this.length),128&this[ee]?-1*(255-this[ee]+1):this[ee]},u.prototype.readInt16LE=function(ee,ie){ie||fe(ee,2,this.length);var $=this[ee]|this[ee+1]<<8;return 32768&$?4294901760|$:$},u.prototype.readInt16BE=function(ee,ie){ie||fe(ee,2,this.length);var $=this[ee+1]|this[ee]<<8;return 32768&$?4294901760|$:$},u.prototype.readInt32LE=function(ee,ie){return ie||fe(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},u.prototype.readInt32BE=function(ee,ie){return ie||fe(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},u.prototype.readFloatLE=function(ee,ie){return ie||fe(ee,4,this.length),S.read(this,ee,!0,23,4)},u.prototype.readFloatBE=function(ee,ie){return ie||fe(ee,4,this.length),S.read(this,ee,!1,23,4)},u.prototype.readDoubleLE=function(ee,ie){return ie||fe(ee,8,this.length),S.read(this,ee,!0,52,8)},u.prototype.readDoubleBE=function(ee,ie){return ie||fe(ee,8,this.length),S.read(this,ee,!1,52,8)},u.prototype.writeUIntLE=function(ee,ie,$,se){ee=+ee,ie|=0,$|=0,se||Ee(this,ee,ie,$,Math.pow(2,8*$)-1,0);var K=1,te=0;for(this[ie]=255&ee;++te<$&&(K*=256);)this[ie+te]=ee/K&255;return ie+$},u.prototype.writeUIntBE=function(ee,ie,$,se){ee=+ee,ie|=0,$|=0,se||Ee(this,ee,ie,$,Math.pow(2,8*$)-1,0);var K=$-1,te=1;for(this[ie+K]=255&ee;--K>=0&&(te*=256);)this[ie+K]=ee/te&255;return ie+$},u.prototype.writeUInt8=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,1,255,0),u.TYPED_ARRAY_SUPPORT||(ee=Math.floor(ee)),this[ie]=255&ee,ie+1},u.prototype.writeUInt16LE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[ie]=255&ee,this[ie+1]=ee>>>8):_e(this,ee,ie,!0),ie+2},u.prototype.writeUInt16BE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[ie]=ee>>>8,this[ie+1]=255&ee):_e(this,ee,ie,!1),ie+2},u.prototype.writeUInt32LE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[ie+3]=ee>>>24,this[ie+2]=ee>>>16,this[ie+1]=ee>>>8,this[ie]=255&ee):Te(this,ee,ie,!0),ie+4},u.prototype.writeUInt32BE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[ie]=ee>>>24,this[ie+1]=ee>>>16,this[ie+2]=ee>>>8,this[ie+3]=255&ee):Te(this,ee,ie,!1),ie+4},u.prototype.writeIntLE=function(ee,ie,$,se){if(ee=+ee,ie|=0,!se){var K=Math.pow(2,8*$-1);Ee(this,ee,ie,$,K-1,-K)}var te=0,X=1,me=0;for(this[ie]=255&ee;++te<$&&(X*=256);)ee<0&&0===me&&0!==this[ie+te-1]&&(me=1),this[ie+te]=(ee/X>>0)-me&255;return ie+$},u.prototype.writeIntBE=function(ee,ie,$,se){if(ee=+ee,ie|=0,!se){var K=Math.pow(2,8*$-1);Ee(this,ee,ie,$,K-1,-K)}var te=$-1,X=1,me=0;for(this[ie+te]=255&ee;--te>=0&&(X*=256);)ee<0&&0===me&&0!==this[ie+te+1]&&(me=1),this[ie+te]=(ee/X>>0)-me&255;return ie+$},u.prototype.writeInt8=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,1,127,-128),u.TYPED_ARRAY_SUPPORT||(ee=Math.floor(ee)),ee<0&&(ee=255+ee+1),this[ie]=255&ee,ie+1},u.prototype.writeInt16LE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[ie]=255&ee,this[ie+1]=ee>>>8):_e(this,ee,ie,!0),ie+2},u.prototype.writeInt16BE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[ie]=ee>>>8,this[ie+1]=255&ee):_e(this,ee,ie,!1),ie+2},u.prototype.writeInt32LE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[ie]=255&ee,this[ie+1]=ee>>>8,this[ie+2]=ee>>>16,this[ie+3]=ee>>>24):Te(this,ee,ie,!0),ie+4},u.prototype.writeInt32BE=function(ee,ie,$){return ee=+ee,ie|=0,$||Ee(this,ee,ie,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),u.TYPED_ARRAY_SUPPORT?(this[ie]=ee>>>24,this[ie+1]=ee>>>16,this[ie+2]=ee>>>8,this[ie+3]=255&ee):Te(this,ee,ie,!1),ie+4},u.prototype.writeFloatLE=function(ee,ie,$){return be(this,ee,ie,!0,$)},u.prototype.writeFloatBE=function(ee,ie,$){return be(this,ee,ie,!1,$)},u.prototype.writeDoubleLE=function(ee,ie,$){return de(this,ee,ie,!0,$)},u.prototype.writeDoubleBE=function(ee,ie,$){return de(this,ee,ie,!1,$)},u.prototype.copy=function(ee,ie,$,se){if($||($=0),se||0===se||(se=this.length),ie>=ee.length&&(ie=ee.length),ie||(ie=0),se>0&&se<$&&(se=$),se===$||0===ee.length||0===this.length)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("sourceStart out of bounds");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),ee.length-ie<se-$&&(se=ee.length-ie+$);var K,te=se-$;if(this===ee&&$<ie&&ie<se)for(K=te-1;K>=0;--K)ee[K+ie]=this[K+$];else if(te<1e3||!u.TYPED_ARRAY_SUPPORT)for(K=0;K<te;++K)ee[K+ie]=this[K+$];else Uint8Array.prototype.set.call(ee,this.subarray($,$+te),ie);return te},u.prototype.fill=function(ee,ie,$,se){if("string"==typeof ee){if("string"==typeof ie?(se=ie,ie=0,$=this.length):"string"==typeof $&&(se=$,$=this.length),1===ee.length){var K=ee.charCodeAt(0);K<256&&(ee=K)}if(void 0!==se&&"string"!=typeof se)throw new TypeError("encoding must be a string");if("string"==typeof se&&!u.isEncoding(se))throw new TypeError("Unknown encoding: "+se)}else"number"==typeof ee&&(ee&=255);if(ie<0||this.length<ie||this.length<$)throw new RangeError("Out of range index");if($<=ie)return this;var te;if(ie>>>=0,$=void 0===$?this.length:$>>>0,ee||(ee=0),"number"==typeof ee)for(te=ie;te<$;++te)this[te]=ee;else{var X=u.isBuffer(ee)?ee:ze(new u(ee,se).toString()),me=X.length;for(te=0;te<$-ie;++te)this[te+ie]=X[te%me]}return this};var we=/[^+\/0-9A-Za-z-_]/g;function Ye(ye){return ye<16?"0"+ye.toString(16):ye.toString(16)}function ze(ye,ee){var ie;ee=ee||1/0;for(var $=ye.length,se=null,K=[],te=0;te<$;++te){if((ie=ye.charCodeAt(te))>55295&&ie<57344){if(!se){if(ie>56319){(ee-=3)>-1&&K.push(239,191,189);continue}if(te+1===$){(ee-=3)>-1&&K.push(239,191,189);continue}se=ie;continue}if(ie<56320){(ee-=3)>-1&&K.push(239,191,189),se=ie;continue}ie=65536+(se-55296<<10|ie-56320)}else se&&(ee-=3)>-1&&K.push(239,191,189);if(se=null,ie<128){if((ee-=1)<0)break;K.push(ie)}else if(ie<2048){if((ee-=2)<0)break;K.push(ie>>6|192,63&ie|128)}else if(ie<65536){if((ee-=3)<0)break;K.push(ie>>12|224,ie>>6&63|128,63&ie|128)}else{if(!(ie<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;K.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}}return K}function He(ye){return b.toByteArray(function(ie){if((ie=(se=ie,se.trim?se.trim():se.replace(/^\s+|\s+$/g,"")).replace(we,"")).length<2)return"";for(var se;ie.length%4!=0;)ie+="=";return ie}(ye))}function Ne(ye,ee,ie,$){for(var se=0;se<$&&!(se+ie>=ee.length||se>=ye.length);++se)ee[se+ie]=ye[se];return se}}).call(this,B(29))},function(G,F){var B;B=function(){return this}();try{B=B||new Function("return this")()}catch(C){"object"==typeof window&&(B=window)}G.exports=B},function(G,F,B){"use strict";F.byteLength=function(g){var x=u(g),_=x[1];return 3*(x[0]+_)/4-_},F.toByteArray=function(g){var x,m,j,_=u(g),T=_[0],D=_[1],L=new S(3*(T+(j=D))/4-j),M=0,N=D>0?T-4:T;for(m=0;m<N;m+=4)x=b[g.charCodeAt(m)]<<18|b[g.charCodeAt(m+1)]<<12|b[g.charCodeAt(m+2)]<<6|b[g.charCodeAt(m+3)],L[M++]=x>>16&255,L[M++]=x>>8&255,L[M++]=255&x;return 2===D&&(x=b[g.charCodeAt(m)]<<2|b[g.charCodeAt(m+1)]>>4,L[M++]=255&x),1===D&&(x=b[g.charCodeAt(m)]<<10|b[g.charCodeAt(m+1)]<<4|b[g.charCodeAt(m+2)]>>2,L[M++]=x>>8&255,L[M++]=255&x),L},F.fromByteArray=function(g){for(var x,m=g.length,_=m%3,T=[],D=16383,L=0,M=m-_;L<M;L+=D)T.push(p(g,L,L+D>M?M:L+D));return 1===_?T.push(C[(x=g[m-1])>>2]+C[x<<4&63]+"=="):2===_&&T.push(C[(x=(g[m-2]<<8)+g[m-1])>>10]+C[x>>4&63]+C[x<<2&63]+"="),T.join("")};for(var C=[],b=[],S="undefined"!=typeof Uint8Array?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,f=k.length;h<f;++h)C[h]=k[h],b[k.charCodeAt(h)]=h;function u(w){var g=w.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=w.indexOf("=");return-1===x&&(x=g),[x,x===g?0:4-x%4]}function p(w,g,x){for(var _,T=[],D=g;D<x;D+=3)T.push(C[(_=(w[D]<<16&16711680)+(w[D+1]<<8&65280)+(255&w[D+2]))>>18&63]+C[_>>12&63]+C[_>>6&63]+C[63&_]);return T.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},function(G,F){F.read=function(B,C,b,S,k){var h,f,u=8*k-S-1,p=(1<<u)-1,w=p>>1,g=-7,x=b?k-1:0,m=b?-1:1,_=B[C+x];for(x+=m,h=_&(1<<-g)-1,_>>=-g,g+=u;g>0;h=256*h+B[C+x],x+=m,g-=8);for(f=h&(1<<-g)-1,h>>=-g,g+=S;g>0;f=256*f+B[C+x],x+=m,g-=8);if(0===h)h=1-w;else{if(h===p)return f?NaN:1/0*(_?-1:1);f+=Math.pow(2,S),h-=w}return(_?-1:1)*f*Math.pow(2,h-S)},F.write=function(B,C,b,S,k,h){var f,u,p,w=8*h-k-1,g=(1<<w)-1,x=g>>1,m=23===k?Math.pow(2,-24)-Math.pow(2,-77):0,_=S?0:h-1,T=S?1:-1,D=C<0||0===C&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(u=isNaN(C)?1:0,f=g):(f=Math.floor(Math.log(C)/Math.LN2),C*(p=Math.pow(2,-f))<1&&(f--,p*=2),(C+=f+x>=1?m/p:m*Math.pow(2,1-x))*p>=2&&(f++,p/=2),f+x>=g?(u=0,f=g):f+x>=1?(u=(C*p-1)*Math.pow(2,k),f+=x):(u=C*Math.pow(2,x-1)*Math.pow(2,k),f=0));k>=8;B[b+_]=255&u,_+=T,u/=256,k-=8);for(f=f<<k|u,w+=k;w>0;B[b+_]=255&f,_+=T,f/=256,w-=8);B[b+_-T]|=128*D}},function(G,F){var B={}.toString;G.exports=Array.isArray||function(C){return"[object Array]"==B.call(C)}},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=function(S){var k=S.jws,h=S.KeyUtil,f=S.X509,u=S.crypto,p=S.hextob64u,w=S.b64tohex,g=S.AllowedSigningAlgs;return function(){function x(){!function(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.parseJwt=function(_){C.Log.debug("JoseUtil.parseJwt");try{var T=k.JWS.parse(_);return{header:T.headerObj,payload:T.payloadObj}}catch(D){C.Log.error(D)}},x.validateJwt=function(_,T,D,L,M,N,I){C.Log.debug("JoseUtil.validateJwt");try{if("RSA"===T.kty)if(T.e&&T.n)T=h.getKey(T);else{if(!T.x5c||!T.x5c.length)return C.Log.error("JoseUtil.validateJwt: RSA key missing key material",T),Promise.reject(new Error("RSA key missing key material"));var P=w(T.x5c[0]);T=f.getPublicKeyFromCertHex(P)}else{if("EC"!==T.kty)return C.Log.error("JoseUtil.validateJwt: Unsupported key type",T&&T.kty),Promise.reject(new Error(T.kty));if(!(T.crv&&T.x&&T.y))return C.Log.error("JoseUtil.validateJwt: EC key missing key material",T),Promise.reject(new Error("EC key missing key material"));T=h.getKey(T)}return x._validateJwt(_,T,D,L,M,N,I)}catch(V){return C.Log.error(V&&V.message||V),Promise.reject("JWT validation failed")}},x.validateJwtAttributes=function(_,T,D,L,M,N){L||(L=0),M||(M=parseInt(Date.now()/1e3));var I=x.parseJwt(_).payload;if(!I.iss)return C.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(I.iss!==T)return C.Log.error("JoseUtil._validateJwt: Invalid issuer in token",I.iss),Promise.reject(new Error("Invalid issuer in token: "+I.iss));if(!I.aud)return C.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(I.aud===D||Array.isArray(I.aud)&&I.aud.indexOf(D)>=0))return C.Log.error("JoseUtil._validateJwt: Invalid audience in token",I.aud),Promise.reject(new Error("Invalid audience in token: "+I.aud));if(I.azp&&I.azp!==D)return C.Log.error("JoseUtil._validateJwt: Invalid azp in token",I.azp),Promise.reject(new Error("Invalid azp in token: "+I.azp));if(!N){var P=M+L,V=M-L;if(!I.iat)return C.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(P<I.iat)return C.Log.error("JoseUtil._validateJwt: iat is in the future",I.iat),Promise.reject(new Error("iat is in the future: "+I.iat));if(I.nbf&&P<I.nbf)return C.Log.error("JoseUtil._validateJwt: nbf is in the future",I.nbf),Promise.reject(new Error("nbf is in the future: "+I.nbf));if(!I.exp)return C.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(I.exp<V)return C.Log.error("JoseUtil._validateJwt: exp is in the past",I.exp),Promise.reject(new Error("exp is in the past:"+I.exp))}return Promise.resolve(I)},x._validateJwt=function(_,T,D,L,M,N,I){return x.validateJwtAttributes(_,D,L,M,N,I).then(function(P){try{return k.JWS.verify(_,T,g)?P:(C.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(V){return C.Log.error(V&&V.message||V),Promise.reject(new Error("signature validation failed"))}})},x.hashString=function(_,T){try{return u.Util.hashString(_,T)}catch(D){C.Log.error(D)}},x.hexToBase64Url=function(_){try{return p(_)}catch(T){C.Log.error(T)}},x}()};var C=B(0);G.exports=F.default},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SigninResponse=void 0;var C=function(){function k(h,f){for(var u=0;u<f.length;u++){var p=f[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,u){return f&&k(h.prototype,f),u&&k(h,u),h}}(),b=B(3);function S(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}F.SigninResponse=function(){function k(h){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";S(this,k);var u=b.UrlUtility.parseUrlFragment(h,f);this.error=u.error,this.error_description=u.error_description,this.error_uri=u.error_uri,this.code=u.code,this.state=u.state,this.id_token=u.id_token,this.session_state=u.session_state,this.access_token=u.access_token,this.token_type=u.token_type,this.scope=u.scope,this.profile=void 0,this.expires_in=u.expires_in}return C(k,[{key:"expires_in",get:function(){if(this.expires_at){var f=parseInt(Date.now()/1e3);return this.expires_at-f}},set:function(f){var u=parseInt(f);if("number"==typeof u&&u>0){var p=parseInt(Date.now()/1e3);this.expires_at=p+u}}},{key:"expired",get:function(){var f=this.expires_in;if(void 0!==f)return f<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),k}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SignoutRequest=void 0;var C=B(0),b=B(3),S=B(9);F.SignoutRequest=function k(h){var f=h.url,u=h.id_token_hint,p=h.post_logout_redirect_uri,w=h.data,g=h.extraQueryParams,x=h.request_type;if(function(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}(this,k),!f)throw C.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var m in u&&(f=b.UrlUtility.addQueryParam(f,"id_token_hint",u)),p&&(f=b.UrlUtility.addQueryParam(f,"post_logout_redirect_uri",p),w&&(this.state=new S.State({data:w,request_type:x}),f=b.UrlUtility.addQueryParam(f,"state",this.state.id))),g)f=b.UrlUtility.addQueryParam(f,m,g[m]);this.url=f}},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SignoutResponse=void 0;var C=B(3);F.SignoutResponse=function b(S){!function(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}(this,b);var k=C.UrlUtility.parseUrlFragment(S,"?");this.error=k.error,this.error_description=k.error_description,this.error_uri=k.error_uri,this.state=k.state}},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.InMemoryWebStorage=void 0;var C=function(){function S(k,h){for(var f=0;f<h.length;f++){var u=h[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(k,u.key,u)}}return function(k,h,f){return h&&S(k.prototype,h),f&&S(k,f),k}}(),b=B(0);F.InMemoryWebStorage=function(){function S(){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,S),this._data={}}return S.prototype.getItem=function(h){return b.Log.debug("InMemoryWebStorage.getItem",h),this._data[h]},S.prototype.setItem=function(h,f){b.Log.debug("InMemoryWebStorage.setItem",h),this._data[h]=f},S.prototype.removeItem=function(h){b.Log.debug("InMemoryWebStorage.removeItem",h),delete this._data[h]},S.prototype.key=function(h){return Object.getOwnPropertyNames(this._data)[h]},C(S,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.UserManager=void 0;var C=function(){function D(L,M){for(var N=0;N<M.length;N++){var I=M[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(L,I.key,I)}}return function(L,M,N){return M&&D(L.prototype,M),N&&D(L,N),L}}(),b=B(0),S=B(10),k=B(39),h=B(15),f=B(45),u=B(47),p=B(18),w=B(8),g=B(20),x=B(11),m=B(4);function _(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")}function T(D,L){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||"object"!=typeof L&&"function"!=typeof L?D:L}F.UserManager=function(D){function L(){var M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.SilentRenewService,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.SessionMonitor,P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.TokenRevocationClient,V=arguments.length>4&&void 0!==arguments[4]?arguments[4]:x.TokenClient,j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.JoseUtil;_(this,L),M instanceof k.UserManagerSettings||(M=new k.UserManagerSettings(M));var oe=T(this,D.call(this,M));return oe._events=new f.UserManagerEvents(M),oe._silentRenewService=new N(oe),oe.settings.automaticSilentRenew&&(b.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),oe.startSilentRenew()),oe.settings.monitorSession&&(b.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),oe._sessionMonitor=new I(oe)),oe._tokenRevocationClient=new P(oe._settings),oe._tokenClient=new V(oe._settings),oe._joseUtil=j,oe}return function(N,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);N.prototype=Object.create(I&&I.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(N,I):N.__proto__=I)}(L,D),L.prototype.getUser=function(){var N=this;return this._loadUser().then(function(I){return I?(b.Log.info("UserManager.getUser: user loaded"),N._events.load(I,!1),I):(b.Log.info("UserManager.getUser: user not found in storage"),null)})},L.prototype.removeUser=function(){var N=this;return this.storeUser(null).then(function(){b.Log.info("UserManager.removeUser: user removed from storage"),N._events.unload()})},L.prototype.signinRedirect=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(N=Object.assign({},N)).request_type="si:r",this._signinStart(N,this._redirectNavigator,{useReplaceToNavigate:N.useReplaceToNavigate}).then(function(){b.Log.info("UserManager.signinRedirect: successful")})},L.prototype.signinRedirectCallback=function(N){return this._signinEnd(N||this._redirectNavigator.url).then(function(I){return I.profile&&I.profile.sub?b.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",I.profile.sub):b.Log.info("UserManager.signinRedirectCallback: no sub"),I})},L.prototype.signinPopup=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).request_type="si:p";var I=N.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return I?(N.redirect_uri=I,N.display="popup",this._signin(N,this._popupNavigator,{startUrl:I,popupWindowFeatures:N.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:N.popupWindowTarget||this.settings.popupWindowTarget}).then(function(P){return P&&(P.profile&&P.profile.sub?b.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",P.profile.sub):b.Log.info("UserManager.signinPopup: no sub")),P})):(b.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},L.prototype.signinPopupCallback=function(N){return this._signinCallback(N,this._popupNavigator).then(function(I){return I&&(I.profile&&I.profile.sub?b.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",I.profile.sub):b.Log.info("UserManager.signinPopupCallback: no sub")),I}).catch(function(I){b.Log.error(I.message)})},L.prototype.signinSilent=function(){var N=this,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I=Object.assign({},I),this._loadUser().then(function(P){return P&&P.refresh_token?(I.refresh_token=P.refresh_token,N._useRefreshToken(I)):(I.request_type="si:s",I.id_token_hint=I.id_token_hint||N.settings.includeIdTokenInSilentRenew&&P&&P.id_token,P&&N._settings.validateSubOnSilentRenew&&(b.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",P.profile.sub),I.current_sub=P.profile.sub),N._signinSilentIframe(I))})},L.prototype._useRefreshToken=function(){var N=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(P){return P?P.access_token?N._loadUser().then(function(V){if(V){var j=Promise.resolve();return P.id_token&&(j=N._validateIdTokenFromTokenRefreshToken(V.profile,P.id_token)),j.then(function(){return b.Log.debug("UserManager._useRefreshToken: refresh token response success"),V.id_token=P.id_token||V.id_token,V.access_token=P.access_token,V.refresh_token=P.refresh_token||V.refresh_token,V.expires_in=P.expires_in,N.storeUser(V).then(function(){return N._events.load(V),V})})}return null}):(b.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(b.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},L.prototype._validateIdTokenFromTokenRefreshToken=function(N,I){var P=this;return this._metadataService.getIssuer().then(function(V){return P.settings.getEpochTime().then(function(j){return P._joseUtil.validateJwtAttributes(I,V,P._settings.client_id,P._settings.clockSkew,j).then(function(oe){return oe?oe.sub!==N.sub?(b.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):oe.auth_time&&oe.auth_time!==N.auth_time?(b.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):oe.azp&&oe.azp!==N.azp?(b.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!oe.azp&&N.azp?(b.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(b.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},L.prototype._signinSilentIframe=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=N.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return I?(N.redirect_uri=I,N.prompt=N.prompt||"none",this._signin(N,this._iframeNavigator,{startUrl:I,silentRequestTimeout:N.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(P){return P&&(P.profile&&P.profile.sub?b.Log.info("UserManager.signinSilent: successful, signed in sub: ",P.profile.sub):b.Log.info("UserManager.signinSilent: no sub")),P})):(b.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},L.prototype.signinSilentCallback=function(N){return this._signinCallback(N,this._iframeNavigator).then(function(I){return I&&(I.profile&&I.profile.sub?b.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",I.profile.sub):b.Log.info("UserManager.signinSilentCallback: no sub")),I})},L.prototype.signinCallback=function(N){var I=this;return this.readSigninResponseState(N).then(function(P){var V=P.state;return"si:r"===V.request_type?I.signinRedirectCallback(N):"si:p"===V.request_type?I.signinPopupCallback(N):"si:s"===V.request_type?I.signinSilentCallback(N):Promise.reject(new Error("invalid response_type in state"))})},L.prototype.signoutCallback=function(N,I){var P=this;return this.readSignoutResponseState(N).then(function(V){var j=V.state,oe=V.response;return j?"so:r"===j.request_type?P.signoutRedirectCallback(N):"so:p"===j.request_type?P.signoutPopupCallback(N,I):Promise.reject(new Error("invalid response_type in state")):oe})},L.prototype.querySessionStatus=function(){var N=this,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(I=Object.assign({},I)).request_type="si:s";var P=I.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return P?(I.redirect_uri=P,I.prompt="none",I.response_type=I.response_type||this.settings.query_status_response_type,I.scope=I.scope||"openid",I.skipUserInfo=!0,this._signinStart(I,this._iframeNavigator,{startUrl:P,silentRequestTimeout:I.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(V){return N.processSigninResponse(V.url).then(function(j){if(b.Log.debug("UserManager.querySessionStatus: got signin response"),j.session_state&&j.profile.sub)return b.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",j.profile.sub),{session_state:j.session_state,sub:j.profile.sub,sid:j.profile.sid};b.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(j){if(j.session_state&&N.settings.monitorAnonymousSession&&("login_required"==j.message||"consent_required"==j.message||"interaction_required"==j.message||"account_selection_required"==j.message))return b.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:j.session_state};throw j})})):(b.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},L.prototype._signin=function(N,I){var P=this;return this._signinStart(N,I,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(j){return P._signinEnd(j.url,N)})},L.prototype._signinStart=function(N,I){var P=this,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return I.prepare(V).then(function(j){return b.Log.debug("UserManager._signinStart: got navigator window handle"),P.createSigninRequest(N).then(function(oe){return b.Log.debug("UserManager._signinStart: got signin request"),V.url=oe.url,V.id=oe.state.id,j.navigate(V)}).catch(function(oe){throw j.close&&(b.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),j.close()),oe})})},L.prototype._signinEnd=function(N){var I=this,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(N).then(function(V){b.Log.debug("UserManager._signinEnd: got signin response");var j=new h.User(V);if(P.current_sub){if(P.current_sub!==j.profile.sub)return b.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",j.profile.sub),Promise.reject(new Error("login_required"));b.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return I.storeUser(j).then(function(){return b.Log.debug("UserManager._signinEnd: user stored"),I._events.load(j),j})})},L.prototype._signinCallback=function(N,I){b.Log.debug("UserManager._signinCallback");var P="query"===this._settings.response_mode||!this._settings.response_mode&&w.SigninRequest.isCode(this._settings.response_type)?"?":"#";return I.callback(N,void 0,P)},L.prototype.signoutRedirect=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).request_type="so:r";var I=N.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return I&&(N.post_logout_redirect_uri=I),this._signoutStart(N,this._redirectNavigator,{useReplaceToNavigate:N.useReplaceToNavigate}).then(function(){b.Log.info("UserManager.signoutRedirect: successful")})},L.prototype.signoutRedirectCallback=function(N){return this._signoutEnd(N||this._redirectNavigator.url).then(function(I){return b.Log.info("UserManager.signoutRedirectCallback: successful"),I})},L.prototype.signoutPopup=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).request_type="so:p";var I=N.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return N.post_logout_redirect_uri=I,N.display="popup",N.post_logout_redirect_uri&&(N.state=N.state||{}),this._signout(N,this._popupNavigator,{startUrl:I,popupWindowFeatures:N.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:N.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){b.Log.info("UserManager.signoutPopup: successful")})},L.prototype.signoutPopupCallback=function(N,I){return void 0===I&&"boolean"==typeof N&&(I=N,N=null),this._popupNavigator.callback(N,I,"?").then(function(){b.Log.info("UserManager.signoutPopupCallback: successful")})},L.prototype._signout=function(N,I){var P=this;return this._signoutStart(N,I,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(j){return P._signoutEnd(j.url)})},L.prototype._signoutStart=function(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=this,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(V).then(function(j){return b.Log.debug("UserManager._signoutStart: got navigator window handle"),I._loadUser().then(function(oe){return b.Log.debug("UserManager._signoutStart: loaded current user from storage"),(I._settings.revokeAccessTokenOnSignout?I._revokeInternal(oe):Promise.resolve()).then(function(){var J=N.id_token_hint||oe&&oe.id_token;return J&&(b.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),N.id_token_hint=J),I.removeUser().then(function(){return b.Log.debug("UserManager._signoutStart: user removed, creating signout request"),I.createSignoutRequest(N).then(function(le){return b.Log.debug("UserManager._signoutStart: got signout request"),V.url=le.url,le.state&&(V.id=le.state.id),j.navigate(V)})})})}).catch(function(oe){throw j.close&&(b.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),j.close()),oe})})},L.prototype._signoutEnd=function(N){return this.processSignoutResponse(N).then(function(I){return b.Log.debug("UserManager._signoutEnd: got signout response"),I})},L.prototype.revokeAccessToken=function(){var N=this;return this._loadUser().then(function(I){return N._revokeInternal(I,!0).then(function(P){if(P)return b.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),I.access_token=null,I.refresh_token=null,I.expires_at=null,I.token_type=null,N.storeUser(I).then(function(){b.Log.debug("UserManager.revokeAccessToken: user stored"),N._events.load(I)})})}).then(function(){b.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},L.prototype._revokeInternal=function(N,I){var P=this;if(N){var j=N.refresh_token;return this._revokeAccessTokenInternal(N.access_token,I).then(function(oe){return P._revokeRefreshTokenInternal(j,I).then(function(J){return oe||J||b.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),oe||J})})}return Promise.resolve(!1)},L.prototype._revokeAccessTokenInternal=function(N,I){return!N||N.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(N,I).then(function(){return!0})},L.prototype._revokeRefreshTokenInternal=function(N,I){return N?this._tokenRevocationClient.revoke(N,I,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},L.prototype.startSilentRenew=function(){this._silentRenewService.start()},L.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},L.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(N){return N?(b.Log.debug("UserManager._loadUser: user storageString loaded"),h.User.fromStorageString(N)):(b.Log.debug("UserManager._loadUser: no user storageString"),null)})},L.prototype.storeUser=function(N){if(N){b.Log.debug("UserManager.storeUser: storing user");var I=N.toStorageString();return this._userStore.set(this._userStoreKey,I)}return b.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},C(L,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),L}(S.OidcClient)},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.UserManagerSettings=void 0;var C=function(){function x(m,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(m,D.key,D)}}return function(m,_,T){return _&&x(m.prototype,_),T&&x(m,T),m}}(),b=(B(0),B(5)),S=B(40),k=B(41),h=B(43),f=B(6),u=B(1),p=B(8);function w(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function g(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?x:m}F.UserManagerSettings=function(x){function m(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=_.popup_redirect_uri,D=_.popup_post_logout_redirect_uri,L=_.popupWindowFeatures,M=_.popupWindowTarget,N=_.silent_redirect_uri,I=_.silentRequestTimeout,P=_.automaticSilentRenew,V=void 0!==P&&P,j=_.validateSubOnSilentRenew,oe=void 0!==j&&j,J=_.includeIdTokenInSilentRenew,le=void 0===J||J,q=_.monitorSession,ue=void 0===q||q,he=_.monitorAnonymousSession,ce=void 0!==he&&he,pe=_.checkSessionInterval,fe=void 0===pe?2e3:pe,Ee=_.stopCheckSessionOnError,_e=void 0===Ee||Ee,Te=_.query_status_response_type,De=_.revokeAccessTokenOnSignout,be=void 0!==De&&De,de=_.accessTokenExpiringNotificationTime,we=void 0===de?60:de,Ye=_.redirectNavigator,ze=void 0===Ye?new S.RedirectNavigator:Ye,He=_.popupNavigator,Ne=void 0===He?new k.PopupNavigator:He,ye=_.iframeNavigator,ee=void 0===ye?new h.IFrameNavigator:ye,ie=_.userStore,$=void 0===ie?new f.WebStorageStateStore({store:u.Global.sessionStorage}):ie;w(this,m);var se=g(this,x.call(this,arguments[0]));return se._popup_redirect_uri=T,se._popup_post_logout_redirect_uri=D,se._popupWindowFeatures=L,se._popupWindowTarget=M,se._silent_redirect_uri=N,se._silentRequestTimeout=I,se._automaticSilentRenew=V,se._validateSubOnSilentRenew=oe,se._includeIdTokenInSilentRenew=le,se._accessTokenExpiringNotificationTime=we,se._monitorSession=ue,se._monitorAnonymousSession=ce,se._checkSessionInterval=fe,se._stopCheckSessionOnError=_e,se._query_status_response_type=Te||(arguments[0]&&arguments[0].response_type?p.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),se._revokeAccessTokenOnSignout=be,se._redirectNavigator=ze,se._popupNavigator=Ne,se._iframeNavigator=ee,se._userStore=$,se}return function(T,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function, not "+typeof D);T.prototype=Object.create(D&&D.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(T,D):T.__proto__=D)}(m,x),C(m,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),m}(b.OidcClientSettings)},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.RedirectNavigator=void 0;var C=function(){function S(k,h){for(var f=0;f<h.length;f++){var u=h[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(k,u.key,u)}}return function(k,h,f){return h&&S(k.prototype,h),f&&S(k,f),k}}(),b=B(0);F.RedirectNavigator=function(){function S(){!function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}(this,S)}return S.prototype.prepare=function(){return Promise.resolve(this)},S.prototype.navigate=function(h){return h&&h.url?(h.useReplaceToNavigate?window.location.replace(h.url):window.location=h.url,Promise.resolve()):(b.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},C(S,[{key:"url",get:function(){return window.location.href}}]),S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.PopupNavigator=void 0;var C=B(0),b=B(42);F.PopupNavigator=function(){function S(){!function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}(this,S)}return S.prototype.prepare=function(h){var f=new b.PopupWindow(h);return Promise.resolve(f)},S.prototype.callback=function(h,f,u){C.Log.debug("PopupNavigator.callback");try{return b.PopupWindow.notifyOpener(h,f,u),Promise.resolve()}catch(p){return Promise.reject(p)}},S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.PopupWindow=void 0;var C=function(){function k(h,f){for(var u=0;u<f.length;u++){var p=f[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,u){return f&&k(h.prototype,f),u&&k(h,u),h}}(),b=B(0),S=B(3);F.PopupWindow=function(){function k(h){var f=this;(function(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")})(this,k),this._promise=new Promise(function(w,g){f._resolve=w,f._reject=g}),this._popup=window.open("",h.popupWindowTarget||"_blank",h.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(b.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return k.prototype.navigate=function(f){return this._popup?f&&f.url?(b.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=f.id,this._id&&(window["popupCallback_"+f.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=f.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},k.prototype._success=function(f){b.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(f)},k.prototype._error=function(f){b.Log.error("PopupWindow.error: ",f),this._cleanup(),this._reject(new Error(f))},k.prototype.close=function(){this._cleanup(!1)},k.prototype._cleanup=function(f){b.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!f&&this._popup.close(),this._popup=null},k.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},k.prototype._callback=function(f,u){this._cleanup(u),f?(b.Log.debug("PopupWindow.callback success"),this._success({url:f})):(b.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},k.notifyOpener=function(f,u,p){if(window.opener){if(f=f||window.location.href){var w=S.UrlUtility.parseUrlFragment(f,p);if(w.state){var x=window.opener["popupCallback_"+w.state];x?(b.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),x(f,u)):b.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else b.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else b.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},C(k,[{key:"promise",get:function(){return this._promise}}]),k}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.IFrameNavigator=void 0;var C=B(0),b=B(44);F.IFrameNavigator=function(){function S(){!function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}(this,S)}return S.prototype.prepare=function(h){var f=new b.IFrameWindow(h);return Promise.resolve(f)},S.prototype.callback=function(h){C.Log.debug("IFrameNavigator.callback");try{return b.IFrameWindow.notifyParent(h),Promise.resolve()}catch(f){return Promise.reject(f)}},S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.IFrameWindow=void 0;var C=function(){function S(k,h){for(var f=0;f<h.length;f++){var u=h[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(k,u.key,u)}}return function(k,h,f){return h&&S(k.prototype,h),f&&S(k,f),k}}(),b=B(0);F.IFrameWindow=function(){function S(k){var h=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,S),this._promise=new Promise(function(f,u){h._resolve=f,h._reject=u}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return S.prototype.navigate=function(h){if(h&&h.url){var f=h.silentRequestTimeout||1e4;b.Log.debug("IFrameWindow.navigate: Using timeout of:",f),this._timer=window.setTimeout(this._timeout.bind(this),f),this._frame.src=h.url}else this._error("No url provided");return this.promise},S.prototype._success=function(h){this._cleanup(),b.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(h)},S.prototype._error=function(h){this._cleanup(),b.Log.error(h),this._reject(new Error(h))},S.prototype.close=function(){this._cleanup()},S.prototype._cleanup=function(){this._frame&&(b.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},S.prototype._timeout=function(){b.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},S.prototype._message=function(h){if(b.Log.debug("IFrameWindow.message"),this._timer&&h.origin===this._origin&&h.source===this._frame.contentWindow&&"string"==typeof h.data&&(h.data.startsWith("http://")||h.data.startsWith("https://"))){var f=h.data;f?this._success({url:f}):this._error("Invalid response from frame")}},S.notifyParent=function(h){b.Log.debug("IFrameWindow.notifyParent"),(h=h||window.location.href)&&(b.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(h,location.protocol+"//"+location.host))},C(S,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),S}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.UserManagerEvents=void 0;var C=B(0),b=B(16),S=B(17);F.UserManagerEvents=function(k){function h(f){!function(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}(this,h);var u=function(w,g){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?w:g}(this,k.call(this,f));return u._userLoaded=new S.Event("User loaded"),u._userUnloaded=new S.Event("User unloaded"),u._silentRenewError=new S.Event("Silent renew error"),u._userSignedIn=new S.Event("User signed in"),u._userSignedOut=new S.Event("User signed out"),u._userSessionChanged=new S.Event("User session changed"),u}return function(u,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}(h,k),h.prototype.load=function(u){var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];C.Log.debug("UserManagerEvents.load"),k.prototype.load.call(this,u),p&&this._userLoaded.raise(u)},h.prototype.unload=function(){C.Log.debug("UserManagerEvents.unload"),k.prototype.unload.call(this),this._userUnloaded.raise()},h.prototype.addUserLoaded=function(u){this._userLoaded.addHandler(u)},h.prototype.removeUserLoaded=function(u){this._userLoaded.removeHandler(u)},h.prototype.addUserUnloaded=function(u){this._userUnloaded.addHandler(u)},h.prototype.removeUserUnloaded=function(u){this._userUnloaded.removeHandler(u)},h.prototype.addSilentRenewError=function(u){this._silentRenewError.addHandler(u)},h.prototype.removeSilentRenewError=function(u){this._silentRenewError.removeHandler(u)},h.prototype._raiseSilentRenewError=function(u){C.Log.debug("UserManagerEvents._raiseSilentRenewError",u.message),this._silentRenewError.raise(u)},h.prototype.addUserSignedIn=function(u){this._userSignedIn.addHandler(u)},h.prototype.removeUserSignedIn=function(u){this._userSignedIn.removeHandler(u)},h.prototype._raiseUserSignedIn=function(){C.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},h.prototype.addUserSignedOut=function(u){this._userSignedOut.addHandler(u)},h.prototype.removeUserSignedOut=function(u){this._userSignedOut.removeHandler(u)},h.prototype._raiseUserSignedOut=function(){C.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},h.prototype.addUserSessionChanged=function(u){this._userSessionChanged.addHandler(u)},h.prototype.removeUserSessionChanged=function(u){this._userSessionChanged.removeHandler(u)},h.prototype._raiseUserSessionChanged=function(){C.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},h}(b.AccessTokenEvents)},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Timer=void 0;var C=function(){function u(p,w){for(var g=0;g<w.length;g++){var x=w[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,x.key,x)}}return function(p,w,g){return w&&u(p.prototype,w),g&&u(p,g),p}}(),b=B(0),S=B(1),k=B(17);function h(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?u:p}F.Timer=function(u){function p(w){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Global.timer,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;h(this,p);var m=f(this,u.call(this,w));return m._timer=g,m._nowFunc=x||function(){return Date.now()/1e3},m}return function(g,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}(p,u),p.prototype.init=function(g){g<=0&&(g=1),g=parseInt(g);var x=this.now+g;if(this.expiration===x&&this._timerHandle)b.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),b.Log.debug("Timer.init timer "+this._name+" for duration:",g),this._expiration=x;var m=5;g<m&&(m=g),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*m)}},p.prototype.cancel=function(){this._timerHandle&&(b.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},p.prototype._callback=function(){b.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),u.prototype.raise.call(this))},C(p,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),p}(k.Event)},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.SilentRenewService=void 0;var C=B(0);F.SilentRenewService=function(){function b(S){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,b),this._userManager=S}return b.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(k){}).catch(function(k){C.Log.error("SilentRenewService.start: Error from getUser:",k.message)}))},b.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},b.prototype._tokenExpiring=function(){var k=this;this._userManager.signinSilent().then(function(h){C.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(h){C.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",h.message),k._userManager.events._raiseSilentRenewError(h)})},b}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.CordovaPopupNavigator=void 0;var C=B(21);F.CordovaPopupNavigator=function(){function b(){!function(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}(this,b)}return b.prototype.prepare=function(k){var h=new C.CordovaPopupWindow(k);return Promise.resolve(h)},b}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.CordovaIFrameNavigator=void 0;var C=B(21);F.CordovaIFrameNavigator=function(){function b(){!function(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}(this,b)}return b.prototype.prepare=function(k){k.popupWindowFeatures="hidden=yes";var h=new C.CordovaPopupWindow(k);return Promise.resolve(h)},b}()},function(G,F,B){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Version="1.11.6"}])},2310:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0});const C=F(609),b=(k,h)=>window.fetch(k,h);G.default=class S{constructor(h,f,u,p,w){var g=this;this.loginHandler=h,this.redirectHandler=f,this.logoutHandler=u,this.sessionInfoManager=p,this.issuerConfigFetcher=w,this.login=function(){var x=B(function*(m,_){var T,D;yield g.sessionInfoManager.clear(m.sessionId);const L=(0,C.removeOidcQueryParam)(null!==(T=m.redirectUrl)&&void 0!==T?T:window.location.href);yield g.loginHandler.handle(ar($t({},m),{redirectUrl:L,clientName:null!==(D=m.clientName)&&void 0!==D?D:m.clientId,eventEmitter:_}))});return function(m,_){return x.apply(this,arguments)}}(),this.fetch=b,this.logout=function(){var x=B(function*(m){yield g.logoutHandler.handle(m),g.fetch=b});return function(m){return x.apply(this,arguments)}}(),this.getSessionInfo=function(){var x=B(function*(m){return g.sessionInfoManager.get(m)});return function(m){return x.apply(this,arguments)}}(),this.getAllSessionInfo=B(function*(){return g.sessionInfoManager.getAll()}),this.validateCurrentSession=function(){var x=B(function*(m){const _=yield g.sessionInfoManager.get(m);return void 0===_||void 0===_.clientAppId||void 0===_.issuer?null:_});return function(m){return x.apply(this,arguments)}}(),this.handleIncomingRedirect=function(){var x=B(function*(m,_){const T=yield g.redirectHandler.handle(m,_);g.fetch=T.fetch.bind(window);const D=new URL(m);return D.searchParams.delete("state"),D.searchParams.delete("code"),D.searchParams.delete("id_token"),D.searchParams.delete("access_token"),D.searchParams.delete("error"),D.searchParams.delete("error_description"),window.history.replaceState(null,"",D.toString()),{isLoggedIn:T.isLoggedIn,webId:T.webId,sessionId:T.sessionId,expirationDate:T.expirationDate}});return function(m,_){return x.apply(this,arguments)}}()}}},7162:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.Session=G.silentlyAuthenticate=void 0;const C=F(9069),b=F(8066),S=F(1464),k=F(2774),h=F(9898),f=F(1472);function u(x,m){return p.apply(this,arguments)}function p(){return(p=B(function*(x,m,_={inIframe:!1},T){var D;const L=yield m.validateCurrentSession(x);return null!==L&&(window.localStorage.setItem(h.KEY_CURRENT_URL,window.location.href),yield m.login({sessionId:x,prompt:"none",oidcIssuer:L.issuer,redirectUrl:L.redirectUrl,clientId:L.clientAppId,clientSecret:L.clientAppSecret,tokenType:null!==(D=L.tokenType)&&void 0!==D?D:"DPoP",inIframe:_.inIframe},T),!0)})).apply(this,arguments)}function w(x){return!!(null==x?void 0:x.isLoggedIn)}G.silentlyAuthenticate=u,G.Session=class g extends C.EventEmitter{constructor(m={},_){var T;super(),T=this,this.tokenRequestInProgress=!1,this.tmpFetchWithCookies=!1,this.login=function(){var D=B(function*(L){var M;return yield T.clientAuthentication.login(ar($t({sessionId:T.info.sessionId},L),{tokenType:null!==(M=L.tokenType)&&void 0!==M?M:"DPoP"}),T),new Promise(()=>{})});return function(L){return D.apply(this,arguments)}}(),this.fetch=function(){var D=B(function*(L,M){return T.clientAuthentication.fetch(L,ar($t({},M),{credentials:T.tmpFetchWithCookies?"include":null==M?void 0:M.credentials}))});return function(L,M){return D.apply(this,arguments)}}(),this.internalLogout=function(){var D=B(function*(L){window.localStorage.removeItem(h.KEY_CURRENT_SESSION),yield T.clientAuthentication.logout(T.info.sessionId),T.info.isLoggedIn=!1,T.tmpFetchWithCookies=!1,L&&T.emit(b.EVENTS.LOGOUT)});return function(L){return D.apply(this,arguments)}}(),this.logout=B(function*(){return T.internalLogout(!0)}),this.handleIncomingRedirect=B(function*(D={}){var L;if(T.info.isLoggedIn)return T.info;if(T.tokenRequestInProgress)return;const M="string"==typeof D?{url:D}:D,N=null!==(L=M.url)&&void 0!==L?L:window.location.href;if(null!==window.frameElement)return void(0,f.postRedirectUrlToParent)(N);!0!==M.useEssSession||!0===M.restorePreviousSession?window.localStorage.setItem("tmp-resource-server-session-enabled","false"):window.localStorage.setItem("tmp-resource-server-session-enabled","true");const I=window.localStorage.getItem("tmp-resource-server-session-info");if("string"==typeof I&&!0!==M.restorePreviousSession&&!0===M.useEssSession){let V=function(oe){var J;const le=Object.keys(null!==(J=oe.sessions)&&void 0!==J?J:{});return"string"==typeof oe.webId&&le.length>0&&"number"==typeof oe.sessions[le[0]].expiration};const j=JSON.parse(I);if(V(j)){const oe=Object.keys(j.sessions),J=new URL(j.webId).hostname,le=oe.find(ue=>new URL(ue).hostname===J);if(j.sessions[null!=le?le:oe[0]].expiration-Date.now()>3e5)return T.info.isLoggedIn=!0,T.info.webId=j.webId,T.tmpFetchWithCookies=!0,T.info}}T.tokenRequestInProgress=!0;const P=yield T.clientAuthentication.handleIncomingRedirect(N,T);if(w(P)){T.setSessionInfo(P);const V=window.localStorage.getItem(h.KEY_CURRENT_URL);null===V?T.emit(b.EVENTS.LOGIN):(window.localStorage.removeItem(h.KEY_CURRENT_URL),T.emit(b.EVENTS.SESSION_RESTORED,V))}else if(!0===M.restorePreviousSession){const V=window.localStorage.getItem(h.KEY_CURRENT_SESSION);if(null!==V&&(yield u(V,T.clientAuthentication,void 0,T)))return new Promise(()=>{})}return T.tokenRequestInProgress=!1,P}),this.clientAuthentication=m.clientAuthentication?m.clientAuthentication:(0,k.getClientAuthenticationWithDependencies)(m.secureStorage&&m.insecureStorage?{secureStorage:m.secureStorage,insecureStorage:m.insecureStorage}:{}),this.info=m.sessionInfo?{sessionId:m.sessionInfo.sessionId,isLoggedIn:!1,webId:m.sessionInfo.webId}:{sessionId:null!=_?_:(0,S.v4)(),isLoggedIn:!1},(0,f.setupIframeListener)(function(){var D=B(function*(L){const M=yield T.clientAuthentication.handleIncomingRedirect(L,T);!w(M)||T.setSessionInfo(M)});return function(L){return D.apply(this,arguments)}}()),this.on("tokenRenewal",()=>u(this.info.sessionId,this.clientAuthentication,{inIframe:!0},this)),this.on(b.EVENTS.LOGIN,()=>window.localStorage.setItem(h.KEY_CURRENT_SESSION,this.info.sessionId)),this.on(b.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.on(b.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(m){this.on(b.EVENTS.LOGIN,m)}onLogout(m){this.on(b.EVENTS.LOGOUT,m)}onError(m){this.on(b.EVENTS.ERROR,m)}onSessionRestore(m){this.on(b.EVENTS.SESSION_RESTORED,m)}onSessionExpiration(m){this.on(b.EVENTS.SESSION_EXPIRED,m)}setSessionInfo(m){this.info.isLoggedIn=m.isLoggedIn,this.info.webId=m.webId,this.info.sessionId=m.sessionId,this.info.expirationDate=m.expirationDate,this.on(b.EVENTS.SESSION_EXTENDED,_=>{this.info.expirationDate=Date.now()+1e3*_})}}},9898:(Ge,G,F)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.KEY_CURRENT_URL=G.KEY_CURRENT_SESSION=void 0;const B=F(8066);G.KEY_CURRENT_SESSION=`${B.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,G.KEY_CURRENT_URL=`${B.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`},2111:(Ge,G,F)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.onSessionRestore=G.onLogout=G.onLogin=G.handleIncomingRedirect=G.logout=G.login=G.fetch=G.getDefaultSession=void 0;const B=F(7162);let C;function b(){return void 0===C&&(C=new B.Session),C}G.getDefaultSession=b,G.fetch=(...g)=>b().fetch(...g),G.login=(...g)=>b().login(...g),G.logout=(...g)=>b().logout(...g),G.handleIncomingRedirect=(...g)=>b().handleIncomingRedirect(...g),G.onLogin=(...g)=>b().onLogin(...g),G.onLogout=(...g)=>b().onLogout(...g),G.onSessionRestore=(...g)=>b().onSessionRestore(...g)},2774:function(Ge,G,F){"use strict";var B=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(G,"__esModule",{value:!0}),G.getClientAuthenticationWithDependencies=void 0;const C=F(8066),b=B(F(645)),S=B(F(2310)),k=B(F(8651)),h=B(F(9503)),f=B(F(521)),u=F(7503),p=B(F(2103)),w=F(1076),g=F(2627),x=B(F(9615)),m=B(F(8364)),_=B(F(7771)),T=B(F(544)),D=F(4799),L=B(F(7093));G.getClientAuthenticationWithDependencies=function M(N){const I=new C.InMemoryStorage,P=N.secureStorage||I,V=N.insecureStorage||new m.default,j=new b.default(P,V),oe=new f.default(j),J=new T.default(j),le=new w.SessionInfoManager(j),q=new L.default(j,oe,J),ue=new k.default(j,new h.default(j,new _.default),oe,J),he=new x.default([new D.ErrorOidcHandler,new g.AuthCodeRedirectHandler(j,le,oe,J,q),new u.FallbackRedirectHandler]);return new S.default(ue,he,new p.default(le),le,oe)}},1472:(Ge,G,F)=>{"use strict";var B=F(8926).default;let C;function b(){return void 0===C&&(C=window.document.createElement("iframe"),C.setAttribute("hidden","true"),C.setAttribute("sandbox","allow-scripts allow-same-origin")),C}Object.defineProperty(G,"__esModule",{value:!0}),G.postRedirectUrlToParent=G.setupIframeListener=G.redirectInIframe=void 0,G.redirectInIframe=function S(f){const u=b();window.document.body.appendChild(u),u.src=f},G.setupIframeListener=function k(f){"undefined"!=typeof window&&window.addEventListener("message",function(){var u=B(function*(p){const w=b();p.origin===window.location.origin&&p.source===w.contentWindow&&"string"==typeof p.data.redirectUrl&&(yield f(p.data.redirectUrl)),window.document.body.contains(w)&&window.document.body.removeChild(w)});return function(p){return u.apply(this,arguments)}}())},G.postRedirectUrlToParent=function h(f){window.top.postMessage({redirectUrl:f},window.location.origin)}},1385:function(Ge,G,F){"use strict";var B=this&&this.__createBinding||(Object.create?function(h,f,u,p){void 0===p&&(p=u);var w=Object.getOwnPropertyDescriptor(f,u);(!w||("get"in w?!f.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return f[u]}}),Object.defineProperty(h,p,w)}:function(h,f,u,p){void 0===p&&(p=u),h[p]=f[u]}),C=this&&this.__exportStar||function(h,f){for(var u in h)"default"!==u&&!Object.prototype.hasOwnProperty.call(f,u)&&B(f,h,u)};Object.defineProperty(G,"__esModule",{value:!0}),G.InMemoryStorage=G.ConfigurationError=G.NotImplementedError=G.getClientAuthenticationWithDependencies=G.Session=void 0;var b=F(7162);Object.defineProperty(G,"Session",{enumerable:!0,get:function(){return b.Session}});var S=F(2774);Object.defineProperty(G,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return S.getClientAuthenticationWithDependencies}}),C(F(2111),G);var k=F(8066);Object.defineProperty(G,"NotImplementedError",{enumerable:!0,get:function(){return k.NotImplementedError}}),Object.defineProperty(G,"ConfigurationError",{enumerable:!0,get:function(){return k.ConfigurationError}}),Object.defineProperty(G,"InMemoryStorage",{enumerable:!0,get:function(){return k.InMemoryStorage}})},544:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0});const C=F(609);G.default=class b{constructor(k){this.storageUtility=k}getClient(k,h){var f=this;return B(function*(){var u;const[p,w]=yield Promise.all([f.storageUtility.getForUser(k.sessionId,"clientId",{secure:!1}),f.storageUtility.getForUser(k.sessionId,"clientSecret",{secure:!1})]);if(p)return{clientId:p,clientSecret:w,clientType:"dynamic"};const g=$t({},k);g.registrationAccessToken=null!==(u=g.registrationAccessToken)&&void 0!==u?u:yield f.storageUtility.getForUser(k.sessionId,"registrationAccessToken");try{const x=yield(0,C.registerClient)(g,h),m={clientId:x.clientId};return x.clientSecret&&(m.clientSecret=x.clientSecret),x.idTokenSignedResponseAlg&&(m.idTokenSignedResponseAlg=x.idTokenSignedResponseAlg),yield f.storageUtility.setForUser(g.sessionId,m,{secure:!1}),x}catch(x){throw new Error(`Client registration failed: [${x}]`)}})()}}},521:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.WELL_KNOWN_OPENID_CONFIG=void 0;const C=F(8066),b=F(1662);G.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const S={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};class h{constructor(u){this.storageUtility=u}static getLocalStorageKey(u){return`issuerConfig:${u}`}fetchConfig(u){var p=this;return B(function*(){let w;const g=(0,b.appendToUrlPathname)(u,G.WELL_KNOWN_OPENID_CONFIG),x=yield window.fetch(g);try{w=function k(f){const u={};return Object.keys(f).forEach(p=>{S[p]&&(u[S[p].toKey]=f[p])}),Array.isArray(u.scopesSupported)||(u.scopesSupported=["openid"]),u}(yield x.json())}catch(m){throw new C.ConfigurationError(`[${u.toString()}] has an invalid configuration: ${m.message}`)}return yield p.storageUtility.set(h.getLocalStorageKey(u),JSON.stringify(w)),w})()}}G.default=h},8651:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0});const C=F(8066);function b(h){return"string"==typeof h.oidcIssuer}function S(h){return"string"==typeof h.redirectUrl}G.default=class k{constructor(f,u,p,w){this.storageUtility=f,this.oidcHandler=u,this.issuerConfigFetcher=p,this.clientRegistrar=w}canHandle(f){return B(function*(){return b(f)&&S(f)})()}handle(f){var u=this;return B(function*(){if(!b(f))throw new C.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(f)}`);if(!S(f))throw new C.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(f)}`);const p=yield u.issuerConfigFetcher.fetchConfig(f.oidcIssuer),w=yield(0,C.handleRegistration)(f,p,u.storageUtility,u.clientRegistrar),g=ar($t({issuer:p.issuer,dpop:"dpop"===f.tokenType.toLowerCase()},f),{issuerConfiguration:p,client:w});return u.oidcHandler.handle(g)})()}}},7771:(Ge,G,F)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});const B=F(1472);G.default=class C{redirect(S,k){k&&k.handleRedirect?k.handleRedirect(S):k&&k.redirectByReplacingState?window.history.replaceState({},"",S):(null==k?void 0:k.redirectInIframe)?(0,B.redirectInIframe)(S):window.location.href=S}}},9503:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0});const C=F(609);G.default=class b{constructor(k,h){this.storageUtility=k,this.redirector=h}canHandle(k){return B(function*(){return!!(k.issuerConfiguration.grantTypesSupported&&k.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)})()}handle(k){var h=this;return B(function*(){var f;const u={authority:k.issuer.toString(),client_id:k.client.clientId,client_secret:k.client.clientSecret,redirect_uri:k.redirectUrl.toString(),post_logout_redirect_uri:k.redirectUrl.toString(),response_type:"code",scope:"openid offline_access webid",filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:null!==(f=k.prompt)&&void 0!==f?f:"consent"},p=new C.OidcClient(u),{redirector:w}=h,g=h.storageUtility;try{const x=yield p.createSigninRequest();yield Promise.all([g.setForUser(x.state._id,{sessionId:k.sessionId}),g.setForUser(k.sessionId,{codeVerifier:x.state._code_verifier,issuer:k.issuer.toString(),redirectUrl:k.redirectUrl,dpop:k.dpop?"true":"false"})]),w.redirect(x.url.toString(),{handleRedirect:k.handleRedirect,redirectInIframe:k.inIframe})}catch(x){console.error(x)}})()}}},9615:(Ge,G,F)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});const B=F(8066);G.default=class C extends B.AggregateHandler{constructor(S){super(S)}}},2627:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.AuthCodeRedirectHandler=G.DEFAULT_LIFESPAN=void 0;const C=F(8066),b=F(609);function k(){return(k=B(function*(f,u,p){const g=new URL(f).origin;yield u(f);try{if(200===(yield u(`${g}/session`)).status)return void(yield p.storeResourceServerSessionInfo(f,g,Date.now()+G.DEFAULT_LIFESPAN));yield p.clearResourceServerSessionInfo(g)}catch(x){yield p.clearResourceServerSessionInfo(g)}})).apply(this,arguments)}G.DEFAULT_LIFESPAN=18e5,G.AuthCodeRedirectHandler=class h{constructor(u,p,w,g,x){this.storageUtility=u,this.sessionInfoManager=p,this.issuerConfigFetcher=w,this.clientRegistrar=g,this.tokerRefresher=x}canHandle(u){return B(function*(){try{const p=new URL(u);return null!==p.searchParams.get("code")&&null!==p.searchParams.get("state")}catch(p){throw new Error(`[${u}] is not a valid URL, and cannot be used as a redirect URL: ${p}`)}})()}handle(u,p){var w=this;return B(function*(){if(!(yield w.canHandle(u)))throw new Error(`AuthCodeRedirectHandler cannot handle [${u}]: it is missing one of [code, state].`);const g=new URL(u),x=g.searchParams.get("state"),m=yield w.storageUtility.getForUser(x,"sessionId",{errorIfNull:!0}),{issuerConfig:_,codeVerifier:T,redirectUrl:D,dpop:L}=yield(0,C.loadOidcContextFromStorage)(m,w.storageUtility,w.issuerConfigFetcher);if(void 0===T)throw new Error(`The code verifier for session ${m} is missing from storage.`);if(void 0===D)throw new Error(`The redirect URL for session ${m} is missing from storage.`);const M=yield w.clientRegistrar.getClient({sessionId:m},_);let N;const I=Date.now();let P;L?(N=yield(0,b.getDpopToken)(_,M,{grantType:"authorization_code",code:g.searchParams.get("code"),codeVerifier:T,redirectUrl:D}),window.localStorage.removeItem(`oidc.${x}`)):N=yield(0,b.getBearerToken)(g.toString()),void 0!==N.refreshToken&&(P={sessionId:m,refreshToken:N.refreshToken,tokenRefresher:w.tokerRefresher});const V=yield(0,C.buildAuthenticatedFetch)(fetch,N.accessToken,{dpopKey:N.dpopKey,refreshOptions:P,eventEmitter:p,expiresIn:N.expiresIn});yield w.storageUtility.setForUser(m,{webId:N.webId,isLoggedIn:"true"},{secure:!0}),g.searchParams.delete("code"),yield w.storageUtility.setForUser(m,{redirectUrl:g.toString()},{secure:!1}),"false"===window.localStorage.getItem("tmp-resource-server-session-enabled")||(yield function S(f,u,p){return k.apply(this,arguments)}(N.webId,V,w.storageUtility));const oe=yield w.sessionInfoManager.get(m);if(!oe)throw new Error(`Could not retrieve session: [${m}].`);return Object.assign(oe,{fetch:V,expirationDate:"number"==typeof N.expiresIn?I+1e3*N.expiresIn:null})})()}}},4799:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.ErrorOidcHandler=void 0;const C=F(8066),b=F(1076);G.ErrorOidcHandler=class S{canHandle(h){return B(function*(){try{return new URL(h).searchParams.has("error")}catch(f){throw new Error(`[${h}] is not a valid URL, and cannot be used as a redirect URL: ${f}`)}})()}handle(h,f){return B(function*(){if(void 0!==f){const u=new URL(h),p=u.searchParams.get("error"),w=u.searchParams.get("error_description");f.emit(C.EVENTS.ERROR,p,w)}return(0,b.getUnauthenticatedSession)()})()}}},7503:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.FallbackRedirectHandler=void 0;const C=F(1076);G.FallbackRedirectHandler=class b{canHandle(k){return B(function*(){try{return new URL(k),!0}catch(h){throw new Error(`[${k}] is not a valid URL, and cannot be used as a redirect URL: ${h}`)}})()}handle(k){return B(function*(){return(0,C.getUnauthenticatedSession)()})()}}},7093:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0});const C=F(8066),b=F(609);G.default=class S{constructor(h,f,u){this.storageUtility=h,this.issuerConfigFetcher=f,this.clientRegistrar=u}refresh(h,f,u,p){var w=this;return B(function*(){const g=yield(0,C.loadOidcContextFromStorage)(h,w.storageUtility,w.issuerConfigFetcher),x=yield w.clientRegistrar.getClient({sessionId:h},g.issuerConfig);if(void 0===f)throw new Error(`Session [${h}] has no refresh token to allow it to refresh its access token.`);if(g.dpop&&void 0===u)throw new Error(`For session [${h}], the key bound to the DPoP access token must be provided to refresh said access token.`);const m=yield(0,b.refresh)(f,g.issuerConfig,x,u);return void 0!==m.refreshToken&&(null==p||p.emit(C.EVENTS.NEW_REFRESH_TOKEN,m.refreshToken),yield w.storageUtility.setForUser(h,{refreshToken:m.refreshToken})),m})()}}},2103:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=class C{constructor(S){this.sessionInfoManager=S}canHandle(){return B(function*(){return!0})()}handle(S){var k=this;return B(function*(){yield k.sessionInfoManager.clear(S)})()}}},1076:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.SessionInfoManager=G.clear=G.getUnauthenticatedSession=void 0;const C=F(8066),b=F(1464),S=F(609);function h(p,w){return f.apply(this,arguments)}function f(){return(f=B(function*(p,w){const g=yield w.get("tmp-resource-server-session-info"),x=JSON.parse(null!=g?g:"{}"),{webId:m}=x;if(void 0!==m){const T=new URL(m).origin;yield w.clearResourceServerSessionInfo(T)}yield Promise.all([w.deleteAllUserData(p,{secure:!1}),w.deleteAllUserData(p,{secure:!0}),w.delete("clientKey",{secure:!1})]),yield(0,S.clearOidcPersistentStorage)()})).apply(this,arguments)}G.getUnauthenticatedSession=function k(){return{isLoggedIn:!1,sessionId:(0,b.v4)(),fetch}},G.clear=h,G.SessionInfoManager=class u{constructor(w){this.storageUtility=w}update(w,g){throw new Error("Not Implemented")}get(w){var g=this;return B(function*(){var x;const m=yield g.storageUtility.getForUser(w,"isLoggedIn",{secure:!0}),_=yield g.storageUtility.getForUser(w,"webId",{secure:!0}),T=yield g.storageUtility.getForUser(w,"clientId",{secure:!1}),D=yield g.storageUtility.getForUser(w,"clientSecret",{secure:!1}),L=yield g.storageUtility.getForUser(w,"redirectUrl",{secure:!1}),M=yield g.storageUtility.getForUser(w,"refreshToken",{secure:!0}),N=yield g.storageUtility.getForUser(w,"issuer",{secure:!1}),I=null!==(x=yield g.storageUtility.getForUser(w,"tokenType",{secure:!1}))&&void 0!==x?x:"DPoP";if(!(0,C.isSupportedTokenType)(I))throw new Error(`Tokens of type [${I}] are not supported.`);if(void 0!==T||void 0!==m||void 0!==_||void 0!==M)return{sessionId:w,webId:_,isLoggedIn:"true"===m,redirectUrl:L,refreshToken:M,issuer:N,clientAppId:T,clientAppSecret:D,tokenType:I}})()}getAll(){return B(function*(){throw new Error("Not implemented")})()}clear(w){var g=this;return B(function*(){return h(w,g.storageUtility)})()}register(w){return B(function*(){throw new Error("Not implemented")})()}getRegisteredSessionIdAll(){return B(function*(){throw new Error("Not implemented")})()}clearAll(){return B(function*(){throw new Error("Not implemented")})()}}},8364:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=class C{get storage(){return window.localStorage}get(S){var k=this;return B(function*(){return k.storage.getItem(S)||void 0})()}set(S,k){var h=this;return B(function*(){h.storage.setItem(S,k)})()}delete(S){var k=this;return B(function*(){k.storage.removeItem(S)})()}}},645:(Ge,G,F)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});const B=F(8066);G.default=class C extends B.StorageUtility{constructor(S,k){super(S,k)}}},1662:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.appendToUrlPathname=void 0,G.appendToUrlPathname=function F(B,C){const b=new URL(B),S=b.pathname;return b.pathname=`${S}${S.endsWith("/")?"":"/"}${C.startsWith("/")?C.substring(1):C}`,b.toString()}},1347:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.generateDpopKeyPair=G.createDpopHeader=void 0;const C=F(6188),b=F(1464),S=F(3389);function k(w){const g=new URL(w);return new URL(g.pathname,g.origin).toString()}function f(){return(f=B(function*(w,g,x){return new C.SignJWT({htu:k(w),htm:g.toUpperCase(),jti:(0,b.v4)()}).setProtectedHeader({alg:S.PREFERRED_SIGNING_ALG[0],jwk:x.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(x.privateKey,{})})).apply(this,arguments)}function p(){return(p=B(function*(){const{privateKey:w,publicKey:g}=yield(0,C.generateKeyPair)(S.PREFERRED_SIGNING_ALG[0]),x={privateKey:w,publicKey:yield(0,C.exportJWK)(g)};return[x.publicKey.alg]=S.PREFERRED_SIGNING_ALG,x})).apply(this,arguments)}G.createDpopHeader=function h(w,g,x){return f.apply(this,arguments)},G.generateDpopKeyPair=function u(){return p.apply(this,arguments)}},8176:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.buildAuthenticatedFetch=G.DEFAULT_EXPIRATION_TIME_SECONDS=void 0;const C=F(8472),b=F(3389),S=F(1347),k=F(4201),h=F(8280);function f(N){return[401,403].includes(N)}function u(N,I,P,V){return p.apply(this,arguments)}function p(){return(p=B(function*(N,I,P,V){var j;const oe=new C.Headers(null==V?void 0:V.headers);return oe.set("Authorization",`DPoP ${I}`),oe.set("DPoP",yield(0,S.createDpopHeader)(N,null!==(j=null==V?void 0:V.method)&&void 0!==j?j:"get",P)),ar($t({},V),{headers:oe})})).apply(this,arguments)}function w(N,I,P,V){return g.apply(this,arguments)}function g(){return(g=B(function*(N,I,P,V){if(void 0!==P)return u(N,I,P,V);const j=new C.Headers(null==V?void 0:V.headers);return j.set("Authorization",`Bearer ${I}`),ar($t({},V),{headers:j})})).apply(this,arguments)}function x(N,I,P,V,j){return m.apply(this,arguments)}function m(){return(m=B(function*(N,I,P,V,j){return N(P,yield w(P.toString(),I,j,V))})).apply(this,arguments)}function _(N,I,P){return T.apply(this,arguments)}function T(){return(T=B(function*(N,I,P){var V;const j=yield N.tokenRefresher.refresh(N.sessionId,N.refreshToken,I);return null==P||P.emit(b.EVENTS.SESSION_EXTENDED,null!==(V=j.expiresIn)&&void 0!==V?V:G.DEFAULT_EXPIRATION_TIME_SECONDS),"string"==typeof j.refreshToken&&(null==P||P.emit(b.EVENTS.NEW_REFRESH_TOKEN,j.refreshToken)),{accessToken:j.accessToken,refreshToken:j.refreshToken,expiresIn:j.expiresIn}})).apply(this,arguments)}G.DEFAULT_EXPIRATION_TIME_SECONDS=600;const D=N=>void 0!==N?N-b.REFRESH_BEFORE_EXPIRATION_SECONDS>0?N-b.REFRESH_BEFORE_EXPIRATION_SECONDS:N:G.DEFAULT_EXPIRATION_TIME_SECONDS;function M(){return M=B(function*(N,I,P){var V;let oe,j=I;const J=null==P?void 0:P.refreshOptions;if(void 0!==J){const le=function(){var q=B(function*(){var ue,he,ce,pe;try{const{accessToken:fe,refreshToken:Ee,expiresIn:_e}=yield _(J,P.dpopKey,P.eventEmitter);j=fe,void 0!==Ee&&(J.refreshToken=Ee),clearTimeout(oe),oe=setTimeout(le,1e3*D(_e)),null===(ue=P.eventEmitter)||void 0===ue||ue.emit(b.EVENTS.TIMEOUT_SET,oe)}catch(fe){fe instanceof k.OidcProviderError&&(null===(he=null==P?void 0:P.eventEmitter)||void 0===he||he.emit(b.EVENTS.ERROR,fe.error,fe.errorDescription),null===(ce=null==P?void 0:P.eventEmitter)||void 0===ce||ce.emit(b.EVENTS.SESSION_EXPIRED)),fe instanceof h.InvalidResponseError&&fe.missingFields.includes("access_token")&&(null===(pe=null==P?void 0:P.eventEmitter)||void 0===pe||pe.emit(b.EVENTS.SESSION_EXPIRED))}});return function(){return q.apply(this,arguments)}}();oe=setTimeout(le,1e3*D(P.expiresIn)),null===(V=P.eventEmitter)||void 0===V||V.emit(b.EVENTS.TIMEOUT_SET,oe)}else if(void 0!==P&&void 0!==P.eventEmitter){const le=setTimeout(()=>{P.eventEmitter.emit(b.EVENTS.SESSION_EXPIRED)},1e3*D(P.expiresIn));P.eventEmitter.emit(b.EVENTS.TIMEOUT_SET,le)}return function(){var le=B(function*(q,ue){let he=yield x(N,j,q,ue,null==P?void 0:P.dpopKey);const ce=!he.ok&&!f(he.status);return he.ok||ce||he.url!==q&&void 0!==(null==P?void 0:P.dpopKey)&&(he=yield x(N,j,he.url,ue,P.dpopKey)),he});return function(q,ue){return le.apply(this,arguments)}}()}),M.apply(this,arguments)}G.buildAuthenticatedFetch=function L(N,I,P){return M.apply(this,arguments)}},3389:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.REFRESH_BEFORE_EXPIRATION_SECONDS=G.EVENTS=G.PREFERRED_SIGNING_ALG=G.SOLID_CLIENT_AUTHN_KEY_PREFIX=void 0,G.SOLID_CLIENT_AUTHN_KEY_PREFIX="solidClientAuthn:",G.PREFERRED_SIGNING_ALG=["ES256","RS256"],G.EVENTS={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},G.REFRESH_BEFORE_EXPIRATION_SECONDS=5},8212:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});class F extends Error{constructor(C){super(C)}}G.default=F},9680:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});class F extends Error{constructor(C,b,S=!0){super("string"==typeof C?F.substituteParams(C,b):F.appendErrorIri(F.lookupErrorIri(C,b),C,S))}httpResponse(C,b=!0){return this.message=F.appendHttpResponseDetails(this.message,C,b),this.httpErrorResponse=C,this}hasHttpResponse(){return void 0!==this.httpErrorResponse}getHttpResponse(){return this.httpErrorResponse}getHttpStatusCode(){if(void 0===this.httpErrorResponse)throw new F("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Code.");return this.httpErrorResponse.status}getHttpStatusText(){if(void 0===this.httpErrorResponse)throw new F("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Text!");return this.httpErrorResponse.statusText}static determineIfVocabTerm(C){return void 0!==C.strict}static lookupErrorIri(C,b){if(F.determineIfVocabTerm(C)){const S=void 0===b?C.message:C.messageParams(...b);return void 0===S?`Looked up error message IRI [${C.value}], but found no message value.`:S}return`Error message looked up at: [${C.value}]${void 0===b?"":`, with params [${b.toString()}]`}`}static appendHttpResponseDetails(C,b,S){return S&&void 0!==b?`${C} HTTP details: status code [${b.status}], status text [${b.statusText}].`:C}static appendErrorIri(C,b,S){return S?`${C} Error IRI: [${b.value}].`:C}static substituteParams(C,b){let S=C;if(void 0!==b){const k=C.split("{{").length-1;if(k!==b.length)throw new Error(`Setting parameters on message [${C}], but it requires [${k}] params and we received [${b.length}].`);for(let h=0;h<b.length;h+=1)S=S.replace(`{{${h}}}`,b[h])}return S}}G.default=F},8280:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.InvalidResponseError=void 0;class F extends Error{constructor(C){super(`Invalid response from OIDC provider: missing fields ${C}`),this.missingFields=C}}G.InvalidResponseError=F},6101:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});class F extends Error{constructor(C){super(`[${C}] is not implemented`)}}G.default=F},4201:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.OidcProviderError=void 0;class F extends Error{constructor(C,b,S){super(C),this.error=b,this.errorDescription=S}}G.OidcProviderError=F},8066:function(Ge,G,F){"use strict";var B=this&&this.__createBinding||(Object.create?function(M,N,I,P){void 0===P&&(P=I);var V=Object.getOwnPropertyDescriptor(N,I);(!V||("get"in V?!N.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return N[I]}}),Object.defineProperty(M,P,V)}:function(M,N,I,P){void 0===P&&(P=I),M[P]=N[I]}),C=this&&this.__exportStar||function(M,N){for(var I in M)"default"!==I&&!Object.prototype.hasOwnProperty.call(N,I)&&B(N,M,I)},b=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(G,"__esModule",{value:!0}),G.StorageUtilityGetResponse=G.StorageUtilityMock=G.mockStorageUtility=G.mockStorage=G.buildAuthenticatedFetch=G.generateDpopKeyPair=G.createDpopHeader=G.OidcProviderError=G.InvalidResponseError=G.NotImplementedError=G.ConfigurationError=G.InMemoryStorage=G.getSessionIdFromOauthState=G.saveSessionInfoToStorage=G.loadOidcContextFromStorage=G.StorageUtility=G.determineSigningAlg=G.handleRegistration=G.USER_SESSION_PREFIX=G.isSupportedTokenType=G.fetchJwks=G.getWebidFromTokenPayload=G.AggregateHandler=void 0,C(F(3389),G);var S=F(469);Object.defineProperty(G,"AggregateHandler",{enumerable:!0,get:function(){return b(S).default}});var k=F(191);Object.defineProperty(G,"getWebidFromTokenPayload",{enumerable:!0,get:function(){return k.getWebidFromTokenPayload}}),Object.defineProperty(G,"fetchJwks",{enumerable:!0,get:function(){return k.fetchJwks}});var h=F(3880);Object.defineProperty(G,"isSupportedTokenType",{enumerable:!0,get:function(){return h.isSupportedTokenType}});var f=F(7286);Object.defineProperty(G,"USER_SESSION_PREFIX",{enumerable:!0,get:function(){return f.USER_SESSION_PREFIX}});var u=F(2060);Object.defineProperty(G,"handleRegistration",{enumerable:!0,get:function(){return u.handleRegistration}}),Object.defineProperty(G,"determineSigningAlg",{enumerable:!0,get:function(){return u.determineSigningAlg}});var p=F(4067);Object.defineProperty(G,"StorageUtility",{enumerable:!0,get:function(){return b(p).default}}),Object.defineProperty(G,"loadOidcContextFromStorage",{enumerable:!0,get:function(){return p.loadOidcContextFromStorage}}),Object.defineProperty(G,"saveSessionInfoToStorage",{enumerable:!0,get:function(){return p.saveSessionInfoToStorage}}),Object.defineProperty(G,"getSessionIdFromOauthState",{enumerable:!0,get:function(){return p.getSessionIdFromOauthState}});var w=F(7278);Object.defineProperty(G,"InMemoryStorage",{enumerable:!0,get:function(){return b(w).default}});var g=F(8212);Object.defineProperty(G,"ConfigurationError",{enumerable:!0,get:function(){return b(g).default}});var x=F(6101);Object.defineProperty(G,"NotImplementedError",{enumerable:!0,get:function(){return b(x).default}});var m=F(8280);Object.defineProperty(G,"InvalidResponseError",{enumerable:!0,get:function(){return m.InvalidResponseError}});var _=F(4201);Object.defineProperty(G,"OidcProviderError",{enumerable:!0,get:function(){return _.OidcProviderError}});var T=F(1347);Object.defineProperty(G,"createDpopHeader",{enumerable:!0,get:function(){return T.createDpopHeader}}),Object.defineProperty(G,"generateDpopKeyPair",{enumerable:!0,get:function(){return T.generateDpopKeyPair}});var D=F(8176);Object.defineProperty(G,"buildAuthenticatedFetch",{enumerable:!0,get:function(){return D.buildAuthenticatedFetch}});var L=F(5165);Object.defineProperty(G,"mockStorage",{enumerable:!0,get:function(){return L.mockStorage}}),Object.defineProperty(G,"mockStorageUtility",{enumerable:!0,get:function(){return L.mockStorageUtility}}),Object.defineProperty(G,"StorageUtilityMock",{enumerable:!0,get:function(){return L.StorageUtilityMock}}),Object.defineProperty(G,"StorageUtilityGetResponse",{enumerable:!0,get:function(){return L.StorageUtilityGetResponse}})},2060:(Ge,G,F)=>{"use strict";var B=F(8926).default;function C(f){try{return new URL(f),!0}catch(u){return!1}}function S(f,u){return void 0===f.clientId||C(f.clientId)?u.scopesSupported.includes("webid")&&void 0!==f.clientId&&C(f.clientId)?"solid-oidc":"dynamic":"static"}function h(){return(h=B(function*(f,u,p,w){const g=S(f,u);return"dynamic"===g?w.getClient({sessionId:f.sessionId,clientName:f.clientName,redirectUrl:f.redirectUrl},u):(yield p.setForUser(f.sessionId,{clientId:f.clientId}),f.clientSecret&&(yield p.setForUser(f.sessionId,{clientSecret:f.clientSecret})),f.clientName&&(yield p.setForUser(f.sessionId,{clientName:f.clientName})),{clientId:f.clientId,clientSecret:f.clientSecret,clientName:f.clientName,clientType:g})})).apply(this,arguments)}Object.defineProperty(G,"__esModule",{value:!0}),G.handleRegistration=G.determineSigningAlg=void 0,G.determineSigningAlg=function b(f,u){var p;return null!==(p=u.find(w=>f.includes(w)))&&void 0!==p?p:null},G.handleRegistration=function k(f,u,p,w){return h.apply(this,arguments)}},191:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getWebidFromTokenPayload=G.fetchJwks=void 0;const C=F(8472),b=F(6188);function S(u,p){return k.apply(this,arguments)}function k(){return(k=B(function*(u,p){const w=yield(0,C.fetch)(u);if(200!==w.status)throw new Error(`Could not fetch JWKS for [${p}] at [${u}]: ${w.status} ${w.statusText}`);let g;try{g=(yield w.json()).keys[0]}catch(x){throw new Error(`Malformed JWKS for [${p}] at [${u}]: ${x.message}`)}return g})).apply(this,arguments)}function f(){return(f=B(function*(u,p,w,g){const x=yield S(p,w);let m;try{const{payload:_}=yield(0,b.jwtVerify)(u,yield(0,b.importJWK)(x),{issuer:w,audience:g});m=_}catch(_){throw new Error(`ID token verification failed: ${_.stack}`)}if("string"==typeof m.webid)return m.webid;if("string"!=typeof m.sub)throw new Error(`The ID token ${JSON.stringify(m)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(m.sub),m.sub}catch(_){throw new Error(`The ID token has no 'webid' claim, and its 'sub' claim of [${m.sub}] is invalid as a URL - error [${_}].`)}})).apply(this,arguments)}G.fetchJwks=S,G.getWebidFromTokenPayload=function h(u,p,w,g){return f.apply(this,arguments)}},3880:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.isSupportedTokenType=void 0,G.isSupportedTokenType=function F(B){return"string"==typeof B&&["DPoP","Bearer"].includes(B)}},7286:(Ge,G)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.USER_SESSION_PREFIX=void 0,G.USER_SESSION_PREFIX="solidClientAuthenticationUser"},7278:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=class C{constructor(){this.map={}}get(S){var k=this;return B(function*(){return k.map[S]||void 0})()}set(S,k){var h=this;return B(function*(){h.map[S]=k})()}delete(S){var k=this;return B(function*(){delete k.map[S]})()}}},4067:function(Ge,G,F){"use strict";var B=F(8926).default,C=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(G,"__esModule",{value:!0}),G.saveSessionInfoToStorage=G.loadOidcContextFromStorage=G.getSessionIdFromOauthState=void 0;const b=F(6188),S=C(F(9680));function h(){return(h=B(function*(x,m){return x.getForUser(m,"sessionId")})).apply(this,arguments)}function u(){return(u=B(function*(x,m,_){try{const[T,D,L,M]=yield Promise.all([m.getForUser(x,"issuer",{errorIfNull:!0}),m.getForUser(x,"codeVerifier"),m.getForUser(x,"redirectUrl"),m.getForUser(x,"dpop",{errorIfNull:!0})]);return yield m.deleteForUser(x,"codeVerifier"),{codeVerifier:D,redirectUrl:L,issuerConfig:yield _.fetchConfig(T),dpop:"true"===M}}catch(T){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${x}]: ${T}`)}})).apply(this,arguments)}function w(){return(w=B(function*(x,m,_,T,D,L,M){void 0!==D&&(yield x.setForUser(m,{refreshToken:D},{secure:L})),void 0!==_&&(yield x.setForUser(m,{webId:_},{secure:L})),void 0!==T&&(yield x.setForUser(m,{isLoggedIn:T},{secure:L})),void 0!==M&&(yield x.setForUser(m,{publicKey:JSON.stringify(M.publicKey),privateKey:JSON.stringify(yield(0,b.exportJWK)(M.privateKey))},{secure:L}))})).apply(this,arguments)}G.getSessionIdFromOauthState=function k(x,m){return h.apply(this,arguments)},G.loadOidcContextFromStorage=function f(x,m,_){return u.apply(this,arguments)},G.saveSessionInfoToStorage=function p(x,m,_,T,D,L,M){return w.apply(this,arguments)},G.default=class g{constructor(m,_){this.secureStorage=m,this.insecureStorage=_,this.RESOURCE_SERVER_SESSION_INFORMATION_KEY="tmp-resource-server-session-info"}getKey(m){return`solidClientAuthenticationUser:${m}`}getUserData(m,_){var T=this;return B(function*(){const D=yield(_?T.secureStorage:T.insecureStorage).get(T.getKey(m));if(void 0===D)return{};try{return JSON.parse(D)}catch(L){throw new S.default(`Data for user [${m}] in [${_?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${D}`)}})()}setUserData(m,_,T){var D=this;return B(function*(){yield(T?D.secureStorage:D.insecureStorage).set(D.getKey(m),JSON.stringify(_))})()}get(m,_){var T=this;return B(function*(){const D=yield((null==_?void 0:_.secure)?T.secureStorage:T.insecureStorage).get(m);if(void 0===D&&(null==_?void 0:_.errorIfNull))throw new S.default(`[${m}] is not stored`);return D})()}set(m,_,T){var D=this;return B(function*(){return((null==T?void 0:T.secure)?D.secureStorage:D.insecureStorage).set(m,_)})()}delete(m,_){var T=this;return B(function*(){return((null==_?void 0:_.secure)?T.secureStorage:T.insecureStorage).delete(m)})()}getForUser(m,_,T){var D=this;return B(function*(){const L=yield D.getUserData(m,null==T?void 0:T.secure);let M;if((!L||!L[_])&&(M=void 0),M=L[_],void 0===M&&(null==T?void 0:T.errorIfNull))throw new S.default(`Field [${_}] for user [${m}] is not stored`);return M||void 0})()}setForUser(m,_,T){var D=this;return B(function*(){let L;try{L=yield D.getUserData(m,null==T?void 0:T.secure)}catch(M){L={}}yield D.setUserData(m,$t($t({},L),_),null==T?void 0:T.secure)})()}deleteForUser(m,_,T){var D=this;return B(function*(){const L=yield D.getUserData(m,null==T?void 0:T.secure);delete L[_],yield D.setUserData(m,L,null==T?void 0:T.secure)})()}deleteAllUserData(m,_){var T=this;return B(function*(){yield((null==_?void 0:_.secure)?T.secureStorage:T.insecureStorage).delete(T.getKey(m))})()}storeResourceServerSessionInfo(m,_,T){var D=this;return B(function*(){var L;const M=JSON.parse(null!==(L=yield D.insecureStorage.get(D.RESOURCE_SERVER_SESSION_INFORMATION_KEY))&&void 0!==L?L:"{}");M.webId!==m&&(M.sessions={}),M.webId=m,M.sessions[_]={expiration:T},yield D.insecureStorage.set(D.RESOURCE_SERVER_SESSION_INFORMATION_KEY,JSON.stringify(M))})()}clearResourceServerSessionInfo(m){var _=this;return B(function*(){var T;const D=JSON.parse(null!==(T=yield _.insecureStorage.get(_.RESOURCE_SERVER_SESSION_INFORMATION_KEY))&&void 0!==T?T:"{}");void 0!==D.sessions&&(delete D.sessions[m],0===Object.keys(D.sessions).length?yield _.insecureStorage.set(_.RESOURCE_SERVER_SESSION_INFORMATION_KEY,"{}"):yield _.insecureStorage.set(_.RESOURCE_SERVER_SESSION_INFORMATION_KEY,JSON.stringify(D)))})()}}},5165:(Ge,G,F)=>{"use strict";var B=F(8926).default;Object.defineProperty(G,"__esModule",{value:!0}),G.mockStorageUtility=G.mockStorage=G.StorageUtilityMock=G.StorageUtilityGetResponse=void 0;const C=F(8066);var k;G.StorageUtilityGetResponse="getResponse",G.StorageUtilityMock={get:(k=B(function*(h,f){return G.StorageUtilityGetResponse}),function(f,u){return k.apply(this,arguments)}),set:function(){var k=B(function*(h,f){});return function(f,u){return k.apply(this,arguments)}}(),delete:function(){var k=B(function*(h){});return function(f){return k.apply(this,arguments)}}(),getForUser:function(){var k=B(function*(h,f,u){return G.StorageUtilityGetResponse});return function(f,u,p){return k.apply(this,arguments)}}(),setForUser:function(){var k=B(function*(h,f,u){});return function(f,u,p){return k.apply(this,arguments)}}(),deleteForUser:function(){var k=B(function*(h,f,u){});return function(f,u,p){return k.apply(this,arguments)}}(),deleteAllUserData:function(){var k=B(function*(h,f){});return function(f,u){return k.apply(this,arguments)}}(),storeResourceServerSessionInfo:function(){var k=B(function*(h,f,u){});return function(f,u,p){return k.apply(this,arguments)}}(),clearResourceServerSessionInfo:function(){var k=B(function*(h){});return function(f){return k.apply(this,arguments)}}()},G.mockStorage=k=>{const h=k;return{get:(f=B(function*(u){if(void 0!==h[u])return"string"==typeof h[u]?h[u]:JSON.stringify(h[u])}),function(p){return f.apply(this,arguments)}),set:function(){var f=B(function*(u,p){h[u]=p});return function(p,w){return f.apply(this,arguments)}}(),delete:function(){var f=B(function*(u){delete h[u]});return function(p){return f.apply(this,arguments)}}()};var f},G.mockStorageUtility=(k,h=!1)=>h?new C.StorageUtility((0,G.mockStorage)(k),(0,G.mockStorage)({})):new C.StorageUtility((0,G.mockStorage)({}),(0,G.mockStorage)(k))},469:function(Ge,G,F){"use strict";var B=F(8926).default,C=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(G,"__esModule",{value:!0});const b=C(F(9680));G.default=class S{constructor(h){this.handleables=h}getProperHandler(h){var f=this;return B(function*(){const u=yield Promise.all(f.handleables.map(p=>p.canHandle(...h)));for(let p=0;p<u.length;p+=1)if(u[p])return f.handleables[p];return null})()}canHandle(...h){var f=this;return B(function*(){return null!==(yield f.getProperHandler(h))})()}handle(...h){var f=this;return B(function*(){const u=yield f.getProperHandler(h);if(u)return u.handle(...h);throw new b.default(`[${f.constructor.name}] cannot find a suitable handler for: ${h.map(p=>{try{return JSON.stringify(p)}catch(w){return p.toString()}}).join(", ")}`)})()}}},8829:(Ge,G,F)=>{"use strict";var B={};F.r(B),F.d(B,{getAccessFor:()=>DM,getAccessForAll:()=>MM,getAgentAccess:()=>Uw,getAgentAccessAll:()=>vM,getGroupAccess:()=>jw,getGroupAccessAll:()=>wM,getPublicAccess:()=>Hw,setAccessFor:()=>RM,setAgentAccess:()=>mM,setGroupAccess:()=>SM,setPublicAccess:()=>AM});var C={};F.r(C),F.d(C,{getAccessFor:()=>DM,getAccessForAll:()=>MM,getAgentAccess:()=>kV,getAgentAccessAll:()=>Lge,getPublicAccess:()=>DV,setAccessFor:()=>RM,setAgentAccess:()=>Nge,setPublicAccess:()=>Bge});var b={};F.r(b),F.d(b,{getAccessFor:()=>DM,getAccessForAll:()=>MM,getAgentAccess:()=>Uw,getAgentAccessAll:()=>vM,getGroupAccess:()=>jw,getGroupAccessAll:()=>wM,getPublicAccess:()=>Hw,setAccessFor:()=>RM,setAgentAccess:()=>mM,setGroupAccess:()=>SM,setPublicAccess:()=>AM});var S={};F.r(S),F.d(S,{getAclServerResourceInfo:()=>TV,getAgentAccess:()=>RV,getAgentAccessAll:()=>$ge,getPublicAccess:()=>OV,setAgentAccess:()=>Jge,setPublicAccess:()=>Yge});var k={};function h(n){return"function"==typeof n}function f(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}F.r(k),F.d(k,{FetchError:()=>Oo,SolidClientError:()=>Bp,ThingExpectedError:()=>QU,access:()=>b,access_v1:()=>B,access_v2:()=>C,acp_v1:()=>ype,acp_v2:()=>upe,acp_v3:()=>Cpe,acp_v4:()=>gge,addBoolean:()=>uD,addDate:()=>hD,addDatetime:()=>dD,addDecimal:()=>pD,addInteger:()=>gD,addIri:()=>_n,addJwkToJwks:()=>aH,addLiteral:()=>cw,addMockFallbackAclTo:()=>Ufe,addMockResourceAclTo:()=>Bfe,addNamedNode:()=>lw,addPublicKeyToProfileJwks:()=>Wfe,addStringEnglish:()=>pfe,addStringNoLocale:()=>mD,addStringWithLocale:()=>qp,addTerm:()=>yD,addTime:()=>fD,addUrl:()=>jy,asIri:()=>ei,asUrl:()=>Sc,buildThing:()=>nl,changeLogAsMarkdown:()=>rj,createAcl:()=>dw,createAclFromFallbackAcl:()=>Fj,createContainerAt:()=>Xhe,createContainerInContainer:()=>rfe,createSolidDataset:()=>Gp,createThing:()=>Fo,deleteAclFor:()=>Ife,deleteContainer:()=>ife,deleteFile:()=>Hde,deleteSolidDataset:()=>Yhe,fromRdfJsDataset:()=>Hfe,getAgentAccess:()=>TD,getAgentAccessAll:()=>Lj,getAgentDefaultAccess:()=>Hj,getAgentDefaultAccessAll:()=>Vj,getAgentResourceAccess:()=>Bj,getAgentResourceAccessAll:()=>Uj,getAltProfileUrlAllFrom:()=>lH,getBoolean:()=>Ihe,getBooleanAll:()=>Rhe,getContainedResourceUrlAll:()=>ofe,getContentType:()=>hU,getDate:()=>Fhe,getDateAll:()=>Nhe,getDatetime:()=>Ohe,getDatetimeAll:()=>Phe,getDecimal:()=>Uhe,getDecimalAll:()=>jhe,getEffectiveAccess:()=>Ude,getFallbackAcl:()=>AD,getFile:()=>qb,getFileWithAcl:()=>Tfe,getGroupAccess:()=>MD,getGroupAccessAll:()=>Kj,getGroupDefaultAccess:()=>Jj,getGroupDefaultAccessAll:()=>Zj,getGroupResourceAccess:()=>Gj,getGroupResourceAccessAll:()=>qj,getInteger:()=>Hhe,getIntegerAll:()=>Vhe,getIri:()=>Ll,getIriAll:()=>Bt,getJsonLdParser:()=>jk,getLinkedResourceUrlAll:()=>Hp,getLiteral:()=>qU,getLiteralAll:()=>JU,getNamedNode:()=>KU,getNamedNodeAll:()=>GU,getPodOwner:()=>fU,getPodUrlAll:()=>$fe,getPodUrlAllFrom:()=>uH,getProfileAll:()=>cH,getProfileJwksIri:()=>sH,getPropertyAll:()=>Mhe,getPublicAccess:()=>ID,getPublicDefaultAccess:()=>tH,getPublicResourceAccess:()=>eH,getResourceAcl:()=>zy,getResourceInfo:()=>Vs,getResourceInfoWithAcl:()=>Mfe,getSolidDataset:()=>ia,getSolidDatasetWithAcl:()=>Dfe,getSourceIri:()=>ys,getSourceUrl:()=>hn,getStringByLocaleAll:()=>$he,getStringEnglish:()=>zhe,getStringEnglishAll:()=>Whe,getStringNoLocale:()=>Khe,getStringNoLocaleAll:()=>Ghe,getStringWithLocale:()=>WU,getStringWithLocaleAll:()=>$U,getTerm:()=>ZU,getTermAll:()=>YU,getThing:()=>cr,getThingAll:()=>tl,getTime:()=>Lhe,getTimeAll:()=>Bhe,getTurtleParser:()=>HU,getUrl:()=>aw,getUrlAll:()=>bu,getWellKnownSolid:()=>cfe,hasAccessibleAcl:()=>ji,hasAcl:()=>kfe,hasFallbackAcl:()=>bd,hasResourceAcl:()=>_d,hasResourceInfo:()=>_u,hasServerResourceInfo:()=>Nh,isContainer:()=>dU,isPodOwner:()=>Bde,isRawData:()=>Lde,isThing:()=>$p,isThingLocal:()=>Hh,mockContainerFrom:()=>aj,mockFetchError:()=>ffe,mockFileFrom:()=>hfe,mockSolidDatasetFrom:()=>cD,mockThingFrom:()=>mfe,overwriteFile:()=>gU,removeAll:()=>yi,removeBoolean:()=>lj,removeDate:()=>uj,removeDatetime:()=>cj,removeDecimal:()=>hj,removeInteger:()=>fj,removeIri:()=>Vr,removeLiteral:()=>mj,removeNamedNode:()=>gj,removeStringEnglish:()=>gfe,removeStringNoLocale:()=>pj,removeStringWithLocale:()=>Hy,removeThing:()=>xc,removeTime:()=>dj,removeUrl:()=>uw,responseToResourceInfo:()=>Dk,responseToSolidDataset:()=>tj,saveAclFor:()=>Nj,saveFileInContainer:()=>Vde,saveSolidDatasetAt:()=>eD,saveSolidDatasetInContainer:()=>nfe,setAgentDefaultAccess:()=>Rfe,setAgentResourceAccess:()=>jj,setBoolean:()=>yj,setDate:()=>_j,setDatetime:()=>vj,setDecimal:()=>wj,setGroupDefaultAccess:()=>Pfe,setGroupResourceAccess:()=>Qj,setInteger:()=>xj,setIri:()=>Ai,setLiteral:()=>Ej,setNamedNode:()=>Cj,setProfileJwks:()=>Vfe,setPublicDefaultAccess:()=>Ffe,setPublicResourceAccess:()=>nH,setStringNoLocale:()=>Sj,setStringWithLocale:()=>vD,setTerm:()=>Aj,setThing:()=>Yi,setTime:()=>bj,setUrl:()=>wu,solidDatasetAsMarkdown:()=>aD,solidDatasetAsTurtle:()=>Gfe,thingAsMarkdown:()=>XU,toRdfJsDataset:()=>iH,universalAccess:()=>S});const u=f(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function p(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class w{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(h(r))try{r()}catch(o){t=o instanceof u?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{m(o)}catch(s){t=null!=t?t:[],s instanceof u?t=[...t,...s.errors]:t.push(s)}}if(t)throw new u(t)}}add(t){var e;if(t&&t!==this)if(this.closed)m(t);else{if(t instanceof w){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&p(e,t)}remove(t){const{_finalizers:e}=this;e&&p(e,t),t instanceof w&&t._removeParent(this)}}w.EMPTY=(()=>{const n=new w;return n.closed=!0,n})();const g=w.EMPTY;function x(n){return n instanceof w||n&&"closed"in n&&h(n.remove)&&h(n.add)&&h(n.unsubscribe)}function m(n){h(n)?n():n.unsubscribe()}const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},T={setTimeout(n,t,...e){const{delegate:r}=T;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=T;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function D(n){T.setTimeout(()=>{const{onUnhandledError:t}=_;if(!t)throw n;t(n)})}function L(){}const M=P("C",void 0,void 0);function P(n,t,e){return{kind:n,value:t,error:e}}let V=null;function j(n){if(_.useDeprecatedSynchronousErrorHandling){const t=!V;if(t&&(V={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=V;if(V=null,e)throw r}}else n()}class J extends w{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,x(t)&&t.add(this)):this.destination=Ee}static create(t,e,r){return new he(t,e,r)}next(t){this.isStopped?fe(function I(n){return P("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?fe(function N(n){return P("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?fe(M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const le=Function.prototype.bind;function q(n,t){return le.call(n,t)}class ue{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){ce(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){ce(r)}else ce(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ce(e)}}}class he extends J{constructor(t,e,r){let i;if(super(),h(t)||!t)i={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=r?r:void 0};else{let o;this&&_.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&q(t.next,o),error:t.error&&q(t.error,o),complete:t.complete&&q(t.complete,o)}):i=t}this.destination=new ue(i)}}function ce(n){_.useDeprecatedSynchronousErrorHandling?function oe(n){_.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=n)}(n):D(n)}function fe(n,t){const{onStoppedNotification:e}=_;e&&T.setTimeout(()=>e(n,t))}const Ee={closed:!0,next:L,error:function pe(n){throw n},complete:L},_e="function"==typeof Symbol&&Symbol.observable||"@@observable";function Te(n){return n}let de=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){const o=function ze(n){return n&&n instanceof J||function Ye(n){return n&&h(n.next)&&h(n.error)&&h(n.complete)}(n)&&x(n)}(e)?e:new he(e,r,i);return j(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=we(r))((i,o)=>{const s=new he({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[_e](){return this}pipe(...e){return function be(n){return 0===n.length?Te:1===n.length?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}(e)(this)}toPromise(e){return new(e=we(e))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function we(n){var t;return null!==(t=null!=n?n:_.Promise)&&void 0!==t?t:Promise}const He=f(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ne=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new ye(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new He}next(e){j(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){j(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){j(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:o}=this;return r||i?g:(this.currentObservers=null,o.push(e),new w(()=>{this.currentObservers=null,p(o,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){const e=new de;return e.source=this,e}}return n.create=(t,e)=>new ye(t,e),n})();class ye extends Ne{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:g}}function ee(n){return h(null==n?void 0:n.lift)}function ie(n){return t=>{if(ee(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $(n,t,e,r,i){return new se(n,t,e,r,i)}class se extends J{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function K(n,t){return ie((e,r)=>{let i=0;e.subscribe($(r,o=>{r.next(n.call(t,o,i++))}))})}function xt(n){return this instanceof xt?(this.v=n,this):new xt(n)}function ni(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(n,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(U){r[U]&&(i[U]=function(W){return new Promise(function(ne,Ce){o.push([U,W,ne,Ce])>1||a(U,W)})})}function a(U,W){try{!function l(U){U.value instanceof xt?Promise.resolve(U.value.v).then(c,d):E(o[0][2],U)}(r[U](W))}catch(ne){E(o[0][3],ne)}}function c(U){a("next",U)}function d(U){a("throw",U)}function E(U,W){U(W),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Fr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function Ft(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const Wi=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function So(n){return h(null==n?void 0:n.then)}function Vc(n){return h(n[_e])}function gl(n){return Symbol.asyncIterator&&h(null==n?void 0:n[Symbol.asyncIterator])}function ml(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Go=function uo(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Oa(n){return h(null==n?void 0:n[Go])}function yl(n){return ni(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:i}=yield xt(e.read());if(i)return yield xt(void 0);yield yield xt(r)}}finally{e.releaseLock()}})}function Pa(n){return h(null==n?void 0:n.getReader)}function Or(n){if(n instanceof de)return n;if(null!=n){if(Vc(n))return function Lo(n){return new de(t=>{const e=n[_e]();if(h(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Wi(n))return function Fa(n){return new de(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(So(n))return function zc(n){return new de(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,D)})}(n);if(gl(n))return vl(n);if(Oa(n))return function Cf(n){return new de(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(Pa(n))return function Na(n){return vl(yl(n))}(n)}throw ml(n)}function vl(n){return new de(t=>{(function $u(n,t){var e,r,i,o;return function Ke(n,t,e,r){return new(e||(e=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(E){s(E)}}function l(d){try{c(r.throw(d))}catch(E){s(E)}}function c(d){d.done?o(d.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(d.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Fr(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Cs(n,t,e,r=0,i=!1){const o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Yn(n,t,e=1/0){return h(t)?Yn((r,i)=>K((o,s)=>t(r,o,i,s))(Or(n(r,i))),e):("number"==typeof t&&(e=t),ie((r,i)=>function hi(n,t,e,r,i,o,s,a){const l=[];let c=0,d=0,E=!1;const U=()=>{E&&!l.length&&!c&&t.complete()},W=Ce=>c<r?ne(Ce):l.push(Ce),ne=Ce=>{o&&t.next(Ce),c++;let Pe=!1;Or(e(Ce,d++)).subscribe($(t,Qe=>{null==i||i(Qe),o?W(Qe):t.next(Qe)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(c--;l.length&&c<r;){const Qe=l.shift();s?Cs(t,s,()=>ne(Qe)):ne(Qe)}U()}catch(Qe){t.error(Qe)}}))};return n.subscribe($(t,W,()=>{E=!0,U()})),()=>{null==a||a()}}(r,i,n,e)))}function Es(n=1/0){return Yn(Te,n)}const qo=new de(n=>n.complete());function Gd(n){return n&&h(n.schedule)}function qd(n){return n[n.length-1]}function qg(n){return h(qd(n))?n.pop():void 0}function Jl(n){return Gd(qd(n))?n.pop():void 0}function Jd(n,t=0){return ie((e,r)=>{e.subscribe($(r,i=>Cs(r,n,()=>r.next(i),t),()=>Cs(r,n,()=>r.complete(),t),i=>Cs(r,n,()=>r.error(i),t)))})}function kf(n,t=0){return ie((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function y(n,t){if(!n)throw new Error("Iterable cannot be null");return new de(e=>{Cs(e,t,()=>{const r=n[Symbol.asyncIterator]();Cs(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function Q(n,t){return t?function z(n,t){if(null!=n){if(Vc(n))return function Jg(n,t){return Or(n).pipe(kf(t),Jd(t))}(n,t);if(Wi(n))return function Zd(n,t){return new de(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(So(n))return function Zg(n,t){return Or(n).pipe(kf(t),Jd(t))}(n,t);if(gl(n))return y(n,t);if(Oa(n))return function v(n,t){return new de(e=>{let r;return Cs(e,t,()=>{r=n[Go](),Cs(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void e.error(s)}o?e.complete():e.next(i)},0,!0)}),()=>h(null==r?void 0:r.return)&&r.return()})}(n,t);if(Pa(n))return function O(n,t){return y(yl(n),t)}(n,t)}throw ml(n)}(n,t):Or(n)}function ge(...n){const t=Jl(n),e=function Af(n,t){return"number"==typeof qd(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?Or(r[0]):Es(e)(Q(r,t)):qo}function ke(n){return n<=0?()=>qo:ie((t,e)=>{let r=0;t.subscribe($(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function We(n={}){const{connector:t=(()=>new Ne),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s=null,a=null,l=null,c=0,d=!1,E=!1;const U=()=>{null==a||a.unsubscribe(),a=null},W=()=>{U(),s=l=null,d=E=!1},ne=()=>{const Ce=s;W(),null==Ce||Ce.unsubscribe()};return ie((Ce,Pe)=>{c++,!E&&!d&&U();const Qe=l=null!=l?l:t();Pe.add(()=>{c--,0===c&&!E&&!d&&(a=Ue(ne,i))}),Qe.subscribe(Pe),s||(s=new he({next:je=>Qe.next(je),error:je=>{E=!0,U(),a=Ue(W,e,je),Qe.error(je)},complete:()=>{d=!0,U(),a=Ue(W,r),Qe.complete()}}),Q(Ce).subscribe(s))})(o)}}function Ue(n,t,...e){return!0===t?(n(),null):!1===t?null:t(...e).pipe(ke(1)).subscribe(()=>n())}function Fe(n){for(let t in n)if(n[t]===Fe)return t;throw Error("Could not find renamed property on target object.")}function qe(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function et(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const rt=Fe({__forward_ref__:Fe});function ot(n){return n.__forward_ref__=ot,n.toString=function(){return Ve(this())},n}function ct(n){return pt(n)?n():n}function pt(n){return"function"==typeof n&&n.hasOwnProperty(rt)&&n.__forward_ref__===ot}class Oe extends Error{constructor(t,e){super(function Je(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function $e(n){return"string"==typeof n?n:null==n?"":String(n)}function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$e(n)}function Jn(n,t){const e=t?` in ${t}`:"";throw new Oe(-201,`No provider for ${dt(n)} found${e}`)}function Mi(n,t){null==n&&function Ar(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mn(n){return{providers:n.providers||[],imports:n.imports||[]}}function _l(n){return Yl(n,ho)||Yl(n,ks)}function Yl(n,t){return n.hasOwnProperty(t)?n[t]:null}function Ql(n){return n&&(n.hasOwnProperty(As)||n.hasOwnProperty(qr))?n[As]:null}const ho=Fe({\u0275prov:Fe}),As=Fe({\u0275inj:Fe}),ks=Fe({ngInjectableDef:Fe}),qr=Fe({ngInjectorDef:Fe});var Cn=(()=>((Cn=Cn||{})[Cn.Default=0]="Default",Cn[Cn.Host=1]="Host",Cn[Cn.Self=2]="Self",Cn[Cn.SkipSelf=4]="SkipSelf",Cn[Cn.Optional=8]="Optional",Cn))();let qs;function Ds(n){const t=qs;return qs=n,t}function da(n,t,e){const r=_l(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Cn.Optional?null:void 0!==t?t:void Jn(Ve(n),"Injector")}function Ba(n){return{toString:n}.toString()}var Ts=(()=>((Ts=Ts||{})[Ts.OnPush=0]="OnPush",Ts[Ts.Default=1]="Default",Ts))(),Js=(()=>{return(n=Js||(Js={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Js;var n})();const Fx="undefined"!=typeof globalThis&&globalThis,Qg="undefined"!=typeof window&&window,Nx="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jr=Fx||"undefined"!=typeof global&&global||Qg||Nx,Yd={},Qr=[],Gu=Fe({\u0275cmp:Fe}),Tf=Fe({\u0275dir:Fe}),em=Fe({\u0275pipe:Fe}),yv=Fe({\u0275mod:Fe}),ha=Fe({\u0275fac:Fe}),Xd=Fe({__NG_ELEMENT_ID__:Fe});let Bx=0;function Jt(n){return Ba(()=>{const e={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ts.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Qr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Js.Emulated,id:"c",styles:n.styles||Qr,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,o=n.features,s=n.pipes;return r.id+=Bx++,r.inputs=bv(n.inputs,e),r.outputs=bv(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Mf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(vv):null,r})}function Mf(n){return Uo(n)||function Kc(n){return n[Tf]||null}(n)}function vv(n){return function Gc(n){return n[em]||null}(n)}const If={};function En(n){return Ba(()=>{const t={type:n.type,bootstrap:n.bootstrap||Qr,declarations:n.declarations||Qr,imports:n.imports||Qr,exports:n.exports||Qr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(If[n.id]=n.type),t})}function bv(n,t){if(null==n)return Yd;const e={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),e[i]=r,t&&(t[i]=o)}return e}const bt=Jt;function to(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Uo(n){return n[Gu]||null}function Ms(n,t){const e=n[yv]||null;if(!e&&!0===t)throw new Error(`Type ${Ve(n)} does not have '\u0275mod' property.`);return e}function jr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Nr(n){return Array.isArray(n)&&!0===n[1]}function xl(n){return 0!=(8&n.flags)}function fa(n){return 2==(2&n.flags)}function Jc(n){return 1==(1&n.flags)}function Ua(n){return null!==n.template}function UK(n){return 0!=(512&n[2])}function eh(n,t){return n.hasOwnProperty(ha)?n[ha]:null}class VK{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Si(){return ZR}function ZR(n){return n.type.prototype.ngOnChanges&&(n.setInput=WK),zK}function zK(){const n=XR(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===Yd)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function WK(n,t,e,r){const i=XR(n)||function $K(n,t){return n[YR]=t}(n,{previous:Yd,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[e],l=s[a];o[a]=new VK(l&&l.currentValue,t,s===Yd),n[r]=t}Si.ngInherit=!0;const YR="__ngSimpleChanges__";function XR(n){return n[YR]||null}let $x;function Kx(){return void 0!==$x?$x:"undefined"!=typeof document?document:void 0}function Ki(n){return!!n.listen}const QR={createRenderer:(n,t)=>Kx()};function po(n){for(;Array.isArray(n);)n=n[0];return n}function wv(n,t){return po(t[n])}function Ha(n,t){return po(t[n.index])}function Gx(n,t){return n.data[t]}function Of(n,t){return n[t]}function pa(n,t){const e=t[n];return jr(e)?e:e[0]}function eO(n){return 4==(4&n[2])}function qx(n){return 128==(128&n[2])}function Ju(n,t){return null==t?null:n[t]}function tO(n){n[18]=0}function Jx(n,t){n[5]+=t;let e=n,r=n[3];for(;null!==r&&(1===t&&1===e[5]||-1===t&&0===e[5]);)r[5]+=t,e=r,r=r[3]}const Hn={lFrame:cO(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function nO(){return Hn.bindingsEnabled}function Mt(){return Hn.lFrame.lView}function Pr(){return Hn.lFrame.tView}function In(n){return Hn.lFrame.contextLView=n,n[8]}function Ao(){let n=rO();for(;null!==n&&64===n.type;)n=n.parent;return n}function rO(){return Hn.lFrame.currentTNode}function ec(n,t){const e=Hn.lFrame;e.currentTNode=n,e.isParent=t}function Zx(){return Hn.lFrame.isParent}function Yx(){Hn.lFrame.isParent=!1}function xv(){return Hn.isInCheckNoChangesMode}function Sv(n){Hn.isInCheckNoChangesMode=n}function Os(){const n=Hn.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Pf(){return Hn.lFrame.bindingIndex++}function Yc(n){const t=Hn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function lG(n,t){const e=Hn.lFrame;e.bindingIndex=e.bindingRootIndex=n,Xx(t)}function Xx(n){Hn.lFrame.currentDirectiveIndex=n}function Qx(n){const t=Hn.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function sO(){return Hn.lFrame.currentQueryIndex}function eS(n){Hn.lFrame.currentQueryIndex=n}function uG(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function aO(n,t,e){if(e&Cn.SkipSelf){let i=t,o=n;for(;!(i=i.parent,null!==i||e&Cn.Host||(i=uG(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,n=o}const r=Hn.lFrame=lO();return r.currentTNode=t,r.lView=n,!0}function Cv(n){const t=lO(),e=n[1];Hn.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function lO(){const n=Hn.lFrame,t=null===n?null:n.child;return null===t?cO(n):t}function cO(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function uO(){const n=Hn.lFrame;return Hn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const dO=uO;function Ev(){const n=uO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ps(){return Hn.lFrame.selectedIndex}function Zu(n){Hn.lFrame.selectedIndex=n}function Gi(){const n=Hn.lFrame;return Gx(n.tView,n.selectedIndex)}function Av(){Hn.lFrame.currentNamespace="svg"}function tS(){!function pG(){Hn.lFrame.currentNamespace=null}()}function kv(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks||(n.viewHooks=[])).push(e,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,c)),null!=d&&(n.destroyHooks||(n.destroyHooks=[])).push(e,d)}}function Dv(n,t,e){hO(n,t,3,e)}function Tv(n,t,e,r){(3&n[2])===e&&hO(n,t,e,r)}function nS(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function hO(n,t,e,r){const o=null!=r?r:-1,s=t.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[18]+=65536),(a<o||-1==o)&&(yG(n,e,t,l),n[18]=(4294901760&n[18])+l+2),l++}function yG(n,t,e,r){const i=e[r]<0,o=e[r+1],a=n[i?-e[r]:e[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class rm{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Mv(n,t,e){const r=Ki(n);let i=0;for(;i<e.length;){const o=e[i];if("number"==typeof o){if(0!==o)break;i++;const s=e[i++],a=e[i++],l=e[i++];r?n.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=e[++i];iS(s)?r&&n.setProperty(t,s,a):r?n.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function fO(n){return 3===n||4===n||6===n}function iS(n){return 64===n.charCodeAt(0)}function Iv(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?e=i:0===e||pO(n,e,i,null,-1===e||2===e?t[++r]:null)}}return n}function pO(n,t,e,r,i){let o=0,s=n.length;if(-1===t)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function gO(n){return-1!==n}function Ff(n){return 32767&n}function Nf(n,t){let e=function xG(n){return n>>16}(n),r=t;for(;e>0;)r=r[15],e--;return r}let oS=!0;function Rv(n){const t=oS;return oS=n,t}let SG=0;function om(n,t){const e=aS(n,t);if(-1!==e)return e;const r=t[1];r.firstCreatePass&&(n.injectorIndex=t.length,sS(r.data,n),sS(t,null),sS(r.blueprint,null));const i=Ov(n,t),o=n.injectorIndex;if(gO(i)){const s=Ff(i),a=Nf(i,t),l=a[1].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=i,o}function sS(n,t){n.push(0,0,0,0,0,0,0,0,t)}function aS(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Ov(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;null!==i;){const o=i[1],s=o.type;if(r=2===s?o.declTNode:1===s?i[6]:null,null===r)return-1;if(e++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return-1}function Pv(n,t,e){!function CG(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Xd)&&(r=e[Xd]),null==r&&(r=e[Xd]=SG++);const i=255&r;t.data[n+(i>>5)]|=1<<i}(n,t,e)}function vO(n,t,e){if(e&Cn.Optional)return n;Jn(t,"NodeInjector")}function _O(n,t,e,r){if(e&Cn.Optional&&void 0===r&&(r=null),0==(e&(Cn.Self|Cn.Host))){const i=n[9],o=Ds(void 0);try{return i?i.get(t,r,e&Cn.Optional):da(t,r,e&Cn.Optional)}finally{Ds(o)}}return vO(r,t,e)}function bO(n,t,e,r=Cn.Default,i){if(null!==n){const o=function DG(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Xd)?n[Xd]:void 0;return"number"==typeof t?t>=0?255&t:AG:t}(e);if("function"==typeof o){if(!aO(t,n,r))return r&Cn.Host?vO(i,e,r):_O(t,e,r,i);try{const s=o(r);if(null!=s||r&Cn.Optional)return s;Jn(e)}finally{dO()}}else if("number"==typeof o){let s=null,a=aS(n,t),l=-1,c=r&Cn.Host?t[16][6]:null;for((-1===a||r&Cn.SkipSelf)&&(l=-1===a?Ov(n,t):t[a+8],-1!==l&&SO(r,!1)?(s=t[1],a=Ff(l),t=Nf(l,t)):a=-1);-1!==a;){const d=t[1];if(xO(o,a,d.data)){const E=kG(a,t,e,s,r,c);if(E!==wO)return E}l=t[a+8],-1!==l&&SO(r,t[1].data[a+8]===c)&&xO(o,a,t)?(s=d,a=Ff(l),t=Nf(l,t)):a=-1}}}return _O(t,e,r,i)}const wO={};function AG(){return new Lf(Ao(),Mt())}function kG(n,t,e,r,i,o){const s=t[1],a=s.data[n+8],d=Fv(a,s,e,null==r?fa(a)&&oS:r!=s&&0!=(3&a.type),i&Cn.Host&&o===a);return null!==d?sm(t,s,d,a):wO}function Fv(n,t,e,r,i){const o=n.providerIndexes,s=t.data,a=1048575&o,l=n.directiveStart,d=o>>20,U=i?a+d:n.directiveEnd;for(let W=r?a:a+d;W<U;W++){const ne=s[W];if(W<l&&e===ne||W>=l&&ne.type===e)return W}if(i){const W=s[l];if(W&&Ua(W)&&W.type===e)return l}return null}function sm(n,t,e,r){let i=n[e];const o=t.data;if(function vG(n){return n instanceof rm}(i)){const s=i;s.resolving&&function mt(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${n}${e}`)}(dt(o[e]));const a=Rv(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ds(s.injectImpl):null;aO(n,r,Cn.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&function mG(n,t,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=ZR(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s)}i&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,i),o&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o))}(e,o[e],t)}finally{null!==l&&Ds(l),Rv(a),s.resolving=!1,dO()}}return i}function xO(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function SO(n,t){return!(n&Cn.Self||n&Cn.Host&&t)}class Lf{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return bO(this._tNode,this._lView,t,r,e)}}function Xn(n){return Ba(()=>{const t=n.prototype.constructor,e=t[ha]||lS(t),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[ha]||lS(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function lS(n){return pt(n)?()=>{const t=lS(ct(n));return t&&t()}:eh(n)}function Zs(n){return function EG(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let i=0;for(;i<r;){const o=e[i];if(fO(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof e[i];)i++;else{if(o===t)return e[i+1];i+=2}}}return null}(Ao(),n)}const Uf="__parameters__";function Hf(n,t,e){return Ba(()=>{const r=function cS(n){return function(...e){if(n){const r=n(...e);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,c,d){const E=l.hasOwnProperty(Uf)?l[Uf]:Object.defineProperty(l,Uf,{value:[]})[Uf];for(;E.length<=d;)E.push(null);return(E[d]=E[d]||[]).push(s),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Ot{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=kt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const MG=new Ot("AnalyzeForEntryComponents");function Va(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let r=n[e];Array.isArray(r)?(t===n&&(t=n.slice(0,e)),Va(r,t)):t!==n&&t.push(r)}return t}function tc(n,t){n.forEach(e=>Array.isArray(e)?tc(e,t):t(e))}function EO(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Nv(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function cm(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function ga(n,t,e){let r=Vf(n,t);return r>=0?n[1|r]=e:(r=~r,function OG(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(1===i)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;)n[i]=n[i-2],i--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function dS(n,t){const e=Vf(n,t);if(e>=0)return n[1|e]}function Vf(n,t){return function DO(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}(n,t,1)}const um={},fS="__NG_DI_FLAG__",Bv="ngTempTokenPath",jG=/\n/gm,MO="__source",VG=Fe({provide:String,useValue:Fe});let dm;function IO(n){const t=dm;return dm=n,t}function zG(n,t=Cn.Default){if(void 0===dm)throw new Oe(203,"");return null===dm?da(n,void 0,t):dm.get(n,t&Cn.Optional?null:void 0,t)}function lt(n,t=Cn.Default){return(function fi(){return qs}()||zG)(ct(n),t)}const hm=lt;function pS(n){const t=[];for(let e=0;e<n.length;e++){const r=ct(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Oe(900,"");let i,o=Cn.Default;for(let s=0;s<r.length;s++){const a=r[s],l=WG(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}t.push(lt(i,o))}else t.push(lt(r))}return t}function fm(n,t){return n[fS]=t,n.prototype[fS]=t,n}function WG(n){return n[fS]}const Uv=fm(Hf("Inject",n=>({token:n})),-1),za=fm(Hf("Optional"),8),th=fm(Hf("SkipSelf"),4);let Hv,Vv;function Wf(n){var t;return(null===(t=function mS(){if(void 0===Hv&&(Hv=null,Jr.trustedTypes))try{Hv=Jr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Hv}())||void 0===t?void 0:t.createHTML(n))||n}function LO(n){var t;return(null===(t=function yS(){if(void 0===Vv&&(Vv=null,Jr.trustedTypes))try{Vv=Jr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Vv}())||void 0===t?void 0:t.createHTML(n))||n}class nh{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class rq extends nh{getTypeName(){return"HTML"}}class iq extends nh{getTypeName(){return"Style"}}class oq extends nh{getTypeName(){return"Script"}}class sq extends nh{getTypeName(){return"URL"}}class aq extends nh{getTypeName(){return"ResourceURL"}}function ma(n){return n instanceof nh?n.changingThisBreaksApplicationSecurity:n}function nc(n,t){const e=jO(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function jO(n){return n instanceof nh&&n.getTypeName()||null}class fq{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Wf(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class pq{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const r=this.inertDocument.createElement("body");e.appendChild(r)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Wf(t),e;const r=this.inertDocument.createElement("body");return r.innerHTML=Wf(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const s=e.item(i).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&t.removeAttribute(s)}let r=t.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const mq=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yq=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function gm(n){return(n=String(n)).match(mq)||n.match(yq)?n:"unsafe:"+n}function VO(n){return(n=String(n)).split(",").map(t=>gm(t.trim())).join(", ")}function rc(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function mm(...n){const t={};for(const e of n)for(const r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}const zO=rc("area,br,col,hr,img,wbr"),WO=rc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$O=rc("rp,rt"),vS=mm(zO,mm(WO,rc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mm($O,rc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mm($O,WO)),_S=rc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bS=rc("srcset"),KO=mm(_S,bS,rc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vq=rc("script,style,template");class _q{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!vS.hasOwnProperty(e))return this.sanitizedSomething=!0,!vq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=t.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!KO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;_S[a]&&(l=gm(l)),bS[a]&&(l=VO(l)),this.buf.push(" ",s,'="',GO(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();vS.hasOwnProperty(e)&&!zO.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(GO(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const bq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wq=/([^\#-~ |!])/g;function GO(n){return n.replace(/&/g,"&amp;").replace(bq,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(wq,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zv;function qO(n,t){let e=null;try{zv=zv||function HO(n){const t=new pq(n);return function gq(){try{return!!(new window.DOMParser).parseFromString(Wf(""),"text/html")}catch(n){return!1}}()?new fq(t):t}(n);let r=t?String(t):"";e=zv.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=zv.getInertBodyElement(r)}while(r!==o);return Wf((new _q).sanitizeChildren(wS(e)||e))}finally{if(e){const r=wS(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function wS(n){return"content"in n&&function xq(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var kr=(()=>((kr=kr||{})[kr.NONE=0]="NONE",kr[kr.HTML=1]="HTML",kr[kr.STYLE=2]="STYLE",kr[kr.SCRIPT=3]="SCRIPT",kr[kr.URL=4]="URL",kr[kr.RESOURCE_URL=5]="RESOURCE_URL",kr))();function Xu(n){const t=ym();return t?LO(t.sanitize(kr.HTML,n)||""):nc(n,"HTML")?LO(ma(n)):qO(Kx(),$e(n))}function rh(n){const t=ym();return t?t.sanitize(kr.URL,n)||"":nc(n,"URL")?ma(n):gm($e(n))}function ym(){const n=Mt();return n&&n[12]}const YO="__ngContext__";function hs(n,t){n[YO]=t}function SS(n){const t=function vm(n){return n[YO]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function ES(n){return n.ngOriginalError}function Bq(n,...t){n.error(...t)}class ic{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),r=function Lq(n){return n&&n.ngErrorLogger||Bq}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&ES(t);for(;e&&ES(e);)e=ES(e);return e||null}}const qq=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jr))();function AS(n){return n.ownerDocument.defaultView}function _m(n){return n.ownerDocument}function oc(n){return n instanceof Function?n():n}var ya=(()=>((ya=ya||{})[ya.Important=1]="Important",ya[ya.DashCase=2]="DashCase",ya))();function DS(n,t){return undefined(n,t)}function bm(n){const t=n[3];return Nr(t)?t[3]:t}function TS(n){return sP(n[13])}function MS(n){return sP(n[4])}function sP(n){for(;null!==n&&!Nr(n);)n=n[4];return n}function Kf(n,t,e,r,i){if(null!=r){let o,s=!1;Nr(r)?o=r:jr(r)&&(s=!0,r=r[0]);const a=po(r);0===n&&null!==e?null==i?hP(t,e,a):ih(t,e,a,i||null,!0):1===n&&null!==e?ih(t,e,a,i||null,!0):2===n?function _P(n,t,e){const r=Wv(n,t);r&&function sJ(n,t,e,r){Ki(n)?n.removeChild(t,e,r):t.removeChild(e)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=o&&function cJ(n,t,e,r,i){const o=e[7];o!==po(e)&&Kf(t,n,r,o,i);for(let a=10;a<e.length;a++){const l=e[a];wm(l[1],l,n,t,r,o)}}(t,n,o,e,i)}}function RS(n,t,e){if(Ki(n))return n.createElement(t,e);{const r=null!==e?function JK(n){const t=n.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(e):null;return null===r?n.createElement(t):n.createElementNS(r,t)}}function lP(n,t){const e=n[9],r=e.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Jx(i,-1)),e.splice(r,1)}function OS(n,t){if(n.length<=10)return;const e=10+t,r=n[e];if(r){const i=r[17];null!==i&&i!==n&&lP(i,r),t>0&&(n[e-1][4]=r[4]);const o=Nv(n,10+t);!function Xq(n,t){wm(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function cP(n,t){if(!(256&t[2])){const e=t[11];Ki(e)&&e.destroyNode&&wm(n,t,e,3,null,null),function tJ(n){let t=n[13];if(!t)return PS(n[1],n);for(;t;){let e=null;if(jr(t))e=t[13];else{const r=t[10];r&&(e=r)}if(!e){for(;t&&!t[4]&&t!==n;)jr(t)&&PS(t[1],t),t=t[3];null===t&&(t=n),jr(t)&&PS(t[1],t),e=t&&t[4]}t=e}}(t)}}function PS(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function oJ(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const i=t[e[r]];if(!(i instanceof rm)){const o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,t),function iJ(n,t){const e=n.cleanup,r=t[7];let i=-1;if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+1],a="function"==typeof s?s(t):po(t[s]),l=r[i=e[o+2]],c=e[o+3];"boolean"==typeof c?a.removeEventListener(e[o],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{const s=r[i=e[o+1]];e[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(n,t),1===t[1].type&&Ki(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Nr(t[3])){e!==t[3]&&lP(e,t);const r=t[19];null!==r&&r.detachView(n)}}}function uP(n,t,e){return function dP(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Js.None||i===Js.Emulated)return null}return Ha(r,e)}(n,t.parent,e)}function ih(n,t,e,r,i){Ki(n)?n.insertBefore(t,e,r,i):t.insertBefore(e,r,i)}function hP(n,t,e){Ki(n)?n.appendChild(t,e):t.appendChild(e)}function fP(n,t,e,r,i){null!==r?ih(n,t,e,r,i):hP(n,t,e)}function Wv(n,t){return Ki(n)?n.parentNode(t):t.parentNode}function pP(n,t,e){return mP(n,t,e)}let mP=function gP(n,t,e){return 40&n.type?Ha(n,e):null};function $v(n,t,e,r){const i=uP(n,r,t),o=t[11],a=pP(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(e))for(let l=0;l<e.length;l++)fP(o,i,e[l],a,!1);else fP(o,i,e,a,!1)}function Kv(n,t){if(null!==t){const e=t.type;if(3&e)return Ha(t,n);if(4&e)return NS(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return Kv(n,r);{const i=n[t.index];return Nr(i)?NS(-1,i):po(i)}}if(32&e)return DS(t,n)()||po(n[t.index]);{const r=vP(n,t);return null!==r?Array.isArray(r)?r[0]:Kv(bm(n[16]),r):Kv(n,t.next)}}return null}function vP(n,t){return null!==t?n[16][6].projection[t.projection]:null}function NS(n,t){const e=10+n+1;if(e<t.length){const r=t[e],i=r[1].firstChild;if(null!==i)return Kv(r,i)}return t[7]}function LS(n,t,e,r,i,o,s){for(;null!=e;){const a=r[e.index],l=e.type;if(s&&0===t&&(a&&hs(po(a),r),e.flags|=4),64!=(64&e.flags))if(8&l)LS(n,t,e.child,r,i,o,!1),Kf(t,n,i,a,o);else if(32&l){const c=DS(e,r);let d;for(;d=c();)Kf(t,n,i,d,o);Kf(t,n,i,a,o)}else 16&l?bP(n,t,r,e,i,o):Kf(t,n,i,a,o);e=s?e.projectionNext:e.next}}function wm(n,t,e,r,i,o){LS(e,r,n.firstChild,t,i,o,!1)}function bP(n,t,e,r,i,o){const s=e[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Kf(t,n,i,l[c],o);else LS(n,t,l,s[3],i,o,!0)}function wP(n,t,e){Ki(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function BS(n,t,e){Ki(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function xP(n,t,e){let r=n.length;for(;;){const i=n.indexOf(t,e);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}const SP="ng-template";function dJ(n,t,e){let r=0;for(;r<n.length;){let i=n[r++];if(e&&"class"===i){if(i=n[r],-1!==xP(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function CP(n){return 4===n.type&&n.value!==SP}function hJ(n,t,e){return t===(4!==n.type||e?n.value:SP)}function fJ(n,t,e){let r=4;const i=n.attrs||[],o=function mJ(n){for(let t=0;t<n.length;t++)if(fO(n[t]))return t;return n.length}(i);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!hJ(n,l,e)||""===l&&1===t.length){if(Sl(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==n.attrs){if(!dJ(n.attrs,c,e)){if(Sl(r))return!1;s=!0}continue}const E=pJ(8&r?"class":l,i,CP(n),e);if(-1===E){if(Sl(r))return!1;s=!0;continue}if(""!==c){let U;U=E>o?"":i[E+1].toLowerCase();const W=8&r?U:null;if(W&&-1!==xP(W,c,0)||2&r&&c!==U){if(Sl(r))return!1;s=!0}}}}else{if(!s&&!Sl(r)&&!Sl(l))return!1;if(s&&Sl(l))continue;s=!1,r=l|1&r}}return Sl(r)||s}function Sl(n){return 0==(1&n)}function pJ(n,t,e,r){if(null===t)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){const s=t[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function yJ(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function EP(n,t,e=!1){for(let r=0;r<t.length;r++)if(fJ(n,t[r],e))return!0;return!1}function vJ(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function AP(n,t){return n?":not("+t.trim()+")":t}function _J(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Sl(s)&&(t+=AP(o,i),i=""),r=s,o=o||!Sl(r);e++}return""!==i&&(t+=AP(o,i)),t}const Zn={};function it(n){kP(Pr(),Mt(),Ps()+n,xv())}function kP(n,t,e,r){if(!r)if(3==(3&t[2])){const o=n.preOrderCheckHooks;null!==o&&Dv(t,o,e)}else{const o=n.preOrderHooks;null!==o&&Tv(t,o,0,e)}Zu(e)}function Gv(n,t){return n<<17|t<<2}function Cl(n){return n>>17&32767}function US(n){return 2|n}function Xc(n){return(131068&n)>>2}function jS(n,t){return-131069&n|t<<2}function HS(n){return 1|n}function BP(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];if(-1!==o){const s=n.data[o];eS(i),s.contentQueries(2,t[o],o)}}}function xm(n,t,e,r,i,o,s,a,l,c){const d=t.blueprint.slice();return d[0]=i,d[2]=140|r,tO(d),d[3]=d[15]=n,d[8]=e,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[16]=2==t.type?n[16]:d,d}function Gf(n,t,e,r,i){let o=n.data[t];if(null===o)o=function ZS(n,t,e,r,i){const o=rO(),s=Zx(),l=n.data[t]=function LJ(n,t,e,r,i,o){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,r,i);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(n,t,e,r,i),function aG(){return Hn.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=e,o.value=r,o.attrs=i;const s=function nm(){const n=Hn.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ec(o,!0),o}function qf(n,t,e,r){if(0===e)return-1;const i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Sm(n,t,e){Cv(t);try{const r=n.viewQuery;null!==r&&oC(1,r,e);const i=n.template;null!==i&&UP(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&BP(n,t),n.staticViewQueries&&oC(2,n.viewQuery,e);const o=n.components;null!==o&&function PJ(n,t){for(let e=0;e<t.length;e++)tZ(n,t[e])}(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[2]&=-5,Ev()}}function Jf(n,t,e,r){const i=t[2];if(256==(256&i))return;Cv(t);const o=xv();try{tO(t),function iO(n){return Hn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&UP(n,t,e,2,r);const s=3==(3&i);if(!o)if(s){const c=n.preOrderCheckHooks;null!==c&&Dv(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Tv(t,c,0,null),nS(t,0)}if(function QJ(n){for(let t=TS(n);null!==t;t=MS(t)){if(!t[2])continue;const e=t[9];for(let r=0;r<e.length;r++){const i=e[r],o=i[3];0==(1024&i[2])&&Jx(o,1),i[2]|=1024}}}(t),function XJ(n){for(let t=TS(n);null!==t;t=MS(t))for(let e=10;e<t.length;e++){const r=t[e],i=r[1];qx(r)&&Jf(i,r,i.template,r[8])}}(t),null!==n.contentQueries&&BP(n,t),!o)if(s){const c=n.contentCheckHooks;null!==c&&Dv(t,c)}else{const c=n.contentHooks;null!==c&&Tv(t,c,1),nS(t,1)}!function RJ(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const i=e[r];if(i<0)Zu(~i);else{const o=i,s=e[++r],a=e[++r];lG(s,o),a(2,t[o])}}}finally{Zu(-1)}}(n,t);const a=n.components;null!==a&&function OJ(n,t){for(let e=0;e<t.length;e++)eZ(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&oC(2,l,r),!o)if(s){const c=n.viewCheckHooks;null!==c&&Dv(t,c)}else{const c=n.viewHooks;null!==c&&Tv(t,c,2),nS(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Jx(t[3],-1))}finally{Ev()}}function FJ(n,t,e,r){const i=t[10],o=!xv(),s=eO(t);try{o&&!s&&i.begin&&i.begin(),s&&Sm(n,t,r),Jf(n,t,e,r)}finally{o&&!s&&i.end&&i.end()}}function UP(n,t,e,r,i){const o=Ps(),s=2&r;try{Zu(-1),s&&t.length>20&&kP(n,t,20,xv()),e(r,i)}finally{Zu(o)}}function jP(n,t,e){if(xl(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,e[o],o)}}}function YS(n,t,e){!nO()||(function WJ(n,t,e,r){const i=e.directiveStart,o=e.directiveEnd;n.firstCreatePass||om(e,t),hs(r,t);const s=e.initialInputs;for(let a=i;a<o;a++){const l=n.data[a],c=Ua(l);c&&JJ(t,e,l);const d=sm(t,n,a,e);hs(d,t),null!==s&&ZJ(0,a-i,d,l,0,s),c&&(pa(e.index,t)[8]=d)}}(n,t,e,Ha(e,t)),128==(128&e.flags)&&function $J(n,t,e){const r=e.directiveStart,i=e.directiveEnd,s=e.index,a=function cG(){return Hn.lFrame.currentDirectiveIndex}();try{Zu(s);for(let l=r;l<i;l++){const c=n.data[l],d=t[l];Xx(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&qP(c,d)}}finally{Zu(-1),Xx(a)}}(n,t,e))}function XS(n,t,e=Ha){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?e(t,n):n[s];n[i++]=a}}}function HP(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Zv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Zv(n,t,e,r,i,o,s,a,l,c){const d=20+r,E=d+i,U=function NJ(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:Zn);return e}(d,E),W="function"==typeof c?c():c;return U[1]={type:n,blueprint:U,template:e,queries:null,viewQuery:a,declTNode:t,data:U.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:W,incompleteFirstPass:!1}}function WP(n,t,e,r){const i=eF(t);null===e?i.push(r):(i.push(e),n.firstCreatePass&&tF(n).push(r,i.length-1))}function $P(n,t,e){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(e=null===e?{}:e).hasOwnProperty(r)?e[r].push(t,i):e[r]=[t,i]}return e}function va(n,t,e,r,i,o,s,a){const l=Ha(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[r])?(iF(n,e,d,r,i),fa(t)&&function jJ(n,t){const e=pa(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(r=function UJ(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,t.value||"",r):i,Ki(o)?o.setProperty(l,r,i):iS(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function QS(n,t,e,r){let i=!1;if(nO()){const o=function KJ(n,t,e){const r=n.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];EP(e,s.selectors,!1)&&(i||(i=[]),Pv(om(e,t),n,s.type),Ua(s)?(JP(n,e),i.unshift(s)):i.push(s))}return i}(n,t,e),s=null===r?null:{"":-1};if(null!==o){i=!0,ZP(e,n.data.length,o.length);for(let d=0;d<o.length;d++){const E=o[d];E.providersResolver&&E.providersResolver(E)}let a=!1,l=!1,c=qf(n,t,o.length,null);for(let d=0;d<o.length;d++){const E=o[d];e.mergedAttrs=Iv(e.mergedAttrs,E.hostAttrs),YP(n,e,t,c,E),qJ(c,E,s),null!==E.contentQueries&&(e.flags|=8),(null!==E.hostBindings||null!==E.hostAttrs||0!==E.hostVars)&&(e.flags|=128);const U=E.type.prototype;!a&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!l&&(U.ngOnChanges||U.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function BJ(n,t){const r=t.directiveEnd,i=n.data,o=t.attrs,s=[];let a=null,l=null;for(let c=t.directiveStart;c<r;c++){const d=i[c],E=d.inputs,U=null===o||CP(t)?null:YJ(E,o);s.push(U),a=$P(E,c,a),l=$P(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}(n,e)}s&&function GJ(n,t,e){if(t){const r=n.localNames=[];for(let i=0;i<t.length;i+=2){const o=e[t[i+1]];if(null==o)throw new Oe(-301,!1);r.push(t[i],o)}}}(e,r,s)}return e.mergedAttrs=Iv(e.mergedAttrs,e.attrs),i}function GP(n,t,e,r,i,o){const s=o.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~t.index;(function zJ(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(r,i,s)}}function qP(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function JP(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function qJ(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Ua(t)&&(e[""]=n)}}function ZP(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function YP(n,t,e,r,i){n.data[r]=i;const o=i.factory||(i.factory=eh(i.type)),s=new rm(o,Ua(i),null);n.blueprint[r]=s,e[r]=s,GP(n,t,0,r,qf(n,e,i.hostVars,Zn),i)}function JJ(n,t,e){const r=Ha(t,n),i=HP(e),o=n[10],s=Yv(n,xm(n,i,null,e.onPush?64:16,r,t,o,o.createRenderer(r,e),null,null));n[t.index]=s}function sc(n,t,e,r,i,o){const s=Ha(n,t);!function eC(n,t,e,r,i,o,s){if(null==o)Ki(n)?n.removeAttribute(t,i,e):t.removeAttribute(i);else{const a=null==s?$e(o):s(o,r||"",i);Ki(n)?n.setAttribute(t,i,a,e):e?t.setAttributeNS(e,i,a):t.setAttribute(i,a)}}(t[11],s,o,n.value,e,r,i)}function ZJ(n,t,e,r,i,o){const s=o[t];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],d=s[l++],E=s[l++];null!==a?r.setInput(e,E,c,d):e[d]=E}}}function YJ(n,t){let e=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===e&&(e=[]),e.push(i,n[i],t[r+1])),r+=2}else r+=2;else r+=4}return e}function XP(n,t,e,r){return new Array(n,!0,!1,t,null,0,r,e,null,null)}function eZ(n,t){const e=pa(t,n);if(qx(e)){const r=e[1];80&e[2]?Jf(r,e,r.template,e[8]):e[5]>0&&tC(e)}}function tC(n){for(let r=TS(n);null!==r;r=MS(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const s=o[1];Jf(s,o,s.template,o[8])}else o[5]>0&&tC(o)}const e=n[1].components;if(null!==e)for(let r=0;r<e.length;r++){const i=pa(e[r],n);qx(i)&&i[5]>0&&tC(i)}}function tZ(n,t){const e=pa(t,n),r=e[1];(function nZ(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Sm(r,e,e[8])}function Yv(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function nC(n){for(;n;){n[2]|=64;const t=bm(n);if(UK(n)&&!t)return n;n=t}return null}function iC(n,t,e){const r=t[10];r.begin&&r.begin();try{Jf(n,t,n.template,e)}catch(i){throw rF(t,i),i}finally{r.end&&r.end()}}function QP(n){!function rC(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],r=SS(e),i=r[1];FJ(i,r,i.template,e)}}(n[8])}function oC(n,t,e){eS(0),t(n,e)}const sZ=(()=>Promise.resolve(null))();function eF(n){return n[7]||(n[7]=[])}function tF(n){return n.cleanup||(n.cleanup=[])}function nF(n,t,e){return(null===n||Ua(n))&&(e=function XK(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function rF(n,t){const e=n[9],r=e?e.get(ic,null):null;r&&r.handleError(t)}function iF(n,t,e,r,i){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],l=t[s],c=n.data[s];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Qc(n,t,e){const r=wv(t,n);!function aP(n,t,e){Ki(n)?n.setValue(t,e):t.textContent=e}(n[11],r,e)}function Xv(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=et(i,a):2==o&&(r=et(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}const sC=new Ot("INJECTOR",-1);class oF{get(t,e=um){if(e===um){const r=new Error(`NullInjectorError: No provider for ${Ve(t)}!`);throw r.name="NullInjectorError",r}return e}}const aC=new Ot("Set Injector scope."),Cm={},cZ={};let lC;function sF(){return void 0===lC&&(lC=new oF),lC}function aF(n,t=null,e=null,r){const i=lF(n,t,e,r);return i._resolveInjectorDefTypes(),i}function lF(n,t=null,e=null,r){return new uZ(n,e,t||sF(),r)}class uZ{constructor(t,e,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];e&&tc(e,a=>this.processProvider(a,t,e)),tc([t],a=>this.processInjectorType(a,[],o)),this.records.set(sC,Zf(void 0,this));const s=this.records.get(aC);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:Ve(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=um,r=Cn.Default){this.assertNotDestroyed();const i=IO(this),o=Ds(void 0);try{if(!(r&Cn.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function vZ(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ot}(t)&&_l(t);a=l&&this.injectableDefInScope(l)?Zf(cC(t),Cm):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&Cn.Self?sF():this.parent).get(t,e=r&Cn.Optional&&e===um?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[Bv]=s[Bv]||[]).unshift(Ve(t)),i)throw s;return function $G(n,t,e,r){const i=n[Bv];throw t[MO]&&i.unshift(t[MO]),n.message=function KG(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=Ve(t);if(Array.isArray(t))i=t.map(Ve).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ve(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(jG,"\n  ")}`}("\n"+n.message,i,e,r),n.ngTokenPath=i,n[Bv]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{Ds(o),IO(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,i)=>t.push(Ve(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(t,e,r){if(!(t=ct(t)))return!1;let i=Ql(t);const o=null==i&&t.ngModule||void 0,s=void 0===o?t:o,a=-1!==r.indexOf(s);if(void 0!==o&&(i=Ql(o)),null==i)return!1;if(null!=i.imports&&!a){let d;r.push(s);try{tc(i.imports,E=>{this.processInjectorType(E,e,r)&&(void 0===d&&(d=[]),d.push(E))})}finally{}if(void 0!==d)for(let E=0;E<d.length;E++){const{ngModule:U,providers:W}=d[E];tc(W,ne=>this.processProvider(ne,U,W||Qr))}}this.injectorDefTypes.add(s);const l=eh(s)||(()=>new s);this.records.set(s,Zf(l,Cm));const c=i.providers;if(null!=c&&!a){const d=t;tc(c,E=>this.processProvider(E,d,c))}return void 0!==o&&void 0!==t.providers}processProvider(t,e,r){let i=Yf(t=ct(t))?t:ct(t&&t.provide);const o=function hZ(n,t,e){return uF(n)?Zf(void 0,n.useValue):Zf(cF(n),Cm)}(t);if(Yf(t)||!0!==t.multi)this.records.get(i);else{let s=this.records.get(i);s||(s=Zf(void 0,Cm,!0),s.factory=()=>pS(s.multi),this.records.set(i,s)),i=t,s.multi.push(t)}this.records.set(i,o)}hydrate(t,e){return e.value===Cm&&(e.value=cZ,e.value=e.factory()),"object"==typeof e.value&&e.value&&function yZ(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ct(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function cC(n){const t=_l(n),e=null!==t?t.factory:eh(n);if(null!==e)return e;if(n instanceof Ot)throw new Oe(204,!1);if(n instanceof Function)return function dZ(n){const t=n.length;if(t>0)throw cm(t,"?"),new Oe(204,!1);const e=function Xl(n){const t=n&&(n[ho]||n[ks]);if(t){const e=function Df(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Oe(204,!1)}function cF(n,t,e){let r;if(Yf(n)){const i=ct(n);return eh(i)||cC(i)}if(uF(n))r=()=>ct(n.useValue);else if(function pZ(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...pS(n.deps||[]));else if(function fZ(n){return!(!n||!n.useExisting)}(n))r=()=>lt(ct(n.useExisting));else{const i=ct(n&&(n.useClass||n.provide));if(!function mZ(n){return!!n.deps}(n))return eh(i)||cC(i);r=()=>new i(...pS(n.deps))}return r}function Zf(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function uF(n){return null!==n&&"object"==typeof n&&VG in n}function Yf(n){return"function"==typeof n}let Ci=(()=>{class n{static create(e,r){var i;if(Array.isArray(e))return aF({name:""},r,e,"");{const o=null!==(i=e.name)&&void 0!==i?i:"";return aF({name:o},e.parent,e.providers,o)}}}return n.THROW_IF_NOT_FOUND=um,n.NULL=new oF,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>lt(sC)}),n.__NG_ELEMENT_ID__=-1,n})();function AZ(n,t){kv(SS(n)[1],Ao())}function Ht(n){let t=function xF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let i;if(Ua(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Oe(903,"");i=t.\u0275dir}if(i){if(e){r.push(i);const s=n;s.inputs=hC(n.inputs),s.declaredInputs=hC(n.declaredInputs),s.outputs=hC(n.outputs);const a=i.hostBindings;a&&MZ(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&DZ(n,l),c&&TZ(n,c),qe(n.inputs,i.inputs),qe(n.declaredInputs,i.declaredInputs),qe(n.outputs,i.outputs),Ua(i)&&i.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Ht&&(e=!1)}}t=Object.getPrototypeOf(t)}!function kZ(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Iv(i.hostAttrs,e=Iv(e,i.hostAttrs))}}(r)}function hC(n){return n===Yd?{}:n===Qr?[]:n}function DZ(n,t){const e=n.viewQuery;n.viewQuery=e?(r,i)=>{t(r,i),e(r,i)}:t}function TZ(n,t){const e=n.contentQueries;n.contentQueries=e?(r,i,o)=>{t(r,i,o),e(r,i,o)}:t}function MZ(n,t){const e=n.hostBindings;n.hostBindings=e?(r,i)=>{t(r,i),e(r,i)}:t}let Qv=null;function Xf(){if(!Qv){const n=Jr.Symbol;if(n&&n.iterator)Qv=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Qv=r)}}}return Qv}function Em(n){return!!fC(n)&&(Array.isArray(n)||!(n instanceof Map)&&Xf()in n)}function fC(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ac(n,t,e){return n[t]=e}function fs(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function oh(n,t,e,r){const i=fs(n,t,e);return fs(n,t+1,r)||i}function tr(n,t,e,r){const i=Mt();return fs(i,Pf(),t)&&(Pr(),sc(Gi(),i,n,t,e,r)),tr}function ep(n,t,e,r){return fs(n,Pf(),e)?t+$e(e)+r:Zn}function tp(n,t,e,r,i,o){const a=oh(n,function Zc(){return Hn.lFrame.bindingIndex}(),e,i);return Yc(2),a?t+$e(e)+r+$e(i)+o:Zn}function vt(n,t,e,r,i,o,s,a){const l=Mt(),c=Pr(),d=n+20,E=c.firstCreatePass?function LZ(n,t,e,r,i,o,s,a,l){const c=t.consts,d=Gf(t,n,4,s||null,Ju(c,a));QS(t,e,d,Ju(c,l)),kv(t,d);const E=d.tViews=Zv(2,d,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),E.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,e,r,i,o,s):c.data[d];ec(E,!1);const U=l[11].createComment("");$v(c,l,U,E),hs(U,l),Yv(l,l[d]=XP(U,l,U,E)),Jc(E)&&YS(c,l,E),null!=s&&XS(l,E,a)}function Al(n){return Of(function sG(){return Hn.lFrame.contextLView}(),20+n)}function xe(n,t=Cn.Default){const e=Mt();return null===e?lt(n,t):bO(Ao(),e,ct(n),t)}function km(){throw new Error("invalid")}function ut(n,t,e){const r=Mt();return fs(r,Pf(),t)&&va(Pr(),Gi(),r,n,t,r[11],e,!1),ut}function vC(n,t,e,r,i){const s=i?"class":"style";iF(n,e,t.inputs[s],s,r)}function Le(n,t,e,r){const i=Mt(),o=Pr(),s=20+n,a=i[11],l=i[s]=RS(a,t,function gG(){return Hn.lFrame.currentNamespace}()),c=o.firstCreatePass?function iY(n,t,e,r,i,o,s){const a=t.consts,c=Gf(t,n,2,i,Ju(a,o));return QS(t,e,c,Ju(a,s)),null!==c.attrs&&Xv(c,c.attrs,!1),null!==c.mergedAttrs&&Xv(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,0,t,e,r):o.data[s];ec(c,!0);const d=c.mergedAttrs;null!==d&&Mv(a,l,d);const E=c.classes;null!==E&&BS(a,l,E);const U=c.styles;return null!==U&&wP(a,l,U),64!=(64&c.flags)&&$v(o,i,l,c),0===function tG(){return Hn.lFrame.elementDepthCount}()&&hs(l,i),function nG(){Hn.lFrame.elementDepthCount++}(),Jc(c)&&(YS(o,i,c),jP(o,c,i)),null!==r&&XS(i,c),Le}function Be(){let n=Ao();Zx()?Yx():(n=n.parent,ec(n,!1));const t=n;!function rG(){Hn.lFrame.elementDepthCount--}();const e=Pr();return e.firstCreatePass&&(kv(e,n),xl(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function bG(n){return 0!=(16&n.flags)}(t)&&vC(e,t,Mt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function wG(n){return 0!=(32&n.flags)}(t)&&vC(e,t,Mt(),t.stylesWithoutHost,!1),Be}function qt(n,t,e,r){return Le(n,t,e,r),Be(),qt}function Ii(n,t,e){const r=Mt(),i=Pr(),o=n+20,s=i.firstCreatePass?function oY(n,t,e,r,i){const o=t.consts,s=Ju(o,r),a=Gf(t,n,8,"ng-container",s);return null!==s&&Xv(a,s,!0),QS(t,e,a,Ju(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,i,r,t,e):i.data[o];ec(s,!0);const a=r[o]=r[11].createComment("");return $v(i,r,a,s),hs(a,r),Jc(s)&&(YS(i,r,s),jP(i,s,r)),null!=e&&XS(r,s),Ii}function Ri(){let n=Ao();const t=Pr();return Zx()?Yx():(n=n.parent,ec(n,!1)),t.firstCreatePass&&(kv(t,n),xl(n)&&t.queries.elementEnd(n)),Ri}function _a(n,t,e){return Ii(n,t,e),Ri(),_a}function Dr(){return Mt()}function Dm(n){return!!n&&"function"==typeof n.then}function VF(n){return!!n&&"function"==typeof n.subscribe}const _C=VF;function At(n,t,e,r){const i=Mt(),o=Pr(),s=Ao();return zF(o,i,i[11],s,n,t,!!e,r),At}function bC(n,t){const e=Ao(),r=Mt(),i=Pr();return zF(i,r,nF(Qx(i.data),e,r),e,n,t,!1),bC}function zF(n,t,e,r,i,o,s,a){const l=Jc(r),d=n.firstCreatePass&&tF(n),E=t[8],U=eF(t);let W=!0;if(3&r.type||a){const Pe=Ha(r,t),Qe=a?a(Pe):Pe,je=U.length,at=a?yt=>a(po(yt[r.index])):r.index;if(Ki(e)){let yt=null;if(!a&&l&&(yt=function sY(n,t,e,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===e&&i[o+1]===r){const a=t[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,t,i,r.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=o,yt.__ngLastListenerFn__=o,W=!1;else{o=wC(r,t,E,o,!1);const Ct=e.listen(Qe,i,o);U.push(o,Ct),d&&d.push(i,at,je,je+1)}}else o=wC(r,t,E,o,!0),Qe.addEventListener(i,o,s),U.push(o),d&&d.push(i,at,je,s)}else o=wC(r,t,E,o,!1);const ne=r.outputs;let Ce;if(W&&null!==ne&&(Ce=ne[i])){const Pe=Ce.length;if(Pe)for(let Qe=0;Qe<Pe;Qe+=2){const Vt=t[Ce[Qe]][Ce[Qe+1]].subscribe(o),yn=U.length;U.push(o,Vt),d&&d.push(i,r.index,yn,-(yn+1))}}}function WF(n,t,e,r){try{return!1!==e(r)}catch(i){return rF(n,i),!1}}function wC(n,t,e,r,i){return function o(s){if(s===Function)return r;const a=2&n.flags?pa(n.index,t):t;0==(32&t[2])&&nC(a);let l=WF(t,0,r,s),c=o.__ngNextListenerFn__;for(;c;)l=WF(t,0,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function _t(n=1){return function dG(n){return(Hn.lFrame.contextLView=function hG(n,t){for(;n>0;)t=t[15],n--;return t}(n,Hn.lFrame.contextLView))[8]}(n)}function aY(n,t){let e=null;const r=function gJ(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let i=0;i<t.length;i++){const o=t[i];if("*"!==o){if(null===r?EP(n,o,!0):vJ(r,o))return i}else e=i}return e}function no(n){const t=Mt()[16][6];if(!t.projection){const r=t.projection=cm(n?n.length:1,null),i=r.slice();let o=t.child;for(;null!==o;){const s=n?aY(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function ur(n,t=0,e){const r=Mt(),i=Pr(),o=Gf(i,20+n,16,null,e||null);null===o.projection&&(o.projection=t),Yx(),64!=(64&o.flags)&&function lJ(n,t,e){bP(t[11],0,t,e,uP(n,e,t),pP(e.parent||t[6],e,t))}(i,r,o)}function cp(n,t,e){return up(n,"",t,"",e),cp}function up(n,t,e,r,i){const o=Mt(),s=ep(o,t,e,r);return s!==Zn&&va(Pr(),Gi(),o,n,s,o[11],i,!1),up}function QF(n,t,e,r,i){const o=n[e+1],s=null===t;let a=r?Cl(o):Xc(o),l=!1;for(;0!==a&&(!1===l||s);){const d=n[a+1];uY(n[a],t)&&(l=!0,n[a+1]=r?HS(d):US(d)),a=r?Cl(d):Xc(d)}l&&(n[e+1]=r?US(o):HS(o))}function uY(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Vf(n,t)>=0}const Do={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function eN(n){return n.substring(Do.key,Do.keyEnd)}function tN(n,t){const e=Do.textEnd;return e===t?-1:(t=Do.keyEnd=function pY(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Do.key=t,e),dp(n,t,e))}function dp(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function $a(n,t,e){return kl(n,t,e,!1),$a}function br(n,t){return kl(n,t,null,!0),br}function Ho(n){!function Dl(n,t,e,r){const i=Pr(),o=Yc(2);i.firstUpdatePass&&aN(i,null,o,r);const s=Mt();if(e!==Zn&&fs(s,o,e)){const a=i.data[Ps()];if(dN(a,r)&&!sN(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=et(l,e||"")),vC(i,a,s,e,r)}else!function SY(n,t,e,r,i,o,s,a){i===Zn&&(i=Qr);let l=0,c=0,d=0<i.length?i[0]:null,E=0<o.length?o[0]:null;for(;null!==d||null!==E;){const U=l<i.length?i[l+1]:void 0,W=c<o.length?o[c+1]:void 0;let Ce,ne=null;d===E?(l+=2,c+=2,U!==W&&(ne=E,Ce=W)):null===E||null!==d&&d<E?(l+=2,ne=d):(c+=2,ne=E,Ce=W),null!==ne&&cN(n,t,e,r,ne,Ce,s,a),d=l<i.length?i[l]:null,E=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function xY(n,t,e){if(null==e||""===e)return Qr;const r=[],i=ma(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(n,t,e),r,o)}}(ga,cc,n,!0)}function cc(n,t){for(let e=function hY(n){return function rN(n){Do.key=0,Do.keyEnd=0,Do.value=0,Do.valueEnd=0,Do.textEnd=n.length}(n),tN(n,dp(n,0,Do.textEnd))}(t);e>=0;e=tN(t,e))ga(n,eN(t),!0)}function kl(n,t,e,r){const i=Mt(),o=Pr(),s=Yc(2);o.firstUpdatePass&&aN(o,n,s,r),t!==Zn&&fs(i,s,t)&&cN(o,o.data[Ps()],i,i[11],n,i[s+1]=function CY(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Ve(ma(n)))),n}(t,e),r,s)}function sN(n,t){return t>=n.expandoStartIndex}function aN(n,t,e,r){const i=n.data;if(null===i[e+1]){const o=i[Ps()],s=sN(n,e);dN(o,r)&&null===t&&!s&&(t=!1),t=function vY(n,t,e,r){const i=Qx(n);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(e=Tm(e=xC(null,n,t,e,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==i)if(e=xC(i,n,t,e,r),null===o){let l=function _Y(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Xc(r))return n[Cl(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=xC(null,n,t,l[1],r),l=Tm(l,t.attrs,r),function bY(n,t,e,r){n[Cl(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else o=function wY(n,t,e){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Tm(r,n[o].hostAttrs,e);return Tm(r,t.attrs,e)}(n,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),e}(i,o,t,r),function lY(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Cl(s),l=Xc(s);n[r]=e;let d,c=!1;if(Array.isArray(e)){const E=e;d=E[1],(null===d||Vf(E,d)>0)&&(c=!0)}else d=e;if(i)if(0!==l){const U=Cl(n[a+1]);n[r+1]=Gv(U,a),0!==U&&(n[U+1]=jS(n[U+1],r)),n[a+1]=function xJ(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Gv(a,0),0!==a&&(n[a+1]=jS(n[a+1],r)),a=r;else n[r+1]=Gv(l,0),0===a?a=r:n[l+1]=jS(n[l+1],r),l=r;c&&(n[r+1]=US(n[r+1])),QF(n,d,r,!0),QF(n,d,r,!1),function cY(n,t,e,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof t&&Vf(o,t)>=0&&(e[r+1]=HS(e[r+1]))}(t,d,n,r,o),s=Gv(a,l),o?t.classBindings=s:t.styleBindings=s}(i,o,t,e,s,r)}}function xC(n,t,e,r,i){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],r=Tm(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Tm(n,t,e){const r=e?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ga(n,s,!!e||t[++o]))}return void 0===n?null:n}function cN(n,t,e,r,i,o,s,a){if(!(3&t.type))return;const l=n.data,c=l[a+1];n_(function MP(n){return 1==(1&n)}(c)?uN(l,t,e,i,Xc(c),s):void 0)||(n_(o)||function TP(n){return 2==(2&n)}(c)&&(o=uN(l,null,e,i,a,s)),function uJ(n,t,e,r,i){const o=Ki(n);if(t)i?o?n.addClass(e,r):e.classList.add(r):o?n.removeClass(e,r):e.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:ya.DashCase;if(null==i)o?n.removeStyle(e,r,s):e.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=ya.Important),o?n.setStyle(e,r,i,s):e.style.setProperty(r,i,a?"important":"")}}}(r,s,wv(Ps(),e),i,o))}function uN(n,t,e,r,i,o){const s=null===t;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),d=c?l[1]:l,E=null===d;let U=e[i+1];U===Zn&&(U=E?Qr:void 0);let W=E?dS(U,r):d===r?U:void 0;if(c&&!n_(W)&&(W=dS(l,r)),n_(W)&&(a=W,s))return a;const ne=n[i+1];i=s?Cl(ne):Xc(ne)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=dS(l,r))}return a}function n_(n){return void 0!==n}function dN(n,t){return 0!=(n.flags&(t?16:32))}function nt(n,t=""){const e=Mt(),r=Pr(),i=n+20,o=r.firstCreatePass?Gf(r,i,1,t,null):r.data[i],s=e[i]=function IS(n,t){return Ki(n)?n.createText(t):n.createTextNode(t)}(e[11],t);$v(r,e,s,o),ec(o,!1)}function Oi(n){return Tr("",n,""),Oi}function Tr(n,t,e){const r=Mt(),i=ep(r,n,t,e);return i!==Zn&&Qc(r,Ps(),i),Tr}function SC(n,t,e,r,i){const o=Mt(),s=tp(o,n,t,e,r,i);return s!==Zn&&Qc(o,Ps(),s),SC}function td(n,t,e){const r=Mt();return fs(r,Pf(),t)&&va(Pr(),Gi(),r,n,t,r[11],e,!0),td}function r_(n,t,e){const r=Mt();if(fs(r,Pf(),t)){const o=Pr(),s=Gi();va(o,s,r,n,t,nF(Qx(o.data),s,r),e,!0)}return r_}const i_="en-US";let MN=i_;function AC(n,t,e,r,i){if(n=ct(n),Array.isArray(n))for(let o=0;o<n.length;o++)AC(n[o],t,e,r,i);else{const o=Pr(),s=Mt();let a=Yf(n)?n:ct(n.provide),l=cF(n);const c=Ao(),d=1048575&c.providerIndexes,E=c.directiveStart,U=c.providerIndexes>>20;if(Yf(n)||!n.multi){const W=new rm(l,i,xe),ne=DC(a,t,i?d:d+U,E);-1===ne?(Pv(om(c,s),o,a),kC(o,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),e.push(W),s.push(W)):(e[ne]=W,s[ne]=W)}else{const W=DC(a,t,d+U,E),ne=DC(a,t,d,d+U),Ce=W>=0&&e[W],Pe=ne>=0&&e[ne];if(i&&!Pe||!i&&!Ce){Pv(om(c,s),o,a);const Qe=function zX(n,t,e,r,i){const o=new rm(n,e,xe);return o.multi=[],o.index=t,o.componentProviders=0,eL(o,i,r&&!e),o}(i?VX:HX,e.length,i,r,l);!i&&Pe&&(e[ne].providerFactory=Qe),kC(o,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),e.push(Qe),s.push(Qe)}else kC(o,n,W>-1?W:ne,eL(e[i?ne:W],l,!i&&r));!i&&r&&Pe&&e[ne].componentProviders++}}}function kC(n,t,e,r){const i=Yf(t),o=function gZ(n){return!!n.useClass}(t);if(i||o){const l=(o?ct(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){const d=c.indexOf(e);-1===d?c.push(e,[r,l]):c[d+1].push(r,l)}else c.push(e,l)}}}function eL(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function DC(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function HX(n,t,e,r){return TC(this.multi,[])}function VX(n,t,e,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=sm(e,e[1],this.providerFactory.index,r);o=a.slice(0,s),TC(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],TC(i,o);return o}function TC(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function cn(n,t=[]){return e=>{e.providersResolver=(r,i)=>function jX(n,t,e){const r=Pr();if(r.firstCreatePass){const i=Ua(n);AC(e,r.data,r.blueprint,i,!0),AC(t,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,t)}}class tL{}class KX{resolveComponentFactory(t){throw function $X(n){const t=Error(`No component factory found for ${Ve(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let eu=(()=>{class n{}return n.NULL=new KX,n})();function GX(){return pp(Ao(),Mt())}function pp(n,t){return new vn(Ha(n,t))}let vn=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=GX,n})();function qX(n){return n instanceof vn?n.nativeElement:n}class Pm{}let uc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ZX(){const n=Mt(),e=pa(Ao().index,n);return function JX(n){return n[11]}(jr(e)?e:n)}(),n})(),YX=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class ah{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const XX=new ah("13.3.6"),MC={};function c_(n,t,e,r,i=!1){for(;null!==e;){const o=t[e.index];if(null!==o&&r.push(po(o)),Nr(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&c_(l[1],l,c,r)}const s=e.type;if(8&s)c_(n,t,e.child,r);else if(32&s){const a=DS(e,t);let l;for(;l=a();)r.push(l)}else if(16&s){const a=vP(t,e);if(Array.isArray(a))r.push(...a);else{const l=bm(t[16]);c_(l[1],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}class Fm{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return c_(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Nr(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(OS(t,r),Nv(e,r))}this._attachedToViewContainer=!1}cP(this._lView[1],this._lView)}onDestroy(t){WP(this._lView[1],this._lView,null,t)}markForCheck(){nC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){iC(this._lView[1],this._lView,this.context)}checkNoChanges(){!function iZ(n,t,e){Sv(!0);try{iC(n,t,e)}finally{Sv(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eJ(n,t){wm(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=t}}class QX extends Fm{constructor(t){super(t),this._view=t}detectChanges(){QP(this._view)}checkNoChanges(){!function oZ(n){Sv(!0);try{QP(n)}finally{Sv(!1)}}(this._view)}get context(){return null}}class rL extends eu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Uo(t);return new IC(e,this.ngModule)}}function iL(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class IC extends tL{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function bJ(n){return n.map(_J).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return iL(this.componentDef.inputs)}get outputs(){return iL(this.componentDef.outputs)}create(t,e,r,i){const o=(i=i||this.ngModule)?function tQ(n,t){return{get:(e,r,i)=>{const o=n.get(e,MC,i);return o!==MC||r===MC?o:t.get(e,r,i)}}}(t,i.injector):t,s=o.get(Pm,QR),a=o.get(YX,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function zP(n,t,e){if(Ki(n))return n.selectRootElement(t,e===Js.ShadowDom);let r="string"==typeof t?n.querySelector(t):t;return r.textContent="",r}(l,r,this.componentDef.encapsulation):RS(s.createRenderer(null,this.componentDef),c,function eQ(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),E=this.componentDef.onPush?576:528,U=function wF(n,t){return{components:[],scheduler:n||qq,clean:sZ,playerHandler:t||null,flags:0}}(),W=Zv(0,null,null,1,0,null,null,null,null,null),ne=xm(null,W,U,E,null,null,s,l,a,o);let Ce,Pe;Cv(ne);try{const Qe=function _F(n,t,e,r,i,o){const s=e[1];e[20]=n;const l=Gf(s,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(Xv(l,c,!0),null!==n&&(Mv(i,n,c),null!==l.classes&&BS(i,n,l.classes),null!==l.styles&&wP(i,n,l.styles)));const d=r.createRenderer(n,t),E=xm(e,HP(t),null,t.onPush?64:16,e[20],l,r,d,o||null,null);return s.firstCreatePass&&(Pv(om(l,e),s,t.type),JP(s,l),ZP(l,e.length,1)),Yv(e,E),e[20]=E}(d,this.componentDef,ne,s,l);if(d)if(r)Mv(l,d,["ng-version",XX.full]);else{const{attrs:je,classes:at}=function wJ(n){const t=[],e=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&t.push(o,n[++r]):8===i&&e.push(o);else{if(!Sl(i))break;i=o}r++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);je&&Mv(l,d,je),at&&at.length>0&&BS(l,d,at.join(" "))}if(Pe=Gx(W,20),void 0!==e){const je=Pe.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const yt=e[at];je.push(null!=yt?Array.from(yt):null)}}Ce=function bF(n,t,e,r,i){const o=e[1],s=function VJ(n,t,e){const r=Ao();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),YP(n,r,t,qf(n,t,1,null),e));const i=sm(t,n,r.directiveStart,r);hs(i,t);const o=Ha(r,t);return o&&hs(o,t),i}(o,e,t);if(r.components.push(s),n[8]=s,i&&i.forEach(l=>l(s,t)),t.contentQueries){const l=Ao();t.contentQueries(1,s,l.directiveStart)}const a=Ao();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Zu(a.index),GP(e[1],a,0,a.directiveStart,a.directiveEnd,t),qP(t,s)),s}(Qe,this.componentDef,ne,U,[AZ]),Sm(W,ne,null)}finally{Ev()}return new rQ(this.componentType,Ce,pp(Pe,ne),ne,Pe)}}class rQ extends class WX{}{constructor(t,e,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=e,this.hostView=this.changeDetectorRef=new QX(i),this.componentType=t}get injector(){return new Lf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class tu{}class oL{}const gp=new Map;class lL extends tu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new rL(this);const r=Ms(t);this._bootstrapComponents=oc(r.bootstrap),this._r3Injector=lF(t,e,[{provide:tu,useValue:this},{provide:eu,useValue:this.componentFactoryResolver}],Ve(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ci.THROW_IF_NOT_FOUND,r=Cn.Default){return t===Ci||t===tu||t===sC?this:this._r3Injector.get(t,e,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class RC extends oL{constructor(t){super(),this.moduleType=t,null!==Ms(t)&&function oQ(n){const t=new Set;!function e(r){const i=Ms(r,!0),o=i.id;null!==o&&(function sL(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${Ve(t)} vs ${Ve(t.name)}`)}(o,gp.get(o),r),gp.set(o,r));const s=oc(i.imports);for(const a of s)t.has(a)||(t.add(a),e(a))}(n)}(t)}create(t){return new lL(this.moduleType,t)}}function Nm(n,t,e){const r=Os()+n,i=Mt();return i[r]===Zn?ac(i,r,e?t.call(e):t()):function Am(n,t){return n[t]}(i,r)}function Lm(n,t,e,r){return cL(Mt(),Os(),n,t,e,r)}function u_(n,t,e,r,i){return function uL(n,t,e,r,i,o,s){const a=t+e;return oh(n,a,i,o)?ac(n,a+2,s?r.call(s,i,o):r(i,o)):Bm(n,a+2)}(Mt(),Os(),n,t,e,r,i)}function Bm(n,t){const e=n[t];return e===Zn?void 0:e}function cL(n,t,e,r,i,o){const s=t+e;return fs(n,s,i)?ac(n,s+1,o?r.call(o,i):r(i)):Bm(n,s+1)}function dL(n,t,e,r,i,o,s,a){const l=t+e;return function e_(n,t,e,r,i){const o=oh(n,t,e,r);return fs(n,t+2,i)||o}(n,l,i,o,s)?ac(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Bm(n,l+3)}function dc(n,t){const e=Pr();let r;const i=n+20;e.firstCreatePass?(r=function fQ(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(i,r.onDestroy)):r=e.data[i];const o=r.factory||(r.factory=eh(r.type)),s=Ds(xe);try{const a=Rv(!1),l=o();return Rv(a),function BZ(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,Mt(),i,l),l}finally{Ds(s)}}function nu(n,t,e){const r=n+20,i=Mt(),o=Of(i,r);return Um(i,r)?cL(i,Os(),t,o.transform,e,o):o.transform(e)}function Um(n,t){return n[1].data[t].pure}function OC(n){return t=>{setTimeout(n,void 0,t)}}const Mn=class yQ extends Ne{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){var i,o,s;let a=t,l=e||(()=>null),c=r;if(t&&"object"==typeof t){const E=t;a=null===(i=E.next)||void 0===i?void 0:i.bind(E),l=null===(o=E.error)||void 0===o?void 0:o.bind(E),c=null===(s=E.complete)||void 0===s?void 0:s.bind(E)}this.__isAsync&&(l=OC(l),a&&(a=OC(a)),c&&(c=OC(c)));const d=super.subscribe({next:a,error:l,complete:c});return t instanceof w&&t.add(d),d}};function vQ(){return this._results[Xf()]()}class lh{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Xf(),r=lh.prototype;r[e]||(r[e]=vQ)}get changes(){return this._changes||(this._changes=new Mn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const i=Va(t);(this._changesDetected=!function IG(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Pi=(()=>{class n{}return n.__NG_ELEMENT_ID__=wQ,n})();const _Q=Pi,bQ=class extends _Q{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t){const e=this._declarationTContainer.tViews,r=xm(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(e)),Sm(e,r,t),new Fm(r)}};function wQ(){return d_(Ao(),Mt())}function d_(n,t){return 4&n.type?new bQ(t,n,pp(n,t)):null}let Fi=(()=>{class n{}return n.__NG_ELEMENT_ID__=xQ,n})();function xQ(){return yL(Ao(),Mt())}const SQ=Fi,gL=class extends SQ{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return pp(this._hostTNode,this._hostLView)}get injector(){return new Lf(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ov(this._hostTNode,this._hostLView);if(gO(t)){const e=Nf(t,this._hostLView),r=Ff(t);return new Lf(e[1].data[r+8],e)}return new Lf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=mL(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,r){const i=t.createEmbeddedView(e||{});return this.insert(i,r),i}createComponent(t,e,r,i,o){const s=t&&!function lm(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const E=e||{};a=E.index,r=E.injector,i=E.projectableNodes,o=E.ngModuleRef}const l=s?t:new IC(Uo(t)),c=r||this.parentInjector;if(!o&&null==l.ngModule){const U=(s?c:this.parentInjector).get(tu,null);U&&(o=U)}const d=l.create(c,i,void 0,o);return this.insert(d.hostView,a),d}insert(t,e){const r=t._lView,i=r[1];if(function eG(n){return Nr(n[3])}(r)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const E=r[3],U=new gL(E,E[6],E[3]);U.detach(U.indexOf(t))}}const o=this._adjustIndex(e),s=this._lContainer;!function nJ(n,t,e,r){const i=10+r,o=e.length;r>0&&(e[i-1][4]=t),r<o-10?(t[4]=e[i],EO(e,10+r,t)):(e.push(t),t[4]=null),t[3]=e;const s=t[17];null!==s&&e!==s&&function rJ(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=128}(i,r,s,o);const a=NS(o,s),l=r[11],c=Wv(l,s[7]);return null!==c&&function Qq(n,t,e,r,i,o){r[0]=i,r[6]=t,wm(n,r,e,1,i,o)}(i,s[6],l,r,c,a),t.attachToViewContainerRef(),EO(PC(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=mL(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=OS(this._lContainer,e);r&&(Nv(PC(this._lContainer),e),cP(r[1],r))}detach(t){const e=this._adjustIndex(t,-1),r=OS(this._lContainer,e);return r&&null!=Nv(PC(this._lContainer),e)?new Fm(r):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function mL(n){return n[8]}function PC(n){return n[8]||(n[8]=[])}function yL(n,t){let e;const r=t[n.index];if(Nr(r))e=r;else{let i;if(8&n.type)i=po(r);else{const o=t[11];i=o.createComment("");const s=Ha(n,t);ih(o,Wv(o,s),i,function aJ(n,t){return Ki(n)?n.nextSibling(t):t.nextSibling}(o,s),!1)}t[n.index]=e=XP(r,t,i,n),Yv(t,e)}return new gL(e,n,t)}class FC{constructor(t){this.queryList=t,this.matches=null}clone(){return new FC(this.queryList)}setDirty(){this.queryList.setDirty()}}class NC{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){const s=e.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new NC(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==xL(t,e).matches&&this.queries[e].setDirty()}}class vL{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class LC{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==e?e.push(o):e=[o])}return null!==e?new LC(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class BC{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new BC(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,e,AQ(e,o)),this.matchTNodeWithReadOption(t,e,Fv(e,t,o,!1,!1))}else r===Pi?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Fv(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===vn||i===Fi||i===Pi&&4&e.type)this.addMatch(e.index,-2);else{const o=Fv(e,t,i,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function AQ(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function DQ(n,t,e,r){return-1===e?function kQ(n,t){return 11&n.type?pp(n,t):4&n.type?d_(n,t):null}(t,n):-2===e?function TQ(n,t,e){return e===vn?pp(t,n):e===Pi?d_(t,n):e===Fi?yL(t,n):void 0}(n,t,r):sm(n,n[1],e,t)}function _L(n,t,e,r){const i=t[19].queries[r];if(null===i.matches){const o=n.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:DQ(t,o[c],s[l+1],e.metadata.read))}i.matches=a}return i.matches}function UC(n,t,e,r){const i=n.queries.getByIndex(e),o=i.matches;if(null!==o){const s=_L(n,t,i,e);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)r.push(s[a/2]);else{const c=o[a+1],d=t[-l];for(let E=10;E<d.length;E++){const U=d[E];U[17]===U[3]&&UC(U[1],U,c,r)}if(null!==d[9]){const E=d[9];for(let U=0;U<E.length;U++){const W=E[U];UC(W[1],W,c,r)}}}}}return r}function un(n){const t=Mt(),e=Pr(),r=sO();eS(r+1);const i=xL(e,r);if(n.dirty&&eO(t)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?UC(e,t,r,[]):_L(e,t,i,r);n.reset(o,qX),n.notifyOnChanges()}return!0}return!1}function Zr(n,t,e){const r=Pr();r.firstCreatePass&&(wL(r,new vL(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),bL(r,Mt(),t)}function pr(n,t,e,r){const i=Pr();if(i.firstCreatePass){const o=Ao();wL(i,new vL(t,e,r),o.index),function IQ(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(i,n),2==(2&e)&&(i.staticContentQueries=!0)}bL(i,Mt(),e)}function dn(){return function MQ(n,t){return n[19].queries[t].queryList}(Mt(),sO())}function bL(n,t,e){const r=new lh(4==(4&e));WP(n,t,r,r.destroy),null===t[19]&&(t[19]=new NC),t[19].queries.push(new FC(r))}function wL(n,t,e){null===n.queries&&(n.queries=new LC),n.queries.track(new BC(t,e))}function xL(n,t){return n.queries.getByIndex(t)}function SL(n,t){return d_(n,t)}function p_(...n){}const g_=new Ot("Application Initializer");let $C=(()=>{class n{constructor(e){this.appInits=e,this.resolve=p_,this.reject=p_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Dm(o))e.push(o);else if(_C(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(lt(g_,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hm=new Ot("AppId",{providedIn:"root",factory:function jL(){return`${KC()}${KC()}${KC()}`}});function KC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HL=new Ot("Platform Initializer"),Vm=new Ot("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),VL=new Ot("appBootstrapListener");let qQ=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ru=new Ot("LocaleId",{providedIn:"root",factory:()=>hm(ru,Cn.Optional|Cn.SkipSelf)||function JQ(){return"undefined"!=typeof $localize&&$localize.locale||i_}()});class YQ{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let zL=(()=>{class n{compileModuleSync(e){return new RC(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),o=oc(Ms(e).declarations).reduce((s,a)=>{const l=Uo(a);return l&&s.push(new IC(l)),s},[]);return new YQ(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QQ=(()=>Promise.resolve(0))();function GC(n){"undefined"==typeof Zone?QQ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Vn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function eee(){let n=Jr.requestAnimationFrame,t=Jr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function ree(n){const t=()=>{!function nee(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,JC(n),n.isCheckStableRunning=!0,qC(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),JC(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,o,s,a)=>{try{return WL(n),e.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),$L(n)}},onInvoke:(e,r,i,o,s,a,l)=>{try{return WL(n),e.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),$L(n)}},onHasTask:(e,r,i,o)=>{e.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,JC(n),qC(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,i,o)=>(e.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,tee,p_,p_);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const tee={};function qC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function JC(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $L(n){n._nesting--,qC(n)}class iee{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}}let ZC=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vn.assertNotInAngularZone(),GC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())GC(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,r,i){return[]}}return n.\u0275fac=function(e){return new(e||n)(lt(Vn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),oee=(()=>{class n{constructor(){this._applications=new Map,YC.addToWindow(this)}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return YC.findTestabilityInTree(this,e,r)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class see{addToWindow(t){}findTestabilityInTree(t,e,r){return null}}let YC=new see,ch=null;const KL=new Ot("AllowMultipleToken"),GL=new Ot("PlatformOnDestroy");class qL{constructor(t,e){this.name=t,this.token=e}}function JL(n,t,e=[]){const r=`Platform: ${t}`,i=new Ot(r);return(o=[])=>{let s=XC();if(!s||s.injector.get(KL,!1)){const a=[...e,...o,{provide:i,useValue:!0}];n?n(a):function uee(n){if(ch&&!ch.get(KL,!1))throw new Oe(400,"");ch=n;const t=n.get(ZL),e=n.get(HL,null);e&&e.forEach(r=>r())}(function hee(n=[],t){return Ci.create({name:t,providers:[{provide:aC,useValue:"platform"},{provide:GL,useValue:()=>ch=null},...n]})}(a,r))}return function dee(n){const t=XC();if(!t)throw new Oe(401,"");return t}()}}function XC(){var n;return null!==(n=null==ch?void 0:ch.get(ZL))&&void 0!==n?n:null}let ZL=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const a=function fee(n,t){let e;return e="noop"===n?new iee:("zone.js"===n?void 0:n)||new Vn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:Vn,useValue:a}];return a.run(()=>{const c=Ci.create({providers:l,parent:this.injector,name:e.moduleType.name}),d=e.create(c),E=d.injector.get(ic,null);if(!E)throw new Oe(402,"");return a.runOutsideAngular(()=>{const U=a.onError.subscribe({next:W=>{E.handleError(W)}});d.onDestroy(()=>{QC(this._modules,d),U.unsubscribe()})}),function pee(n,t,e){try{const r=e();return Dm(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(E,a,()=>{const U=d.injector.get($C);return U.runInitializers(),U.donePromise.then(()=>(function JY(n){Mi(n,"Expected localeId to be defined"),"string"==typeof n&&(MN=n.toLowerCase().replace(/_/g,"-"))}(d.injector.get(ru,i_)||i_),this._moduleDoBootstrap(d),d))})})}bootstrapModule(e,r=[]){const i=YL({},r);return function lee(n,t,e){const r=new RC(e);return Promise.resolve(r)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){const r=e.injector.get(uh);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new Oe(403,"");e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(GL,null);null==e||e(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(lt(Ci))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function YL(n,t){return Array.isArray(t)?t.reduce(YL,n):Object.assign(Object.assign({},n),t)}let uh=(()=>{class n{constructor(e,r,i,o){this._zone=e,this._injector=r,this._exceptionHandler=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new de(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new de(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Vn.assertNotInAngularZone(),GC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Vn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),d.unsubscribe()}});this.isStable=ge(s,a.pipe(We()))}bootstrap(e,r){if(!this._initStatus.done)throw new Oe(405,"");let i;i=e instanceof tL?e:this._injector.get(eu).resolveComponentFactory(e),this.componentTypes.push(i.componentType);const o=function cee(n){return n.isBoundToModule}(i)?void 0:this._injector.get(tu),a=i.create(Ci.NULL,[],r||i.selector,o),l=a.location.nativeElement,c=a.injector.get(ZC,null),d=c&&a.injector.get(oee);return c&&d&&d.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),QC(this.components,a),d&&d.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;QC(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(VL,[]).concat(this._bootstrapListeners).forEach(i=>i(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(lt(Vn),lt(Ci),lt(ic),lt($C))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QC(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let QL=!0,Ni=(()=>{class n{}return n.__NG_ELEMENT_ID__=yee,n})();function yee(n){return function vee(n,t,e){if(fa(n)&&!e){const r=pa(n.index,t);return new Fm(r,r)}return 47&n.type?new Fm(t[16],t):null}(Ao(),Mt(),16==(16&n))}class o3{constructor(){}supports(t){return Em(t)}create(t){return new Cee(t)}}const See=(n,t)=>t;class Cee{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||See}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){const s=!r||e&&e.currentIndex<a3(r,i,o)?e:r,a=a3(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,d=l-i;if(c!=d){for(let U=0;U<c;U++){const W=U<o.length?o[U]:o[U]=0,ne=W+U;d<=ne&&ne<c&&(o[U]=W+1)}o[s.previousIndex]=d-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Em(t))throw new Oe(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),r=!0),e=e._next}else i=0,function NZ(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Xf()]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Eee(e,r),o,i),t}_verifyReinsertion(t,e,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new s3),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s3),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Eee{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Aee{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class s3{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new Aee,this.map.set(e,r)),r.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a3(n,t,e){const r=n.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}class l3{constructor(){}supports(t){return t instanceof Map||fC(t)}create(){return new kee}}class kee{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||fC(t)))throw new Oe(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,e);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new Dee(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class Dee{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function c3(){return new Ka([new o3])}let Ka=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||c3()),deps:[[n,new th,new za]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new Oe(901,"")}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:c3}),n})();function u3(){return new zm([new l3])}let zm=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||u3()),deps:[[n,new th,new za]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new Oe(901,"")}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:u3}),n})();const Iee=JL(null,"core",[]);let Ree=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(lt(uh))},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})(),v_=null;function hc(){return v_}const zn=new Ot("DocumentToken");let hh=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:function(){return function Nee(){return lt(d3)}()},providedIn:"platform"}),n})();const Lee=new Ot("Location Initialized");let d3=(()=>{class n extends hh{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hc().getBaseHref(this._doc)}onPopState(e){const r=hc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=hc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){h3()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){h3()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:function(){return function Bee(){return new d3(lt(zn))}()},providedIn:"platform"}),n})();function h3(){return!!window.history.pushState}function iE(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function f3(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function iu(n){return n&&"?"!==n[0]?"?"+n:n}let yp=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:function(){return function Uee(n){const t=lt(zn).location;return new p3(lt(hh),t&&t.origin||"")}()},providedIn:"root"}),n})();const oE=new Ot("appBaseHref");let p3=(()=>{class n extends yp{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return iE(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+iu(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const s=this.prepareExternalUrl(i+iu(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){const s=this.prepareExternalUrl(i+iu(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(lt(hh),lt(oE,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),jee=(()=>{class n extends yp{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=iE(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+iu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+iu(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(lt(hh),lt(oE,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),Wm=(()=>{class n{constructor(e,r){this._subject=new Mn,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=f3(g3(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+iu(r))}normalize(e){return n.stripTrailingSlash(function Vee(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,g3(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+iu(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+iu(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=iu,n.joinWithSlash=iE,n.stripTrailingSlash=f3,n.\u0275fac=function(e){return new(e||n)(lt(yp),lt(hh))},n.\u0275prov=kt({token:n,factory:function(){return function Hee(){return new Wm(lt(yp),lt(hh))}()},providedIn:"root"}),n})();function g3(n){return n.replace(/\/index.html$/,"")}function C3(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}let fh=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Em(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ve(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(xe(Ka),xe(zm),xe(vn),xe(uc))},n.\u0275dir=bt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Ate{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ph=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ate(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),E3(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{E3(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(Pi),xe(Ka))},n.\u0275dir=bt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function E3(n,t){n.context.$implicit=t.item}let gi=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new kte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){A3("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){A3("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class kte{constructor(){this.$implicit=null,this.ngIf=null}}function A3(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ve(t)}'.`)}class gE{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let D_=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),k3=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new gE(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(Pi),xe(D_,9))},n.\u0275dir=bt({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),mE=(()=>{class n{constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[i,o]=e.split(".");null!=(r=null!=r&&o?`${r}${o}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(zm),xe(uc))},n.\u0275dir=bt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),T3=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi))},n.\u0275dir=bt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Si]}),n})();function Ml(n,t){return new Oe(2100,"")}class Mte{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Ite{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}onDestroy(t){}}const Rte=new Ite,Ote=new Mte;let yE=(()=>{class n{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(Dm(e))return Rte;if(VF(e))return Ote;throw Ml()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(xe(Ni,16))},n.\u0275pipe=to({name:"async",type:n,pure:!1}),n})(),M3=(()=>{class n{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=I3}transform(e,r=I3){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const i=this.differ.diff(e),o=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(s=>{this.keyValues.push(function Wte(n,t){return{key:n,value:t}}(s.key,s.currentValue))})),(i||o)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return n.\u0275fac=function(e){return new(e||n)(xe(zm,16))},n.\u0275pipe=to({name:"keyvalue",type:n,pure:!1}),n})();function I3(n,t){const e=n.key,r=t.key;if(e===r)return 0;if(void 0===e)return 1;if(void 0===r)return-1;if(null===e)return 1;if(null===r)return-1;if("string"==typeof e&&"string"==typeof r)return e<r?-1:1;if("number"==typeof e&&"number"==typeof r)return e-r;if("boolean"==typeof e&&"boolean"==typeof r)return e<r?-1:1;const i=String(e),o=String(r);return i==o?0:i<o?-1:1}let R3=(()=>{class n{transform(e,r,i){if(null==e)return null;if(!this.supports(e))throw Ml();return e.slice(r,i)}supports(e){return"string"==typeof e||Array.isArray(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=to({name:"slice",type:n,pure:!1}),n})(),Xs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();const O3="browser";function Gm(n){return n===O3}let Yte=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>new Xte(lt(zn),window)}),n})();class Xte{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Qte(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=P3(this.window.history)||P3(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function P3(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class F3{}class bE extends class ene extends class Fee{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Pee(n){v_||(v_=n)}(new bE)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function tne(){return qm=qm||document.querySelector("base"),qm?qm.getAttribute("href"):null}();return null==e?null:function nne(n){T_=T_||document.createElement("a"),T_.setAttribute("href",n);const t=T_.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){qm=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return C3(document.cookie,t)}}let T_,qm=null;const N3=new Ot("TRANSITION_ID"),ine=[{provide:g_,useFactory:function rne(n,t,e){return()=>{e.get($C).donePromise.then(()=>{const r=hc(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[N3,zn,Ci],multi:!0}];class wE{static init(){!function aee(n){YC=n}(new wE)}addToWindow(t){Jr.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Jr.getAllAngularTestabilities=()=>t.getAllTestabilities(),Jr.getAllAngularRootElements=()=>t.getAllRootElements(),Jr.frameworkStabilizers||(Jr.frameworkStabilizers=[]),Jr.frameworkStabilizers.push(r=>{const i=Jr.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?hc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let one=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const M_=new Ot("EventManagerPlugins");let I_=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(lt(M_),lt(Vn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();class L3{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=hc().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let B3=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),Jm=(()=>{class n extends B3{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(U3),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(U3))}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();function U3(n){hc().remove(n)}const xE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},SE=/%COMP%/g;function R_(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?R_(n,i,e):(i=i.replace(SE,n),e.push(i))}return e}function V3(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let O_=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new CE(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case Js.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new dne(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case Js.ShadowDom:return new hne(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=R_(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(lt(I_),lt(Jm),lt(Hm))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();class CE{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(xE[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=xE[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=xE[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(ya.DashCase|ya.Important)?t.style.setProperty(e,r,i&ya.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&ya.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,V3(r)):this.eventManager.addEventListener(t,e,V3(r))}}class dne extends CE{constructor(t,e,r,i){super(t),this.component=r;const o=R_(i+"-"+r.id,r.styles,[]);e.addStyles(o),this.contentAttr=function lne(n){return"_ngcontent-%COMP%".replace(SE,n)}(i+"-"+r.id),this.hostAttr=function cne(n){return"_nghost-%COMP%".replace(SE,n)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class hne extends CE{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=R_(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let fne=(()=>{class n extends L3{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const W3=["alt","control","meta","shift"],gne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yne=(()=>{class n extends L3{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hc().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="";if(W3.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(e){let r="",i=function vne(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&$3.hasOwnProperty(t)&&(t=$3[t]))}return gne[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),W3.forEach(o=>{o!=i&&mne[o](e)&&(r+=o+".")}),r+=i,r}static eventCallback(e,r,i){return o=>{n.getEventFullKey(o)===e&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const xne=JL(Iee,"browser",[{provide:Vm,useValue:O3},{provide:HL,useValue:function _ne(){bE.makeCurrent(),wE.init()},multi:!0},{provide:zn,useFactory:function wne(){return function ZK(n){$x=n}(document),document},deps:[]}]),Sne=[{provide:aC,useValue:"root"},{provide:ic,useFactory:function bne(){return new ic},deps:[]},{provide:M_,useClass:fne,multi:!0,deps:[zn,Vn,Vm]},{provide:M_,useClass:yne,multi:!0,deps:[zn]},{provide:O_,useClass:O_,deps:[I_,Jm,Hm]},{provide:Pm,useExisting:O_},{provide:B3,useExisting:Jm},{provide:Jm,useClass:Jm,deps:[zn]},{provide:ZC,useClass:ZC,deps:[Vn]},{provide:I_,useClass:I_,deps:[M_,Vn]},{provide:F3,useClass:one,deps:[]}];let K3=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:Hm,useValue:e.appId},{provide:N3,useExisting:Hm},ine]}}}return n.\u0275fac=function(e){return new(e||n)(lt(n,12))},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:Sne,imports:[Xs,Ree]}),n})();"undefined"!=typeof window&&window;let fc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:function(e){let r=null;return r=e?new(e||n):lt(J3),r},providedIn:"root"}),n})(),J3=(()=>{class n extends fc{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case kr.NONE:return r;case kr.HTML:return nc(r,"HTML")?ma(r):qO(this._doc,String(r)).toString();case kr.STYLE:return nc(r,"Style")?ma(r):r;case kr.SCRIPT:if(nc(r,"Script"))return ma(r);throw new Error("unsafe value used in a script context");case kr.URL:return jO(r),nc(r,"URL")?ma(r):gm(String(r));case kr.RESOURCE_URL:if(nc(r,"ResourceURL"))return ma(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function lq(n){return new rq(n)}(e)}bypassSecurityTrustStyle(e){return function cq(n){return new iq(n)}(e)}bypassSecurityTrustScript(e){return function uq(n){return new oq(n)}(e)}bypassSecurityTrustUrl(e){return function dq(n){return new sq(n)}(e)}bypassSecurityTrustResourceUrl(e){return function hq(n){return new aq(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:function(e){let r=null;return r=e?new e:function One(n){return new J3(n.get(zn))}(lt(Ci)),r},providedIn:"root"}),n})();function An(...n){return Q(n,Jl(n))}class Bs extends Ne{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:Pne}=Array,{getPrototypeOf:Fne,prototype:Nne,keys:Lne}=Object;function Z3(n){if(1===n.length){const t=n[0];if(Pne(t))return{args:t,keys:null};if(function Bne(n){return n&&"object"==typeof n&&Fne(n)===Nne}(t)){const e=Lne(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}const{isArray:Une}=Array;function AE(n){return K(t=>function jne(n,t){return Une(t)?n(...t):n(t)}(n,t))}function Y3(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function X3(n,t,e){n?Cs(e,n,t):t()}function vp(n,t){const e=h(n)?n:()=>n,r=i=>i.error(e());return new de(t?i=>t.schedule(r,0,i):r)}const Zm=f(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function P_(...n){return function zne(){return Es(1)}()(Q(n,Jl(n)))}function F_(n){return new de(t=>{Or(n()).subscribe(t)})}function Q3(){return ie((n,t)=>{let e=null;n._refCount++;const r=$(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Wne extends de{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ee(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new w;const e=this.getSubject();t.add(this.source.subscribe($(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=w.EMPTY)}return t}refCount(){return Q3()(this)}}function Ja(n,t){return ie((e,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();e.subscribe($(r,l=>{null==i||i.unsubscribe();let c=0;const d=o++;Or(n(l,d)).subscribe(i=$(r,E=>r.next(t?t(l,E,d,c++):E),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qs(...n){const t=Jl(n);return ie((e,r)=>{(t?P_(n,e,t):P_(n,e)).subscribe(r)})}function $ne(n,t,e,r,i){return(o,s)=>{let a=e,l=t,c=0;o.subscribe($(s,d=>{const E=c++;l=a?n(l,d,E):(a=!0,d),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function e4(n,t){return ie($ne(n,t,arguments.length>=2,!0))}function si(n,t){return ie((e,r)=>{let i=0;e.subscribe($(r,o=>n.call(t,o,i++)&&r.next(o)))})}function su(n){return ie((t,e)=>{let o,r=null,i=!1;r=t.subscribe($(e,void 0,void 0,s=>{o=Or(n(s,su(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function _p(n,t){return h(t)?Yn(n,t,1):Yn(n,1)}function kE(n){return n<=0?()=>qo:ie((t,e)=>{let r=[];t.subscribe($(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function t4(n=Kne){return ie((t,e)=>{let r=!1;t.subscribe($(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function Kne(){return new Zm}function n4(n){return ie((t,e)=>{let r=!1;t.subscribe($(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function gh(n,t){const e=arguments.length>=2;return r=>r.pipe(n?si((i,o)=>n(i,o,r)):Te,ke(1),e?n4(t):t4(()=>new Zm))}function Mo(n,t,e){const r=h(n)||t||e?{next:n,error:t,complete:e}:n;return r?ie((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe($(o,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),o.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Te}function r4(n){return ie((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class au{constructor(t,e){this.id=t,this.url=e}}class DE extends au{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ym extends au{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class o4 extends au{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qne extends au{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jne extends au{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zne extends au{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yne extends au{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xne extends au{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qne extends au{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s4{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class a4{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ere{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tre{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nre{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rre{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l4{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const dr="primary";class ire{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function bp(n){return new ire(n)}const c4="ngNavigationCancelingError";function TE(n){const t=Error("NavigationCancelingError: "+n);return t[c4]=!0,t}function sre(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pc(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!u4(n[i],t[i]))return!1;return!0}function u4(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function d4(n){return Array.prototype.concat.apply([],n)}function h4(n){return n.length>0?n[n.length-1]:null}function Yo(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function gc(n){return _C(n)?n:Dm(n)?Q(Promise.resolve(n)):An(n)}const cre={exact:function g4(n,t,e){if(!yh(n.segments,t.segments)||!N_(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!g4(n.children[r],t.children[r],e))return!1;return!0},subset:m4},f4={exact:function ure(n,t){return pc(n,t)},subset:function dre(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>u4(n[e],t[e]))},ignored:()=>!0};function p4(n,t,e){return cre[e.paths](n.root,t.root,e.matrixParams)&&f4[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function m4(n,t,e){return y4(n,t,t.segments,e)}function y4(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!yh(i,e)||t.hasChildren()||!N_(i,e,r))}if(n.segments.length===e.length){if(!yh(n.segments,e)||!N_(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!m4(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(yh(n.segments,i)&&N_(n.segments,i,r)&&n.children[dr])&&y4(n.children[dr],t,o,r)}}function N_(n,t,e){return t.every((r,i)=>f4[e](n[i].parameters,r.parameters))}class mh{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bp(this.queryParams)),this._queryParamMap}toString(){return pre.serialize(this)}}class wr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Yo(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return L_(this)}}class Xm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=bp(this.parameters)),this._parameterMap}toString(){return x4(this)}}function yh(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class v4{}class _4{parse(t){const e=new Sre(t);return new mh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Qm(t.root,!0)}`,r=function yre(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${B_(e)}=${B_(i)}`).join("&"):`${B_(e)}=${B_(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function gre(n){return encodeURI(n)}(t.fragment)}`:""}`}}const pre=new _4;function L_(n){return n.segments.map(t=>x4(t)).join("/")}function Qm(n,t){if(!n.hasChildren())return L_(n);if(t){const e=n.children[dr]?Qm(n.children[dr],!1):"",r=[];return Yo(n.children,(i,o)=>{o!==dr&&r.push(`${o}:${Qm(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function fre(n,t){let e=[];return Yo(n.children,(r,i)=>{i===dr&&(e=e.concat(t(r,i)))}),Yo(n.children,(r,i)=>{i!==dr&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===dr?[Qm(n.children[dr],!1)]:[`${i}:${Qm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dr]?`${L_(n)}/${e[0]}`:`${L_(n)}/(${e.join("//")})`}}function b4(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function B_(n){return b4(n).replace(/%3B/gi,";")}function ME(n){return b4(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function U_(n){return decodeURIComponent(n)}function w4(n){return U_(n.replace(/\+/g,"%20"))}function x4(n){return`${ME(n.path)}${function mre(n){return Object.keys(n).map(t=>`;${ME(t)}=${ME(n[t])}`).join("")}(n.parameters)}`}const vre=/^[^\/()?;=#]+/;function j_(n){const t=n.match(vre);return t?t[0]:""}const _re=/^[^=?&#]+/,wre=/^[^&#]+/;class Sre{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wr([],{}):new wr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[dr]=new wr(t,e)),r}parseSegment(){const t=j_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Xm(U_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=j_(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=j_(this.remaining);i&&(r=i,this.capture(r))}t[U_(e)]=U_(r)}parseQueryParam(t){const e=function bre(n){const t=n.match(_re);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function xre(n){const t=n.match(wre);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=w4(e),o=w4(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=j_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=dr);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[dr]:new wr([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class S4{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=IE(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=IE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=RE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return RE(t,this._root).map(e=>e.value)}}function IE(n,t){if(n===t.value)return t;for(const e of t.children){const r=IE(n,e);if(r)return r}return null}function RE(n,t){if(n===t.value)return[t];for(const e of t.children){const r=RE(n,e);if(r.length)return r.unshift(t),r}return[]}class lu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function wp(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class C4 extends S4{constructor(t,e){super(t),this.snapshot=e,OE(this,t)}toString(){return this.snapshot.toString()}}function E4(n,t){const e=function Cre(n,t){const s=new H_([],{},{},"",{},dr,t,null,n.root,-1,{});return new k4("",new lu(s,[]))}(n,t),r=new Bs([new Xm("",{})]),i=new Bs({}),o=new Bs({}),s=new Bs({}),a=new Bs(""),l=new Il(r,i,s,a,o,dr,t,e.root);return l.snapshot=e.root,new C4(new lu(l,[]),e)}class Il{constructor(t,e,r,i,o,s,a,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(K(t=>bp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(K(t=>bp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function A4(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Ere(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class H_{constructor(t,e,r,i,o,s,a,l,c,d,E){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class k4 extends S4{constructor(t,e){super(e),this.url=t,OE(this,e)}toString(){return D4(this._root)}}function OE(n,t){t.value._routerState=n,t.children.forEach(e=>OE(n,e))}function D4(n){const t=n.children.length>0?` { ${n.children.map(D4).join(", ")} } `:"";return`${n.value}${t}`}function PE(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,pc(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),pc(t.params,e.params)||n.params.next(e.params),function are(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!pc(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),pc(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function FE(n,t){const e=pc(n.params,t.params)&&function hre(n,t){return yh(n,t)&&n.every((e,r)=>pc(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||FE(n.parent,t.parent))}function ey(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function kre(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ey(n,r,i);return ey(n,r)})}(n,t,e);return new lu(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ey(n,a)),s}}const r=function Dre(n){return new Il(new Bs(n.url),new Bs(n.params),new Bs(n.queryParams),new Bs(n.fragment),new Bs(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>ey(n,o));return new lu(r,i)}}function V_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ty(n){return"object"==typeof n&&null!=n&&n.outlets}function NE(n,t,e,r,i){let o={};if(r&&Yo(r,(a,l)=>{o[l]=Array.isArray(a)?a.map(c=>`${c}`):`${a}`}),n===t)return new mh(e,o,i);const s=T4(n,t,e);return new mh(s,o,i)}function T4(n,t,e){const r={};return Yo(n.children,(i,o)=>{r[o]=i===t?e:T4(i,t,e)}),new wr(n.segments,r)}class M4{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&V_(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ty);if(i&&i!==h4(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class LE{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function I4(n,t,e){if(n||(n=new wr([],{})),0===n.segments.length&&n.hasChildren())return z_(n,t,e);const r=function Pre(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const s=n.segments[i],a=e[r];if(ty(a))break;const l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!O4(l,c,s))return o;r+=2}else{if(!O4(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new wr(n.segments.slice(0,r.pathIndex),{});return o.children[dr]=new wr(n.segments.slice(r.pathIndex),n.children),z_(o,0,i)}return r.match&&0===i.length?new wr(n.segments,{}):r.match&&!n.hasChildren()?BE(n,t,e):r.match?z_(n,0,i):BE(n,t,e)}function z_(n,t,e){if(0===e.length)return new wr(n.segments,{});{const r=function Ore(n){return ty(n[0])?n[0].outlets:{[dr]:n}}(e),i={};return Yo(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=I4(n.children[s],t,o))}),Yo(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new wr(n.segments,i)}}function BE(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(ty(o)){const l=Fre(o.outlets);return new wr(r,l)}if(0===i&&V_(e[0])){r.push(new Xm(n.segments[t].path,R4(e[0]))),i++;continue}const s=ty(o)?o.outlets[dr]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&V_(a)?(r.push(new Xm(s,R4(a))),i+=2):(r.push(new Xm(s,{})),i++)}return new wr(r,{})}function Fre(n){const t={};return Yo(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=BE(new wr([],{}),0,e))}),t}function R4(n){const t={};return Yo(n,(e,r)=>t[r]=`${e}`),t}function O4(n,t,e){return n==e.path&&pc(t,e.parameters)}class Lre{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),PE(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=wp(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Yo(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=wp(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=wp(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=wp(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new rre(o.value.snapshot))}),t.children.length&&this.forwardEvent(new tre(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(PE(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),PE(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=function Bre(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=i,s.resolver=l,s.outlet&&s.outlet.activateWith(i,l),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class UE{constructor(t,e){this.routes=t,this.module=e}}function rd(n){return"function"==typeof n}function vh(n){return n instanceof mh}const ny=Symbol("INITIAL_VALUE");function ry(){return Ja(n=>function Hne(...n){const t=Jl(n),e=qg(n),{args:r,keys:i}=Z3(n);if(0===r.length)return Q([],t);const o=new de(function Vne(n,t,e=Te){return r=>{X3(t,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)X3(t,()=>{const c=Q(n[l],t);let d=!1;c.subscribe($(r,E=>{o[l]=E,d||(d=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>Y3(i,s):Te));return e?o.pipe(AE(e)):o}(n.map(t=>t.pipe(ke(1),Qs(ny)))).pipe(e4((t,e)=>{let r=!1;return e.reduce((i,o,s)=>i!==ny?i:(o===ny&&(r=!0),r||!1!==o&&s!==e.length-1&&!vh(o)?i:o),t)},ny),si(t=>t!==ny),K(t=>vh(t)?t:!0===t),ke(1)))}class Wre{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new iy,this.attachRef=null}}class iy{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Wre,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let jE=(()=>{class n{constructor(e,r,i,o,s){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Mn,this.deactivateEvents=new Mn,this.attachEvents=new Mn,this.detachEvents=new Mn,this.name=o||dr,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const s=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new $re(e,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(xe(iy),xe(Fi),xe(eu),Zs("name"),xe(Ni))},n.\u0275dir=bt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $re{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Il?this.route:t===iy?this.childContexts:this.parent.get(t,e)}}let P4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Jt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&qt(0,"router-outlet")},directives:[jE],encapsulation:2}),n})();function F4(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];Kre(r,Gre(t,r))}}function Kre(n,t){n.children&&F4(n.children,t)}function Gre(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function HE(n){const t=n.children&&n.children.map(HE),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==dr&&(e.component=P4),e}function Za(n){return n.outlet||dr}function N4(n,t){const e=n.filter(r=>Za(r)===t);return e.push(...n.filter(r=>Za(r)!==t)),e}const L4={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function W_(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},L4):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||sre)(e,n,t);if(!o)return Object.assign({},L4);const s={};Yo(o.posParams,(l,c)=>{s[c]=l.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:a,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function $_(n,t,e,r,i="corrected"){if(e.length>0&&function Zre(n,t,e){return e.some(r=>K_(n,t,r)&&Za(r)!==dr)}(n,e,r)){const s=new wr(t,function Jre(n,t,e,r){const i={};i[dr]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Za(o)!==dr){const s=new wr([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,i[Za(o)]=s}return i}(n,t,r,new wr(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function Yre(n,t,e){return e.some(r=>K_(n,t,r))}(n,e,r)){const s=new wr(n.segments,function qre(n,t,e,r,i,o){const s={};for(const a of r)if(K_(n,e,a)&&!i[Za(a)]){const l=new wr([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===o?n.segments.length:t.length,s[Za(a)]=l}return Object.assign(Object.assign({},i),s)}(n,t,e,r,n.children,i));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const o=new wr(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function K_(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function B4(n,t,e,r){return!!(Za(n)===r||r!==dr&&K_(t,e,n))&&("**"===n.path||W_(t,n,e).matched)}function U4(n,t,e){return 0===t.length&&!n.children[e]}class G_{constructor(t){this.segmentGroup=t||null}}class j4{constructor(t){this.urlTree=t}}function oy(n){return vp(new G_(n))}function H4(n){return vp(new j4(n))}class tie{constructor(t,e,r,i,o){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(tu)}apply(){const t=$_(this.urlTree.root,[],[],this.config).segmentGroup,e=new wr(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,dr).pipe(K(o=>this.createUrlTree(VE(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(su(o=>{if(o instanceof j4)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof G_?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,dr).pipe(K(i=>this.createUrlTree(VE(i),t.queryParams,t.fragment))).pipe(su(i=>{throw i instanceof G_?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new wr([],{[dr]:t}):t;return new mh(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(K(o=>new wr([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Q(i).pipe(_p(o=>{const s=r.children[o],a=N4(e,o);return this.expandSegmentGroup(t,a,s,o).pipe(K(l=>({segment:l,outlet:o})))}),e4((o,s)=>(o[s.outlet]=s.segment,o),{}),function Gne(n,t){const e=arguments.length>=2;return r=>r.pipe(n?si((i,o)=>n(i,o,r)):Te,kE(1),e?n4(t):t4(()=>new Zm))}())}expandSegment(t,e,r,i,o,s){return Q(r).pipe(_p(a=>this.expandSegmentAgainstRoute(t,e,r,a,i,o,s).pipe(su(c=>{if(c instanceof G_)return An(null);throw c}))),gh(a=>!!a),su((a,l)=>{if(a instanceof Zm||"EmptyError"===a.name)return U4(e,i,o)?An(new wr([],{})):oy(e);throw a}))}expandSegmentAgainstRoute(t,e,r,i,o,s,a){return B4(i,e,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s):oy(e):oy(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?H4(o):this.lineralizeSegments(r,o).pipe(Yn(s=>{const a=new wr(s,{});return this.expandSegment(t,a,e,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=W_(e,i,o);if(!a)return oy(e);const E=this.applyRedirectCommands(l,i.redirectTo,d);return i.redirectTo.startsWith("/")?H4(E):this.lineralizeSegments(i,E).pipe(Yn(U=>this.expandSegment(t,e,r,U.concat(c),s,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?An(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe(K(E=>(r._loadedConfig=E,new wr(i,{})))):An(new wr(i,{}));const{matched:s,consumedSegments:a,remainingSegments:l}=W_(e,r,i);return s?this.getChildConfig(t,r,i).pipe(Yn(d=>{const E=d.module,U=d.routes,{segmentGroup:W,slicedSegments:ne}=$_(e,a,l,U),Ce=new wr(W.segments,W.children);if(0===ne.length&&Ce.hasChildren())return this.expandChildren(E,U,Ce).pipe(K(at=>new wr(a,at)));if(0===U.length&&0===ne.length)return An(new wr(a,{}));const Pe=Za(r)===o;return this.expandSegment(E,Ce,U,ne,Pe?dr:o,!0).pipe(K(je=>new wr(a.concat(je.segments),je.children)))})):oy(e)}getChildConfig(t,e,r){return e.children?An(new UE(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?An(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe(Yn(i=>i?this.configLoader.load(t.injector,e).pipe(K(o=>(e._loadedConfig=o,o))):function Qre(n){return vp(TE(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):An(new UE([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;return i&&0!==i.length?An(i.map(s=>{const a=t.get(s);let l;if(function jre(n){return n&&rd(n.canLoad)}(a))l=a.canLoad(e,r);else{if(!rd(a))throw new Error("Invalid CanLoad guard");l=a(e,r)}return gc(l)})).pipe(ry(),Mo(s=>{if(!vh(s))return;const a=TE(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),K(s=>!0===s)):An(!0)}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return An(r);if(i.numberOfChildren>1||!i.children[dr])return vp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[dr]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new mh(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Yo(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let s={};return Yo(e.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,r,i)}),new wr(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function VE(n){const t={};for(const r of Object.keys(n.children)){const o=VE(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function nie(n){if(1===n.numberOfChildren&&n.children[dr]){const t=n.children[dr];return new wr(n.segments.concat(t.segments),t.children)}return n}(new wr(n.segments,t))}class V4{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class q_{constructor(t,e){this.component=t,this.route=e}}function iie(n,t,e){const r=n._root;return sy(r,t?t._root:null,e,[r.value])}function J_(n,t,e){const r=function sie(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function sy(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=wp(t);return n.children.forEach(s=>{(function aie(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function lie(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!yh(n.url,t.url);case"pathParamsOrQueryParamsChange":return!yh(n.url,t.url)||!pc(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FE(n,t)||!pc(n.queryParams,t.queryParams);default:return!FE(n,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new V4(r)):(o.data=s.data,o._resolvedData=s._resolvedData),sy(n,t,o.component?a?a.children:null:e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new q_(a.outlet.component,s))}else s&&ay(t,a,i),i.canActivateChecks.push(new V4(r)),sy(n,null,o.component?a?a.children:null:e,r,i)})(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Yo(o,(s,a)=>ay(s,e.getContext(a),i)),i}function ay(n,t,e){const r=wp(n),i=n.value;Yo(r,(o,s)=>{ay(o,i.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new q_(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class yie{}function z4(n){return new de(t=>t.error(n))}class _ie{constructor(t,e,r,i,o,s){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const t=$_(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,dr);if(null===e)return null;const r=new H_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},dr,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new lu(r,e),o=new k4(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const e=t.value,r=A4(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const o of Object.keys(e.children)){const s=e.children[o],a=N4(t,o),l=this.processSegmentGroup(a,s,o);if(null===l)return null;r.push(...l)}const i=W4(r);return function bie(n){n.sort((t,e)=>t.value.outlet===dr?-1:e.value.outlet===dr?1:t.value.outlet.localeCompare(e.value.outlet))}(i),i}processSegment(t,e,r,i){for(const o of t){const s=this.processSegmentAgainstRoute(o,e,r,i);if(null!==s)return s}return U4(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!B4(t,e,r,i))return null;let o,s=[],a=[];if("**"===t.path){const W=r.length>0?h4(r).parameters:{};o=new H_(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,G4(t),Za(t),t.component,t,$4(e),K4(e)+r.length,q4(t))}else{const W=W_(e,t,r);if(!W.matched)return null;s=W.consumedSegments,a=W.remainingSegments,o=new H_(s,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,G4(t),Za(t),t.component,t,$4(e),K4(e)+s.length,q4(t))}const l=function wie(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:d}=$_(e,s,a,l.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===d.length&&c.hasChildren()){const W=this.processChildren(l,c);return null===W?null:[new lu(o,W)]}if(0===l.length&&0===d.length)return[new lu(o,[])];const E=Za(t)===i,U=this.processSegment(l,c,d,E?dr:i);return null===U?null:[new lu(o,U)]}}function xie(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function W4(n){const t=[],e=new Set;for(const r of n){if(!xie(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=W4(r.children);t.push(new lu(r.value,i))}return t.filter(r=>!e.has(r))}function $4(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function K4(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function G4(n){return n.data||{}}function q4(n){return n.resolve||{}}function J4(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zE(n){return Ja(t=>{const e=n(t);return e?Q(e).pipe(K(()=>t)):An(t)})}class Mie extends class Tie{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const WE=new Ot("ROUTES");class Z4{constructor(t,e,r,i){this.injector=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe(K(o=>{this.onLoadEndListener&&this.onLoadEndListener(e);const s=o.create(t);return new UE(d4(s.injector.get(WE,void 0,Cn.Self|Cn.Optional)).map(HE),s)}),su(o=>{throw e._loader$=void 0,o}));return e._loader$=new Wne(i,()=>new Ne).pipe(Q3()),e._loader$}loadModuleFactory(t){return gc(t()).pipe(Yn(e=>e instanceof oL?An(e):Q(this.compiler.compileModuleAsync(e))))}}class Rie{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Oie(n){throw n}function Pie(n,t,e){return t.parse("/")}function Y4(n,t){return An(null)}const Fie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ei=(()=>{class n{constructor(e,r,i,o,s,a,l){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ne,this.errorHandler=Oie,this.malformedUriErrorHandler=Pie,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Y4,afterPreactivation:Y4},this.urlHandlingStrategy=new Rie,this.routeReuseStrategy=new Mie,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(tu),this.console=s.get(qQ);const E=s.get(Vn);this.isNgZoneEnabled=E instanceof Vn&&Vn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function lre(){return new mh(new wr([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Z4(s,a,U=>this.triggerEvent(new s4(U)),U=>this.triggerEvent(new a4(U))),this.routerState=E4(this.currentUrlTree,this.rootComponentType),this.transitions=new Bs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(si(i=>0!==i.id),K(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ja(i=>{let o=!1,s=!1;return An(i).pipe(Mo(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ja(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return X4(a.source)&&(this.browserUrlTree=a.extractedUrl),An(a).pipe(Ja(E=>{const U=this.transitions.getValue();return r.next(new DE(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),U!==this.transitions.getValue()?qo:Promise.resolve(E)}),function rie(n,t,e,r){return Ja(i=>function eie(n,t,e,r,i){return new tie(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe(K(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Mo(E=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:E.urlAfterRedirects})}),function Sie(n,t,e,r,i){return Yn(o=>function vie(n,t,e,r,i="emptyOnly",o="legacy"){try{const s=new _ie(n,t,e,r,i,o).recognize();return null===s?z4(new yie):An(s)}catch(s){return z4(s)}}(n,t,o.urlAfterRedirects,e(o.urlAfterRedirects),r,i).pipe(K(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,E=>this.serializeUrl(E),this.paramsInheritanceStrategy,this.relativeLinkResolution),Mo(E=>{if("eager"===this.urlUpdateStrategy){if(!E.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);this.setBrowserUrl(W,E)}this.browserUrlTree=E.urlAfterRedirects}const U=new Jne(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);r.next(U)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:U,extractedUrl:W,source:ne,restoredState:Ce,extras:Pe}=a,Qe=new DE(U,this.serializeUrl(W),ne,Ce);r.next(Qe);const je=E4(W,this.rootComponentType).snapshot;return An(Object.assign(Object.assign({},a),{targetSnapshot:je,urlAfterRedirects:W,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),qo}),zE(a=>{const{targetSnapshot:l,id:c,extractedUrl:d,rawUrl:E,extras:{skipLocationChange:U,replaceUrl:W}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:d,rawUrlTree:E,skipLocationChange:!!U,replaceUrl:!!W})}),Mo(a=>{const l=new Zne(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),K(a=>Object.assign(Object.assign({},a),{guards:iie(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function cie(n,t){return Yn(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?An(Object.assign(Object.assign({},e),{guardsResult:!0})):function uie(n,t,e,r){return Q(n).pipe(Yn(i=>function mie(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?An(o.map(a=>{const l=J_(a,t,i);let c;if(function zre(n){return n&&rd(n.canDeactivate)}(l))c=gc(l.canDeactivate(n,t,e,r));else{if(!rd(l))throw new Error("Invalid CanDeactivate guard");c=gc(l(n,t,e,r))}return c.pipe(gh())})).pipe(ry()):An(!0)}(i.component,i.route,e,t,r)),gh(i=>!0!==i,!0))}(s,r,i,n).pipe(Yn(a=>a&&function Ure(n){return"boolean"==typeof n}(a)?function die(n,t,e,r){return Q(t).pipe(_p(i=>P_(function fie(n,t){return null!==n&&t&&t(new ere(n)),An(!0)}(i.route.parent,r),function hie(n,t){return null!==n&&t&&t(new nre(n)),An(!0)}(i.route,r),function gie(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function oie(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>F_(()=>An(s.guards.map(l=>{const c=J_(l,s.node,e);let d;if(function Vre(n){return n&&rd(n.canActivateChild)}(c))d=gc(c.canActivateChild(r,n));else{if(!rd(c))throw new Error("Invalid CanActivateChild guard");d=gc(c(r,n))}return d.pipe(gh())})).pipe(ry())));return An(o).pipe(ry())}(n,i.path,e),function pie(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return An(!0);const i=r.map(o=>F_(()=>{const s=J_(o,t,e);let a;if(function Hre(n){return n&&rd(n.canActivate)}(s))a=gc(s.canActivate(t,n));else{if(!rd(s))throw new Error("Invalid CanActivate guard");a=gc(s(t,n))}return a.pipe(gh())}));return An(i).pipe(ry())}(n,i.route,e))),gh(i=>!0!==i,!0))}(r,o,n,t):An(a)),K(a=>Object.assign(Object.assign({},e),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Mo(a=>{if(vh(a.guardsResult)){const c=TE(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new Yne(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),si(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),zE(a=>{if(a.guards.canActivateChecks.length)return An(a).pipe(Mo(l=>{const c=new Xne(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ja(l=>{let c=!1;return An(l).pipe(function Cie(n,t){return Yn(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return An(e);let o=0;return Q(i).pipe(_p(s=>function Eie(n,t,e,r){return function Aie(n,t,e,r){const i=J4(n);if(0===i.length)return An({});const o={};return Q(i).pipe(Yn(s=>function kie(n,t,e,r){const i=J_(n,t,r);return gc(i.resolve?i.resolve(t,e):i(t,e))}(n[s],t,e,r).pipe(Mo(a=>{o[s]=a}))),kE(1),Yn(()=>J4(o).length===i.length?An(o):qo))}(n._resolve,n,t,r).pipe(K(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),A4(n,e).resolve),null)))}(s.route,r,n,t)),Mo(()=>o++),kE(1),Yn(s=>o===i.length?An(e):qo))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Mo({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Mo(l=>{const c=new Qne(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),zE(a=>{const{targetSnapshot:l,id:c,extractedUrl:d,rawUrl:E,extras:{skipLocationChange:U,replaceUrl:W}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:d,rawUrlTree:E,skipLocationChange:!!U,replaceUrl:!!W})}),K(a=>{const l=function Are(n,t,e){const r=ey(n,t._root,e?e._root:void 0);return new C4(r,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),Mo(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>K(r=>(new Lre(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Mo({next(){o=!0},complete(){o=!0}}),r4(()=>{var a;o||s||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),su(a=>{if(s=!0,function ore(n){return n&&n[c4]}(a)){const l=vh(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new o4(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const d=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||X4(i.source)};this.scheduleNavigation(d,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new qne(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return qo}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},s=(null===(i=e.state)||void 0===i?void 0:i.navigationId)?e.state:null;if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(e.url);this.scheduleNavigation(a,r,s,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){F4(e),this.config=e.map(HE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,d=l?this.currentUrlTree.fragment:s;let E=null;switch(a){case"merge":E=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=o||null}return null!==E&&(E=this.removeEmptyProps(E)),function Tre(n,t,e,r,i){if(0===e.length)return NE(t.root,t.root,t.root,r,i);const o=function Mre(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new M4(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Yo(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new M4(e,t,r)}(e);if(o.toRoot())return NE(t.root,t.root,new wr([],{}),r,i);const s=function Ire(n,t,e){if(n.isAbsolute)return new LE(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const o=e.snapshot._urlSegment;return new LE(o,o===t.root,0)}const r=V_(n.commands[0])?0:1;return function Rre(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new LE(r,!1,i-o)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,t,n),a=s.processChildren?z_(s.segmentGroup,s.index,o.commands):I4(s.segmentGroup,s.index,o.commands);return NE(t.root,s.segmentGroup,a,r,i)}(c,this.currentUrlTree,e,E,null!=d?d:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=vh(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function Lie(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},Fie):!1===r?Object.assign({},Nie):r,vh(e))return p4(this.currentUrlTree,e,i);const o=this.parseUrl(e);return p4(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ym(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,o,s){var a,l;if(this.disposed)return Promise.resolve(!1);let c,d,E;s?(c=s.resolve,d=s.reject,E=s.promise):E=new Promise((ne,Ce)=>{c=ne,d=Ce});const U=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),W=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):W=0,this.setTransition({id:U,targetPageId:W,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:c,reject:d,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(ne=>Promise.reject(ne))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(e,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new o4(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){km()},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();function X4(n){return"imperative"!==n}let xp=(()=>{class n{constructor(e,r,i,o,s){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.commands=null,this.onChanges=new Ne,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==e?r.setAttribute(i,"tabindex",e):r.removeAttribute(i,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Sp(this.skipLocationChange),replaceUrl:Sp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Sp(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(xe(Ei),xe(Il),Zs("tabindex"),xe(uc),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&At("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Si]}),n})(),ly=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ne,this.subscription=e.events.subscribe(o=>{o instanceof Ym&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,i,o,s){if(0!==e||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Sp(this.skipLocationChange),replaceUrl:Sp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Sp(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(xe(Ei),xe(Il),xe(yp))},n.\u0275dir=bt({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&At("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&e&&tr("target",r.target)("href",r.href,rh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Si]}),n})();function Sp(n){return""===n||!!n}let Q4=(()=>{class n{constructor(e,r,i,o,s,a){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Mn,this.routerEventsSubscription=e.events.subscribe(l=>{l instanceof Ym&&this.update()})}ngAfterContentInit(){An(this.links.changes,this.linksWithHrefs.changes,An(null)).pipe(Es()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Q(r).pipe(Es()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function Bie(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&e.isActive(i.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(Ei),xe(vn),xe(uc),xe(Ni),xe(xp,8),xe(ly,8))},n.\u0275dir=bt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,i){if(1&e&&(pr(i,xp,5),pr(i,ly,5)),2&e){let o;un(o=dn())&&(r.links=o),un(o=dn())&&(r.linksWithHrefs=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Si]}),n})();class e8{}class t8{preload(t,e){return An(null)}}let n8=(()=>{class n{constructor(e,r,i,o){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new Z4(i,r,l=>e.triggerEvent(new s4(l)),l=>e.triggerEvent(new a4(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(si(e=>e instanceof Ym),_p(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(tu);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;i.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(e,o)):o.children&&i.push(this.processRoutes(e,o.children));return Q(i).pipe(Es(),K(o=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?An(r._loadedConfig):this.loader.load(e.injector,r)).pipe(Yn(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(lt(Ei),lt(zL),lt(Ci),lt(e8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),$E=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof DE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ym&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof l4&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new l4(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){km()},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const _h=new Ot("ROUTER_CONFIGURATION"),r8=new Ot("ROUTER_FORROOT_GUARD"),jie=[Wm,{provide:v4,useClass:_4},{provide:Ei,useFactory:function $ie(n,t,e,r,i,o,s={},a,l){const c=new Ei(null,n,t,e,r,i,d4(o));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function Kie(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(s,c),s.enableTracing&&c.events.subscribe(d=>{var E,U;null===(E=console.group)||void 0===E||E.call(console,`Router Event: ${d.constructor.name}`),console.log(d.toString()),console.log(d),null===(U=console.groupEnd)||void 0===U||U.call(console)}),c},deps:[v4,iy,Wm,Ci,zL,WE,_h,[class Iie{},new za],[class Die{},new za]]},iy,{provide:Il,useFactory:function Gie(n){return n.routerState.root},deps:[Ei]},n8,t8,class Uie{preload(t,e){return e().pipe(su(()=>An(null)))}},{provide:_h,useValue:{enableTracing:!1}}];function Hie(){return new qL("Router",Ei)}let o8=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[jie,s8(e),{provide:r8,useFactory:Wie,deps:[[Ei,new za,new th]]},{provide:_h,useValue:r||{}},{provide:yp,useFactory:zie,deps:[hh,[new Uv(oE),new za],_h]},{provide:$E,useFactory:Vie,deps:[Ei,Yte,_h]},{provide:e8,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:t8},{provide:qL,multi:!0,useFactory:Hie},[KE,{provide:g_,multi:!0,useFactory:qie,deps:[KE]},{provide:a8,useFactory:Jie,deps:[KE]},{provide:VL,multi:!0,useExisting:a8}]]}}static forChild(e){return{ngModule:n,providers:[s8(e)]}}}return n.\u0275fac=function(e){return new(e||n)(lt(r8,8),lt(Ei,8))},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();function Vie(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new $E(n,t,e)}function zie(n,t,e={}){return e.useHash?new jee(n,t):new p3(n,t)}function Wie(n){return"guarded"}function s8(n){return[{provide:MG,multi:!0,useValue:n},{provide:WE,multi:!0,useValue:n}]}let KE=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ne}appInitializer(){return this.injector.get(Lee,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),o=this.injector.get(Ei),s=this.injector.get(_h);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?An(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(_h),i=this.injector.get(n8),o=this.injector.get($E),s=this.injector.get(Ei),a=this.injector.get(uh);e===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),i.setUpPreloading(),o.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(lt(Ci))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();function qie(n){return n.appInitializer.bind(n)}function Jie(n){return n.bootstrapListener.bind(n)}const a8=new Ot("Router Initializer"),Yie=new Ot("cdk-dir-doc",{providedIn:"root",factory:function Xie(){return hm(zn)}}),Qie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let GE,id=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Mn,e){const i=e.documentElement?e.documentElement.dir:null;this.value=function eoe(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Qie.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(lt(Yie,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();try{GE="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){GE=!1}let Cp,ps=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Gm(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!GE)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(lt(Vm))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c8=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function u8(){if(Cp)return Cp;if("object"!=typeof document||!document)return Cp=new Set(c8),Cp;let n=document.createElement("input");return Cp=new Set(c8.filter(t=>(n.setAttribute("type",t),n.type===t))),Cp}let uy,bh,qE;function Ep(n){return function toe(){if(null==uy&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>uy=!0}))}finally{uy=uy||!1}return uy}()?n:!!n.capture}function noe(){if(null==bh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return bh=!1,bh;if("scrollBehavior"in document.documentElement.style)bh=!0;else{const n=Element.prototype.scrollTo;bh=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return bh}function JE(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function od(n){return n.composedPath?n.composedPath()[0]:n.target}function ZE(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function mc(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class goe extends w{constructor(t,e){super()}schedule(t,e=0){return this}}const eb={setInterval(n,t,...e){const{delegate:r}=eb;return(null==r?void 0:r.setInterval)?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=eb;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0};class QE extends goe{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,r=0){return eb.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;eb.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,p(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const f8={now:()=>(f8.delegate||Date).now(),delegate:void 0};class fy{constructor(t,e=fy.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}fy.now=f8.now;class eA extends fy{constructor(t,e=fy.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}const tb=new eA(QE),moe=tb;function tA(n,t=tb){return ie((e,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function l(){const c=s+n,d=t.now();if(d<c)return i=this.schedule(void 0,c-d),void r.add(i);a()}e.subscribe($(r,c=>{o=c,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function p8(n,t=Te){return n=null!=n?n:voe,ie((e,r)=>{let i,o=!0;e.subscribe($(r,s=>{const a=t(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function voe(n,t){return n===t}function Ji(n){return ie((t,e)=>{Or(n).subscribe($(e,()=>e.complete(),L)),!e.closed&&t.subscribe(e)})}function Mr(n){return null!=n&&"false"!=`${n}`}function Ap(n,t=0){return function _oe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function g8(n){return Array.isArray(n)?n:[n]}function yo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function cu(n){return n instanceof vn?n.nativeElement:n}let m8=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),woe=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=cu(e);return new de(i=>{const s=this._observeElement(r).subscribe(i);return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new Ne,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:i}=this._observedElements.get(e);r&&r.disconnect(),i.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(lt(m8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nA=(()=>{class n{constructor(e,r,i){this._contentObserver=e,this._elementRef=r,this._ngZone=i,this.event=new Mn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Mr(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Ap(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(tA(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(woe),xe(vn),xe(Vn))},n.\u0275dir=bt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),nb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[m8]}),n})();class _8{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ne,this._typeaheadSubscription=w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Ne,this.change=new Ne,t instanceof lh&&t.changes.subscribe(e=>{if(this._activeItem){const i=e.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Mo(e=>this._pressedLetters.push(e)),tA(t),si(()=>this._pressedLetters.length>0),K(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,s=r[o];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||mc(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t),i=e[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const i=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof lh?this._items.toArray():this._items}}class Coe extends _8{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class rA extends _8{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let b8=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Aoe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function Eoe(n){try{return n.frameElement}catch(t){return null}}(function Poe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(r&&(-1===x8(r)||!this.isVisible(r)))return!1;let i=e.nodeName.toLowerCase(),o=x8(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Roe(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function Ooe(n){return!function Doe(n){return function Moe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function koe(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function Toe(n){return function Ioe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||w8(n))}(e)&&!this.isDisabled(e)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(lt(ps))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function w8(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function x8(n){if(!w8(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Foe{constructor(t,e,r,i,o=!1){this._element=t,this._checker=e,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return null==r||r.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=0;r<e.length;r++){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(i)return i}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=e.length-1;r>=0;r--){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(i)return i}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ke(1)).subscribe(t)}}let Noe=(()=>{class n{constructor(e,r,i){this._checker=e,this._ngZone=r,this._document=i}create(e,r=!1){return new Foe(e,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(e){return new(e||n)(lt(b8),lt(Vn),lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iA(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function oA(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Loe=new Ot("cdk-input-modality-detector-options"),Boe={ignoreKeys:[18,17,224,91,16]},kp=Ep({passive:!0,capture:!0});let Uoe=(()=>{class n{constructor(e,r,i,o){this._platform=e,this._mostRecentTarget=null,this._modality=new Bs(null),this._lastTouchMs=0,this._onKeydown=s=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===s.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=od(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(iA(s)?"keyboard":"mouse"),this._mostRecentTarget=od(s))},this._onTouchstart=s=>{oA(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=od(s))},this._options=Object.assign(Object.assign({},Boe),o),this.modalityDetected=this._modality.pipe(function yoe(n){return si((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(p8()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,kp),i.addEventListener("mousedown",this._onMousedown,kp),i.addEventListener("touchstart",this._onTouchstart,kp)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,kp),document.removeEventListener("mousedown",this._onMousedown,kp),document.removeEventListener("touchstart",this._onTouchstart,kp))}}return n.\u0275fac=function(e){return new(e||n)(lt(ps),lt(Vn),lt(zn),lt(Loe,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hoe=new Ot("cdk-focus-monitor-default-options"),rb=Ep({passive:!0,capture:!0});let sd=(()=>{class n{constructor(e,r,i,o,s){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ne,this._rootNodeFocusAndBlurListener=a=>{const l=od(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let d=l;d;d=d.parentElement)c.call(this,a,d)},this._document=o,this._detectionMode=(null==s?void 0:s.detectionMode)||0}monitor(e,r=!1){const i=cu(e);if(!this._platform.isBrowser||1!==i.nodeType)return An(null);const o=function ioe(n){if(function roe(){if(null==qE){const n="undefined"!=typeof document?document.head:null;qE=!(!n||!n.createShadowRoot&&!n.attachShadow)}return qE}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const a={checkChildren:r,subject:new Ne,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const r=cu(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const o=cu(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),o=od(e);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,rb),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,rb)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ji(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rb),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rb),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&r.push([o,i])}),r}}return n.\u0275fac=function(e){return new(e||n)(lt(Vn),lt(ps),lt(Uoe),lt(zn,8),lt(Hoe,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const C8="cdk-high-contrast-black-on-white",E8="cdk-high-contrast-white-on-black",sA="cdk-high-contrast-active";let A8=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(sA),e.remove(C8),e.remove(E8),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(sA),e.add(C8)):2===r&&(e.add(sA),e.add(E8))}}}return n.\u0275fac=function(e){return new(e||n)(lt(ps),lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Voe=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(lt(A8))},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[nb]]}),n})();class k8{}const uu="*";function yc(n,t){return{type:7,name:n,definitions:t,options:{}}}function ea(n,t=null){return{type:4,styles:t,timings:n}}function D8(n,t=null){return{type:3,steps:n,options:t}}function T8(n,t=null){return{type:2,steps:n,options:t}}function Yr(n){return{type:6,styles:n,offset:null}}function Xo(n,t,e){return{type:0,name:n,styles:t,options:e}}function Us(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function aA(n=null){return{type:9,options:n}}function lA(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function M8(n){Promise.resolve(null).then(n)}class py{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){M8(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class I8{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?M8(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const xr=!1;function R8(n){return new Oe(3e3,xr)}function Cse(){return"undefined"!=typeof window&&void 0!==window.document}function uA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ad(n){switch(n.length){case 0:return new py;case 1:return n[0];default:return new I8(n)}}function O8(n,t,e,r,i={},o={}){const s=[],a=[];let l=-1,c=null;if(r.forEach(d=>{const E=d.offset,U=E==l,W=U&&c||{};Object.keys(d).forEach(ne=>{let Ce=ne,Pe=d[ne];if("offset"!==ne)switch(Ce=t.normalizePropertyName(Ce,s),Pe){case"!":Pe=i[ne];break;case uu:Pe=o[ne];break;default:Pe=t.normalizeStyleValue(ne,Ce,Pe,s)}W[Ce]=Pe}),U||a.push(W),c=W,l=E}),s.length)throw function fse(n){return new Oe(3502,xr)}();return a}function dA(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&hA(e,"start",n)));break;case"done":n.onDone(()=>r(e&&hA(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&hA(e,"destroy",n)))}}function hA(n,t,e){const r=e.totalTime,o=fA(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),s=n._data;return null!=s&&(o._data=s),o}function fA(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function ba(n,t,e){let r;return n instanceof Map?(r=n.get(t),r||n.set(t,r=e)):(r=n[t],r||(r=n[t]=e)),r}function P8(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let pA=(n,t)=>!1,F8=(n,t,e)=>[],N8=null;function gA(n){const t=n.parentNode||n.host;return t===N8?null:t}(uA()||"undefined"!=typeof Element)&&(Cse()?(N8=(()=>document.documentElement)(),pA=(n,t)=>{for(;t;){if(t===n)return!0;t=gA(t)}return!1}):pA=(n,t)=>n.contains(t),F8=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let wh=null,L8=!1;function B8(n){wh||(wh=function Ase(){return"undefined"!=typeof document?document.body:null}()||{},L8=!!wh.style&&"WebkitAppearance"in wh.style);let t=!0;return wh.style&&!function Ese(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in wh.style,!t&&L8&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in wh.style)),t}const U8=pA,j8=F8;let H8=(()=>{class n{validateStyleProperty(e){return B8(e)}matchesElement(e,r){return!1}containsElement(e,r){return U8(e,r)}getParentElement(e){return gA(e)}query(e,r,i){return j8(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],l){return new py(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),mA=(()=>{class n{}return n.NOOP=new H8,n})();const yA="ng-enter",ob="ng-leave",sb="ng-trigger",ab=".ng-trigger",z8="ng-animating",vA=".ng-animating";function xh(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:_A(parseFloat(t[1]),t[2])}function _A(n,t){return"s"===t?1e3*n:n}function lb(n,t,e){return n.hasOwnProperty("duration")?n:function Tse(n,t,e){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(R8()),{duration:0,delay:0,easing:""};i=_A(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=_A(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(function $oe(){return new Oe(3100,xr)}()),a=!0),o<0&&(t.push(function Koe(){return new Oe(3101,xr)}()),a=!0),a&&t.splice(l,0,R8())}return{duration:i,delay:o,easing:s}}(n,t,e)}function Dp(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function ld(n,t,e={}){if(t)for(let r in n)e[r]=n[r];else Dp(n,e);return e}function $8(n,t,e){return e?t+":"+e+";":""}function K8(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=$8(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=$8(0,Rse(e),n.style[e]));n.setAttribute("style",t)}function vc(n,t,e){n.style&&(Object.keys(t).forEach(r=>{const i=wA(r);e&&!e.hasOwnProperty(r)&&(e[r]=n.style[i]),n.style[i]=t[r]}),uA()&&K8(n))}function Sh(n,t){n.style&&(Object.keys(t).forEach(e=>{const r=wA(e);n.style[r]=""}),uA()&&K8(n))}function gy(n){return Array.isArray(n)?1==n.length?n[0]:T8(n):n}const bA=new RegExp("{{\\s*(.+?)\\s*}}","g");function G8(n){let t=[];if("string"==typeof n){let e;for(;e=bA.exec(n);)t.push(e[1]);bA.lastIndex=0}return t}function cb(n,t,e){const r=n.toString(),i=r.replace(bA,(o,s)=>{let a=t[s];return t.hasOwnProperty(s)||(e.push(function qoe(n){return new Oe(3003,xr)}()),a=""),a.toString()});return i==r?n:i}function ub(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Ise=/-+([a-z0-9])/g;function wA(n){return n.replace(Ise,(...t)=>t[1].toUpperCase())}function Rse(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wa(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Joe(n){return new Oe(3004,xr)}()}}function q8(n,t){return window.getComputedStyle(n)[t]}function Bse(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Use(n,t,e){if(":"==n[0]){const l=function jse(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function cse(n){return new Oe(3016,xr)}()),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function lse(n){return new Oe(3015,xr)}()),t;const i=r[1],o=r[2],s=r[3];t.push(J8(i,s));"<"==o[0]&&!("*"==i&&"*"==s)&&t.push(J8(s,i))}(r,e,t)):e.push(n),e}const pb=new Set(["true","1"]),gb=new Set(["false","0"]);function J8(n,t){const e=pb.has(n)||gb.has(n),r=pb.has(t)||gb.has(t);return(i,o)=>{let s="*"==n||n==i,a="*"==t||t==o;return!s&&e&&"boolean"==typeof i&&(s=i?pb.has(n):gb.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?pb.has(t):gb.has(t)),s&&a}}const Hse=new RegExp("s*:selfs*,?","g");function xA(n,t,e,r){return new Vse(n).build(t,e,r)}class Vse{constructor(t){this._driver=t}build(t,e,r){const i=new $se(e);this._resetContextStyleTimingState(i);const o=wa(this,gy(t),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function Yoe(){return new Oe(3006,xr)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,s.push(l)}else e.errors.push(function Xoe(){return new Oe(3007,xr)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{if(mb(a)){const l=a;Object.keys(l).forEach(c=>{G8(l[c]).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}}),o.size&&(ub(o.values()),e.errors.push(function Qoe(n,t){return new Oe(3008,xr)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=wa(this,gy(t.animation),e);return{type:1,matchers:Bse(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Ch(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>wa(this,r,e)),options:Ch(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(s=>{e.currentTime=r;const a=wa(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:o,options:Ch(t.options)}}visitAnimate(t,e){const r=function Gse(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return SA(lb(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=SA(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=lb(e,t);return SA(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:Yr({});if(5==o.type)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const c={};r.easing&&(c.easing=r.easing),s=Yr(c)}e.currentTime+=r.duration+r.delay;const l=this.visitStyle(s,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(s=>{"string"==typeof s?s==uu?r.push(s):e.errors.push(function ese(n){return new Oe(3002,xr)}()):r.push(s)}):r.push(t.styles);let i=!1,o=null;return r.forEach(s=>{if(mb(s)){const a=s,l=a.easing;if(l&&(o=l,delete a.easing),!i)for(let c in a)if(a[c].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:o,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{"string"!=typeof s&&Object.keys(s).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete s[a],void e.unsupportedCSSPropertiesFound.add(a);const l=e.collectedStyles[e.currentQuerySelector],c=l[a];let d=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(e.errors.push(function tse(n,t,e,r,i){return new Oe(3010,xr)}()),d=!1),o=c.startTime),d&&(l[a]={startTime:o,endTime:i}),e.options&&function Mse(n,t,e){const r=t.params||{},i=G8(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function Goe(n){return new Oe(3001,xr)}())})}(s[a],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function nse(){return new Oe(3011,xr)}()),r;let o=0;const s=[];let a=!1,l=!1,c=0;const d=t.steps.map(Qe=>{const je=this._makeStyleAst(Qe,e);let at=null!=je.offset?je.offset:function Kse(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(mb(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(mb(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(je.styles),yt=0;return null!=at&&(o++,yt=je.offset=at),l=l||yt<0||yt>1,a=a||yt<c,c=yt,s.push(yt),je});l&&e.errors.push(function rse(){return new Oe(3012,xr)}()),a&&e.errors.push(function ise(){return new Oe(3200,xr)}());const E=t.steps.length;let U=0;o>0&&o<E?e.errors.push(function ose(){return new Oe(3202,xr)}()):0==o&&(U=1/(E-1));const W=E-1,ne=e.currentTime,Ce=e.currentAnimateTimings,Pe=Ce.duration;return d.forEach((Qe,je)=>{const at=U>0?je==W?1:U*je:s[je],yt=at*Pe;e.currentTime=ne+Ce.delay+yt,Ce.duration=yt,this._validateStyleAst(Qe,e),Qe.offset=at,r.styles.push(Qe)}),r}visitReference(t,e){return{type:8,animation:wa(this,gy(t.animation),e),options:Ch(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ch(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ch(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function zse(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Hse,"")),n=n.replace(/@\*/g,ab).replace(/@\w+/g,e=>ab+"-"+e.substr(1)).replace(/:animating/g,vA),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,ba(e.collectedStyles,e.currentQuerySelector,{});const a=wa(this,gy(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Ch(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function sse(){return new Oe(3013,xr)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:lb(t.timings,e.errors,!0);return{type:12,animation:wa(this,gy(t.animation),e),timings:r,options:null}}}class $se{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mb(n){return!Array.isArray(n)&&"object"==typeof n}function Ch(n){return n?(n=Dp(n)).params&&(n.params=function Wse(n){return n?Dp(n):null}(n.params)):n={},n}function SA(n,t,e){return{duration:n,delay:t,easing:e}}function CA(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class yb{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Zse=new RegExp(":enter","g"),Xse=new RegExp(":leave","g");function EA(n,t,e,r,i,o={},s={},a,l,c=[]){return(new Qse).buildKeyframes(n,t,e,r,i,o,s,a,l,c)}class Qse{buildKeyframes(t,e,r,i,o,s,a,l,c,d=[]){c=c||new yb;const E=new AA(t,e,c,i,o,d,[]);E.options=l,E.currentTimeline.setStyles([s],null,E.errors,l),wa(this,r,E);const U=E.timelines.filter(W=>W.containsAnimation());if(Object.keys(a).length){let W;for(let ne=U.length-1;ne>=0;ne--){const Ce=U[ne];if(Ce.element===e){W=Ce;break}}W&&!W.allowOnlyTimelineStyles()&&W.setStyles([a],null,E.errors,l)}return U.length?U.map(W=>W.buildKeyframes()):[CA(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const s=null!=r.duration?xh(r.duration):null,a=null!=r.delay?xh(r.delay):null;return 0!==s&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),wa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=vb);const s=xh(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>wa(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?xh(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),wa(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return lb(e.params?cb(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?xh(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=vb);let s=r;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const E=e.createSubContext(t.options,c);o&&E.delayNextStep(o),c===e.element&&(l=E.currentTimeline),wa(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const E=d.currentTime;wa(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-E+(i.startTime-r.currentTimeline.startTime)}}const vb={};class AA{constructor(t,e,r,i,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new _b(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=xh(r.duration)),null!=r.delay&&(i.delay=xh(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=cb(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new AA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=vb,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},o=new eae(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(Zse,"."+this._enterClassName)).replace(Xse,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&0==a.length&&s.push(function ase(n){return new Oe(3014,xr)}()),a}}class _b{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new _b(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||uu,this._currentKeyframe[e]=uu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&(this._previousKeyframe.easing=e);const o=i&&i.params||{},s=function tae(n,t){const e={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(t),r.forEach(o=>{e[o]=uu})):ld(i,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(s).forEach(a=>{const l=cb(s[a],o,r);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:uu),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],i=t._styleSummary[e];(!r||i.time>r.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=ld(a,!0);Object.keys(c).forEach(d=>{const E=c[d];"!"==E?t.add(d):E==uu&&e.add(d)}),r||(c.offset=l/this.duration),i.push(c)});const o=t.size?ub(t.values()):[],s=e.size?ub(e.values()):[];if(r){const a=i[0],l=Dp(a);a.offset=0,l.offset=1,i=[a,l]}return CA(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class eae extends _b{constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=r+e,a=e/s,l=ld(t[0],!1);l.offset=0,o.push(l);const c=ld(t[0],!1);c.offset=X8(a),o.push(c);const d=t.length-1;for(let E=1;E<=d;E++){let U=ld(t[E],!1);U.offset=X8((e+U.offset*r)/s),o.push(U)}r=s,e=0,i="",t=o}return CA(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function X8(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class kA{}class nae extends kA{normalizePropertyName(t,e){return wA(t)}normalizeStyleValue(t,e,r,i){let o="";const s=r.toString().trim();if(rae[e]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Zoe(n,t){return new Oe(3005,xr)}())}return s+o}}const rae=(()=>function iae(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Q8(n,t,e,r,i,o,s,a,l,c,d,E,U){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:E,errors:U}}const DA={};class e5{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function oae(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){const i=this._stateStyles["*"],o=this._stateStyles[t],s=i?i.buildStyles(e,r):{};return o?o.buildStyles(e,r):s}build(t,e,r,i,o,s,a,l,c,d){const E=[],U=this.ast.options&&this.ast.options.params||DA,ne=this.buildStyles(r,a&&a.params||DA,E),Ce=l&&l.params||DA,Pe=this.buildStyles(i,Ce,E),Qe=new Set,je=new Map,at=new Map,yt="void"===i,Ct={params:Object.assign(Object.assign({},U),Ce)},Vt=d?[]:EA(t,e,this.ast.animation,o,s,ne,Pe,Ct,c,E);let yn=0;if(Vt.forEach(Qn=>{yn=Math.max(Qn.duration+Qn.delay,yn)}),E.length)return Q8(e,this._triggerName,r,i,yt,ne,Pe,[],[],je,at,yn,E);Vt.forEach(Qn=>{const _r=Qn.element,Qi=ba(je,_r,{});Qn.preStyleProps.forEach(Gt=>Qi[Gt]=!0);const di=ba(at,_r,{});Qn.postStyleProps.forEach(Gt=>di[Gt]=!0),_r!==e&&Qe.add(_r)});const Bn=ub(Qe.values());return Q8(e,this._triggerName,r,i,yt,ne,Pe,Vt,Bn,je,at,yn)}}class sae{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},i=Dp(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!=s&&(i[o]=s)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const s=o;Object.keys(s).forEach(a=>{let l=s[a];l.length>1&&(l=cb(l,i,e));const c=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,c,l,e),r[c]=l})}}),r}}class lae{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(i=>{this.states[i.name]=new sae(i.style,i.options&&i.options.params||{},r)}),t5(this.states,"true","1"),t5(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new e5(t,i,this.states))}),this.fallbackTransition=function cae(n,t,e){return new e5(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function t5(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const uae=new yb;class dae{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],o=xA(this._driver,e,r,[]);if(r.length)throw function pse(n){return new Oe(3503,xr)}();this._animations[t]=o}_buildPlayer(t,e,r){const i=t.element,o=O8(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations[t];let s;const a=new Map;if(o?(s=EA(this._driver,e,o,yA,ob,{},{},r,uae,i),s.forEach(d=>{const E=ba(a,d.element,{});d.postStyleProps.forEach(U=>E[U]=null)})):(i.push(function gse(){return new Oe(3300,xr)}()),s=[]),i.length)throw function mse(n){return new Oe(3504,xr)}();a.forEach((d,E)=>{Object.keys(d).forEach(U=>{d[U]=this._driver.computeStyle(E,U,uu)})});const c=ad(s.map(d=>{const E=a.get(d.element);return this._buildPlayer(d,{},E)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function yse(n){return new Oe(3301,xr)}();return e}listen(t,e,r,i){const o=fA(e,"","","");return dA(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const n5="ng-animate-queued",TA="ng-animate-disabled",mae=[],r5={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ya="__ng_removed";class MA{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function wae(n){return null!=n?n:null}(r?t.value:t),r){const o=Dp(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const my="void",IA=new MA(my);class vae{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Xa(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.hasOwnProperty(e))throw function vse(n,t){return new Oe(3302,xr)}();if(null==r||0==r.length)throw function _se(n){return new Oe(3303,xr)}();if(!function xae(n){return"start"==n||"done"==n}(r))throw function bse(n,t){return new Oe(3400,xr)}();const o=ba(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);const a=ba(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Xa(t,sb),Xa(t,sb+"-"+e),a[e]=IA),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function wse(n){return new Oe(3401,xr)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),s=new RA(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Xa(t,sb),Xa(t,sb+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const c=new MA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l||(l=IA),c.value!==my&&l.value===c.value){if(!function Eae(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(l.params,c.params)){const Ce=[],Pe=o.matchStyles(l.value,l.params,Ce),Qe=o.matchStyles(c.value,c.params,Ce);Ce.length?this._engine.reportError(Ce):this._engine.afterFlush(()=>{Sh(t,Pe),vc(t,Qe)})}return}const U=ba(this._engine.playersByElement,t,[]);U.forEach(Ce=>{Ce.namespaceId==this.id&&Ce.triggerName==e&&Ce.queued&&Ce.destroy()});let W=o.matchTransition(l.value,c.value,t,c.params),ne=!1;if(!W){if(!i)return;W=o.fallbackTransition,ne=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:W,fromState:l,toState:c,player:s,isFallbackTransition:ne}),ne||(Xa(t,n5),s.onStart(()=>{Tp(t,n5)})),s.onDone(()=>{let Ce=this.players.indexOf(s);Ce>=0&&this.players.splice(Ce,1);const Pe=this._engine.playersByElement.get(t);if(Pe){let Qe=Pe.indexOf(s);Qe>=0&&Pe.splice(Qe,1)}}),this.players.push(s),U.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,ab,!0);r.forEach(i=>{if(i[Ya])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(Object.keys(o).forEach(l=>{if(s.set(l,o[l].value),this._triggers[l]){const c=this.trigger(t,l,my,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&ad(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const l=this._triggers[s].fallbackTransition,c=r[s]||IA,d=new MA(my),E=new RA(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:d,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Ya];(!o||o===r5)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Xa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const l=fA(o,r.triggerName,r.fromState.value,r.toState.value);l._data=t,dA(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class _ae{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new vae(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement,o=r.length-1;if(o>=0){let s=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(e);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}}else for(let a=o;a>=0;a--)if(this.driver.containsElement(r[a].hostElement,e)){r.splice(a+1,0,t),s=!0;break}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const i=Object.keys(r);for(let o=0;o<i.length;o++){const s=r[i[o]].namespaceId;if(s){const a=this._fetchNamespace(s);a&&e.add(a)}}}return e}trigger(t,e,r,i){if(bb(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!bb(e))return;const o=e[Ya];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Xa(t,TA)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Tp(t,TA))}removeNode(t,e,r,i){if(bb(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Ya]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return bb(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,ab,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,vA,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ad(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const r=t[Ya];if(r&&r.setForRemoval){if(t[Ya]=r5,r.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,r.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(TA))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Xa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?ad(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function xse(n){return new Oe(3402,xr)}()}_flushAnimations(t,e){const r=new yb,i=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(zt=>{d.add(zt);const Tn=this.driver.query(zt,".ng-animate-queued",!0);for(let Nn=0;Nn<Tn.length;Nn++)d.add(Tn[Nn])});const E=this.bodyNode,U=Array.from(this.statesByElement.keys()),W=a5(U,this.collectedEnterElements),ne=new Map;let Ce=0;W.forEach((zt,Tn)=>{const Nn=yA+Ce++;ne.set(Tn,Nn),zt.forEach(Br=>Xa(Br,Nn))});const Pe=[],Qe=new Set,je=new Set;for(let zt=0;zt<this.collectedLeaveElements.length;zt++){const Tn=this.collectedLeaveElements[zt],Nn=Tn[Ya];Nn&&Nn.setForRemoval&&(Pe.push(Tn),Qe.add(Tn),Nn.hasAnimation?this.driver.query(Tn,".ng-star-inserted",!0).forEach(Br=>Qe.add(Br)):je.add(Tn))}const at=new Map,yt=a5(U,Array.from(Qe));yt.forEach((zt,Tn)=>{const Nn=ob+Ce++;at.set(Tn,Nn),zt.forEach(Br=>Xa(Br,Nn))}),t.push(()=>{W.forEach((zt,Tn)=>{const Nn=ne.get(Tn);zt.forEach(Br=>Tp(Br,Nn))}),yt.forEach((zt,Tn)=>{const Nn=at.get(Tn);zt.forEach(Br=>Tp(Br,Nn))}),Pe.forEach(zt=>{this.processLeaveNode(zt)})});const Ct=[],Vt=[];for(let zt=this._namespaceList.length-1;zt>=0;zt--)this._namespaceList[zt].drainQueuedTransitions(e).forEach(Nn=>{const Br=Nn.player,$o=Nn.element;if(Ct.push(Br),this.collectedEnterElements.length){const Gs=$o[Ya];if(Gs&&Gs.setForMove){if(Gs.previousTriggersValues&&Gs.previousTriggersValues.has(Nn.triggerName)){const xf=Gs.previousTriggersValues.get(Nn.triggerName),Kd=this.statesByElement.get(Nn.element);Kd&&Kd[Nn.triggerName]&&(Kd[Nn.triggerName].value=xf)}return void Br.destroy()}}const Hc=!E||!this.driver.containsElement(E,$o),Ra=at.get($o),$d=ne.get($o),Vi=this._buildInstruction(Nn,r,$d,Ra,Hc);if(Vi.errors&&Vi.errors.length)return void Vt.push(Vi);if(Hc)return Br.onStart(()=>Sh($o,Vi.fromStyles)),Br.onDestroy(()=>vc($o,Vi.toStyles)),void i.push(Br);if(Nn.isFallbackTransition)return Br.onStart(()=>Sh($o,Vi.fromStyles)),Br.onDestroy(()=>vc($o,Vi.toStyles)),void i.push(Br);const PK=[];Vi.timelines.forEach(Gs=>{Gs.stretchStartingKeyframe=!0,this.disabledNodes.has(Gs.element)||PK.push(Gs)}),Vi.timelines=PK,r.append($o,Vi.timelines),s.push({instruction:Vi,player:Br,element:$o}),Vi.queriedElements.forEach(Gs=>ba(a,Gs,[]).push(Br)),Vi.preStyleProps.forEach((Gs,xf)=>{const Kd=Object.keys(Gs);if(Kd.length){let Sf=l.get(xf);Sf||l.set(xf,Sf=new Set),Kd.forEach(GR=>Sf.add(GR))}}),Vi.postStyleProps.forEach((Gs,xf)=>{const Kd=Object.keys(Gs);let Sf=c.get(xf);Sf||c.set(xf,Sf=new Set),Kd.forEach(GR=>Sf.add(GR))})});if(Vt.length){const zt=[];Vt.forEach(Tn=>{zt.push(function Sse(n,t){return new Oe(3505,xr)}())}),Ct.forEach(Tn=>Tn.destroy()),this.reportError(zt)}const yn=new Map,Bn=new Map;s.forEach(zt=>{const Tn=zt.element;r.has(Tn)&&(Bn.set(Tn,Tn),this._beforeAnimationBuild(zt.player.namespaceId,zt.instruction,yn))}),i.forEach(zt=>{const Tn=zt.element;this._getPreviousPlayers(Tn,!1,zt.namespaceId,zt.triggerName,null).forEach(Br=>{ba(yn,Tn,[]).push(Br),Br.destroy()})});const Qn=Pe.filter(zt=>c5(zt,l,c)),_r=new Map;s5(_r,this.driver,je,c,uu).forEach(zt=>{c5(zt,l,c)&&Qn.push(zt)});const di=new Map;W.forEach((zt,Tn)=>{s5(di,this.driver,new Set(zt),l,"!")}),Qn.forEach(zt=>{const Tn=_r.get(zt),Nn=di.get(zt);_r.set(zt,Object.assign(Object.assign({},Tn),Nn))});const Gt=[],er=[],Xr={};s.forEach(zt=>{const{element:Tn,player:Nn,instruction:Br}=zt;if(r.has(Tn)){if(d.has(Tn))return Nn.onDestroy(()=>vc(Tn,Br.toStyles)),Nn.disabled=!0,Nn.overrideTotalTime(Br.totalTime),void i.push(Nn);let $o=Xr;if(Bn.size>1){let Ra=Tn;const $d=[];for(;Ra=Ra.parentNode;){const Vi=Bn.get(Ra);if(Vi){$o=Vi;break}$d.push(Ra)}$d.forEach(Vi=>Bn.set(Vi,$o))}const Hc=this._buildAnimation(Nn.namespaceId,Br,yn,o,di,_r);if(Nn.setRealPlayer(Hc),$o===Xr)Gt.push(Nn);else{const Ra=this.playersByElement.get($o);Ra&&Ra.length&&(Nn.parentPlayer=ad(Ra)),i.push(Nn)}}else Sh(Tn,Br.fromStyles),Nn.onDestroy(()=>vc(Tn,Br.toStyles)),er.push(Nn),d.has(Tn)&&i.push(Nn)}),er.forEach(zt=>{const Tn=o.get(zt.element);if(Tn&&Tn.length){const Nn=ad(Tn);zt.setRealPlayer(Nn)}}),i.forEach(zt=>{zt.parentPlayer?zt.syncPlayerEvents(zt.parentPlayer):zt.destroy()});for(let zt=0;zt<Pe.length;zt++){const Tn=Pe[zt],Nn=Tn[Ya];if(Tp(Tn,ob),Nn&&Nn.hasAnimation)continue;let Br=[];if(a.size){let Hc=a.get(Tn);Hc&&Hc.length&&Br.push(...Hc);let Ra=this.driver.query(Tn,vA,!0);for(let $d=0;$d<Ra.length;$d++){let Vi=a.get(Ra[$d]);Vi&&Vi.length&&Br.push(...Vi)}}const $o=Br.filter(Hc=>!Hc.destroyed);$o.length?Sae(this,Tn,$o):this.processLeaveNode(Tn)}return Pe.length=0,Gt.forEach(zt=>{this.players.push(zt),zt.onDone(()=>{zt.destroy();const Tn=this.players.indexOf(zt);this.players.splice(Tn,1)}),zt.play()}),Gt}elementContainsData(t,e){let r=!1;const i=e[Ya];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==my;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==o,E=ba(r,c,[]);this._getPreviousPlayers(c,d,s,a,e.toState).forEach(W=>{const ne=W.getRealPlayer();ne.beforeDestroy&&ne.beforeDestroy(),W.destroy(),E.push(W)})}Sh(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){const a=e.triggerName,l=e.element,c=[],d=new Set,E=new Set,U=e.timelines.map(ne=>{const Ce=ne.element;d.add(Ce);const Pe=Ce[Ya];if(Pe&&Pe.removedBeforeQueried)return new py(ne.duration,ne.delay);const Qe=Ce!==l,je=function Cae(n){const t=[];return l5(n,t),t}((r.get(Ce)||mae).map(yn=>yn.getRealPlayer())).filter(yn=>!!yn.element&&yn.element===Ce),at=o.get(Ce),yt=s.get(Ce),Ct=O8(0,this._normalizer,0,ne.keyframes,at,yt),Vt=this._buildPlayer(ne,Ct,je);if(ne.subTimeline&&i&&E.add(Ce),Qe){const yn=new RA(t,a,Ce);yn.setRealPlayer(Vt),c.push(yn)}return Vt});c.forEach(ne=>{ba(this.playersByQueriedElement,ne.element,[]).push(ne),ne.onDone(()=>function bae(n,t,e){let r;if(n instanceof Map){if(r=n.get(t),r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}}else if(r=n[t],r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&delete n[t]}return r}(this.playersByQueriedElement,ne.element,ne))}),d.forEach(ne=>Xa(ne,z8));const W=ad(U);return W.onDestroy(()=>{d.forEach(ne=>Tp(ne,z8)),vc(l,e.toStyles)}),E.forEach(ne=>{ba(i,ne,[]).push(W)}),W}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new py(t.duration,t.delay)}}class RA{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new py,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>dA(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ba(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function bb(n){return n&&1===n.nodeType}function o5(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function s5(n,t,e,r,i){const o=[];e.forEach(l=>o.push(o5(l)));const s=[];r.forEach((l,c)=>{const d={};l.forEach(E=>{const U=d[E]=t.computeStyle(c,E,i);(!U||0==U.length)&&(c[Ya]=yae,s.push(c))}),n.set(c,d)});let a=0;return e.forEach(l=>o5(l,o[a++])),s}function a5(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const i=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:i.has(c)?1:s(c),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&e.get(l).push(a)}),e}function Xa(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function Tp(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function Sae(n,t,e){ad(e).onDone(()=>n.processLeaveNode(t))}function l5(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof I8?l5(r.players,t):t.push(r)}}function c5(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class wb{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new _ae(t,e,r),this._timelineEngine=new dae(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const s=t+"-"+i;let a=this._triggerCache[s];if(!a){const l=[],d=xA(this._driver,o,l,[]);if(l.length)throw function hse(n,t){return new Oe(3404,xr)}();a=function aae(n,t,e){return new lae(n,t,e)}(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,s]=P8(r);this._timelineEngine.command(o,e,s,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[s,a]=P8(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let kae=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&vc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vc(this._element,this._initialStyles),this._endStyles&&(vc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Sh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sh(this._element,this._endStyles),this._endStyles=null),vc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function OA(n){let t=null;const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=e[r];Dae(i)&&(t=t||{},t[i]=n[i])}return t}function Dae(n){return"display"===n||"position"===n}class u5{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(r=>{"offset"!=r&&(t[r]=this._finished?e[r]:q8(this.element,r))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Tae{validateStyleProperty(t){return B8(t)}matchesElement(t,e){return!1}containsElement(t,e){return U8(t,e)}getParentElement(t){return gA(t)}query(t,e,r){return j8(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,s=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(l.easing=o);const c={},d=s.filter(U=>U instanceof u5);(function Ose(n,t){return 0===n||0===t})(r,i)&&d.forEach(U=>{let W=U.currentSnapshot;Object.keys(W).forEach(ne=>c[ne]=W[ne])}),e=function Pse(n,t,e){const r=Object.keys(e);if(r.length&&t.length){let o=t[0],s=[];if(r.forEach(a=>{o.hasOwnProperty(a)||s.push(a),o[a]=e[a]}),s.length)for(var i=1;i<t.length;i++){let a=t[i];s.forEach(function(l){a[l]=q8(n,l)})}}return t}(t,e=e.map(U=>ld(U,!1)),c);const E=function Aae(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=OA(t[0]),t.length>1&&(r=OA(t[t.length-1]))):t&&(e=OA(t)),e||r?new kae(n,e,r):null}(t,e);return new u5(t,e,l,E)}}let Mae=(()=>{class n extends k8{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Js.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?T8(e):e;return d5(this._renderer,null,r,"register",[i]),new Iae(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(lt(Pm),lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();class Iae extends class zoe{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Rae(this._id,t,e||{},this._renderer)}}class Rae{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return d5(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function d5(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const h5="@.disabled";let Oae=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,s)=>{const a=null==s?void 0:s.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let d=this._rendererCache.get(o);return d||(d=new f5("",o,this.engine),this._rendererCache.set(o,d)),d}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(s,a,e,d.name,d)};return r.data.animation.forEach(l),new Pae(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(lt(Pm),lt(wb),lt(Vn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();class f5{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>e.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==h5?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Pae extends f5{constructor(t,e,r,i){super(e,r,i),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==h5?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function Fae(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.substr(1),s="";return"@"!=o.charAt(0)&&([o,s]=function Nae(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,e,r)}}let Lae=(()=>{class n extends wb{constructor(e,r,i){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(lt(zn),lt(mA),lt(kA))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const Qa=new Ot("AnimationModuleType"),p5=[{provide:k8,useClass:Mae},{provide:kA,useFactory:function Bae(){return new nae}},{provide:wb,useClass:Lae},{provide:Pm,useFactory:function Uae(n,t,e){return new Oae(n,t,e)},deps:[O_,wb,Vn]}],g5=[{provide:mA,useFactory:()=>new Tae},{provide:Qa,useValue:"BrowserAnimations"},...p5],jae=[{provide:mA,useClass:H8},{provide:Qa,useValue:"NoopAnimations"},...p5];let Hae=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?jae:g5}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:g5,imports:[K3]}),n})();function Vae(n,t){if(1&n&&qt(0,"mat-pseudo-checkbox",4),2&n){const e=_t();ut("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function zae(n,t){if(1&n&&(Le(0,"span",5),nt(1),Be()),2&n){const e=_t();it(1),Tr("(",e.group.label,")")}}const Wae=["*"],Kae=new Ot("mat-sanity-checks",{providedIn:"root",factory:function $ae(){return!0}});let ir=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!ZE()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(lt(A8),lt(Kae,8),lt(zn))},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[cy],cy]}),n})();function Mp(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Mr(t)}}}function Eh(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function du(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Mr(t)}}}function Sb(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Ap(e):this.defaultTabIndex}}}function Gae(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new Ne,this.errorState=!1}updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}}}let y5=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function yy(n,t,e){n.nativeElement.classList.toggle(t,e)}let b5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[ir],ir]}),n})();class Jae{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const w5={enterDuration:225,exitDuration:150},PA=Ep({passive:!0}),x5=["mousedown","touchstart"],S5=["mouseup","mouseleave","touchend","touchcancel"];class Yae{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=cu(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},w5),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const s=r.radius||function Qae(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),a=t-i.left,l=e-i.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=l-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=r.color&&(d.style.backgroundColor=r.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d),function Xae(n){window.getComputedStyle(n).getPropertyValue("opacity")}(d),d.style.transform="scale(1)";const E=new Jae(this,d,r);return E.state=0,this._activeRipples.add(E),r.persistent||(this._mostRecentTransientRipple=E),this._runTimeoutOutsideZone(()=>{const U=E===this._mostRecentTransientRipple;E.state=1,!r.persistent&&(!U||!this._isPointerDown)&&E.fadeOut()},c),E}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,i=Object.assign(Object.assign({},w5),t.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=cu(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(x5))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(S5),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=iA(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!oA(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,PA)})})}_removeTriggerEvents(){this._triggerElement&&(x5.forEach(t=>{this._triggerElement.removeEventListener(t,this,PA)}),this._pointerUpEventsRegistered&&S5.forEach(t=>{this._triggerElement.removeEventListener(t,this,PA)}))}}const ele=new Ot("mat-ripple-global-options");let hu=(()=>{class n{constructor(e,r,i,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Yae(this,r,e,i)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Vn),xe(ps),xe(ele,8),xe(Qa,8))},n.\u0275dir=bt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&br("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Ip=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[ir],ir]}),n})(),C5=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(xe(Qa,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,r){2&e&&br("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),FA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[ir]]}),n})();const E5=new Ot("MAT_OPTION_PARENT_COMPONENT"),A5=new Ot("MatOptgroup");let tle=0;class k5{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let nle=(()=>{class n{constructor(e,r,i,o){this._element=e,this._changeDetectorRef=r,this._parent=i,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+tle++,this.onSelectionChange=new Mn,this._stateChanges=new Ne}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Mr(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!mc(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new k5(this,e))}}return n.\u0275fac=function(e){km()},n.\u0275dir=bt({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),D5=(()=>{class n extends nle{constructor(e,r,i,o){super(e,r,i,o)}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Ni),xe(E5,8),xe(A5,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,r){1&e&&At("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&e&&(td("id",r.id),tr("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),br("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[Ht],ngContentSelectors:Wae,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,r){1&e&&(no(),vt(0,Vae,1,2,"mat-pseudo-checkbox",0),Le(1,"span",1),ur(2),Be(),vt(3,zae,2,1,"span",2),qt(4,"div",3)),2&e&&(ut("ngIf",r.multiple),it(3),ut("ngIf",r.group&&r.group._inert),it(1),ut("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},directives:[C5,gi,hu],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})(),Cb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Ip,Xs,ir,FA]]}),n})();const ole=["mat-button",""],sle=["*"],lle=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],cle=Eh(Mp(du(class{constructor(n){this._elementRef=n}})));let Qo=(()=>{class n extends cle{constructor(e,r,i){super(e),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of lle)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(sd),xe(Qa,8))},n.\u0275cmp=Jt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&Zr(hu,5),2&e){let i;un(i=dn())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(tr("disabled",r.disabled||null),br("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ht],attrs:ole,ngContentSelectors:sle,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(no(),Le(0,"span",0),ur(1),Be(),qt(2,"span",1)(3,"span",2)),2&e&&(it(2),br("mat-button-ripple-round",r.isRoundButton||r.isIconButton),ut("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[hu],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),T5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Ip,ir],ir]}),n})();const ule=function(){return["/"]};let dle=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Jt({type:n,selectors:[["app-page-not-found"]],decls:8,vars:2,consts:[[1,"box"],[2,"font-size","xxx-large","margin-top","5rem"],["width","250","src","assets/pagenotfound.png"],["mat-raised-button","","color","primary",1,"example-full-width",2,"width","15vw",3,"routerLink"]],template:function(e,r){1&e&&(Le(0,"div",0)(1,"h1",1),nt(2,"404"),Be(),qt(3,"img",2),Le(4,"h2"),nt(5,"Not even we could decrypt this request."),Be(),Le(6,"button",3),nt(7," Go back "),Be()()),2&e&&(it(6),ut("routerLink",Nm(1,ule)))},directives:[Qo,xp],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:100%}"]}),n})();function M5(...n){const t=qg(n),{args:e,keys:r}=Z3(n),i=new de(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let d=0;d<s;d++){let E=!1;Or(e[d]).subscribe($(o,U=>{E||(E=!0,c--),a[d]=U},()=>l--,void 0,()=>{(!l||!E)&&(c||o.next(r?Y3(r,a):a),o.complete())}))}});return t?i.pipe(AE(t)):i}let I5=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(xe(uc),xe(vn))},n.\u0275dir=bt({type:n}),n})(),Ah=(()=>{class n extends I5{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,features:[Ht]}),n})();const js=new Ot("NgValueAccessor"),hle={provide:js,useExisting:ot(()=>NA),multi:!0};let NA=(()=>{class n extends Ah{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&At("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[cn([hle]),Ht]}),n})();const fle={provide:js,useExisting:ot(()=>xa),multi:!0},gle=new Ot("CompositionEventMode");let xa=(()=>{class n extends I5{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ple(){const n=hc()?hc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(uc),xe(vn),xe(gle,8))},n.\u0275dir=bt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&At("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[cn([fle]),Ht]}),n})();function cd(n){return null==n||0===n.length}function R5(n){return null!=n&&"number"==typeof n.length}const Vo=new Ot("NgValidators"),ud=new Ot("NgAsyncValidators"),mle=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class dd{static min(t){return function O5(n){return t=>{if(cd(t.value)||cd(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function P5(n){return t=>{if(cd(t.value)||cd(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function F5(n){return cd(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function N5(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function L5(n){return cd(n.value)||mle.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function B5(n){return t=>cd(t.value)||!R5(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function U5(n){return t=>R5(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function j5(n){if(!n)return Eb;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(cd(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return K5(t)}static composeAsync(t){return G5(t)}}function Eb(n){return null}function H5(n){return null!=n}function V5(n){const t=Dm(n)?Q(n):n;return _C(t),t}function z5(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function W5(n,t){return t.map(e=>e(n))}function $5(n){return n.map(t=>function yle(n){return!n.validate}(t)?t:e=>t.validate(e))}function K5(n){if(!n)return null;const t=n.filter(H5);return 0==t.length?null:function(e){return z5(W5(e,t))}}function LA(n){return null!=n?K5($5(n)):null}function G5(n){if(!n)return null;const t=n.filter(H5);return 0==t.length?null:function(e){return M5(W5(e,t).map(V5)).pipe(K(z5))}}function BA(n){return null!=n?G5($5(n)):null}function q5(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function J5(n){return n._rawValidators}function Z5(n){return n._rawAsyncValidators}function UA(n){return n?Array.isArray(n)?n:[n]:[]}function Ab(n,t){return Array.isArray(n)?n.includes(t):n===t}function Y5(n,t){const e=UA(t);return UA(n).forEach(i=>{Ab(e,i)||e.push(i)}),e}function X5(n,t){return UA(t).filter(e=>!Ab(n,e))}class Q5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=LA(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=BA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class fu extends Q5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hs extends Q5{get formDirective(){return null}get path(){return null}}class eB{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}let ta=(()=>{class n extends eB{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(fu,2))},n.\u0275dir=bt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&br("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[Ht]}),n})(),pu=(()=>{class n extends eB{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(Hs,10))},n.\u0275dir=bt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&br("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[Ht]}),n})();function Db(n,t){return[...t.path,n]}function vy(n,t){VA(n,t),t.valueAccessor.writeValue(n.value),function Ele(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nB(n,t)})}(n,t),function kle(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Ale(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nB(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Cle(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Tb(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Ib(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Mb(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function VA(n,t){const e=J5(n);null!==t.validator?n.setValidators(q5(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=Z5(n);null!==t.asyncValidator?n.setAsyncValidators(q5(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Mb(t._rawValidators,i),Mb(t._rawAsyncValidators,i)}function Ib(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=J5(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const i=Z5(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return Mb(t._rawValidators,r),Mb(t._rawAsyncValidators,r),e}function nB(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function rB(n,t){VA(n,t)}function zA(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function oB(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function WA(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===xa?e=o:function Mle(n){return Object.getPrototypeOf(n.constructor)===Ah}(o)?r=o:i=o}),i||r||e||null}function $A(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const _y="VALID",Rb="INVALID",Rp="PENDING",by="DISABLED";function GA(n){return(Ob(n)?n.validators:n)||null}function sB(n){return Array.isArray(n)?LA(n):n||null}function qA(n,t){return(Ob(t)?t.asyncValidators:n)||null}function aB(n){return Array.isArray(n)?BA(n):n||null}function Ob(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const JA=n=>n instanceof gs,Pb=n=>n instanceof Op,lB=n=>n instanceof hB;function cB(n){return JA(n)?n.value:n.getRawValue()}function uB(n,t){const e=Pb(n),r=n.controls;if(!(e?Object.keys(r):r).length)throw new Oe(1e3,"");if(!r[t])throw new Oe(1001,"")}function dB(n,t){Pb(n),n._forEachChild((r,i)=>{if(void 0===t[i])throw new Oe(1002,"")})}class ZA{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=sB(this._rawValidators),this._composedAsyncValidatorFn=aB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===_y}get invalid(){return this.status===Rb}get pending(){return this.status==Rp}get disabled(){return this.status===by}get enabled(){return this.status!==by}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=sB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=aB(t)}addValidators(t){this.setValidators(Y5(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Y5(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(X5(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(X5(t,this._rawAsyncValidators))}hasValidator(t){return Ab(this._rawValidators,t)}hasAsyncValidator(t){return Ab(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Rp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=by,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=_y,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_y||this.status===Rp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?by:_y}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Rp,this._hasOwnPendingAsyncValidator=!0;const e=V5(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function Ile(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=Pb(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:lB(r)&&r.at(i)||null}),r}(this,t,".")}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?by:this.errors?Rb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rp)?Rp:this._anyControlsHaveStatus(Rb)?Rb:_y}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ob(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class gs extends ZA{constructor(t=null,e,r){super(GA(e),qA(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ob(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){$A(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){$A(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Op extends ZA{constructor(t,e,r){super(GA(e),qA(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){dB(this,t),Object.keys(t).forEach(r=>{uB(this,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=cB(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class hB extends ZA{constructor(t,e,r){super(GA(e),qA(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){dB(this,t),t.forEach((r,i)=>{uB(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>cB(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Rle={provide:Hs,useExisting:ot(()=>hd)},wy=(()=>Promise.resolve(null))();let hd=(()=>{class n extends Hs{constructor(e,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Mn,this.form=new Op({},LA(e),BA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){wy.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),vy(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){wy.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){wy.then(()=>{const r=this._findContainer(e.path),i=new Op({});rB(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){wy.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){wy.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,oB(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(xe(Vo,10),xe(ud,10))},n.\u0275dir=bt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&At("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([Rle]),Ht]}),n})();const Ple={provide:fu,useExisting:ot(()=>Pp)},gB=(()=>Promise.resolve(null))();let Pp=(()=>{class n extends fu{constructor(e,r,i,o,s){super(),this._changeDetectorRef=s,this.control=new gs,this._registered=!1,this.update=new Mn,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=WA(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),zA(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){gB.then(()=>{var r;this.control.setValue(e,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;gB.then(()=>{var o;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(e){return this._parent?Db(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(xe(Hs,9),xe(Vo,10),xe(ud,10),xe(js,10),xe(Ni,8))},n.\u0275dir=bt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[cn([Ple]),Ht,Si]}),n})(),kh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),yB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();const YA=new Ot("NgModelWithFormControlWarning"),Ule={provide:fu,useExisting:ot(()=>Dh)};let Dh=(()=>{class n extends fu{constructor(e,r,i,o){super(),this._ngModelWarningConfig=o,this.update=new Mn,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=WA(0,i)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const r=e.form.previousValue;r&&Tb(r,this,!1),vy(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}zA(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Tb(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(xe(Vo,10),xe(ud,10),xe(js,10),xe(YA,8))},n.\u0275dir=bt({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[cn([Ule]),Ht,Si]}),n})();const jle={provide:Hs,useExisting:ot(()=>fd)};let fd=(()=>{class n extends Hs{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Mn,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ib(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return vy(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Tb(e.control||null,e,!1),$A(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,oB(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(Tb(r||null,e),JA(i)&&(vy(i,e),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);rB(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function Dle(n,t){return Ib(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VA(this.form,this),this._oldForm&&Ib(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(xe(Vo,10),xe(ud,10))},n.\u0275dir=bt({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&At("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([jle]),Ht,Si]}),n})();const zle={provide:fu,useExisting:ot(()=>Fp)};let Fp=(()=>{class n extends fu{constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Mn,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=WA(0,o)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),zA(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Db(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(xe(Hs,13),xe(Vo,10),xe(ud,10),xe(js,10),xe(YA,8))},n.\u0275dir=bt({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[cn([zle]),Ht,Si]}),n})(),IB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[yB]]}),n})(),oce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[IB]}),n})(),rk=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:YA,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[IB]}),n})(),RB=(()=>{class n{group(e,r=null){const i=this._reduceControls(e);let a,o=null,s=null;return null!=r&&(function sce(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,s=null!=r.asyncValidators?r.asyncValidators:null,a=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,s=null!=r.asyncValidator?r.asyncValidator:null)),new Op(i,{asyncValidators:s,updateOn:a,validators:o})}control(e,r,i){return new gs(e,r,i)}array(e,r,i){const o=e.map(s=>this._createControl(s));return new hB(o,r,i)}_reduceControls(e){const r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){return JA(e)||Pb(e)||lB(e)?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:rk}),n})();class Rl{}const OB=["toast-component",""];function ace(n,t){if(1&n){const e=Dr();Le(0,"button",5),At("click",function(){return In(e),_t().remove()}),Le(1,"span",6),nt(2,"\xd7"),Be()()}}function lce(n,t){if(1&n&&(Ii(0),nt(1),Ri()),2&n){const e=_t(2);it(1),Tr("[",e.duplicatesCount+1,"]")}}function cce(n,t){if(1&n&&(Le(0,"div"),nt(1),vt(2,lce,2,1,"ng-container",4),Be()),2&n){const e=_t();Ho(e.options.titleClass),tr("aria-label",e.title),it(1),Tr(" ",e.title," "),it(1),ut("ngIf",e.duplicatesCount)}}function uce(n,t){if(1&n&&qt(0,"div",7),2&n){const e=_t();Ho(e.options.messageClass),ut("innerHTML",e.message,Xu)}}function dce(n,t){if(1&n&&(Le(0,"div",8),nt(1),Be()),2&n){const e=_t();Ho(e.options.messageClass),tr("aria-label",e.message),it(1),Tr(" ",e.message," ")}}function hce(n,t){if(1&n&&(Le(0,"div"),qt(1,"div",9),Be()),2&n){const e=_t();it(1),$a("width",e.width+"%")}}function fce(n,t){if(1&n){const e=Dr();Le(0,"button",5),At("click",function(){return In(e),_t().remove()}),Le(1,"span",6),nt(2,"\xd7"),Be()()}}function pce(n,t){if(1&n&&(Ii(0),nt(1),Ri()),2&n){const e=_t(2);it(1),Tr("[",e.duplicatesCount+1,"]")}}function gce(n,t){if(1&n&&(Le(0,"div"),nt(1),vt(2,pce,2,1,"ng-container",4),Be()),2&n){const e=_t();Ho(e.options.titleClass),tr("aria-label",e.title),it(1),Tr(" ",e.title," "),it(1),ut("ngIf",e.duplicatesCount)}}function mce(n,t){if(1&n&&qt(0,"div",7),2&n){const e=_t();Ho(e.options.messageClass),ut("innerHTML",e.message,Xu)}}function yce(n,t){if(1&n&&(Le(0,"div",8),nt(1),Be()),2&n){const e=_t();Ho(e.options.messageClass),tr("aria-label",e.message),it(1),Tr(" ",e.message," ")}}function vce(n,t){if(1&n&&(Le(0,"div"),qt(1,"div",9),Be()),2&n){const e=_t();it(1),$a("width",e.width+"%")}}class _ce{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Nb{constructor(t,e,r,i,o,s){this.toastId=t,this.config=e,this.message=r,this.title=i,this.toastType=o,this.toastRef=s,this._onTap=new Ne,this._onAction=new Ne,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const PB={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},FB=new Ot("ToastConfig");class wce{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new Ne,this._activate=new Ne,this._manualClose=new Ne,this._resetTimeout=new Ne,this._countDuplicate=new Ne}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class xce{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,r){return t===Nb?this._toastPackage:this._parentInjector.get(t,e,r)}}class Sce extends class bce{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,r){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=r}attachComponentPortal(t,e){const r=this._componentFactoryResolver.resolveComponentFactory(t.component);let i;return i=r.create(t.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}class Cce{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let Ece=(()=>{class n{constructor(e){this._document=e}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ace=(()=>{class n{constructor(e,r,i,o){this._overlayContainer=e,this._componentFactoryResolver=r,this._appRef=i,this._document=o,this._paneElements=new Map}create(e,r){return this._createOverlayRef(this.getPaneElement(e,r))}getPaneElement(e="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[e]||(this._paneElements.get(r)[e]=this._createPaneElement(e,r)),this._paneElements.get(r)[e]}_createPaneElement(e,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(e),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(e){return new Sce(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Cce(this._createPortalHost(e))}}return n.\u0275fac=function(e){return new(e||n)(lt(Ece),lt(eu),lt(uh),lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ik=(()=>{class n{constructor(e,r,i,o,s){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=s,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},e.default.iconClasses),e.config.iconClasses))}show(e,r,i={},o=""){return this._preBuildNotification(o,e,r,this.applyConfig(i))}success(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,r,this.applyConfig(i))}error(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,r,this.applyConfig(i))}info(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,r,this.applyConfig(i))}warning(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,r,this.applyConfig(i))}clear(e){for(const r of this.toasts)if(void 0!==e){if(r.toastId===e)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(e){const r=this._findToast(e);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(e="",r="",i,o){const{includeTitleDuplicates:s}=this.toastrConfig;for(const a of this.toasts){const l=s&&a.title===e;if((!s||l)&&a.message===r)return a.toastRef.onDuplicate(i,o),a}return null}applyConfig(e={}){return Object.assign(Object.assign({},this.toastrConfig),e)}_findToast(e){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===e)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(e,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,r,i,o)):this._buildNotification(e,r,i,o)}_buildNotification(e,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const s=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==s)return s;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let c=r;r&&o.enableHtml&&(c=this.sanitizer.sanitize(kr.HTML,r));const d=new wce(l),E=new Nb(this.index,o,c,i,e,d),U=new xce(E,this._injector),W=new _ce(o.toastComponent,U),ne=l.attach(W,this.toastrConfig.newestOnTop);d.componentInstance=ne.instance;const Ce={toastId:this.index,title:i||"",message:r||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:E.onTap(),onAction:E.onAction(),portal:ne};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ce.toastRef.activate()})),this.toasts.push(Ce),Ce}}return n.\u0275fac=function(e){return new(e||n)(lt(FB),lt(Ace),lt(Ci),lt(fc),lt(Vn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kce=(()=>{class n{constructor(e,r,i){this.toastrService=e,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),r)):this.timeout=setTimeout(()=>e(),r)}outsideInterval(e,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),r)):this.intervalId=setInterval(()=>e(),r)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}}return n.\u0275fac=function(e){return new(e||n)(xe(ik),xe(Nb),xe(Vn))},n.\u0275cmp=Jt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(e,r){1&e&&At("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&e&&(r_("@flyInOut",r.state),Ho(r.toastClasses),$a("display",r.displayStyle))},attrs:OB,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(e,r){1&e&&(vt(0,ace,3,0,"button",0),vt(1,cce,3,5,"div",1),vt(2,uce,1,3,"div",2),vt(3,dce,2,4,"div",3),vt(4,hce,2,2,"div",4)),2&e&&(ut("ngIf",r.options.closeButton),it(1),ut("ngIf",r.title),it(1),ut("ngIf",r.message&&r.options.enableHtml),it(1),ut("ngIf",r.message&&!r.options.enableHtml),it(1),ut("ngIf",r.options.progressBar))},directives:[gi],encapsulation:2,data:{animation:[yc("flyInOut",[Xo("inactive",Yr({opacity:0})),Xo("active",Yr({opacity:1})),Xo("removed",Yr({opacity:0})),Us("inactive => active",ea("{{ easeTime }}ms {{ easing }}")),Us("active => removed",ea("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const Dce=Object.assign(Object.assign({},PB),{toastComponent:kce});let Tce=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:FB,useValue:{default:Dce,config:e}}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Xs]]}),n})(),Mce=(()=>{class n{constructor(e,r,i){this.toastrService=e,this.toastPackage=r,this.appRef=i,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(e){return new(e||n)(xe(ik),xe(Nb),xe(uh))},n.\u0275cmp=Jt({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(e,r){1&e&&At("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&e&&(Ho(r.toastClasses),$a("display",r.displayStyle))},attrs:OB,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(e,r){1&e&&(vt(0,fce,3,0,"button",0),vt(1,gce,3,5,"div",1),vt(2,mce,1,3,"div",2),vt(3,yce,2,4,"div",3),vt(4,vce,2,2,"div",4)),2&e&&(ut("ngIf",r.options.closeButton),it(1),ut("ngIf",r.title),it(1),ut("ngIf",r.message&&r.options.enableHtml),it(1),ut("ngIf",r.message&&!r.options.enableHtml),it(1),ut("ngIf",r.options.progressBar))},directives:[gi],encapsulation:2}),n})();Object.assign(Object.assign({},PB),{toastComponent:Mce});let pd=(()=>{class n{constructor(e){this.toastr=e}info(e){this.toastr.info(e.message,e.title,{onActivateTick:!0})}success(e){this.toastr.success(e.message,e.title,{onActivateTick:!0})}warning(e){this.toastr.warning(e.message,e.title,{disableTimeOut:!0,onActivateTick:!0})}error(e){this.toastr.error(e.message,e.title,{disableTimeOut:!0,onActivateTick:!0})}}return n.\u0275fac=function(e){return new(e||n)(lt(ik))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ice=["addListener","removeListener"],Rce=["addEventListener","removeEventListener"],Oce=["on","off"];function gu(n,t,e,r){if(h(e)&&(r=e,e=void 0),r)return gu(n,t,e).pipe(AE(r));const[i,o]=function Nce(n){return h(n.addEventListener)&&h(n.removeEventListener)}(n)?Rce.map(s=>a=>n[s](t,a,e)):function Pce(n){return h(n.addListener)&&h(n.removeListener)}(n)?Ice.map(NB(n,t)):function Fce(n){return h(n.on)&&h(n.off)}(n)?Oce.map(NB(n,t)):[];if(!i&&Wi(n))return Yn(s=>gu(s,t,e))(Or(n));if(!i)throw new TypeError("Invalid event target");return new de(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function NB(n,t){return e=>r=>n[e](t,r)}const Lce=["connectionContainer"],Bce=["inputContainer"],Uce=["label"];function jce(n,t){1&n&&(Ii(0),Le(1,"div",14),qt(2,"div",15)(3,"div",16)(4,"div",17),Be(),Le(5,"div",18),qt(6,"div",15)(7,"div",16)(8,"div",17),Be(),Ri())}function Hce(n,t){if(1&n){const e=Dr();Le(0,"div",19),At("cdkObserveContent",function(){return In(e),_t().updateOutlineGap()}),ur(1,1),Be()}2&n&&ut("cdkObserveContentDisabled","outline"!=_t().appearance)}function Vce(n,t){if(1&n&&(Ii(0),ur(1,2),Le(2,"span"),nt(3),Be(),Ri()),2&n){const e=_t(2);it(3),Oi(e._control.placeholder)}}function zce(n,t){1&n&&ur(0,3,["*ngSwitchCase","true"])}function Wce(n,t){1&n&&(Le(0,"span",23),nt(1," *"),Be())}function $ce(n,t){if(1&n){const e=Dr();Le(0,"label",20,21),At("cdkObserveContent",function(){return In(e),_t().updateOutlineGap()}),vt(2,Vce,4,1,"ng-container",12),vt(3,zce,1,0,"ng-content",12),vt(4,Wce,2,0,"span",22),Be()}if(2&n){const e=_t();br("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),ut("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),tr("for",e._control.id)("aria-owns",e._control.id),it(2),ut("ngSwitchCase",!1),it(1),ut("ngSwitchCase",!0),it(1),ut("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Kce(n,t){1&n&&(Le(0,"div",24),ur(1,4),Be())}function Gce(n,t){if(1&n&&(Le(0,"div",25),qt(1,"span",26),Be()),2&n){const e=_t();it(1),br("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function qce(n,t){1&n&&(Le(0,"div"),ur(1,5),Be()),2&n&&ut("@transitionMessages",_t()._subscriptAnimationState)}function Jce(n,t){if(1&n&&(Le(0,"div",30),nt(1),Be()),2&n){const e=_t(2);ut("id",e._hintLabelId),it(1),Oi(e.hintLabel)}}function Zce(n,t){if(1&n&&(Le(0,"div",27),vt(1,Jce,2,2,"div",28),ur(2,6),qt(3,"div",29),ur(4,7),Be()),2&n){const e=_t();ut("@transitionMessages",e._subscriptAnimationState),it(1),ut("ngIf",e.hintLabel)}}const Yce=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Xce=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let Qce=0;const LB=new Ot("MatError");let ok=(()=>{class n{constructor(e,r){this.id="mat-error-"+Qce++,e||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(e){return new(e||n)(Zs("aria-live"),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,r){2&e&&tr("id",r.id)},inputs:{id:"id"},features:[cn([{provide:LB,useExisting:n}])]}),n})();const eue={transitionMessages:yc("transitionMessages",[Xo("enter",Yr({opacity:1,transform:"translateY(0%)"})),Us("void => enter",[Yr({opacity:0,transform:"translateY(-5px)"}),ea("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let sk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n}),n})();const tue=new Ot("MatHint");let mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["mat-label"]]}),n})(),nue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["mat-placeholder"]]}),n})();const rue=new Ot("MatPrefix"),BB=new Ot("MatSuffix");let iue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","matSuffix",""]],features:[cn([{provide:BB,useExisting:n}])]}),n})(),UB=0;const sue=Eh(class{constructor(n){this._elementRef=n}},"primary"),aue=new Ot("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ak=new Ot("MatFormField");let Mh=(()=>{class n extends sue{constructor(e,r,i,o,s,a,l){super(e),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=s,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Ne,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+UB++,this._labelId="mat-form-field-label-"+UB++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Mr(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Qs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ji(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ji(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),ge(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Qs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Qs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ji(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,gu(this._label.nativeElement,"transitionend").pipe(ke(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const d=r.querySelectorAll(`${i}, ${o}`);for(let E=0;E<d.length;E++)d[E].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let s=0,a=0;const l=r.querySelectorAll(i),c=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const d=r.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const E=this._getStartEnd(d),U=e.children,W=this._getStartEnd(U[0].getBoundingClientRect());let ne=0;for(let Ce=0;Ce<U.length;Ce++)ne+=U[Ce].offsetWidth;s=Math.abs(W-E)-5,a=ne>0?.75*ne+10:0}for(let d=0;d<l.length;d++)l[d].style.width=`${s}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Ni),xe(id,8),xe(aue,8),xe(ps),xe(Vn),xe(Qa,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,i){if(1&e&&(pr(i,sk,5),pr(i,sk,7),pr(i,mu,5),pr(i,mu,7),pr(i,nue,5),pr(i,LB,5),pr(i,tue,5),pr(i,rue,5),pr(i,BB,5)),2&e){let o;un(o=dn())&&(r._controlNonStatic=o.first),un(o=dn())&&(r._controlStatic=o.first),un(o=dn())&&(r._labelChildNonStatic=o.first),un(o=dn())&&(r._labelChildStatic=o.first),un(o=dn())&&(r._placeholderChild=o.first),un(o=dn())&&(r._errorChildren=o),un(o=dn())&&(r._hintChildren=o),un(o=dn())&&(r._prefixChildren=o),un(o=dn())&&(r._suffixChildren=o)}},viewQuery:function(e,r){if(1&e&&(Zr(Lce,7),Zr(Bce,5),Zr(Uce,5)),2&e){let i;un(i=dn())&&(r._connectionContainerRef=i.first),un(i=dn())&&(r._inputContainerRef=i.first),un(i=dn())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,r){2&e&&br("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[cn([{provide:ak,useExisting:n}]),Ht],ngContentSelectors:Xce,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,r){1&e&&(no(Yce),Le(0,"div",0)(1,"div",1,2),At("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),vt(3,jce,9,0,"ng-container",3),vt(4,Hce,2,1,"div",4),Le(5,"div",5,6),ur(7),Le(8,"span",7),vt(9,$ce,5,16,"label",8),Be()(),vt(10,Kce,2,0,"div",9),Be(),vt(11,Gce,2,4,"div",10),Le(12,"div",11),vt(13,qce,2,1,"div",12),vt(14,Zce,5,2,"div",13),Be()()),2&e&&(it(3),ut("ngIf","outline"==r.appearance),it(1),ut("ngIf",r._prefixChildren.length),it(5),ut("ngIf",r._hasFloatingLabel()),it(1),ut("ngIf",r._suffixChildren.length),it(1),ut("ngIf","outline"!=r.appearance),it(1),ut("ngSwitch",r._getDisplayedMessages()),it(1),ut("ngSwitchCase","error"),it(1),ut("ngSwitchCase","hint"))},directives:[gi,nA,D_,k3],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[eue.transitionMessages]},changeDetection:0}),n})(),xy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Xs,ir,nb],ir]}),n})();const HB=Ep({passive:!0});let lue=(()=>{class n{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return qo;const r=cu(e),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new Ne,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||r.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(r.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,HB),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",a,HB)}}),o}stopMonitoring(e){const r=cu(e),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(e){return new(e||n)(lt(ps),lt(Vn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();const cue=new Ot("MAT_INPUT_VALUE_ACCESSOR"),uue=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let due=0;const hue=Gae(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r}});let Ih=(()=>{class n extends hue{constructor(e,r,i,o,s,a,l,c,d,E){super(a,o,s,i),this._elementRef=e,this._platform=r,this._autofillMonitor=c,this._formField=E,this._uid="mat-input-"+due++,this.focused=!1,this.stateChanges=new Ne,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ne=>u8().has(ne)),this._iOSKeyupListener=ne=>{const Ce=ne.target;!Ce.value&&0===Ce.selectionStart&&0===Ce.selectionEnd&&(Ce.setSelectionRange(1,1),Ce.setSelectionRange(0,0))};const U=this._elementRef.nativeElement,W=U.nodeName.toLowerCase();this._inputValueAccessor=l||U,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&d.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===W,this._isTextarea="textarea"===W,this._isInFormField=!!E,this._isNativeSelect&&(this.controlType=U.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Mr(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,r,i,o;return null!==(o=null!==(e=this._required)&&void 0!==e?e:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(dd.required))&&void 0!==o&&o}set required(e){this._required=Mr(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&u8().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Mr(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,r;const i=(null===(r=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===r?void 0:r.call(e))?null:this.placeholder;if(i!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=i,i?o.setAttribute("placeholder",i):o.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){uue.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(ps),xe(fu,10),xe(hd,8),xe(fd,8),xe(y5),xe(cue,10),xe(lue),xe(Vn),xe(ak,8))},n.\u0275dir=bt({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,r){1&e&&At("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(td("disabled",r.disabled)("required",r.required),tr("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),br("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[cn([{provide:sk,useExisting:n}]),Ht,Si]}),n})(),zB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[y5],imports:[[VB,xy,ir],VB,xy]}),n})();const Sy={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=Sy;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(o=>{e=void 0,n(o)});return new w(()=>null==e?void 0:e(i))},requestAnimationFrame(...n){const{delegate:t}=Sy;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Sy;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class pue extends eA{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class fue extends QE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Sy.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);t.actions.some(i=>i.id===e)||(Sy.cancelAnimationFrame(e),t._scheduled=void 0)}});let lk,mue=1;const Lb={};function WB(n){return n in Lb&&(delete Lb[n],!0)}const yue={setImmediate(n){const t=mue++;return Lb[t]=!0,lk||(lk=Promise.resolve()),lk.then(()=>WB(t)&&n()),t},clearImmediate(n){WB(n)}},{setImmediate:vue,clearImmediate:_ue}=yue,Bb={setImmediate(...n){const{delegate:t}=Bb;return((null==t?void 0:t.setImmediate)||vue)(...n)},clearImmediate(n){const{delegate:t}=Bb;return((null==t?void 0:t.clearImmediate)||_ue)(n)},delegate:void 0},ck=new class wue extends eA{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class bue extends QE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Bb.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);t.actions.some(i=>i.id===e)||(Bb.clearImmediate(e),t._scheduled=void 0)}});function $B(n=0,t,e=moe){let r=-1;return null!=t&&(Gd(t)?e=t:r=t),new de(i=>{let o=function Sue(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function KB(n,t=tb){return function xue(n){return ie((t,e)=>{let r=!1,i=null,o=null,s=!1;const a=()=>{if(null==o||o.unsubscribe(),o=null,r){r=!1;const c=i;i=null,e.next(c)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};t.subscribe($(e,c=>{r=!0,i=c,o||Or(n(c)).subscribe(o=$(e,a,l))},()=>{s=!0,(!r||!o||o.closed)&&e.complete()}))})}(()=>$B(n,t))}let Eue=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new Ne,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new de(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(KB(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):An()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(si(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=cu(r),o=e.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>gu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(lt(Vn),lt(ps),lt(zn,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ub=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new Ne,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(KB(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(lt(ps),lt(Vn),lt(zn,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Np=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})(),uk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[cy,Np],cy,Np]}),n})();class dk{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class hk extends dk{constructor(t,e,r,i){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i}}class Cy extends dk{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class kue extends dk{constructor(t){super(),this.element=t instanceof vn?t.nativeElement:t}}class fk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof hk?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Cy?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof kue?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Due extends fk{constructor(t,e,r,i,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||Ci.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let pk=(()=>{class n extends fk{constructor(e,r,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Mn,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s=r.createComponent(o,r.length,e.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(xe(eu),xe(Fi),xe(zn))},n.\u0275dir=bt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ht]}),n})(),gk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();const GB=noe();class Tue{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=yo(-this._previousScrollPosition.left),t.style.top=yo(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),GB&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),GB&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class Mue{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class qB{enable(){}disable(){}attach(){}}function mk(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function JB(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Iue{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();mk(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Rue=(()=>{class n{constructor(e,r,i,o){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new qB,this.close=s=>new Mue(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new Tue(this._viewportRuler,this._document),this.reposition=s=>new Iue(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(lt(Eue),lt(Ub),lt(Vn),lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jb{constructor(t){if(this.scrollStrategy=new qB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class Oue{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Pue{constructor(t,e,r,i,o,s,a,l,c){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Ne,this._attachments=new Ne,this._detachments=new Ne,this._locationChanges=w.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Ne,this._outsidePointerEvents=new Ne,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ke(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=yo(this._config.width),t.height=yo(this._config.height),t.minWidth=yo(this._config.minWidth),t.minHeight=yo(this._config.minHeight),t.maxWidth=yo(this._config.maxWidth),t.maxHeight=yo(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,r){const i=g8(e||[]).filter(o=>!!o);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ji(ge(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let yk=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||ZE()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(e),ZE()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(lt(zn),lt(ps))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZB="cdk-overlay-connected-position-bounding-box",Fue=/([A-Za-z%]+)$/;class Nue{constructor(t,e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ne,this._resizeSubscription=w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(ZB),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,i,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,r,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,r)?o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(const c of o){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ZB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i,o;if("center"==r.originX)i=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i="start"==r.originX?s:a}return e.left<0&&(i-=e.left),o="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(t,e,r){let i,o;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+o}}_getOverlayFit(t,e,r,i){const o=XB(e);let{x:s,y:a}=t,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(s+=l),c&&(a+=c);let U=0-a,W=a+o.height-r.height,ne=this._subtractOverflows(o.width,0-s,s+o.width-r.width),Ce=this._subtractOverflows(o.height,U,W),Pe=ne*Ce;return{visibleArea:Pe,isCompletelyWithinViewport:o.width*o.height===Pe,fitsInViewportVertically:Ce===o.height,fitsInViewportHorizontally:ne==o.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,o=r.right-e.x,s=YB(this._overlayRef.getConfig().minHeight),a=YB(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=o;return(t.fitsInViewportVertically||null!=s&&s<=i)&&c}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=XB(e),o=this._viewportRect,s=Math.max(t.x+i.width-o.width,0),a=Math.max(t.y+i.height-o.height,0),l=Math.max(o.top-r.top-t.y,0),c=Math.max(o.left-r.left-t.x,0);let d=0,E=0;return d=i.width<=o.width?c||-s:t.x<this._viewportMargin?o.left-r.left-t.x:0,E=i.height<=o.height?l||-a:t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:d,y:E},{x:t.x+d,y:t.y+E}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Oue(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let o,s,a,d,E,U;if("top"===e.overlayY)s=t.y,o=r.height-s+this._viewportMargin;else if("bottom"===e.overlayY)a=r.height-t.y+2*this._viewportMargin,o=r.height-a+this._viewportMargin;else{const W=Math.min(r.bottom-t.y+r.top,t.y),ne=this._lastBoundingBoxSize.height;o=2*W,s=t.y-W,o>ne&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-ne/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)U=r.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)E=t.x,d=r.right-t.x;else{const W=Math.min(r.right-t.x+r.left,t.x),ne=this._lastBoundingBoxSize.width;d=2*W,E=t.x-W,d>ne&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.x-ne/2)}return{top:s,left:E,bottom:a,right:U,width:d,height:o}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=yo(r.height),i.top=yo(r.top),i.bottom=yo(r.bottom),i.width=yo(r.width),i.left=yo(r.left),i.right=yo(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=yo(o)),s&&(i.maxWidth=yo(s))}this._lastBoundingBoxSize=r,Rh(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Rh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const d=this._viewportRuler.getViewportScrollPosition();Rh(r,this._getExactOverlayY(e,t,d)),Rh(r,this._getExactOverlayX(e,t,d))}else r.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=yo(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=yo(s.maxWidth):o&&(r.maxWidth="")),Rh(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=yo(o.y),i}_getExactOverlayX(t,e,r){let s,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=yo(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:JB(t,r),isOriginOutsideView:mk(t,r),isOverlayClipped:JB(e,r),isOverlayOutsideView:mk(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&g8(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof vn)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function Rh(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function YB(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Fue);return e&&"px"!==e?null:parseFloat(t)}return n||null}function XB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const QB="cdk-global-overlay-wrapper";class Lue{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(QB),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(QB),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Bue=(()=>{class n{constructor(e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new Lue}flexibleConnectedTo(e){return new Nue(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(lt(Ub),lt(zn),lt(ps),lt(yk))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e6=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uue=(()=>{class n extends e6{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(lt(zn),lt(Vn,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jue=(()=>{class n extends e6{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=od(o)},this._clickListener=o=>{const s=od(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;const E=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(o)):E.next(o)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(lt(zn),lt(ps),lt(Vn,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hue=0,_c=(()=>{class n{constructor(e,r,i,o,s,a,l,c,d,E,U){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=E,this._outsideClickDispatcher=U}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),s=new jb(e);return s.direction=s.direction||this._directionality.value,new Pue(o,r,i,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Hue++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(uh)),new Due(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(lt(Rue),lt(yk),lt(eu),lt(Bue),lt(Uue),lt(Ci),lt(Vn),lt(zn),lt(id),lt(Wm),lt(jue))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const Wue={provide:new Ot("cdk-connected-overlay-scroll-strategy"),deps:[_c],useFactory:function zue(n){return()=>n.scrollStrategies.reposition()}};let Ey=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[_c,Wue],imports:[[cy,gk,uk],uk]}),n})();function t6(n,t){return t?e=>P_(t.pipe(ke(1),function $ue(){return ie((n,t)=>{n.subscribe($(t,L))})}()),e.pipe(t6(n))):Yn((e,r)=>n(e,r).pipe(ke(1),function Kue(n){return K(()=>n)}(e)))}function vk(n,t=tb){const e=$B(n,t);return t6(()=>e)}const Gue=["panel"];function que(n,t){if(1&n&&(Le(0,"div",0,1),ur(2),Be()),2&n){const e=t.id,r=_t();ut("id",r.id)("ngClass",r._classList),tr("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(e))}}const Jue=["*"];let Zue=0;class Yue{constructor(t,e){this.source=t,this.option=e}}const Xue=du(class{}),n6=new Ot("mat-autocomplete-default-options",{providedIn:"root",factory:function Que(){return{autoActiveFirstOption:!1}}});let ede=(()=>{class n extends Xue{constructor(e,r,i,o){super(),this._changeDetectorRef=e,this._elementRef=r,this._activeOptionChanges=w.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new Mn,this.opened=new Mn,this.closed=new Mn,this.optionActivated=new Mn,this._classList={},this.id="mat-autocomplete-"+Zue++,this.inertGroups=(null==o?void 0:o.SAFARI)||!1,this._autoActiveFirstOption=!!i.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=Mr(e)}set classList(e){this._classList=e&&e.length?function boe(n,t=/\s+/){const e=[];if(null!=n){const r=Array.isArray(n)?n:`${n}`.split(t);for(const i of r){const o=`${i}`.trim();o&&e.push(o)}}return e}(e).reduce((r,i)=>(r[i]=!0,r),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new Coe(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const r=new Yue(this,e);this.optionSelected.emit(r)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return n.\u0275fac=function(e){return new(e||n)(xe(Ni),xe(vn),xe(n6),xe(ps))},n.\u0275dir=bt({type:n,viewQuery:function(e,r){if(1&e&&(Zr(Pi,7),Zr(Gue,5)),2&e){let i;un(i=dn())&&(r.template=i.first),un(i=dn())&&(r.panel=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[Ht]}),n})(),tde=(()=>{class n extends ede{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275cmp=Jt({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(e,r,i){if(1&e&&(pr(i,A5,5),pr(i,D5,5)),2&e){let o;un(o=dn())&&(r.optionGroups=o),un(o=dn())&&(r.options=o)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[cn([{provide:E5,useExisting:n}]),Ht],ngContentSelectors:Jue,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,r){1&e&&(no(),vt(0,que,3,4,"ng-template"))},directives:[fh],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),n})();const r6=new Ot("mat-autocomplete-scroll-strategy"),rde={provide:r6,deps:[_c],useFactory:function nde(n){return()=>n.scrollStrategies.reposition()}},ide={provide:js,useExisting:ot(()=>o6),multi:!0};let ode=(()=>{class n{constructor(e,r,i,o,s,a,l,c,d,E,U){this._element=e,this._overlay=r,this._viewContainerRef=i,this._zone=o,this._changeDetectorRef=s,this._dir=l,this._formField=c,this._document=d,this._viewportRuler=E,this._defaults=U,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=w.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Ne,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=F_(()=>{const W=this.autocomplete?this.autocomplete.options:null;return W?W.changes.pipe(Qs(W),Ja(()=>ge(...W.map(ne=>ne.onSelectionChange)))):this._zone.onStable.pipe(ke(1),Ja(()=>this.optionSelections))}),this._scrollStrategy=a}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=Mr(e)}ngAfterViewInit(){const e=this._getWindow();void 0!==e&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return ge(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(si(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(si(()=>this._overlayAttached)):An()).pipe(K(e=>e instanceof k5?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return ge(gu(this._document,"click"),gu(this._document,"auxclick"),gu(this._document,"touchend")).pipe(si(e=>{const r=od(e),i=this._formField?this._formField._elementRef.nativeElement:null,o=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&r!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!i||!i.contains(r))&&(!o||!o.contains(r))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(r)}))}writeValue(e){Promise.resolve().then(()=>this._setTriggerValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const r=e.keyCode,i=mc(e);if(27===r&&!i&&e.preventDefault(),this.activeOption&&13===r&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const o=this.autocomplete._keyManager.activeItem,s=38===r||40===r;9===r||s&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):s&&this._canOpen()&&this.openPanel(),(s||this.autocomplete._keyManager.activeItem!==o)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(e){let r=e.target,i=r.value;"number"===r.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i&&(this._previousValue=i,this._onChange(i),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return ge(this._zone.onStable.pipe(ke(1)),this.autocomplete.options.changes.pipe(Mo(()=>this._positionStrategy.reapplyLastPosition()),vk(0))).pipe(Ja(()=>(this._zone.run(()=>{const i=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&(this._overlayRef.updatePosition(),i!==this.panelOpen&&this.autocomplete.opened.emit())}),this.panelClosingActions)),ke(1)).subscribe(i=>this._setValueAndClose(i))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(e){const r=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,i=null!=r?r:"";this._formField?this._formField._control.value=i:this._element.nativeElement.value=i,this._previousValue=i}_setValueAndClose(e){const r=e&&e.source;r&&(this._clearPreviousSelectedOption(r),this._setTriggerValue(r.value),this._onChange(r.value),this.autocomplete._emitSelectEvent(r),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(r=>{r!==e&&r.selected&&r.deselect()})}_attachOverlay(){var e;let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new Cy(this.autocomplete.template,this._viewContainerRef,{id:null===(e=this._formField)||void 0===e?void 0:e.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,r.keydownEvents().subscribe(o=>{(27===o.keyCode&&!mc(o)||38===o.keyCode&&mc(o,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),o.stopPropagation(),o.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})})),r&&!r.hasAttached()&&(r.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&i!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var e;return new jb({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(e=this._defaults)||void 0===e?void 0:e.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,o=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let s;s="above"===this.position?o:"below"===this.position?r:[...r,...o],e.withPositions(s)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}_scrollToOption(e){const r=this.autocomplete,i=function rle(n,t,e){if(e.length){let r=t.toArray(),i=e.toArray(),o=0;for(let s=0;s<n+1;s++)r[s].group&&r[s].group===i[o]&&o++;return o}return 0}(e,r.options,r.optionGroups);if(0===e&&1===i)r._setScrollTop(0);else if(r.panel){const o=r.options.toArray()[e];if(o){const s=o._getHostElement(),a=function ile(n,t,e,r){return n<e?n:n+t>e+r?Math.max(0,n-r+t):e}(s.offsetTop,s.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(a)}}}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(_c),xe(Fi),xe(Vn),xe(Ni),xe(r6),xe(id,8),xe(ak,9),xe(zn,8),xe(Ub),xe(n6,8))},n.\u0275dir=bt({type:n,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[Si]}),n})(),o6=(()=>{class n extends ode{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,r){1&e&&At("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(o){return r._handleInput(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(){return r._handleClick()}),2&e&&tr("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-owns",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[cn([ide]),Ht]}),n})(),sde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[rde],imports:[[Ey,Cb,ir,Xs],Np,Cb,ir]}),n})();class s6{}class a6{}class yu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof yu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new yu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof yu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ade{encodeKey(t){return l6(t)}encodeValue(t){return l6(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const cde=/%(\d[a-f0-9])/gi,ude={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function l6(n){return encodeURIComponent(n).replace(cde,(t,e)=>{var r;return null!==(r=ude[e])&&void 0!==r?r:t})}function c6(n){return`${n}`}class gd{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ade,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lde(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gd({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(c6(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(c6(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class dde{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function u6(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function d6(n){return"undefined"!=typeof Blob&&n instanceof Blob}function h6(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ay{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function hde(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new yu),this.context||(this.context=new dde),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new gd,this.urlWithParams=e}serializeBody(){return null===this.body?null:u6(this.body)||d6(this.body)||h6(this.body)||function fde(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||h6(this.body)?null:d6(this.body)?this.body.type||null:u6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,d=t.params||this.params;const E=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((U,W)=>U.set(W,t.setHeaders[W]),c)),t.setParams&&(d=Object.keys(t.setParams).reduce((U,W)=>U.set(W,t.setParams[W]),d)),new Ay(r,i,s,{params:d,headers:c,context:E,reportProgress:l,responseType:o,withCredentials:a})}}var vo=(()=>((vo=vo||{})[vo.Sent=0]="Sent",vo[vo.UploadProgress=1]="UploadProgress",vo[vo.ResponseHeader=2]="ResponseHeader",vo[vo.DownloadProgress=3]="DownloadProgress",vo[vo.Response=4]="Response",vo[vo.User=5]="User",vo))();class _k{constructor(t,e=200,r="OK"){this.headers=t.headers||new yu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class bk extends _k{constructor(t={}){super(t),this.type=vo.ResponseHeader}clone(t={}){return new bk({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Hb extends _k{constructor(t={}){super(t),this.type=vo.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Hb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class f6 extends _k{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function wk(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Vb=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Ay)o=e;else{let l,c;l=i.headers instanceof yu?i.headers:new yu(i.headers),i.params&&(c=i.params instanceof gd?i.params:new gd({fromObject:i.params})),o=new Ay(e,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=An(o).pipe(_p(l=>this.handler.handle(l)));if(e instanceof Ay||"events"===i.observe)return s;const a=s.pipe(si(l=>l instanceof Hb));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(K(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(K(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(K(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(K(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new gd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,wk(i,r))}post(e,r,i={}){return this.request("POST",e,wk(i,r))}put(e,r,i={}){return this.request("PUT",e,wk(i,r))}}return n.\u0275fac=function(e){return new(e||n)(lt(s6))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();class p6{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const g6=new Ot("HTTP_INTERCEPTORS");let pde=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const gde=/^\)\]\}',?\n/;let m6=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new de(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((W,ne)=>i.setRequestHeader(W,ne.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const W=e.detectContentTypeHeader();null!==W&&i.setRequestHeader("Content-Type",W)}if(e.responseType){const W=e.responseType.toLowerCase();i.responseType="json"!==W?W:"text"}const o=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const W=i.statusText||"OK",ne=new yu(i.getAllResponseHeaders()),Ce=function mde(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return s=new bk({headers:ne,status:i.status,statusText:W,url:Ce}),s},l=()=>{let{headers:W,status:ne,statusText:Ce,url:Pe}=a(),Qe=null;204!==ne&&(Qe=void 0===i.response?i.responseText:i.response),0===ne&&(ne=Qe?200:0);let je=ne>=200&&ne<300;if("json"===e.responseType&&"string"==typeof Qe){const at=Qe;Qe=Qe.replace(gde,"");try{Qe=""!==Qe?JSON.parse(Qe):null}catch(yt){Qe=at,je&&(je=!1,Qe={error:yt,text:Qe})}}je?(r.next(new Hb({body:Qe,headers:W,status:ne,statusText:Ce,url:Pe||void 0})),r.complete()):r.error(new f6({error:Qe,headers:W,status:ne,statusText:Ce,url:Pe||void 0}))},c=W=>{const{url:ne}=a(),Ce=new f6({error:W,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ne||void 0});r.error(Ce)};let d=!1;const E=W=>{d||(r.next(a()),d=!0);let ne={type:vo.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(ne.total=W.total),"text"===e.responseType&&!!i.responseText&&(ne.partialText=i.responseText),r.next(ne)},U=W=>{let ne={type:vo.UploadProgress,loaded:W.loaded};W.lengthComputable&&(ne.total=W.total),r.next(ne)};return i.addEventListener("load",l),i.addEventListener("error",c),i.addEventListener("timeout",c),i.addEventListener("abort",c),e.reportProgress&&(i.addEventListener("progress",E),null!==o&&i.upload&&i.upload.addEventListener("progress",U)),i.send(o),r.next({type:vo.Sent}),()=>{i.removeEventListener("error",c),i.removeEventListener("abort",c),i.removeEventListener("load",l),i.removeEventListener("timeout",c),e.reportProgress&&(i.removeEventListener("progress",E),null!==o&&i.upload&&i.upload.removeEventListener("progress",U)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(lt(F3))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const xk=new Ot("XSRF_COOKIE_NAME"),Sk=new Ot("XSRF_HEADER_NAME");class y6{}let yde=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=C3(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(lt(zn),lt(Vm),lt(xk))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),Ck=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const o=this.tokenService.getToken();return null!==o&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,o)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(lt(y6),lt(Sk))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),vde=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(g6,[]);this.chain=r.reduceRight((i,o)=>new p6(i,o),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(lt(a6),lt(Ci))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),_de=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Ck,useClass:pde}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:xk,useValue:e.cookieName}:[],e.headerName?{provide:Sk,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[Ck,{provide:g6,useExisting:Ck,multi:!0},{provide:y6,useClass:yde},{provide:xk,useValue:"XSRF-TOKEN"},{provide:Sk,useValue:"X-XSRF-TOKEN"}]}),n})(),bde=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[Vb,{provide:s6,useClass:vde},m6,{provide:a6,useExisting:m6}],imports:[[_de.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const wde=["*"];let zb;function ky(n){var t;return(null===(t=function xde(){if(void 0===zb&&(zb=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(zb=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return zb}())||void 0===t?void 0:t.createHTML(n))||n}function v6(n){return Error(`Unable to find icon with the name "${n}"`)}function _6(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function b6(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Oh{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let Dy=(()=>{class n{constructor(e,r,i,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,o){return this._addSvgIconConfig(e,r,new Oh(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,o){const s=this._sanitizer.sanitize(kr.HTML,i);if(!s)throw b6(i);const a=ky(s);return this._addSvgIconConfig(e,r,new Oh("",a,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new Oh(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){const o=this._sanitizer.sanitize(kr.HTML,r);if(!o)throw b6(r);const s=ky(o);return this._addSvgIconSetConfig(e,new Oh("",s,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(kr.RESOURCE_URL,e);if(!r)throw _6(e);const i=this._cachedIconsByUrl.get(r);return i?An(Wb(i)):this._loadSvgIconFromConfig(new Oh(e,null)).pipe(Mo(o=>this._cachedIconsByUrl.set(r,o)),K(o=>Wb(o)))}getNamedSvgIcon(e,r=""){const i=w6(r,e);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(e,s):vp(v6(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?An(Wb(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(K(r=>Wb(r)))}_getSvgFromIconSetConfigs(e,r){const i=this._extractIconWithNameFromAnySet(e,r);return i?An(i):M5(r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(su(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(kr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),An(null)})))).pipe(K(()=>{const s=this._extractIconWithNameFromAnySet(e,r);if(!s)throw v6(e);return s}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Mo(r=>e.svgText=r),K(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?An(null):this._fetchIcon(e).pipe(Mo(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){const o=e.querySelector(`[id="${r}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,i);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),i);const a=this._svgElementFromString(ky("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){const r=this._svgElementFromString(ky("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){const{name:s,value:a}=i[o];"id"!==s&&r.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){var r;const{url:i,options:o}=e,s=null!==(r=null==o?void 0:o.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function Sde(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const a=this._sanitizer.sanitize(kr.RESOURCE_URL,i);if(!a)throw _6(i);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(K(d=>ky(d)),r4(()=>this._inProgressUrlFetches.delete(a)),We());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(w6(e,r),i),this}_addSvgIconSetConfig(e,r){const i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,e);if(o)return Ede(o)?new Oh(o.url,null,o.options):new Oh(o,null)}}}return n.\u0275fac=function(e){return new(e||n)(lt(Vb,8),lt(fc),lt(zn,8),lt(ic))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wb(n){return n.cloneNode(!0)}function w6(n,t){return n+":"+t}function Ede(n){return!(!n.url||!n.options)}const Ade=Eh(class{constructor(n){this._elementRef=n}}),kde=new Ot("mat-icon-location",{providedIn:"root",factory:function Dde(){const n=hm(zn),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),x6=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Tde=x6.map(n=>`[${n}]`).join(", "),Mde=/^url\(['"]?#(.*?)['"]?\)$/;let md=(()=>{class n extends Ade{constructor(e,r,i,o,s){super(e),this._iconRegistry=r,this._location=o,this._errorHandler=s,this._inline=!1,this._currentIconFetch=w.EMPTY,i||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Mr(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=e.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),r&&e.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(Tde),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)x6.forEach(s=>{const a=r[o],l=a.getAttribute(s),c=l?l.match(Mde):null;if(c){let d=i.get(a);d||(d=[],i.set(a,d)),d.push({name:s,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(ke(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Dy),Zs("aria-hidden"),xe(kde),xe(ic))},n.\u0275cmp=Jt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,r){2&e&&(tr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),br("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ht],ngContentSelectors:wde,decls:1,vars:0,template:function(e,r){1&e&&(no(),ur(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Ide=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[ir],ir]}),n})();function Rde(n,t){if(1&n&&(Le(0,"mat-option",11),nt(1),Be()),2&n){const e=t.$implicit;cp("value",e.url),it(1),Tr(" ",e.name," ")}}let Ode=(()=>{class n{constructor(e,r,i){this.solidAuthenticationService=e,this.notificationService=r,this.router=i,this.oidcSelection=new gs,this.oidc=e.getDefaultOidcProviders()}login(){const e=this.oidcSelection.value;""===e||this.isValidUrl(e)?this.solidAuthenticationService.goToLoginPage(e).catch(r=>this.notificationService.error({title:"Login error",message:null==r?void 0:r.message})):this.notificationService.error({title:"Invalid provider",message:`"${e}" is not a valid URL`})}isValidUrl(e){try{return new URL(e),!0}catch(r){return!1}}ngOnInit(){this.solidAuthenticationService.isLoggedIn().subscribe(e=>{e&&this.router.navigate(["home"])}),this.filteredOptions$=this.oidcSelection.valueChanges.pipe(Qs(""),K(e=>this._filter(e)))}_filter(e){const r=e.toLowerCase();return this.oidc.filter(i=>i.url.toLowerCase().includes(r))}}return n.\u0275fac=function(e){return new(e||n)(xe(Rl),xe(pd),xe(Ei))},n.\u0275cmp=Jt({type:n,selectors:[["app-welcome"]],decls:32,vars:7,consts:[[1,"box"],["src","assets/logo_notext.png",2,"margin-top","3em","width","30%"],[2,"font-size","5vw"],[1,"example-form"],["appearance","outline",1,"example-full-width"],["type","text","id","provider","matInput","",3,"placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","solid"],["mat-raised-button","","color","primary",1,"example-full-width",3,"disabled","click"],["href","/faq"],[3,"value"]],template:function(e,r){if(1&e&&(Le(0,"div")(1,"div",0),qt(2,"div"),Le(3,"div",0),qt(4,"img",1),Le(5,"h1",2),nt(6,"SolidCryptPad"),Be()(),Le(7,"div")(8,"p"),nt(9,"Your secure decentralized collaboration tool."),Be()(),Le(10,"div")(11,"h3"),nt(12,"Connect your Solid Pod to start!"),Be()(),Le(13,"div")(14,"form",3)(15,"mat-form-field",4)(16,"mat-label"),nt(17,"Provider"),Be(),qt(18,"input",5),Le(19,"mat-autocomplete",null,6),vt(21,Rde,2,2,"mat-option",7),dc(22,"async"),Be(),qt(23,"mat-icon",8),Be()(),Le(24,"div")(25,"button",9),At("click",function(){return r.login()}),nt(26," LOGIN "),Be()()(),Le(27,"div")(28,"small"),nt(29,"No idea what Solid is? Refer to our "),Le(30,"a",10),nt(31,"FAQ"),Be()()()()()),2&e){const i=Al(20);it(18),cp("placeholder",r.oidc[0].name),ut("formControl",r.oidcSelection)("matAutocomplete",i),it(3),ut("ngForOf",nu(22,5,r.filteredOptions$)),it(4),ut("disabled",!r.isValidUrl(r.oidcSelection.value))}},directives:[kh,pu,hd,Mh,mu,Ih,xa,o6,ta,Dh,tde,ph,D5,md,iue,Qo],pipes:[yE],styles:["input[_ngcontent-%COMP%]{margin-left:1rem}.main[_ngcontent-%COMP%]{text-align:center;border:2px solid black;width:60%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:30vw}"]}),n})();var Xe=F(5861);function io(n){return"http://www.w3.org/ns/auth/acl#"+n}io("Access"),io("Append"),io("Write"),io("AuthenticatedAgent"),io("Authorization"),io("Control"),io("Origin"),io("Read"),io("accessControl"),io("accessTo"),io("accessToClass"),io("agent"),io("agentClass"),io("agentGroup"),io("default"),io("defaultForNew"),io("delegates"),io("mode"),io("origin"),io("owner");function $b(n){return"http://www.w3.org/ns/dx/conneg/altr#"+n}$b("Representation"),$b("hasRepresentation"),$b("hasDefaultRepresentation");function St(n){return"https://www.w3.org/ns/activitystreams#"+n}St("Activity"),St("Object"),St("Link"),St("OrderedItems"),St("Collection"),St("CollectionPage"),St("Image"),St("Document"),St("Relationship"),St("Question"),St("IntransitiveActivity"),St("Profile"),St("Tombstone"),St("Place"),St("OrderedCollectionPage"),St("OrderedCollection"),St("Accept"),St("Block"),St("Ignore"),St("Add"),St("Announce"),St("Application"),St("Arrive"),St("Article"),St("Audio"),St("Create"),St("Delete"),St("Dislike"),St("Event"),St("Flag"),St("Follow"),St("Group"),St("Invite"),St("Offer"),St("Join"),St("Leave"),St("Like"),St("View"),St("Listen"),St("Read"),St("Move"),St("Travel"),St("Mention"),St("Note"),St("Page"),St("Person"),St("Organization"),St("Reject"),St("Remove"),St("Service"),St("TentativeAccept"),St("TentativeReject"),St("Undo"),St("Update"),St("Video"),St("actor"),St("attributedTo"),St("attachment"),St("attachments"),St("author"),St("bcc"),St("bto"),St("cc"),St("context"),St("current"),St("first"),St("generator"),St("icon"),St("image"),St("inReplyTo"),St("items"),St("last"),St("location"),St("next"),St("object"),St("oneOf"),St("anyOf"),St("prev"),St("preview"),St("provider"),St("replies"),St("result"),St("audience"),St("partOf"),St("tag"),St("tags"),St("target"),St("origin"),St("instrument"),St("to"),St("url"),St("subject"),St("relationship"),St("describes"),St("formerType"),St("accuracy"),St("altitude"),St("content"),St("name"),St("downstreamDuplicates"),St("duration"),St("endTime"),St("height"),St("href"),St("hreflang"),St("id"),St("latitude"),St("longitude"),St("mediaType"),St("objectType"),St("published"),St("radius"),St("rating"),St("rel"),St("startIndex"),St("startTime"),St("summary"),St("totalItems"),St("units"),St("updated"),St("upstreamDuplicates"),St("verb"),St("width"),St("deleted");function vu(n){return"http://www.w3.org/2002/01/bookmark#"+n}vu("Topic"),vu("Shortcut"),vu("Bookmark"),vu("hasTopic"),vu("leadsTo"),vu("bookmarks"),vu("recalls"),vu("subTopicOf");function Io(n){return"https://www.w3.org/2018/credentials#"+n}Io("VerifiableCredential"),Io("JsonSchemaValidator2018"),Io("ManualRefreshService2018"),Io("VerifiablePresentation"),Io("verifiableCredential"),Io("credentialSchema"),Io("credentialStatus"),Io("credentialSubject"),Io("evidence"),Io("expirationDate"),Io("holder"),Io("issued"),Io("issuer"),Io("issuanceDate"),Io("refreshService"),Io("termsOfUse"),Io("validFrom"),Io("validUntil");function mr(n){return"http://www.w3.org/ns/dcat#"+n}mr("Catalog"),mr("Dataset"),mr("Resource"),mr("CatalogRecord"),mr("DataService"),mr("Distribution"),mr("Relationship"),mr("Role"),mr("hadRole"),mr("accessService"),mr("accessURL"),mr("endpointURL"),mr("bbox"),mr("byteSize"),mr("catalog"),mr("centroid"),mr("compressFormat"),mr("contactPoint"),mr("dataset"),mr("distribution"),mr("downloadURL"),mr("endDate"),mr("endpointDescription"),mr("keyword"),mr("landingPage"),mr("mediaType"),mr("packageFormat"),mr("qualifiedRelation"),mr("record"),mr("servesDataset"),mr("service"),mr("spatialResolutionInMeters"),mr("startDate"),mr("temporalResolution"),mr("theme"),mr("themeTaxonomy");function Lt(n){return"http://purl.org/dc/terms/"+n}Lt("Agent"),Lt("AgentClass"),Lt("BibliographicResource"),Lt("FileFormat"),Lt("MediaType"),Lt("MediaTypeOrExtent"),Lt("Frequency"),Lt("Jurisdiction"),Lt("LocationPeriodOrJurisdiction"),Lt("LicenseDocument"),Lt("RightsStatement"),Lt("LinguisticSystem"),Lt("Location"),Lt("MethodOfAccrual"),Lt("MethodOfInstruction"),Lt("PeriodOfTime"),Lt("PhysicalMedium"),Lt("PhysicalResource"),Lt("Policy"),Lt("ProvenanceStatement"),Lt("SizeOrDuration"),Lt("Standard"),Lt("modified"),Lt("publisher"),Lt("title"),Lt("hasVersion"),Lt("issued"),Lt("date"),Lt("description"),Lt("relation"),Lt("Box"),Lt("ISO3166"),Lt("ISO639-2"),Lt("ISO639-3"),Lt("Period"),Lt("Point"),Lt("RFC1766"),Lt("RFC3066"),Lt("RFC4646"),Lt("RFC5646"),Lt("URI"),Lt("W3CDTF"),Lt("abstract"),Lt("accessRights"),Lt("rights"),Lt("accrualMethod"),Lt("accrualPeriodicity"),Lt("accrualPolicy"),Lt("alternative"),Lt("audience"),Lt("available"),Lt("bibliographicCitation"),Lt("identifier"),Lt("conformsTo"),Lt("contributor"),Lt("coverage"),Lt("created"),Lt("creator"),Lt("dateAccepted"),Lt("dateCopyrighted"),Lt("dateSubmitted"),Lt("educationLevel"),Lt("extent"),Lt("format"),Lt("hasFormat"),Lt("hasPart"),Lt("instructionalMethod"),Lt("isFormatOf"),Lt("isPartOf"),Lt("isReferencedBy"),Lt("isReplacedBy"),Lt("isRequiredBy"),Lt("isVersionOf"),Lt("language"),Lt("license"),Lt("mediator"),Lt("medium"),Lt("provenance"),Lt("references"),Lt("replaces"),Lt("requires"),Lt("rightsHolder"),Lt("source"),Lt("spatial"),Lt("subject"),Lt("tableOfContents"),Lt("temporal"),Lt("type"),Lt("valid");function Rn(n){return"http://usefulinc.com/ns/doap#"+n}Rn("Project"),Rn("Version"),Rn("Specification"),Rn("Repository"),Rn("SVNRepository"),Rn("GitRepository"),Rn("BKRepository"),Rn("CVSRepository"),Rn("ArchRepository"),Rn("BazaarBranch"),Rn("GitBranch"),Rn("HgRepository"),Rn("DarcsRepository"),Rn("name"),Rn("homepage"),Rn("old-homepage"),Rn("created"),Rn("shortdesc"),Rn("description"),Rn("release"),Rn("mailing-list"),Rn("support-forum"),Rn("developer-forum"),Rn("category"),Rn("license"),Rn("repository"),Rn("repositoryOf"),Rn("anon-root"),Rn("browse"),Rn("module"),Rn("location"),Rn("download-page"),Rn("download-mirror"),Rn("revision"),Rn("file-release"),Rn("wiki"),Rn("bug-database"),Rn("screenshots"),Rn("maintainer"),Rn("developer"),Rn("documenter"),Rn("translator"),Rn("tester"),Rn("helper"),Rn("programming-language"),Rn("os"),Rn("implements"),Rn("service-endpoint"),Rn("language"),Rn("vendor"),Rn("platform"),Rn("audience"),Rn("blog");function _i(n){return"http://www.w3.org/ns/earl#"+n}_i("Assertion"),_i("Assertor"),_i("TestSubject"),_i("TestCriterion"),_i("TestRequirement"),_i("TestCase"),_i("TestResult"),_i("TestMode"),_i("OutcomeValue"),_i("Pass"),_i("Fail"),_i("CannotTell"),_i("NotApplicable"),_i("NotTested"),_i("Software"),_i("assertedBy"),_i("subject"),_i("test"),_i("result"),_i("mode"),_i("mainAssertor"),_i("outcome"),_i("pointer"),_i("info");var R6="http://xmlns.com/foaf/0.1/";function Yt(n){return R6+n}var O6={PREFIX:"foaf",NAMESPACE:R6,PREFIX_AND_NAMESPACE:{foaf:"http://xmlns.com/foaf/0.1/"},NS:Yt,Agent:Yt("Agent"),Document:Yt("Document"),Organization:Yt("Organization"),Project:Yt("Project"),Person:Yt("Person"),Group:Yt("Group"),Image:Yt("Image"),LabelProperty:Yt("LabelProperty"),OnlineAccount:Yt("OnlineAccount"),OnlineChatAccount:Yt("OnlineChatAccount"),OnlineEcommerceAccount:Yt("OnlineEcommerceAccount"),OnlineGamingAccount:Yt("OnlineGamingAccount"),PersonalProfileDocument:Yt("PersonalProfileDocument"),account:Yt("account"),accountName:Yt("accountName"),accountServiceHomepage:Yt("accountServiceHomepage"),age:Yt("age"),aimChatID:Yt("aimChatID"),nick:Yt("nick"),based_near:Yt("based_near"),birthday:Yt("birthday"),currentProject:Yt("currentProject"),depiction:Yt("depiction"),depicts:Yt("depicts"),dnaChecksum:Yt("dnaChecksum"),familyName:Yt("familyName"),family_name:Yt("family_name"),firstName:Yt("firstName"),focus:Yt("focus"),fundedBy:Yt("fundedBy"),geekcode:Yt("geekcode"),gender:Yt("gender"),givenName:Yt("givenName"),givenname:Yt("givenname"),holdsAccount:Yt("holdsAccount"),homepage:Yt("homepage"),page:Yt("page"),isPrimaryTopicOf:Yt("isPrimaryTopicOf"),topic:Yt("topic"),primaryTopic:Yt("primaryTopic"),icqChatID:Yt("icqChatID"),img:Yt("img"),interest:Yt("interest"),jabberID:Yt("jabberID"),knows:Yt("knows"),lastName:Yt("lastName"),logo:Yt("logo"),made:Yt("made"),maker:Yt("maker"),mbox:Yt("mbox"),mbox_sha1sum:Yt("mbox_sha1sum"),member:Yt("member"),membershipClass:Yt("membershipClass"),msnChatID:Yt("msnChatID"),myersBriggs:Yt("myersBriggs"),name:Yt("name"),openid:Yt("openid"),pastProject:Yt("pastProject"),phone:Yt("phone"),plan:Yt("plan"),publications:Yt("publications"),schoolHomepage:Yt("schoolHomepage"),sha1:Yt("sha1"),skypeID:Yt("skypeID"),status:Yt("status"),surname:Yt("surname"),theme:Yt("theme"),thumbnail:Yt("thumbnail"),tipjar:Yt("tipjar"),title:Yt("title"),topic_interest:Yt("topic_interest"),weblog:Yt("weblog"),workInfoHomepage:Yt("workInfoHomepage"),workplaceHomepage:Yt("workplaceHomepage"),yahooChatID:Yt("yahooChatID")};function sr(n){return"http://www.w3.org/2011/http#"+n}sr("Connection"),sr("EntityHeader"),sr("MessageHeader"),sr("GeneralHeader"),sr("HeaderElement"),sr("HeaderName"),sr("Message"),sr("Method"),sr("Parameter"),sr("Request"),sr("RequestHeader"),sr("Response"),sr("ResponseHeader"),sr("StatusCode"),sr("absoluteURI"),sr("requestURI"),sr("absolutePath"),sr("authority"),sr("body"),sr("connectionAuthority"),sr("elementName"),sr("elementValue"),sr("fieldName"),sr("fieldValue"),sr("headerElements"),sr("hdrName"),sr("headers"),sr("httpVersion"),sr("mthd"),sr("methodName"),sr("paramName"),sr("params"),sr("paramValue"),sr("reasonPhrase"),sr("requests"),sr("resp"),sr("sc"),sr("statusCodeNumber"),sr("statusCodeValue");function Kb(n){return"http://www.w3.org/2007/ont/httph#"+n}Kb("content-type"),Kb("accept"),Kb("accept-language");function hr(n){return"http://www.w3.org/ns/hydra/core#"+n}hr("Class"),hr("Link"),hr("ApiDocumentation"),hr("TemplatedLink"),hr("Error"),hr("Collection"),hr("PartialCollectionView"),hr("BaseUriSource"),hr("HeaderSpecification"),hr("property"),hr("required"),hr("readable"),hr("writable"),hr("writeable"),hr("method"),hr("statusCode"),hr("title"),hr("description"),hr("manages"),hr("totalItems"),hr("freetextQuery"),hr("template"),hr("Rfc6570Template"),hr("variableRepresentation"),hr("mapping"),hr("variable"),hr("resolveRelativeUsing"),hr("offset"),hr("limit"),hr("pageIndex"),hr("pageReference"),hr("returnsHeader"),hr("expectsHeader"),hr("headerName"),hr("possibleValue"),hr("closedSet"),hr("extension");function wn(n){return"https://www.w3.org/2002/12/cal/ical#"+n}wn("Valarm"),wn("Value_DURATION"),wn("Value_CAL-ADDRESS"),wn("Value_DATE"),wn("Value_DATE-TIME"),wn("Value_PERIOD"),wn("Value_RECUR"),wn("Vevent"),wn("Vfreebusy"),wn("Vjournal"),wn("Vtimezone"),wn("Vtodo"),wn("attach"),wn("description"),wn("summary"),wn("duration"),wn("attendee"),wn("action"),wn("repeat"),wn("trigger"),wn("categories"),wn("class"),wn("comment"),wn("geo"),wn("location"),wn("priority"),wn("resources"),wn("status"),wn("dtend"),wn("dtstart"),wn("transp"),wn("contact"),wn("organizer"),wn("relatedTo"),wn("url"),wn("uid"),wn("exrule"),wn("rdate"),wn("rrule"),wn("created"),wn("dtstamp"),wn("lastModified"),wn("sequence"),wn("requestStatus"),wn("freebusy"),wn("tzid"),wn("tzname"),wn("tzoffsetfrom"),wn("tzoffsetto"),wn("tzurl"),wn("percentComplete"),wn("completed"),wn("due"),wn("X-"),wn("calscale"),wn("exdate"),wn("method"),wn("prodid"),wn("recurrenceId"),wn("version");function ai(n){return"http://www.w3.org/ns/json-ld#"+n}ai("Context"),ai("PrefixDefinition"),ai("TermDefinition"),ai("base"),ai("compacted"),ai("container"),ai("context"),ai("definition"),ai("direction"),ai("expanded"),ai("flattened"),ai("frame"),ai("framed"),ai("id"),ai("import"),ai("language"),ai("nest"),ai("prefix"),ai("propagate"),ai("protected"),ai("reverse"),ai("streaming"),ai("term"),ai("type"),ai("version"),ai("vocab");function Bi(n){return"http://www.w3.org/ns/ldp#"+n}Bi("Resource"),Bi("RDFSource"),Bi("NonRDFSource"),Bi("Container"),Bi("BasicContainer"),Bi("DirectContainer"),Bi("IndirectContainer"),Bi("Page"),Bi("PageSortCriterion"),Bi("hasMemberRelation"),Bi("isMemberOfRelation"),Bi("membershipResource"),Bi("insertedContentRelation"),Bi("member"),Bi("contains"),Bi("constrainedBy"),Bi("pageSortCriteria"),Bi("pageSortPredicate"),Bi("pageSortOrder"),Bi("pageSortCollation"),Bi("pageSequence"),Bi("inbox");function st(n){return"http://www.w3.org/ns/odrl/2/"+n}st("Policy"),st("uid"),st("profile"),st("inheritFrom"),st("Rule"),st("relation"),st("function"),st("failure"),st("Asset"),st("Party"),st("ConflictTerm"),st("conflict"),st("perm"),st("prohibit"),st("invalid"),st("Agreement"),st("Offer"),st("Set"),st("Assertion"),st("Privacy"),st("Request"),st("Ticket"),st("AssetCollection"),st("target"),st("hasPolicy"),st("output"),st("PartyCollection"),st("assignee"),st("assigner"),st("assigneeOf"),st("assignerOf"),st("attributedParty"),st("attributingParty"),st("compensatedParty"),st("compensatingParty"),st("consentingParty"),st("consentedParty"),st("contractingParty"),st("contractedParty"),st("informedParty"),st("informingParty"),st("trackingParty"),st("trackedParty"),st("partOf"),st("source"),st("Action"),st("action"),st("includedIn"),st("implies"),st("Permission"),st("permission"),st("Prohibition"),st("Duty"),st("prohibition"),st("use"),st("transfer"),st("acceptTracking"),st("aggregate"),st("annotate"),st("anonymize"),st("archive"),st("attribute"),st("compensate"),st("concurrentUse"),st("delete"),st("derive"),st("digitize"),st("display"),st("distribute"),st("ensureExclusivity"),st("execute"),st("extract"),st("give"),st("grantUse"),st("include"),st("index"),st("inform"),st("install"),st("modify"),st("move"),st("nextPolicy"),st("obtainConsent"),st("play"),st("present"),st("print"),st("read"),st("reproduce"),st("reviewPolicy"),st("sell"),st("stream"),st("synchronize"),st("textToSpeech"),st("transform"),st("translate"),st("uninstall"),st("watermark"),st("obligation"),st("duty"),st("consequence"),st("remedy"),st("Constraint"),st("constraint"),st("refinement"),st("Operator"),st("operator"),st("RightOperand"),st("rightOperand"),st("rightOperandReference"),st("LeftOperand"),st("leftOperand"),st("dataType"),st("status"),st("LogicalConstraint"),st("operand"),st("absolutePosition"),st("absoluteSpatialPosition"),st("absoluteTemporalPosition"),st("absoluteSize"),st("count"),st("dateTime"),st("delayPeriod"),st("deliveryChannel"),st("elapsedTime"),st("event"),st("fileFormat"),st("industry"),st("language"),st("media"),st("meteredTime"),st("payAmount"),st("percentage"),st("product"),st("purpose"),st("recipient"),st("relativePosition"),st("relativeSpatialPosition"),st("relativeTemporalPosition"),st("relativeSize"),st("resolution"),st("spatial"),st("spatialCoordinates"),st("systemDevice"),st("timeInterval"),st("unitOfCount"),st("version"),st("virtualLocation"),st("device"),st("system"),st("or"),st("xone"),st("and"),st("andSequence"),st("eq"),st("gt"),st("gteq"),st("lt"),st("lteq"),st("neq"),st("isA"),st("hasPart"),st("isPartOf"),st("isAllOf"),st("isAnyOf"),st("isNoneOf"),st("policyUsage"),st("proximity"),st("append"),st("appendTo"),st("copy"),st("export"),st("lease"),st("license"),st("lend"),st("pay"),st("payeeParty"),st("preview"),st("secondaryUse"),st("write"),st("writeTo"),st("adHocShare"),st("extractChar"),st("extractPage"),st("extractWord"),st("timedCount"),st("inheritRelation"),st("inheritAllowed"),st("UndefinedTerm"),st("undefined"),st("ignore"),st("support"),st("AssetScope"),st("PartyScope"),st("scope"),st("Group"),st("Individual"),st("All"),st("AllConnections"),st("All2ndConnections"),st("AllGroups"),st("attachPolicy"),st("attachSource"),st("shareAlike"),st("commercialize"),st("share"),st("core"),st("unit");function bc(n){return"http://purl.org/ontology/olo/core#"+n}bc("OrderedList"),bc("Slot"),bc("length"),bc("next"),bc("index"),bc("ordered_list"),bc("previous"),bc("slot"),bc("item");function Xt(n){return"http://www.w3.org/2002/07/owl#"+n}Xt("Ontology"),Xt("OntologyProperty"),Xt("AnnotationProperty"),Xt("AllDifferent"),Xt("AllDisjointClasses"),Xt("AllDisjointProperties"),Xt("Annotation"),Xt("AsymmetricProperty"),Xt("ObjectProperty"),Xt("Axiom"),Xt("Class"),Xt("DataRange"),Xt("DatatypeProperty"),Xt("DeprecatedClass"),Xt("DeprecatedProperty"),Xt("FunctionalProperty"),Xt("InverseFunctionalProperty"),Xt("IrreflexiveProperty"),Xt("NamedIndividual"),Xt("Thing"),Xt("NegativePropertyAssertion"),Xt("Nothing"),Xt("ReflexiveProperty"),Xt("Restriction"),Xt("SymmetricProperty"),Xt("TransitiveProperty"),Xt("versionInfo"),Xt("allValuesFrom"),Xt("annotatedProperty"),Xt("annotatedSource"),Xt("annotatedTarget"),Xt("assertionProperty"),Xt("backwardCompatibleWith"),Xt("bottomDataProperty"),Xt("bottomObjectProperty"),Xt("cardinality"),Xt("complementOf"),Xt("datatypeComplementOf"),Xt("deprecated"),Xt("differentFrom"),Xt("disjointUnionOf"),Xt("disjointWith"),Xt("distinctMembers"),Xt("equivalentClass"),Xt("equivalentProperty"),Xt("hasKey"),Xt("hasSelf"),Xt("hasValue"),Xt("incompatibleWith"),Xt("intersectionOf"),Xt("inverseOf"),Xt("maxCardinality"),Xt("maxQualifiedCardinality"),Xt("members"),Xt("minCardinality"),Xt("minQualifiedCardinality"),Xt("onClass"),Xt("onDataRange"),Xt("onDatatype"),Xt("oneOf"),Xt("onProperties"),Xt("onProperty"),Xt("priorVersion"),Xt("propertyChainAxiom"),Xt("propertyDisjointWith"),Xt("qualifiedCardinality"),Xt("sameAs"),Xt("someValuesFrom"),Xt("sourceIndividual"),Xt("targetIndividual"),Xt("targetValue"),Xt("topDataProperty"),Xt("topObjectProperty"),Xt("unionOf"),Xt("withRestrictions");function na(n){return"http://www.w3.org/ns/posix/stat#"+n}na("atime"),na("blksize"),na("blocks"),na("ctime"),na("dev"),na("gid"),na("ino"),na("mode"),na("mtime"),na("nlink"),na("rdev"),na("size"),na("uid");function Pt(n){return"http://www.w3.org/ns/prov#"+n}Pt("Entity"),Pt("Revision"),Pt("Activity"),Pt("InstantaneousEvent"),Pt("ActivityInfluence"),Pt("EntityInfluence"),Pt("Influence"),Pt("Agent"),Pt("AgentInfluence"),Pt("Association"),Pt("Attribution"),Pt("Bundle"),Pt("Collection"),Pt("Communication"),Pt("Delegation"),Pt("Derivation"),Pt("EmptyCollection"),Pt("End"),Pt("Generation"),Pt("Invalidation"),Pt("Location"),Pt("Organization"),Pt("Person"),Pt("Plan"),Pt("PrimarySource"),Pt("Quotation"),Pt("Role"),Pt("SoftwareAgent"),Pt("Start"),Pt("Usage"),Pt("wasRevisionOf"),Pt("specializationOf"),Pt("category"),Pt("component"),Pt("wasDerivedFrom"),Pt("inverse"),Pt("qualifiedForm"),Pt("qualifiedRevision"),Pt("alternateOf"),Pt("constraints"),Pt("definition"),Pt("dm"),Pt("n"),Pt("activity"),Pt("editorsDefinition"),Pt("influencer"),Pt("editorialNote"),Pt("entity"),Pt("unqualifiedForm"),Pt("wasInfluencedBy"),Pt("hadActivity"),Pt("sharesDefinitionWith"),Pt("qualifiedInfluence"),Pt("agent"),Pt("wasAssociatedWith"),Pt("qualifiedAssociation"),Pt("wasAttributedTo"),Pt("qualifiedAttribution"),Pt("wasInformedBy"),Pt("qualifiedCommunication"),Pt("actedOnBehalfOf"),Pt("qualifiedDelegation"),Pt("qualifiedDerivation"),Pt("wasEndedBy"),Pt("qualifiedEnd"),Pt("wasGeneratedBy"),Pt("qualifiedGeneration"),Pt("wasInvalidatedBy"),Pt("qualifiedInvalidation"),Pt("atLocation"),Pt("hadPrimarySource"),Pt("qualifiedPrimarySource"),Pt("wasQuotedFrom"),Pt("qualifiedQuotation"),Pt("hadRole"),Pt("wasStartedBy"),Pt("qualifiedStart"),Pt("used"),Pt("qualifiedUsage"),Pt("aq"),Pt("atTime"),Pt("endedAtTime"),Pt("generatedAtTime"),Pt("invalidatedAtTime"),Pt("startedAtTime"),Pt("generated"),Pt("influenced"),Pt("hadGeneration"),Pt("hadMember"),Pt("hadPlan"),Pt("hadUsage"),Pt("invalidated"),Pt("order"),Pt("todo"),Pt("value");function yr(n){return"http://purl.org/linked-data/cube#"+n}yr("DataSet"),yr("Attachable"),yr("Observation"),yr("ObservationGroup"),yr("Slice"),yr("ComponentProperty"),yr("DimensionProperty"),yr("CodedProperty"),yr("MeasureProperty"),yr("AttributeProperty"),yr("DataStructureDefinition"),yr("ComponentSet"),yr("ComponentSpecification"),yr("SliceKey"),yr("HierarchicalCodeList"),yr("dataSet"),yr("observation"),yr("observationGroup"),yr("slice"),yr("measureType"),yr("structure"),yr("component"),yr("componentProperty"),yr("order"),yr("componentRequired"),yr("componentAttachment"),yr("dimension"),yr("measure"),yr("attribute"),yr("measureDimension"),yr("sliceStructure"),yr("sliceKey"),yr("concept"),yr("codeList"),yr("hierarchyRoot"),yr("parentChildProperty");function Ui(n){return"http://www.w3.org/1999/02/22-rdf-syntax-ns#"+n}Ui("Property"),Ui("HTML"),Ui("langString"),Ui("PlainLiteral"),Ui("Statement"),Ui("Bag"),Ui("Seq"),Ui("Alt"),Ui("List"),Ui("XMLLiteral"),Ui("JSON"),Ui("CompoundLiteral"),Ui("type"),Ui("subject"),Ui("predicate"),Ui("object"),Ui("value"),Ui("nil"),Ui("first"),Ui("rest"),Ui("language"),Ui("direction");function ms(n){return"http://www.w3.org/2000/01/rdf-schema#"+n}ms("Resource"),ms("Class"),ms("Literal"),ms("Container"),ms("ContainerMembershipProperty"),ms("Datatype"),ms("seeAlso"),ms("isDefinedBy"),ms("label"),ms("comment"),ms("range"),ms("domain"),ms("subClassOf"),ms("subPropertyOf"),ms("member");function _o(n){return"http://persistence.uni-leipzig.org/nlp2rdf/ontologies/rlog#"+n}_o("Level"),_o("Entry"),_o("StatusCode"),_o("ALL"),_o("priority"),_o("DEBUG"),_o("ERROR"),_o("FATAL"),_o("INFO"),_o("OFF"),_o("TRACE"),_o("WARN"),_o("className"),_o("codeId"),_o("date"),_o("hasCode"),_o("level"),_o("message"),_o("resource");function Sr(n){return"http://schema.org/"+n}Sr("Person"),Sr("URL"),Sr("MedicalTherapy"),Sr("EducationalOccupationalCredential"),Sr("PostalAddress"),Sr("Product"),Sr("alternateName"),Sr("givenName"),Sr("familyName"),Sr("additionalName"),Sr("license"),Sr("name"),Sr("text"),Sr("identifier"),Sr("description"),Sr("image"),Sr("url"),Sr("startTime"),Sr("endTime"),Sr("startDate"),Sr("endDate"),Sr("email"),Sr("primaryPrevention"),Sr("qualifications"),Sr("attendee"),Sr("address"),Sr("streetAddress"),Sr("addressLocality"),Sr("addressRegion"),Sr("postalCode"),Sr("addressCountry"),Sr("accessCode"),Sr("accountId"),Sr("serialNumber"),Sr("productID");function Kr(n){return"http://www.w3.org/ns/sparql-service-description#"+n}Kr("Service"),Kr("Feature"),Kr("EntailmentRegime"),Kr("NamedGraph"),Kr("EntailmentProfile"),Kr("Function"),Kr("Aggregate"),Kr("Language"),Kr("Dataset"),Kr("GraphCollection"),Kr("Graph"),Kr("endpoint"),Kr("feature"),Kr("defaultEntailmentRegime"),Kr("entailmentRegime"),Kr("defaultSupportedEntailmentProfile"),Kr("supportedEntailmentProfile"),Kr("extensionFunction"),Kr("extensionAggregate"),Kr("languageExtension"),Kr("supportedLanguage"),Kr("propertyFeature"),Kr("defaultDataset"),Kr("availableGraphs"),Kr("resultFormat"),Kr("inputFormat"),Kr("defaultGraph"),Kr("namedGraph"),Kr("name"),Kr("graph");function Ol(n){return"http://purl.org/linked-data/sdmx/2009/dimension#"+n}Ol("age"),Ol("civilStatus"),Ol("currency"),Ol("educationLev"),Ol("freq"),Ol("occupation"),Ol("refArea"),Ol("refPeriod"),Ol("sex"),Ol("timePeriod");function sn(n){return"https://w3id.org/security#"+n}sn("EcdsaSecp256k1Signature2019"),sn("EcdsaSecp256k1RecoverySignature2020"),sn("EcdsaSecp256k1VerificationKey2019"),sn("EcdsaSecp256k1RecoveryMethod2020"),sn("RsaSignature2018"),sn("RsaVerificationKey2018"),sn("SchnorrSecp256k1Signature2019"),sn("SchnorrSecp256k1VerificationKey2019"),sn("ServiceEndpointProxyService"),sn("Digest"),sn("EncryptedMessage"),sn("Signature"),sn("LinkedDataSignature2015"),sn("X25519KeyAgreementKey2019"),sn("Ed25519VerificationKey2018"),sn("BbsBlsSignature2020"),sn("BbsBlsSignatureProof2020"),sn("Bls12381G1Key2020"),sn("Bls12381G2Key2020"),sn("Key"),sn("cipherAlgorithm"),sn("cipherData"),sn("digestAlgorithm"),sn("digestValue"),sn("cipherKey"),sn("blockchainAccountId"),sn("ethereumAddress"),sn("expires"),sn("initializationVector"),sn("nonce"),sn("canonicalizationAlgorithm"),sn("owner"),sn("password"),sn("privateKeyPem"),sn("verificationMethod"),sn("publicKey"),sn("assertionMethod"),sn("authentication"),sn("capabilityDelegation"),sn("capabilityInvocation"),sn("keyAgreement"),sn("publicKeyBase58"),sn("publicKeyJwk"),sn("publicKeyPem"),sn("publicKeyHex"),sn("publicKeyMultibase"),sn("publicKeyService"),sn("revoked"),sn("proof"),sn("jws"),sn("proofPurpose"),sn("challenge"),sn("domain"),sn("expiration"),sn("proofValue"),sn("signature"),sn("signatureValue"),sn("signatureAlgorithm"),sn("service"),sn("serviceEndpoint"),sn("x509CertificateChain"),sn("x509CertificateFingerprint"),sn("allowedAction"),sn("capability"),sn("capabilityAction"),sn("capabilityChain"),sn("caveat"),sn("delegator"),sn("invocationTarget"),sn("invoker");function pn(n){return"http://www.w3.org/ns/shex#"+n}pn("Annotation"),pn("EachOf"),pn("TripleExpression"),pn("IriStem"),pn("Stem"),pn("IriStemRange"),pn("StemRange"),pn("Language"),pn("LanguageStem"),pn("LanguageStemRange"),pn("LiteralStem"),pn("LiteralStemRange"),pn("NodeConstraint"),pn("ShapeExpression"),pn("NodeKind"),pn("OneOf"),pn("Schema"),pn("SemAct"),pn("Shape"),pn("ShapeAnd"),pn("ShapeExternal"),pn("ShapeNot"),pn("ShapeOr"),pn("TripleConstraint"),pn("Wildcard"),pn("annotation"),pn("closed"),pn("code"),pn("datatype"),pn("exclusion"),pn("expression"),pn("expressions"),pn("extra"),pn("flags"),pn("fractiondigits"),pn("numericFacet"),pn("xsFacet"),pn("inverse"),pn("languageTag"),pn("length"),pn("stringFacet"),pn("max"),pn("maxexclusive"),pn("maxinclusive"),pn("maxlength"),pn("min"),pn("minexclusive"),pn("mininclusive"),pn("minlength"),pn("name"),pn("nodeKind"),pn("object"),pn("pattern"),pn("predicate"),pn("semActs"),pn("shapeExpr"),pn("shapeExprs"),pn("shapes"),pn("start"),pn("startActs"),pn("stem"),pn("totaldigits"),pn("valueExpr"),pn("values");function Lr(n){return"http://www.w3.org/2004/02/skos/core#"+n}Lr("Concept"),Lr("ConceptScheme"),Lr("Collection"),Lr("OrderedCollection"),Lr("definition"),Lr("note"),Lr("scopeNote"),Lr("example"),Lr("inScheme"),Lr("hasTopConcept"),Lr("topConceptOf"),Lr("prefLabel"),Lr("altLabel"),Lr("hiddenLabel"),Lr("notation"),Lr("changeNote"),Lr("editorialNote"),Lr("historyNote"),Lr("semanticRelation"),Lr("broader"),Lr("broaderTransitive"),Lr("narrower"),Lr("narrowerTransitive"),Lr("related"),Lr("member"),Lr("memberList"),Lr("mappingRelation"),Lr("broadMatch"),Lr("narrowMatch"),Lr("relatedMatch"),Lr("exactMatch"),Lr("closeMatch");function Ph(n){return"http://www.w3.org/2008/05/skos-xl#"+n}Ph("Label"),Ph("literalForm"),Ph("prefLabel"),Ph("altLabel"),Ph("hiddenLabel"),Ph("labelRelation");function nn(n){return"http://www.w3.org/ns/ui#"+n}nn("BooleanField"),nn("NumericField"),nn("ValueField"),nn("Form"),nn("Single"),nn("Group"),nn("Choice"),nn("Classifier"),nn("ColorField"),nn("TextField"),nn("Comment"),nn("DateField"),nn("DateTimeField"),nn("DecimalField"),nn("EmailField"),nn("Heading"),nn("SingleLineTextField"),nn("Options"),nn("IntegerField"),nn("FloatField"),nn("PhoneField"),nn("Multiple"),nn("MultiLineTextField"),nn("NamedNodeURIField"),nn("TriStateField"),nn("parts"),nn("creationForm"),nn("from"),nn("label"),nn("property"),nn("for"),nn("prompt"),nn("use"),nn("Color"),nn("contents"),nn("size"),nn("style"),nn("category"),nn("dependingOn"),nn("maxLength"),nn("part"),nn("TimeField"),nn("annotationForm"),nn("backgroundColor"),nn("backgroundImage"),nn("base"),nn("color"),nn("defaultError"),nn("initialProperties"),nn("maxDateOffset"),nn("maxDatetimeOffset"),nn("maxValue"),nn("minDateOffset"),nn("minDatetimeOffset"),nn("minLength"),nn("minValue"),nn("name"),nn("oldValue"),nn("parentProperty"),nn("partsClone"),nn("pattern"),nn("reference"),nn("required"),nn("requiredError"),nn("seqeunce"),nn("sortBy"),nn("sortPriority"),nn("tableProperties"),nn("valid"),nn("validationError"),nn("value"),nn("values");function rn(n){return"http://www.w3.org/ns/ui#"+n}rn("BooleanField"),rn("NumericField"),rn("ValueField"),rn("Form"),rn("Single"),rn("TextField"),rn("TriStateField"),rn("Group"),rn("Choice"),rn("Classifier"),rn("ColorField"),rn("Comment"),rn("DateField"),rn("DateTimeField"),rn("DecimalField"),rn("EmailField"),rn("Heading"),rn("SingleLineTextField"),rn("Options"),rn("IntegerField"),rn("FloatField"),rn("PhoneField"),rn("Multiple"),rn("MultiLineTextField"),rn("NamedNodeURIField"),rn("creationForm"),rn("parts"),rn("from"),rn("label"),rn("property"),rn("for"),rn("prompt"),rn("use"),rn("category"),rn("Color"),rn("contents"),rn("size"),rn("style"),rn("dependingOn"),rn("part"),rn("maxLength"),rn("TimeField"),rn("annotationForm"),rn("backgroundColor"),rn("backgroundImage"),rn("base"),rn("color"),rn("defaultError"),rn("initialProperties"),rn("maxDateOffset"),rn("maxDatetimeOffset"),rn("maxValue"),rn("minDateOffset"),rn("minDatetimeOffset"),rn("minLength"),rn("minValue"),rn("name"),rn("oldValue"),rn("parentProperty"),rn("partsClone"),rn("pattern"),rn("reference"),rn("required"),rn("requiredError"),rn("seqeunce"),rn("sortBy"),rn("sortPriority"),rn("tableProperties"),rn("valid"),rn("validationError"),rn("value"),rn("values");function Fh(n){return"http://purl.org/vocab/vann/"+n}Fh("preferredNamespacePrefix"),Fh("preferredNamespaceUri"),Fh("changes"),Fh("example"),Fh("termGroup"),Fh("usageNote");function gt(n){return"http://www.w3.org/2006/vcard/ns#"+n}gt("Acquaintance"),gt("RelatedType"),gt("Agent"),gt("BBS"),gt("TelephoneType"),gt("Car"),gt("Cell"),gt("Child"),gt("Colleague"),gt("Contact"),gt("Coresident"),gt("Coworker"),gt("Crush"),gt("Date"),gt("Dom"),gt("Type"),gt("Emergency"),gt("Fax"),gt("Female"),gt("Gender"),gt("Friend"),gt("Home"),gt("ISDN"),gt("Internet"),gt("Intl"),gt("Kin"),gt("Label"),gt("Male"),gt("Me"),gt("Met"),gt("Modem"),gt("Msg"),gt("Muse"),gt("Neighbor"),gt("None"),gt("Other"),gt("PCS"),gt("Pager"),gt("Parcel"),gt("Parent"),gt("Postal"),gt("Pref"),gt("Sibling"),gt("Spouse"),gt("Sweetheart"),gt("Tel"),gt("Text"),gt("TextPhone"),gt("Unknown"),gt("Video"),gt("Voice"),gt("Work"),gt("X400"),gt("Address"),gt("Email"),gt("Group"),gt("Kind"),gt("Individual"),gt("Location"),gt("Organization"),gt("VCard"),gt("Name"),gt("adr"),gt("hasAddress"),gt("agent"),gt("anniversary"),gt("bday"),gt("category"),gt("class"),gt("email"),gt("hasEmail"),gt("extended-address"),gt("geo"),gt("hasGeo"),gt("hasAdditionalName"),gt("hasCalendarBusy"),gt("hasCalendarLink"),gt("hasCalendarRequest"),gt("hasCategory"),gt("hasCountryName"),gt("hasFN"),gt("hasFamilyName"),gt("hasGender"),gt("hasGivenName"),gt("hasHonorificPrefix"),gt("hasHonorificSuffix"),gt("hasInstantMessage"),gt("hasLanguage"),gt("hasLocality"),gt("hasNickname"),gt("nickname"),gt("hasNote"),gt("hasOrganizationName"),gt("hasOrganizationUnit"),gt("hasPostalCode"),gt("hasRegion"),gt("hasRelated"),gt("hasRole"),gt("hasSource"),gt("hasStreetAddress"),gt("hasTitle"),gt("hasUID"),gt("hasValue"),gt("label"),gt("language"),gt("latitude"),gt("longitude"),gt("mailer"),gt("note"),gt("org"),gt("organization-name"),gt("organization-unit"),gt("post-office-box"),gt("prodid"),gt("rev"),gt("role"),gt("sort-string"),gt("title"),gt("tz"),gt("value"),gt("country-name"),gt("locality"),gt("postal-code"),gt("region"),gt("street-address"),gt("fn"),gt("hasMember"),gt("additional-name"),gt("family-name"),gt("given-name"),gt("honorific-prefix"),gt("honorific-suffix"),gt("hasKey"),gt("key"),gt("hasLogo"),gt("logo"),gt("hasName"),gt("n"),gt("hasPhoto"),gt("photo"),gt("hasSound"),gt("sound"),gt("hasTelephone"),gt("tel"),gt("hasURL"),gt("url");function Hr(n){return"http://rdfs.org/ns/void#"+n}Hr("Dataset"),Hr("Linkset"),Hr("TechnicalFeature"),Hr("DatasetDescription"),Hr("feature"),Hr("subset"),Hr("target"),Hr("sparqlEndpoint"),Hr("linkPredicate"),Hr("exampleResource"),Hr("vocabulary"),Hr("subjectsTarget"),Hr("objectsTarget"),Hr("dataDump"),Hr("uriLookupEndpoint"),Hr("uriRegexPattern"),Hr("class"),Hr("classes"),Hr("classPartition"),Hr("distinctObjects"),Hr("distinctSubjects"),Hr("documents"),Hr("entities"),Hr("inDataset"),Hr("openSearchDescription"),Hr("properties"),Hr("property"),Hr("propertyPartition"),Hr("rootResource"),Hr("triples"),Hr("uriSpace");function Gb(n){return"http://www.w3.org/2003/06/sw-vocab-status/ns#"+n}Gb("term_status"),Gb("moreinfo"),Gb("userdocs");function Wn(n){return"http://www.w3.org/2001/XMLSchema#"+n}Wn("changes"),Wn("string"),Wn("boolean"),Wn("float"),Wn("double"),Wn("decimal"),Wn("dateTime"),Wn("duration"),Wn("hexBinary"),Wn("base64Binary"),Wn("anyURI"),Wn("ID"),Wn("IDREF"),Wn("ENTITY"),Wn("NOTATION"),Wn("normalizedString"),Wn("token"),Wn("language"),Wn("IDREFS"),Wn("ENTITIES"),Wn("NMTOKEN"),Wn("NMTOKENS"),Wn("Name"),Wn("QName"),Wn("NCName"),Wn("integer"),Wn("nonNegativeInteger"),Wn("positiveInteger"),Wn("nonPositiveInteger"),Wn("negativeInteger"),Wn("byte"),Wn("int"),Wn("long"),Wn("short"),Wn("unsignedByte"),Wn("unsignedInt"),Wn("unsignedLong"),Wn("unsignedShort"),Wn("date"),Wn("time"),Wn("gYearMonth"),Wn("gYear"),Wn("gMonthDay"),Wn("gDay"),Wn("gMonth");class Zi extends Error{constructor(t,e,r="",i){super(),i&&(this.cause=i.cause),this.name=t,this.message=e,this.title=r}}class cU extends Zi{constructor(t,e){super("AttributeNotFoundException",t,"No such attribute",e)}}function _u(n){return"object"==typeof n&&"object"==typeof n.internal_resourceInfo}function Nh(n){return"object"==typeof n&&"object"==typeof n.internal_resourceInfo&&"object"==typeof n.internal_resourceInfo.linkedResources}function Lp(n){const t=n;return"object"==typeof t.internal_changeLog&&Array.isArray(t.internal_changeLog.additions)&&Array.isArray(t.internal_changeLog.deletions)}class Bp extends Error{}function gn(n){return"string"==typeof n?n:n.value}const Ek=function(){var n=(0,Xe.Z)(function*(t,e){if("object"==typeof window&&"function"!=typeof require)return yield window.fetch(t,e);if("function"!=typeof require)return(yield Promise.resolve().then(F.t.bind(F,8472,19))).default(t,e);let r;return r=require("cross-fetch"),yield r(t,e)});return function(e,r){return n.apply(this,arguments)}}();var Pde=F(6809);function Up(n){var t,e,r;const i=null!==(e=null===(t=n.headers.get("Content-Type"))||void 0===t?void 0:t.split(";"))&&void 0!==e?e:[],o=i.length>0&&["text/turtle","application/ld+json"].includes(i[0]),s={sourceIri:n.url,isRawData:!o,contentType:null!==(r=n.headers.get("Content-Type"))&&void 0!==r?r:void 0,linkedResources:{}},a=n.headers.get("Link");if(a){const c=Pde.parse(a),d=c.get("rel","acl");1===d.length&&(s.aclUrl=new URL(d[0].uri,s.sourceIri).href),s.linkedResources=c.refs.reduce((E,U)=>{var W,ne;return null!==(W=E[ne=U.rel])&&void 0!==W||(E[ne]=[]),E[U.rel].push(new URL(U.uri,s.sourceIri).href),E},s.linkedResources)}const l=n.headers.get("WAC-Allow");return l&&(s.permissions=function Fde(n){function t(r){const i=r.split(" ");return i.includes("write")?{read:i.includes("read"),append:!0,write:!0,control:i.includes("control")}:{read:i.includes("read"),append:i.includes("append"),write:!1,control:i.includes("control")}}function e(r,i){const o=r.split(",").map(a=>a.split("=")).filter(a=>2===a.length&&a[0].trim()===i);if(1!==o.length)return"";const s=o[0][1].trim();return'"'!==s.charAt(0)||'"'!==s.charAt(s.length-1)?"":s.substring(1,s.length-1)}return{user:t(e(n,"user")),public:t(e(n,"public"))}}(l)),s}function Pl(n){let t;return t="function"==typeof n.slice?Object.assign(n.slice(),Object.assign({},n)):Object.assign({},n),t}function ra(n){return!n.ok}const Sn_Authorization="http://www.w3.org/ns/auth/acl#Authorization",Sn_accessTo="http://www.w3.org/ns/auth/acl#accessTo",Sn_agent="http://www.w3.org/ns/auth/acl#agent",Sn_agentGroup="http://www.w3.org/ns/auth/acl#agentGroup",Sn_agentClass="http://www.w3.org/ns/auth/acl#agentClass",Sn_default="http://www.w3.org/ns/auth/acl#default",Sn_defaultForNew="http://www.w3.org/ns/auth/acl#defaultForNew",Sn_mode="http://www.w3.org/ns/auth/acl#mode",Sn_origin="http://www.w3.org/ns/auth/acl#origin",Ro_type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Ty_BasicContainer="http://www.w3.org/ns/ldp#BasicContainer",Ty_Resource="http://www.w3.org/ns/ldp#Resource",jp_Agent="http://xmlns.com/foaf/0.1/Agent",tt={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},yd_PublicOidcClient="http://www.w3.org/ns/solid/terms#PublicOidcClient",Ak_publicKey="https://w3id.org/security#publicKey",uU_storage="http://www.w3.org/ns/pim/space#storage",tn={fetch:Ek};function Vs(n){return kk.apply(this,arguments)}function kk(){return(kk=(0,Xe.Z)(function*(n,t=Object.assign(Object.assign({},tn),{ignoreAuthenticationErrors:!1})){var e;return Dk(yield Object.assign(Object.assign({},tn),t).fetch(n,{method:"HEAD"}),{ignoreAuthenticationErrors:null!==(e=t.ignoreAuthenticationErrors)&&void 0!==e&&e})})).apply(this,arguments)}function Dk(n,t={ignoreAuthenticationErrors:!1}){if(ra(n)&&(!function Nde(n){return 401===n.status||403===n.status}(n)||!t.ignoreAuthenticationErrors))throw new Oo(`Fetching the metadata of the Resource at [${n.url}] failed: [${n.status}] [${n.statusText}].`,n);return{internal_resourceInfo:Up(n)}}function dU(n){return(_u(n)?hn(n):gn(n)).endsWith("/")}function Lde(n){return n.internal_resourceInfo.isRawData}function hU(n){var t;return null!==(t=n.internal_resourceInfo.contentType)&&void 0!==t?t:null}function hn(n){return _u(n)?n.internal_resourceInfo.sourceIri:null}const ys=hn;function fU(n){var t;if(!Nh(n))return null;const e=null!==(t=Hp(n)["http://www.w3.org/ns/solid/terms#podOwner"])&&void 0!==t?t:[];return 1===e.length?e[0]:null}function Bde(n,t){const e=fU(t);return"string"!=typeof e?null:e===n}function Hp(n){return n.internal_resourceInfo.linkedResources}function Ude(n){var t,e,r,i,o,s,a;if("object"==typeof n.internal_resourceInfo.permissions)return{user:{read:n.internal_resourceInfo.permissions.user.read,append:n.internal_resourceInfo.permissions.user.append,write:n.internal_resourceInfo.permissions.user.write},public:{read:n.internal_resourceInfo.permissions.public.read,append:n.internal_resourceInfo.permissions.public.append,write:n.internal_resourceInfo.permissions.public.write}};const l=Hp(n);return{user:{read:null!==(e=null===(t=l[tt.allow])||void 0===t?void 0:t.includes(tt.Read))&&void 0!==e&&e,append:null!==(o=(null===(r=l[tt.allow])||void 0===r?void 0:r.includes(tt.Append))||(null===(i=l[tt.allow])||void 0===i?void 0:i.includes(tt.Write)))&&void 0!==o&&o,write:null!==(a=null===(s=l[tt.allow])||void 0===s?void 0:s.includes(tt.Write))&&void 0!==a&&a}}}class Oo extends Bp{constructor(t,e){super(t),this.response=e}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}}const Lh={fetch:Ek},pU=["Slug","If-None-Match","Content-Type"];function jde(n){return pU.some(t=>void 0!==n[t])}function qb(n){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,Xe.Z)(function*(n,t=Lh){const e=Object.assign(Object.assign({},Lh),t),r=gn(n),i=yield e.fetch(r,e.init);if(ra(i))throw new Oo(`Fetching the File failed: [${i.status}] [${i.statusText}].`,i);const o=Up(i),s=yield i.blob();return Object.assign(s,{internal_resourceInfo:o})})).apply(this,arguments)}function Hde(n){return Mk.apply(this,arguments)}function Mk(){return(Mk=(0,Xe.Z)(function*(n,t=Lh){const e=Object.assign(Object.assign({},Lh),t),r=_u(n)?gn(ys(n)):gn(n),i=yield e.fetch(r,Object.assign(Object.assign({},e.init),{method:"DELETE"}));if(ra(i))throw new Oo(`Deleting the file at [${r}] failed: [${i.status}] [${i.statusText}].`,i)})).apply(this,arguments)}function Vde(n,t){return Ik.apply(this,arguments)}function Ik(){return(Ik=(0,Xe.Z)(function*(n,t,e=Lh){const r=gn(n),i=yield mU(r,t,"POST",e);if(ra(i))throw new Oo(`Saving the file in [${n}] failed: [${i.status}] [${i.statusText}].`,i);const o=i.headers.get("Location");if(null===o)throw new Error("Could not determine the location of the newly saved file.");const s=new URL(o,new URL(r).origin).href,a=Pl(t),l={internal_resourceInfo:{isRawData:!0,sourceIri:s,contentType:yU(t,e.contentType)}};return Object.assign(a,l)})).apply(this,arguments)}function gU(n,t){return Rk.apply(this,arguments)}function Rk(){return(Rk=(0,Xe.Z)(function*(n,t,e=Lh){const r=gn(n),i=yield mU(r,t,"PUT",e);if(ra(i))throw new Oo(`Overwriting the file at [${r}] failed: [${i.status}] [${i.statusText}].`,i);const o=Pl(t),s=Up(i);return s.sourceIri=r,s.isRawData=!0,Object.assign(o,{internal_resourceInfo:s})})).apply(this,arguments)}function $de(n){if(void 0===n)return{};let t={};return function zde(n){return Array.isArray(n)}(n)?n.forEach(([e,r])=>{t[e]=r}):function Wde(n){return"function"==typeof n.forEach}(n)?n.forEach((e,r)=>{t[r]=e}):t=n,t}function mU(n,t,e,r){return Ok.apply(this,arguments)}function Ok(){return(Ok=(0,Xe.Z)(function*(n,t,e,r){var i,o;const s=Object.assign(Object.assign({},Lh),r),a=$de(null!==(o=null===(i=s.init)||void 0===i?void 0:i.headers)&&void 0!==o?o:{});if(jde(a))throw new Error(`No reserved header (${pU.join(", ")}) should be set in the optional RequestInit.`);void 0!==s.slug&&(a.Slug=s.slug),a["Content-Type"]=yU(t,r.contentType);const l=gn(n);return yield s.fetch(l,Object.assign(Object.assign({},s.init),{headers:a,method:e,body:t}))})).apply(this,arguments)}function yU(n,t){if("string"==typeof t)return t;const e="object"==typeof n&&null!==n&&"string"==typeof n.type&&n.type.length>0?n.type:void 0;return null!=e?e:"application/octet-stream"}var Pk=F(1977),vU=F(5122);const Jb="https://inrupt.com/.well-known/sdk-local-node/",Ut=Object.freeze;function Fl(n){return n.substring(0,Jb.length)===Jb}function el(n){return n.substring(Jb.length)}function My(n){return"string"==typeof n&&"_:"===n.substring(0,2)}function Zb(n){return n.substring(2)}function _U(n){return`_:${n.value}`}const vr_boolean="http://www.w3.org/2001/XMLSchema#boolean",vr_dateTime="http://www.w3.org/2001/XMLSchema#dateTime",vr_date="http://www.w3.org/2001/XMLSchema#date",vr_time="http://www.w3.org/2001/XMLSchema#time",vr_decimal="http://www.w3.org/2001/XMLSchema#decimal",vr_integer="http://www.w3.org/2001/XMLSchema#integer",vr_string="http://www.w3.org/2001/XMLSchema#string",vr_langString="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString";function Yb(n){return"true"===n||"1"===n||"false"!==n&&"0"!==n&&null}function Fk(n){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(n))return null;const[e,r]=Lk(n),[i,o,s]=e.split(":");let a=Number.parseInt(i,10),l=Number.parseInt(o,10);const[c,d]=s.split("."),E=Number.parseInt(c,10),U=d?Number.parseInt(d,10):void 0;l>=60&&(a+=1,l-=60);const W={hour:a,minute:l,second:E};if("number"==typeof U&&(W.millisecond=U),"string"==typeof r){const[ne,Ce]=bU(r);if("number"!=typeof ne||ne>24||"number"!=typeof Ce||Ce>59)return null;W.timezoneHourOffset=ne,W.timezoneMinuteOffset=Ce}return W}function Xb(n){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(n))return null;const[e,r]=n.split("T"),[i,o]="-"===e.charAt(0)?[-1,e.substring(1)]:[1,e],[s,a,l]=o.split("-"),c=Number.parseInt(s,10)*i,d=Number.parseInt(a,10)-1,E=Number.parseInt(l,10),[U,W]=Lk(r),[ne,Ce]="string"==typeof W?bU(W):[0,0],[Pe,Qe,je]=U.split(":"),at=Number.parseInt(Pe,10)+ne,yt=Number.parseInt(Qe,10)+Ce,[Ct,Vt]=je.split("."),yn=Number.parseInt(Ct,10),Bn=Vt?Number.parseInt(Vt,10):0,Qn=new Date(Date.UTC(c,d,E,at,yt,yn,Bn));return c>=0&&c<100&&Qn.setUTCFullYear(Qn.getUTCFullYear()-1900),Qn}function Nk(n){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(n))return null;const e=n,[r,i]="-"===e.charAt(0)?[-1,e.substring(1)]:[1,e],[o,s,a]=i.split("-"),l=a.length>2?a.substring(0,2):a,c=Number.parseInt(o,10)*r,d=Number.parseInt(s,10)-1,E=Number.parseInt(l,10),W=new Date(Date.UTC(c,d,E,12));return c>=0&&c<100&&W.setUTCFullYear(W.getUTCFullYear()-1900),W}function Lk(n){if(n.endsWith("Z"))return[n.substring(0,n.length-1),"Z"];const t=n.split("+"),e=n.split("-");return 1===t.length&&1===e.length?[t[0],void 0]:t.length>e.length?[t[0],"+"+t[1]]:[e[0],"-"+e[1]]}function bU(n){if("Z"===n)return[0,0];const t="+"===n.charAt(0)?1:-1,[e,r]=n.substring(1).split(":");return[Number.parseInt(e,10)*t,Number.parseInt(r,10)*t]}function Qb(n){const t=Number.parseFloat(n);return Number.isNaN(t)?null:t}function ew(n){const t=Number.parseInt(n,10);return Number.isNaN(t)?null:t}function Bk(n){return n.toLowerCase()}function Po(n){return wU(n)&&"NamedNode"===n.termType}function wU(n){return null!==n&&"object"==typeof n&&"string"==typeof n.termType&&"string"==typeof n.value&&"function"==typeof n.equals}function xU(n){return Po(n)&&Fl(n.value)}function mi(n){const t=gn(n);if("function"!=typeof URL)return!0;try{new URL(t)}catch(e){return!1}return!0}function SU(n,t){return fr.namedNode(Iy(el(n.value),t))}function Iy(n,t){if("function"!=typeof URL)throw new Error("The URL interface is not available, so an IRI cannot be determined.");const e=new URL(t);return e.hash=n,e.href}const fr=Pk;function Uk(n,t,e={}){var r;if(!["NamedNode","DefaultGraph"].includes(t.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${t.graph.termType}] as their Graph node.`);const o="DefaultGraph"===t.graph.termType?"default":t.graph.value,s=null!==(r=n.graphs[o])&&void 0!==r?r:{};return Ut(Object.assign(Object.assign({},n),{graphs:Ut(Object.assign(Object.assign({},n.graphs),{[o]:ehe(s,t,e)}))}))}function ehe(n,t,e){var r;if(!["NamedNode","BlankNode"].includes(t.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${t.subject.termType}] as their Subject node.`);const o="BlankNode"===t.subject.termType?`_:${t.subject.value}`:t.subject.value,s=null!==(r=n[o])&&void 0!==r?r:{type:"Subject",url:o,predicates:{}};return Ut(Object.assign(Object.assign({},n),{[o]:the(s,t,e)}))}function the(n,t,e){return Ut(Object.assign(Object.assign({},n),{predicates:nhe(n.predicates,t,e)}))}function nhe(n,t,e){var r;if(!["NamedNode"].includes(t.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${t.predicate.termType}] as their Predicate node.`);const o=t.predicate.value,s=null!==(r=n[o])&&void 0!==r?r:{};return Ut(Object.assign(Object.assign({},n),{[o]:CU(s,t,e)}))}function CU(n,t,e){var r,i,o,s,a,l,c,d;if("NamedNode"===t.object.termType){const E=Ut([...null!==(r=n.namedNodes)&&void 0!==r?r:[],t.object.value]);return Ut(Object.assign(Object.assign({},n),{namedNodes:E}))}if("Literal"===t.object.termType){if(t.object.datatype.value===vr_langString){const W=t.object.language.toLowerCase(),ne=Ut([...null!==(o=null===(i=n.langStrings)||void 0===i?void 0:i[W])&&void 0!==o?o:[],t.object.value]),Ce=Ut(Object.assign(Object.assign({},null!==(s=n.langStrings)&&void 0!==s?s:{}),{[W]:ne}));return Ut(Object.assign(Object.assign({},n),{langStrings:Ce}))}const E=Ut([...null!==(l=null===(a=n.literals)||void 0===a?void 0:a[t.object.datatype.value])&&void 0!==l?l:[],t.object.value]),U=Ut(Object.assign(Object.assign({},null!==(c=n.literals)&&void 0!==c?c:{}),{[t.object.datatype.value]:E}));return Ut(Object.assign(Object.assign({},n),{literals:U}))}if("BlankNode"===t.object.termType){const E=EU(t.object,e),U=Ut([...null!==(d=n.blankNodes)&&void 0!==d?d:[],E]);return Ut(Object.assign(Object.assign({},n),{blankNodes:U}))}throw new Error(`Objects of type [${t.object.termType}] are not supported.`)}function EU(n,t){var e,r;if(void 0===(null!==(e=t.chainBlankNodes)&&void 0!==e?e:[]).find(c=>c.equals(n)))return _U(n);const s=(null!==(r=t.otherQuads)&&void 0!==r?r:[]).filter(c=>c.subject.equals(n)),a=s.filter(c=>!Ry(c.object)).reduce((c,d)=>{var E;if(!["NamedNode"].includes(d.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.predicate.termType}] as their Predicate node.`);const W=null!==(E=c[d.predicate.value])&&void 0!==E?E:{};return Ut(Object.assign(Object.assign({},c),{[d.predicate.value]:CU(W,d,t)}))},{});return s.filter(c=>Ry(c.object)).reduce((c,d)=>{var E,U;if(!["NamedNode"].includes(d.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.predicate.termType}] as their Predicate node.`);const ne=null!==(E=c[d.predicate.value])&&void 0!==E?E:{},Ce=null!==(U=ne.blankNodes)&&void 0!==U?U:[];return Ut(Object.assign(Object.assign({},c),{[d.predicate.value]:Object.assign(Object.assign({},ne),{blankNodes:[...Ce,EU(d.object,t)]})}))},a)}function AU(n){const t=n.map(s=>s.subject).filter(Ry),e=n.map(s=>s.object).filter(Ry),i=[];return e.forEach(s=>{i.push(...kU(s,n))}),t.concat(e).filter(s=>{if(i.some(l=>l.equals(s)))return!1;const a=n.filter(l=>l.object.equals(s)).map(l=>l.subject);return a.length>0&&function r(s){return s.every(a=>s.every(l=>a.equals(l)))}(a)})}function tw(n,t={}){var e;const r=[],i=null!==(e=t.dataFactory)&&void 0!==e?e:Pk;return Object.keys(n.graphs).forEach(o=>{const s=n.graphs[o],a="default"===o?i.defaultGraph():i.namedNode(o);Object.keys(s).forEach(l=>{const c=s[l].predicates,d=My(l)?i.blankNode(Zb(l)):i.namedNode(l);r.push(...Vp(c,d,a,t))})}),r}function Vp(n,t,e,r={}){var i;const o=[],s=null!==(i=r.dataFactory)&&void 0!==i?i:Pk;return Object.keys(n).forEach(a=>{var l,c,d,E;const U=s.namedNode(a),W=null!==(l=n[a].langStrings)&&void 0!==l?l:{},ne=null!==(c=n[a].namedNodes)&&void 0!==c?c:[],Ce=null!==(d=n[a].literals)&&void 0!==d?d:{},Pe=null!==(E=n[a].blankNodes)&&void 0!==E?E:[];Object.keys(Ce).forEach(at=>{const yt=s.namedNode(at);Ce[at].forEach(Vt=>{const yn=s.literal(Vt,yt);o.push(s.quad(t,U,yn,e))})}),Object.keys(W).forEach(at=>{W[at].forEach(Ct=>{const Vt=s.literal(Ct,at);o.push(s.quad(t,U,Vt,e))})}),ne.forEach(at=>{const yt=s.namedNode(at);o.push(s.quad(t,U,yt,e))}),Pe.forEach(at=>{if(My(at)){const yt=s.blankNode(Zb(at));o.push(s.quad(t,U,yt,e))}else{const yt=s.blankNode(),Ct=s.quad(t,U,yt,e),Vt=Vp(at,yt,e);o.push(Ct),o.push(...Vt)}})}),o}function kU(n,t,e=[]){if(void 0!==e.find(a=>a.equals(n)))return e;const r=t.filter(a=>a.subject.equals(n)&&Ry(a.object)).map(a=>a.object);if(0===r.length)return[];const i=[...e,n],o=r.map(a=>kU(a,t,i)),s=[];for(const a of o)s.push(...a);return s}function Ry(n){return"BlankNode"===n.termType}var rhe=F(5049);const jk=()=>{const n=[],t=[],e=[];return{onQuad:r=>{n.push(r)},onError:r=>{e.push(r)},onComplete:r=>{t.push(r)},parse:(r=(0,Xe.Z)(function*(i,o){let s=[];try{s=function ihe(n){return n.map(e=>fr.quad(nw(e.subject),nw(e.predicate),nw(e.object),nw(e.graph)))}(yield rhe.toRDF(JSON.parse(i),{base:hn(o)}))}catch(a){e.forEach(l=>l(a))}s.forEach(a=>{n.forEach(l=>l(a))}),t.forEach(a=>a())}),function(o,s){return r.apply(this,arguments)})};var r};function nw(n){switch(n.termType){case"NamedNode":return fr.namedNode(n.value);case"BlankNode":return fr.blankNode(n.value.substr(2));case"Literal":return fr.literal(n.value,n.language||n.datatype);case"DefaultGraph":return fr.defaultGraph();default:throw Error("unknown termType: "+n.termType)}}const Oy="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Py="http://www.w3.org/2001/XMLSchema#",Hk="http://www.w3.org/2000/10/swap/",Nl={xsd:{decimal:`${Py}decimal`,boolean:`${Py}boolean`,double:`${Py}double`,integer:`${Py}integer`,string:`${Py}string`},rdf:{type:`${Oy}type`,nil:`${Oy}nil`,first:`${Oy}first`,rest:`${Oy}rest`,langString:`${Oy}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Hk}reify#forSome`,forAll:`${Hk}reify#forAll`},log:{implies:`${Hk}log#implies`}};var ohe=F(6643),she=F.n(ohe);const{xsd:rw}=Nl,ahe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,DU={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},lhe=/[\x00-\x20<>\\"\{\}\|\^\`]/,che={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},uhe=/$0^/;class dhe{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(t=t||{}).lineMode){this._n3Mode=!1;for(const e in this)!(e in che)&&this[e]instanceof RegExp&&(this[e]=uhe)}else this._n3Mode=!1!==t.n3;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,e){let r=this._input,i=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this._comments&&(l=this._comment.exec(a[0]))&&o("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),i=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return e&&(this._comments&&(l=this._comment.exec(r))&&o("comment",l[1],"",this._line,r.length),r=null,o("eof","","",this._line,0)),this._input=r;const c=this._line,d=r[0];let E="",U="",W="",ne=null,Ce=0,Pe=!1;switch(d){case"^":if(r.length<3)break;if("^"!==r[1]){this._n3Mode&&(Ce=1,E="^");break}if(this._previousMarker="^^",r=r.substr(2),"<"!==r[0]){Pe=!0;break}case"<":if(ne=this._unescapedIri.exec(r))E="IRI",U=ne[1];else if(ne=this._iri.exec(r)){if(U=this._unescape(ne[1]),null===U||lhe.test(U))return s(this);E="IRI"}else r.length>1&&"<"===r[1]?(E="<<",Ce=2):this._n3Mode&&r.length>1&&"="===r[1]&&(E="inverse",Ce=2,U=">");break;case">":r.length>1&&">"===r[1]&&(E=">>",Ce=2);break;case"_":((ne=this._blank.exec(r))||e&&(ne=this._blank.exec(`${r} `)))&&(E="blank",W="_",U=ne[1]);break;case'"':if(ne=this._simpleQuotedString.exec(r))U=ne[1];else if(({value:U,matchLength:Ce}=this._parseLiteral(r)),null===U)return s(this);(null!==ne||0!==Ce)&&(E="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(ne=this._simpleApostropheString.exec(r))U=ne[1];else if(({value:U,matchLength:Ce}=this._parseLiteral(r)),null===U)return s(this);(null!==ne||0!==Ce)&&(E="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(ne=this._variable.exec(r))&&(E="var",U=ne[0]);break;case"@":"literal"===this._previousMarker&&(ne=this._langcode.exec(r))?(E="langcode",U=ne[1]):(ne=this._keyword.exec(r))&&(E=ne[0]);break;case".":if(1===r.length?e:r[1]<"0"||r[1]>"9"){E=".",Ce=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(ne=this._number.exec(r)||e&&(ne=this._number.exec(`${r} `)))&&(E="literal",U=ne[0],W="string"==typeof ne[1]?rw.double:"string"==typeof ne[2]?rw.decimal:rw.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(ne=this._sparqlKeyword.exec(r))?E=ne[0].toUpperCase():Pe=!0;break;case"f":case"t":(ne=this._boolean.exec(r))?(E="literal",U=ne[0],W=rw.boolean):Pe=!0;break;case"a":(ne=this._shortPredicates.exec(r))?(E="abbreviation",U="a"):Pe=!0;break;case"=":this._n3Mode&&r.length>1&&(E="abbreviation",">"!==r[1]?(Ce=1,U="="):(Ce=2,U=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(Ce=1,E=d);break;default:Pe=!0}if(Pe&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(ne=this._prefix.exec(r))?((ne=this._prefixed.exec(r))||e&&(ne=this._prefixed.exec(`${r} `)))&&(E="prefixed",W=ne[1]||"",U=this._unescape(ne[2])):(E="prefix",U=ne[1]||"")),"^^"===this._previousMarker)switch(E){case"prefixed":E="type";break;case"IRI":E="typeIRI";break;default:E=""}if(!E)return e||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?s(this):this._input=r;const Qe=Ce||ne[0].length,je=o(E,U,W,c,Qe);this.previousToken=je,this._previousMarker=E,r=r.substr(Qe,r.length)}function o(a,l,c,d,E){const U=r?i-r.length:i,ne={type:a,value:l,prefix:c,line:d,start:U,end:U+E};return t(null,ne),ne}function s(a){t(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(t){let e=!1;const r=t.replace(ahe,(i,o,s,a)=>{if("string"==typeof o)return String.fromCharCode(Number.parseInt(o,16));if("string"==typeof s){let l=Number.parseInt(s,16);return l<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(1023&l))}return a in DU?DU[a]:(e=!0,"")});return e?null:r}_parseLiteral(t){if(t.length>=3){const e=t.match(/^(?:"""|"|'''|'|)/)[0],r=e.length;let i=Math.max(this._literalClosingPos,r);for(;(i=t.indexOf(e,i))>0;){let o=0;for(;"\\"===t[i-o-1];)o++;if(o%2==0){const s=t.substring(r,i),a=s.split(/\r\n|\r|\n/).length-1,l=i+r;if(1===r&&0!==a||3===r&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:l}}i++}this._literalClosingPos=t.length-r+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const e=new Error(`Unexpected "${t}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(t){return t.startsWith("\ufeff")?t.substr(1):t}tokenize(t,e){if(this._line=1,"string"==typeof t){if(this._input=this._readStartingBom(t),"function"!=typeof e){const r=[];let i;if(this._tokenizeToEnd((o,s)=>o?i=o:r.push(s),!0),i)throw i;return r}she()(()=>this._tokenizeToEnd(e,!0))}else this._pendingBuffer=null,"function"==typeof t.setEncoding&&t.setEncoding("utf8"),t.on("data",r=>{null!==this._input&&0!==r.length&&(this._pendingBuffer&&(r=Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),128&r[r.length-1]?this._pendingBuffer=r:(void 0===this._input?this._input=this._readStartingBom("string"==typeof r?r:r.toString()):this._input+=r,this._tokenizeToEnd(e,!1)))}),t.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(e,!0)}),t.on("error",e)}}const{rdf:hhe,xsd:Bh}=Nl;let Fy,fhe=0;const Vk={namedNode:function _he(n){return new zk(n)},blankNode:function bhe(n){return new ghe(n||"n3-"+fhe++)},variable:function xhe(n){return new mhe(n)},literal:function whe(n,t){if("string"==typeof t)return new zp(`"${n}"@${t.toLowerCase()}`);let e=t?t.value:"";return""===e&&("boolean"==typeof n?e=Bh.boolean:"number"==typeof n&&(Number.isFinite(n)?e=Number.isInteger(n)?Bh.integer:Bh.double:(e=Bh.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new zp(""===e||e===Bh.string?`"${n}"`:`"${n}"^^${e}`)},defaultGraph:function She(){return Fy},quad:IU,triple:IU},MU=Vk;class wc{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof wc?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class zk extends wc{get termType(){return"NamedNode"}}class zp extends wc{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let e=t.lastIndexOf('"')+1;return e<t.length&&"@"===t[e++]?t.substr(e).toLowerCase():""}get datatype(){return new zk(this.datatypeString)}get datatypeString(){const t=this.id,e=t.lastIndexOf('"')+1,r=e<t.length?t[e]:"";return"^"===r?t.substr(e+2):"@"!==r?Bh.string:hhe.langString}equals(t){return t instanceof zp?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class ghe extends wc{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class mhe extends wc{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}Fy=new class yhe extends wc{constructor(){return super(""),Fy||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}};class vhe extends wc{constructor(t,e,r,i){super(""),this._subject=t,this._predicate=e,this._object=r,this._graph=i||Fy}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function IU(n,t,e,r){return new vhe(n,t,e,r)}let RU=0;class OU{constructor(t){this._contextStack=[],this._graph=null,this._setBase((t=t||{}).baseIRI),t.factory&&PU(this,t.factory);const e="string"==typeof t.format?t.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(e),i=/trig/.test(e),o=/triple/.test(e),s=/quad/.test(e),a=this._n3Mode=/n3/.test(e),l=o||s;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||o||a),this._supportsRDFStar=""===e||/star|\*$/.test(e),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix="string"!=typeof t.blankNodePrefix?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new dhe({lineMode:l,n3:a}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){RU=0}_setBase(t){if(t){const e=t.indexOf("#");e>=0&&(t=t.substr(0,e)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}else this._base="",this._basePath=""}_saveContext(t,e,r,i,o){const s=this._n3Mode;this._contextStack.push({type:t,subject:r,predicate:i,object:o,graph:e,inverse:!!s&&this._inversePredicate,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,e){const r=this._contextStack.pop();if(!r||r.type!==t)return this._error(`Unexpected ${e.type}`,e);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(t){switch(t.type){case"eof":return null!==this._graph?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,e){let r;switch(t.type){case"IRI":case"typeIRI":const i=this._resolveIRI(t.value);if(null===i)return this._error("Invalid IRI",t);r=this._namedNode(i);break;case"type":case"prefixed":const o=this._prefixes[t.prefix];if(void 0===o)return this._error(`Undefined prefix "${t.prefix}:"`,t);r=this._namedNode(o+t.value);break;case"blank":r=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":r=this._variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!e&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(0===t.prefix.length)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if(void 0===(this._subject=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const e=t.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${e}`,t):(this._subject=null,"]"===e?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if(void 0===(this._predicate=this._readEntity(t)))return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(0===t.prefix.length)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if(void 0===(this._object=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return"{"===t.type?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return"{"!==t.type?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return"]"===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if("]"!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=null===this._predicate;return this._restoreContext("blank",t),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let e=null,r=null,i=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),0!==s.length&&"list"===s[s.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":0===t.prefix.length?(this._literalValue=t.value,i=this._readListItemDataTypeOrLang):(e=this._literal(t.value,this._namedNode(t.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if(void 0===(e=this._readEntity(t)))return}if(null===r&&(this._subject=r=this._blankNode()),null===o?null===a.predicate?a.subject=r:a.object=r:this._emit(o,this.RDF_REST,r,this._graph),null!==e){if(this._n3Mode&&("IRI"===t.type||"prefixed"===t.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,e,this._graph)}return i}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let e=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const r=this._readEntity(t);if(void 0===r)return;e=this._literal(this._literalValue,r),t=null;break;case"langcode":e=this._literal(this._literalValue,t.value),t=null}return{token:t,literal:e}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,e){const r=this._completeLiteral(t);if(r)return this._object=r.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(t){return"}"!==t.type?this._readPunctuation(t):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let e,r=this._graph;const i=this._subject,o=this._inversePredicate;switch(t.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(r=this._readEntity(t))){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(null!==i){const s=this._predicate,a=this._object;o?this._emit(a,s,i,r):this._emit(i,s,a,r)}return e}_readBlankNodePunctuation(t){let e;switch(t.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(t){return"."!==t.type?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return"prefix"!==t.type?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if("IRI"!==t.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const e=this._readEntity(t);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(t){const e="IRI"===t.type&&this._resolveIRI(t.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return"]"!==t.type?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):"."!==t.type?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let e;switch(t.type){case"IRI":case"prefixed":if(void 0!==(e=this._readEntity(t,!0)))break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return","===t.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,r=e.length&&e[e.length-1];if(r&&"item"===r.type){const i=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let e,r;const i=this._blankNode();if(void 0!==(r=this._readEntity(t)))return null===this._predicate?(e=this._subject,this._subject=i):(e=this._object,this._object=i),this._emit(e,r,i,this._graph),this._readPath}_readBackwardPath(t){const e=this._blankNode();let r,i;if(void 0!==(r=this._readEntity(t)))return null===this._predicate?(i=this._subject,this._subject=e):(i=this._object,this._object=e),this._emit(e,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return">>"!==t.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(t))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(">>"!==t.type)return this._error(`Expected >> but got ${t.type}`,t);const e=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),null===this._subject?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,e,r,i){this._callback(null,this._quad(t,e,r,i||this.DEFAULTGRAPH))}_error(t,e){const r=new Error(`${t} on line ${e.line}.`);r.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=$k}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const e=t.length;let r="",i=-1,o=-1,s=0,a="/";for(;i<e;){switch(a){case":":if(o<0&&"/"===t[++i]&&"/"===t[++i])for(;(o=i+1)<e&&"/"!==t[o];)i=o;break;case"?":case"#":i=e;break;case"/":if("."===t[i+1])switch(a=t[1+ ++i],a){case"/":r+=t.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return r+t.substring(s,i)+t.substr(i+1);case".":if(a=t[1+ ++i],void 0===a||"/"===a||"?"===a||"#"===a){if(r+=t.substring(s,i-2),(s=r.lastIndexOf("/"))>=o&&(r=r.substr(0,s)),"/"!==a)return`${r}/${t.substr(i+1)}`;s=i+1}}}a=t[++i]}return r+t.substring(s)}parse(t,e,r){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${RU++}_`,this._prefixCallback=r||$k,this._inversePredicate=!1,this._quantified=Object.create(null),!e){const i=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&i.push(a)},this._lexer.tokenize(t).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return i}this._callback=e,this._lexer.tokenize(t,(i,o)=>{null!==i?(this._callback(i),this._callback=$k):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function $k(){}function PU(n,t){const e=t.namedNode;n._namedNode=e,n._blankNode=t.blankNode,n._literal=t.literal,n._variable=t.variable,n._quad=t.quad,n.DEFAULTGRAPH=t.defaultGraph(),n.RDF_FIRST=e(Nl.rdf.first),n.RDF_REST=e(Nl.rdf.rest),n.RDF_NIL=e(Nl.rdf.nil),n.N3_FORALL=e(Nl.r.forAll),n.N3_FORSOME=e(Nl.r.forSome),n.ABBREVIATIONS={a:e(Nl.rdf.type),"=":e(Nl.owl.sameAs),">":e(Nl.log.implies)},n.QUANTIFIERS_GRAPH=e("urn:n3:quantifiers")}PU(OU.prototype,MU);const Ny=MU.defaultGraph(),{rdf:Ehe,xsd:Wp}=Nl,NU=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,LU=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Ahe={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Ly extends wc{equals(){return!1}}class BU{constructor(t,e){if(this._prefixRegex=/$0^/,t&&"function"!=typeof t.write&&(e=t,t=null),this._lists=(e=e||{}).lists,t)this._outputStream=t,this._endStream=void 0===e.end||!!e.end;else{let r="";this._outputStream={write(i,o,s){r+=i,s&&s()},end:i=>{i&&i(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(e.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Ny,this._prefixIRIs=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),e.baseIRI&&(this._baseMatcher=new RegExp(`^${jU(e.baseIRI)}${e.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=e.baseIRI.length))}get _inDefaultGraph(){return Ny.equals(this._graph)}_write(t,e){this._outputStream.write(t,"utf8",e)}_writeQuad(t,e,r,i,o){try{i.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(Ny.equals(i)?"":`${this._encodeIriOrBlank(i)} {\n`)),this._graph=i,this._subject=null),t.equals(this._subject)?e.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,o):this._write(`;\n    ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(r)}`,o):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(r)}`,o)}catch(s){o&&o(s)}}_writeQuadLine(t,e,r,i,o){delete this._prefixMatch,this._write(this.quadToString(t,e,r,i),o)}quadToString(t,e,r,i){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(e)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .\n`:" .\n"}`}quadsToString(t){return t.map(e=>this.quadToString(e.subject,e.predicate,e.object,e.graph)).join("")}_encodeSubject(t){return"Quad"===t.termType?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if("NamedNode"!==t.termType)return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let e=t.value;this._baseMatcher&&this._baseMatcher.test(e)&&(e=e.substr(this._baseLength)),NU.test(e)&&(e=e.replace(LU,UU));const r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:`<${e}>`}_encodeLiteral(t){let e=t.value;if(NU.test(e)&&(e=e.replace(LU,UU)),t.language)return`"${e}"@${t.language}`;if(this._lineMode){if(t.datatype.value===Wp.string)return`"${e}"`}else switch(t.datatype.value){case Wp.string:return`"${e}"`;case Wp.boolean:if("true"===e||"false"===e)return e;break;case Wp.integer:if(/^[+-]?\d+$/.test(e))return e;break;case Wp.decimal:if(/^[+-]?\d*\.\d+$/.test(e))return e;break;case Wp.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(e))return e}return`"${e}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===Ehe.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:e,object:r,graph:i}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(e)} ${this._encodeObject(r)}${function FU(n){return!!n&&"DefaultGraph"===n.termType}(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,e,r,i,o){void 0===r?this._writeQuad(t.subject,t.predicate,t.object,t.graph,e):"function"==typeof i?this._writeQuad(t,e,r,Ny,i):this._writeQuad(t,e,r,i||Ny,o)}addQuads(t){for(let e=0;e<t.length;e++)this.addQuad(t[e])}addPrefix(t,e,r){const i={};i[t]=e,this.addPrefixes(i,r)}addPrefixes(t,e){if(!this._prefixIRIs)return e&&e();let r=!1;for(let i in t){let o=t[i];"string"!=typeof o&&(o=o.value),r=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[o]=i+=":",this._write(`@prefix ${i} <${o}>.\n`)}if(r){let i="",o="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,o+=(o?"|":"")+this._prefixIRIs[s];i=jU(i),this._prefixRegex=new RegExp(`^(?:${o})[^/]*$|^(${i})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(r?"\n":"",e)}blank(t,e){let i,o,r=t;switch(void 0===t?r=[]:t.termType?r=[{predicate:t,object:e}]:"length"in t||(r=[t]),o=r.length){case 0:return new Ly("[]");case 1:if(i=r[0],!(i.object instanceof Ly))return new Ly(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let a=0;a<o;a++)i=r[a],i.predicate.equals(t)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(a?";\n  ":"\n  ")+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,t=i.predicate);return new Ly(`${s}\n]`)}}list(t){const e=t&&t.length||0,r=new Array(e);for(let i=0;i<e;i++)r[i]=this._encodeObject(t[i]);return new Ly(`(${r.join(" ")})`)}end(t){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let e=t&&((r,i)=>{e=null,t(r,i)});if(this._endStream)try{return this._outputStream.end(e)}catch(r){}e&&e()}}function UU(n){let t=Ahe[n];return void 0===t&&(1===n.length?(t=n.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(n.charCodeAt(0)-55296)+n.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function jU(n){return n.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const HU=()=>{const n=[],t=[],e=[];return{onQuad:r=>{n.push(r)},onError:r=>{e.push(r)},onComplete:r=>{t.push(r)},parse:(r=(0,Xe.Z)(function*(i,o){(yield function khe(n){return Kk.apply(this,arguments)}(hn(o))).parse(i,(a,l,c)=>{a?e.forEach(d=>d(a)):l?n.forEach(d=>d(l)):t.forEach(d=>d())})}),function(o,s){return r.apply(this,arguments)})};var r};function Kk(){return(Kk=(0,Xe.Z)(function*(n){return new OU({format:"text/turtle",baseIRI:n})})).apply(this,arguments)}function By(n){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,Xe.Z)(function*(n){const e=new BU({format:"text/turtle"}),r=n.map(s=>fr.quad(s.subject,s.predicate,s.object,void 0));return e.addQuads(r),yield new Promise((s,a)=>{e.end((l,c)=>{if(l)return a(l);s(c)})})})).apply(this,arguments)}function qk(n){var t,e,r,i,o,s,a,l;if(Po(n))return`<${n.value}> (URL)`;if(function Qde(n){return wU(n)&&"Literal"===n.termType}(n)){if(!Po(n.datatype))return`[${n.value}] (RDF/JS Literal of unknown type)`;let c;switch(n.datatype.value){case vr_boolean:return c=null!==(e=null===(t=Yb(n.value))||void 0===t?void 0:t.valueOf())&&void 0!==e?e:`Invalid data: \`${n.value}\``,c+" (boolean)";case vr_dateTime:return c=null!==(i=null===(r=Xb(n.value))||void 0===r?void 0:r.toUTCString())&&void 0!==i?i:`Invalid data: \`${n.value}\``,c+" (datetime)";case vr_decimal:return c=null!==(s=null===(o=Qb(n.value))||void 0===o?void 0:o.toString())&&void 0!==s?s:`Invalid data: \`${n.value}\``,c+" (decimal)";case vr_integer:return c=null!==(l=null===(a=ew(n.value))||void 0===a?void 0:a.toString())&&void 0!==l?l:`Invalid data: \`${n.value}\``,c+" (integer)";case vr_langString:return`"${n.value}" (${n.language} string)`;case vr_string:return`"${n.value}" (string)`;default:return`[${n.value}] (RDF/JS Literal of type: \`${n.datatype.value}\`)`}}return"BlankNode"===n.termType?`[${n.value}] (RDF/JS BlankNode)`:"Quad"===n.termType?"??? (nested RDF* Quad)":"Variable"===n.termType?`?${n.value} (RDF/JS Variable)`:n}function kn(n){if(!$p(n))throw new QU(n)}function VU(n,t){const e=Lp(n)?n.internal_changeLog:{additions:[],deletions:[]},[r,i]=t.filter(o=>!zU(o)).reduce(([o,s],a)=>void 0!==o.find(c=>c.equals(a))?[o.filter(c=>!c.equals(a)),s]:[o,s.concat(a)],[e.additions,e.deletions]);return Ut(Object.assign(Object.assign({},n),{internal_changeLog:{additions:r,deletions:i}}))}function The(n){return Lp(n)?n:Ut(Object.assign(Object.assign({},n),{internal_changeLog:{additions:[],deletions:[]}}))}function zU(n){return"BlankNode"===n.subject.termType||"BlankNode"===n.object.termType}function Mhe(n){return Object.keys(n.predicates).filter(t=>null!==ZU(n,t))}function aw(n,t){var e,r,i;if(kn(n),!mi(t))throw new oo(t);const o=gn(t),s=null!==(i=null===(r=null===(e=n.predicates[o])||void 0===e?void 0:e.namedNodes)||void 0===r?void 0:r[0])&&void 0!==i?i:null;return null===s?null:Fl(s)?`#${el(s)}`:s}const Ll=aw;function bu(n,t){var e,r,i;if(kn(n),!mi(t))throw new oo(t);const o=gn(t);return null!==(i=null===(r=null===(e=n.predicates[o])||void 0===e?void 0:e.namedNodes)||void 0===r?void 0:r.map(s=>Fl(s)?`#${el(s)}`:s))&&void 0!==i?i:[]}const Bt=bu;function Ihe(n,t){kn(n);const e=Uh(n,t,vr_boolean);return null===e?null:Yb(e)}function Rhe(n,t){return kn(n),jh(n,t,vr_boolean).map(Yb).filter(r=>null!==r)}function Ohe(n,t){kn(n);const e=Uh(n,t,vr_dateTime);return null===e?null:Xb(e)}function Phe(n,t){return kn(n),jh(n,t,vr_dateTime).map(Xb).filter(r=>null!==r)}function Fhe(n,t){kn(n);const e=Uh(n,t,vr_date);return null===e?null:Nk(e)}function Nhe(n,t){return kn(n),jh(n,t,vr_date).map(Nk).filter(r=>null!==r)}function Lhe(n,t){kn(n);const e=Uh(n,t,vr_time);return null===e?null:Fk(e)}function Bhe(n,t){return kn(n),jh(n,t,vr_time).map(Fk).filter(r=>null!==r)}function Uhe(n,t){kn(n);const e=Uh(n,t,vr_decimal);return null===e?null:Qb(e)}function jhe(n,t){return kn(n),jh(n,t,vr_decimal).map(r=>Qb(r)).filter(r=>null!==r)}function Hhe(n,t){kn(n);const e=Uh(n,t,vr_integer);return null===e?null:ew(e)}function Vhe(n,t){return kn(n),jh(n,t,vr_integer).map(r=>ew(r)).filter(r=>null!==r)}function zhe(n,t){return WU(n,t,"en")}function WU(n,t,e){var r,i;if(kn(n),!mi(t))throw new oo(t);const o=gn(t),s=null!==(i=null===(r=n.predicates[o])||void 0===r?void 0:r.langStrings)&&void 0!==i?i:{},l=Object.keys(s).find(c=>c.toLowerCase()===e.toLowerCase()&&Array.isArray(s[c])&&s[c].length>0);return"string"==typeof l?s[l][0]:null}function Whe(n,t){return $U(n,t,"en")}function $U(n,t,e){var r,i;if(kn(n),!mi(t))throw new oo(t);const o=gn(t),s=null!==(i=null===(r=n.predicates[o])||void 0===r?void 0:r.langStrings)&&void 0!==i?i:{},l=Object.keys(s).find(c=>c.toLowerCase()===e.toLowerCase()&&Array.isArray(s[c])&&s[c].length>0);return"string"==typeof l?[...s[l]]:[]}function $he(n,t){var e,r;if(kn(n),!mi(t))throw new oo(t);const i=gn(t),o=null!==(r=null===(e=n.predicates[i])||void 0===e?void 0:e.langStrings)&&void 0!==r?r:{};return new Map(Object.entries(o).map(([s,a])=>[s,[...a]]))}function Khe(n,t){return kn(n),Uh(n,t,vr_string)}function Ghe(n,t){return kn(n),jh(n,t,vr_string)}function KU(n,t){const e=Ll(n,t);return null===e?null:fr.namedNode(e)}function GU(n,t){return Bt(n,t).map(r=>fr.namedNode(r))}function qU(n,t){var e,r,i,o;if(kn(n),!mi(t))throw new oo(t);const s=gn(t),a=null!==(r=null===(e=n.predicates[s])||void 0===e?void 0:e.langStrings)&&void 0!==r?r:{},l=Object.keys(a);if(l.length>0){const E=l.find(U=>Array.isArray(a[U])&&a[U].length>0);if("string"==typeof E)return fr.literal(a[E][0],E)}const c=null!==(o=null===(i=n.predicates[s])||void 0===i?void 0:i.literals)&&void 0!==o?o:{},d=Object.keys(c);if(d.length>0){const E=d.find(U=>Array.isArray(c[U])&&c[U].length>0);if("string"==typeof E)return fr.literal(c[E][0],fr.namedNode(E))}return null}function JU(n,t){var e,r,i,o;if(kn(n),!mi(t))throw new oo(t);const s=gn(t);let a=[];const l=null!==(r=null===(e=n.predicates[s])||void 0===e?void 0:e.langStrings)&&void 0!==r?r:{},c=Object.keys(l);for(const U of c){const ne=l[U].map(Ce=>fr.literal(Ce,U));a=a.concat(ne)}const d=null!==(o=null===(i=n.predicates[s])||void 0===i?void 0:i.literals)&&void 0!==o?o:{},E=Object.keys(d);for(const U of E){const W=d[U],ne=fr.namedNode(U),Ce=W.map(Pe=>fr.literal(Pe,ne));a=a.concat(Ce)}return a}function ZU(n,t){var e,r;kn(n);const i=KU(n,t);if(null!==i)return i;const o=qU(n,t);if(null!==o)return o;const s=gn(t),a=null!==(r=null===(e=n.predicates[s])||void 0===e?void 0:e.blankNodes)&&void 0!==r?r:[];if(a.length>0){const l=My(a[0])?Zb(a[0]):void 0;return fr.blankNode(l)}return null}function YU(n,t){var e,r;kn(n);const i=GU(n,t),o=JU(n,t),s=gn(t),l=(null!==(r=null===(e=n.predicates[s])||void 0===e?void 0:e.blankNodes)&&void 0!==r?r:[]).map(d=>{const E=My(d)?Zb(d):void 0;return fr.blankNode(E)});return i.concat(o).concat(l)}function Uh(n,t,e){var r,i,o,s;if(!mi(t))throw new oo(t);const a=gn(t);return null!==(s=null===(o=null===(i=null===(r=n.predicates[a])||void 0===r?void 0:r.literals)||void 0===i?void 0:i[e])||void 0===o?void 0:o[0])&&void 0!==s?s:null}function jh(n,t,e){var r,i,o;if(!mi(t))throw new oo(t);const s=gn(t);return[...null!==(o=null===(i=null===(r=n.predicates[s])||void 0===r?void 0:r.literals)||void 0===i?void 0:i[e])&&void 0!==o?o:[]]}function cr(n,t,e={}){var r;if(!mi(t))throw new ej(t);const i=void 0!==e.scope?gn(e.scope):"default",o=null!==(r=n.graphs[i])&&void 0!==r?r:{},s=gn(t),l=o[Fl(s)&&Nh(n)?Iy(el(s),hn(n)):s];return void 0===l?null:l}function tl(n,t={acceptBlankNodes:!1}){var e;const r=void 0!==t.scope?gn(t.scope):"default",i=null!==(e=n.graphs[r])&&void 0!==e?e:{};return Object.values(i).filter(o=>!My(o.url)||t.acceptBlankNodes)}function Yi(n,t){var e;const r=Hh(t)&&Nh(n)?Iy(el(t.url),hn(n)):t.url,o=Ut(Object.assign(Object.assign({},n.graphs.default),{[r]:Ut(Object.assign(Object.assign({},t),{url:r}))})),s=Ut(Object.assign(Object.assign({},n.graphs),{default:o})),a=fr.namedNode(r),l=null===(e=n.graphs.default[r])||void 0===e?void 0:e.predicates,c=void 0!==l?Vp(l,a,fr.defaultGraph()):[],d=Vp(t.predicates,a,fr.defaultGraph());return function Dhe(n,t){const e=Lp(n)?n.internal_changeLog:{additions:[],deletions:[]},[r,i]=t.filter(o=>!zU(o)).reduce(([o,s],a)=>void 0!==s.find(c=>c.equals(a))?[o,s.filter(c=>!c.equals(a))]:[o.concat(a),s],[e.additions,e.deletions]);return Ut(Object.assign(Object.assign({},n),{internal_changeLog:{additions:r,deletions:i}}))}(VU(Ut(Object.assign(Object.assign({},n),{graphs:s})),c),d)}function xc(n,t){var e;let r;r=Po(t)?t.value:"string"==typeof t?Fl(t)&&Nh(n)?Iy(el(t),hn(n)):t:Hh(t)?t.url:ei(t);const o=Object.assign({},n.graphs.default);delete o[r];const s=Ut(Object.assign(Object.assign({},n.graphs),{default:Ut(o)})),a=fr.namedNode(r),l=null===(e=n.graphs.default[r])||void 0===e?void 0:e.predicates,c=void 0!==l?Vp(l,a,fr.defaultGraph()):[];return VU(Ut(Object.assign(Object.assign({},n),{graphs:s})),c)}function Fo(n={}){var t;if(void 0!==n.url){const o=n.url;if(!mi(o))throw new ej(o);return Ut({type:"Subject",predicates:Ut({}),url:o})}const r=function Kde(n){return`${Jb}${n}`}(null!==(t=n.name)&&void 0!==t?t:qhe());return Ut({type:"Subject",predicates:Ut({}),url:r})}function $p(n){return"object"==typeof n&&null!==n&&"string"==typeof n.type&&"Subject"===n.type}function Sc(n,t){if(Hh(n)){if(void 0===t)throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return Iy(el(n.url),t)}return n.url}const ei=Sc;function XU(n){let t="";Hh(n)?t+=`## Thing (no URL yet \u2014 identifier: \`#${el(n.url)}\`)\n`:t+=`## Thing: ${n.url}\n`;const e=Object.keys(n.predicates);if(0===e.length)t+="\n<empty>\n";else for(const r of e)t+=`\nProperty: ${r}\n`,YU(n,r).forEach(o=>{t+=`- ${qk(o)}\n`});return t}function Hh(n){return Fl(n.url)}class QU extends Bp{constructor(t){super(`Expected a Thing, but received: [${t}].`),this.receivedValue=t}}class oo extends Bp{constructor(t){const e=Po(t)?t.value:t;super(`Expected a valid URL to identify a property, but received: [${e}].`),this.receivedProperty=e}}class Jk extends Bp{constructor(t){const e=Po(t)?t.value:t;super(`Expected a valid URL value, but received: [${e}].`),this.receivedValue=e}}class ej extends Bp{constructor(t){const e=Po(t)?t.value:t;super(`Expected a valid URL to identify a Thing, but received: [${e}].`),this.receivedValue=e}}const qhe=()=>Date.now().toString()+Math.random().toString().substring(2);function Kp(n){const t=new URL(n);return t.hash="",t.href}function Gp(){return Ut({type:"Dataset",graphs:{default:{}}})}function tj(n){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,Xe.Z)(function*(n,t={}){if(ra(n))throw new Oo(`Fetching the SolidDataset at [${n.url}] failed: [${n.status}] [${n.statusText}].`,n);const e=Dk(n),r=Object.assign({"text/turtle":HU()},t.parsers),i=hU(e);if(null===i)throw new Error(`Could not determine the content type of the Resource at [${hn(e)}].`);const o=i.split(";")[0],s=r[o];if(void 0===s)throw new Error(`The Resource at [${hn(e)}] has a MIME type of [${o}], but the only parsers available are for the following MIME types: [${Object.keys(r).join(", ")}].`);const a=yield n.text();return yield new Promise((c,d)=>{let E=Ut({graphs:Ut({default:Ut({})}),type:"Dataset"});const U=[],W=[];s.onError(ne=>{d(new Error(`Encountered an error parsing the Resource at [${hn(e)}] with content type [${i}]: ${ne}`))}),s.onQuad(ne=>{W.push(ne),"BlankNode"===ne.subject.termType||"BlankNode"===ne.object.termType?U.push(ne):E=Uk(E,ne)}),s.onComplete((0,Xe.Z)(function*(){const Ce=U.length<=20?AU(U):[];E=U.filter(je=>Ce.every(at=>!at.equals(je.subject))).reduce((je,at)=>Uk(je,at,{otherQuads:W,chainBlankNodes:Ce}),E);const Qe=Ut(Object.assign(Object.assign({},E),e));c(Qe)})),s.parse(a,e)})})).apply(this,arguments)}function ia(n){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,Xe.Z)(function*(n,t=tn){var e;n=gn(n);const r=Object.assign(Object.assign({},tn),t),i=Object.keys(null!==(e=t.parsers)&&void 0!==e?e:{}),o=i.length>0?i.join(", "):"text/turtle",s=yield r.fetch(n,{headers:{Accept:o}});if(ra(s))throw new Oo(`Fetching the Resource at [${n}] failed: [${s.status}] [${s.statusText}].`,s);return yield tj(s,t)})).apply(this,arguments)}function Jhe(n){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,Xe.Z)(function*(n){return{method:"PATCH",body:`${n.internal_changeLog.deletions.length>0?`DELETE DATA {${(yield By(n.internal_changeLog.deletions.map(Uy))).trim()}};`:""} ${n.internal_changeLog.additions.length>0?`INSERT DATA {${(yield By(n.internal_changeLog.additions.map(Uy))).trim()}};`:""}`,headers:{"Content-Type":"application/sparql-update"}}})).apply(this,arguments)}function Zhe(n){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,Xe.Z)(function*(n){return{method:"PUT",body:yield By(tw(n).map(Uy)),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${Ty_Resource}>; rel="type"`}}})).apply(this,arguments)}function eD(n,t){return tD.apply(this,arguments)}function tD(){return(tD=(0,Xe.Z)(function*(n,t,e=tn){n=gn(n);const r=Object.assign(Object.assign({},tn),e),i=The(t),o=nj(i,n)?yield Jhe(i):yield Zhe(i),s=yield r.fetch(n,o);if(ra(s)){const d=nj(i,n)?"The changes that were sent to the Pod are listed below.\n\n"+rj(i):"The SolidDataset that was sent to the Pod is listed below.\n\n"+aD(i);throw new Oo(`Storing the Resource at [${n}] failed: [${s.status}] [${s.statusText}].\n\n`+d,s)}const a=Object.assign(Object.assign({},Up(s)),{isRawData:!1});return oj(Ut(Object.assign(Object.assign({},t),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:a})))})).apply(this,arguments)}function Yhe(n){return nD.apply(this,arguments)}function nD(){return(nD=(0,Xe.Z)(function*(n,t=tn){const e=Object.assign(Object.assign({},tn),t),r=_u(n)?gn(hn(n)):gn(n),i=yield e.fetch(r,{method:"DELETE"});if(ra(i))throw new Oo(`Deleting the SolidDataset at [${r}] failed: [${i.status}] [${i.statusText}].`,i)})).apply(this,arguments)}function Xhe(n){return rD.apply(this,arguments)}function rD(){return(rD=(0,Xe.Z)(function*(n,t=tn){var e;n=(n=gn(n)).endsWith("/")?n:n+"/";const r=Object.assign(Object.assign({},tn),t),i=yield r.fetch(n,{method:"PUT",body:r.initialContent?yield By(tw(r.initialContent).map(Uy)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${Ty_BasicContainer}>; rel="type"`}});if(ra(i)){if(409===i.status&&"Conflict"===i.statusText&&(yield i.text()).trim()===Qhe)return efe(n,t);throw new Oo(`Creating the ${void 0===r.initialContent?"empty":"non-empty"} Container at [${n}] failed: [${i.status}] [${i.statusText}].`,i)}const o=Up(i);return Ut(Object.assign(Object.assign({},null!==(e=t.initialContent)&&void 0!==e?e:Gp()),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:o}))})).apply(this,arguments)}const Qhe="Can't write file: PUT not supported on containers, use POST instead",efe=function(){var n=(0,Xe.Z)(function*(t,e){t=gn(t);const r=Object.assign(Object.assign({},tn),e);let i;try{i=yield Vs(t,e)}catch(d){if(!(d instanceof Oo)||404!==d.statusCode)throw d}if(void 0!==i)throw new Error(`The Container at [${t}] already exists, and therefore cannot be created again.`);const o=t+".dummy",s=yield r.fetch(o,{method:"PUT",headers:{Accept:"text/turtle","Content-Type":"text/turtle"}});if(ra(s))throw new Oo(`Creating the empty Container at [${t}] failed: [${s.status}] [${s.statusText}].`,s);yield r.fetch(o,{method:"DELETE"});const l=Up(yield r.fetch(t,{method:"HEAD"}));return Ut(Object.assign(Object.assign({},Gp()),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:l}))});return function(e,r){return n.apply(this,arguments)}}();function nj(n,t){return Lp(n)&&_u(n)&&"string"==typeof n.internal_resourceInfo.sourceIri&&function tfe(n,t){return Kp(n.internal_resourceInfo.sourceIri)===Kp(t)}(n,t)}function nfe(n,t){return iD.apply(this,arguments)}function iD(){return(iD=(0,Xe.Z)(function*(n,t,e=tn){const r=Object.assign(Object.assign({},tn),e);n=gn(n);const i=yield By(tw(t).map(Uy)),o={"Content-Type":"text/turtle",Link:`<${Ty_Resource}>; rel="type"`};e.slugSuggestion&&(o.slug=e.slugSuggestion);const s=yield r.fetch(n,{method:"POST",body:i,headers:o});if(ra(s))throw new Oo(`Storing the Resource in the Container at [${n}] failed: [${s.status}] [${s.statusText}].\n\nThe SolidDataset that was sent to the Pod is listed below.\n\n`+aD(t),s);const a=s.headers.get("Location");if(null===a)throw new Error("Could not determine the location of the newly saved SolidDataset.");const c={internal_resourceInfo:{isRawData:!1,sourceIri:new URL(a,s.url).href}};return oj(Ut(Object.assign(Object.assign({},t),c)))})).apply(this,arguments)}function rfe(n){return oD.apply(this,arguments)}function oD(){return(oD=(0,Xe.Z)(function*(n,t=tn){n=gn(n);const e=Object.assign(Object.assign({},tn),t),r={"Content-Type":"text/turtle",Link:`<${Ty_BasicContainer}>; rel="type"`};t.slugSuggestion&&(r.slug=t.slugSuggestion);const i=yield e.fetch(n,{method:"POST",headers:r});if(ra(i))throw new Oo(`Creating an empty Container in the Container at [${n}] failed: [${i.status}] [${i.statusText}].`,i);const o=i.headers.get("Location");if(null===o)throw new Error("Could not determine the location of the newly created Container.");const a={internal_resourceInfo:{isRawData:!1,sourceIri:new URL(o,i.url).href}};return Ut(Object.assign(Object.assign({},Gp()),a))})).apply(this,arguments)}function ife(n){return sD.apply(this,arguments)}function sD(){return(sD=(0,Xe.Z)(function*(n,t=tn){const e=_u(n)?gn(hn(n)):gn(n);if(!dU(n))throw new Error(`You're trying to delete the Container at [${e}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);const i=yield Object.assign(Object.assign({},tn),t).fetch(e,{method:"DELETE"});if(ra(i))throw new Oo(`Deleting the Container at [${e}] failed: [${i.status}] [${i.statusText}].`,i)})).apply(this,arguments)}function ofe(n){const t=cr(n,hn(n));return null!==t?Bt(t,"http://www.w3.org/ns/ldp#contains"):[]}function aD(n){let t="";_u(n)?t+=`# SolidDataset: ${hn(n)}\n`:t+="# SolidDataset (no URL yet)\n";const e=tl(n);return 0===e.length?t+="\n<empty>\n":e.forEach(r=>{t+="\n"+XU(r),Lp(n)&&(t+="\n"+function afe(n,t){const e=fr.namedNode(t.url),r=n.internal_changeLog.additions.reduce((a,l)=>l.subject.equals(e)?a+1:a,0),i=n.internal_changeLog.deletions.reduce((a,l)=>l.subject.equals(e)?a+1:a,0);return`(${1===r?"1 new value added":r+" new values added"} / ${1===i?"1 value removed":i+" values removed"})`}(n,r)+"\n")}),t}function rj(n){if(!_u(n))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!Lp(n)||0===n.internal_changeLog.additions.length&&0===n.internal_changeLog.deletions.length)return`## Changes compared to ${hn(n)}\n\nThis SolidDataset has not been modified since it was fetched from ${hn(n)}.\n`;let t=`## Changes compared to ${hn(n)}\n`;const e=function sfe(n){const t={};return n.internal_changeLog.deletions.forEach(e=>{var r,i,o;const s=xU(e.subject)?SU(e.subject,hn(n)):e.subject;if(!Po(s)||!Po(e.predicate))return;const a=gn(s),l=gn(e.predicate);null!==(r=t[a])&&void 0!==r||(t[a]={}),null!==(i=(o=t[a])[l])&&void 0!==i||(o[l]={added:[],deleted:[]}),t[a][l].deleted.push(e.object)}),n.internal_changeLog.additions.forEach(e=>{var r,i,o;const s=xU(e.subject)?SU(e.subject,hn(n)):e.subject;if(!Po(s)||!Po(e.predicate))return;const a=gn(s),l=gn(e.predicate);null!==(r=t[a])&&void 0!==r||(t[a]={}),null!==(i=(o=t[a])[l])&&void 0!==i||(o[l]={added:[],deleted:[]}),t[a][l].added.push(e.object)}),t}(n);return Object.keys(e).forEach(r=>{t+=`\n### Thing: ${r}\n`;const i=e[r];Object.keys(i).forEach(o=>{t+=`\nProperty: ${o}\n`;const s=i[o].deleted,a=i[o].added;s.length>0&&(t+="- Removed:\n",s.forEach(l=>t+=`  - ${qk(l)}\n`)),a.length>0&&(t+="- Added:\n",a.forEach(l=>t+=`  - ${qk(l)}\n`))})}),t}function Uy(n){const t=Po(n.subject)?ij(n.subject):n.subject,e=Po(n.object)?ij(n.object):n.object;return fr.quad(t,n.predicate,e,n.graph)}function ij(n){return Fl(n.value)?fr.namedNode("#"+el(n.value)):n}function oj(n){const t=hn(n),e=n.graphs.default,i=Object.keys(e).reduce((s,a)=>{const l=function lfe(n,t){const r=Object.keys(n.predicates).reduce((i,o)=>{var s;const a=null!==(s=i[o].namedNodes)&&void 0!==s?s:[];if(a.every(d=>!Fl(d)))return i;const l=Ut(a.map(d=>Fl(d)?`${t}#${el(d)}`:d)),c=Ut(Object.assign(Object.assign({},i[o]),{namedNodes:l}));return Ut(Object.assign(Object.assign({},i),{[o]:c}))},n.predicates);return Ut(Object.assign(Object.assign({},n),{predicates:r,url:Fl(n.url)?`${t}#${el(n.url)}`:n.url}))}(s[a],t),c=Fl(a)?`${t}#${el(a)}`:a,d=Object.assign({},s);return delete d[a],d[c]=l,Ut(d)},e),o=Ut(Object.assign(Object.assign({},n.graphs),{default:i}));return Ut(Object.assign(Object.assign({},n),{graphs:o}))}function cfe(n){return lD.apply(this,arguments)}function lD(){return(lD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),o=Hp(yield Vs(e,{fetch:t.fetch,ignoreAuthenticationErrors:!0}))[uU_storage],s=1===(null==o?void 0:o.length)?o[0]:null;if(null!==s){const l=new URL(".well-known/solid",s.endsWith("/")?s:s+"/").href;try{return yield ia(l,Object.assign(Object.assign({},t),{parsers:{"application/ld+json":jk()}}))}catch(c){}}return ia(new URL("/.well-known/solid",new URL(e).origin).href,Object.assign(Object.assign({},t),{parsers:{"application/ld+json":jk()}}))})).apply(this,arguments)}var sj=F(8472),ufe=F.t(sj,2);const{Response:dfe}=ufe;function cD(n){const t=Gp();return Object.assign(Object.assign({},t),{internal_resourceInfo:{sourceIri:gn(n),isRawData:!1,contentType:"text/turtle",linkedResources:{}}})}function aj(n){const t=gn(n);if(!t.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return cD(t)}function hfe(n,t){const e=new Blob;return Object.assign(e,{internal_resourceInfo:{sourceIri:gn(n),isRawData:!0,contentType:null==t?void 0:t.contentType,linkedResources:{}}})}function ffe(n,t=404){const e=new dfe(void 0,{status:t});return new Oo(`Fetching the Resource at [${n}] failed: [${e.status}] [${e.statusText}].`,e)}const jy=(n,t,e)=>{var r,i;if(kn(n),!mi(t))throw new oo(t);if(!$p(e)&&!mi(e))throw new Jk(e);const o=gn(t),s=null!==(r=n.predicates[o])&&void 0!==r?r:{},a=null!==(i=s.namedNodes)&&void 0!==i?i:[];let l;l=Po(e)?e.value:"string"==typeof e?e:Hh(e)?e.url:ei(e);const c=Ut(a.concat(gn(l))),d=Ut(Object.assign(Object.assign({},s),{namedNodes:c})),E=Ut(Object.assign(Object.assign({},n.predicates),{[o]:d}));return Ut(Object.assign(Object.assign({},n),{predicates:E}))},_n=jy,uD=(n,t,e)=>(kn(n),vd(n,t,function Gde(n){return n?"true":"false"}(e),vr_boolean)),dD=(n,t,e)=>(kn(n),vd(n,t,function Jde(n){return n.toISOString()}(e),vr_dateTime)),hD=(n,t,e)=>(kn(n),vd(n,t,function Zde(n){const t=n.getFullYear(),e=n.getMonth()+1,r=n.getDate(),[i,o]=Lk(n.toISOString());return`${t}-${String(e).padStart(2,"0")}-${String(r).padStart(2,"0")}${o}`}(e),vr_date)),fD=(n,t,e)=>(kn(n),vd(n,t,function qde(n){let t,e;if(n.millisecond&&(t=n.millisecond<10?"00"+n.millisecond:n.millisecond<100?"0"+n.millisecond:n.millisecond),"number"==typeof n.timezoneHourOffset){const r=Math.abs(n.timezoneHourOffset)<10?"0"+Math.abs(n.timezoneHourOffset):Math.abs(n.timezoneHourOffset);e=n.timezoneHourOffset>=0?"+"+r:"-"+r,n.timezoneMinuteOffset?e=e+":"+(n.timezoneMinuteOffset<10?"0"+n.timezoneMinuteOffset:n.timezoneMinuteOffset):e+=":00"}return(n.hour<10?"0"+n.hour:n.hour)+":"+(n.minute<10?"0"+n.minute:n.minute)+":"+(n.second<10?"0"+n.second:n.second)+(n.millisecond?"."+t:"")+(e||"")}(e),vr_time)),pD=(n,t,e)=>(kn(n),vd(n,t,function Yde(n){return n.toString()}(e),vr_decimal)),gD=(n,t,e)=>(kn(n),vd(n,t,function Xde(n){return n.toString()}(e),vr_integer));function pfe(n,t,e){return qp(n,t,e,"en")}function qp(n,t,e,r){var i,o,s;if(kn(n),!mi(t))throw new oo(t);const a=gn(t),l=Bk(r),c=null!==(i=n.predicates[a])&&void 0!==i?i:{},d=null!==(o=c.langStrings)&&void 0!==o?o:{},E=null!==(s=d[l])&&void 0!==s?s:[],U=Ut(E.concat(e)),W=Ut(Object.assign(Object.assign({},d),{[l]:U})),ne=Ut(Object.assign(Object.assign({},c),{langStrings:W})),Ce=Ut(Object.assign(Object.assign({},n.predicates),{[a]:ne}));return Ut(Object.assign(Object.assign({},n),{predicates:Ce}))}const mD=(n,t,e)=>(kn(n),vd(n,t,e,vr_string));function lw(n,t,e){return jy(n,t,e.value)}function cw(n,t,e){if(kn(n),!mi(t))throw new oo(t);return e.datatype.value===vr_langString?qp(n,t,e.value,e.language):vd(n,t,e.value,e.datatype.value)}function yD(n,t,e){var r,i;if("NamedNode"===e.termType)return lw(n,t,e);if("Literal"===e.termType)return cw(n,t,e);if("BlankNode"===e.termType){if(kn(n),!mi(t))throw new oo(t);const o=gn(t),s=null!==(r=n.predicates[o])&&void 0!==r?r:{},a=null!==(i=s.blankNodes)&&void 0!==i?i:[],l=Ut(a.concat(_U(e))),c=Ut(Object.assign(Object.assign({},s),{blankNodes:l})),d=Ut(Object.assign(Object.assign({},n.predicates),{[o]:c}));return Ut(Object.assign(Object.assign({},n),{predicates:d}))}throw new Error(`Term type [${e.termType}] is not supported by @inrupt/solid-client.`)}function vd(n,t,e,r){var i,o,s;if(kn(n),!mi(t))throw new oo(t);const a=gn(t),l=null!==(i=n.predicates[a])&&void 0!==i?i:{},c=null!==(o=l.literals)&&void 0!==o?o:{},d=null!==(s=c[r])&&void 0!==s?s:[],E=Ut(d.concat(e)),U=Ut(Object.assign(Object.assign({},c),{[r]:E})),W=Ut(Object.assign(Object.assign({},l),{literals:U})),ne=Ut(Object.assign(Object.assign({},n.predicates),{[a]:W}));return Ut(Object.assign(Object.assign({},n),{predicates:ne}))}function yi(n,t){if(kn(n),!mi(t))throw new oo(t);const e=gn(t),r=Object.assign({},n.predicates);return delete r[e],Ut(Object.assign(Object.assign({},n),{predicates:Ut(r)}))}const uw=(n,t,e)=>{var r,i,o;if(kn(n),!mi(t))throw new oo(t);const s=gn(t);if(!$p(e)&&!mi(e))throw new Jk(e);const a=Po(e)?e.value:"string"==typeof e?e:ei(e),l=Ut(null!==(o=null===(i=null===(r=n.predicates[s])||void 0===r?void 0:r.namedNodes)||void 0===i?void 0:i.filter(E=>E.toLowerCase()!==a.toLowerCase()))&&void 0!==o?o:[]),c=Ut(Object.assign(Object.assign({},n.predicates[s]),{namedNodes:l})),d=Ut(Object.assign(Object.assign({},n.predicates),{[s]:c}));return Ut(Object.assign(Object.assign({},n),{predicates:d}))},Vr=uw,lj=(n,t,e)=>(kn(n),Vh(n,t,vr_boolean,r=>Yb(r)===e)),cj=(n,t,e)=>(kn(n),Vh(n,t,vr_dateTime,r=>{var i;return(null===(i=Xb(r))||void 0===i?void 0:i.getTime())===e.getTime()})),uj=(n,t,e)=>(kn(n),Vh(n,t,vr_date,function(r){const i=Nk(r);return!!i&&i.getFullYear()===e.getFullYear()&&i.getMonth()===e.getMonth()&&i.getDate()===e.getDate()})),dj=(n,t,e)=>(kn(n),Vh(n,t,vr_time,function(r){const i=Fk(r);return!!i&&i.hour===e.hour&&i.minute===e.minute&&i.second===e.second&&i.millisecond===e.millisecond&&i.timezoneHourOffset===e.timezoneHourOffset&&i.timezoneMinuteOffset===e.timezoneMinuteOffset})),hj=(n,t,e)=>(kn(n),Vh(n,t,vr_decimal,r=>Qb(r)===e)),fj=(n,t,e)=>(kn(n),Vh(n,t,vr_integer,r=>ew(r)===e));function gfe(n,t,e){return Hy(n,t,e,"en")}function Hy(n,t,e,r){var i,o;if(kn(n),!mi(t))throw new oo(t);const s=gn(t),a=null!==(o=null===(i=n.predicates[s])||void 0===i?void 0:i.langStrings)&&void 0!==o?o:{},l=Object.keys(a).find(ne=>Bk(ne)===Bk(r)&&Array.isArray(a[ne])&&a[ne].length>0);if("string"!=typeof l)return n;const d=Ut(a[l].filter(ne=>ne!==e)),E=Ut(Object.assign(Object.assign({},a),{[l]:d})),U=Ut(Object.assign(Object.assign({},n.predicates[s]),{langStrings:E})),W=Ut(Object.assign(Object.assign({},n.predicates),{[s]:U}));return Ut(Object.assign(Object.assign({},n),{predicates:W}))}const pj=(n,t,e)=>(kn(n),Vh(n,t,vr_string,r=>r===e));function gj(n,t,e){return uw(n,t,e.value)}function mj(n,t,e){var r,i,o;if(kn(n),!mi(t))throw new oo(t);const s=e.datatype.value;if(s===vr_langString)return Hy(n,t,e.value,e.language);const a=gn(t),l=null!==(r=n.predicates[a])&&void 0!==r?r:{},c=null!==(i=l.literals)&&void 0!==i?i:{},d=null!==(o=c[s])&&void 0!==o?o:[],E=Ut(d.filter(Pe=>Pe!==e.value)),U=Ut(Object.assign(Object.assign({},c),{[s]:E})),W=Ut(Object.assign(Object.assign({},l),{literals:U})),ne=Ut(Object.assign(Object.assign({},n.predicates),{[a]:W}));return Ut(Object.assign(Object.assign({},n),{predicates:ne}))}function Vh(n,t,e,r){var i,o,s;if(!mi(t))throw new oo(t);const a=gn(t),l=null!==(i=n.predicates[a])&&void 0!==i?i:{},c=null!==(o=l.literals)&&void 0!==o?o:{},d=null!==(s=c[e])&&void 0!==s?s:[],E=Ut(d.filter(Pe=>!r(Pe))),U=Ut(Object.assign(Object.assign({},c),{[e]:E})),W=Ut(Object.assign(Object.assign({},l),{literals:U})),ne=Ut(Object.assign(Object.assign({},n.predicates),{[a]:W}));return Ut(Object.assign(Object.assign({},n),{predicates:ne}))}const wu=(n,t,e)=>{if(kn(n),!mi(t))throw new oo(t);if(!$p(e)&&!mi(e))throw new Jk(e);return jy(yi(n,t),t,e)},Ai=wu,yj=(n,t,e)=>(kn(n),uD(yi(n,t),t,e)),vj=(n,t,e)=>(kn(n),dD(yi(n,t),t,e)),_j=(n,t,e)=>(kn(n),hD(yi(n,t),t,e)),bj=(n,t,e)=>(kn(n),fD(yi(n,t),t,e)),wj=(n,t,e)=>(kn(n),pD(yi(n,t),t,e)),xj=(n,t,e)=>(kn(n),gD(yi(n,t),t,e));function vD(n,t,e,r){return kn(n),qp(yi(n,t),t,e,r)}const Sj=(n,t,e)=>(kn(n),mD(yi(n,t),t,e));function Cj(n,t,e){return kn(n),lw(yi(n,t),t,e)}function Ej(n,t,e){return kn(n),cw(yi(n,t),t,e)}function Aj(n,t,e){if(kn(n),!mi(t))throw new oo(t);return yD(yi(n,t),t,e)}function nl(n=Fo()){let t=$p(n)?n:Fo(n);function e(s){return(a,l)=>(t=s(t,a,l),o)}function r(s){return(a,l)=>(t=s(t,a,l),o)}function i(s){return(a,l)=>(t=s(t,a,l),o)}const o={build:()=>t,addUrl:e(jy),addIri:e(_n),addBoolean:e(uD),addDatetime:e(dD),addDate:e(hD),addTime:e(fD),addDecimal:e(pD),addInteger:e(gD),addStringNoLocale:e(mD),addStringEnglish:(s,a)=>(t=qp(t,s,a,"en"),o),addStringWithLocale:(s,a,l)=>(t=qp(t,s,a,l),o),addNamedNode:e(lw),addLiteral:e(cw),addTerm:e(yD),setUrl:r(wu),setIri:r(Ai),setBoolean:r(yj),setDatetime:r(vj),setDate:r(_j),setTime:r(bj),setDecimal:r(wj),setInteger:r(xj),setStringNoLocale:r(Sj),setStringEnglish:(s,a)=>(t=vD(t,s,a,"en"),o),setStringWithLocale:(s,a,l)=>(t=vD(t,s,a,l),o),setNamedNode:r(Cj),setLiteral:r(Ej),setTerm:r(Aj),removeAll:s=>(t=yi(t,s),o),removeUrl:i(uw),removeIri:i(Vr),removeBoolean:i(lj),removeDatetime:i(cj),removeDate:i(uj),removeTime:i(dj),removeDecimal:i(hj),removeInteger:i(fj),removeStringNoLocale:i(pj),removeStringEnglish:(s,a)=>nl(Hy(t,s,a,"en")),removeStringWithLocale:(s,a,l)=>nl(Hy(t,s,a,l)),removeNamedNode:i(gj),removeLiteral:i(mj)};return o}function mfe(n){return{type:"Subject",predicates:{},url:gn(n)}}function kj(n){const t=Hp(n).type;return Array.isArray(t)&&t.includes(tt.AccessControlResource)}function Cc(n){return _D.apply(this,arguments)}function _D(){return(_D=(0,Xe.Z)(function*(n,t=tn){if(!ji(n))return{resourceAcl:null,fallbackAcl:null};try{const e=yield Dj(n,t);return null===e?{resourceAcl:null,fallbackAcl:yield Tj(n,t)}:{resourceAcl:e,fallbackAcl:null}}catch(e){if(e instanceof xD)return{resourceAcl:null,fallbackAcl:null};throw e}})).apply(this,arguments)}function Dj(n){return bD.apply(this,arguments)}function bD(){return(bD=(0,Xe.Z)(function*(n,t=tn){if(!ji(n))return null;try{const e=yield ia(n.internal_resourceInfo.aclUrl,t);if(kj(e))throw new xD(n,e);return Ut(Object.assign(Object.assign({},e),{internal_accessTo:hn(n)}))}catch(e){if(e instanceof xD)throw e;return null}})).apply(this,arguments)}function Tj(n){return wD.apply(this,arguments)}function wD(){return(wD=(0,Xe.Z)(function*(n,t=tn){const e=new URL(hn(n)),r=e.pathname;if("/"===r)return null;const i=Mj(r),o=new URL(i,e.origin).href,s=yield Vs(o,t);if(!ji(s))return null;const a=yield Dj(s,t);return null===a?Tj(s,t):a})).apply(this,arguments)}function Mj(n){const t="/"===n.substring(n.length-1)?n.substring(0,n.length-1):n;return n.substring(0,t.lastIndexOf("/"))+"/"}function rl(n){return tl(n).filter(yfe)}function yfe(n){return Bt(n,Ro_type).includes(Sn_Authorization)}function Vy(n,t){return n.filter(e=>function vfe(n,t){return Bt(n,Sn_accessTo).includes(t)}(e,t))}function Jp(n,t){return n.filter(e=>function _fe(n,t){return Bt(n,Sn_default).includes(t)||Bt(n,Sn_defaultForNew).includes(t)}(e,t))}function zh(n){const t=Bt(n,Sn_mode);return t.includes(zr.write)?{read:t.includes(zr.read),append:!0,write:!0,control:t.includes(zr.control)}:{read:t.includes(zr.read),append:t.includes(zr.append),write:!1,control:t.includes(zr.control)}}function Wh(n){return n.reduce((t,e)=>t.write||e.write?{read:t.read||e.read,append:!0,write:!0,control:t.control||e.control}:{read:t.read||e.read,append:t.append||e.append,write:!1,control:t.control||e.control},{read:!1,append:!1,write:!1,control:!1})}function wfe(n){return!Vp(n.predicates,fr.namedNode(n.url),fr.defaultGraph()).some(t=>!function xfe(n){const t=n.predicate,e=n.object;return!!(t.equals(fr.namedNode(Ro_type))&&e.equals(fr.namedNode(Sn_Authorization))||t.equals(fr.namedNode(Sn_accessTo))||t.equals(fr.namedNode(Sn_default))||t.equals(fr.namedNode(Sn_defaultForNew))||t.equals(fr.namedNode(Sn_mode))&&Object.values(zr).some(r=>e.equals(fr.namedNode(r)))||t.equals(fr.namedNode(Sn_agent))||t.equals(fr.namedNode(Sn_agentGroup))||t.equals(fr.namedNode(Sn_agentClass))||t.equals(fr.namedNode(Sn_origin)))}(t))&&(null===Ll(n,Sn_accessTo)&&null===Ll(n,Sn_default)&&null===Ll(n,Sn_defaultForNew)||null===Ll(n,Sn_mode)||null===Ll(n,Sn_agent)&&null===Ll(n,Sn_agentGroup)&&null===Ll(n,Sn_agentClass))}const zr={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function Ij(n,t,e){return n.filter(r=>Bt(r,e).includes(t))}function Rj(n,t){const e={};return n.forEach(r=>{const i=Bt(r,t),o=zh(r);i.forEach(s=>{e[s]=void 0===e[s]?o:Wh([e[s],o])})}),e}function Oj(n){let t=Fo();return t=Ai(t,Ro_type,Sn_Authorization),n.read&&(t=_n(t,Sn_mode,zr.read)),n.append&&!n.write&&(t=_n(t,Sn_mode,zr.append)),n.write&&(t=_n(t,Sn_mode,zr.write)),n.control&&(t=_n(t,Sn_mode,zr.control)),t}function Sa(n,t){return Object.assign(Pl(n),{internal_acl:t})}const Cfe=[Sn_agent,Sn_agentClass,Sn_agentGroup,Sn_origin];function Zp(n,t,e,r,i){let o=n;tl(n).forEach(l=>{const[c,d]=function Efe(n,t,e,r,i){if(!Bt(n,e).includes(t))return[n,Oj({read:!1,append:!1,write:!1,control:!1})];const o=Vr(n,e,t);let s=function Sfe(n){let t=Fo();function e(r,i,o){return Bt(r,o).reduce((s,a)=>_n(s,o,a),i)}return t=Ai(t,Ro_type,Sn_Authorization),t=e(n,t,Sn_accessTo),t=e(n,t,Sn_default),t=e(n,t,Sn_defaultForNew),t=e(n,t,Sn_agent),t=e(n,t,Sn_agentGroup),t=e(n,t,Sn_agentClass),t=e(n,t,Sn_origin),t=e(n,t,Sn_mode),t}(n);return s=Vr(s,"resource"===i?Sn_accessTo:Sn_default,r),"default"===i&&(s=Vr(s,Sn_defaultForNew,r)),s=Ai(s,e,t),Cfe.filter(a=>a!==e).forEach(a=>{s=yi(s,a)}),[o,s]}(l,i,e,n.internal_accessTo,r);o=Yi(o,c),o=Yi(o,d)});let s=Oj(t);return s=Ai(s,"resource"===r?Sn_accessTo:Sn_default,n.internal_accessTo),s=Ai(s,e,i),function bfe(n){return rl(n).filter(wfe).reduce(xc,n)}(Yi(o,s))}function Pj(n,t){return Sa(n,{resourceAcl:t,fallbackAcl:null})}function Afe(n){return n.internal_acl.resourceAcl}class xD extends Error{constructor(t,e){super(`[${ys(t)}] is governed by Access Control Policies in [${ys(e)}] rather than by Web Access Control.`)}}function kfe(n){return"object"==typeof n.internal_acl}function _d(n){return null!==n.internal_acl.resourceAcl&&hn(n)===n.internal_acl.resourceAcl.internal_accessTo&&n.internal_resourceInfo.aclUrl===hn(n.internal_acl.resourceAcl)}function Dfe(n){return SD.apply(this,arguments)}function SD(){return(SD=(0,Xe.Z)(function*(n,t=tn){const e=yield ia(n,t);return Sa(e,yield Cc(e,t))})).apply(this,arguments)}function Tfe(n){return CD.apply(this,arguments)}function CD(){return(CD=(0,Xe.Z)(function*(n,t=tn){const e=yield qb(n,t);return Sa(e,yield Cc(e,t))})).apply(this,arguments)}function Mfe(n){return ED.apply(this,arguments)}function ED(){return(ED=(0,Xe.Z)(function*(n,t=tn){const e=yield Vs(n,t);return Sa(e,yield Cc(e,t))})).apply(this,arguments)}function zy(n){return _d(n)?n.internal_acl.resourceAcl:null}function bd(n){return null!==n.internal_acl.fallbackAcl}function AD(n){return bd(n)?n.internal_acl.fallbackAcl:null}function dw(n){return Ut(Object.assign(Object.assign({},Gp()),{internal_accessTo:hn(n),internal_resourceInfo:{sourceIri:n.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}}))}function Fj(n){const t=dw(n);return Jp(rl(n.internal_acl.fallbackAcl),n.internal_acl.fallbackAcl.internal_accessTo).map(s=>(s=yi(s,Sn_default),s=yi(s,Sn_defaultForNew),s=Ai(s,Sn_accessTo,hn(n)),Ai(s,Sn_default,hn(n)))).reduce(Yi,t)}function Nj(n,t){return kD.apply(this,arguments)}function kD(){return(kD=(0,Xe.Z)(function*(n,t,e=tn){if(!ji(n))throw new Error(`Could not determine the location of the ACL for the Resource at [${hn(n)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);const r=yield eD(n.internal_resourceInfo.aclUrl,t,e);return Object.assign(Object.assign({},r),{internal_accessTo:hn(n)})})).apply(this,arguments)}function Ife(n){return DD.apply(this,arguments)}function DD(){return(DD=(0,Xe.Z)(function*(n,t=tn){const r=yield Object.assign(Object.assign({},tn),t).fetch(n.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!r.ok)throw new Error(`Deleting the ACL of the Resource at [${hn(n)}] failed: [${r.status}] [${r.statusText}].`);return Object.assign(Pl(n),{acl:{resourceAcl:null}})})).apply(this,arguments)}function ji(n){return"string"==typeof n.internal_resourceInfo.aclUrl}function TD(n,t){return _d(n)?Bj(n.internal_acl.resourceAcl,t):bd(n)?Hj(n.internal_acl.fallbackAcl,t):null}function Lj(n){return _d(n)?Uj(zy(n)):bd(n)?Vj(AD(n)):null}function Bj(n,t){return Wh(zj(Vy(rl(n),n.internal_accessTo),t).map(zh))}function Uj(n){return $j(Wj(Vy(rl(n),n.internal_accessTo)))}function jj(n,t,e){return Zp(n,e,Sn_agent,"resource",t)}function Hj(n,t){return Wh(zj(Jp(rl(n),n.internal_accessTo),t).map(zh))}function Vj(n){return $j(Wj(Jp(rl(n),n.internal_accessTo)))}function Rfe(n,t,e){return Zp(n,e,Sn_agent,"default",t)}function zj(n,t){return Ij(n,t,Sn_agent)}function Wj(n){return n.filter(Ofe)}function Ofe(n){return null!==Ll(n,Sn_agent)}function $j(n){return Rj(n,Sn_agent)}function MD(n,t){return _d(n)?Gj(n.internal_acl.resourceAcl,t):bd(n)?Jj(n.internal_acl.fallbackAcl,t):null}function Kj(n){return _d(n)?qj(zy(n)):bd(n)?Zj(AD(n)):null}function Gj(n,t){return Wh(Yj(Vy(rl(n),n.internal_accessTo),t).map(zh))}function qj(n){return Xj(Vy(rl(n),n.internal_accessTo))}function Jj(n,t){return Wh(Yj(Jp(rl(n),n.internal_accessTo),t).map(zh))}function Zj(n){return Xj(Jp(rl(n),n.internal_accessTo))}function Yj(n,t){return Ij(n,t,Sn_agentGroup)}function Xj(n){return Rj(n,Sn_agentGroup)}function Qj(n,t,e){return Zp(n,e,Sn_agentGroup,"resource",t)}function Pfe(n,t,e){return Zp(n,e,Sn_agentGroup,"default",t)}function ID(n){return _d(n)?eH(n.internal_acl.resourceAcl):bd(n)?tH(n.internal_acl.fallbackAcl):null}function eH(n){return Wh(rH(Vy(rl(n),n.internal_accessTo),jp_Agent).map(zh))}function tH(n){return Wh(rH(Jp(rl(n),n.internal_accessTo),jp_Agent).map(zh))}function nH(n,t){return Zp(n,t,Sn_agentClass,"resource",jp_Agent)}function Ffe(n,t){return Zp(n,t,Sn_agentClass,"default",jp_Agent)}function rH(n,t){return n.filter(e=>function Nfe(n,t){return Bt(n,Sn_agentClass).includes(t)}(e,t))}function Bfe(n){var t;const e=null!==(t=n.internal_resourceInfo.aclUrl)&&void 0!==t?t:"https://your.pod/mock-acl.ttl",r=Object.assign(Pl(n),{internal_resourceInfo:Object.assign(Object.assign({},n.internal_resourceInfo),{aclUrl:e})});return Sa(r,{resourceAcl:dw(r),fallbackAcl:null})}function Ufe(n){const t=Mj(ys(n)),e=t+".acl",r=function Lfe(n,t){return Object.assign(Pl(n),{internal_resourceInfo:Object.assign(Object.assign({},n.internal_resourceInfo),{aclUrl:t})})}(aj(t),e),i=dw(r);return Sa(Pl(n),{resourceAcl:null,fallbackAcl:i})}const jfe=vU.dataset;function Hfe(n){const e=Array.from(n),r=AU(e);return e.filter(o=>r.every(s=>!s.equals(o.subject))).reduce((o,s)=>Uk(o,s,{otherQuads:e,chainBlankNodes:r}),{graphs:{default:{}},type:"Dataset"})}function iH(n,t={}){var e,r;return(null!==(r=null===(e=t.datasetFactory)||void 0===e?void 0:e.dataset)&&void 0!==r?r:jfe)(tw(n,t))}function oH(n,t){const e=cr(n,t);if(null===e)throw new Error(`Profile document [${hn(n)}] does not include WebID [${t}]`);return e}function Vfe(n,t,e){return Yi(n,Ai(oH(n,t),Ak_publicKey,e))}function sH(n,t){return aw(oH(n,t),Ak_publicKey)}const zfe=n=>void 0!==n.keys;function aH(n,t){return RD.apply(this,arguments)}function RD(){return(RD=(0,Xe.Z)(function*(n,t,e=tn){const i=yield Object.assign(Object.assign({},tn),e).fetch(t);if(!i.ok)throw new Error(`Fetching [${t}] returned an error: ${i.status} ${i.statusText}`);try{const o=yield i.json();if(!zfe(o))throw new Error(`[${t}] does not dereference to a valid JWKS: ${JSON.stringify(o)}`);return{keys:[...o.keys,n]}}catch(o){throw new Error(`Parsing the document at [${t}] failed: ${o}`)}})).apply(this,arguments)}function Wfe(n,t){return OD.apply(this,arguments)}function OD(){return(OD=(0,Xe.Z)(function*(n,t,e=tn){const r=yield ia(t,{fetch:e.fetch});if(null===r)throw new Error(`The profile document associated with WebID [${t}] could not be retrieved.`);const i=sH(r,t);if(null===i)throw new Error(`No key set is declared for the property [${Ak_publicKey}] in the profile of [${t}]`);const o=yield aH(n,i,e);return gU(i,new Blob([JSON.stringify(o)]),{contentType:"application/json",fetch:e.fetch})})).apply(this,arguments)}function lH(n,t){const e=cr(t,n),r=tl(t).filter(i=>Bt(i,"http://xmlns.com/foaf/0.1/primaryTopic").length>0).map(ei).concat(e?Bt(e,"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"):[]).filter(i=>i!==ys(t));return Array.from(new Set(r))}function cH(n,t){return PD.apply(this,arguments)}function PD(){return(PD=(0,Xe.Z)(function*(n,t){var e,r;const i=null!==(e=null==t?void 0:t.fetch)&&void 0!==e?e:Ek,o=null!==(r=null==t?void 0:t.webIdProfile)&&void 0!==r?r:yield ia(n,{fetch:sj.fetch});return{webIdProfile:o,altProfileAll:(yield Promise.allSettled(lH(n,o).map(a=>ia(a,{fetch:i})))).filter(a=>"fulfilled"===a.status).map(a=>a.value)}})).apply(this,arguments)}function $fe(n){return FD.apply(this,arguments)}function FD(){return(FD=(0,Xe.Z)(function*(n,t=tn){return uH(yield cH(n,t),n)})).apply(this,arguments)}function uH(n,t){const e=new Set;return[n.webIdProfile,...n.altProfileAll].forEach(r=>{const i=cr(r,t);null!==i&&Bt(i,uU_storage).forEach(o=>e.add(o))}),Array.from(e)}const Kfe={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"};function Gfe(n,t){return ND.apply(this,arguments)}function ND(){return(ND=(0,Xe.Z)(function*(n,t){const{prefixes:e=Kfe,thing:r}=Object.assign({},t),i=new BU({format:"application/turtle",prefixes:e}),o=r?new zk(r):void 0;for(const s of iH(n).match(o))i.addQuad(s);return new Promise((s,a)=>{i.end((l,c)=>{if(l)return a(l);s(c)})})})).apply(this,arguments)}function jn(n){if(!so(n))throw new Error(`An Access Control Resource for [${hn(n)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return n.internal_acp.acr}function es(n,t){return Object.assign(Pl(n),{internal_acp:Object.assign(Object.assign({},n.internal_acp),{acr:t})})}function dH(n){let t=Fo(n);return t=Ai(t,Ro_type,tt.AccessControl),t}function xu(n,t){const r=tl(jn(n),t),i=r.filter(s=>Bt(s,Ro_type).includes(tt.AccessControl)),o=r.filter(s=>Bt(s,tt.accessControl).length>0).map(s=>Fo({url:Bt(s,tt.accessControl)[0]}));return i.concat(o)}function $h(n,t){return es(n,Yi(jn(n),t))}function hH(n,t){return _n(n,tt.apply,t)}function fH(n){return Bt(n,tt.apply)}function pH(n,t){return Vr(n,tt.apply,t)}function gH(n){return yi(n,tt.apply)}function mH(n,t){return _n(n,tt.applyMembers,t)}function LD(n){return Bt(n,tt.applyMembers)}function yH(n){return yi(n,tt.applyMembers)}function vH(n){const t=xu(n);return 0===t.length?dH():t[0]}function Wy(n){return Nh(n)&&Array.isArray(n.internal_resourceInfo.linkedResources[tt.accessControl])&&1===n.internal_resourceInfo.linkedResources[tt.accessControl].length}function hw(n,t){var e;const r=jn(n),i=hn(r);let o=null!==(e=cr(r,i))&&void 0!==e?e:Fo({url:i});return o=_n(o,tt.access,t),es(n,Yi(r,o))}function BD(n,t){var e;const r=jn(n),i=hn(r);let o=null!==(e=cr(r,i))&&void 0!==e?e:Fo({url:i});return o=_n(o,tt.accessMembers,t),es(n,Yi(r,o))}function Su(n){const t=jn(n),r=cr(t,hn(t));return null===r?[]:Bt(r,tt.access)}function $y(n){const t=jn(n),r=cr(t,hn(t));return null===r?[]:Bt(r,tt.accessMembers)}function Yp(n,t){const e=jn(n),i=cr(e,hn(e));return null===i?n:es(n,Yi(e,Vr(i,tt.access,t)))}function UD(n,t){const e=jn(n),i=cr(e,hn(e));return null===i?n:es(n,Yi(e,Vr(i,tt.accessMembers,t)))}function fw(n){const t=jn(n),r=cr(t,hn(t));return null===r?n:es(n,Yi(t,yi(r,tt.access)))}function pw(n){const t=jn(n),r=cr(t,hn(t));return null===r?n:es(n,Yi(t,yi(r,tt.accessMembers)))}function jD(n,t){return $h(n,hH(vH(n),t))}function _H(n,t){return $h(n,mH(vH(n),t))}function wd(n){const e=xu(n).map(i=>fH(i)),r=new Set;return e.forEach(i=>{i.forEach(o=>r.add(o))}),Array.from(r)}function gw(n){const e=xu(n).map(i=>LD(i)),r=new Set;return e.forEach(i=>{i.forEach(o=>r.add(o))}),Array.from(r)}function Ky(n,t){return xu(n).map(o=>pH(o,t)).reduce($h,n)}function bH(n,t){return xu(n).map(o=>function Jfe(n,t){return Vr(n,tt.applyMembers,t)}(o,t)).reduce($h,n)}function HD(n){return xu(n).map(i=>gH(i)).reduce($h,n)}function VD(n){return xu(n).map(i=>yH(i)).reduce($h,n)}function wH(n){let t=`# Access controls for ${hn(n)}\n`;const e=wd(n),r=gw(n),i=Su(n),o=$y(n);return 0===e.length&&0===r.length&&0===i.length&&0===o.length&&(t+="\n<no policies specified yet>\n"),e.length>0&&(t+="\nThe following policies apply to this resource:\n- ",t+=e.join("\n- ")+"\n"),i.length>0&&(t+="\nThe following policies apply to the access control resource for this resource:\n- ",t+=i.join("\n- ")+"\n"),r.length>0&&(t+="\nThe following policies apply to the children of this resource:\n- ",t+=r.join("\n- ")+"\n"),o.length>0&&(t+="\nThe following policies apply to the access control resources for children of this resource:\n- ",t+=o.join("\n- ")+"\n"),t}function mw(n){return zD.apply(this,arguments)}function zD(){return(zD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield ia(e,r),o=yield Kh(i,r);return Object.assign(Object.assign({},i),o)})).apply(this,arguments)}function yw(n){return WD.apply(this,arguments)}function WD(){return(WD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield qb(e,r),o=yield Kh(i,r);return Object.assign(i,o)})).apply(this,arguments)}function ts(n){return $D.apply(this,arguments)}function $D(){return($D=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield Vs(e,r),o=yield Kh(i,r);return Object.assign(Object.assign({},i),o)})).apply(this,arguments)}function vw(n){return KD.apply(this,arguments)}function KD(){return(KD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield ia(e,r);if(ji(i))return Sa(i,yield Cc(i,r));{const o=yield Kh(i,r);return Object.assign(Object.assign({},i),o)}})).apply(this,arguments)}function _w(n){return GD.apply(this,arguments)}function GD(){return(GD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield qb(e,r);if(ji(i))return Sa(i,yield Cc(i,r));{const o=yield Kh(i,r);return Object.assign(i,o)}})).apply(this,arguments)}function bw(n){return qD.apply(this,arguments)}function qD(){return(qD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield Vs(e,r);if(ji(i))return Sa(i,yield Cc(i,r));{const o=yield Kh(i,r);return Object.assign(Object.assign({},i),o)}})).apply(this,arguments)}function Bl(n){return JD.apply(this,arguments)}function JD(){return(JD=(0,Xe.Z)(function*(n,t=tn){const e=jn(n),r=Object.assign(Object.assign({},tn),t);return es(n,yield eD(hn(e),e,r))})).apply(this,arguments)}function so(n){return"object"==typeof n.internal_acp&&null!==n.internal_acp&&"object"==typeof n.internal_acp.acr&&null!==n.internal_acp.acr}function Kh(n,t){return ZD.apply(this,arguments)}function ZD(){return(ZD=(0,Xe.Z)(function*(n,t){let e,r;if(Wy(n))e=n.internal_resourceInfo.linkedResources[tt.accessControl][0];else if(ji(n)){const s=yield Vs(n.internal_resourceInfo.aclUrl,t);kj(s)&&(e=hn(s))}if("string"!=typeof e)return{internal_acp:{acr:null}};try{r=yield ia(e,t)}catch(s){return{internal_acp:{acr:null}}}return{internal_acp:{acr:Object.assign(Object.assign({},r),{accessTo:hn(n)})}}})).apply(this,arguments)}function ww(n){const t=wd(n).map(Kp).concat(gw(n).map(Kp)).concat(Su(n).map(Kp)).concat($y(n).map(Kp));return Array.from(new Set(t))}function xH(n){return YD.apply(this,arguments)}function YD(){return(YD=(0,Xe.Z)(function*(n,t=tn){const e=gn(n),r=Object.assign(Object.assign({},tn),t),i=yield Vs(e,r);return so(yield Kh(i,r))})).apply(this,arguments)}function XD(n){return Bt(n,Ro_type).includes(tt.Rule)}function QD(n,t){return _n(n,tt.allOf,t)}function eT(n,t){return Vr(n,tt.allOf,t)}function tT(n,t){return Ai(n,tt.allOf,t)}function Xp(n){return Bt(n,tt.allOf)}function nT(n,t){return _n(n,tt.anyOf,t)}function rT(n,t){return Vr(n,tt.anyOf,t)}function iT(n,t){return Ai(n,tt.anyOf,t)}function Qp(n){return Bt(n,tt.anyOf)}function oT(n,t){return _n(n,tt.noneOf,t)}function sT(n,t){return Vr(n,tt.noneOf,t)}function aT(n,t){return Ai(n,tt.noneOf,t)}function xd(n){return Bt(n,tt.noneOf)}function lT(n){let e=Fo({url:gn(n)});return e=wu(e,Ro_type,tt.Rule),e}function cT(n,t){const e=jn(n),r=new URL(hn(e));r.hash=`#${t}`;let i=Fo({url:r.href});return i=wu(i,Ro_type,tt.Rule),i}function uT(n,t){const e=cr(n,t);return null===e||aw(e,Ro_type)!==tt.Rule?null:e}function SH(n,t){const e=jn(n),r=hn(e),i=new URL(r);i.hash=`#${t}`;const o=cr(e,i.href);return null!==o&&XD(o)?o:null}function dT(n){return tl(n).filter(XD)}function hT(n,t){return xc(n,t)}function fT(n,t){return Yi(n,t)}function Gy(n,t){return es(n,Yi(jn(n),t))}function xw(n){return Bt(n,tt.agent).filter(t=>t!==tt.PublicAgent&&t!==tt.AuthenticatedAgent&&t!==tt.CreatorAgent)}function pT(n,t){const e=qy(n),r=Jy(n),i=Zy(n);let o=Ai(n,tt.agent,t);return e&&(o=bT(o)),r&&(o=wT(o)),i&&(o=xT(o)),o}function gT(n,t){return _n(n,tt.agent,t)}function mT(n,t){return Vr(n,tt.agent,t)}function Sw(n){return Bt(n,tt.group)}function yT(n,t){return Ai(n,tt.group,t)}function vT(n,t){return _n(n,tt.group,t)}function _T(n,t){return Vr(n,tt.group,t)}function qy(n){return Bt(n,tt.agent).filter(t=>t===tt.PublicAgent).length>0}function bT(n){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return _n(n,tt.agent,tt.PublicAgent)}function CH(n){return Vr(n,tt.agent,tt.PublicAgent)}function Jy(n){return Bt(n,tt.agent).filter(t=>t===tt.AuthenticatedAgent).length>0}function wT(n){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return _n(n,tt.agent,tt.AuthenticatedAgent)}function EH(n){return Vr(n,tt.agent,tt.AuthenticatedAgent)}function Zy(n){return Bt(n,tt.agent).filter(t=>t===tt.CreatorAgent).length>0}function xT(n){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return _n(n,tt.agent,tt.CreatorAgent)}function AH(n){return Vr(n,tt.agent,tt.CreatorAgent)}function kH(n){return Bt(n,tt.client).filter(t=>t!==yd_PublicOidcClient)}function ST(n){return Bt(n,tt.client).filter(t=>t===yd_PublicOidcClient).length>0}function DH(n){return _n(n,tt.client,yd_PublicOidcClient)}function CT(n){let t=`## Rule: ${Sc(n)}\n\n`,e="";qy(n)&&(e+="- Everyone\n"),Jy(n)&&(e+="- All authenticated agents\n"),Zy(n)&&(e+="- The creator of this resource\n"),ST(n)&&(e+="- Users of any client application\n");const r=xw(n);r.length>0&&(e+="- The following agents:\n  - ",e+=r.join("\n  - ")+"\n");const i=Sw(n);i.length>0&&(e+="- Members of the following groups:\n  - ",e+=i.join("\n  - ")+"\n");const o=kH(n);return o.length>0&&(e+="- Users of the following client applications:\n  - ",e+=o.join("\n  - ")+"\n"),t+=e.length>0?"This rule applies to:\n"+e:"<empty>\n",t}function eg(n){return Bt(n,Ro_type).includes(tt.Policy)}function Cw(n){let e=Fo({url:gn(n)});return e=wu(e,Ro_type,tt.Policy),e}function Ew(n,t){const e=cr(n,t);return null!==e&&eg(e)?e:null}function Aw(n){return tl(n).filter(r=>!Hh(r)&&eg(r))}function kw(n,t){return xc(n,t)}function Dw(n,t){return Yi(n,t)}function ET(n,t){let e=yi(n,tt.allow);return!0===t.read&&(e=_n(e,tt.allow,zr.read)),!0===t.append&&(e=_n(e,tt.allow,zr.append)),!0===t.write&&(e=_n(e,tt.allow,zr.write)),e}function Yy(n,t){let e=yi(n,tt.allow);return!0===t.read&&(e=_n(e,tt.allow,tt.Read)),!0===t.append&&(e=_n(e,tt.allow,tt.Append)),!0===t.write&&(e=_n(e,tt.allow,tt.Write)),e}function AT(n){const t=Bt(n,tt.allow);return{read:t.includes(zr.read),append:t.includes(zr.append),write:t.includes(zr.write)}}function tg(n){const t=Bt(n,tt.allow);return{read:t.includes(tt.Read),append:t.includes(tt.Append),write:t.includes(tt.Write)}}function kT(n,t){let e=yi(n,tt.deny);return!0===t.read&&(e=_n(e,tt.deny,tt.Read)),!0===t.append&&(e=_n(e,tt.deny,tt.Append)),!0===t.write&&(e=_n(e,tt.deny,tt.Write)),e}function DT(n){const t=Bt(n,tt.deny);return{read:t.includes(zr.read),append:t.includes(zr.append),write:t.includes(zr.write)}}function ng(n){const t=Bt(n,tt.deny);return{read:t.includes(tt.Read),append:t.includes(tt.Append),write:t.includes(tt.Write)}}function Sd(n,t){const e=jn(n),r=new URL(hn(e));r.hash=`#${t}`;let i=Fo({url:r.href});return i=wu(i,Ro_type,tt.Policy),i}function TT(n,t){const e=jn(n),r=hn(e),i=new URL(r);i.hash=`#${t}`;const o=cr(e,i.href);return wd(n).includes(i.href)&&null!==o&&eg(o)?o:null}function MT(n,t){const e=jn(n),r=hn(e),i=new URL(r);i.hash=`#${t}`;const o=cr(e,i.href);return Su(n).includes(i.href)&&null!==o&&eg(o)?o:null}function TH(n){const t=jn(n);return wd(n).map(o=>cr(t,o)).filter(o=>null!==o&&eg(o))}function MH(n){const t=jn(n);return Su(n).map(o=>cr(t,o)).filter(o=>null!==o&&eg(o))}function IH(n,t){const e=jn(n);let i,r=t;if("string"==typeof r)try{new URL(r)}catch(l){const c=new URL(hn(e));c.hash=`#${t}`,r=c.href}return i="string"==typeof r?r:Po(r)?gn(r):Sc(r,hn(e)),null===TT(n,new URL(i).hash.substring(1))?n:Ky(es(n,xc(e,r)),i)}function RH(n,t){const e=jn(n);let i,r=t;if("string"==typeof r)try{new URL(r)}catch(l){const c=new URL(hn(e));c.hash=`#${t}`,r=c.href}return i="string"==typeof r?r:Po(r)?gn(r):Sc(r,hn(e)),null===MT(n,new URL(i).hash.substring(1))?n:Yp(es(n,xc(e,r)),i)}function Xy(n,t){const e=jn(n);return jD(es(n,Yi(e,t)),Sc(t,hn(e)))}function Qy(n,t){const e=jn(n);return hw(es(n,Yi(e,t)),Sc(t,hn(e)))}function IT(n){function t(l,c){return c?"denied":l?"allowed":"unspecified"}const e=tg(n),r=ng(n);let i=`## Policy: ${Sc(n)}\n\n`;i+=`- Read: ${t(e.read,r.read)}\n`,i+=`- Append: ${t(e.append,r.append)}\n`,i+=`- Write: ${t(e.write,r.write)}\n`;const o=Xp(n),s=Qp(n),a=xd(n);return 0===o.length&&0===s.length&&0===a.length&&(i+="\n<no rules specified yet>\n"),o.length>0&&(i+="\nAll of these rules should match:\n",i+="- "+o.join("\n- ")+"\n"),s.length>0&&(i+="\nAt least one of these rules should match:\n",i+="- "+s.join("\n- ")+"\n"),a.length>0&&(i+="\nNone of these rules should match:\n",i+="- "+a.join("\n- ")+"\n"),i}function e0(n){const t=new URL("access-control-resource",n).href;return Object.assign(Object.assign({},cD(t)),{accessTo:n})}function Tw(n,t=e0(hn(n))){return Object.assign(Pl(n),{internal_acp:{acr:t,aprs:{}}})}const ope={acrAsMarkdown:wH,addAcrPolicyUrl:hw,addMemberAcrPolicyUrl:BD,addMemberPolicyUrl:_H,addPolicyUrl:jD,getAcrPolicyUrlAll:Su,getMemberAcrPolicyUrlAll:$y,getMemberPolicyUrlAll:gw,getPolicyUrlAll:wd,hasLinkedAcr:Wy,removeAcrPolicyUrl:Yp,removeAcrPolicyUrlAll:fw,removeMemberAcrPolicyUrl:UD,removeMemberAcrPolicyUrlAll:pw,removeMemberPolicyUrl:bH,removeMemberPolicyUrlAll:VD,removePolicyUrl:Ky,removePolicyUrlAll:HD},spe={createPolicy:Cw,getAllowModes:tg,getDenyModes:ng,getPolicy:Ew,getPolicyAll:Aw,policyAsMarkdown:IT,removePolicy:kw,setAllowModes:Yy,setDenyModes:kT,setPolicy:Dw},ape={addAgent:gT,addForbiddenRuleUrl:oT,addGroup:vT,addOptionalRuleUrl:nT,addRequiredRuleUrl:QD,createRule:lT,getAgentAll:xw,getForbiddenRuleUrlAll:xd,getGroupAll:Sw,getOptionalRuleUrlAll:Qp,getRequiredRuleUrlAll:Xp,getRule:uT,getRuleAll:dT,hasAuthenticated:Jy,hasCreator:Zy,hasPublic:qy,removeAgent:mT,removeForbiddenRuleUrl:sT,removeGroup:_T,removeOptionalRuleUrl:rT,removeRequiredRuleUrl:eT,removeRule:hT,ruleAsMarkdown:CT,setAgent:pT,setForbiddenRuleUrl:aT,setGroup:yT,setOptionalRuleUrl:iT,setRequiredRuleUrl:tT,setRule:fT},lpe={addMockAcrTo:Tw,mockAcrFor:e0};function OH(n,t){return t?bT(n):CH(n)}function PH(n,t){return t?wT(n):EH(n)}function FH(n,t){return t?xT(n):AH(n)}const cpe={getForbiddenRuleurlAll:xd,setPublic:OH,setAuthenticated:PH,setCreator:FH},upe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{getFileWithAccessDatasets:_w,getFileWithAcr:yw,getReferencedPolicyUrlAll:ww,getResourceInfoWithAccessDatasets:bw,getResourceInfoWithAcr:ts,getSolidDatasetWithAccessDatasets:vw,getSolidDatasetWithAcr:mw,hasAccessibleAcr:so,saveAcrFor:Bl}),ope),spe),ape),lpe),cpe),hpe={createPolicy:Cw,getAllowModes:tg,getDenyModes:ng,getPolicy:Ew,getPolicyAll:Aw,policyAsMarkdown:IT,removePolicy:kw,setAllowModes:Yy,setDenyModes:kT,setPolicy:Dw},fpe={addAgent:gT,addForbiddenRuleUrl:oT,addGroup:vT,addOptionalRuleUrl:nT,addRequiredRuleUrl:QD,createRule:lT,getAgentAll:xw,getForbiddenRuleUrlAll:xd,getGroupAll:Sw,getOptionalRuleUrlAll:Qp,getRequiredRuleUrlAll:Xp,getRule:uT,getRuleAll:dT,hasAuthenticated:Jy,hasCreator:Zy,hasPublic:qy,removeAgent:mT,removeForbiddenRuleUrl:sT,removeGroup:_T,removeOptionalRuleUrl:rT,removeRequiredRuleUrl:eT,removeRule:hT,ruleAsMarkdown:CT,setAgent:pT,setForbiddenRuleUrl:aT,setGroup:yT,setOptionalRuleUrl:iT,setRequiredRuleUrl:tT,setRule:fT},ppe={addMockAcrTo:Tw,mockAcrFor:e0},gpe={hasLinkedAcr:Wy,addAcrPolicyUrl:hw,addMemberAcrPolicyUrl:BD,getAcrPolicyUrlAll:Su,getMemberAcrPolicyUrlAll:$y,removeAcrPolicyUrl:Yp,removeAcrPolicyUrlAll:fw,removeMemberAcrPolicyUrl:UD,removeMemberAcrPolicyUrlAll:pw},mpe={createControl:dH,getControl:function qfe(n,t,e){const i=cr(jn(n),t,e);return null!==i&&Bt(i,Ro_type).includes(tt.AccessControl)?i:null},getAllControl:xu,getControlAll:xu,setControl:$h,removeControl:function vpe(n,t){return es(n,xc(jn(n),t))},addPolicyUrl:hH,getPolicyUrlAll:fH,removePolicyUrl:pH,removePolicyUrlAll:gH,addMemberPolicyUrl:mH,getMemberPolicyUrlAll:LD,removeMemberPolicyUrl:LD,removeMemberPolicyUrlAll:yH,getForbiddenRuleurlAll:xd,setPublic:OH,setAuthenticated:PH,setCreator:FH},ype=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},{getFileWithAccessDatasets:_w,getFileWithAcr:yw,getReferencedPolicyUrlAll:ww,getResourceInfoWithAccessDatasets:bw,getResourceInfoWithAcr:ts,getSolidDatasetWithAccessDatasets:vw,getSolidDatasetWithAcr:mw,hasAccessibleAcr:so,saveAcrFor:Bl}),hpe),fpe),ppe),gpe),mpe),_pe={getFileWithAccessDatasets:_w,getFileWithAcr:yw,getLinkedAcrUrl:function Zfe(n){return Nh(n)?[tt.accessControl,"acl"].map(e=>{if(Array.isArray(n.internal_resourceInfo.linkedResources[e])&&1===n.internal_resourceInfo.linkedResources[e].length)return n.internal_resourceInfo.linkedResources[e][0]}).find(e=>void 0!==e):void 0},getReferencedPolicyUrlAll:ww,getResourceInfoWithAccessDatasets:bw,getResourceInfoWithAcr:ts,getSolidDatasetWithAccessDatasets:vw,getSolidDatasetWithAcr:mw,hasAccessibleAcr:so,saveAcrFor:Bl,isAcpControlled:xH},bpe={acrAsMarkdown:wH,addAcrPolicyUrl:hw,addMemberAcrPolicyUrl:BD,addMemberPolicyUrl:_H,addPolicyUrl:jD,getAcrPolicyUrlAll:Su,getMemberAcrPolicyUrlAll:$y,getMemberPolicyUrlAll:gw,getPolicyUrlAll:wd,hasLinkedAcr:Wy,removeAcrPolicyUrl:Yp,removeAcrPolicyUrlAll:fw,removeMemberAcrPolicyUrl:UD,removeMemberAcrPolicyUrlAll:pw,removeMemberPolicyUrl:bH,removeMemberPolicyUrlAll:VD,removePolicyUrl:Ky,removePolicyUrlAll:HD},wpe={createPolicy:Cw,getAllowModes:tg,getDenyModes:ng,getPolicy:Ew,getPolicyAll:Aw,policyAsMarkdown:IT,removePolicy:kw,setAllowModes:Yy,setDenyModes:kT,setPolicy:Dw,createResourcePolicyFor:Sd,getResourceAcrPolicy:MT,getResourceAcrPolicyAll:MH,getResourcePolicy:TT,getResourcePolicyAll:TH,removeResourceAcrPolicy:RH,removeResourcePolicy:IH,setResourceAcrPolicy:Qy,setResourcePolicy:Xy},xpe={addAgent:gT,addGroup:vT,createRule:lT,getAgentAll:xw,getGroupAll:Sw,getRule:uT,getRuleAll:dT,removeAgent:mT,removeGroup:_T,removeRule:hT,ruleAsMarkdown:CT,setAgent:pT,setGroup:yT,setRule:fT,addClient:function epe(n,t){return _n(n,tt.client,t)},getClientAll:kH,hasAnyClient:ST,removeClient:function tpe(n,t){return Vr(n,tt.client,t)},setAnyClient:DH,setClient:function Qfe(n,t){const e=ST(n);let r=Ai(n,tt.client,t);return e&&(r=DH(r)),r},removeAnyClient:function npe(n){return Vr(n,tt.client,yd_PublicOidcClient)},hasAuthenticated:Jy,hasCreator:Zy,hasPublic:qy,setAuthenticated:wT,setCreator:xT,setPublic:bT,removeAuthenticated:EH,removeCreator:AH,removePublic:CH,getAnyOfRuleUrlAll:Qp,addAnyOfRuleUrl:nT,removeAnyOfRuleUrl:rT,setAnyOfRuleUrl:iT,getAllOfRuleUrlAll:Xp,addAllOfRuleUrl:QD,removeAllOfRuleUrl:eT,setAllOfRuleUrl:tT,getNoneOfRuleUrlAll:xd,addNoneOfRuleUrl:oT,removeNoneOfRuleUrl:sT,setNoneOfRuleUrl:aT,createResourceRuleFor:cT,getResourceRule:SH,getResourceRuleAll:function Yfe(n){return tl(jn(n)).filter(XD)},removeResourceRule:function Xfe(n,t){const e=jn(n);let r;if("string"==typeof t)try{new URL(t),r=t}catch(a){const l=new URL(hn(e));l.hash=`#${t}`,r=l.href}else r=Po(t)?gn(t):Sc(t);const i=SH(n,new URL(r).hash.substring(1));return null===i?n:es(n,xc(e,i))},setResourceRule:Gy},Spe={addMockAcrTo:Tw,mockAcrFor:e0},Cpe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_pe),bpe),wpe),xpe),Spe),No="http://www.w3.org/ns/solid/acp#",Gn={AccessControl:No.concat("AccessControl"),AccessControlResource:No.concat("AccessControlResource"),AuthenticatedAgent:No.concat("AuthenticatedAgent"),CreatorAgent:No.concat("CreatorAgent"),Matcher:No.concat("Matcher"),Policy:No.concat("Policy"),PublicAgent:No.concat("PublicAgent"),access:No.concat("access"),accessControl:No.concat("accessControl"),agent:No.concat("agent"),allOf:No.concat("allOf"),allow:No.concat("allow"),anyOf:No.concat("anyOf"),apply:No.concat("apply"),client:No.concat("client"),deny:No.concat("deny"),memberAccessControl:No.concat("memberAccessControl"),noneOf:No.concat("noneOf"),vc:No.concat("vc")},Mw="http://www.w3.org/ns/auth/acl#",rg={Append:Mw.concat("Append"),Control:Mw.concat("Control"),Read:Mw.concat("Read"),Write:Mw.concat("Write")},ig="defaultAccessControl",t0="defaultAcrAccessControl",RT="defaultMemberAccessControl",OT="defaultMemberAcrAccessControl";function PT(n,t){return hn(jn(n)).concat("#").concat(t)}function Ec(n,t){const e=jn(n),r=PT(n,t),i=cr(e,r);return null==i?Fo({url:r}):i}function il(n,t){return Object.assign(Pl(n),{internal_acp:Object.assign(Object.assign({},n.internal_acp),{acr:Yi(n.internal_acp.acr,t)})})}function n0(n){const t=jn(n);return cr(t,hn(t))}function NH(n){return n.includes("Member")?Gn.memberAccessControl:Gn.accessControl}function Iw(n,t){const e=PT(n,t),r=jn(n);let i=n0(n);return null==i&&(i=Fo({url:hn(r)})),Bt(i,NH(t)).includes(e)?n:(i=nl(i).addUrl(NH(t),e).build(),il(n,i))}function LH(n,t){const e=Iw(n,t0);return il(e,nl(Ec(e,t0)).addUrl(Gn.access,t).build())}function BH(n,t){const e=Iw(n,ig);return il(e,nl(Ec(e,ig)).addUrl(Gn.apply,t).build())}function UH(n){const t=n0(n);return null===t?[]:Bt(t,Gn.accessControl)}function Rw(n,t,e){const r=jn(n);return Array.from(new Set(t.map(i=>{const o=cr(r,i);return null!==o?Bt(o,e):[]}).reduce((i,o)=>i.concat(o),[])))}function jH(n){return Rw(n,UH(n),Gn.access)}function HH(n){const t=n0(n);return null===t?[]:Bt(t,Gn.memberAccessControl)}function VH(n){return Rw(n,UH(n),Gn.apply)}function Ow(n){return Bt(n,Ro_type).includes(tt.Matcher)}function FT(n){return Bt(n,tt.allOf)}function NT(n){return Bt(n,tt.anyOf)}function LT(n){return Bt(n,tt.noneOf)}function BT(n,t){const e=jn(n),r=new URL(hn(e));r.hash=`#${t}`;let i=Fo({url:r.href});return i=wu(i,Ro_type,tt.Matcher),i}function zH(n,t){const e=jn(n),r=hn(e),i=new URL(r);i.hash=`#${t}`;const o=cr(e,i.href);return null!==o&&Ow(o)?o:null}function r0(n,t){return es(n,Yi(jn(n),t))}function WH(n,t){return _n(n,tt.agent,t)}function $H(n,t){return Vr(n,tt.agent,t)}function KH(n){return Bt(n,tt.agent).filter(t=>t===tt.PublicAgent).length>0}function GH(n){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return _n(n,tt.agent,tt.PublicAgent)}function qH(n){return Bt(n,tt.agent).filter(t=>t===tt.AuthenticatedAgent).length>0}function JH(n){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return _n(n,tt.agent,tt.AuthenticatedAgent)}function ZH(n){return Bt(n,tt.agent).filter(t=>t===tt.CreatorAgent).length>0}function YH(n){if("object"==typeof arguments&&"boolean"==typeof arguments[1])throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return _n(n,tt.agent,tt.CreatorAgent)}function XH(n){return Bt(n,tt.client).filter(t=>t===yd_PublicOidcClient).length>0}function QH(n){return _n(n,tt.client,yd_PublicOidcClient)}function Pw(n,t){const e=Bt(n,t);return{read:e.includes(rg.Read),append:e.includes(rg.Append),write:e.includes(rg.Write),controlRead:!1,controlWrite:!1}}function eV(n,t,e){let r=yi(n,e);return(t.read||t.controlRead)&&(r=_n(r,e,rg.Read)),t.append&&(r=_n(r,e,rg.Append)),(t.write||t.controlWrite)&&(r=_n(r,e,rg.Write)),r}const tV="defaultVcPolicy",nV="defaultVcMatcher",UT={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},jT=(n,t,e)=>Bt(n,t).includes(ei(e)),uge={getFileWithAccessDatasets:_w,getFileWithAcr:yw,getReferencedPolicyUrlAll:ww,getResourceInfoWithAccessDatasets:bw,getResourceInfoWithAcr:ts,getSolidDatasetWithAccessDatasets:vw,getSolidDatasetWithAcr:mw,hasAccessibleAcr:so,saveAcrFor:Bl,isAcpControlled:xH,getVcAccess:function cge(n){const t=jn(n),e=Ec(n,"defaultAccessControl"),r=n0(n);if(null===r||!jT(r,Gn.accessControl,e))return UT;const o=cr(t,`${ys(t)}#${tV}`);if(null===o||!jT(e,Gn.apply,o))return UT;const a=cr(t,`${ys(t)}#${nV}`);return null!==a&&jT(o,Gn.anyOf,a)?Pw(o,Gn.allow):UT},setVcAccess:function lge(n,t){var e,r;let i=jn(n);const o=`${ys(i)}#${tV}`,s=`${ys(i)}#${nV}`;let a=Ec(n,"defaultAccessControl"),l=null!==(e=n0(n))&&void 0!==e?e:nl({url:ys(i)}).addIri(Gn.accessControl,a).build();Bt(l,Gn.accessControl).includes(ei(a))||(l=_n(l,Gn.accessControl,a));let c=cr(i,o);null===c&&(c=nl({url:o}).addIri(Ro_type,Gn.Policy).addIri(Gn.anyOf,s).build(),a=_n(a,Gn.apply,c));const d=null!==(r=cr(i,s))&&void 0!==r?r:nl({url:s}).addIri(Ro_type,Gn.Matcher).addIri(Gn.vc,"http://www.w3.org/ns/solid/vc#SolidAccessGrant").build(),E=Pw(c,Gn.allow);return c=eV(c,Object.assign(Object.assign({},E),t),Gn.allow),i=[l,a,c,d].reduce(Yi,i),function age(n,t){return Object.assign(Pl(n),{internal_acp:{acr:t}})}(n,i)}},dge={addAcrPolicyUrl:LH,addMemberAcrPolicyUrl:function Ape(n,t){const e=Iw(n,OT);return il(e,nl(Ec(e,OT)).addUrl(Gn.access,t).build())},addMemberPolicyUrl:function kpe(n,t){const e=Iw(n,RT);return il(e,nl(Ec(e,RT)).addUrl(Gn.apply,t).build())},addPolicyUrl:BH,getAcrPolicyUrlAll:jH,getMemberAcrPolicyUrlAll:function Dpe(n){return Rw(n,HH(n),Gn.access)},getMemberPolicyUrlAll:function Tpe(n){return Rw(n,HH(n),Gn.apply)},getPolicyUrlAll:VH,hasLinkedAcr:Wy,removeAcrPolicyUrl:function Mpe(n,t){const e=Ec(n,t0);return il(n,Vr(e,Gn.access,t))},removeAcrPolicyUrlAll:fw,removeMemberAcrPolicyUrl:function Ipe(n,t){const e=Ec(n,OT);return il(n,Vr(e,Gn.access,t))},removeMemberAcrPolicyUrlAll:pw,removeMemberPolicyUrl:function Rpe(n,t){const e=Ec(n,RT);return il(n,Vr(e,Gn.apply,t))},removeMemberPolicyUrlAll:VD,removePolicyUrl:function Ope(n,t){const e=Ec(n,ig);return il(n,Vr(e,Gn.apply,t))},removePolicyUrlAll:HD},hge={createPolicy:Cw,getAllowModes:AT,getDenyModes:DT,getPolicy:Ew,getPolicyAll:Aw,removePolicy:kw,setAllowModes:ET,setDenyModes:function rpe(n,t){let e=yi(n,tt.deny);return!0===t.read&&(e=_n(e,tt.deny,zr.read)),!0===t.append&&(e=_n(e,tt.deny,zr.append)),!0===t.write&&(e=_n(e,tt.deny,zr.write)),e},setPolicy:Dw,createResourcePolicyFor:Sd,getResourceAcrPolicy:MT,getResourceAcrPolicyAll:MH,getResourcePolicy:TT,getResourcePolicyAll:TH,removeResourceAcrPolicy:RH,removeResourcePolicy:IH,setResourcePolicy:function Ppe(n,t){return il(n,t)}},fge={addAgent:WH,createMatcher:function Wpe(n){let e=Fo({url:gn(n)});return e=wu(e,Ro_type,tt.Matcher),e},getAgentAll:function Ype(n){return Bt(n,tt.agent).filter(t=>t!==tt.PublicAgent&&t!==tt.AuthenticatedAgent&&t!==tt.CreatorAgent)},getMatcher:function $pe(n,t){const e=cr(n,t);return null!==e&&Ow(e)?e:null},getMatcherAll:function Kpe(n){return tl(n).filter(Ow)},removeAgent:$H,removeMatcher:function qpe(n,t){return xc(n,t)},setAgent:function Xpe(n,t){const e=KH(n),r=qH(n),i=ZH(n);let o=Ai(n,tt.agent,t);return e&&(o=GH(o)),r&&(o=JH(o)),i&&(o=YH(o)),o},setMatcher:function Zpe(n,t){return Yi(n,t)},addClient:function ige(n,t){return _n(n,tt.client,t)},getClientAll:function nge(n){return Bt(n,tt.client).filter(t=>t!==yd_PublicOidcClient)},hasAnyClient:XH,removeClient:function oge(n,t){return Vr(n,tt.client,t)},setAnyClient:QH,setClient:function rge(n,t){const e=XH(n);let r=Ai(n,tt.client,t);return e&&(r=QH(r)),r},removeAnyClient:function sge(n){return Vr(n,tt.client,yd_PublicOidcClient)},hasAuthenticated:qH,hasCreator:ZH,hasPublic:KH,setAuthenticated:JH,setCreator:YH,setPublic:GH,removeAuthenticated:function ege(n){return Vr(n,tt.agent,tt.AuthenticatedAgent)},removeCreator:function tge(n){return Vr(n,tt.agent,tt.CreatorAgent)},removePublic:function Qpe(n){return Vr(n,tt.agent,tt.PublicAgent)},getAnyOfMatcherUrlAll:NT,addAnyOfMatcherUrl:function Bpe(n,t){return _n(n,tt.anyOf,t)},removeAnyOfMatcherUrl:function Upe(n,t){return Vr(n,tt.anyOf,t)},setAnyOfMatcherUrl:function jpe(n,t){return Ai(n,tt.anyOf,t)},getAllOfMatcherUrlAll:FT,addAllOfMatcherUrl:function Fpe(n,t){return _n(n,tt.allOf,t)},removeAllOfMatcherUrl:function Npe(n,t){return Vr(n,tt.allOf,t)},setAllOfMatcherUrl:function Lpe(n,t){return Ai(n,tt.allOf,t)},getNoneOfMatcherUrlAll:LT,addNoneOfMatcherUrl:function Hpe(n,t){return _n(n,tt.noneOf,t)},removeNoneOfMatcherUrl:function Vpe(n,t){return Vr(n,tt.noneOf,t)},setNoneOfMatcherUrl:function zpe(n,t){return Ai(n,tt.noneOf,t)},createResourceMatcherFor:BT,getResourceMatcher:zH,getResourceMatcherAll:function Gpe(n){return tl(jn(n)).filter(Ow)},removeResourceMatcher:function Jpe(n,t){const e=jn(n);let r;if("string"==typeof t)try{new URL(t),r=t}catch(a){const l=new URL(hn(e));l.hash=`#${t}`,r=l.href}else r=Po(t)?gn(t):Sc(t);const i=zH(n,new URL(r).hash.substring(1));return null===i?n:es(n,xc(e,i))},setResourceMatcher:r0},pge={addMockAcrTo:Tw,mockAcrFor:e0},gge=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uge),dge),hge),fge),pge),rV=[tt.agent];function o0(n,t,e){if(n.inaccessibleUrls.length>0)return null;const r=n.acrPolicies.filter(d=>Fw(d,t,e,n)),i=n.policies.filter(d=>Fw(d,t,e,n)),s=r.reduce((d,E)=>{const U=Object.assign({},d),W=AT(E);return W.read&&(U.controlRead=!0),W.write&&(U.controlWrite=!0),U},{read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1}),a=i.reduce((d,E)=>{const U=Object.assign({},d),W=AT(E);return W.read&&(U.read=!0),W.append&&(U.append=!0),W.write&&(U.write=!0),U},s),l=r.reduce((d,E)=>{const U=Object.assign({},d),W=DT(E);return!0===W.read&&(U.controlRead=!1),!0===W.write&&(U.controlWrite=!1),U},a);return i.reduce((d,E)=>{const U=Object.assign({},d),W=DT(E);return!0===W.read&&(U.read=!1),!0===W.append&&(U.append=!1),!0===W.write&&(U.write=!1),U},l)}function mge(n,t){return o0(n,tt.agent,t)}function yge(n){return o0(n,tt.agent,tt.PublicAgent)}function Fw(n,t,e,r){const i=Bt(n,tt.allow),o=Bt(n,tt.deny);if(i.length+o.length===0)return!1;const s=FT(n).map(c=>r.matchers.find(d=>ei(d)===c)),a=NT(n).map(c=>r.matchers.find(d=>ei(d)===c)),l=LT(n).map(c=>r.matchers.find(d=>ei(d)===c));return s.every(c=>oV(c,t,e))&&(0===a.length||a.some(c=>oV(c,t,e)))&&s.length+a.length>0&&0===l.length}function iV(n,t){const e=Bt(n,tt.allow),r=Bt(n,tt.deny);return!0===t.read&&r.includes(zr.read)||!1===t.read&&e.includes(zr.read)&&!r.includes(zr.read)||!0===t.append&&r.includes(zr.append)||!1===t.append&&e.includes(zr.append)&&!r.includes(zr.append)||!0===t.write&&r.includes(zr.write)||!1===t.write&&e.includes(zr.write)&&!r.includes(zr.write)}function oV(n,t,e){return Bt(n,t).includes(e)}function bge(n){return function _ge(n,t){if(n.inaccessibleUrls.length>0)return null;const e={};return function vge(n,t){const e=new Set;return n.matchers.forEach(r=>{Bt(r,t).filter(i=>![tt.PublicAgent,tt.CreatorAgent,tt.AuthenticatedAgent].includes(i)||t!=tt.agent).forEach(i=>e.add(i))}),e}(n,t).forEach(i=>{const o=o0(n,t,i);e[i]=o}),e}(n,tt.agent)}function sV(n,t,e,r,i){var o,s,a,l,c;if(!so(n)||t.inaccessibleUrls.length>0)return null;const d=o0(t,e,r);if(null===d)return null;const E=t.acrPolicies.filter(Gt=>Fw(Gt,e,r,t)),U=t.policies.filter(Gt=>Fw(Gt,e,r,t)),W=E.filter(Gt=>iV(Gt,{read:i.controlRead,write:i.controlWrite})),ne=U.filter(Gt=>iV(Gt,{read:i.read,append:i.append,write:i.write})),Ce=W.filter(Gt=>aV(Gt,e,r,t)),Pe=ne.filter(Gt=>aV(Gt,e,r,t)),je=o0(Object.assign(Object.assign({},t),{acrPolicies:t.acrPolicies.filter(Gt=>!Ce.includes(Gt)),policies:t.policies.filter(Gt=>!Pe.includes(Gt))}),e,r);if(null===je)return null;let at=n;Ce.forEach(Gt=>{const[er,Xr]=lV(Gt,n,t,e,r);at=Qy(at,er),at=Xr.reduce(r0,at)}),Pe.forEach(Gt=>{const[er,Xr]=lV(Gt,n,t,e,r);at=Xy(at,er),at=Xr.reduce(r0,at)});const yt=`matcher_${encodeURIComponent(`${e}_${r}`)}`;let Ct=BT(n,yt);Ct=Ai(Ct,e,r);const Vt=null!==(o=i.controlRead)&&void 0!==o?o:d.controlRead,yn=null!==(s=i.controlWrite)&&void 0!==s?s:d.controlWrite;let Bn=Ce;if(Vt!==je.controlRead||yn!==je.controlWrite){const Gt=`acr_policy_${encodeURIComponent(`${e}_${r}`)}_${Date.now()}_${Math.random()}`;let er=Sd(n,Gt);er=ET(er,{read:!0===Vt,append:!1,write:!0===yn}),er=_n(er,tt.allOf,Ct),at=Qy(at,er),at=r0(at,Ct),Bn=W}const Qn=null!==(a=i.read)&&void 0!==a?a:d.read,_r=null!==(l=i.append)&&void 0!==l?l:d.append,Qi=null!==(c=i.write)&&void 0!==c?c:d.write;let di=Pe;if(Qn!==je.read||_r!==je.append||Qi!==je.write){const Gt=`policy_${encodeURIComponent(`${e}_${r}`)}_${Date.now()}_${Math.random()}`;let er=Sd(n,Gt);er=ET(er,{read:!0===Qn,append:!0===_r,write:!0===Qi}),er=_n(er,tt.allOf,Ct),at=Xy(at,er),at=r0(at,Ct),di=ne}return Bn.forEach(Gt=>{at=Yp(at,ei(Gt))}),di.forEach(Gt=>{at=Ky(at,ei(Gt))}),at}function wge(n,t,e,r){return sV(n,t,tt.agent,e,r)}function xge(n,t,e){return sV(n,t,tt.agent,tt.PublicAgent,e)}function aV(n,t,e,r){const o=Bt(n,tt.allOf).map(d=>r.matchers.find(E=>ei(E)===d)).some(d=>HT(d,t,e)),a=Bt(n,tt.anyOf).map(d=>r.matchers.find(E=>ei(E)===d)).some(d=>HT(d,t,e)),c=Bt(n,tt.noneOf).map(d=>r.matchers.find(E=>ei(E)===d)).some(d=>HT(d,t,e));return o||a||c}function HT(n,t,e){const r=[];return rV.forEach(i=>{const o=Bt(n,i).filter(s=>s!==e||i!==t);r.push(...o)}),r.length>0}function lV(n,t,e,r,i){const o=`_copy_without_${encodeURIComponent(r)}_${i}_${Date.now()}_${Math.random()}`,s=VT(Bt(n,tt.allOf),t,e,o,r,i),a=VT(Bt(n,tt.anyOf),t,e,o,r,i),l=VT(Bt(n,tt.noneOf),t,e,o,r,i);let c=Sd(t,encodeURI(ei(n))+o);return Bt(n,tt.allow).forEach(d=>{c=_n(c,tt.allow,d)}),Bt(n,tt.deny).forEach(d=>{c=_n(c,tt.deny,d)}),s.forEach(d=>{c=_n(c,tt.allOf,d)}),a.forEach(d=>{c=_n(c,tt.anyOf,d)}),l.forEach(d=>{c=_n(c,tt.noneOf,d)}),[c,s.concat(a).concat(l)]}function VT(n,t,e,r,i,o){return n.map(s=>{const a=e.matchers.find(d=>ei(d)===s);if(void 0===a)return null;let l=BT(t,encodeURI(ei(a))+r),c=!1;return rV.forEach(d=>{Bt(a,d).forEach(E=>{d===i&&E===o||(c=!0,l=_n(l,d,E))})}),c?l:null}).filter(Nw)}function Nw(n){return null!==n}function s0(n){return zT.apply(this,arguments)}function zT(){return(zT=(0,Xe.Z)(function*(n,t=tn){const e=Su(n),r=wd(n),i=cV(e).concat(cV(r)),o=yield uV(i,t),s=KT(e,o).filter(Nw),a=KT(r,o).filter(Nw),l=new Set;s.forEach(Pe=>{dV(Pe).forEach(je=>{l.add(je)})}),a.forEach(Pe=>{dV(Pe).forEach(je=>{l.add(je)})});const c=Array.from(l),E=c.map(Pe=>WT(Pe)).filter(Pe=>!i.includes(Pe)),U=yield uV(E,t),W=Object.assign(Object.assign({},o),U),ne=KT(c,W).filter(Nw);return{inaccessibleUrls:Object.keys(W).filter(Pe=>null===W[Pe]),acrPolicies:s,policies:a,matchers:ne}})).apply(this,arguments)}function WT(n){const t=new URL(n);return t.hash="",t.href}function cV(n){const t=[];return n.forEach(e=>{const r=WT(e);t.includes(r)||t.push(r)}),t}function uV(n,t){return $T.apply(this,arguments)}function $T(){return $T=(0,Xe.Z)(function*(n,t){const e=Array.from(new Set(n)),r={};return yield Promise.all(e.map(function(){var i=(0,Xe.Z)(function*(o){try{const s=yield ia(o,t);r[o]=s}catch(s){r[o]=null}});return function(o){return i.apply(this,arguments)}}())),r}),$T.apply(this,arguments)}function KT(n,t){return n.map(e=>{const r=WT(e),i=t[r];return i?cr(i,e):null})}function dV(n){return FT(n).concat(NT(n)).concat(LT(n))}function hV(n,t){var e,r,i,o;if(n.controlRead!==n.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:null!==(e=n.read)&&void 0!==e?e:t.read,append:null!==(r=n.append)&&void 0!==r?r:t.append,write:null!==(i=n.write)&&void 0!==i?i:t.write,control:null!==(o=n.controlRead)&&void 0!==o?o:t.control}}function GT(n){return{read:n.read,write:n.write,append:n.append,controlRead:n.control,controlWrite:n.control}}function fV(n,t,e,r){return qT.apply(this,arguments)}function qT(){return(qT=(0,Xe.Z)(function*(n,t,e,r){const o=e(Sa(n,yield Cc(n,r)),t);return null===o?null:GT(o)})).apply(this,arguments)}function JT(){return(JT=(0,Xe.Z)(function*(n,t,e){const i=t(Sa(n,yield Cc(n,e)));return null===i?null:GT(i)})).apply(this,arguments)}function pV(n,t,e){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,Xe.Z)(function*(n,t,e){const i=t(Sa(n,yield Cc(n,e)));if(null===i)return null;const o={};for(const[s,a]of Object.entries(i))o[s]=GT(a);return o})).apply(this,arguments)}function og(n,t,e=tn){return fV(n,t,TD,e)}function gV(n,t,e=tn){return fV(n,t,MD,e)}function sg(n,t=tn){return function Sge(n,t,e){return JT.apply(this,arguments)}(n,ID,t)}function YT(n,t=tn){return pV(n,Lj,t)}function Cge(n,t=tn){return pV(n,Kj,t)}function mV(n,t){return XT.apply(this,arguments)}function XT(){return(XT=(0,Xe.Z)(function*(n,t){if(!ji(n))return null;const r=Sa(n,yield Cc(n,t));let i;if(_d(r))i=Afe(r);else{if(!bd(r))return null;i=Fj(r)}return Pj(r,i)})).apply(this,arguments)}function yV(n,t,e){return QT.apply(this,arguments)}function QT(){return(QT=(0,Xe.Z)(function*(n,t,e){let r=null;try{return r=yield Nj(n,t,e),Pj(n,r)}catch(i){return null}})).apply(this,arguments)}function Ege(n,t,e,r,i){return eM.apply(this,arguments)}function eM(){return(eM=(0,Xe.Z)(function*(n,t,e,r,i){const o=yield mV(n,i);if(null===o)return null;const c=r(zy(o),hV(t,e(o)));return yield yV(o,c,i)})).apply(this,arguments)}function vV(n,t,e,r,i,o){return tM.apply(this,arguments)}function tM(){return(tM=(0,Xe.Z)(function*(n,t,e,r,i,o){const s=yield mV(n,o);if(null===s)return null;const a=r(s,t),d=i(zy(s),t,hV(e,a));return yield yV(s,d,o)})).apply(this,arguments)}function nM(n,t,e){return rM.apply(this,arguments)}function rM(){return(rM=(0,Xe.Z)(function*(n,t,e,r=tn){return yield vV(n,t,e,TD,jj,r)})).apply(this,arguments)}function Age(n,t,e){return iM.apply(this,arguments)}function iM(){return(iM=(0,Xe.Z)(function*(n,t,e,r=tn){return yield vV(n,t,e,MD,Qj,r)})).apply(this,arguments)}function oM(n,t){return sM.apply(this,arguments)}function sM(){return(sM=(0,Xe.Z)(function*(n,t,e=tn){return yield Ege(n,t,ID,nH,e)})).apply(this,arguments)}const aM=[tt.agent,tt.group];function ag(n,t,e){if(n.inaccessibleUrls.length>0)return null;const r=n.acrPolicies.filter(d=>Lw(d,t,e,n)),i=n.policies.filter(d=>Lw(d,t,e,n)),s=r.reduce((d,E)=>{const U=Object.assign({},d),W=tg(E);return W.read&&(U.controlRead=!0),W.write&&(U.controlWrite=!0),U},{read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1}),a=i.reduce((d,E)=>{const U=Object.assign({},d),W=tg(E);return W.read&&(U.read=!0),W.append&&(U.append=!0),W.write&&(U.write=!0),U},s),l=r.reduce((d,E)=>{const U=Object.assign({},d),W=ng(E);return!0===W.read&&(U.controlRead=!1),!0===W.write&&(U.controlWrite=!1),U},a);return i.reduce((d,E)=>{const U=Object.assign({},d),W=ng(E);return!0===W.read&&(U.read=!1),!0===W.append&&(U.append=!1),!0===W.write&&(U.write=!1),U},l)}function kge(n,t){return ag(n,tt.agent,t)}function Dge(n,t){return ag(n,tt.group,t)}function Tge(n){return ag(n,tt.agent,tt.PublicAgent)}function Lw(n,t,e,r){const i=Bt(n,tt.allow),o=Bt(n,tt.deny);if(i.length+o.length===0)return!1;const s=Xp(n).map(c=>r.rules.find(d=>ei(d)===c)),a=Qp(n).map(c=>r.rules.find(d=>ei(d)===c)),l=xd(n).map(c=>r.rules.find(d=>ei(d)===c));return s.every(c=>bV(c,t,e))&&(0===a.length||a.some(c=>bV(c,t,e)))&&0===l.length}function _V(n,t){const e=Bt(n,tt.allow),r=Bt(n,tt.deny);return!0===t.read&&r.includes(tt.Read)||!1===t.read&&e.includes(tt.Read)&&!r.includes(tt.Read)||!0===t.append&&r.includes(tt.Append)||!1===t.append&&e.includes(tt.Append)&&!r.includes(tt.Append)||!0===t.write&&r.includes(tt.Write)||!1===t.write&&e.includes(tt.Write)&&!r.includes(tt.Write)}function bV(n,t,e){let r=!0;return aM.forEach(i=>{r&&(r=null===Ll(n,i))}),r||Bt(n,t).includes(e)}function wV(n,t){if(n.inaccessibleUrls.length>0)return null;const e={};return function Mge(n,t){const e=new Set;return n.rules.forEach(r=>{Bt(r,t).filter(i=>![tt.PublicAgent,tt.CreatorAgent,tt.AuthenticatedAgent].includes(i)||t!=tt.agent).forEach(i=>e.add(i))}),e}(n,t).forEach(i=>{const o=ag(n,t,i);e[i]=o}),e}function Ige(n){return wV(n,tt.group)}function Rge(n){return wV(n,tt.agent)}function lM(n,t,e,r,i){var o,s,a,l,c;if(!so(n)||t.inaccessibleUrls.length>0)return null;const d=ag(t,e,r);if(null===d)return null;const E=t.acrPolicies.filter(Gt=>Lw(Gt,e,r,t)),U=t.policies.filter(Gt=>Lw(Gt,e,r,t)),W=E.filter(Gt=>_V(Gt,{read:i.controlRead,write:i.controlWrite})),ne=U.filter(Gt=>_V(Gt,{read:i.read,append:i.append,write:i.write})),Ce=W.filter(Gt=>xV(Gt,e,r,t)),Pe=ne.filter(Gt=>xV(Gt,e,r,t)),je=ag(Object.assign(Object.assign({},t),{acrPolicies:t.acrPolicies.filter(Gt=>!Ce.includes(Gt)),policies:t.policies.filter(Gt=>!Pe.includes(Gt))}),e,r);if(null===je)return null;let at=n;Ce.forEach(Gt=>{const[er,Xr]=SV(Gt,n,t,e,r);at=Qy(at,er),at=Xr.reduce(Gy,at)}),Pe.forEach(Gt=>{const[er,Xr]=SV(Gt,n,t,e,r);at=Xy(at,er),at=Xr.reduce(Gy,at)});const yt=`rule_${encodeURIComponent(`${e}_${r}`)}`;let Ct=cT(n,yt);Ct=Ai(Ct,e,r);const Vt=null!==(o=i.controlRead)&&void 0!==o?o:d.controlRead,yn=null!==(s=i.controlWrite)&&void 0!==s?s:d.controlWrite;let Bn=Ce;if(Vt!==je.controlRead||yn!==je.controlWrite){const Gt=`acr_policy_${encodeURIComponent(`${e}_${r}`)}_${Date.now()}_${Math.random()}`;let er=Sd(n,Gt);er=Yy(er,{read:!0===Vt,append:!1,write:!0===yn}),er=_n(er,tt.allOf,Ct),at=Qy(at,er),at=Gy(at,Ct),Bn=W}const Qn=null!==(a=i.read)&&void 0!==a?a:d.read,_r=null!==(l=i.append)&&void 0!==l?l:d.append,Qi=null!==(c=i.write)&&void 0!==c?c:d.write;let di=Pe;if(Qn!==je.read||_r!==je.append||Qi!==je.write){const Gt=`policy_${encodeURIComponent(`${e}_${r}`)}_${Date.now()}_${Math.random()}`;let er=Sd(n,Gt);er=Yy(er,{read:!0===Qn,append:!0===_r,write:!0===Qi}),er=_n(er,tt.allOf,Ct),at=Xy(at,er),at=Gy(at,Ct),di=ne}return Bn.forEach(Gt=>{at=Yp(at,ei(Gt))}),di.forEach(Gt=>{at=Ky(at,ei(Gt))}),at}function Oge(n,t,e,r){return lM(n,t,tt.agent,e,r)}function Pge(n,t,e,r){return lM(n,t,tt.group,e,r)}function Fge(n,t,e){return lM(n,t,tt.agent,tt.PublicAgent,e)}function xV(n,t,e,r){const o=Bt(n,tt.allOf).map(d=>r.rules.find(E=>ei(E)===d)).some(d=>cM(d,t,e)),a=Bt(n,tt.anyOf).map(d=>r.rules.find(E=>ei(E)===d)).some(d=>cM(d,t,e)),c=Bt(n,tt.noneOf).map(d=>r.rules.find(E=>ei(E)===d)).some(d=>cM(d,t,e));return o||a||c}function cM(n,t,e){const r=[];return aM.forEach(i=>{const o=Bt(n,i).filter(s=>s!==e||i!==t);r.push(...o)}),r.length>0}function SV(n,t,e,r,i){const o=`_copy_without_${encodeURIComponent(r)}_${i}_${Date.now()}_${Math.random()}`,s=uM(Bt(n,tt.allOf),t,e,o,r,i),a=uM(Bt(n,tt.anyOf),t,e,o,r,i),l=uM(Bt(n,tt.noneOf),t,e,o,r,i);let c=Sd(t,encodeURI(ei(n))+o);return Bt(n,tt.allow).forEach(d=>{c=_n(c,tt.allow,d)}),Bt(n,tt.deny).forEach(d=>{c=_n(c,tt.deny,d)}),s.forEach(d=>{c=_n(c,tt.allOf,d)}),a.forEach(d=>{c=_n(c,tt.anyOf,d)}),l.forEach(d=>{c=_n(c,tt.noneOf,d)}),[c,s.concat(a).concat(l)]}function uM(n,t,e,r,i,o){return n.map(s=>{const a=e.rules.find(d=>ei(d)===s);if(void 0===a)return null;let l=cT(t,encodeURI(ei(a))+r),c=!1;return aM.forEach(d=>{Bt(a,d).forEach(E=>{d===i&&E===o||(c=!0,l=_n(l,d,E))})}),c?l:null}).filter(Bw)}function Bw(n){return null!==n}function Cd(n){return dM.apply(this,arguments)}function dM(){return(dM=(0,Xe.Z)(function*(n,t=tn){const e=Su(n),r=wd(n),i=CV(e).concat(CV(r)),o=yield EV(i,t),s=pM(e,o).filter(Bw),a=pM(r,o).filter(Bw),l=new Set;s.forEach(Pe=>{AV(Pe).forEach(je=>{l.add(je)})}),a.forEach(Pe=>{AV(Pe).forEach(je=>{l.add(je)})});const c=Array.from(l),E=c.map(Pe=>hM(Pe)).filter(Pe=>!i.includes(Pe)),U=yield EV(E,t),W=Object.assign(Object.assign({},o),U),ne=pM(c,W).filter(Bw);return{inaccessibleUrls:Object.keys(W).filter(Pe=>null===W[Pe]),acrPolicies:s,policies:a,rules:ne}})).apply(this,arguments)}function hM(n){const t=new URL(n);return t.hash="",t.href}function CV(n){const t=[];return n.forEach(e=>{const r=hM(e);t.includes(r)||t.push(r)}),t}function EV(n,t){return fM.apply(this,arguments)}function fM(){return fM=(0,Xe.Z)(function*(n,t){const e=Array.from(new Set(n)),r={};return yield Promise.all(e.map(function(){var i=(0,Xe.Z)(function*(o){try{const s=yield ia(o,t);r[o]=s}catch(s){r[o]=null}});return function(o){return i.apply(this,arguments)}}())),r}),fM.apply(this,arguments)}function pM(n,t){return n.map(e=>{const r=hM(e),i=t[r];return i?cr(i,e):null})}function AV(n){return Xp(n).concat(Qp(n)).concat(xd(n))}function Uw(n,t){return gM.apply(this,arguments)}function gM(){return(gM=(0,Xe.Z)(function*(n,t,e=tn){const r=yield ts(n,e);return so(r)?kge(yield Cd(r,e),t):ji(r)?yield og(r,t,e):null})).apply(this,arguments)}function mM(n,t,e){return yM.apply(this,arguments)}function yM(){return(yM=(0,Xe.Z)(function*(n,t,e,r=tn){const i=yield ts(n,r);if(so(i)){const s=Oge(i,yield Cd(i,r),t,e);if(s)try{return yield Bl(s,r),yield Uw(n,t,r)}catch(a){return null}return null}if(ji(i)){if(e.controlRead!=e.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${ys(i)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return yield nM(i,t,e,r),yield og(i,t,r)}return null})).apply(this,arguments)}function vM(n){return _M.apply(this,arguments)}function _M(){return(_M=(0,Xe.Z)(function*(n,t=tn){const e=yield ts(n,t);return so(e)?Rge(yield Cd(e,t)):ji(e)?yield YT(e,t):null})).apply(this,arguments)}function jw(n,t){return bM.apply(this,arguments)}function bM(){return(bM=(0,Xe.Z)(function*(n,t,e=tn){const r=yield ts(n,e);return so(r)?Dge(yield Cd(r,e),t):ji(r)?yield gV(r,t,e):null})).apply(this,arguments)}function wM(n){return xM.apply(this,arguments)}function xM(){return(xM=(0,Xe.Z)(function*(n,t=tn){const e=yield ts(n,t);return so(e)?Ige(yield Cd(e,t)):ji(e)?yield Cge(e,t):null})).apply(this,arguments)}function SM(n,t,e){return CM.apply(this,arguments)}function CM(){return(CM=(0,Xe.Z)(function*(n,t,e,r=tn){const i=yield ts(n,r);if(so(i)){const s=Pge(i,yield Cd(i,r),t,e);if(s)try{return yield Bl(s,r),jw(n,t,r)}catch(a){return null}return null}if(ji(i)){if(e.controlRead!=e.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${ys(i)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return yield Age(i,t,e,r),yield gV(i,t,r)}return null})).apply(this,arguments)}function Hw(n){return EM.apply(this,arguments)}function EM(){return(EM=(0,Xe.Z)(function*(n,t=tn){const e=yield ts(n,t);return so(e)?Tge(yield Cd(e,t)):ji(e)?yield sg(e,t):null})).apply(this,arguments)}function AM(n,t){return kM.apply(this,arguments)}function kM(){return(kM=(0,Xe.Z)(function*(n,t,e=tn){const r=yield ts(n,e);if(so(r)){const o=Fge(r,yield Cd(r,e),t);if(o)try{return yield Bl(o,e),Hw(n,e)}catch(s){return null}return null}if(ji(r)){if(t.controlRead!=t.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${ys(r)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return yield oM(r,t,e),yield sg(r,e)}return null})).apply(this,arguments)}function DM(n,t){return TM.apply(this,arguments)}function TM(){return(TM=(0,Xe.Z)(function*(n,t,e=tn,r=tn){if("agent"===t){if("string"!=typeof e)throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");return yield Uw(n,e,r)}if("group"===t){if("string"!=typeof e)throw new Error("When reading Group-specific access, the given group cannot be left undefined.");return yield jw(n,e,r)}if("public"===t){if("string"==typeof e)throw new Error(`When reading public access, no actor type should be specified (here [${e}]).`);return yield Hw(n,e)}return null})).apply(this,arguments)}function MM(n,t){return IM.apply(this,arguments)}function IM(){return(IM=(0,Xe.Z)(function*(n,t,e=tn){return"agent"===t?yield vM(n,e):"group"===t?yield wM(n,e):null})).apply(this,arguments)}function RM(n,t,e){return OM.apply(this,arguments)}function OM(){return(OM=(0,Xe.Z)(function*(n,t,e,r=tn,i=tn){if("agent"===t){if("string"!=typeof r)throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");return yield mM(n,r,e,i)}if("group"===t){if("string"!=typeof r)throw new Error("When writing Group-specific access, the given group cannot be left undefined.");return yield SM(n,r,e,i)}if("public"===t){if("string"==typeof r)throw new Error(`When writing public access, no actor type should be specified (here [${r}]).`);return yield AM(n,e,r)}return null})).apply(this,arguments)}function kV(n,t){return PM.apply(this,arguments)}function PM(){return(PM=(0,Xe.Z)(function*(n,t,e=tn){const r=yield ts(n,e);return so(r)?mge(yield s0(r,e),t):ji(r)?yield og(r,t,e):null})).apply(this,arguments)}function Nge(n,t,e){return FM.apply(this,arguments)}function FM(){return(FM=(0,Xe.Z)(function*(n,t,e,r=tn){const i=yield ts(n,r);if(so(i)){const s=wge(i,yield s0(i,r),t,e);if(s)try{return yield Bl(s,r),yield kV(n,t,r)}catch(a){return null}return null}if(ji(i)){if(e.controlRead!=e.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${ys(i)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return yield nM(i,t,e,r),yield og(i,t,r)}return null})).apply(this,arguments)}function Lge(n){return NM.apply(this,arguments)}function NM(){return(NM=(0,Xe.Z)(function*(n,t=tn){const e=yield ts(n,t);return so(e)?bge(yield s0(e,t)):ji(e)?yield YT(e,t):null})).apply(this,arguments)}function DV(n){return LM.apply(this,arguments)}function LM(){return(LM=(0,Xe.Z)(function*(n,t=tn){const e=yield ts(n,t);return so(e)?yge(yield s0(e,t)):ji(e)?yield sg(e,t):null})).apply(this,arguments)}function Bge(n,t){return BM.apply(this,arguments)}function BM(){return(BM=(0,Xe.Z)(function*(n,t,e=tn){const r=yield ts(n,e);if(so(r)){const o=xge(r,yield s0(r,e),t);if(o)try{return yield Bl(o,e),DV(n,e)}catch(s){return null}return null}if(ji(r)){if(t.controlRead!=t.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${ys(r)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return yield oM(r,t,e),yield sg(r,e)}return null})).apply(this,arguments)}function TV(n,t){return UM.apply(this,arguments)}function UM(){return(UM=(0,Xe.Z)(function*(n,t){return"string"==typeof n.internal_resourceInfo.aclUrl?yield Vs(n.internal_resourceInfo.aclUrl,t):null})).apply(this,arguments)}function MV(n,t,e){const r=bu(t,Gn.allOf).map(c=>cr(jn(n),c)).filter(c=>null!==c),i=r.every(c=>bu(c,Gn.agent).includes(e)),o=bu(t,Gn.anyOf).map(c=>cr(jn(n),c)).filter(c=>null!==c),s=o.some(c=>bu(c,Gn.agent).includes(e)),a=bu(t,Gn.noneOf).map(c=>cr(jn(n),c)).filter(c=>null!==c),l=a.some(c=>bu(c,Gn.agent).includes(e));return r.length+o.length>0&&(0===r.length||i)&&(0===o.length||s)&&(0===a.length||!l)}function IV(n,t,e){const r=function Uge(n){return Pw(n,Gn.allow)}(n),i=function jge(n){return Pw(n,Gn.deny)}(n);return"control"===e?{read:t.read,append:t.append,write:t.write,controlRead:(t.controlRead||r.read)&&!i.read,controlWrite:(t.controlWrite||r.write)&&!i.write}:{read:(t.read||r.read)&&!i.read,append:(t.append||r.append)&&!i.append,write:(t.write||r.write)&&!i.write,controlRead:t.controlRead,controlWrite:t.controlWrite}}function Vw(n,t){return jM.apply(this,arguments)}function jM(){return(jM=(0,Xe.Z)(function*(n,t){let e={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1};return VH(n).map(o=>cr(jn(n),o)).filter(o=>null!==o).map(o=>{MV(n,o,t)&&(e=IV(o,e,"resource"))}),jH(n).map(o=>cr(jn(n),o)).filter(o=>null!==o).map(o=>{MV(n,o,t)&&(e=IV(o,e,"control"))}),e})).apply(this,arguments)}function Hge(n){const t=n.internal_resourceInfo.linkedResources[Gn.accessControl];return Array.isArray(t)&&1===t.length?t[0]:null}function Vge(n,t){return HM.apply(this,arguments)}function HM(){return(HM=(0,Xe.Z)(function*(n,t){const e=Hge(n);if(null!==e)return e;const r=yield TV(n,t);if(null===r)return null;const i=Hp(r).type;return Array.isArray(i)&&i.includes(Gn.AccessControlResource)?hn(r):null})).apply(this,arguments)}function a0(n,t){return VM.apply(this,arguments)}function VM(){return(VM=(0,Xe.Z)(function*(n,t){const e=yield Vge(n,t);if(null===e)return null;let r;try{r=yield ia(e,t)}catch(i){return null}return Object.assign(Object.assign({},n),{internal_acp:{acr:Object.assign(Object.assign({},r),{accessTo:hn(n)})}})})).apply(this,arguments)}function RV(n,t,e){return zM.apply(this,arguments)}function zM(){return(zM=(0,Xe.Z)(function*(n,t,e){const r=yield Vs(n,e),i=yield a0(r,e);return null===i?og(r,t,e):Vw(i,t)})).apply(this,arguments)}function zge(n){return Array.from(new Set(tl(jn(n)).map(t=>bu(t,Gn.agent)).reduce((t,e)=>t.concat(e),[])))}function Wge(n){return WM.apply(this,arguments)}function WM(){return WM=(0,Xe.Z)(function*(n){return(yield Promise.all(zge(n).map(function(){var t=(0,Xe.Z)(function*(e){return{[e]:yield Vw(n,e)}});return function(e){return t.apply(this,arguments)}}()))).reduce((t,e)=>Object.assign(Object.assign({},t),e),{})}),WM.apply(this,arguments)}function $ge(n,t){return $M.apply(this,arguments)}function $M(){return($M=(0,Xe.Z)(function*(n,t){const e=yield Vs(n,t),r=yield a0(e,t);return null===r?YT(e,t):Wge(r)})).apply(this,arguments)}function Kge(n){return KM.apply(this,arguments)}function KM(){return(KM=(0,Xe.Z)(function*(n){return Vw(n,Gn.PublicAgent)})).apply(this,arguments)}function OV(n,t){return GM.apply(this,arguments)}function GM(){return(GM=(0,Xe.Z)(function*(n,t){const e=yield Vs(n,t),r=yield a0(e,t);return null===r?sg(e,t):Kge(r)})).apply(this,arguments)}function qM(n,t,e){return PT(n,t).concat("AgentMatcher").concat(e.charAt(0).toUpperCase()+e.slice(1)).concat("Policy")}function PV(n,t,e){return qM(n,t,e).concat("Matcher")}const FV=Gn.anyOf;function l0(n,t,e,r,i){var o;const s=PV(n,e,r),a=function qge(n,t,e){const r=qM(n,t,e),i=PV(n,t,e);let o=cr(jn(n),r);return o||(n=function Gge(n,t,e){const r=qM(n,t,e);return r.includes("Acr")?LH(n,r):BH(n,r)}(n,t,e),o=Fo({url:r}),o=eV(o,{[e]:!0},Gn.allow)),Bt(o,FV).includes(i)?n:(o=nl(o).addUrl(FV,i).build(),il(n,o))}(n,e,r),l=null!==(o=cr(jn(a),s))&&void 0!==o?o:Fo({url:s});return il(a,"add"===i?WH(l,t):$H(l,t))}function NV(n,t,e){return JM.apply(this,arguments)}function JM(){return(JM=(0,Xe.Z)(function*(n,t,e){const r=yield Vw(n,t);return"boolean"==typeof e.read&&r.read!==e.read&&(n=l0(n,t,ig,"read",e.read?"add":"remove")),"boolean"==typeof e.append&&r.append!==e.append&&(n=l0(n,t,ig,"append",e.append?"add":"remove")),"boolean"==typeof e.write&&r.write!==e.write&&(n=l0(n,t,ig,"write",e.write?"add":"remove")),"boolean"==typeof e.controlRead&&r.controlRead!==e.controlRead&&(n=l0(n,t,t0,"controlRead",e.controlRead?"add":"remove")),"boolean"==typeof e.controlWrite&&r.controlWrite!==e.controlWrite&&(n=l0(n,t,t0,"controlWrite",e.controlWrite?"add":"remove")),n})).apply(this,arguments)}function Jge(n,t,e,r){return ZM.apply(this,arguments)}function ZM(){return(ZM=(0,Xe.Z)(function*(n,t,e,r){const i=yield Vs(n,r),o=yield a0(i,r);if(null===o)return yield nM(i,t,e,r),og(i,t,r);try{return yield Bl(yield NV(o,t,e),r),yield RV(n,t,r)}catch(s){return null}})).apply(this,arguments)}function Zge(n,t){return YM.apply(this,arguments)}function YM(){return(YM=(0,Xe.Z)(function*(n,t){return NV(n,Gn.PublicAgent,t)})).apply(this,arguments)}function Yge(n,t,e){return XM.apply(this,arguments)}function XM(){return(XM=(0,Xe.Z)(function*(n,t,e){const r=yield Vs(n,e),i=yield a0(r,e);if(null===i)return yield oM(r,t,e),sg(r,e);try{return yield Bl(yield Zge(i,t),e),yield OV(n,e)}catch(o){return null}})).apply(this,arguments)}let QM=(()=>{class n{constructor(){return k}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zw=(()=>{class n{constructor(e,r){this.authService=e,this.solidClientService=r,this.cachedUserName=null,this.cachedPodUrl=null}getUserName(){var e=this;return(0,Xe.Z)(function*(){if(e.cachedUserName)return e.cachedUserName;const r=e.solidClientService.getThing(yield e.getProfileDataset(),yield e.authService.getWebId());if(null===r)throw new Error("Could not retrieve profile");const i=e.solidClientService.getStringNoLocale(r,O6.name);if(null===i)throw new cU(O6.name);return e.cachedUserName=i,i})()}getPodUrl(){var e=this;return(0,Xe.Z)(function*(){if(e.cachedPodUrl)return e.cachedPodUrl;const r=yield e.solidClientService.getPodUrlAll(yield e.authService.getWebId());if(!r.length)throw new cU("No pod is associated with your profile. Please add one to use this application");return e.cachedPodUrl=r[0],e.cachedPodUrl})()}getProfileDataset(){var e=this;return(0,Xe.Z)(function*(){return e.solidClientService.getSolidDataset(yield e.authService.getWebId())})()}}return n.\u0275fac=function(e){return new(e||n)(lt(Rl),lt(QM))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ww extends Zi{constructor(t,e){super("NotFoundException",t,"File not found",e)}}class Ed extends Zi{constructor(t,e){super("UnknownException",t,"Unknown Exception",e)}}const Ac=n=>t=>{throw t instanceof Zi?t.title=n:t=new Ed(n,{cause:t}),t};class c0 extends Zi{constructor(t,e){super("KeyNotFoundException",t,"Encryption key not found",e)}}class Xge extends Zi{constructor(t,e){super("InvalidKeystoreException",t,"The keystore is invalid",e)}}class Gh{constructor(t,e,r,i){this.keystoreUrl=t,this.folderRoot=e,this.storage=r,this.directoryService=i,this.keys={}}handlesKeyForUrl(t){return this.directoryService.isKeystoreForResource(this.keystoreUrl,t)?Promise.resolve(t.startsWith(this.folderRoot)):Promise.resolve(!1)}getKey(t){var e=this;return(0,Xe.Z)(function*(){var r;if(!e.directoryService.isKeystoreForResource(e.keystoreUrl,t))throw new c0(`Keystore ${e.keystoreUrl} does not manage keys for ${t}`);return null!==(r=e.getCachedKey(t))&&void 0!==r?r:e.getRemoteKey(t)})()}getKeysAll(){var t=this;return(0,Xe.Z)(function*(){yield t.loadKeys();for(const e of Object.keys(t.keys))if(!t.directoryService.isKeystoreForResource(t.keystoreUrl,e))throw new Xge(`The keystore ${t.keystoreUrl} contains a key which should not be there: ${e}`);return Object.assign({},t.keys)})()}addKey(t,e){var r=this;return(0,Xe.Z)(function*(){yield r.loadKeys(),r.keys[t]=e,yield r.saveKeys()})()}addKeys(t){var e=this;return(0,Xe.Z)(function*(){yield e.loadKeys(),e.keys=Object.assign(Object.assign({},e.keys),t),yield e.saveKeys()})()}getCachedKey(t){return this.keys[t]}getRemoteKey(t){var e=this;return(0,Xe.Z)(function*(){if(yield e.loadKeys(),!e.keys[t])throw new c0(`Could not find key for ${t}`);return e.keys[t]})()}loadKeys(){var t=this;return(0,Xe.Z)(function*(){try{const e=yield t.storage.loadSecure(t.keystoreUrl),r=JSON.parse(e);t.keys=r.keys}catch(e){e instanceof Ww?t.keys={}:Ac(`Could not load keys for ${t.folderRoot}`)(e)}})()}saveKeys(){var t=this;return(0,Xe.Z)(function*(){const e={keys:t.keys};yield t.storage.saveSecure(t.keystoreUrl,JSON.stringify(e))})()}getStorage(){return this.storage}serializeMetadata(){return JSON.stringify({url:this.keystoreUrl,root:this.folderRoot})}getKeystoreType(){return"folder"}getFolderUrl(){return this.folderRoot}getStorageUrl(){return this.keystoreUrl}static deserialize(t,e,r){const i=JSON.parse(t);return new Gh(i.url,i.root,e,r)}}class u0{constructor(t,e){this.storage=t,this.keystoreUrl=e,this.keys={}}handlesKeyForUrl(t){var e=this;return(0,Xe.Z)(function*(){return e.keys[t]||(yield e.loadKeys()),e.keys.hasOwnProperty(t)})()}getKey(t){var e=this;return(0,Xe.Z)(function*(){var r;return null!==(r=e.keys[t])&&void 0!==r?r:e.getRemoteKey(t)})()}getKeysAll(){var t=this;return(0,Xe.Z)(function*(){return yield t.loadKeys(),Object.assign({},t.keys)})()}addKey(t,e){var r=this;return(0,Xe.Z)(function*(){yield r.loadKeys(),r.keys[t]=e,yield r.saveKeys()})()}addKeys(t){var e=this;return(0,Xe.Z)(function*(){yield e.loadKeys(),e.keys=Object.assign(Object.assign({},e.keys),t),yield e.saveKeys()})()}getRemoteKey(t){var e=this;return(0,Xe.Z)(function*(){if(yield e.loadKeys(),!e.keys[t])throw new c0(`Could not find key for ${t}`);return e.keys[t]})()}loadKeys(){var t=this;return(0,Xe.Z)(function*(){try{const e=yield t.storage.loadSecure(t.keystoreUrl),r=JSON.parse(e);t.keys=r.keys}catch(e){e instanceof Ww?t.keys={}:Ac(`Could not load keys for ${t.keystoreUrl}`)(e)}})()}saveKeys(){var t=this;return(0,Xe.Z)(function*(){const e={keys:t.keys};yield t.storage.saveSecure(t.keystoreUrl,JSON.stringify(e))})()}getStorage(){return this.storage}getStorageUrl(){return this.keystoreUrl}serializeMetadata(){return JSON.stringify({url:this.keystoreUrl})}static deserialize(t,e){const r=JSON.parse(t);return new u0(e,r.url)}getKeystoreType(){return"sharedFile"}}class Qge extends Zi{constructor(t,e){super("KeystoreNotFoundException",t,"Cannot find encryption keystore",e)}}class d0 extends Gh{static deserialize(t,e,r){const i=JSON.parse(t);return new d0(i.url,i.root,e,r)}getKeystoreType(){return"sharedFolder"}}class $w extends Zi{constructor(t,e){super("WrongDecriptionKey",t,"Wrong Decription Key",e)}}var Cu=F(7206);class eme extends Zi{constructor(t,e){super("EncryptionException",t,"Encryption Exception",e)}}class tme extends Zi{constructor(t,e){super("InvalidContentException",t,"Invalid content",e)}}let qh=(()=>{class n{constructor(){this.fetch=window.fetch.bind(window)}generateNewKey(){const e=Cu.lib.WordArray.random(16),r=Cu.lib.WordArray.random(32);return Cu.PBKDF2(r,e,{keySize:8}).toString()}encryptString(e,r){if(""==e)throw new eme("Cant encrypt empty string");return Cu.AES.encrypt(e,r).toString()}decryptString(e,r){try{if(""==Cu.AES.decrypt(e,r).toString(Cu.enc.Utf8))throw new $w("Wrong Decription Key");return Cu.AES.decrypt(e,r).toString(Cu.enc.Utf8)}catch(i){throw"Malformed UTF-8 data"==i.message?new $w("Wrong Decription Key"):i}}encryptBlob(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.blobToDataURL(e);return i.encryptString(o,r)})()}decryptAsBlob(e,r){var i=this;return(0,Xe.Z)(function*(){try{const o=i.decryptString(e,r);return i.dataURLtoBlob(o)}catch(o){throw"Malformed UTF-8 data"==o.message?new $w("Wrong Decription Key"):o}})()}SHA256(e){return Cu.SHA256(e).toString()}SHA256Salted(e){return this.SHA256(e+"1205sOlIDCryptPADsalt1502")}blobToDataURL(e){if(0===e.size)return Promise.resolve(`data:${e.type};base64,`);const r=new FileReader;return new Promise(i=>{r.onload=()=>i(r.result),r.readAsDataURL(e)})}dataURLtoBlob(e){if(!e.startsWith("data:"))throw new tme("Encrypted file is in unexpected format");return this.fetch(e).then(r=>r.blob())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Jh(n,t){const e="object"==typeof t;return new Promise((r,i)=>{const o=new he({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{e?r(t.defaultValue):i(new Zm)}});n.subscribe(o)})}function nme(n,t){}class eI{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const rme={dialogContainer:yc("dialogContainer",[Xo("void, exit",Yr({opacity:0,transform:"scale(0.7)"})),Xo("enter",Yr({transform:"none"})),Us("* => enter",D8([ea("150ms cubic-bezier(0, 0, 0.2, 1)",Yr({transform:"none",opacity:1})),lA("@*",aA(),{optional:!0})])),Us("* => void, * => exit",D8([ea("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Yr({opacity:0})),lA("@*",aA(),{optional:!0})]))])};let ime=(()=>{class n extends fk{constructor(e,r,i,o,s,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=s,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new Mn,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(d)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=JE())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(r)}_focusByCssSelector(e,r){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,r)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const r=JE(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,r=JE();return e===r||e.contains(r)}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Noe),xe(Ni),xe(zn,8),xe(eI),xe(b8),xe(Vn),xe(sd))},n.\u0275dir=bt({type:n,viewQuery:function(e,r){if(1&e&&Zr(pk,7),2&e){let i;un(i=dn())&&(r._portalOutlet=i.first)}},features:[Ht]}),n})(),ome=(()=>{class n extends ime{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:r}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:e,totalTime:r}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275cmp=Jt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,r){1&e&&bC("@dialogContainer.start",function(o){return r._onAnimationStart(o)})("@dialogContainer.done",function(o){return r._onAnimationDone(o)}),2&e&&(td("id",r._id),tr("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),r_("@dialogContainer",r._state))},features:[Ht],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,r){1&e&&vt(0,nme,0,0,"ng-template",0)},directives:[pk],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[rme.dialogContainer]}}),n})(),sme=0;class ol{constructor(t,e,r="mat-dialog-"+sme++){this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Ne,this._afterClosed=new Ne,this._beforeClosed=new Ne,this._state=0,e._id=r,e._animationStateChanged.pipe(si(i=>"opened"===i.state),ke(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(si(i=>"closed"===i.state),ke(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(si(i=>27===i.keyCode&&!this.disableClose&&!mc(i))).subscribe(i=>{i.preventDefault(),tI(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():tI(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(si(e=>"closing"===e.state),ke(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function tI(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const kc=new Ot("MatDialogData"),ame=new Ot("mat-dialog-default-options"),LV=new Ot("mat-dialog-scroll-strategy"),cme={provide:LV,deps:[_c],useFactory:function lme(n){return()=>n.scrollStrategies.block()}};let ume=(()=>{class n{constructor(e,r,i,o,s,a,l,c,d,E){this._overlay=e,this._injector=r,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ne,this._afterOpenedAtThisLevel=new Ne,this._ariaHiddenElements=new Map,this.afterAllClosed=F_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Qs(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,r){r=function dme(n,t){return Object.assign(Object.assign({},t),n)}(r,this._defaultOptions||new eI),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),o=this._attachDialogContainer(i,r),s=this._attachDialogContent(e,o,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),o._initializeWithAttachedContent(),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const r=this._getOverlayConfig(e);return this._overlay.create(r)}_getOverlayConfig(e){const r=new jb({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachDialogContainer(e,r){const o=Ci.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:eI,useValue:r}]}),s=new hk(this._dialogContainerType,r.viewContainerRef,o,r.componentFactoryResolver);return e.attach(s).instance}_attachDialogContent(e,r,i,o){const s=new this._dialogRefConstructor(i,r,o.id);if(e instanceof Pi)r.attachTemplatePortal(new Cy(e,null,{$implicit:o.data,dialogRef:s}));else{const a=this._createInjector(o,s,r),l=r.attachComponentPortal(new hk(e,o.viewContainerRef,a,o.componentFactoryResolver));s.componentInstance=l.instance}return s.updateSize(o.width,o.height).updatePosition(o.position),s}_createInjector(e,r,i){const o=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:r}];return e.direction&&(!o||!o.get(id,null,Cn.Optional))&&s.push({provide:id,useValue:{value:e.direction,change:An()}}),Ci.create({parent:o||this._injector,providers:s})}_removeOpenDialog(e){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,o)=>{i?o.setAttribute("aria-hidden",i):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const r=e.parentElement.children;for(let i=r.length-1;i>-1;i--){let o=r[i];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let r=e.length;for(;r--;)e[r].close()}}return n.\u0275fac=function(e){km()},n.\u0275dir=bt({type:n}),n})(),Zh=(()=>{class n extends ume{constructor(e,r,i,o,s,a,l,c){super(e,r,o,a,l,s,ol,ome,kc,c)}}return n.\u0275fac=function(e){return new(e||n)(lt(_c),lt(Ci),lt(Wm,8),lt(ame,8),lt(LV),lt(n,12),lt(yk),lt(Qa,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),hme=0,BV=(()=>{class n{constructor(e,r,i){this.dialogRef=e,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=UV(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const r=e._matDialogClose||e._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(e){tI(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(e){return new(e||n)(xe(ol,8),xe(vn),xe(Zh))},n.\u0275dir=bt({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,r){1&e&&At("click",function(o){return r._onButtonClick(o)}),2&e&&tr("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Si]}),n})(),Eu=(()=>{class n{constructor(e,r,i){this._dialogRef=e,this._elementRef=r,this._dialog=i,this.id="mat-dialog-title-"+hme++}ngOnInit(){this._dialogRef||(this._dialogRef=UV(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(e){return new(e||n)(xe(ol,8),xe(vn),xe(Zh))},n.\u0275dir=bt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,r){2&e&&td("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),Ad=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),Au=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function UV(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(r=>r.id===e.id):null}let jV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[Zh,cme],imports:[[Ey,gk,ir],ir]}),n})();class HV extends Zi{constructor(t,e){super("UserActionAbortedException",t,"User Action Aborted",e)}}let fme=(()=>{class n{constructor(e,r,i){this.dialogRef=e,this.mpwd=r,this.mpwdConfirm=i}onNoClick(){throw this.dialogRef.close(),new HV("Master password not set")}validate(){return!!this.mpwd&&this.mpwd==this.mpwdConfirm}}return n.\u0275fac=function(e){return new(e||n)(xe(ol),xe(kc),xe(kc))},n.\u0275cmp=Jt({type:n,selectors:[["app-set-master-password"]],decls:18,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["type","password","data-cy","master-password-input","matInput","",3,"ngModel","ngModelChange"],["type","password","data-cy","master-password-input-confirm","matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","disabled"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Master Password"),Be(),Le(2,"div",1)(3,"p"),nt(4," Set your Master Password, your data can only be decrypted with this password "),Be(),Le(5,"mat-form-field",2)(6,"mat-label"),nt(7,"Master Password"),Be(),Le(8,"input",3),At("ngModelChange",function(o){return r.mpwd=o}),Be()(),Le(9,"mat-form-field",2)(10,"mat-label"),nt(11,"Confirm Master Password"),Be(),Le(12,"input",4),At("ngModelChange",function(o){return r.mpwdConfirm=o}),Be()()(),Le(13,"div",5)(14,"button",6),At("click",function(){return r.onNoClick()}),nt(15,"No Thanks"),Be(),Le(16,"button",7),nt(17," Ok "),Be()()),2&e&&(it(8),ut("ngModel",r.mpwd),it(4),ut("ngModel",r.mpwdConfirm),it(4),ut("mat-dialog-close",r.mpwd)("disabled",!r.validate()))},directives:[Eu,Ad,Mh,mu,Ih,xa,ta,Pp,Au,Qo,BV],styles:[".mat-form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})(),pme=(()=>{class n{constructor(e,r){this.dialogRef=e,this.data=r}onNoClick(){throw this.dialogRef.close(),new HV("Decryption aborted")}}return n.\u0275fac=function(e){return new(e||n)(xe(ol),xe(kc))},n.\u0275cmp=Jt({type:n,selectors:[["app-enter-master-password"]],decls:14,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["type","password","data-cy","master-password-input","matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Master Password"),Be(),Le(2,"div",1)(3,"p"),nt(4,' Enter your Master Password, your data can only be decrypted with this password" '),Be(),Le(5,"mat-form-field",2)(6,"mat-label"),nt(7,"Master Password"),Be(),Le(8,"input",3),At("ngModelChange",function(o){return r.data=o}),Be()()(),Le(9,"div",4)(10,"button",5),At("click",function(){return r.onNoClick()}),nt(11,"No Thanks"),Be(),Le(12,"button",6),nt(13,"Ok"),Be()()),2&e&&(it(8),ut("ngModel",r.data),it(4),ut("mat-dialog-close",r.data))},directives:[Eu,Ad,Mh,mu,Ih,xa,ta,Pp,Au,Qo,BV],styles:[""]}),n})();class gme extends Zi{constructor(t,e){super("WrongMasterPasswordException",t,"Wrong master password",e)}}let VV=(()=>{class n{get keys(){const e=localStorage.getItem(n.USER_KEYS_KEY);return null==e?[]:JSON.parse(e)}set keys(e){localStorage.setItem(n.USER_KEYS_KEY,JSON.stringify(e))}get length(){return this.keys.length}clear(){const e=this.keys;for(const r of e)localStorage.removeItem(r);this.keys=[],localStorage.removeItem(n.USER_KEYS_KEY)}getItem(e){return this.keys.includes(e)?localStorage.getItem(e):null}key(e){return e<this.keys.length?this.keys[e]:null}removeItem(e){this.keys.includes(e)&&(this.keys=this.keys.filter(i=>i!=e),localStorage.removeItem(e))}setItem(e,r){if(!this.keys.includes(e)){const i=this.keys;i.push(e),this.keys=i}localStorage.setItem(e,r)}}return n.USER_KEYS_KEY="USER_STORAGE_KEYS",n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zV=(()=>{class n{constructor(e,r,i){this.encryptionService=e,this.dialog=r,this.userLocalStorage=i,this.masterPasswordHashKey="masterPasswordHash"}setupMasterPassword(){var e=this;return(0,Xe.Z)(function*(){if(e.checkMasterPasswordNotSet()){const r=yield e.openSetMasterPasswordDialog();r&&(yield e.setMasterPassword(r))}})()}setMasterPassword(e){var r=this;return(0,Xe.Z)(function*(){e&&r.userLocalStorage.setItem(r.masterPasswordHashKey,r.encryptionService.SHA256Salted(e))})()}clearMasterPassword(){this.userLocalStorage.removeItem(this.masterPasswordHashKey)}getMasterPassword(){var e=this;return(0,Xe.Z)(function*(){e.userLocalStorage.getItem(e.masterPasswordHashKey)||e.setMasterPassword(yield e.openMasterPasswordDialog());const r=e.userLocalStorage.getItem(e.masterPasswordHashKey);if(!r)throw new gme("Master password not set");return r})()}openMasterPasswordDialog(){var e=this;return(0,Xe.Z)(function*(){const r=e.dialog.open(pme,{});return yield Jh(r.afterClosed())})()}openSetMasterPasswordDialog(){var e=this;return(0,Xe.Z)(function*(){const r=e.dialog.open(fme,{});return yield Jh(r.afterClosed())})()}checkMasterPasswordNotSet(){return!this.userLocalStorage.getItem(this.masterPasswordHashKey)}}return n.\u0275fac=function(e){return new(e||n)(lt(qh),lt(Zh),lt(VV))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mme extends Zi{constructor(t,e){super("AlreadyExistsException",t,"File already exists",e)}}class yme extends Zi{constructor(t,e){super("InvalidUrlException",t,"Invalid Url",e)}}class Kw extends Zi{constructor(t,e){super("PermissionException",t,"Permission denied",e)}}var vme=F(9365);class _me extends Zi{constructor(t,e){super("SolidPodException",t,"Server returned 500",e)}}let Ca=(()=>{class n{constructor(e,r){this.solidClientService=e,this.authService=r}readFile(e){var r=this;return(0,Xe.Z)(function*(){try{return yield r.solidClientService.getFile(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)})}catch(i){r.convertError(i)}})()}writeFile(e,r){var i=this;return(0,Xe.Z)(function*(){r=r.replace(/ /g,"");try{return yield i.solidClientService.overwriteFile(r,e,{contentType:e.type||"text/plain",fetch:i.authService.authenticatedFetch.bind(i.authService)})}catch(o){i.convertError(o)}})()}writeContainer(e){var r=this;return(0,Xe.Z)(function*(){e=e.replace(/ /g,""),r.isContainer(e)||(e+="/");try{return yield r.solidClientService.createContainerAt(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)})}catch(i){r.convertError(i)}})()}getContainer(e){var r=this;return(0,Xe.Z)(function*(){return r.solidClientService.getSolidDataset(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)}).catch(i=>r.convertError(i))})()}resourceExists(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.authService.authenticatedFetch(e,{method:"HEAD"});if(404===i.status)return!1;if(!1===i.ok)throw r.convertError(new Oo(`Could not check if ${e} exists`,i));return!0})()}ensureContainerExists(e){var r=this;return(0,Xe.Z)(function*(){return!(yield r.resourceExists(e))&&(yield r.writeContainer(e).catch(Ac(`Could not create directory ${e}`)),!0)})()}getContainerContent(e){var r=this;return(0,Xe.Z)(function*(){try{const i=yield r.getContainer(e);return r.solidClientService.getContainedResourceUrlAll(i)}catch(i){r.convertError(i)}})()}isContainer(e){return this.solidClientService.isContainer(e)}guessContentType(e){return vme.getType(e)}deleteFolder(e){var r=this;return(0,Xe.Z)(function*(){try{const i=yield r.getContainerContent(e);for(const o of i)r.isContainer(o)?yield r.deleteFolder(o):yield r.deleteFile(o);yield r.solidClientService.deleteContainer(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)})}catch(i){r.convertError(i)}})()}deleteFile(e){var r=this;return(0,Xe.Z)(function*(){try{yield r.solidClientService.deleteFile(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)})}catch(i){r.convertError(i)}})()}traverseContainerContentsRecursively(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.getContainerContent(e),s=o.filter(l=>i.isContainer(l)),a=o.filter(l=>!i.isContainer(l));yield Promise.all([...a.map(l=>r(l)),...s.map(l=>r(l)),...s.map(l=>i.traverseContainerContentsRecursively(l,r))])})()}addCurrentUserToGroup(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.authService.getWebId(),o=`\n@prefix solid: <http://www.w3.org/ns/solid/terms#>.\n@prefix vcard: <http://www.w3.org/2006/vcard/ns#>.\n\n_:addAccess a solid:InsertDeletePatch;\n  solid:inserts { <${e}> vcard:hasMember <${i}>. }.\n`;yield r.authService.authenticatedFetch(e,{method:"PATCH",headers:{"content-type":"text/n3"},body:o})})()}convertError(e){if(e instanceof Zi)throw e;if(e instanceof TypeError)throw new yme("the given url is not valid",{cause:e});if(e instanceof Oo)switch(e.statusCode){case 401:case 403:throw new Kw(`You do not have permissions for ${e.response.url}`,{cause:e});case 404:throw new Ww(`Could not find ${e.response.url}`,{cause:e});case 405:throw new mme("A file or folder of that name already exists and cannot be overwritten",{cause:e});case 500:throw new _me("your solid provider returned an error, this might not be our fault",{cause:e})}throw new Ed("an unknown error appeared",{cause:e})}isHiddenFile(e){e.endsWith("/")&&(e=e.slice(0,e.length-1));const r=e.split("/");return!!r[r.length-1].startsWith(".")}}return n.\u0275fac=function(e){return new(e||n)(lt(QM),lt(Rl))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WV=(()=>{class n{constructor(e,r){this.encryptionService=e,this.fileService=r}createSecureStorage(e){return{loadSecure:r=>this.loadKeystore(r,e),saveSecure:(r,i)=>this.saveKeystore(r,i,e),serializeMetadata:()=>JSON.stringify({encryptionKey:e}),getEncryptionKey:()=>e}}deserializeSecureStorage(e){const{encryptionKey:r}=JSON.parse(e);return this.createSecureStorage(r)}saveKeystore(e,r,i){var o=this;return(0,Xe.Z)(function*(){const s=o.encryptionService.encryptString(r,i);yield o.fileService.writeFile(new Blob([s],{type:"text/plain"}),e)})()}loadKeystore(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.fileService.readFile(e).then(s=>s.text());try{return i.encryptionService.decryptString(o,r)}catch(s){throw new Ed(`Could not decrypt keystore ${e}`)}})()}}return n.\u0275fac=function(e){return new(e||n)(lt(qh),lt(Ca))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kd=(()=>{class n{constructor(e){this.profileService=e,this.dirStorage="solidcryptpad/",this.dirMetadata="solidcryptpad-data/",this.dirKeystores=this.dirMetadata+"keystores/",this.dirGroups=this.dirMetadata+"groups/",this.dirSharing=this.dirMetadata+"sharing/",this.encryptedDirectories=[this.dirStorage,this.dirSharing]}getRootDirectory(){var e=this;return(0,Xe.Z)(function*(){return e.profileService.getPodUrl()})()}getDefaultStorageDirectory(){var e=this;return(0,Xe.Z)(function*(){return(yield e.getRootDirectory())+e.dirStorage})()}getMetadataDirectory(){var e=this;return(0,Xe.Z)(function*(){return(yield e.getRootDirectory())+e.dirMetadata})()}getKeystoresDirectory(){var e=this;return(0,Xe.Z)(function*(){return(yield e.getRootDirectory())+e.dirKeystores})()}getSharingDirectory(){var e=this;return(0,Xe.Z)(function*(){return(yield e.getRootDirectory())+e.dirSharing})()}getGroupsDirectory(){var e=this;return(0,Xe.Z)(function*(){return(yield e.getRootDirectory())+e.dirGroups})()}isInEncryptedDirectory(e){return this.encryptedDirectories.some(r=>e.includes(`/${r}`))}isKeystoreForResource(e,r){const o=this.getRootFromResource(r)+this.dirKeystores;return e.startsWith(o)}getRootFromResource(e){const r=this.encryptedDirectories.find(i=>e.includes(`/${i}`));if(!r)throw new Ed(`Expected ${e} to be stored with solidcryptpad, but it wasn't`);return e.substring(0,e.indexOf(`/${r}`))+"/"}}return n.\u0275fac=function(e){return new(e||n)(lt(zw))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lg=(()=>{class n{constructor(e,r,i,o,s){this.encryptionService=e,this.masterPasswordService=r,this.fileService=i,this.keystoreStorageService=o,this.directoryService=s}getKeystores(){var e=this;return(0,Xe.Z)(function*(){return yield e.loadKeystores(),e.keystores})()}loadKeystores(){var e=this;return(0,Xe.Z)(function*(){try{yield e.ensureKeystoresFolderSetup();const r=yield e.fetchSerializedKeystoresMetadata();e.keystores=e.parseSerializedKeystoresMetadata(r)}catch(r){if(!(r instanceof $w))throw Ac("Could not load information about encryption keys")(r);e.masterPasswordService.clearMasterPassword(),yield e.loadKeystores()}})()}fetchSerializedKeystoresMetadata(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.masterPasswordService.getMasterPassword(),i=yield e.getKeystoresMetadataUrl(),o=yield e.fileService.readFile(i).then(l=>l.text()),s=e.encryptionService.decryptString(o,r);return JSON.parse(s)})()}parseSerializedKeystoresMetadata(e){return e.map(({type:r,keystoreSerialized:i,storageSerialized:o})=>{const s=this.keystoreStorageService.deserializeSecureStorage(o);return this.deserializeKeystore(i,r,s)})}saveKeystoresMetadata(){var e=this;return(0,Xe.Z)(function*(){if(!e.keystores)return;const r=yield e.masterPasswordService.getMasterPassword(),i=yield e.getKeystoresMetadataUrl(),o=e.keystores.map(e.serializeKeystore),s=JSON.stringify(o),a=e.encryptionService.encryptString(s,r);yield e.fileService.writeFile(new Blob([a],{type:"text/plain"}),i)})()}serializeKeystore(e){return{type:e.getKeystoreType(),keystoreSerialized:e.serializeMetadata(),storageSerialized:e.getStorage().serializeMetadata()}}deserializeKeystore(e,r,i){switch(r){case"folder":return Gh.deserialize(e,i,this.directoryService);case"sharedFile":return u0.deserialize(e,i);case"sharedFolder":return d0.deserialize(e,i,this.directoryService)}}createEmptyFolderKeystore(e){var r=this;return(0,Xe.Z)(function*(){const i=(yield r.getKeystoresFolderUrl())+r.encryptionService.generateNewKey()+".shared-keystore",o=r.encryptionService.generateNewKey(),s=r.keystoreStorageService.createSecureStorage(o),a=new Gh(i,e,s,r.directoryService);return yield r.addKeystore(a),a})()}addKeystore(e){var r=this;return(0,Xe.Z)(function*(){var i;yield r.loadKeystores(),null===(i=r.keystores)||void 0===i||i.push(e),yield r.saveKeystoresMetadata()})()}findAllKeystores(e){var r=this;return(0,Xe.Z)(function*(){return yield r.loadKeystores(),function wme(n,t){return nI.apply(this,arguments)}(r.keystores||[],e)})()}ensureKeystoresFolderSetup(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.getKeystoresMetadataUrl();(yield e.fileService.resourceExists(r))||(yield e.masterPasswordService.setupMasterPassword(),yield e.setupKeystoresFolder())})()}sharedFilesKeystoreExists(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.getSharedFilesKeystoreUrl();return e.fileService.resourceExists(r)})()}setupKeystoresFolder(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.directoryService.getRootDirectory(),i=yield e.getKeystoresFolderUrl(),o=e.encryptionService.generateNewKey(),s=e.encryptionService.generateNewKey(),a=new Gh(i+"root.json.enc",r,e.keystoreStorageService.createSecureStorage(o),e.directoryService),l=new u0(e.keystoreStorageService.createSecureStorage(s),i+"shared-files.json.enc");e.keystores=[a,l],yield e.saveKeystoresMetadata()})()}getSharedFilesKeystore(){var e=this;return(0,Xe.Z)(function*(){var r;yield e.loadKeystores();const i=null===(r=e.keystores)||void 0===r?void 0:r.find(o=>o instanceof u0);if(!i)throw new Qge("No keystore found!");return i})()}getSharedFolderKeystores(){var e=this;return(0,Xe.Z)(function*(){var r;return yield e.loadKeystores(),null===(r=e.keystores)||void 0===r?void 0:r.filter(i=>i instanceof d0)})()}getKeystoresMetadataUrl(){var e=this;return(0,Xe.Z)(function*(){return(yield e.directoryService.getKeystoresDirectory())+"keystores.json.enc"})()}getKeystoresFolderUrl(){var e=this;return(0,Xe.Z)(function*(){return e.directoryService.getKeystoresDirectory()})()}getSharedFilesKeystoreUrl(){var e=this;return(0,Xe.Z)(function*(){return(yield e.directoryService.getKeystoresDirectory())+"shared-files.json.enc"})()}}return n.\u0275fac=function(e){return new(e||n)(lt(qh),lt(zV),lt(Ca),lt(WV),lt(kd))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bme(n,t){return Promise.all(n.map(t))}function nI(){return(nI=(0,Xe.Z)(function*(n,t){const e=yield bme(n,t);return n.filter((r,i)=>e[i])})).apply(this,arguments)}const xme={read:!1,append:!1,write:!1,control:!1};let Gw=(()=>{class n{constructor(e,r,i){this.solidClient=e,this.fileService=r,this.authService=i}setGroupPermissions(e,r,i){var o=this;return(0,Xe.Z)(function*(){yield o.updateAcl(e,s=>o.solidClient.setGroupResourceAccess(s,r,o.extendWithFalsePermissions(i)))})()}setGroupDefaultPermissions(e,r,i){var o=this;return(0,Xe.Z)(function*(){yield o.updateAcl(e,s=>o.solidClient.setGroupDefaultAccess(s,r,o.extendWithFalsePermissions(i)))})()}setGroupPermissionsForContainedResources(e,r,i){var o=this;return(0,Xe.Z)(function*(){yield o.setGroupDefaultPermissions(e,r,i),yield o.fileService.traverseContainerContentsRecursively(e,function(){var s=(0,Xe.Z)(function*(a){(yield o.hasAcl(a))&&(o.fileService.isContainer(a)&&(yield o.setGroupDefaultPermissions(a,r,i)),yield o.setGroupPermissions(a,r,i))});return function(a){return s.apply(this,arguments)}}())})()}setPublicPermissions(e,r){var i=this;return(0,Xe.Z)(function*(){yield i.updateAcl(e,o=>i.solidClient.setPublicResourceAccess(o,i.extendWithFalsePermissions(r)))})()}updateAcl(e,r){var i=this;return(0,Xe.Z)(function*(){const{resourceAcl:o,resourceInfo:s}=yield i.getResourceOrFallbackAcl(e),a=r(o);yield i.saveAcl(s,a).catch(Ac(`Could not update permissions of ${e}`))})()}getResourceOrFallbackAcl(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.solidClient.getResourceInfoWithAcl(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)});if(r.solidClient.hasResourceAcl(i))return{resourceAcl:r.solidClient.getResourceAcl(i),resourceInfo:i};if(!r.solidClient.hasAccessibleAcl(i))throw new Kw(`You don't have permission to change access rights of ${e}`);if(!r.solidClient.hasFallbackAcl(i))throw new Kw(`You don't have permission to see the access rights of ${e}`);return{resourceAcl:r.solidClient.createAclFromFallbackAcl(i),resourceInfo:i}})()}hasAcl(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.solidClient.getResourceInfoWithAcl(e,{fetch:r.authService.authenticatedFetch.bind(r.authService)});if(!r.solidClient.hasAccessibleAcl(i))throw new Kw(`You don't seem to have control access to ${e}`);return r.solidClient.hasResourceAcl(i)})()}hasWritePermissions(e){var r=this;return(0,Xe.Z)(function*(){const o=(yield r.authService.authenticatedFetch(e,{method:"HEAD"})).headers.get("wac-allow");return!!o&&o.split(",")[0].includes("write")})()}isNotDeactivatedLinkOrDeletedResource(e){var r=this;return(0,Xe.Z)(function*(){return!!(yield r.authService.authenticatedFetch(e,{method:"HEAD"})).headers.get("wac-allow")})()}saveAcl(e,r){var i=this;return(0,Xe.Z)(function*(){yield i.solidClient.saveAclFor(e,r,{fetch:i.authService.authenticatedFetch.bind(i.authService)})})()}extendWithFalsePermissions(e){return Object.assign(Object.assign({},xme),e)}}return n.\u0275fac=function(e){return new(e||n)(lt(QM),lt(Ca),lt(Rl))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qw(n){return n&&"function"==typeof n.connect}class $V{applyChanges(t,e,r,i,o){t.forEachOperation((s,a,l)=>{let c,d;if(null==s.previousIndex){const E=r(s,a,l);c=e.createEmbeddedView(E.templateRef,E.context,E.index),d=1}else null==l?(e.remove(a),d=3):(c=e.get(a),e.move(c,l),d=2);o&&o({context:null==c?void 0:c.context,operation:d,record:s})})}detach(){}}class rI{constructor(t=!1,e,r=!0){this._multiple=t,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Ne,e&&e.length&&(t?e.forEach(i=>this._markSelected(i)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let GV=(()=>{class n{constructor(){this._listeners=[]}notify(e,r){for(let i of this._listeners)i(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h0=new Ot("_ViewRepeater");function iI(n){return!!n&&(n instanceof de||h(n.lift)&&h(n.subscribe))}const Sme=[[["caption"]],[["colgroup"],["col"]]],Cme=["caption","colgroup, col"];function oI(n){return class extends n{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Mr(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const cg=new Ot("CDK_TABLE");let ug=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["","cdkCellDef",""]]}),n})(),dg=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Jw=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class Dme{}const Tme=oI(Dme);let ku=(()=>{class n extends Tme{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const r=this._stickyEnd;this._stickyEnd=Mr(e),this._hasStickyChanged=r!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(e){return new(e||n)(xe(cg,8))},n.\u0275dir=bt({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,r,i){if(1&e&&(pr(i,ug,5),pr(i,dg,5),pr(i,Jw,5)),2&e){let o;un(o=dn())&&(r.cell=o.first),un(o=dn())&&(r.headerCell=o.first),un(o=dn())&&(r.footerCell=o.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[cn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Ht]}),n})();class sI{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let aI=(()=>{class n extends sI{constructor(e,r){super(e,r)}}return n.\u0275fac=function(e){return new(e||n)(xe(ku),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Ht]}),n})(),lI=(()=>{class n extends sI{constructor(e,r){var i;if(super(e,r),1===(null===(i=e._table)||void 0===i?void 0:i._elementRef.nativeElement.nodeType)){const o=e._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===o||"treegrid"===o?"gridcell":"cell")}}}return n.\u0275fac=function(e){return new(e||n)(xe(ku),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Ht]}),n})();class JV{constructor(){this.tasks=[],this.endTasks=[]}}const cI=new Ot("_COALESCED_STYLE_SCHEDULER");let ZV=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Ne}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new JV,this._getScheduleObservable().pipe(Ji(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new JV;for(const r of e.tasks)r();for(const r of e.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Q(Promise.resolve(void 0)):this._ngZone.onStable.pipe(ke(1))}}return n.\u0275fac=function(e){return new(e||n)(lt(Vn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),uI=(()=>{class n{constructor(e,r){this.template=e,this._differs=r}ngOnChanges(e){if(!this._columnsDiffer){const r=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof f0?e.headerCell.template:this instanceof p0?e.footerCell.template:e.cell.template}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi),xe(Ka))},n.\u0275dir=bt({type:n,features:[Si]}),n})();class Mme extends uI{}const Ime=oI(Mme);let f0=(()=>{class n extends Ime{constructor(e,r,i){super(e,r),this._table=i}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi),xe(Ka),xe(cg,8))},n.\u0275dir=bt({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[Ht,Si]}),n})();class Rme extends uI{}const Ome=oI(Rme);let p0=(()=>{class n extends Ome{constructor(e,r,i){super(e,r),this._table=i}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi),xe(Ka),xe(cg,8))},n.\u0275dir=bt({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[Ht,Si]}),n})(),Zw=(()=>{class n extends uI{constructor(e,r,i){super(e,r),this._table=i}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi),xe(Ka),xe(cg,8))},n.\u0275dir=bt({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[Ht]}),n})(),Du=(()=>{class n{constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(e){return new(e||n)(xe(Fi))},n.\u0275dir=bt({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),dI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Jt({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&_a(0,0)},directives:[Du],encapsulation:2}),n})(),fI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Jt({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&_a(0,0)},directives:[Du],encapsulation:2}),n})(),Yw=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const YV=["top","bottom","left","right"];class Pme{constructor(t,e,r,i,o=!0,s=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=r,this._coalescedStyleScheduler=i,this._isBrowser=o,this._needsPositionStickyOnElement=s,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const r=[];for(const i of t)if(i.nodeType===i.ELEMENT_NODE){r.push(i);for(let o=0;o<i.children.length;o++)r.push(i.children[o])}this._coalescedStyleScheduler.schedule(()=>{for(const i of r)this._removeStickyStyle(i,e)})}updateStickyColumns(t,e,r,i=!0){if(!t.length||!this._isBrowser||!e.some(U=>U)&&!r.some(U=>U))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const o=t[0],s=o.children.length,a=this._getCellWidths(o,i),l=this._getStickyStartColumnPositions(a,e),c=this._getStickyEndColumnPositions(a,r),d=e.lastIndexOf(!0),E=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const U="rtl"===this.direction,W=U?"right":"left",ne=U?"left":"right";for(const Ce of t)for(let Pe=0;Pe<s;Pe++){const Qe=Ce.children[Pe];e[Pe]&&this._addStickyStyle(Qe,W,l[Pe],Pe===d),r[Pe]&&this._addStickyStyle(Qe,ne,c[Pe],Pe===E)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===d?[]:a.slice(0,d+1).map((Ce,Pe)=>e[Pe]?Ce:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===E?[]:a.slice(E).map((Ce,Pe)=>r[Pe+E]?Ce:null).reverse()}))})}stickRows(t,e,r){if(!this._isBrowser)return;const i="bottom"===r?t.slice().reverse():t,o="bottom"===r?e.slice().reverse():e,s=[],a=[],l=[];for(let d=0,E=0;d<i.length;d++){if(!o[d])continue;s[d]=E;const U=i[d];l[d]=this._isNativeHtmlTable?Array.from(U.children):[U];const W=U.getBoundingClientRect().height;E+=W,a[d]=W}const c=o.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var d,E;for(let U=0;U<i.length;U++){if(!o[U])continue;const W=s[U],ne=U===c;for(const Ce of l[U])this._addStickyStyle(Ce,r,W,ne)}"top"===r?null===(d=this._positionListener)||void 0===d||d.stickyHeaderRowsUpdated({sizes:a,offsets:s,elements:l}):null===(E=this._positionListener)||void 0===E||E.stickyFooterRowsUpdated({sizes:a,offsets:s,elements:l})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const r=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(i=>!i)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const i of e)t.style[i]="",t.classList.remove(this._borderCellCss[i]);YV.some(i=>-1===e.indexOf(i)&&t.style[i])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,r,i){t.classList.add(this._stickCellCss),i&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${r}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let r=0;for(const i of YV)t.style[i]&&(r+=e[i]);return r?`${r}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],i=t.children;for(let o=0;o<i.length;o++)r.push(i[o].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(t,e){const r=[];let i=0;for(let o=0;o<t.length;o++)e[o]&&(r[o]=i,i+=t[o]);return r}_getStickyEndColumnPositions(t,e){const r=[];let i=0;for(let o=t.length;o>0;o--)e[o]&&(r[o]=i,i+=t[o]);return r}}const pI=new Ot("CDK_SPL");let Xw=(()=>{class n{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["","rowOutlet",""]]}),n})(),Qw=(()=>{class n{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),e1=(()=>{class n{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),t1=(()=>{class n{constructor(e,r){this.viewContainer=e,this.elementRef=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(vn))},n.\u0275dir=bt({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),n1=(()=>{class n{constructor(e,r,i,o,s,a,l,c,d,E,U,W){this._differs=e,this._changeDetectorRef=r,this._elementRef=i,this._dir=s,this._platform=l,this._viewRepeater=c,this._coalescedStyleScheduler=d,this._viewportRuler=E,this._stickyPositioningListener=U,this._ngZone=W,this._onDestroy=new Ne,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Mn,this.viewChange=new Bs({start:0,end:Number.MAX_VALUE}),o||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Mr(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Mr(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Ji(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),qw(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,r,(i,o,s)=>this._getEmbeddedViewArgs(i.item,s),i=>i.item.data,i=>{1===i.operation&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(i=>{r.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this._ngZone&&Vn.isInAngularZone()?this._ngZone.onStable.pipe(ke(1),Ji(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._elementRef.nativeElement.querySelector("thead");i&&(i.style.display=e.length?"":"none");const o=this._headerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,o,"top"),this._headerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),i=this._elementRef.nativeElement.querySelector("tfoot");i&&(i.style.display=e.length?"":"none");const o=this._footerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,o,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,o),this._footerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...r,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,s)=>{this._addStickyColumnStyles([o],this._headerRowDefs[s])}),this._rowDefs.forEach(o=>{const s=[];for(let a=0;a<r.length;a++)this._renderRows[a].rowDef===o&&s.push(r[a]);this._addStickyColumnStyles(s,o)}),i.forEach((o,s)=>{this._addStickyColumnStyles([o],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_getAllRenderRows(){const e=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let o=this._data[i];const s=this._getRenderRowsForData(o,i,r.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let a=0;a<s.length;a++){let l=s[a];const c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,r,i){return this._getRowDefs(e,r).map(s=>{const a=i&&i.has(s)?i.get(s):[];if(a.length){const l=a.shift();return l.dataIndex=r,l}return{data:e,rowDef:s,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),r1(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=r1(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=r1(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=r1(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(s,a)=>s||!!a.getColumnsDiff(),r=this._rowDefs.reduce(e,!1);r&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(e,!1);i&&this._forceRenderHeaderRows();const o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),r||i||o}_switchDataSource(e){this._data=[],qw(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;qw(this.dataSource)?e=this.dataSource.connect(this):iI(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=An(this.dataSource)),this._renderChangeSubscription=e.pipe(Ji(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,r)=>this._renderRow(this._headerRowOutlet,e,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,r)=>this._renderRow(this._footerRowOutlet,e,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,r){const i=Array.from(r.columns||[]).map(a=>this._columnDefsByName.get(a)),o=i.map(a=>a.sticky),s=i.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const r=[];for(let i=0;i<e.viewContainer.length;i++){const o=e.viewContainer.get(i);r.push(o.rootNodes[0])}return r}_getRowDefs(e,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(o=>!o.when||o.when(r,e));else{let o=this._rowDefs.find(s=>s.when&&s.when(r,e))||this._defaultRowDef;o&&i.push(o)}return i}_getEmbeddedViewArgs(e,r){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:r}}_renderRow(e,r,i,o={}){const s=e.viewContainer.createEmbeddedView(r.template,o,i);return this._renderCellTemplateForItem(r,o),s}_renderCellTemplateForItem(e,r){for(let i of this._getCellTemplates(e))Du.mostRecentCellOutlet&&Du.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let r=0,i=e.length;r<i;r++){const s=e.get(r).context;s.count=i,s.first=0===r,s.last=r===i-1,s.even=r%2==0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[r].dataIndex,s.renderIndex=r):s.index=this._renderRows[r].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,r=>{const i=this._columnDefsByName.get(r);return e.extractCellTemplate(i)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const i of r){const o=this._document.createElement(i.tag);o.setAttribute("role","rowgroup");for(const s of i.outlets)o.appendChild(s.elementRef.nativeElement);e.appendChild(o)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(r,i)=>r||i.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new Pme(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:An()).pipe(Ji(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const i=this._noDataRowOutlet.viewContainer;if(r){const o=i.createEmbeddedView(e.templateRef),s=o.rootNodes[0];1===o.rootNodes.length&&(null==s?void 0:s.nodeType)===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else i.clear();this._isShowingNoDataRow=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Ka),xe(Ni),xe(vn),Zs("role"),xe(id,8),xe(zn),xe(ps),xe(h0),xe(cI),xe(Ub),xe(pI,12),xe(Vn,8))},n.\u0275cmp=Jt({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,r,i){if(1&e&&(pr(i,Yw,5),pr(i,ku,5),pr(i,Zw,5),pr(i,f0,5),pr(i,p0,5)),2&e){let o;un(o=dn())&&(r._noDataRow=o.first),un(o=dn())&&(r._contentColumnDefs=o),un(o=dn())&&(r._contentRowDefs=o),un(o=dn())&&(r._contentHeaderRowDefs=o),un(o=dn())&&(r._contentFooterRowDefs=o)}},viewQuery:function(e,r){if(1&e&&(Zr(Xw,7),Zr(Qw,7),Zr(e1,7),Zr(t1,7)),2&e){let i;un(i=dn())&&(r._rowOutlet=i.first),un(i=dn())&&(r._headerRowOutlet=i.first),un(i=dn())&&(r._footerRowOutlet=i.first),un(i=dn())&&(r._noDataRowOutlet=i.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,r){2&e&&br("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[cn([{provide:cg,useExisting:n},{provide:h0,useClass:$V},{provide:cI,useClass:ZV},{provide:pI,useValue:null}])],ngContentSelectors:Cme,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,r){1&e&&(no(Sme),ur(0),ur(1,1),_a(2,0)(3,1)(4,2)(5,3))},directives:[Qw,Xw,t1,e1],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function r1(n,t){return n.concat(Array.from(t))}let Nme=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[uk]]}),n})();const Lme=[[["caption"]],[["colgroup"],["col"]]],Bme=["caption","colgroup, col"];let gI=(()=>{class n extends n1{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275cmp=Jt({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,r){2&e&&br("mat-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[cn([{provide:h0,useClass:$V},{provide:n1,useExisting:n},{provide:cg,useExisting:n},{provide:cI,useClass:ZV},{provide:pI,useValue:null}]),Ht],ngContentSelectors:Bme,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,r){1&e&&(no(Lme),ur(0),ur(1,1),_a(2,0)(3,1)(4,2)(5,3))},directives:[Qw,Xw,t1,e1],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),o1=(()=>{class n extends ug{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matCellDef",""]],features:[cn([{provide:ug,useExisting:n}]),Ht]}),n})(),s1=(()=>{class n extends dg{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matHeaderCellDef",""]],features:[cn([{provide:dg,useExisting:n}]),Ht]}),n})(),a1=(()=>{class n extends ku{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[cn([{provide:ku,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Ht]}),n})(),l1=(()=>{class n extends aI{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[Ht]}),n})(),c1=(()=>{class n extends lI{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[Ht]}),n})(),mI=(()=>{class n extends f0{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[cn([{provide:f0,useExisting:n}]),Ht]}),n})(),yI=(()=>{class n extends Zw{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[cn([{provide:Zw,useExisting:n}]),Ht]}),n})(),vI=(()=>{class n extends dI{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275cmp=Jt({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[cn([{provide:dI,useExisting:n}]),Ht],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&_a(0,0)},directives:[Du],encapsulation:2}),n})(),_I=(()=>{class n extends fI{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275cmp=Jt({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[cn([{provide:fI,useExisting:n}]),Ht],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,r){1&e&&_a(0,0)},directives:[Du],encapsulation:2}),n})(),qme=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Nme,ir],ir]}),n})();function Zme(n,t){1&n&&(Le(0,"div"),nt(1,"Loading files and folders shared with you.."),Be())}function Yme(n,t){1&n&&(Le(0,"th",13),nt(1,"File Name"),Be())}function Xme(n,t){if(1&n&&(Le(0,"td",14),nt(1),Be()),2&n){const e=t.$implicit;it(1),Oi(e.resourceName)}}function Qme(n,t){1&n&&(Le(0,"th",13),nt(1,"Owner"),Be())}function eye(n,t){if(1&n&&(Le(0,"td",14),nt(1),Be()),2&n){const e=t.$implicit;it(1),Oi(e.ownerPod)}}function tye(n,t){1&n&&qt(0,"th",13)}function nye(n,t){1&n&&(Le(0,"td",14)(1,"mat-icon"),nt(2,"insert_drive_file"),Be()())}function rye(n,t){1&n&&qt(0,"tr",15)}function iye(n,t){if(1&n){const e=Dr();Le(0,"tr",16),At("click",function(){const o=In(e).$implicit;return _t(3).clickFile(o.url)}),Be()}}function oye(n,t){if(1&n&&(Le(0,"div")(1,"h4"),nt(2,"Files shared with you"),Be(),Le(3,"div",4)(4,"table",5),Ii(5,6),vt(6,Yme,2,0,"th",7),vt(7,Xme,2,1,"td",8),Ri(),Ii(8,9),vt(9,Qme,2,0,"th",7),vt(10,eye,2,1,"td",8),Ri(),Ii(11,10),vt(12,tye,1,0,"th",7),vt(13,nye,3,0,"td",8),Ri(),vt(14,rye,1,0,"tr",11),vt(15,iye,1,0,"tr",12),Be()()()),2&n){const e=_t(2);it(4),ut("dataSource",e.filesSharedWithMe),it(10),ut("matHeaderRowDef",e.displayedColumns),it(1),ut("matRowDefColumns",e.displayedColumns)}}function sye(n,t){1&n&&(Le(0,"th",13),nt(1,"Folder Name"),Be())}function aye(n,t){if(1&n&&(Le(0,"td",14),nt(1),Be()),2&n){const e=t.$implicit;it(1),Oi(e.resourceName)}}function lye(n,t){1&n&&(Le(0,"th",13),nt(1,"Owner"),Be())}function cye(n,t){if(1&n&&(Le(0,"td",14),nt(1),Be()),2&n){const e=t.$implicit;it(1),Oi(e.ownerPod)}}function uye(n,t){1&n&&qt(0,"th",13)}function dye(n,t){1&n&&(Le(0,"td",14)(1,"mat-icon"),nt(2,"folder"),Be()())}function hye(n,t){1&n&&qt(0,"tr",15)}function fye(n,t){if(1&n){const e=Dr();Le(0,"tr",16),At("click",function(){const o=In(e).$implicit;return _t(3).clickFolder(o.url)}),Be()}}function pye(n,t){1&n&&(Le(0,"div"),nt(1," Seems like you haven't received any shared files and folders yet! "),Be())}function gye(n,t){if(1&n&&(Le(0,"div",17)(1,"h4"),nt(2,"Folders shared with you"),Be(),Le(3,"div",18)(4,"table",5),Ii(5,6),vt(6,sye,2,0,"th",7),vt(7,aye,2,1,"td",8),Ri(),Ii(8,9),vt(9,lye,2,0,"th",7),vt(10,cye,2,1,"td",8),Ri(),Ii(11,10),vt(12,uye,1,0,"th",7),vt(13,dye,3,0,"td",8),Ri(),vt(14,hye,1,0,"tr",11),vt(15,fye,1,0,"tr",12),Be()(),vt(16,pye,2,0,"div",0),Be()),2&n){const e=_t(2);it(4),ut("dataSource",e.foldersSharedWithMe),it(10),ut("matHeaderRowDef",e.displayedColumns),it(1),ut("matRowDefColumns",e.displayedColumns),it(1),ut("ngIf",0===e.filesSharedWithMe.length&&0===e.foldersSharedWithMe.length)}}function mye(n,t){if(1&n&&(Le(0,"div",2),vt(1,oye,16,3,"div",0),vt(2,gye,17,4,"div",3),Be()),2&n){const e=_t();it(1),ut("ngIf",e.filesSharedWithMe.length>0),it(1),ut("ngIf",e.foldersSharedWithMe.length>0)}}let yye=(()=>{class n{constructor(e,r,i){this.keystoreService=e,this.router=r,this.permissionService=i,this.filesSharedWithMe=[],this.foldersSharedWithMe=[],this.displayedColumns=["isFolder","fileName","owner"],this.loading=!1}ngOnInit(){var e=this;return(0,Xe.Z)(function*(){if(yield e.keystoreService.loadKeystores(),e.loading=!0,yield e.keystoreService.sharedFilesKeystoreExists()){const i=yield e.keystoreService.getSharedFilesKeystore(),o=Object.keys(yield i.getKeysAll());e.addFileUrls(o)}const r=yield e.keystoreService.getSharedFolderKeystores();e.mapSharedFoldersToObjects(r),e.loading=!1})()}mapSharedFoldersToObjects(e){var r=this;0!==e.length&&e.map(function(){var i=(0,Xe.Z)(function*(o){const s=o.getFolderUrl();(yield r.permissionService.isNotDeactivatedLinkOrDeletedResource(s))&&r.foldersSharedWithMe.push({ownerPod:new URL(s).host,resourceName:r.getResourceName(s),url:s})});return function(o){return i.apply(this,arguments)}}())}addFileUrls(e){var r=this;e.forEach(function(){var i=(0,Xe.Z)(function*(o){(yield r.permissionService.isNotDeactivatedLinkOrDeletedResource(o))&&r.filesSharedWithMe.push({ownerPod:new URL(o).host,resourceName:r.getResourceName(o),url:o})});return function(o){return i.apply(this,arguments)}}())}clickFile(e){var r=this;return(0,Xe.Z)(function*(){yield r.router.navigate(["preview"],{queryParams:{url:e}})})()}clickFolder(e){var r=this;return(0,Xe.Z)(function*(){yield r.router.navigate(["files"],{queryParams:{url:e}})})()}getResourceName(e){return e.endsWith("/")&&(e=e.slice(0,-1)),e.substring(e.lastIndexOf("/")+1)}}return n.\u0275fac=function(e){return new(e||n)(xe(lg),xe(Ei),xe(Gw))},n.\u0275cmp=Jt({type:n,selectors:[["app-shared-with-me"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","horizontal",4,"ngIf"],[1,"horizontal"],["style","margin-left: 2rem",4,"ngIf"],["id","sharedFiles",1,"mat-elevation-z8","table-container"],["mat-table","",2,"width","500px",3,"dataSource"],["matColumnDef","fileName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","isFolder"],["mat-header-row","","style","position: sticky",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",2,"position","sticky"],["mat-row","",3,"click"],[2,"margin-left","2rem"],["id","sharedFolders",1,"mat-elevation-z8"]],template:function(e,r){1&e&&(vt(0,Zme,2,0,"div",0),vt(1,mye,3,2,"div",1)),2&e&&(ut("ngIf",r.loading),it(1),ut("ngIf",!r.loading))},directives:[gi,gI,a1,s1,l1,o1,c1,md,mI,vI,yI,_I],styles:[".mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background-color:#f4cfab}.horizontal[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})();function vye(n,t){if(1&n&&(Le(0,"h2"),nt(1),dc(2,"async"),Be()),2&n){const e=_t();it(1),Tr("Hello ",nu(2,1,e.name$),"")}}function _ye(n,t){1&n&&(Le(0,"h2"),nt(1,"Hello User!"),Be())}let bye=(()=>{class n{constructor(e){this.profileService=e}ngOnInit(){this.name$=Q(this.profileService.getUserName())}}return n.\u0275fac=function(e){return new(e||n)(xe(zw))},n.\u0275cmp=Jt({type:n,selectors:[["app-home"]],decls:7,vars:2,consts:[[1,"box"],[4,"ngIf","ngIfElse"],["noUser",""]],template:function(e,r){if(1&e&&(Le(0,"div",0),vt(1,vye,3,3,"h2",1),vt(2,_ye,2,0,"ng-template",null,2,SL),Le(4,"h2"),nt(5,"Welcome to your personal area."),Be(),qt(6,"app-shared-with-me"),Be()),2&e){const i=Al(3);it(1),ut("ngIf",r.name$)("ngIfElse",i)}},directives:[gi,yye],pipes:[yE],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%}.left-half[_ngcontent-%COMP%], .right-half[_ngcontent-%COMP%]{float:left;width:50%;height:100%}"]}),n})(),QV=(()=>{class n{constructor(){this.storage_key="url"}setRedirect(e){localStorage.setItem(this.storage_key,e)}tryRedirect(){const e=localStorage.getItem(this.storage_key);null!==e&&(localStorage.removeItem(this.storage_key),window.location.href=e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hg=(()=>{class n{constructor(e,r,i){this.solidAuthenticationService=e,this.router=r,this.redirectService=i}canActivate(){return this.solidAuthenticationService.isLoggedIn().pipe(Mo(e=>this.redirect(e)))}redirect(e){e||(this.redirectService.setRedirect(window.location.href),this.router.navigate(["/"]))}}return n.\u0275fac=function(e){return new(e||n)(lt(Rl),lt(Ei),lt(QV))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vs(n){this.content=n}vs.prototype={constructor:vs,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return-1==t?void 0:this.content[t+1]},update:function(n,t,e){var r=e&&e!=n?this.remove(e):this,i=r.find(n),o=r.content.slice();return-1==i?o.push(e||n,t):(o[i+1]=t,e&&(o[i]=e)),new vs(o)},remove:function(n){var t=this.find(n);if(-1==t)return this;var e=this.content.slice();return e.splice(t,2),new vs(e)},addToStart:function(n,t){return new vs([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new vs(e)},addBefore:function(n,t,e){var r=this.remove(t),i=r.content.slice(),o=r.find(n);return i.splice(-1==o?i.length:o,0,t,e),new vs(i)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return(n=vs.from(n)).size?new vs(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=vs.from(n)).size?new vs(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=vs.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},get size(){return this.content.length>>1}},vs.from=function(n){if(n instanceof vs)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new vs(t)};const ez=vs;function tz(n,t,e){for(var r=0;;r++){if(r==n.childCount||r==t.childCount)return n.childCount==t.childCount?null:e;var i=n.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return e;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)e++;return e}if(i.content.size||o.content.size){var a=tz(i.content,o.content,e+1);if(null!=a)return a}e+=i.nodeSize}else e+=i.nodeSize}}function nz(n,t,e,r){for(var i=n.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:e,b:r};var s=n.child(--i),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:e,b:r};if(s.isText&&s.text!=a.text){for(var c=0,d=Math.min(s.text.length,a.text.length);c<d&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,e--,r--;return{a:e,b:r}}if(s.content.size||a.content.size){var E=nz(s.content,a.content,e-1,r-1);if(E)return E}e-=l,r-=l}else e-=l,r-=l}}var Dt=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize},u1={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Dt.prototype.nodesBetween=function(t,e,r,i,o){void 0===i&&(i=0);for(var s=0,a=0;a<e;s++){var l=this.content[s],c=a+l.nodeSize;if(c>t&&!1!==r(l,i+a,o,s)&&l.content.size){var d=a+1;l.nodesBetween(Math.max(0,t-d),Math.min(l.content.size,e-d),r,i+d)}a=c}},Dt.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},Dt.prototype.textBetween=function(t,e,r,i){var o="",s=!0;return this.nodesBetween(t,e,function(a,l){a.isText?(o+=a.text.slice(Math.max(t,l)-l,e-l),s=!r):a.isLeaf&&i?(o+="function"==typeof i?i(a):i,s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o},Dt.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(i[i.length-1]=e.withText(e.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new Dt(i,this.size+t.size)},Dt.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var r=[],i=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],l=s+a.nodeSize;l>t&&((s<t||l>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),r.push(a),i+=a.nodeSize),s=l}return new Dt(r,i)},Dt.prototype.cutByIndex=function(t,e){return t==e?Dt.empty:0==t&&e==this.content.length?this:new Dt(this.content.slice(t,e))},Dt.prototype.replaceChild=function(t,e){var r=this.content[t];if(r==e)return this;var i=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return i[t]=e,new Dt(i,o)},Dt.prototype.addToStart=function(t){return new Dt([t].concat(this.content),this.size+t.nodeSize)},Dt.prototype.addToEnd=function(t){return new Dt(this.content.concat(t),this.size+t.nodeSize)},Dt.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},u1.firstChild.get=function(){return this.content.length?this.content[0]:null},u1.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},u1.childCount.get=function(){return this.content.length},Dt.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},Dt.prototype.maybeChild=function(t){return this.content[t]},Dt.prototype.forEach=function(t){for(var e=0,r=0;e<this.content.length;e++){var i=this.content[e];t(i,r,e),r+=i.nodeSize}},Dt.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),tz(this,t,e)},Dt.prototype.findDiffEnd=function(t,e,r){return void 0===e&&(e=this.size),void 0===r&&(r=t.size),nz(this,t,e,r)},Dt.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return d1(0,t);if(t==this.size)return d1(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var r=0,i=0;;r++){var s=i+this.child(r).nodeSize;if(s>=t)return s==t||e>0?d1(r+1,s):d1(r,i);i=s}},Dt.prototype.toString=function(){return"<"+this.toStringInner()+">"},Dt.prototype.toStringInner=function(){return this.content.join(", ")},Dt.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},Dt.fromJSON=function(t,e){if(!e)return Dt.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Dt(e.map(t.nodeFromJSON))},Dt.fromArray=function(t){if(!t.length)return Dt.empty;for(var e,r=0,i=0;i<t.length;i++){var o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(e||(e=t.slice(0,i)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new Dt(e||t,r)},Dt.from=function(t){if(!t)return Dt.empty;if(t instanceof Dt)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Dt([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Dt.prototype,u1);var bI={index:0,offset:0};function d1(n,t){return bI.index=n,bI.offset=t,bI}function h1(n,t){if(n===t)return!0;if(!n||"object"!=typeof n||!t||"object"!=typeof t)return!1;var e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(var r=0;r<n.length;r++)if(!h1(n[r],t[r]))return!1}else{for(var i in n)if(!(i in t)||!h1(n[i],t[i]))return!1;for(var o in t)if(!(o in n))return!1}return!0}Dt.empty=new Dt([],0);var Cr=function(t,e){this.type=t,this.attrs=e};function Dc(n){var t=Error.call(this,n);return t.__proto__=Dc.prototype,t}Cr.prototype.addToSet=function(t){for(var e,r=!1,i=0;i<t.length;i++){var o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,i)),e.push(this),r=!0),e&&e.push(o)}}return e||(e=t.slice()),r||e.push(this),e},Cr.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},Cr.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},Cr.prototype.eq=function(t){return this==t||this.type==t.type&&h1(this.attrs,t.attrs)},Cr.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},Cr.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var r=t.marks[e.type];if(!r)throw new RangeError("There is no mark type "+e.type+" in this schema");return r.create(e.attrs)},Cr.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].eq(e[r]))return!1;return!0},Cr.setFrom=function(t){if(!t||0==t.length)return Cr.none;if(t instanceof Cr)return[t];var e=t.slice();return e.sort(function(r,i){return r.type.rank-i.type.rank}),e},Cr.none=[],(Dc.prototype=Object.create(Error.prototype)).constructor=Dc,Dc.prototype.name="ReplaceError";var Qt=function(t,e,r){this.content=t,this.openStart=e,this.openEnd=r},rz={size:{configurable:!0}};function iz(n,t,e){var r=n.findIndex(t),i=r.index,o=r.offset,s=n.maybeChild(i),a=n.findIndex(e),l=a.index;if(o==t||s.isText){if(a.offset!=e&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(iz(s.content,t-o-1,e-o-1)))}function oz(n,t,e,r){var i=n.findIndex(t),o=i.index,s=i.offset,a=n.maybeChild(o);if(s==t||a.isText)return r&&!r.canReplace(o,o,e)?null:n.cut(0,t).append(e).append(n.cut(t));var l=oz(a.content,t-s-1,e);return l&&n.replaceChild(o,a.copy(l))}function xye(n,t,e){if(e.openStart>n.depth)throw new Dc("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new Dc("Inconsistent open depths");return sz(n,t,e,0)}function sz(n,t,e,r){var i=n.index(r),o=n.node(r);if(i==t.index(r)&&r<n.depth-e.openStart){var s=sz(n,t,e,r+1);return o.copy(o.content.replaceChild(i,s))}if(e.content.size){if(e.openStart||e.openEnd||n.depth!=r||t.depth!=r){var c=function Sye(n,t){for(var e=t.depth-n.openStart,i=t.node(e).copy(n.content),o=e-1;o>=0;o--)i=t.node(o).copy(Dt.from(i));return{start:i.resolveNoCache(n.openStart+e),end:i.resolveNoCache(i.content.size-n.openEnd-e)}}(e,n);return Xh(o,lz(n,c.start,c.end,t,r))}var a=n.parent,l=a.content;return Xh(a,l.cut(0,n.parentOffset).append(e.content).append(l.cut(t.parentOffset)))}return Xh(o,f1(n,t,r))}function az(n,t){if(!t.type.compatibleContent(n.type))throw new Dc("Cannot join "+t.type.name+" onto "+n.type.name)}function wI(n,t,e){var r=n.node(e);return az(r,t.node(e)),r}function Yh(n,t){var e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function g0(n,t,e,r){var i=(t||n).node(e),o=0,s=t?t.index(e):i.childCount;n&&(o=n.index(e),n.depth>e?o++:n.textOffset&&(Yh(n.nodeAfter,r),o++));for(var a=o;a<s;a++)Yh(i.child(a),r);t&&t.depth==e&&t.textOffset&&Yh(t.nodeBefore,r)}function Xh(n,t){if(!n.type.validContent(t))throw new Dc("Invalid content for node "+n.type.name);return n.copy(t)}function lz(n,t,e,r,i){var o=n.depth>i&&wI(n,t,i+1),s=r.depth>i&&wI(e,r,i+1),a=[];return g0(null,n,i,a),o&&s&&t.index(i)==e.index(i)?(az(o,s),Yh(Xh(o,lz(n,t,e,r,i+1)),a)):(o&&Yh(Xh(o,f1(n,t,i+1)),a),g0(t,e,i,a),s&&Yh(Xh(s,f1(e,r,i+1)),a)),g0(r,null,i,a),new Dt(a)}function f1(n,t,e){var r=[];return g0(null,n,e,r),n.depth>e&&Yh(Xh(wI(n,t,e+1),f1(n,t,e+1)),r),g0(t,null,e,r),new Dt(r)}rz.size.get=function(){return this.content.size-this.openStart-this.openEnd},Qt.prototype.insertAt=function(t,e){var r=oz(this.content,t+this.openStart,e,null);return r&&new Qt(r,this.openStart,this.openEnd)},Qt.prototype.removeBetween=function(t,e){return new Qt(iz(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},Qt.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},Qt.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Qt.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},Qt.fromJSON=function(t,e){if(!e)return Qt.empty;var r=e.openStart||0,i=e.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new Qt(Dt.fromJSON(t,e.content),r,i)},Qt.maxOpen=function(t,e){void 0===e&&(e=!0);for(var r=0,i=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(var s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)i++;return new Qt(t,r,i)},Object.defineProperties(Qt.prototype,rz),Qt.empty=new Qt(Dt.empty,0,0);var ki=function(t,e,r){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=r},fg={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};ki.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},fg.parent.get=function(){return this.node(this.depth)},fg.doc.get=function(){return this.node(0)},ki.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},ki.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},ki.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},ki.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},ki.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},ki.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},ki.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},fg.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},fg.nodeAfter.get=function(){var n=this.parent,t=this.index(this.depth);if(t==n.childCount)return null;var e=this.pos-this.path[this.path.length-1],r=n.child(t);return e?n.child(t).cut(e):r},fg.nodeBefore.get=function(){var n=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(n).cut(0,t):0==n?null:this.parent.child(n-1)},ki.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var r=this.path[3*e],i=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)i+=r.child(o).nodeSize;return i},ki.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return Cr.none;if(this.textOffset)return t.child(e).marks;var r=t.maybeChild(e-1),i=t.maybeChild(e);if(!r){var o=r;r=i,i=o}for(var s=r.marks,a=0;a<s.length;a++)!1===s[a].type.spec.inclusive&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s},ki.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var r=e.marks,i=t.parent.maybeChild(t.index()),o=0;o<r.length;o++)!1===r[o].type.spec.inclusive&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r},ki.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},ki.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!e||e(this.node(r))))return new m0(this,t,r)},ki.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},ki.prototype.max=function(t){return t.pos>this.pos?t:this},ki.prototype.min=function(t){return t.pos<this.pos?t:this},ki.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},ki.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var r=[],i=0,o=e,s=t;;){var a=s.content.findIndex(o),l=a.index,c=a.offset,d=o-c;if(r.push(s,l,i+c),!d||(s=s.child(l)).isText)break;o=d-1,i+=c+1}return new ki(e,r,o)},ki.resolveCached=function(t,e){for(var r=0;r<xI.length;r++){var i=xI[r];if(i.pos==e&&i.doc==t)return i}var o=xI[SI]=ki.resolve(t,e);return SI=(SI+1)%Cye,o},Object.defineProperties(ki.prototype,fg);var xI=[],SI=0,Cye=12,m0=function(t,e,r){this.$from=t,this.$to=e,this.depth=r},pg={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};pg.start.get=function(){return this.$from.before(this.depth+1)},pg.end.get=function(){return this.$to.after(this.depth+1)},pg.parent.get=function(){return this.$from.node(this.depth)},pg.startIndex.get=function(){return this.$from.index(this.depth)},pg.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(m0.prototype,pg);var Eye=Object.create(null),Ir=function(t,e,r,i){this.type=t,this.attrs=e,this.content=r||Dt.empty,this.marks=i||Cr.none},Ea={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Ea.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Ea.childCount.get=function(){return this.content.childCount},Ir.prototype.child=function(t){return this.content.child(t)},Ir.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Ir.prototype.forEach=function(t){this.content.forEach(t)},Ir.prototype.nodesBetween=function(t,e,r,i){void 0===i&&(i=0),this.content.nodesBetween(t,e,r,i,this)},Ir.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Ea.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Ir.prototype.textBetween=function(t,e,r,i){return this.content.textBetween(t,e,r,i)},Ea.firstChild.get=function(){return this.content.firstChild},Ea.lastChild.get=function(){return this.content.lastChild},Ir.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Ir.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Ir.prototype.hasMarkup=function(t,e,r){return this.type==t&&h1(this.attrs,e||t.defaultAttrs||Eye)&&Cr.sameSet(this.marks,r||Cr.none)},Ir.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Ir.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Ir.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Ir.prototype.slice=function(t,e,r){if(void 0===e&&(e=this.content.size),void 0===r&&(r=!1),t==e)return Qt.empty;var i=this.resolve(t),o=this.resolve(e),s=r?0:i.sharedDepth(e),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new Qt(c,i.depth-s,o.depth-s)},Ir.prototype.replace=function(t,e,r){return xye(this.resolve(t),this.resolve(e),r)},Ir.prototype.nodeAt=function(t){for(var e=this;;){var r=e.content.findIndex(t),o=r.offset;if(!(e=e.maybeChild(r.index)))return null;if(o==t||e.isText)return e;t-=o+1}},Ir.prototype.childAfter=function(t){var e=this.content.findIndex(t),r=e.index,i=e.offset;return{node:this.content.maybeChild(r),index:r,offset:i}},Ir.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),r=e.index,i=e.offset;if(i<t)return{node:this.content.child(r),index:r,offset:i};var o=this.content.child(r-1);return{node:o,index:r-1,offset:i-o.nodeSize}},Ir.prototype.resolve=function(t){return ki.resolveCached(this,t)},Ir.prototype.resolveNoCache=function(t){return ki.resolve(this,t)},Ir.prototype.rangeHasMark=function(t,e,r){var i=!1;return e>t&&this.nodesBetween(t,e,function(o){return r.isInSet(o.marks)&&(i=!0),!i}),i},Ea.isBlock.get=function(){return this.type.isBlock},Ea.isTextblock.get=function(){return this.type.isTextblock},Ea.inlineContent.get=function(){return this.type.inlineContent},Ea.isInline.get=function(){return this.type.isInline},Ea.isText.get=function(){return this.type.isText},Ea.isLeaf.get=function(){return this.type.isLeaf},Ea.isAtom.get=function(){return this.type.isAtom},Ir.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),cz(this.marks,t)},Ir.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Ir.prototype.canReplace=function(t,e,r,i,o){void 0===r&&(r=Dt.empty),void 0===i&&(i=0),void 0===o&&(o=r.childCount);var s=this.contentMatchAt(t).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0},Ir.prototype.canReplaceWith=function(t,e,r,i){if(i&&!this.type.allowsMarks(i))return!1;var o=this.contentMatchAt(t).matchType(r),s=o&&o.matchFragment(this.content,e);return!!s&&s.validEnd},Ir.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Ir.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=Cr.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Cr.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(r){return r.type.name}));this.content.forEach(function(r){return r.check()})},Ir.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(r){return r.toJSON()})),t},Ir.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,r)}var i=Dt.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,i,r)},Object.defineProperties(Ir.prototype,Ea);var Aye=function(n){function t(r,i,o,s){if(n.call(this,r,i,null,s),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cz(this.marks,JSON.stringify(this.text))},e.textContent.get=function(){return this.text},t.prototype.textBetween=function(i,o){return this.text.slice(i,o)},e.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(i){return i==this.marks?this:new t(this.type,this.attrs,this.text,i)},t.prototype.withText=function(i){return i==this.text?this:new t(this.type,this.attrs,i,this.marks)},t.prototype.cut=function(i,o){return void 0===i&&(i=0),void 0===o&&(o=this.text.length),0==i&&o==this.text.length?this:this.withText(this.text.slice(i,o))},t.prototype.eq=function(i){return this.sameMarkup(i)&&this.text==i.text},t.prototype.toJSON=function(){var i=n.prototype.toJSON.call(this);return i.text=this.text,i},Object.defineProperties(t.prototype,e),t}(Ir);function cz(n,t){for(var e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}var _s=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},p1={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};_s.parse=function(t,e){var r=new g1(t,e);if(null==r.next)return _s.empty;var i=dz(r);r.next&&r.err("Unexpected trailing text");var o=function Oye(n){var t=Object.create(null);return function e(r){var i=[];r.forEach(function(l){n[l].forEach(function(c){var d=c.term,E=c.to;if(d){var U=i.indexOf(d),W=U>-1&&i[U+1];pz(n,E).forEach(function(ne){W||i.push(d,W=[]),-1==W.indexOf(ne)&&W.push(ne)})}})});for(var o=t[r.join(",")]=new _s(r.indexOf(n.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(fz);o.next.push(i[s],t[a.join(",")]||e(a))}return o}(pz(n,0))}(function Rye(n){var t=[[]];return i(function o(s,a){if("choice"==s.type)return s.exprs.reduce(function(Qe,je){return Qe.concat(o(je,a))},[]);if("seq"==s.type)for(var l=0;;l++){var c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=e())}else{if("star"==s.type){var d=e();return r(a,d),i(o(s.expr,d),d),[r(d)]}if("plus"==s.type){var E=e();return i(o(s.expr,a),E),i(o(s.expr,E),E),[r(E)]}if("opt"==s.type)return[r(a)].concat(o(s.expr,a));if("range"==s.type){for(var U=a,W=0;W<s.min;W++){var ne=e();i(o(s.expr,U),ne),U=ne}if(-1==s.max)i(o(s.expr,U),U);else for(var Ce=s.min;Ce<s.max;Ce++){var Pe=e();r(U,Pe),i(o(s.expr,U),Pe),U=Pe}return[r(U)]}if("name"==s.type)return[r(a,null,s.value)]}}(n,0),e()),t;function e(){return t.push([])-1}function r(s,a,l){var c={term:l,to:a};return t[s].push(c),c}function i(s,a){s.forEach(function(l){return l.to=a})}}(i));return function Pye(n,t){for(var e=0,r=[n];e<r.length;e++){for(var i=r[e],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var l=i.next[a],c=i.next[a+1];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),-1==r.indexOf(c)&&r.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,r),o},_s.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},_s.prototype.matchFragment=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.childCount);for(var i=this,o=e;i&&o<r;o++)i=i.matchType(t.child(o).type);return i},p1.inlineContent.get=function(){var n=this.next[0];return!!n&&n.isInline},p1.defaultType.get=function(){for(var n=0;n<this.next.length;n+=2){var t=this.next[n];if(!t.isText&&!t.hasRequiredAttrs())return t}},_s.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var r=0;r<t.next.length;r+=2)if(this.next[e]==t.next[r])return!0;return!1},_s.prototype.fillBefore=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=0);var i=[this];return function o(s,a){var l=s.matchFragment(t,r);if(l&&(!e||l.validEnd))return Dt.from(a.map(function(W){return W.createAndFill()}));for(var c=0;c<s.next.length;c+=2){var d=s.next[c],E=s.next[c+1];if(!d.isText&&!d.hasRequiredAttrs()&&-1==i.indexOf(E)){i.push(E);var U=o(E,a.concat(d));if(U)return U}}}(this,[])},_s.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var r=this.computeWrapping(t);return this.wrapCache.push(t,r),r},_s.prototype.computeWrapping=function(t){for(var e=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var i=r.shift(),o=i.match;if(o.matchType(t)){for(var s=[],a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(var l=0;l<o.next.length;l+=2){var c=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in e)&&(!i.type||o.next[l+1].validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),e[c.name]=!0)}}},p1.edgeCount.get=function(){return this.next.length>>1},_s.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},_s.prototype.toString=function(){var t=[];return function e(r){t.push(r);for(var i=1;i<r.next.length;i+=2)-1==t.indexOf(r.next[i])&&e(r.next[i])}(this),t.map(function(r,i){for(var o=i+(r.validEnd?"*":" ")+" ",s=0;s<r.next.length;s+=2)o+=(s?", ":"")+r.next[s].name+"->"+t.indexOf(r.next[s+1]);return o}).join("\n")},Object.defineProperties(_s.prototype,p1),_s.empty=new _s(!0);var g1=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},uz={next:{configurable:!0}};function dz(n){var t=[];do{t.push(kye(n))}while(n.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function kye(n){var t=[];do{t.push(Dye(n))}while(n.next&&")"!=n.next&&"|"!=n.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Dye(n){for(var t=function Iye(n){if(n.eat("(")){var t=dz(n);return n.eat(")")||n.err("Missing closing paren"),t}if(!/\W/.test(n.next)){var e=function Mye(n,t){var e=n.nodeTypes,r=e[t];if(r)return[r];var i=[];for(var o in e){var s=e[o];s.groups.indexOf(t)>-1&&i.push(s)}return 0==i.length&&n.err("No node type or group '"+t+"' found"),i}(n,n.next).map(function(r){return null==n.inline?n.inline=r.isInline:n.inline!=r.isInline&&n.err("Mixing inline and block content"),{type:"name",value:r}});return n.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}n.err("Unexpected token '"+n.next+"'")}(n);;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else{if(!n.eat("{"))break;t=Tye(n,t)}return t}function hz(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");var t=Number(n.next);return n.pos++,t}function Tye(n,t){var e=hz(n),r=e;return n.eat(",")&&(r="}"!=n.next?hz(n):-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:r,expr:t}}function fz(n,t){return t-n}function pz(n,t){var e=[];return function r(i){var o=n[i];if(1==o.length&&!o[0].term)return r(o[0].to);e.push(i);for(var s=0;s<o.length;s++){var a=o[s],c=a.to;!a.term&&-1==e.indexOf(c)&&r(c)}}(t),e.sort(fz)}function gz(n){var t=Object.create(null);for(var e in n){var r=n[e];if(!r.hasDefault)return null;t[e]=r.default}return t}function mz(n,t){var e=Object.create(null);for(var r in n){var i=t&&t[r];if(void 0===i){var o=n[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}e[r]=i}return e}function yz(n){var t=Object.create(null);if(n)for(var e in n)t[e]=new vz(n[e]);return t}uz.next.get=function(){return this.tokens[this.pos]},g1.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},g1.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(g1.prototype,uz);var zs=function(t,e,r){this.name=t,this.schema=e,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=yz(r.attrs),this.defaultAttrs=gz(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t},gg={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};gg.isInline.get=function(){return!this.isBlock},gg.isTextblock.get=function(){return this.isBlock&&this.inlineContent},gg.isLeaf.get=function(){return this.contentMatch==_s.empty},gg.isAtom.get=function(){return this.isLeaf||this.spec.atom},gg.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},zs.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},zs.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},zs.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:mz(this.attrs,t)},zs.prototype.create=function(t,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ir(this,this.computeAttrs(t),Dt.from(e),Cr.setFrom(r))},zs.prototype.createChecked=function(t,e,r){if(e=Dt.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Ir(this,this.computeAttrs(t),e,Cr.setFrom(r))},zs.prototype.createAndFill=function(t,e,r){if(t=this.computeAttrs(t),(e=Dt.from(e)).size){var i=this.contentMatch.fillBefore(e);if(!i)return null;e=i.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(Dt.empty,!0);return o?new Ir(this,t,e.append(o),Cr.setFrom(r)):null},zs.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0},zs.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},zs.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},zs.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?e&&e.push(t[r]):e||(e=t.slice(0,r));return e?e.length?e:Cr.empty:t},zs.compile=function(t,e){var r=Object.create(null);t.forEach(function(s,a){return r[s]=new zs(s,e,a)});var i=e.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r},Object.defineProperties(zs.prototype,gg);var vz=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},_z={isRequired:{configurable:!0}};_z.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(vz.prototype,_z);var Dd=function(t,e,r,i){this.name=t,this.schema=r,this.spec=i,this.attrs=yz(i.attrs),this.rank=e,this.excluded=null;var o=gz(this.attrs);this.instance=o&&new Cr(this,o)};Dd.prototype.create=function(t){return!t&&this.instance?this.instance:new Cr(this,mz(this.attrs,t))},Dd.compile=function(t,e){var r=Object.create(null),i=0;return t.forEach(function(o,s){return r[o]=new Dd(o,i++,e,s)}),r},Dd.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},Dd.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Dd.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Qh=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=ez.from(t.nodes),this.spec.marks=ez.from(t.marks),this.nodes=zs.compile(this.spec.nodes,this),this.marks=Dd.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[s]||(r[s]=_s.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?bz(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],d=c.spec.excludes;c.excluded=null==d?[c]:""==d?[]:bz(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function bz(n,t){for(var e=[],r=0;r<t.length;r++){var i=t[r],o=n.marks[i],s=o;if(o)e.push(o);else for(var a in n.marks){var l=n.marks[a];("_"==i||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&e.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return e}Qh.prototype.node=function(t,e,r,i){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof zs))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,r,i)},Qh.prototype.text=function(t,e){var r=this.nodes.text;return new Aye(r,r.defaultAttrs,t,Cr.setFrom(e))},Qh.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Qh.prototype.nodeFromJSON=function(t){return Ir.fromJSON(this,t)},Qh.prototype.markFromJSON=function(t){return Cr.fromJSON(this,t)},Qh.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var sl=function(t,e){var r=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(i){i.tag?r.tags.push(i):i.style&&r.styles.push(i)}),this.normalizeLists=!this.tags.some(function(i){if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;var o=t.nodes[i.node];return o.contentMatch.matchType(o)})};sl.prototype.parse=function(t,e){void 0===e&&(e={});var r=new vi(this,e,!1);return r.addAll(t,null,e.from,e.to),r.finish()},sl.prototype.parseSlice=function(t,e){void 0===e&&(e={});var r=new vi(this,e,!0);return r.addAll(t,null,e.from,e.to),Qt.maxOpen(r.finish())},sl.prototype.matchTag=function(t,e,r){for(var i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){var o=this.tags[i];if(Lye(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},sl.prototype.matchStyle=function(t,e,r,i){for(var o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){var s=this.styles[o];if(!(0!=s.style.indexOf(t)||s.context&&!r.matchesContext(s.context)||s.style.length>t.length&&(61!=s.style.charCodeAt(t.length)||s.style.slice(t.length+1)!=e))){if(s.getAttrs){var a=s.getAttrs(e);if(!1===a)continue;s.attrs=a}return s}}},sl.schemaRules=function(t){var e=[];function r(l){for(var c=null==l.priority?50:l.priority,d=0;d<e.length;d++){var E=e[d];if((null==E.priority?50:E.priority)<c)break}e.splice(d,0,l)}var c,i=function(l){var c=t.marks[l].spec.parseDOM;c&&c.forEach(function(d){r(d=Sz(d)),d.mark=l})};for(var o in t.marks)i(o);for(var a in t.nodes)c=void 0,(c=t.nodes[a].spec.parseDOM)&&c.forEach(function(d){r(d=Sz(d)),d.node=a});return e},sl.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new sl(t,sl.schemaRules(t)))};var CI={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fye={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},wz={ol:!0,ul:!0};function xz(n,t,e){return null!=t?(t?1:0)|("full"===t?2:0):n&&"pre"==n.whitespace?3:-5&e}var Tu=function(t,e,r,i,o,s,a){this.type=t,this.attrs=e,this.solid=o,this.match=s||(4&a?null:t.contentMatch),this.options=a,this.content=[],this.marks=r,this.activeMarks=Cr.none,this.pendingMarks=i,this.stashMarks=[]};Tu.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(Dt.from(t));if(!e){var i,r=this.type.contentMatch;return(i=r.findWrapping(t.type))?(this.match=r,i):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Tu.prototype.finish=function(t){if(!(1&this.options)){var r,e=this.content[this.content.length-1];e&&e.isText&&(r=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-r[0].length)))}var i=Dt.from(this.content);return!t&&this.match&&(i=i.append(this.match.fillBefore(Dt.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i},Tu.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Tu.prototype.applyPending=function(t){for(var e=0,r=this.pendingMarks;e<r.length;e++){var i=r[e];(this.type?this.type.allowsMarkType(i.type):Uye(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}},Tu.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!CI.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var vi=function(t,e,r){this.parser=t,this.options=e,this.isOpen=r;var o,i=e.topNode,s=xz(null,e.preserveWhitespace,0)|(r?4:0);o=i?new Tu(i.type,i.attrs,Cr.none,Cr.none,!0,e.topMatch||i.type.contentMatch,s):new Tu(r?null:t.schema.topNodeType,null,Cr.none,Cr.none,!0,null,s),this.nodes=[o],this.open=0,this.find=e.findPositions,this.needsBlock=!1},EI={top:{configurable:!0},currentPos:{configurable:!0}};function Lye(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function Sz(n){var t={};for(var e in n)t[e]=n[e];return t}function Uye(n,t){var e=t.schema.nodes,r=function(s){var a=e[s];if(a.allowsMarkType(n)){var l=[],c=function(d){l.push(d);for(var E=0;E<d.edgeCount;E++){var U=d.edge(E),ne=U.next;if(U.type==t||l.indexOf(ne)<0&&c(ne))return!0}};if(c(a.contentMatch))return{v:!0}}};for(var i in e){var o=r(i);if(o)return o.v}}EI.top.get=function(){return this.nodes[this.open]},vi.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),r=e?this.readStyles(function Bye(n){for(var e,t=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=t.exec(n);)r.push(e[1],e[2].trim());return r}(e)):null,i=this.top;if(null!=r)for(var o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(t),null!=r)for(var s=0;s<r.length;s++)this.removePendingMark(r[s],i)}},vi.prototype.addTextNode=function(t){var e=t.nodeValue,r=this.top;if(2&r.options||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&r.options)e=2&r.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var i=r.content[r.content.length-1],o=t.previousSibling;(!i||o&&"BR"==o.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},vi.prototype.addElement=function(t,e){var i,r=t.nodeName.toLowerCase();wz.hasOwnProperty(r)&&this.parser.normalizeLists&&function Nye(n){for(var t=n.firstChild,e=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&wz.hasOwnProperty(r)&&e?(e.appendChild(t),t=e):"li"==r?e=t:r&&(e=null)}}(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,e));if(o?o.ignore:Fye.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var s,a=this.top,l=this.needsBlock;if(CI.hasOwnProperty(r))s=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),s&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,o,!1===o.consuming?i:null)},vi.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},vi.prototype.ignoreFallback=function(t){"BR"==t.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))},vi.prototype.readStyles=function(t){var e=Cr.none;e:for(var r=0;r<t.length;r+=2)for(var i=null;;){var o=this.parser.matchStyle(t[r],t[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;i=o}return e},vi.prototype.addElementByRule=function(t,e,r){var o,s,l,i=this;e.node?(s=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(s.create(e.attrs))||this.leafFallback(t):o=this.enter(s,e.attrs,e.preserveWhitespace):(l=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(l));var c=this.top;if(s&&s.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(E){return i.insertNode(E)});else{var d=e.contentElement;"string"==typeof d?d=t.querySelector(d):"function"==typeof d&&(d=d(t)),d||(d=t),this.findAround(t,d,!0),this.addAll(d,o)}o&&(this.sync(c),this.open--),l&&this.removePendingMark(l,c)},vi.prototype.addAll=function(t,e,r,i){for(var o=r||0,s=r?t.childNodes[r]:t.firstChild,a=null==i?null:t.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(s),e&&CI.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},vi.prototype.findPlace=function(t){for(var e,r,i=this.open;i>=0;i--){var o=this.nodes[i],s=o.findWrapping(t);if(s&&(!e||e.length>s.length)&&(e=s,r=o,!s.length)||o.solid)break}if(!e)return!1;this.sync(r);for(var a=0;a<e.length;a++)this.enterInner(e[a],null,!1);return!0},vi.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var r=this.top;r.applyPending(t.type),r.match&&(r.match=r.match.matchType(t.type));for(var i=r.activeMarks,o=0;o<t.marks.length;o++)(!r.type||r.type.allowsMarkType(t.marks[o].type))&&(i=t.marks[o].addToSet(i));return r.content.push(t.mark(i)),!0}return!1},vi.prototype.enter=function(t,e,r){var i=this.findPlace(t.create(e));return i&&this.enterInner(t,e,!0,r),i},vi.prototype.enterInner=function(t,e,r,i){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var s=xz(t,i,o.options);4&o.options&&0==o.content.length&&(s|=4),this.nodes.push(new Tu(t,e,o.activeMarks,o.pendingMarks,r,null,s)),this.open++},vi.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},vi.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},vi.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},EI.currentPos.get=function(){this.closeExtra();for(var n=0,t=this.open;t>=0;t--){for(var e=this.nodes[t].content,r=e.length-1;r>=0;r--)n+=e[r].nodeSize;t&&n++}return n},vi.prototype.findAtPoint=function(t,e){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==e&&(this.find[r].pos=this.currentPos)},vi.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},vi.prototype.findAround=function(t,e,r){if(t!=e&&this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==t.nodeType&&t.contains(this.find[i].node)&&e.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)},vi.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},vi.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var r=t.split("/"),i=this.options.context,o=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),s=(o?0:1)-(i?i.depth+1:0),a=function(l,c){for(;l>=0;l--){var d=r[l];if(""==d){if(l==r.length-1||0==l)continue;for(;c>=s;c--)if(a(l-1,c))return!0;return!1}var E=c>0||0==c&&o?e.nodes[c].type:i&&c>=s?i.node(c-s).type:null;if(!E||E.name!=d&&-1==E.groups.indexOf(d))return!1;c--}return!0};return a(r.length-1,this.open)},vi.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var r=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var i in this.parser.schema.nodes){var o=this.parser.schema.nodes[i];if(o.isTextblock&&o.defaultAttrs)return o}},vi.prototype.addPendingMark=function(t){var e=function jye(n,t){for(var e=0;e<t.length;e++)if(n.eq(t[e]))return t[e]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},vi.prototype.removePendingMark=function(t,e){for(var r=this.open;r>=0;r--){var i=this.nodes[r];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);var s=i.popFromStashMark(t);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==e)break}},Object.defineProperties(vi.prototype,EI);var ns=function(t,e){this.nodes=t||{},this.marks=e||{}};function Cz(n){var t={};for(var e in n){var r=n[e].spec.toDOM;r&&(t[e]=r)}return t}function AI(n){return n.document||window.document}ns.prototype.serializeFragment=function(t,e,r){var i=this;void 0===e&&(e={}),r||(r=AI(e).createDocumentFragment());var o=r,s=null;return t.forEach(function(a){if(s||a.marks.length){s||(s=[]);for(var l=0,c=0;l<s.length&&c<a.marks.length;){var d=a.marks[c];if(i.marks[d.type.name]){if(!d.eq(s[l])||!1===d.type.spec.spanning)break;l+=2,c++}else c++}for(;l<s.length;)o=s.pop(),s.pop();for(;c<a.marks.length;){var E=a.marks[c++],U=i.serializeMark(E,a.isInline,e);U&&(s.push(E,o),o.appendChild(U.dom),o=U.contentDOM||U.dom)}}o.appendChild(i.serializeNodeInner(a,e))}),r},ns.prototype.serializeNodeInner=function(t,e){void 0===e&&(e={});var r=ns.renderSpec(AI(e),this.nodes[t.type.name](t)),i=r.dom,o=r.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return i},ns.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var r=this.serializeNodeInner(t,e),i=t.marks.length-1;i>=0;i--){var o=this.serializeMark(t.marks[i],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r},ns.prototype.serializeMark=function(t,e,r){void 0===r&&(r={});var i=this.marks[t.type.name];return i&&ns.renderSpec(AI(r),i(t,e))},ns.renderSpec=function(t,e,r){if(void 0===r&&(r=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var i=e[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));var s=null,a=r?t.createElementNS(r,i):t.createElement(i),l=e[1],c=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l))for(var d in c=2,l)if(null!=l[d]){var E=d.indexOf(" ");E>0?a.setAttributeNS(d.slice(0,E),d.slice(E+1),l[d]):a.setAttribute(d,l[d])}for(var U=c;U<e.length;U++){var W=e[U];if(0===W){if(U<e.length-1||U>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var ne=ns.renderSpec(t,W,r),Pe=ne.contentDOM;if(a.appendChild(ne.dom),Pe){if(s)throw new RangeError("Multiple content holes");s=Pe}}return{dom:a,contentDOM:s}},ns.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new ns(this.nodesFromSchema(t),this.marksFromSchema(t)))},ns.nodesFromSchema=function(t){var e=Cz(t.nodes);return e.text||(e.text=function(r){return r.text}),e},ns.marksFromSchema=function(t){return Cz(t.marks)};var Az=Math.pow(2,16);function Hye(n,t){return n+t*Az}function kz(n){return 65535&n}var kI=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},rs=function n(t,e){if(void 0===e&&(e=!1),!t.length&&n.empty)return n.empty;this.ranges=t,this.inverted=e};rs.prototype.recover=function(t){var e=0,r=kz(t);if(!this.inverted)for(var i=0;i<r;i++)e+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*r]+e+function Vye(n){return(n-(65535&n))/Az}(t)},rs.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},rs.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},rs.prototype._map=function(t,e,r){for(var i=0,o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;var c=this.ranges[a+o],d=this.ranges[a+s],E=l+c;if(t<=E){var W=l+i+((c?t==l?-1:t==E?1:e:e)<0?0:d);if(r)return W;var ne=t==(e<0?l:E)?null:Hye(a/3,t-l);return new kI(W,e<0?t!=l:t!=E,ne)}i+=d-c}return r?t+i:new kI(t+i)},rs.prototype.touches=function(t,e){for(var r=0,i=kz(e),o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;var c=this.ranges[a+o];if(t<=l+c&&a==3*i)return!0;r+=this.ranges[a+s]-c}return!1},rs.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,i=0,o=0;i<this.ranges.length;i+=3){var s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+e],d=this.ranges[i+r];t(a,a+c,l,l+d),o+=d-c}},rs.prototype.invert=function(){return new rs(this.ranges,!this.inverted)},rs.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},rs.offset=function(t){return 0==t?rs.empty:new rs(t<0?[0,-t,0]:[0,0,t])},rs.empty=new rs([]);var bs=function(t,e,r,i){this.maps=t||[],this.from=r||0,this.to=null==i?this.maps.length:i,this.mirror=e};function mg(n){var t=Error.call(this,n);return t.__proto__=mg.prototype,t}bs.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new bs(this.maps,this.mirror,t,e)},bs.prototype.copy=function(){return new bs(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},bs.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},bs.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var i=t.getMirror(e);this.appendMap(t.maps[e],null!=i&&i<e?r+i:null)}},bs.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},bs.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},bs.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var i=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=i&&i>e?r-i-1:null)}},bs.prototype.invert=function(){var t=new bs;return t.appendMappingInverted(this),t},bs.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},bs.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},bs.prototype._map=function(t,e,r){for(var i=!1,o=this.from;o<this.to;o++){var a=this.maps[o].mapResult(t,e);if(null!=a.recover){var l=this.getMirror(o);if(null!=l&&l>o&&l<this.to){o=l,t=this.maps[l].recover(a.recover);continue}}a.deleted&&(i=!0),t=a.pos}return r?t:new kI(t,i)},(mg.prototype=Object.create(Error.prototype)).constructor=mg,mg.prototype.name="TransformError";var ao=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new bs},DI={before:{configurable:!0},docChanged:{configurable:!0}};function v1(){throw new Error("Override me")}DI.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ao.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new mg(e.failed);return this},ao.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},DI.docChanged.get=function(){return this.steps.length>0},ao.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(ao.prototype,DI);var TI=Object.create(null),ws=function(){};ws.prototype.apply=function(t){return v1()},ws.prototype.getMap=function(){return rs.empty},ws.prototype.invert=function(t){return v1()},ws.prototype.map=function(t){return v1()},ws.prototype.merge=function(t){return null},ws.prototype.toJSON=function(){return v1()},ws.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=TI[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},ws.jsonID=function(t,e){if(t in TI)throw new RangeError("Duplicate use of step JSON ID "+t);return TI[t]=e,e.prototype.jsonID=t,e};var Ws=function(t,e){this.doc=t,this.failed=e};Ws.ok=function(t){return new Ws(t,null)},Ws.fail=function(t){return new Ws(null,t)},Ws.fromReplace=function(t,e,r,i){try{return Ws.ok(t.replace(e,r,i))}catch(o){if(o instanceof Dc)return Ws.fail(o.message);throw o}};var Td=function(n){function t(e,r,i,o){n.call(this),this.from=e,this.to=r,this.slice=i,this.structure=!!o}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.apply=function(r){return this.structure&&MI(r,this.from,this.to)?Ws.fail("Structure replace would overwrite content"):Ws.fromReplace(r,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new rs([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(r){return new t(this.from,this.from+this.slice.size,r.slice(this.from,this.to))},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1);return i.deleted&&o.deleted?null:new t(i.pos,Math.max(i.pos,o.pos),this.slice)},t.prototype.merge=function(r){if(!(r instanceof t)||r.structure||this.structure)return null;if(this.from+this.slice.size!=r.from||this.slice.openEnd||r.slice.openStart){if(r.to!=this.from||this.slice.openStart||r.slice.openEnd)return null;var o=this.slice.size+r.slice.size==0?Qt.empty:new Qt(r.slice.content.append(this.slice.content),r.slice.openStart,this.slice.openEnd);return new t(r.from,this.to,o,this.structure)}var i=this.slice.size+r.slice.size==0?Qt.empty:new Qt(this.slice.content.append(r.slice.content),this.slice.openStart,r.slice.openEnd);return new t(this.from,this.to+(r.to-r.from),i,this.structure)},t.prototype.toJSON=function(){var r={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(i.from,i.to,Qt.fromJSON(r,i.slice),!!i.structure)},t}(ws);ws.jsonID("replace",Td);var Aa=function(n){function t(e,r,i,o,s,a,l){n.call(this),this.from=e,this.to=r,this.gapFrom=i,this.gapTo=o,this.slice=s,this.insert=a,this.structure=!!l}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.apply=function(r){if(this.structure&&(MI(r,this.from,this.gapFrom)||MI(r,this.gapTo,this.to)))return Ws.fail("Structure gap-replace would overwrite content");var i=r.slice(this.gapFrom,this.gapTo);if(i.openStart||i.openEnd)return Ws.fail("Gap is not a flat range");var o=this.slice.insertAt(this.insert,i.content);return o?Ws.fromReplace(r,this.from,this.to,o):Ws.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new rs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(r){var i=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,r.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1),s=r.map(this.gapFrom,-1),a=r.map(this.gapTo,1);return i.deleted&&o.deleted||s<i.pos||a>o.pos?null:new t(i.pos,o.pos,s,a,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var r={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,i){if("number"!=typeof i.from||"number"!=typeof i.to||"number"!=typeof i.gapFrom||"number"!=typeof i.gapTo||"number"!=typeof i.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(i.from,i.to,i.gapFrom,i.gapTo,Qt.fromJSON(r,i.slice),i.insert,!!i.structure)},t}(ws);function MI(n,t,e){for(var r=n.resolve(t),i=e-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var s=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function zye(n,t,e){return(0==t||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function v0(n){for(var e=n.parent.content.cutByIndex(n.startIndex,n.endIndex),r=n.depth;;--r){var i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,e))return r;if(0==r||i.type.spec.isolating||!zye(i,o,s))break}}function II(n,t,e,r){void 0===r&&(r=n);var i=function Wye(n,t){var e=n.parent,r=n.startIndex,i=n.endIndex,o=e.contentMatchAt(r).findWrapping(t);return o&&e.canReplaceWith(r,i,o.length?o[0]:t)?o:null}(n,t),o=i&&function $ye(n,t){var e=n.parent,r=n.startIndex,i=n.endIndex,o=e.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;for(var l=(s.length?s[s.length-1]:t).contentMatch,c=r;l&&c<i;c++)l=l.matchType(e.child(c).type);return l&&l.validEnd?s:null}(r,t);return o?i.map(Dz).concat({type:t,attrs:e}).concat(o.map(Dz)):null}function Dz(n){return{type:n,attrs:null}}function yg(n,t,e,r){void 0===e&&(e=1);var i=n.resolve(t),o=i.depth-e,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,l=e-2;a>o;a--,l--){var c=i.node(a),d=i.index(a);if(c.type.spec.isolating)return!1;var E=c.content.cutByIndex(d,c.childCount),U=r&&r[l]||c;if(U!=c&&(E=E.replaceChild(0,U.type.create(U.attrs))),!c.canReplace(d+1,c.childCount)||!U.type.validContent(E))return!1}var W=i.indexAfter(o),ne=r&&r[0];return i.node(o).canReplaceWith(W,W,ne?ne.type:i.node(o+1).type)}function RI(n,t){var e=n.resolve(t),r=e.index();return function Tz(n,t){return n&&t&&!n.isLeaf&&n.canAppend(t)}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function OI(n,t,e){for(var r=[],i=0;i<n.childCount;i++){var o=n.child(i);o.content.size&&(o=o.copy(OI(o.content,t,o))),o.isInline&&(o=t(o,e,i)),r.push(o)}return Dt.fromArray(r)}ws.jsonID("replaceAround",Aa),ao.prototype.lift=function(n,t){for(var e=n.$from,r=n.$to,i=n.depth,o=e.before(i+1),s=r.after(i+1),a=o,l=s,c=Dt.empty,d=0,E=i,U=!1;E>t;E--)U||e.index(E)>0?(U=!0,c=Dt.from(e.node(E).copy(c)),d++):a--;for(var W=Dt.empty,ne=0,Ce=i,Pe=!1;Ce>t;Ce--)Pe||r.after(Ce+1)<r.end(Ce)?(Pe=!0,W=Dt.from(r.node(Ce).copy(W)),ne++):l++;return this.step(new Aa(a,l,o,s,new Qt(c.append(W),d,ne),c.size-d,!0))},ao.prototype.wrap=function(n,t){for(var e=Dt.empty,r=t.length-1;r>=0;r--){if(e.size){var i=t[r].type.contentMatch.matchFragment(e);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}e=Dt.from(t[r].type.create(t[r].attrs,e))}var o=n.start,s=n.end;return this.step(new Aa(o,s,o,s,new Qt(e,0,0),t.length,!0))},ao.prototype.setBlockType=function(n,t,e,r){var i=this;if(void 0===t&&(t=n),!e.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(n,t,function(s,a){if(s.isTextblock&&!s.hasMarkup(e,r)&&function Kye(n,t,e){var r=n.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,e)}(i.doc,i.mapping.slice(o).map(a),e)){i.clearIncompatible(i.mapping.slice(o).map(a,1),e);var l=i.mapping.slice(o),c=l.map(a,1),d=l.map(a+s.nodeSize,1);return i.step(new Aa(c,d,c+1,d-1,new Qt(Dt.from(e.create(r,null,s.marks)),0,0),1,!0)),!1}}),this},ao.prototype.setNodeMarkup=function(n,t,e,r){var i=this.doc.nodeAt(n);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var o=t.create(e,null,r||i.marks);if(i.isLeaf)return this.replaceWith(n,n+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Aa(n,n+i.nodeSize,n+1,n+i.nodeSize-1,new Qt(Dt.from(o),0,0),1,!0))},ao.prototype.split=function(n,t,e){void 0===t&&(t=1);for(var r=this.doc.resolve(n),i=Dt.empty,o=Dt.empty,s=r.depth,a=r.depth-t,l=t-1;s>a;s--,l--){i=Dt.from(r.node(s).copy(i));var c=e&&e[l];o=Dt.from(c?c.type.create(c.attrs,o):r.node(s).copy(o))}return this.step(new Td(n,n,new Qt(i.append(o),t,t),!0))},ao.prototype.join=function(n,t){void 0===t&&(t=1);var e=new Td(n-t,n+t,Qt.empty,!0);return this.step(e)};var PI=function(n){function t(e,r,i){n.call(this),this.from=e,this.to=r,this.mark=i}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.apply=function(r){var i=this,o=r.slice(this.from,this.to),s=r.resolve(this.from),a=s.node(s.sharedDepth(this.to)),l=new Qt(OI(o.content,function(c,d){return c.isAtom&&d.type.allowsMarkType(i.mark.type)?c.mark(i.mark.addToSet(c.marks)):c},a),o.openStart,o.openEnd);return Ws.fromReplace(r,this.from,this.to,l)},t.prototype.invert=function(){return new _0(this.from,this.to,this.mark)},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1);return i.deleted&&o.deleted||i.pos>=o.pos?null:new t(i.pos,o.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(i.from,i.to,r.markFromJSON(i.mark))},t}(ws);ws.jsonID("addMark",PI);var _0=function(n){function t(e,r,i){n.call(this),this.from=e,this.to=r,this.mark=i}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.apply=function(r){var i=this,o=r.slice(this.from,this.to),s=new Qt(OI(o.content,function(a){return a.mark(i.mark.removeFromSet(a.marks))}),o.openStart,o.openEnd);return Ws.fromReplace(r,this.from,this.to,s)},t.prototype.invert=function(){return new PI(this.from,this.to,this.mark)},t.prototype.map=function(r){var i=r.mapResult(this.from,1),o=r.mapResult(this.to,-1);return i.deleted&&o.deleted||i.pos>=o.pos?null:new t(i.pos,o.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(i.from,i.to,r.markFromJSON(i.mark))},t}(ws);function FI(n,t,e,r){if(void 0===e&&(e=t),void 0===r&&(r=Qt.empty),t==e&&!r.size)return null;var i=n.resolve(t),o=n.resolve(e);return Mz(i,o,r)?new Td(t,e,r):new al(i,o,r).fit()}function Mz(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}ws.jsonID("removeMark",_0),ao.prototype.addMark=function(n,t,e){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(n,t,function(l,c,d){if(l.isInline){var E=l.marks;if(!e.isInSet(E)&&d.type.allowsMarkType(e.type)){for(var U=Math.max(c,n),W=Math.min(c+l.nodeSize,t),ne=e.addToSet(E),Ce=0;Ce<E.length;Ce++)E[Ce].isInSet(ne)||(s&&s.to==U&&s.mark.eq(E[Ce])?s.to=W:i.push(s=new _0(U,W,E[Ce])));a&&a.to==U?a.to=W:o.push(a=new PI(U,W,e))}}}),i.forEach(function(l){return r.step(l)}),o.forEach(function(l){return r.step(l)}),this},ao.prototype.removeMark=function(n,t,e){var r=this;void 0===e&&(e=null);var i=[],o=0;return this.doc.nodesBetween(n,t,function(s,a){if(s.isInline){o++;var l=null;if(e instanceof Dd)for(var d,c=s.marks;d=e.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c);else e?e.isInSet(s.marks)&&(l=[e]):l=s.marks;if(l&&l.length)for(var E=Math.min(a+s.nodeSize,t),U=0;U<l.length;U++){for(var W=l[U],ne=void 0,Ce=0;Ce<i.length;Ce++){var Pe=i[Ce];Pe.step==o-1&&W.eq(i[Ce].style)&&(ne=Pe)}ne?(ne.to=E,ne.step=o):i.push({style:W,from:Math.max(a,n),to:E,step:o})}}}),i.forEach(function(s){return r.step(new _0(s.from,s.to,s.style))}),this},ao.prototype.clearIncompatible=function(n,t,e){void 0===e&&(e=t.contentMatch);for(var r=this.doc.nodeAt(n),i=[],o=n+1,s=0;s<r.childCount;s++){var a=r.child(s),l=o+a.nodeSize,c=e.matchType(a.type,a.attrs);if(c){e=c;for(var d=0;d<a.marks.length;d++)t.allowsMarkType(a.marks[d].type)||this.step(new _0(o,l,a.marks[d]))}else i.push(new Td(o,l,Qt.empty));o=l}if(!e.validEnd){var E=e.fillBefore(Dt.empty,!0);this.replace(o,o,new Qt(E,0,0))}for(var U=i.length-1;U>=0;U--)this.step(i[U]);return this},ao.prototype.replace=function(n,t,e){void 0===t&&(t=n),void 0===e&&(e=Qt.empty);var r=FI(this.doc,n,t,e);return r&&this.step(r),this},ao.prototype.replaceWith=function(n,t,e){return this.replace(n,t,new Qt(Dt.from(e),0,0))},ao.prototype.delete=function(n,t){return this.replace(n,t,Qt.empty)},ao.prototype.insert=function(n,t){return this.replaceWith(n,n,t)};var al=function(t,e,r){this.$to=e,this.$from=t,this.unplaced=r,this.frontier=[];for(var i=0;i<=t.depth;i++){var o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}this.placed=Dt.empty;for(var s=t.depth;s>0;s--)this.placed=Dt.from(t.node(s).copy(this.placed))},Iz={depth:{configurable:!0}};function b0(n,t,e){return 0==t?n.cutByIndex(e):n.replaceChild(0,n.firstChild.copy(b0(n.firstChild.content,t-1,e)))}function w0(n,t,e){return 0==t?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(w0(n.lastChild.content,t-1,e)))}function NI(n,t){for(var e=0;e<t;e++)n=n.firstChild.content;return n}function Rz(n,t,e){if(t<=0)return n;var r=n.content;return t>1&&(r=r.replaceChild(0,Rz(r.firstChild,t-1,1==r.childCount?e-1:0))),t>0&&(r=n.type.contentMatch.fillBefore(r).append(r),e<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Dt.empty,!0)))),n.copy(r)}function LI(n,t,e,r,i){var o=n.node(t),s=i?n.indexAfter(t):n.index(t);if(s==o.childCount&&!e.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!function Jye(n,t,e){for(var r=e;r<t.childCount;r++)if(!n.allowsMarks(t.child(r).marks))return!0;return!1}(e,o.content,s)?a:null}function Zye(n){return n.spec.defining||n.spec.definingForContent}function Oz(n,t,e,r,i){if(t<e){var o=n.firstChild;n=n.replaceChild(0,o.copy(Oz(o.content,t+1,e,r,o)))}if(t>r){var s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(Dt.empty,!0))}return n}function Pz(n,t){for(var e=[],i=Math.min(n.depth,t.depth);i>=0;i--){var o=n.start(i);if(o<n.pos-(n.depth-i)||t.end(i)>t.pos+(t.depth-i)||n.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==n.depth&&i==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&e.push(i)}return e}Iz.depth.get=function(){return this.frontier.length-1},al.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;for(var s=this.placed,a=i.depth,l=o.depth;a&&l&&1==s.childCount;)s=s.firstChild.content,a--,l--;var c=new Qt(s,a,l);return e>-1?new Aa(i.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||i.pos!=this.$to.pos?new Td(i.pos,o.pos,c):void 0},al.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var i=void 0,o=(e?(i=NI(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],l=a.type,c=a.match,d=void 0,E=void 0;if(1==t&&(o?c.matchType(o.type)||(E=c.fillBefore(Dt.from(o),!1)):l.compatibleContent(i.type)))return{sliceDepth:e,frontierDepth:s,parent:i,inject:E};if(2==t&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:s,parent:i,wrap:d};if(i&&c.matchType(i.type))break}},al.prototype.openMore=function(){var t=this.unplaced,e=t.content,r=t.openStart,i=t.openEnd,o=NI(e,r);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new Qt(e,r+1,Math.max(i,o.size+r>=e.size-i?r+1:0)),0))},al.prototype.dropNode=function(){var t=this.unplaced,e=t.content,r=t.openStart,i=t.openEnd,o=NI(e,r);if(o.childCount<=1&&r>0){var s=e.size-r<=r+o.size;this.unplaced=new Qt(b0(e,r-1,1),r-1,s?r-1:i)}else this.unplaced=new Qt(b0(e,r,1),r,i)},al.prototype.placeNodes=function(t){for(var e=t.sliceDepth,r=t.frontierDepth,i=t.parent,o=t.inject,s=t.wrap;this.depth>r;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var l=this.unplaced,c=i?i.content:l.content,d=l.openStart-e,E=0,U=[],W=this.frontier[r],ne=W.match,Ce=W.type;if(o){for(var Pe=0;Pe<o.childCount;Pe++)U.push(o.child(Pe));ne=ne.matchFragment(o)}for(var Qe=c.size+e-(l.content.size-l.openEnd);E<c.childCount;){var je=c.child(E),at=ne.matchType(je.type);if(!at)break;(++E>1||0==d||je.content.size)&&(ne=at,U.push(Rz(je.mark(Ce.allowedMarks(je.marks)),1==E?d:0,E==c.childCount?Qe:-1)))}var yt=E==c.childCount;yt||(Qe=-1),this.placed=w0(this.placed,r,Dt.from(U)),this.frontier[r].match=ne,yt&&Qe<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var Ct=0,Vt=c;Ct<Qe;Ct++){var yn=Vt.lastChild;this.frontier.push({type:yn.type,match:yn.contentMatchAt(yn.childCount)}),Vt=yn.content}this.unplaced=yt?0==e?Qt.empty:new Qt(b0(l.content,e-1,1),e-1,Qe<0?l.openEnd:e-1):new Qt(b0(l.content,e,E),l.openStart,l.openEnd)},al.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!LI(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var i=this.$to.depth,o=this.$to.after(i);i>1&&o==this.$to.end(--i);)++o;return o},al.prototype.findCloseLevel=function(t){e:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var r=this.frontier[e],i=r.match,o=r.type,s=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=LI(t,e,o,i,s);if(a){for(var l=e-1;l>=0;l--){var c=this.frontier[l],U=LI(t,l,c.type,c.match,!0);if(!U||U.childCount)continue e}return{depth:e,fit:a,move:s?t.doc.resolve(t.after(e+1)):t}}}},al.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=w0(this.placed,e.depth,e.fit)),t=e.move;for(var r=e.depth+1;r<=t.depth;r++){var i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t},al.prototype.openFrontierNode=function(t,e,r){var i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=w0(this.placed,this.depth,Dt.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})},al.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(Dt.empty,!0);e.childCount&&(this.placed=w0(this.placed,this.frontier.length,e))},Object.defineProperties(al.prototype,Iz),ao.prototype.replaceRange=function(n,t,e){if(!e.size)return this.deleteRange(n,t);var r=this.doc.resolve(n),i=this.doc.resolve(t);if(Mz(r,i,e))return this.step(new Td(n,t,e));var o=Pz(r,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var s=-(r.depth+1);o.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var c=r.node(a).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;o.indexOf(a)>-1?s=a:r.before(a)==l&&o.splice(1,0,-a)}for(var d=o.indexOf(s),E=[],U=e.openStart,W=e.content,ne=0;;ne++){var Ce=W.firstChild;if(E.push(Ce),ne==e.openStart)break;W=Ce.content}for(var Pe=U-1;Pe>=0;Pe--){var Qe=E[Pe].type,je=Zye(Qe);if(je&&r.node(d).type!=Qe)U=Pe;else if(je||!Qe.isTextblock)break}for(var at=e.openStart;at>=0;at--){var yt=(at+U+1)%(e.openStart+1),Ct=E[yt];if(Ct)for(var Vt=0;Vt<o.length;Vt++){var yn=o[(Vt+d)%o.length],Bn=!0;yn<0&&(Bn=!1,yn=-yn);var Qn=r.node(yn-1),_r=r.index(yn-1);if(Qn.canReplaceWith(_r,_r,Ct.type,Ct.marks))return this.replace(r.before(yn),Bn?i.after(yn):t,new Qt(Oz(e.content,0,e.openStart,yt),yt,e.openEnd))}}for(var Qi=this.steps.length,di=o.length-1;di>=0&&(this.replace(n,t,e),!(this.steps.length>Qi));di--){var Gt=o[di];Gt<0||(n=r.before(Gt),t=i.after(Gt))}return this},ao.prototype.replaceRangeWith=function(n,t,e){if(!e.isInline&&n==t&&this.doc.resolve(n).parent.content.size){var r=function Gye(n,t,e){var r=n.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),e))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,e))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,e))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,n,e.type);null!=r&&(n=t=r)}return this.replaceRange(n,t,new Qt(Dt.from(e),0,0))},ao.prototype.deleteRange=function(n,t){for(var e=this.doc.resolve(n),r=this.doc.resolve(t),i=Pz(e,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||e.node(s).type.contentMatch.validEnd)return this.delete(e.start(s),r.end(s));if(s>0&&(a||e.node(s-1).canReplace(e.index(s-1),r.indexAfter(s-1))))return this.delete(e.before(s),r.after(s))}for(var l=1;l<=e.depth&&l<=r.depth;l++)if(n-e.start(l)==e.depth-l&&t>e.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(e.before(l),t);return this.delete(n,t)};var BI=Object.create(null),Wr=function(t,e,r){this.ranges=r||[new Yye(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},Md={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Md.anchor.get=function(){return this.$anchor.pos},Md.head.get=function(){return this.$head.pos},Md.from.get=function(){return this.$from.pos},Md.to.get=function(){return this.$to.pos},Md.$from.get=function(){return this.ranges[0].$from},Md.$to.get=function(){return this.ranges[0].$to},Md.empty.get=function(){for(var n=this.ranges,t=0;t<n.length;t++)if(n[t].$from.pos!=n[t].$to.pos)return!1;return!0},Wr.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Wr.prototype.replace=function(t,e){void 0===e&&(e=Qt.empty);for(var r=e.content.lastChild,i=null,o=0;o<e.openEnd;o++)i=r,r=r.lastChild;for(var s=t.steps.length,a=this.ranges,l=0;l<a.length;l++){var c=a[l],d=c.$from,E=c.$to,U=t.mapping.slice(s);t.replaceRange(U.map(d.pos),U.map(E.pos),l?Qt.empty:e),0==l&&Fz(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}},Wr.prototype.replaceWith=function(t,e){for(var r=t.steps.length,i=this.ranges,o=0;o<i.length;o++){var s=i[o],a=s.$from,l=s.$to,c=t.mapping.slice(r),d=c.map(a.pos),E=c.map(l.pos);o?t.deleteRange(d,E):(t.replaceRangeWith(d,E,e),Fz(t,r,e.isInline?-1:1))}},Wr.findFrom=function(t,e,r){var i=t.parent.inlineContent?new bi(t):vg(t.node(0),t.parent,t.pos,t.index(),e,r);if(i)return i;for(var o=t.depth-1;o>=0;o--){var s=e<0?vg(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):vg(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(s)return s}},Wr.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new Mu(t.node(0))},Wr.atStart=function(t){return vg(t,t,0,0,1)||new Mu(t)},Wr.atEnd=function(t){return vg(t,t,t.content.size,t.childCount,-1)||new Mu(t)},Wr.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=BI[e.type];if(!r)throw new RangeError("No selection type "+e.type+" defined");return r.fromJSON(t,e)},Wr.jsonID=function(t,e){if(t in BI)throw new RangeError("Duplicate use of selection JSON ID "+t);return BI[t]=e,e.prototype.jsonID=t,e},Wr.prototype.getBookmark=function(){return bi.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Wr.prototype,Md),Wr.prototype.visible=!0;var Yye=function(t,e){this.$from=t,this.$to=e},bi=function(n){function t(r,i){void 0===i&&(i=r),n.call(this,r,i)}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={$cursor:{configurable:!0}};return e.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(i,o){var s=i.resolve(o.map(this.head));if(!s.parent.inlineContent)return n.near(s);var a=i.resolve(o.map(this.anchor));return new t(a.parent.inlineContent?a:s,s)},t.prototype.replace=function(i,o){if(void 0===o&&(o=Qt.empty),n.prototype.replace.call(this,i,o),o==Qt.empty){var s=this.$from.marksAcross(this.$to);s&&i.ensureMarks(s)}},t.prototype.eq=function(i){return i instanceof t&&i.anchor==this.anchor&&i.head==this.head},t.prototype.getBookmark=function(){return new x0(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(i,o){if("number"!=typeof o.anchor||"number"!=typeof o.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(i.resolve(o.anchor),i.resolve(o.head))},t.create=function(i,o,s){void 0===s&&(s=o);var a=i.resolve(o);return new this(a,s==o?a:i.resolve(s))},t.between=function(i,o,s){var a=i.pos-o.pos;if((!s||a)&&(s=a>=0?1:-1),!o.parent.inlineContent){var l=n.findFrom(o,s,!0)||n.findFrom(o,-s,!0);if(!l)return n.near(o,s);o=l.$head}return i.parent.inlineContent||(0==a||(i=(n.findFrom(i,-s,!0)||n.findFrom(i,s,!0)).$anchor).pos<o.pos!=a<0)&&(i=o),new t(i,o)},Object.defineProperties(t.prototype,e),t}(Wr);Wr.jsonID("text",bi);var x0=function(t,e){this.anchor=t,this.head=e};x0.prototype.map=function(t){return new x0(t.map(this.anchor),t.map(this.head))},x0.prototype.resolve=function(t){return bi.between(t.resolve(this.anchor),t.resolve(this.head))};var nr=function(n){function t(e){var r=e.nodeAfter,i=e.node(0).resolve(e.pos+r.nodeSize);n.call(this,e,i),this.node=r}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.map=function(r,i){var o=i.mapResult(this.anchor),s=o.deleted,l=r.resolve(o.pos);return s?n.near(l):new t(l)},t.prototype.content=function(){return new Qt(Dt.from(this.node),0,0)},t.prototype.eq=function(r){return r instanceof t&&r.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new _1(this.anchor)},t.fromJSON=function(r,i){if("number"!=typeof i.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(r.resolve(i.anchor))},t.create=function(r,i){return new this(r.resolve(i))},t.isSelectable=function(r){return!r.isText&&!1!==r.type.spec.selectable},t}(Wr);nr.prototype.visible=!1,Wr.jsonID("node",nr);var _1=function(t){this.anchor=t};_1.prototype.map=function(t){var e=t.mapResult(this.anchor),i=e.pos;return e.deleted?new x0(i,i):new _1(i)},_1.prototype.resolve=function(t){var e=t.resolve(this.anchor),r=e.nodeAfter;return r&&nr.isSelectable(r)?new nr(e):Wr.near(e)};var Mu=function(n){function t(e){n.call(this,e.resolve(0),e.resolve(e.content.size))}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.replace=function(r,i){if(void 0===i&&(i=Qt.empty),i==Qt.empty){r.delete(0,r.doc.content.size);var o=n.atStart(r.doc);o.eq(r.selection)||r.setSelection(o)}else n.prototype.replace.call(this,r,i)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(r){return new t(r)},t.prototype.map=function(r){return new t(r)},t.prototype.eq=function(r){return r instanceof t},t.prototype.getBookmark=function(){return Xye},t}(Wr);Wr.jsonID("all",Mu);var Xye={map:function(){return this},resolve:function(t){return new Mu(t)}};function vg(n,t,e,r,i,o){if(t.inlineContent)return bi.create(n,e);for(var s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){var a=t.child(s);if(a.isAtom){if(!o&&nr.isSelectable(a))return nr.create(n,e-(i<0?a.nodeSize:0))}else{var l=vg(n,a,e+i,i<0?a.childCount:0,i,o);if(l)return l}e+=a.nodeSize*i}}function Fz(n,t,e){var r=n.steps.length-1;if(!(r<t)){var s,i=n.steps[r];(i instanceof Td||i instanceof Aa)&&(n.mapping.maps[r].forEach(function(a,l,c,d){null==s&&(s=d)}),n.setSelection(Wr.near(n.doc.resolve(s),e)))}}var Qye=function(n){function t(r){n.call(this,r.doc),this.time=Date.now(),this.curSelection=r.selection,this.curSelectionFor=0,this.storedMarks=r.storedMarks,this.updated=0,this.meta=Object.create(null)}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return e.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(i){if(i.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=i,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},e.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(i){return this.storedMarks=i,this.updated|=2,this},t.prototype.ensureMarks=function(i){return Cr.sameSet(this.storedMarks||this.selection.$from.marks(),i)||this.setStoredMarks(i),this},t.prototype.addStoredMark=function(i){return this.ensureMarks(i.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(i){return this.ensureMarks(i.removeFromSet(this.storedMarks||this.selection.$head.marks()))},e.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(i,o){n.prototype.addStep.call(this,i,o),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(i){return this.time=i,this},t.prototype.replaceSelection=function(i){return this.selection.replace(this,i),this},t.prototype.replaceSelectionWith=function(i,o){var s=this.selection;return!1!==o&&(i=i.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Cr.none))),s.replaceWith(this,i),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(i,o,s){void 0===s&&(s=o);var a=this.doc.type.schema;if(null==o)return i?this.replaceSelectionWith(a.text(i),!0):this.deleteSelection();if(!i)return this.deleteRange(o,s);var l=this.storedMarks;if(!l){var c=this.doc.resolve(o);l=s==o?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(o,s,a.text(i,l)),this.selection.empty||this.setSelection(Wr.near(this.selection.$to)),this},t.prototype.setMeta=function(i,o){return this.meta["string"==typeof i?i:i.key]=o,this},t.prototype.getMeta=function(i){return this.meta["string"==typeof i?i:i.key]},e.isGeneric.get=function(){for(var r in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},e.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,e),t}(ao);function Bz(n,t){return t&&n?n.bind(t):n}var S0=function(t,e,r){this.name=t,this.init=Bz(e.init,r),this.apply=Bz(e.apply,r)},e0e=[new S0("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new S0("selection",{init:function(t,e){return t.selection||Wr.atStart(e.doc)},apply:function(t){return t.selection}}),new S0("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,r,i){return i.selection.$cursor?t.storedMarks:null}}),new S0("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],UI=function(t,e){var r=this;this.schema=t,this.fields=e0e.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach(function(i){if(r.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");r.plugins.push(i),r.pluginsByKey[i.key]=i,i.spec.state&&r.fields.push(new S0(i.key,i.spec.state,i))})},xs=function(t){this.config=t},w1={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};w1.schema.get=function(){return this.config.schema},w1.plugins.get=function(){return this.config.plugins},xs.prototype.apply=function(t){return this.applyTransaction(t).state},xs.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=e){var i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0},xs.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],r=this.applyInner(t),i=null;;){for(var o=!1,s=0;s<this.config.plugins.length;s++){var a=this.config.plugins[s];if(a.spec.appendTransaction){var l=i?i[s].n:0,c=i?i[s].state:this,d=l<e.length&&a.spec.appendTransaction.call(a,l?e.slice(l):e,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",t),!i){i=[];for(var E=0;E<this.config.plugins.length;E++)i.push(E<s?{state:r,n:e.length}:{state:this,n:0})}e.push(d),r=r.applyInner(d),o=!0}i&&(i[s]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}},xs.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new xs(this.config),r=this.config.fields,i=0;i<r.length;i++){var o=r[i];e[o.name]=o.apply(t,this[o.name],this,e)}for(var s=0;s<C0.length;s++)C0[s](this,t,e);return e},w1.tr.get=function(){return new Qye(this)},xs.create=function(t){for(var e=new UI(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new xs(e),i=0;i<e.fields.length;i++)r[e.fields[i].name]=e.fields[i].init(t,r);return r},xs.prototype.reconfigure=function(t){for(var e=new UI(this.schema,t.plugins),r=e.fields,i=new xs(e),o=0;o<r.length;o++){var s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(t,i)}return i},xs.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(function(s){return s.toJSON()})),t&&"object"==typeof t)for(var r in t){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var i=t[r],o=i.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(i,this[i.key]))}return e},xs.fromJSON=function(t,e,r){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var i=new UI(t.schema,t.plugins),o=new xs(i);return i.fields.forEach(function(s){if("doc"==s.name)o.doc=Ir.fromJSON(t.schema,e.doc);else if("selection"==s.name)o.selection=Wr.fromJSON(o.doc,e.selection);else if("storedMarks"==s.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var a in r){var l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(o[s.name]=c.fromJSON.call(l,t,e[a],o))}o[s.name]=s.init(t,o)}}),o},xs.addApplyListener=function(t){C0.push(t)},xs.removeApplyListener=function(t){var e=C0.indexOf(t);e>-1&&C0.splice(e,1)},Object.defineProperties(xs.prototype,w1);var C0=[];function Uz(n,t,e){for(var r in n){var i=n[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=Uz(i,t,{})),e[r]=i}return e}var oa=function(t){this.props={},t.props&&Uz(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:jz("plugin")};oa.prototype.getState=function(t){return t[this.key]};var jI=Object.create(null);function jz(n){return n in jI?n+"$"+ ++jI[n]:(jI[n]=0,n+"$")}var sa=function(t){void 0===t&&(t="key"),this.key=jz(t)};sa.prototype.get=function(t){return t.config.pluginsByKey[this.key]},sa.prototype.getState=function(t){return t[this.key]};var Rt={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var HI=/Edge\/(\d+)/.exec(navigator.userAgent),Hz=/MSIE \d/.test(navigator.userAgent),VI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),zI=Rt.ie=!!(Hz||VI||HI);Rt.ie_version=Hz?document.documentMode||6:VI?+VI[1]:HI?+HI[1]:null,Rt.gecko=!zI&&/gecko\/(\d+)/i.test(navigator.userAgent),Rt.gecko_version=Rt.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var WI=!zI&&/Chrome\/(\d+)/.exec(navigator.userAgent);Rt.chrome=!!WI,Rt.chrome_version=WI&&+WI[1],Rt.safari=!zI&&/Apple Computer/.test(navigator.vendor),Rt.ios=Rt.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),Rt.mac=Rt.ios||/Mac/.test(navigator.platform),Rt.android=/Android \d/.test(navigator.userAgent),Rt.webkit="webkitFontSmoothing"in document.documentElement.style,Rt.webkit_version=Rt.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var ka=function(n){for(var t=0;;t++)if(!(n=n.previousSibling))return t},$I=function(n){var t=n.assignedSlot||n.parentNode;return t&&11==t.nodeType?t.host:t},Vz=null,Iu=function(n,t,e){var r=Vz||(Vz=document.createRange());return r.setEnd(n,null==e?n.nodeValue.length:e),r.setStart(n,t||0),r},E0=function(n,t,e,r){return e&&(zz(n,t,e,r,-1)||zz(n,t,e,r,1))},t0e=/^(img|br|input|textarea|hr)$/i;function zz(n,t,e,r,i){for(;;){if(n==e&&t==r)return!0;if(t==(i<0?0:Tc(n))){var o=n.parentNode;if(!o||1!=o.nodeType||r0e(n)||t0e.test(n.nodeName)||"false"==n.contentEditable)return!1;t=ka(n)+(i<0?0:1),n=o}else{if(1!=n.nodeType)return!1;if("false"==(n=n.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?Tc(n):0}}}function Tc(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function r0e(n){for(var t,e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}var KI=function(n){var t=n.isCollapsed;return t&&Rt.chrome&&n.rangeCount&&!n.getRangeAt(0).collapsed&&(t=!1),t};function _g(n,t){var e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function i0e(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Id(n,t){return"number"==typeof n?n:n[t]}function o0e(n){var t=n.getBoundingClientRect();return{left:t.left,right:t.left+n.clientWidth*(t.width/n.offsetWidth||1),top:t.top,bottom:t.top+n.clientHeight*(t.height/n.offsetHeight||1)}}function $z(n){for(var t=[],e=n.ownerDocument;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),n!=e);n=$I(n));return t}function Kz(n,t){for(var e=0;e<n.length;e++){var r=n[e],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var bg=null;function Gz(n,t){for(var e,i,r=2e8,o=0,s=t.top,a=t.top,l=n.firstChild,c=0;l;l=l.nextSibling,c++){var d=void 0;if(1==l.nodeType)d=l.getClientRects();else{if(3!=l.nodeType)continue;d=Iu(l).getClientRects()}for(var E=0;E<d.length;E++){var U=d[E];if(U.top<=s&&U.bottom>=a){s=Math.max(U.bottom,s),a=Math.min(U.top,a);var W=U.left>t.left?U.left-t.left:U.right<t.left?t.left-U.right:0;if(W<r){e=l,r=W,i=W&&3==e.nodeType?{left:U.right<t.left?U.right:U.left,top:t.top}:t,1==l.nodeType&&W&&(o=c+(t.left>=(U.left+U.right)/2?1:0));continue}}!e&&(t.left>=U.right&&t.top>=U.top||t.left>=U.left&&t.top>=U.bottom)&&(o=c+1)}}return e&&3==e.nodeType?function c0e(n,t){for(var e=n.nodeValue.length,r=document.createRange(),i=0;i<e;i++){r.setEnd(n,i+1),r.setStart(n,i);var o=Rd(r,1);if(o.top!=o.bottom&&GI(t,o))return{node:n,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}(e,i):!e||r&&1==e.nodeType?{node:n,offset:o}:Gz(e,i)}function GI(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function qz(n,t,e){var r=n.childNodes.length;if(r&&e.top<e.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-e.top)/(e.bottom-e.top))-2)),o=i;;){var s=n.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(GI(t,c))return qz(s,t,c)}if((o=(o+1)%r)==i)break}return n}function f0e(n,t){var e,r,o,s,i=n.dom.ownerDocument;if(i.caretPositionFromPoint)try{var a=i.caretPositionFromPoint(t.left,t.top);a&&(o=(e=a).offsetNode,s=e.offset)}catch(Pe){}if(!o&&i.caretRangeFromPoint){var l=i.caretRangeFromPoint(t.left,t.top);l&&(o=(r=l).startContainer,s=r.startOffset)}var d,c=(n.root.elementFromPoint?n.root:i).elementFromPoint(t.left,t.top+1);if(!c||!n.dom.contains(1!=c.nodeType?c.parentNode:c)){var E=n.dom.getBoundingClientRect();if(!GI(t,E)||!(c=qz(n.dom,t,E)))return null}if(Rt.safari)for(var U=c;o&&U;U=$I(U))U.draggable&&(o=s=null);if(c=function u0e(n,t){var e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}(c,t),o){if(Rt.gecko&&1==o.nodeType&&(s=Math.min(s,o.childNodes.length))<o.childNodes.length){var ne,W=o.childNodes[s];"IMG"==W.nodeName&&(ne=W.getBoundingClientRect()).right<=t.left&&ne.bottom>t.top&&s++}o==n.dom&&s==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(0==s||1!=o.nodeType||"BR"!=o.childNodes[s-1].nodeName)&&(d=function h0e(n,t,e,r){for(var i=-1,o=t;o!=n.dom;){var s=n.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:n.docView.posFromDOM(t,e)}(n,o,s,t))}null==d&&(d=function d0e(n,t,e){var r=Gz(t,e),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&e.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(i,o,s)}(n,c,t));var Ce=n.docView.nearestDesc(c,!0);return{pos:d,inside:Ce?Ce.posAtStart-Ce.border:-1}}function Rd(n,t){var e=n.getClientRects();return e.length?e[t<0?0:e.length-1]:n.getBoundingClientRect()}var p0e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Jz(n,t,e){var r=n.docView.domFromPos(t,e<0?-1:1),i=r.node,o=r.offset,s=Rt.webkit||Rt.gecko;if(3==i.nodeType){if(!s||!p0e.test(i.nodeValue)&&(e<0?o:o!=i.nodeValue.length)){var d=o,E=o,U=e<0?1:-1;return e<0&&!o?(E++,U=-1):e>=0&&o==i.nodeValue.length?(d--,U=1):e<0?d--:E++,A0(Rd(Iu(i,d,E),U),U<0)}var a=Rd(Iu(i,o,o),e);if(Rt.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var l=Rd(Iu(i,o-1,o-1),-1);if(l.top==a.top){var c=Rd(Iu(i,o,o+1),-1);if(c.top!=a.top)return A0(c,c.left<l.left)}}return a}if(!n.state.doc.resolve(t).parent.inlineContent){if(o&&(e<0||o==Tc(i))){var W=i.childNodes[o-1];if(1==W.nodeType)return qI(W.getBoundingClientRect(),!1)}if(o<Tc(i)){var ne=i.childNodes[o];if(1==ne.nodeType)return qI(ne.getBoundingClientRect(),!0)}return qI(i.getBoundingClientRect(),e>=0)}if(o&&(e<0||o==Tc(i))){var Ce=i.childNodes[o-1],Pe=3==Ce.nodeType?Iu(Ce,Tc(Ce)-(s?0:1)):1!=Ce.nodeType||"BR"==Ce.nodeName&&Ce.nextSibling?null:Ce;if(Pe)return A0(Rd(Pe,1),!1)}if(o<Tc(i)){for(var Qe=i.childNodes[o];Qe.pmViewDesc&&Qe.pmViewDesc.ignoreForCoords;)Qe=Qe.nextSibling;var je=Qe?3==Qe.nodeType?Iu(Qe,0,s?0:1):1==Qe.nodeType?Qe:null:null;if(je)return A0(Rd(je,-1),!0)}return A0(Rd(3==i.nodeType?Iu(i):i,-e),e>=0)}function A0(n,t){if(0==n.width)return n;var e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function qI(n,t){if(0==n.height)return n;var e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function Zz(n,t,e){var r=n.state,i=n.root.activeElement;r!=t&&n.updateState(t),i!=n.dom&&n.focus();try{return e()}finally{r!=t&&n.updateState(r),i!=n.dom&&i&&i.focus()}}var m0e=/[\u0590-\u08ac]/,Yz=null,Xz=null,Qz=!1;var li=function(t,e,r,i){this.parent=t,this.children=e,this.dom=r,r.pmViewDesc=this,this.contentDOM=i,this.dirty=0},Mc={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};li.prototype.matchesWidget=function(){return!1},li.prototype.matchesMark=function(){return!1},li.prototype.matchesNode=function(){return!1},li.prototype.matchesHack=function(t){return!1},li.prototype.parseRule=function(){return null},li.prototype.stopEvent=function(){return!1},Mc.size.get=function(){for(var n=0,t=0;t<this.children.length;t++)n+=this.children[t].size;return n},Mc.border.get=function(){return 0},li.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},li.prototype.posBeforeChild=function(t){for(var e=0,r=this.posAtStart;e<this.children.length;e++){var i=this.children[e];if(i==t)return r;r+=i.size}},Mc.posBefore.get=function(){return this.parent.posBeforeChild(this)},Mc.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Mc.posAfter.get=function(){return this.posBefore+this.size},Mc.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},li.prototype.localPosFromDOM=function(t,e,r){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(r<0){var i,o;if(t==this.contentDOM)i=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&(!(o=i.pmViewDesc)||o.parent!=this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}var s,a;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}var l;if(t==this.dom&&this.contentDOM)l=e>ka(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){l=!1;break}if(c.parentNode.firstChild!=c)break}if(null==l&&e==t.childNodes.length)for(var d=t;;d=d.parentNode){if(d==this.dom){l=!0;break}if(d.parentNode.lastChild!=d)break}}return(null==l?r>0:l)?this.posAtEnd:this.posAtStart},li.prototype.nearestDesc=function(t,e){for(var r=!0,i=t;i;i=i.parentNode){var o=this.getDesc(i);if(o&&(!e||o.node)){if(!r||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;r=!1}}},li.prototype.getDesc=function(t){for(var e=t.pmViewDesc,r=e;r;r=r.parent)if(r==this)return e},li.prototype.posFromDOM=function(t,e,r){for(var i=t;i;i=i.parentNode){var o=this.getDesc(i);if(o)return o.localPosFromDOM(t,e,r)}return-1},li.prototype.descAt=function(t){for(var e=0,r=0;e<this.children.length;e++){var i=this.children[e],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<o)return i.descAt(t-r-i.border);r=o}},li.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,i=0,o=0;r<this.children.length;r++){var s=this.children[r],a=o+s.size;if(a>t||s instanceof o7){i=t-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,e);for(var l=void 0;r&&!(l=this.children[r-1]).size&&l instanceof t7&&l.widget.type.side>=0;r--);if(e<=0){for(var c,d=!0;(c=r?this.children[r-1]:null)&&c.dom.parentNode!=this.contentDOM;r--,d=!1);return c&&e&&d&&!c.border&&!c.domAtom?c.domFromPos(c.size,e):{node:this.contentDOM,offset:c?ka(c.dom)+1:0}}for(var E,U=!0;(E=r<this.children.length?this.children[r]:null)&&E.dom.parentNode!=this.contentDOM;r++,U=!1);return E&&U&&!E.border&&!E.domAtom?E.domFromPos(0,e):{node:this.contentDOM,offset:E?ka(E.dom):this.contentDOM.childNodes.length}},li.prototype.parseRange=function(t,e,r){if(void 0===r&&(r=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var i=-1,o=-1,s=r,a=0;;a++){var l=this.children[a],c=s+l.size;if(-1==i&&t<=c){var d=s+l.border;if(t>=d&&e<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,e,d);t=s;for(var E=a;E>0;E--){var U=this.children[E-1];if(U.size&&U.dom.parentNode==this.contentDOM&&!U.emptyChildAt(1)){i=ka(U.dom)+1;break}t-=U.size}-1==i&&(i=0)}if(i>-1&&(c>e||a==this.children.length-1)){e=c;for(var W=a+1;W<this.children.length;W++){var ne=this.children[W];if(ne.size&&ne.dom.parentNode==this.contentDOM&&!ne.emptyChildAt(-1)){o=ka(ne.dom);break}e+=ne.size}-1==o&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:o}},li.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},li.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),r=e.node,i=e.offset;if(1!=r.nodeType||i==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[i]},li.prototype.setSelection=function(t,e,r,i){for(var o=Math.min(t,e),s=Math.max(t,e),a=0,l=0;a<this.children.length;a++){var c=this.children[a],d=l+c.size;if(o>l&&s<d)return c.setSelection(t-l-c.border,e-l-c.border,r,i);l=d}var E=this.domFromPos(t,t?-1:1),U=e==t?E:this.domFromPos(e,e?-1:1),W=r.getSelection(),ne=!1;if((Rt.gecko||Rt.safari)&&t==e){var Ce=E.node,Pe=E.offset;if(3==Ce.nodeType){if((ne=Pe&&"\n"==Ce.nodeValue[Pe-1])&&Pe==Ce.nodeValue.length)for(var Qe=Ce,je=void 0;Qe;Qe=Qe.parentNode){if(je=Qe.nextSibling){"BR"==je.nodeName&&(E=U={node:je.parentNode,offset:ka(je)+1});break}var at=Qe.pmViewDesc;if(at&&at.node&&at.node.isBlock)break}}else{var yt=Ce.childNodes[Pe-1];ne=yt&&("BR"==yt.nodeName||"false"==yt.contentEditable)}}if(Rt.gecko&&W.focusNode&&W.focusNode!=U.node&&1==W.focusNode.nodeType){var Ct=W.focusNode.childNodes[W.focusOffset];Ct&&"false"==Ct.contentEditable&&(i=!0)}if(i||ne&&Rt.safari||!E0(E.node,E.offset,W.anchorNode,W.anchorOffset)||!E0(U.node,U.offset,W.focusNode,W.focusOffset)){var Vt=!1;if((W.extend||t==e)&&!ne){W.collapse(E.node,E.offset);try{t!=e&&W.extend(U.node,U.offset),Vt=!0}catch(Qn){if(!(Qn instanceof DOMException))throw Qn}}if(!Vt){if(t>e){var yn=E;E=U,U=yn}var Bn=document.createRange();Bn.setEnd(U.node,U.offset),Bn.setStart(E.node,E.offset),W.removeAllRanges(),W.addRange(Bn)}}},li.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Mc.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},li.prototype.markDirty=function(t,e){for(var r=0,i=0;i<this.children.length;i++){var o=this.children[i],s=r+o.size;if(r==s?t<=s&&e>=r:t<s&&e>r){var a=r+o.border,l=s-o.border;if(t>=a&&e<=l)return this.dirty=t==r||e==s?2:1,void(t!=a||e!=l||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-a,e-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}r=s}this.dirty=2},li.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var r=1==t?2:1;e.dirty<r&&(e.dirty=r)}},Mc.domAtom.get=function(){return!1},Mc.ignoreForCoords.get=function(){return!1},Object.defineProperties(li.prototype,Mc);var Od=[],t7=function(n){function t(r,i,o,s){var a,l=i.type.toDOM;if("function"==typeof l&&(l=l(o,function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:s})),!i.type.spec.raw){if(1!=l.nodeType){var c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable=!1,l.classList.add("ProseMirror-widget")}n.call(this,r,Od,l,null),this.widget=i,a=this}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(i){return 0==this.dirty&&i.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(i){var o=this.widget.spec.stopEvent;return!!o&&o(i)},t.prototype.ignoreMutation=function(i){return"selection"!=i.type||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),n.prototype.destroy.call(this)},e.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,e),t}(li),_0e=function(n){function t(r,i,o,s){n.call(this,r,Od,i,null),this.textDOM=o,this.text=s}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={size:{configurable:!0}};return e.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(i,o){return i!=this.textDOM?this.posAtStart+(o?this.size:0):this.posAtStart+o},t.prototype.domFromPos=function(i){return{node:this.textDOM,offset:i}},t.prototype.ignoreMutation=function(i){return"characterData"===i.type&&i.target.nodeValue==i.oldValue},Object.defineProperties(t.prototype,e),t}(li),x1=function(n){function t(e,r,i,o){n.call(this,e,[],i,o),this.mark=r}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.create=function(r,i,o,s){var a=s.nodeViews[i.type.name],l=a&&a(i,s,o);return(!l||!l.dom)&&(l=ns.renderSpec(document,i.type.spec.toDOM(i,o))),new t(r,i,l.dom,l.contentDOM||l.dom)},t.prototype.parseRule=function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(r){return 3!=this.dirty&&this.mark.eq(r)},t.prototype.markDirty=function(r,i){if(n.prototype.markDirty.call(this,r,i),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(r,i,o){var s=t.create(this.parent,this.mark,!0,o),a=this.children,l=this.size;i<l&&(a=YI(a,i,l,o)),r>0&&(a=YI(a,0,r,o));for(var c=0;c<a.length;c++)a[c].parent=s;return s.children=a,s},t}(li),D0=function(n){function t(r,i,o,s,a,l,c,d,E){n.call(this,r,i.isLeaf?Od:[],a,l),this.nodeDOM=c,this.node=i,this.outerDeco=o,this.innerDeco=s,l&&this.updateChildren(d,E)}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(i,o,s,a,l,c){var d,U,E=l.nodeViews[o.type.name],W=E&&E(o,l,function(){return U?U.parent?U.parent.posBeforeChild(U):void 0:c},s,a),ne=W&&W.dom,Ce=W&&W.contentDOM;if(o.isText)if(ne){if(3!=ne.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else ne=document.createTextNode(o.text);else ne||(ne=(d=ns.renderSpec(document,o.type.spec.toDOM(o))).dom,Ce=d.contentDOM);!Ce&&!o.isText&&"BR"!=ne.nodeName&&(ne.hasAttribute("contenteditable")||(ne.contentEditable=!1),o.type.spec.draggable&&(ne.draggable=!0));var Pe=ne;return ne=l7(ne,s,o),W?U=new b0e(i,o,s,a,ne,Ce,Pe,W,l,c+1):o.isText?new r7(i,o,s,a,ne,Pe,l):new t(i,o,s,a,ne,Ce,Pe,l,c+1)},t.prototype.parseRule=function(){var i=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(o.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var s=this.children.length-1;s>=0;s--){var a=this.children[s];if(this.dom.contains(a.dom.parentNode)){o.contentElement=a.dom.parentNode;break}}o.contentElement||(o.getContent=function(){return Dt.empty})}else o.contentElement=this.contentDOM;else o.getContent=function(){return i.node.content};return o},t.prototype.matchesNode=function(i,o,s){return 0==this.dirty&&i.eq(this.node)&&ZI(o,this.outerDeco)&&s.eq(this.innerDeco)},e.size.get=function(){return this.node.nodeSize},e.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(i,o){var s=this,a=this.node.inlineContent,l=o,c=i.composing&&this.localCompositionInfo(i,o),d=c&&c.pos>-1?c:null,E=c&&c.pos<0,U=new ll(this,d&&d.node);(function C0e(n,t,e,r){var i=t.locals(n),o=0;if(0!=i.length)for(var l=0,c=[],d=null,E=0;;){if(l<i.length&&i[l].to==o){for(var U=i[l++],W=void 0;l<i.length&&i[l].to==o;)(W||(W=[U])).push(i[l++]);if(W){W.sort(S0e);for(var ne=0;ne<W.length;ne++)e(W[ne],E,!!d)}else e(U,E,!!d)}var Ce=void 0,Pe=void 0;if(d)Pe=-1,Ce=d,d=null;else{if(!(E<n.childCount))break;Pe=E,Ce=n.child(E++)}for(var Qe=0;Qe<c.length;Qe++)c[Qe].to<=o&&c.splice(Qe--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)c.push(i[l++]);var je=o+Ce.nodeSize;if(Ce.isText){var at=je;l<i.length&&i[l].from<at&&(at=i[l].from);for(var yt=0;yt<c.length;yt++)c[yt].to<at&&(at=c[yt].to);at<je&&(d=Ce.cut(at-o),Ce=Ce.cut(0,at-o),je=at,Pe=-1)}r(Ce,c.length?Ce.isInline&&!Ce.isLeaf?c.filter(function(Vt){return!Vt.inline}):c.slice():Od,t.forChild(o,Ce),Pe),o=je}else for(var s=0;s<n.childCount;s++){var a=n.child(s);r(a,i,t.forChild(o,a),s),o+=a.nodeSize}})(this.node,this.innerDeco,function(W,ne,Ce){W.spec.marks?U.syncToMarks(W.spec.marks,a,i):W.type.side>=0&&!Ce&&U.syncToMarks(ne==s.node.childCount?Cr.none:s.node.child(ne).marks,a,i),U.placeWidget(W,i,l)},function(W,ne,Ce,Pe){var Qe;U.syncToMarks(W.marks,a,i),U.findNodeMatch(W,ne,Ce,Pe)||E&&i.state.selection.from>l&&i.state.selection.to<l+W.nodeSize&&(Qe=U.findIndexWithChild(c.node))>-1&&U.updateNodeAt(W,ne,Ce,Qe,i)||U.updateNextNode(W,ne,Ce,i,Pe)||U.addNode(W,ne,Ce,i,l),l+=W.nodeSize}),U.syncToMarks(Od,a,i),this.node.isTextblock&&U.addTextblockHacks(),U.destroyRest(),(U.changed||2==this.dirty)&&(d&&this.protectLocalComposition(i,d),s7(this.contentDOM,this.children,i),Rt.ios&&function E0e(n){if("UL"==n.nodeName||"OL"==n.nodeName){var t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n),n.style.cssText=t}}(this.dom))},t.prototype.localCompositionInfo=function(i,o){var s=i.state.selection,a=s.from,l=s.to;if(!(!(i.state.selection instanceof bi)||a<o||l>o+this.node.content.size)){var c=i.root.getSelection(),d=function A0e(n,t){for(;;){if(3==n.nodeType)return n;if(1==n.nodeType&&t>0){if(n.childNodes.length>t&&3==n.childNodes[t].nodeType)return n.childNodes[t];t=Tc(n=n.childNodes[t-1])}else{if(!(1==n.nodeType&&t<n.childNodes.length))return null;n=n.childNodes[t],t=0}}}(c.focusNode,c.focusOffset);if(d&&this.dom.contains(d.parentNode)){if(this.node.inlineContent){var E=d.nodeValue,U=function k0e(n,t,e,r){for(var i=0,o=0;i<n.childCount&&o<=r;){var s=n.child(i++),a=o;if(o+=s.nodeSize,s.isText){for(var l=s.text;i<n.childCount;){var c=n.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=e){var d=a<r?l.lastIndexOf(t,r-a-1):-1;if(d>=0&&d+t.length+a>=e)return a+d;if(e==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}}return-1}(this.node.content,E,a-o,l-o);return U<0?null:{node:d,pos:U,text:E}}return{node:d,pos:-1}}}},t.prototype.protectLocalComposition=function(i,o){var s=o.node,a=o.pos,l=o.text;if(!this.getDesc(s)){for(var c=s;c.parentNode!=this.contentDOM;c=c.parentNode){for(;c.previousSibling;)c.parentNode.removeChild(c.previousSibling);for(;c.nextSibling;)c.parentNode.removeChild(c.nextSibling);c.pmViewDesc&&(c.pmViewDesc=null)}var d=new _0e(this,c,s,l);i.compositionNodes.push(d),this.children=YI(this.children,a,a+l.length,i,d)}},t.prototype.update=function(i,o,s,a){return!(3==this.dirty||!i.sameMarkup(this.node)||(this.updateInner(i,o,s,a),0))},t.prototype.updateInner=function(i,o,s,a){this.updateOuterDeco(o),this.node=i,this.innerDeco=s,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(i){if(!ZI(i,this.outerDeco)){var o=1!=this.nodeDOM.nodeType,s=this.dom;this.dom=a7(this.dom,this.nodeDOM,JI(this.outerDeco,this.node,o),JI(i,this.node,o)),this.dom!=s&&(s.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=i}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")},e.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,e),t}(li);function n7(n,t,e,r,i){return l7(r,t,n),new D0(null,n,t,e,r,r,r,i,0)}var r7=function(n){function t(r,i,o,s,a,l,c){n.call(this,r,i,o,s,a,null,l,c)}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var i=this.nodeDOM.parentNode;i&&i!=this.dom&&!i.pmIsDeco;)i=i.parentNode;return{skip:i||!0}},t.prototype.update=function(i,o,s,a){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!i.sameMarkup(this.node)||(this.updateOuterDeco(o),(0!=this.dirty||i.text!=this.node.text)&&i.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=i.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=i,this.dirty=0,0))},t.prototype.inParent=function(){for(var i=this.parent.contentDOM,o=this.nodeDOM;o;o=o.parentNode)if(o==i)return!0;return!1},t.prototype.domFromPos=function(i){return{node:this.nodeDOM,offset:i}},t.prototype.localPosFromDOM=function(i,o,s){return i==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):n.prototype.localPosFromDOM.call(this,i,o,s)},t.prototype.ignoreMutation=function(i){return"characterData"!=i.type&&"selection"!=i.type},t.prototype.slice=function(i,o,s){var a=this.node.cut(i,o),l=document.createTextNode(a.text);return new t(this.parent,a,this.outerDeco,this.innerDeco,l,l,s)},t.prototype.markDirty=function(i,o){n.prototype.markDirty.call(this,i,o),this.dom!=this.nodeDOM&&(0==i||o==this.nodeDOM.nodeValue.length)&&(this.dirty=3)},e.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,e),t}(D0),o7=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(i){return 0==this.dirty&&this.dom.nodeName==i},e.domAtom.get=function(){return!0},e.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,e),t}(li),b0e=function(n){function t(e,r,i,o,s,a,l,c,d,E){n.call(this,e,r,i,o,s,a,l,d,E),this.spec=c}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.update=function(r,i,o,s){if(3==this.dirty)return!1;if(this.spec.update){var a=this.spec.update(r,i,o);return a&&this.updateInner(r,i,o,s),a}return!(!this.contentDOM&&!r.isLeaf)&&n.prototype.update.call(this,r,i,o,s)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():n.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():n.prototype.deselectNode.call(this)},t.prototype.setSelection=function(r,i,o,s){this.spec.setSelection?this.spec.setSelection(r,i,o):n.prototype.setSelection.call(this,r,i,o,s)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),n.prototype.destroy.call(this)},t.prototype.stopEvent=function(r){return!!this.spec.stopEvent&&this.spec.stopEvent(r)},t.prototype.ignoreMutation=function(r){return this.spec.ignoreMutation?this.spec.ignoreMutation(r):n.prototype.ignoreMutation.call(this,r)},t}(D0);function s7(n,t,e){for(var r=n.firstChild,i=!1,o=0;o<t.length;o++){var s=t[o],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=c7(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(s instanceof x1){var l=r?r.previousSibling:n.lastChild;s7(s.contentDOM,s.children,e),r=l?l.nextSibling:n.firstChild}}for(;r;)r=c7(r),i=!0;i&&e.trackWrites==n&&(e.trackWrites=null)}function T0(n){n&&(this.nodeName=n)}T0.prototype=Object.create(null);var ef=[new T0];function JI(n,t,e){if(0==n.length)return ef;for(var r=e?ef[0]:new T0,i=[r],o=0;o<n.length;o++){var s=n[o].type.attrs;if(s)for(var a in s.nodeName&&i.push(r=new T0(s.nodeName)),s){var l=s[a];null!=l&&(e&&1==i.length&&i.push(r=new T0(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+l:"style"==a?r.style=(r.style?r.style+";":"")+l:"nodeName"!=a&&(r[a]=l))}}return i}function a7(n,t,e,r){if(e==ef&&r==ef)return t;for(var i=t,o=0;o<r.length;o++){var s=r[o],a=e[o];if(o){var l=void 0;a&&a.nodeName==s.nodeName&&i!=n&&(l=i.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(i),a=ef[0]),i=l}w0e(i,a||ef[0],s)}return i}function w0e(n,t,e){for(var r in t)"class"!=r&&"style"!=r&&"nodeName"!=r&&!(r in e)&&n.removeAttribute(r);for(var i in e)"class"!=i&&"style"!=i&&"nodeName"!=i&&e[i]!=t[i]&&n.setAttribute(i,e[i]);if(t.class!=e.class){for(var o=t.class?t.class.split(" ").filter(Boolean):Od,s=e.class?e.class.split(" ").filter(Boolean):Od,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&n.classList.remove(o[a]);for(var l=0;l<s.length;l++)-1==o.indexOf(s[l])&&n.classList.add(s[l]);0==n.classList.length&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style)for(var d,c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;d=c.exec(t.style);)n.style.removeProperty(d[1]);e.style&&(n.style.cssText+=e.style)}}function l7(n,t,e){return a7(n,n,ef,JI(t,e,1!=n.nodeType))}function ZI(n,t){if(n.length!=t.length)return!1;for(var e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function c7(n){var t=n.nextSibling;return n.parentNode.removeChild(n),t}var ll=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function x0e(n,t){var e=t,r=e.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){for(var a=void 0;;)if(r){var l=e.children[r-1];if(!(l instanceof x1)){a=l,r--;break}e=l,r=l.children.length}else{if(e==t)break e;r=e.parent.children.indexOf(e),e=e.parent}var c=a.node;if(c){if(c!=n.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(t.node.content,t)};function S0e(n,t){return n.type.side-t.type.side}function YI(n,t,e,r,i){for(var o=[],s=0,a=0;s<n.length;s++){var l=n[s],c=a,d=a+=l.size;c>=e||d<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=null),d>e&&o.push(l.slice(e-c,l.size,r)))}return o}function u7(n,t){var e=n.root.getSelection(),r=n.state.doc;if(!e.focusNode)return null;var i=n.docView.nearestDesc(e.focusNode),o=i&&0==i.size,s=n.docView.posFromDOM(e.focusNode,e.focusOffset);if(s<0)return null;var l,c,a=r.resolve(s);if(KI(e)){for(l=a;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&nr.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function n0e(n,t,e){for(var r=0==t,i=t==Tc(n);r||i;){if(n==e)return!0;var o=ka(n);if(!(n=n.parentNode))return!1;r=r&&0==o,i=i&&o==Tc(n)}}(e.focusNode,e.focusOffset,i.dom))){var d=i.posBefore;c=new nr(s==d?a:r.resolve(d))}}else{var E=n.docView.posFromDOM(e.anchorNode,e.anchorOffset);if(E<0)return null;l=r.resolve(E)}return c||(c=QI(n,l,a,"pointer"==t||n.state.selection.head<a.pos&&!o?1:-1)),c}function d7(n){return n.editable?n.hasFocus():v7(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Pd(n,t){var e=n.state.selection;if(g7(n,e),d7(n)){if(!t&&n.mouseDown&&n.mouseDown.allowDefault&&Rt.chrome){var r=n.root.getSelection(),i=n.domObserver.currentSelection;if(r.anchorNode&&E0(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset))return n.mouseDown.delayedSelectionSync=!0,void n.domObserver.setCurSelection()}if(n.domObserver.disconnectSelection(),n.cursorWrapper)!function T0e(n){var t=n.root.getSelection(),e=document.createRange(),r=n.cursorWrapper.dom,i="IMG"==r.nodeName;i?e.setEnd(r.parentNode,ka(r)+1):e.setEnd(r,0),e.collapse(!1),t.removeAllRanges(),t.addRange(e),!i&&!n.state.selection.visible&&Rt.ie&&Rt.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(n);else{var a,l,o=e.anchor,s=e.head;h7&&!(e instanceof bi)&&(e.$from.parent.inlineContent||(a=f7(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(l=f7(n,e.to))),n.docView.setSelection(o,s,n.root,t),h7&&(a&&p7(a),l&&p7(l)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function D0e(n){var t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.hideSelectionGuard);var e=n.root.getSelection(),r=e.anchorNode,i=e.anchorOffset;t.addEventListener("selectionchange",n.hideSelectionGuard=function(){(e.anchorNode!=r||e.anchorOffset!=i)&&(t.removeEventListener("selectionchange",n.hideSelectionGuard),setTimeout(function(){(!d7(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}ll.prototype.destroyBetween=function(t,e){if(t!=e){for(var r=t;r<e;r++)this.top.children[r].destroy();this.top.children.splice(t,e-t),this.changed=!0}},ll.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ll.prototype.syncToMarks=function(t,e,r){for(var i=0,o=this.stack.length>>1,s=Math.min(o,t.length);i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&!1!==t[i].type.spec.spanning;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var a=-1,l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(t[o])){a=l;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=x1.create(this.top,t[o],e,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},ll.prototype.findNodeMatch=function(t,e,r,i){var s,o=-1;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,e,r))o=this.top.children.indexOf(s,this.index);else for(var a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){var c=this.top.children[a];if(c.matchesNode(t,e,r)&&!this.preMatch.matched.has(c)){o=a;break}}return!(o<0||(this.destroyBetween(this.index,o),this.index++,0))},ll.prototype.updateNodeAt=function(t,e,r,i,o){return!!this.top.children[i].update(t,e,r,o)&&(this.destroyBetween(this.index,i),this.index=i+1,!0)},ll.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var r=t.pmViewDesc;if(r)for(var i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i;return-1}t=e}},ll.prototype.updateNextNode=function(t,e,r,i,o){for(var s=this.index;s<this.top.children.length;s++){var a=this.top.children[s];if(a instanceof D0){var l=this.preMatch.matched.get(a);if(null!=l&&l!=o)return!1;var c=a.dom;if((!this.lock||!(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))||t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&3!=a.dirty&&ZI(e,a.outerDeco))&&a.update(t,e,r,i))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},ll.prototype.addNode=function(t,e,r,i,o){this.top.children.splice(this.index++,0,D0.create(this.top,t,e,r,i,o)),this.changed=!0},ll.prototype.placeWidget=function(t,e,r){var i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(t)||t!=i.widget&&i.widget.type.toDOM.parentNode){var o=new t7(this.top,t,e,r);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},ll.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1],e=this.top;t instanceof x1;)t=(e=t).children[e.children.length-1];(!t||!(t instanceof r7)||/\n$/.test(t.node.text))&&((Rt.safari||Rt.chrome)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))},ll.prototype.addHackNode=function(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{var r=document.createElement(t);"IMG"==t&&(r.className="ProseMirror-separator",r.alt=""),"BR"==t&&(r.className="ProseMirror-trailingBreak");var i=new o7(this.top,Od,r,null);e!=this.top?e.children.push(i):e.children.splice(this.index++,0,i),this.changed=!0}};var h7=Rt.safari||Rt.chrome&&Rt.chrome_version<63;function f7(n,t){var e=n.docView.domFromPos(t,0),r=e.node,i=e.offset,o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(Rt.safari&&o&&"false"==o.contentEditable)return XI(o);if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return XI(o);if(s)return XI(s)}}function XI(n){return n.contentEditable="true",Rt.safari&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function p7(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function g7(n,t){if(t instanceof nr){var e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(m7(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else m7(n)}function m7(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=null)}function QI(n,t,e,r){return n.someProp("createSelectionBetween",function(i){return i(n,t,e)})||bi.between(t,e,r)}function y7(n){return(!n.editable||n.root.activeElement==n.dom)&&v7(n)}function v7(n){var t=n.root.getSelection();if(!t.anchorNode)return!1;try{return n.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function e2(n,t){var e=n.selection,r=e.$anchor,i=e.$head,o=t>0?r.max(i):r.min(i),s=o.parent.inlineContent?o.depth?n.doc.resolve(t>0?o.after():o.before()):null:o;return s&&Wr.findFrom(s,t)}function tf(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function _7(n,t,e){var r=n.state.selection;if(!(r instanceof bi)){if(r instanceof nr&&r.node.isInline)return tf(n,new bi(t>0?r.$to:r.$from));var c=e2(n.state,t);return!!c&&tf(n,c)}if(!r.empty||e.indexOf("s")>-1)return!1;if(n.endOfTextblock(t>0?"right":"left")){var i=e2(n.state,t);return!!(i&&i instanceof nr)&&tf(n,i)}if(!(Rt.mac&&e.indexOf("m")>-1)){var a,o=r.$head,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;var l=t<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(a=n.docView.descAt(l))&&!a.contentDOM)&&(nr.isSelectable(s)?tf(n,new nr(t<0?n.state.doc.resolve(o.pos-s.nodeSize):o)):!!Rt.webkit&&tf(n,new bi(n.state.doc.resolve(t<0?l:l+s.nodeSize))))}}function S1(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function M0(n){var t=n.pmViewDesc;return t&&0==t.size&&(n.nextSibling||"BR"!=n.nodeName)}function t2(n){var t=n.root.getSelection(),e=t.focusNode,r=t.focusOffset;if(e){var i,o,s=!1;for(Rt.gecko&&1==e.nodeType&&r<S1(e)&&M0(e.childNodes[r])&&(s=!0);;)if(r>0){if(1!=e.nodeType)break;var a=e.childNodes[r-1];if(M0(a))i=e,o=--r;else{if(3!=a.nodeType)break;r=(e=a).nodeValue.length}}else{if(b7(e))break;for(var l=e.previousSibling;l&&M0(l);)i=e.parentNode,o=ka(l),l=l.previousSibling;if(l)r=S1(e=l);else{if((e=e.parentNode)==n.dom)break;r=0}}s?r2(n,t,e,r):i&&r2(n,t,i,o)}}function n2(n){var t=n.root.getSelection(),e=t.focusNode,r=t.focusOffset;if(e){for(var o,s,i=S1(e);;)if(r<i){if(1!=e.nodeType)break;if(!M0(e.childNodes[r]))break;o=e,s=++r}else{if(b7(e))break;for(var l=e.nextSibling;l&&M0(l);)o=l.parentNode,s=ka(l)+1,l=l.nextSibling;if(l)r=0,i=S1(e=l);else{if((e=e.parentNode)==n.dom)break;r=i=0}}o&&r2(n,t,o,s)}}function b7(n){var t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function r2(n,t,e,r){if(KI(t)){var i=document.createRange();i.setEnd(e,r),i.setStart(e,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(e,r);n.domObserver.setCurSelection();var o=n.state;setTimeout(function(){n.state==o&&Pd(n)},50)}function w7(n,t,e){var r=n.state.selection;if(r instanceof bi&&!r.empty||e.indexOf("s")>-1||Rt.mac&&e.indexOf("m")>-1)return!1;var i=r.$from,o=r.$to;if(!i.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){var s=e2(n.state,t);if(s&&s instanceof nr)return tf(n,s)}if(!i.parent.inlineContent){var a=t<0?i:o,l=r instanceof Mu?Wr.near(a,t):Wr.findFrom(a,t);return!!l&&tf(n,l)}return!1}function x7(n,t){if(!(n.state.selection instanceof bi))return!0;var e=n.state.selection,r=e.$head,o=e.empty;if(!r.sameParent(e.$anchor))return!0;if(!o)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=n.state.tr;return t<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),n.dispatch(a),!0}return!1}function S7(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function F0e(n){var t=n.pmViewDesc;if(t)return t.parseRule();if("BR"==n.nodeName&&n.parentNode){if(Rt.safari&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){var e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(n.parentNode.lastChild==n||Rt.safari&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if("IMG"==n.nodeName&&n.getAttribute("mark-placeholder"))return{ignore:!0}}function C7(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:QI(n,t.resolve(e.anchor),t.resolve(e.head))}function o2(n,t,e){for(var r=n.depth,i=t?n.end():n.pos;r>0&&(t||n.indexAfter(r)==n.node(r).childCount);)r--,i++,t=!1;if(e)for(var o=n.node(r).maybeChild(n.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function E7(n,t){for(var e=[],r=t.content,i=t.openStart,o=t.openEnd;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;var s=r.firstChild;e.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var a=n.someProp("clipboardSerializer")||ns.fromSchema(n.state.schema),l=O7(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));for(var E,d=c.firstChild;d&&1==d.nodeType&&(E=I7[d.nodeName.toLowerCase()]);){for(var U=E.length-1;U>=0;U--){for(var W=l.createElement(E[U]);c.firstChild;)W.appendChild(c.firstChild);c.appendChild(W),"tbody"!=E[U]&&(i++,o++)}d=c.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",i+" "+o+" "+JSON.stringify(e)),{dom:c,text:n.someProp("clipboardTextSerializer",function(Ce){return Ce(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function A7(n,t,e,r,i){var o,a,s=i.parent.type.spec.code;if(!e&&!t)return null;var l=t&&(r||s||!e);if(l){if(n.someProp("transformPastedText",function(Ct){t=Ct(t,s||r)}),s)return t?new Qt(Dt.from(n.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):Qt.empty;var c=n.someProp("clipboardTextParser",function(Ct){return Ct(t,i,r)});if(c)a=c;else{var d=i.marks(),U=n.state.schema,W=ns.fromSchema(U);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(Ct){var Vt=o.appendChild(document.createElement("p"));Ct&&Vt.appendChild(W.serializeNode(U.text(Ct,d)))})}}else n.someProp("transformPastedHTML",function(Ct){e=Ct(e)}),o=function V0e(n){var t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));var i,e=O7().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n);if((i=r&&I7[r[1].toLowerCase()])&&(n=i.map(function(s){return"<"+s+">"}).join("")+n+i.map(function(s){return"</"+s+">"}).reverse().join("")),e.innerHTML=n,i)for(var o=0;o<i.length;o++)e=e.querySelector(i[o])||e;return e}(e),Rt.webkit&&function z0e(n){for(var t=n.querySelectorAll(Rt.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),e=0;e<t.length;e++){var r=t[e];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}(o);var ne=o&&o.querySelector("[data-pm-slice]"),Ce=ne&&/^(\d+) (\d+) (.*)/.exec(ne.getAttribute("data-pm-slice"));if(!a){var Pe=n.someProp("clipboardParser")||n.someProp("domParser")||sl.fromSchema(n.state.schema);a=Pe.parseSlice(o,{preserveWhitespace:!(!l&&!Ce),context:i,ruleFromNode:function(Vt){if("BR"==Vt.nodeName&&!Vt.nextSibling&&Vt.parentNode&&!j0e.test(Vt.parentNode.nodeName))return{ignore:!0}}})}if(Ce)a=function W0e(n,t){if(!n.size)return n;var r,e=n.content.firstChild.type.schema;try{r=JSON.parse(t)}catch(c){return n}for(var i=n.content,o=n.openStart,s=n.openEnd,a=r.length-2;a>=0;a-=2){var l=e.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Dt.from(l.create(r[a+1],i)),o++,s++}return new Qt(i,o,s)}(M7(a,+Ce[1],+Ce[2]),Ce[3]);else if(a=Qt.maxOpen(function H0e(n,t){if(n.childCount<2)return n;for(var e=function(o){var a=t.node(o).contentMatchAt(t.index(o)),l=void 0,c=[];if(n.forEach(function(d){if(c){var U,E=a.findWrapping(d.type);if(!E)return c=null;if(U=c.length&&l.length&&D7(E,l,d,c[c.length-1],0))c[c.length-1]=U;else{c.length&&(c[c.length-1]=T7(c[c.length-1],l.length));var W=k7(d,E);c.push(W),a=a.matchType(W.type,W.attrs),l=E}}}),c)return{v:Dt.from(c)}},r=t.depth;r>=0;r--){var i=e(r);if(i)return i.v}return n}(a.content,i),!0),a.openStart||a.openEnd){for(var Qe=0,je=0,at=a.content.firstChild;Qe<a.openStart&&!at.type.spec.isolating;Qe++,at=at.firstChild);for(var yt=a.content.lastChild;je<a.openEnd&&!yt.type.spec.isolating;je++,yt=yt.lastChild);a=M7(a,Qe,je)}return n.someProp("transformPasted",function(Ct){a=Ct(a)}),a}var j0e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function k7(n,t,e){void 0===e&&(e=0);for(var r=t.length-1;r>=e;r--)n=t[r].create(null,Dt.from(n));return n}function D7(n,t,e,r,i){if(i<n.length&&i<t.length&&n[i]==t[i]){var o=D7(n,t,e,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?e.type:n[i+1]))return r.copy(r.content.append(Dt.from(k7(e,n,i+1))))}}function T7(n,t){if(0==t)return n;var e=n.content.replaceChild(n.childCount-1,T7(n.lastChild,t-1)),r=n.contentMatchAt(n.childCount).fillBefore(Dt.empty,!0);return n.copy(e.append(r))}function s2(n,t,e,r,i,o){var s=t<0?n.firstChild:n.lastChild,a=s.content;return i<r-1&&(a=s2(a,t,e,r,i+1,o)),i>=e&&(a=t<0?s.contentMatchAt(0).fillBefore(a,n.childCount>1||o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Dt.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,s.copy(a))}function M7(n,t,e){return t<n.openStart&&(n=new Qt(s2(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new Qt(s2(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}var I7={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},R7=null;function O7(){return R7||(R7=document.implementation.createHTMLDocument("title"))}var $0e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},a2=Rt.ie&&Rt.ie_version<=11,l2=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};l2.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},l2.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Da=function(t,e){var r=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(i){for(var o=0;o<i.length;o++)r.queue.push(i[o]);Rt.ie&&Rt.ie_version<=11&&i.some(function(s){return"childList"==s.type&&s.removedNodes.length||"characterData"==s.type&&s.oldValue.length>s.target.nodeValue.length})?r.flushSoon():r.flush()}),this.currentSelection=new l2,a2&&(this.onCharData=function(i){r.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Da.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){t.flushingSoon=-1,t.flush()},20))},Da.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Da.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,$0e),a2&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Da.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(function(){return t.flush()},20)}this.observer.disconnect()}a2&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Da.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Da.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Da.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return t.suppressingSelectionUpdates=!1},50)},Da.prototype.onSelectionChange=function(){if(y7(this.view)){if(this.suppressingSelectionUpdates)return Pd(this.view);if(Rt.ie&&Rt.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&E0(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Da.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Da.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(e);return r&&r.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Da.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&y7(this.view)&&!this.ignoreSelectionChange(e),i=-1,o=-1,s=!1,a=[];if(this.view.editable)for(var l=0;l<t.length;l++){var c=this.registerMutation(t[l],a);c&&(i=i<0?c.from:Math.min(c.from,i),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(s=!0))}if(Rt.gecko&&a.length>1){var d=a.filter(function(W){return"BR"==W.nodeName});if(2==d.length){var E=d[0],U=d[1];E.parentNode&&E.parentNode.parentNode==U.parentNode?U.remove():E.remove()}}(i>-1||r)&&(i>-1&&(this.view.docView.markDirty(i,o),function K0e(n){P7||(P7=!0,"normal"==getComputedStyle(n.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}(this.view)),this.handleDOMChange(i,o,s,a),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||Pd(this.view),this.currentSelection.set(e))}},Da.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var r=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(r==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if("childList"==t.type){for(var i=0;i<t.addedNodes.length;i++)e.push(t.addedNodes[i]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};var o=t.previousSibling,s=t.nextSibling;if(Rt.ie&&Rt.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var l=t.addedNodes[a],c=l.previousSibling,d=l.nextSibling;(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(o=c),(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(s=d)}var E=o&&o.parentNode==t.target?ka(o)+1:0,U=r.localPosFromDOM(t.target,E,-1),W=s&&s.parentNode==t.target?ka(s):t.target.childNodes.length;return{from:U,to:r.localPosFromDOM(t.target,W,1)}}return"attributes"==t.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var P7=!1,aa={},$s={};function nf(n,t){n.lastSelectionOrigin=t,n.lastSelectionTime=Date.now()}function c2(n){n.someProp("handleDOMEvents",function(t){for(var e in t)n.eventHandlers[e]||n.dom.addEventListener(e,n.eventHandlers[e]=function(r){return u2(n,r)})})}function u2(n,t){return n.someProp("handleDOMEvents",function(e){var r=e[t.type];return!!r&&(r(n,t)||t.defaultPrevented)})}function C1(n){return{left:n.clientX,top:n.clientY}}function d2(n,t,e,r,i){if(-1==r)return!1;for(var o=n.state.doc.resolve(r),s=function(c){if(n.someProp(t,function(d){return c>o.depth?d(n,e,o.nodeAfter,o.before(c),i,!0):d(n,e,o.node(c),o.before(c),i,!1)}))return{v:!0}},a=o.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function wg(n,t,e){n.focused||n.focus();var r=n.state.tr.setSelection(t);"pointer"==e&&r.setMeta("pointer",!0),n.dispatch(r)}function tve(n,t,e,r){return d2(n,"handleDoubleClickOn",t,e,r)||n.someProp("handleDoubleClick",function(i){return i(n,t,r)})}function nve(n,t,e,r){return d2(n,"handleTripleClickOn",t,e,r)||n.someProp("handleTripleClick",function(i){return i(n,t,r)})||function rve(n,t,e){if(0!=e.button)return!1;var r=n.state.doc;if(-1==t)return!!r.inlineContent&&(wg(n,bi.create(r,0,r.content.size),"pointer"),!0);for(var i=r.resolve(t),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)wg(n,bi.create(r,a+1,a+1+s.content.size),"pointer");else{if(!nr.isSelectable(s))continue;wg(n,nr.create(r,a),"pointer")}return!0}}(n,e,r)}function h2(n){return A1(n)}$s.keydown=function(n,t){if(n.shiftKey=16==t.keyCode||t.shiftKey,!N7(n,t)&&(n.lastKeyCode=t.keyCode,n.lastKeyCodeTime=Date.now(),!Rt.android||!Rt.chrome||13!=t.keyCode))if(229!=t.keyCode&&n.domObserver.forceFlush(),!Rt.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)n.someProp("handleKeyDown",function(r){return r(n,t)})||function O0e(n,t){var e=t.keyCode,r=function R0e(n){var t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}(t);return 8==e||Rt.mac&&72==e&&"c"==r?x7(n,-1)||t2(n):46==e||Rt.mac&&68==e&&"c"==r?x7(n,1)||n2(n):13==e||27==e||(37==e?_7(n,-1,r)||t2(n):39==e?_7(n,1,r)||n2(n):38==e?w7(n,-1,r)||t2(n):40==e?function I0e(n){if(Rt.safari&&!(n.state.selection.$head.parentOffset>0)){var t=n.root.getSelection(),e=t.focusNode;if(e&&1==e.nodeType&&0==t.focusOffset&&e.firstChild&&"false"==e.firstChild.contentEditable){var i=e.firstChild;S7(n,i,!0),setTimeout(function(){return S7(n,i,!1)},20)}}}(n)||w7(n,1,r)||n2(n):r==(Rt.mac?"m":"c")&&(66==e||73==e||89==e||90==e))}(n,t)?t.preventDefault():nf(n,"key");else{var e=Date.now();n.lastIOSEnter=e,n.lastIOSEnterFallbackTimeout=setTimeout(function(){n.lastIOSEnter==e&&(n.someProp("handleKeyDown",function(r){return r(n,_g(13,"Enter"))}),n.lastIOSEnter=0)},200)}},$s.keyup=function(n,t){16==t.keyCode&&(n.shiftKey=!1)},$s.keypress=function(n,t){if(!(N7(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Rt.mac&&t.metaKey)){if(n.someProp("handleKeyPress",function(i){return i(n,t)}))return void t.preventDefault();var e=n.state.selection;if(!(e instanceof bi&&e.$from.sameParent(e.$to))){var r=String.fromCharCode(t.charCode);n.someProp("handleTextInput",function(i){return i(n,e.$from.pos,e.$to.pos,r)})||n.dispatch(n.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var F7=Rt.mac?"metaKey":"ctrlKey";aa.mousedown=function(n,t){n.shiftKey=t.shiftKey;var e=h2(n),r=Date.now(),i="singleClick";r-n.lastClick.time<500&&function Y0e(n,t){var e=t.x-n.clientX,r=t.y-n.clientY;return e*e+r*r<100}(t,n.lastClick)&&!t[F7]&&("singleClick"==n.lastClick.type?i="doubleClick":"doubleClick"==n.lastClick.type&&(i="tripleClick")),n.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=n.posAtCoords(C1(t));!o||("singleClick"==i?(n.mouseDown&&n.mouseDown.done(),n.mouseDown=new E1(n,o,t,e)):("doubleClick"==i?tve:nve)(n,o.pos,o.inside,t)?t.preventDefault():nf(n,"pointer"))};var E1=function(t,e,r,i){var s,a,o=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=r,this.flushed=i,this.selectNode=r[F7],this.allowDefault=r.shiftKey,this.delayedSelectionSync=!1,e.inside>-1)s=t.state.doc.nodeAt(e.inside),a=e.inside;else{var l=t.state.doc.resolve(e.pos);s=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var c=i?null:r.target,d=c?t.docView.nearestDesc(c,!0):null;this.target=d?d.dom:null;var U=t.state.selection;(0==r.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||U instanceof nr&&U.from<=a&&U.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Rt.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){o.view.mouseDown==o&&o.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),nf(t,"pointer")};function N7(n,t){return!!n.composing||!!(Rt.safari&&Math.abs(t.timeStamp-n.compositionEndedAt)<500)&&(n.compositionEndedAt=-2e8,!0)}E1.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return Pd(t.view)}),this.view.mouseDown=null},E1.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(C1(t))),this.allowDefault||!e?nf(this.view,"pointer"):function eve(n,t,e,r,i){return d2(n,"handleClickOn",t,e,r)||n.someProp("handleClick",function(o){return o(n,t,r)})||(i?function Q0e(n,t){if(-1==t)return!1;var r,i,e=n.state.selection;e instanceof nr&&(r=e.node);for(var o=n.state.doc.resolve(t),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(nr.isSelectable(a)){i=r&&e.$from.depth>0&&s>=e.$from.depth&&o.before(e.$from.depth+1)==e.$from.pos?o.before(e.$from.depth):o.before(s);break}}return null!=i&&(wg(n,nr.create(n.state.doc,i),"pointer"),!0)}(n,e):function X0e(n,t){if(-1==t)return!1;var e=n.state.doc.resolve(t),r=e.nodeAfter;return!!(r&&r.isAtom&&nr.isSelectable(r))&&(wg(n,new nr(e),"pointer"),!0)}(n,e))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||Rt.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||Rt.chrome&&!(this.view.state.selection instanceof bi)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(wg(this.view,Wr.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):nf(this.view,"pointer")}},E1.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),nf(this.view,"pointer"),0==t.buttons&&this.done()},aa.touchdown=function(n){h2(n),nf(n,"pointer")},aa.contextmenu=function(n){return h2(n)};var ive=Rt.android?5e3:-1;function L7(n,t){clearTimeout(n.composingTimeout),t>-1&&(n.composingTimeout=setTimeout(function(){return A1(n)},t))}function B7(n){for(n.composing&&(n.composing=!1,n.compositionEndedAt=function ove(){var n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}());n.compositionNodes.length>0;)n.compositionNodes.pop().markParentsDirty()}function A1(n,t){if(!(Rt.android&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),B7(n),t||n.docView&&n.docView.dirty){var e=u7(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):n.updateState(n.state),!0}return!1}}$s.compositionstart=$s.compositionupdate=function(n){if(!n.composing){n.domObserver.flush();var t=n.state,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(function(a){return!1===a.type.spec.inclusive})))n.markCursor=n.state.storedMarks||e.marks(),A1(n,!0),n.markCursor=null;else if(A1(n),Rt.gecko&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length)for(var r=n.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}i=s,o=-1}n.composing=!0}L7(n,ive)},$s.compositionend=function(n,t){n.composing&&(n.composing=!1,n.compositionEndedAt=t.timeStamp,L7(n,20))};var xg=Rt.ie&&Rt.ie_version<15||Rt.ios&&Rt.webkit_version<604;function f2(n,t,e,r){var i=A7(n,t,e,n.shiftKey,n.state.selection.$from);if(n.someProp("handlePaste",function(a){return a(n,r,i||Qt.empty)}))return!0;if(!i)return!1;var o=function ave(n){return 0==n.openStart&&0==n.openEnd&&1==n.content.childCount?n.content.firstChild:null}(i),s=o?n.state.tr.replaceSelectionWith(o,n.shiftKey):n.state.tr.replaceSelection(i);return n.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}aa.copy=$s.cut=function(n,t){var e=n.state.selection,r="cut"==t.type;if(!e.empty){var i=xg?null:t.clipboardData,s=E7(n,e.content()),a=s.dom,l=s.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):function sve(n,t){if(n.dom.parentNode){var e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(t),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}}(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},$s.paste=function(n,t){if(!n.composing||Rt.android){var e=xg?null:t.clipboardData;e&&f2(n,e.getData("text/plain"),e.getData("text/html"),t)?t.preventDefault():function lve(n,t){if(n.dom.parentNode){var e=n.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){n.focus(),r.parentNode&&r.parentNode.removeChild(r),e?f2(n,r.value,null,t):f2(n,r.textContent,r.innerHTML,t)},50)}}(n,t)}};var cve=function(t,e){this.slice=t,this.move=e},U7=Rt.mac?"altKey":"ctrlKey";for(var j7 in aa.dragstart=function(n,t){var e=n.mouseDown;if(e&&e.done(),t.dataTransfer){var r=n.state.selection,i=r.empty?null:n.posAtCoords(C1(t));if(!(i&&i.pos>=r.from&&i.pos<=(r instanceof nr?r.to-1:r.to)))if(e&&e.mightDrag)n.dispatch(n.state.tr.setSelection(nr.create(n.state.doc,e.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var o=n.docView.nearestDesc(t.target,!0);o&&o.node.type.spec.draggable&&o!=n.docView&&n.dispatch(n.state.tr.setSelection(nr.create(n.state.doc,o.posBefore)))}var s=n.state.selection.content(),a=E7(n,s),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(xg?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",xg||t.dataTransfer.setData("text/plain",c),n.dragging=new cve(s,!t[U7])}},aa.dragend=function(n){var t=n.dragging;window.setTimeout(function(){n.dragging==t&&(n.dragging=null)},50)},$s.dragover=$s.dragenter=function(n,t){return t.preventDefault()},$s.drop=function(n,t){var e=n.dragging;if(n.dragging=null,t.dataTransfer){var r=n.posAtCoords(C1(t));if(r){var i=n.state.doc.resolve(r.pos);if(i){var o=e&&e.slice;o?n.someProp("transformPasted",function(ne){o=ne(o)}):o=A7(n,t.dataTransfer.getData(xg?"Text":"text/plain"),xg?null:t.dataTransfer.getData("text/html"),!1,i);var s=e&&!t[U7];if(n.someProp("handleDrop",function(ne){return ne(n,t,o||Qt.empty,s)}))return void t.preventDefault();if(o){t.preventDefault();var a=o?function qye(n,t,e){var r=n.resolve(t);if(!e.content.size)return t;for(var i=e.content,o=0;o<e.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==e.openStart&&e.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0),d=r.node(a),E=!1;if(1==s)E=d.canReplace(c,c,i);else{var U=d.contentMatchAt(c).findWrapping(i.firstChild.type);E=U&&d.canReplaceWith(c,c,U[0])}if(E)return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}(n.state.doc,i.pos,o):i.pos;null==a&&(a=i.pos);var l=n.state.tr;s&&l.deleteSelection();var c=l.mapping.map(a),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,E=l.doc;if(d?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),!l.doc.eq(E)){var U=l.doc.resolve(c);if(d&&nr.isSelectable(o.content.firstChild)&&U.nodeAfter&&U.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new nr(U));else{var W=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach(function(ne,Ce,Pe,Qe){return W=Qe}),l.setSelection(QI(n,U,l.doc.resolve(W)))}n.focus(),n.dispatch(l.setMeta("uiEvent","drop"))}}}}}},aa.focus=function(n){n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(function(){n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.root.getSelection())&&Pd(n)},20))},aa.blur=function(n,t){n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.set({}),n.focused=!1)},aa.beforeinput=function(n,t){if(Rt.chrome&&Rt.android&&"deleteContentBackward"==t.inputType){n.domObserver.flushSoon();var e=n.domChangeCount;setTimeout(function(){if(n.domChangeCount==e&&(n.dom.blur(),n.focus(),!n.someProp("handleKeyDown",function(o){return o(n,_g(8,"Backspace"))}))){var i=n.state.selection.$cursor;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}},50)}},$s)aa[j7]=$s[j7];function I0(n,t){if(n==t)return!0;for(var e in n)if(n[e]!==t[e])return!1;for(var r in t)if(!(r in n))return!1;return!0}var Sg=function(t,e){this.spec=e||rf,this.side=this.spec.side||0,this.toDOM=t};Sg.prototype.map=function(t,e,r,i){var o=t.mapResult(e.from+i,this.side<0?-1:1),s=o.pos;return o.deleted?null:new bo(s-r,s-r,this)},Sg.prototype.valid=function(){return!0},Sg.prototype.eq=function(t){return this==t||t instanceof Sg&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&I0(this.spec,t.spec))},Sg.prototype.destroy=function(t){this.spec.destroy&&this.spec.destroy(t)};var jl=function(t,e){this.spec=e||rf,this.attrs=t};jl.prototype.map=function(t,e,r,i){var o=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-r,s=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new bo(o,s,this)},jl.prototype.valid=function(t,e){return e.from<e.to},jl.prototype.eq=function(t){return this==t||t instanceof jl&&I0(this.attrs,t.attrs)&&I0(this.spec,t.spec)},jl.is=function(t){return t.type instanceof jl};var R0=function(t,e){this.spec=e||rf,this.attrs=t};R0.prototype.map=function(t,e,r,i){var o=t.mapResult(e.from+i,1);if(o.deleted)return null;var s=t.mapResult(e.to+i,-1);return s.deleted||s.pos<=o.pos?null:new bo(o.pos-r,s.pos-r,this)},R0.prototype.valid=function(t,e){var s,r=t.content.findIndex(e.from),o=r.offset;return o==e.from&&!(s=t.child(r.index)).isText&&o+s.nodeSize==e.to},R0.prototype.eq=function(t){return this==t||t instanceof R0&&I0(this.attrs,t.attrs)&&I0(this.spec,t.spec)};var bo=function(t,e,r){this.from=t,this.to=e,this.type=r},p2={spec:{configurable:!0},inline:{configurable:!0}};bo.prototype.copy=function(t,e){return new bo(t,e,this.type)},bo.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},bo.prototype.map=function(t,e,r){return this.type.map(t,this,e,r)},bo.widget=function(t,e,r){return new bo(t,t,new Sg(e,r))},bo.inline=function(t,e,r,i){return new bo(t,e,new jl(r,i))},bo.node=function(t,e,r,i){return new bo(t,e,new R0(r,i))},p2.spec.get=function(){return this.type.spec},p2.inline.get=function(){return this.type instanceof jl},Object.defineProperties(bo.prototype,p2);var k1=[],rf={},Gr=function(t,e){this.local=t&&t.length?t:k1,this.children=e&&e.length?e:k1};Gr.create=function(t,e){return e.length?D1(e,t,0,rf):is},Gr.prototype.find=function(t,e,r){var i=[];return this.findInner(null==t?0:t,null==e?1e9:e,i,0,r),i},Gr.prototype.findInner=function(t,e,r,i,o){for(var s=0;s<this.local.length;s++){var a=this.local[s];a.from<=e&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(var l=0;l<this.children.length;l+=3)if(this.children[l]<e&&this.children[l+1]>t){var c=this.children[l]+1;this.children[l+2].findInner(t-c,e-c,r,i+c,o)}},Gr.prototype.map=function(t,e,r){return this==is||0==t.maps.length?this:this.mapInner(t,e,0,0,r||rf)},Gr.prototype.mapInner=function(t,e,r,i,o){for(var s,a=0;a<this.local.length;a++){var l=this.local[a].map(t,r,i);l&&l.type.valid(e,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function uve(n,t,e,r,i,o,s){for(var a=n.slice(),l=function(Qi,di,Gt,er){for(var Xr=0;Xr<a.length;Xr+=3){var zt=a[Xr+1],Tn=void 0;if(!(zt<0||Qi>zt+o)){var Nn=a[Xr]+o;di>=Nn?a[Xr+1]=Qi<=Nn?-2:-1:Gt>=i&&(Tn=er-Gt-(di-Qi))&&(a[Xr]+=Tn,a[Xr+1]+=Tn)}}},c=0;c<e.maps.length;c++)e.maps[c].forEach(l);for(var d=!1,E=0;E<a.length;E+=3)if(a[E+1]<0){if(-2==a[E+1]){d=!0,a[E+1]=-1;continue}var U=e.map(n[E]+o),W=U-i;if(W<0||W>=r.content.size){d=!0;continue}var Ce=e.map(n[E+1]+o,-1)-i,Pe=r.content.findIndex(W),je=Pe.offset,at=r.maybeChild(Pe.index);if(at&&je==W&&je+at.nodeSize==Ce){var yt=a[E+2].mapInner(e,at,U+1,n[E]+o+1,s);yt!=is?(a[E]=W,a[E+1]=Ce,a[E+2]=yt):(a[E+1]=-2,d=!0)}else d=!0}if(d){var Ct=function dve(n,t,e,r,i,o,s){function a(c,d){for(var E=0;E<c.local.length;E++){var U=c.local[E].map(r,i,d);U?e.push(U):s.onRemove&&s.onRemove(c.local[E].spec)}for(var W=0;W<c.children.length;W+=3)a(c.children[W+2],c.children[W]+d+1)}for(var l=0;l<n.length;l+=3)-1==n[l+1]&&a(n[l+2],t[l]+o+1);return e}(a,n,t||[],e,i,o,s),Vt=D1(Ct,r,0,s);t=Vt.local;for(var yn=0;yn<a.length;yn+=3)a[yn+1]<0&&(a.splice(yn,3),yn-=3);for(var Bn=0,Qn=0;Bn<Vt.children.length;Bn+=3){for(var _r=Vt.children[Bn];Qn<a.length&&a[Qn]<_r;)Qn+=3;a.splice(Qn,0,Vt.children[Bn],Vt.children[Bn+1],Vt.children[Bn+2])}}return new Gr(t&&t.sort(sf),a)}(this.children,s,t,e,r,i,o):s?new Gr(s.sort(sf)):is},Gr.prototype.add=function(t,e){return e.length?this==is?Gr.create(t,e):this.addInner(t,e,0):this},Gr.prototype.addInner=function(t,e,r){var o,i=this,s=0;t.forEach(function(c,d){var U,E=d+r;if(U=V7(e,c,E)){for(o||(o=i.children.slice());s<o.length&&o[s]<d;)s+=3;o[s]==d?o[s+2]=o[s+2].addInner(c,U,E+1):o.splice(s,0,d,d+c.nodeSize,D1(U,c,E+1,rf)),s+=3}});for(var a=H7(s?z7(e):e,-r),l=0;l<a.length;l++)a[l].type.valid(t,a[l])||a.splice(l--,1);return new Gr(a.length?this.local.concat(a).sort(sf):this.local,o||this.children)},Gr.prototype.remove=function(t){return 0==t.length||this==is?this:this.removeInner(t,0)},Gr.prototype.removeInner=function(t,e){for(var r=this.children,i=this.local,o=0;o<r.length;o+=3){for(var s=void 0,a=r[o]+e,l=r[o+1]+e,c=0,d=void 0;c<t.length;c++)(d=t[c])&&d.from>a&&d.to<l&&(t[c]=null,(s||(s=[])).push(d));if(s){r==this.children&&(r=this.children.slice());var E=r[o+2].removeInner(s,a+1);E!=is?r[o+2]=E:(r.splice(o,3),o-=3)}}if(i.length)for(var U=0,W=void 0;U<t.length;U++)if(W=t[U])for(var ne=0;ne<i.length;ne++)i[ne].eq(W,e)&&(i==this.local&&(i=this.local.slice()),i.splice(ne--,1));return r==this.children&&i==this.local?this:i.length||r.length?new Gr(i,r):is},Gr.prototype.forChild=function(t,e){if(this==is)return this;if(e.isLeaf)return Gr.empty;for(var r,i,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}for(var s=t+1,a=s+e.content.size,l=0;l<this.local.length;l++){var c=this.local[l];if(c.from<a&&c.to>s&&c.type instanceof jl){var d=Math.max(s,c.from)-s,E=Math.min(a,c.to)-s;d<E&&(i||(i=[])).push(c.copy(d,E))}}if(i){var U=new Gr(i.sort(sf));return r?new cl([U,r]):U}return r||is},Gr.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Gr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0},Gr.prototype.locals=function(t){return g2(this.localsInner(t))},Gr.prototype.localsInner=function(t){if(this==is)return k1;if(t.inlineContent||!this.local.some(jl.is))return this.local;for(var e=[],r=0;r<this.local.length;r++)this.local[r].type instanceof jl||e.push(this.local[r]);return e};var is=new Gr;Gr.empty=is,Gr.removeOverlap=g2;var cl=function(t){this.members=t};function H7(n,t){if(!t||!n.length)return n;for(var e=[],r=0;r<n.length;r++){var i=n[r];e.push(new bo(i.from+t,i.to+t,i.type))}return e}function V7(n,t,e){if(t.isLeaf)return null;for(var r=e+t.nodeSize,i=null,o=0,s=void 0;o<n.length;o++)(s=n[o])&&s.from>e&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function z7(n){for(var t=[],e=0;e<n.length;e++)null!=n[e]&&t.push(n[e]);return t}function D1(n,t,e,r){var i=[],o=!1;t.forEach(function(l,c){var d=V7(n,l,c+e);if(d){o=!0;var E=D1(d,l,e+c+1,r);E!=is&&i.push(c,c+l.nodeSize,E)}});for(var s=H7(o?z7(n):n,-e).sort(sf),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Gr(s,i):is}function sf(n,t){return n.from-t.from||n.to-t.to}function g2(n){for(var t=n,e=0;e<t.length-1;e++){var r=t[e];if(r.from!=r.to)for(var i=e+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==n&&(t=n.slice()),t[e]=r.copy(r.from,o.from),W7(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==n&&(t=n.slice()),t[i]=o.copy(o.from,r.to),W7(t,i+1,o.copy(r.to,o.to)))}}return t}function W7(n,t,e){for(;t<n.length&&sf(e,n[t])>0;)t++;n.splice(t,0,e)}function m2(n){var t=[];return n.someProp("decorations",function(e){var r=e(n.state);r&&r!=is&&t.push(r)}),n.cursorWrapper&&t.push(Gr.create(n.state.doc,[n.cursorWrapper.deco])),cl.from(t)}cl.prototype.map=function(t,e){var r=this.members.map(function(i){return i.map(t,e,rf)});return cl.from(r)},cl.prototype.forChild=function(t,e){if(e.isLeaf)return Gr.empty;for(var r=[],i=0;i<this.members.length;i++){var o=this.members[i].forChild(t,e);o!=is&&(o instanceof cl?r=r.concat(o.members):r.push(o))}return cl.from(r)},cl.prototype.eq=function(t){if(!(t instanceof cl)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},cl.prototype.locals=function(t){for(var e,r=!0,i=0;i<this.members.length;i++){var o=this.members[i].localsInner(t);if(o.length)if(e){r&&(e=e.slice(),r=!1);for(var s=0;s<o.length;s++)e.push(o[s])}else e=o}return e?g2(r?e:e.sort(sf)):k1},cl.from=function(t){switch(t.length){case 0:return is;case 1:return t[0];default:return new cl(t)}};var wo=function(t,e){this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(J7),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=G7(this),this.markCursor=null,this.cursorWrapper=null,K7(this),this.nodeViews=q7(this),this.docView=n7(this.state.doc,$7(this),m2(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function G0e(n){n.shiftKey=!1,n.mouseDown=null,n.lastKeyCode=null,n.lastKeyCodeTime=0,n.lastClick={time:0,x:0,y:0,type:""},n.lastSelectionOrigin=null,n.lastSelectionTime=0,n.lastIOSEnter=0,n.lastIOSEnterFallbackTimeout=null,n.lastAndroidDelete=0,n.composing=!1,n.composingTimeout=null,n.compositionNodes=[],n.compositionEndedAt=-2e8,n.domObserver=new Da(n,function(r,i,o,s){return function N0e(n,t,e,r,i){if(t<0){var o=n.lastSelectionTime>Date.now()-50?n.lastSelectionOrigin:null,s=u7(n,o);if(s&&!n.state.selection.eq(s)){var a=n.state.tr.setSelection(s);"pointer"==o?a.setMeta("pointer",!0):"key"==o&&a.scrollIntoView(),n.dispatch(a)}}else{var l=n.state.doc.resolve(t),c=l.sharedDepth(e);t=l.before(c+1),e=n.state.doc.resolve(e).after(c+1);var d=n.state.selection,E=function P0e(n,t,e){var r=n.docView.parseRange(t,e),i=r.node,o=r.fromOffset,s=r.toOffset,a=r.from,l=r.to,c=n.root.getSelection(),d=null,E=c.anchorNode;if(E&&n.dom.contains(1==E.nodeType?E:E.parentNode)&&(d=[{node:E,offset:c.anchorOffset}],KI(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Rt.chrome&&8===n.lastKeyCode)for(var U=s;U>o;U--){var W=i.childNodes[U-1],ne=W.pmViewDesc;if("BR"==W.nodeName&&!ne){s=U;break}if(!ne||ne.size)break}var Ce=n.state.doc,Pe=n.someProp("domParser")||sl.fromSchema(n.state.schema),Qe=Ce.resolve(a),je=null,at=Pe.parse(i,{topNode:Qe.parent,topMatch:Qe.parent.contentMatchAt(Qe.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=Qe.parent.type.whitespace||"full",editableContent:!0,findPositions:d,ruleFromNode:F0e,context:Qe});if(d&&null!=d[0].pos){var yt=d[0].pos,Ct=d[1]&&d[1].pos;null==Ct&&(Ct=yt),je={anchor:yt+a,head:Ct+a}}return{doc:at,sel:je,from:a,to:l}}(n,t,e);if(Rt.chrome&&n.cursorWrapper&&E.sel&&E.sel.anchor==n.cursorWrapper.deco.from){var U=n.cursorWrapper.deco.type.toDOM.nextSibling,W=U&&U.nodeValue?U.nodeValue.length:1;E.sel={anchor:E.sel.anchor+W,head:E.sel.anchor+W}}var Pe,Qe,ne=n.state.doc,Ce=ne.slice(E.from,E.to);8===n.lastKeyCode&&Date.now()-100<n.lastKeyCodeTime?(Pe=n.state.selection.to,Qe="end"):(Pe=n.state.selection.from,Qe="start"),n.lastKeyCode=null;var je=function U0e(n,t,e,r,i){var o=n.findDiffStart(t,e);if(null==o)return null;var s=n.findDiffEnd(t,e+n.size,e+t.size),a=s.a,l=s.b;return"end"==i&&(r-=a+Math.max(0,o-Math.min(a,l))-o),a<o&&n.size<t.size?(l=(o-=r<=o&&r>=a?o-r:0)+(l-a),a=o):l<o&&(a=(o-=r<=o&&r>=l?o-r:0)+(a-l),l=o),{start:o,endA:a,endB:l}}(Ce.content,E.doc.content,E.from,Pe,Qe);if((Rt.ios&&n.lastIOSEnter>Date.now()-225||Rt.android)&&i.some(function(zt){return"DIV"==zt.nodeName||"P"==zt.nodeName})&&(!je||je.endA>=je.endB)&&n.someProp("handleKeyDown",function(zt){return zt(n,_g(13,"Enter"))}))n.lastIOSEnter=0;else{if(!je){if(!(r&&d instanceof bi&&!d.empty&&d.$head.sameParent(d.$anchor))||n.composing||E.sel&&E.sel.anchor!=E.sel.head){if(E.sel){var at=C7(n,n.state.doc,E.sel);at&&!at.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(at))}return}je={start:d.from,endA:d.to,endB:d.to}}n.domChangeCount++,n.state.selection.from<n.state.selection.to&&je.start==je.endB&&n.state.selection instanceof bi&&(je.start>n.state.selection.from&&je.start<=n.state.selection.from+2&&n.state.selection.from>=E.from?je.start=n.state.selection.from:je.endA<n.state.selection.to&&je.endA>=n.state.selection.to-2&&n.state.selection.to<=E.to&&(je.endB+=n.state.selection.to-je.endA,je.endA=n.state.selection.to)),Rt.ie&&Rt.ie_version<=11&&je.endB==je.start+1&&je.endA==je.start&&je.start>E.from&&" \xa0"==E.doc.textBetween(je.start-E.from-1,je.start-E.from+1)&&(je.start--,je.endA--,je.endB--);var yn,yt=E.doc.resolveNoCache(je.start-E.from),Ct=E.doc.resolveNoCache(je.endB-E.from),Vt=yt.sameParent(Ct)&&yt.parent.inlineContent;if((Rt.ios&&n.lastIOSEnter>Date.now()-225&&(!Vt||i.some(function(zt){return"DIV"==zt.nodeName||"P"==zt.nodeName}))||!Vt&&yt.pos<E.doc.content.size&&(yn=Wr.findFrom(E.doc.resolve(yt.pos+1),1,!0))&&yn.head==Ct.pos)&&n.someProp("handleKeyDown",function(zt){return zt(n,_g(13,"Enter"))}))n.lastIOSEnter=0;else if(n.state.selection.anchor>je.start&&function B0e(n,t,e,r,i){if(!r.parent.isTextblock||e-t<=i.pos-r.pos||o2(r,!0,!1)<i.pos)return!1;var o=n.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=n.resolve(o2(o,!0,!0));return!(!s.parent.isTextblock||s.pos>e||o2(s,!0,!1)<e)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(ne,je.start,je.endA,yt,Ct)&&n.someProp("handleKeyDown",function(zt){return zt(n,_g(8,"Backspace"))}))Rt.android&&Rt.chrome&&n.domObserver.suppressSelectionUpdates();else{Rt.chrome&&Rt.android&&je.toB==je.from&&(n.lastAndroidDelete=Date.now()),Rt.android&&!Vt&&yt.start()!=Ct.start()&&0==Ct.parentOffset&&yt.depth==Ct.depth&&E.sel&&E.sel.anchor==E.sel.head&&E.sel.head==je.endA&&(je.endB-=2,Ct=E.doc.resolveNoCache(je.endB-E.from),setTimeout(function(){n.someProp("handleKeyDown",function(zt){return zt(n,_g(13,"Enter"))})},20));var _r,Qi,di,Gt,Bn=je.start,Qn=je.endA;if(Vt)if(yt.pos==Ct.pos)Rt.ie&&Rt.ie_version<=11&&0==yt.parentOffset&&(n.domObserver.suppressSelectionUpdates(),setTimeout(function(){return Pd(n)},20)),_r=n.state.tr.delete(Bn,Qn),Qi=ne.resolve(je.start).marksAcross(ne.resolve(je.endA));else if(je.endA==je.endB&&(Gt=ne.resolve(je.start))&&(di=function L0e(n,t){for(var s,a,l,e=n.firstChild.marks,r=t.firstChild.marks,i=e,o=r,c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(var d=0;d<e.length;d++)o=e[d].removeFromSet(o);if(1==i.length&&0==o.length)a=i[0],s="add",l=function(W){return W.mark(a.addToSet(W.marks))};else{if(0!=i.length||1!=o.length)return null;a=o[0],s="remove",l=function(W){return W.mark(a.removeFromSet(W.marks))}}for(var E=[],U=0;U<t.childCount;U++)E.push(l(t.child(U)));if(Dt.from(E).eq(n))return{mark:a,type:s}}(yt.parent.content.cut(yt.parentOffset,Ct.parentOffset),Gt.parent.content.cut(Gt.parentOffset,je.endA-Gt.start()))))_r=n.state.tr,"add"==di.type?_r.addMark(Bn,Qn,di.mark):_r.removeMark(Bn,Qn,di.mark);else if(yt.parent.child(yt.index()).isText&&yt.index()==Ct.index()-(Ct.textOffset?0:1)){var er=yt.parent.textBetween(yt.parentOffset,Ct.parentOffset);if(n.someProp("handleTextInput",function(zt){return zt(n,Bn,Qn,er)}))return;_r=n.state.tr.insertText(er,Bn,Qn)}if(_r||(_r=n.state.tr.replace(Bn,Qn,E.doc.slice(je.start-E.from,je.endB-E.from))),E.sel){var Xr=C7(n,_r.doc,E.sel);Xr&&!(Rt.chrome&&Rt.android&&n.composing&&Xr.empty&&(je.start!=je.endB||n.lastAndroidDelete<Date.now()-100)&&(Xr.head==Bn||Xr.head==_r.mapping.map(Qn)-1)||Rt.ie&&Xr.empty&&Xr.head==Bn)&&_r.setSelection(Xr)}Qi&&_r.ensureMarks(Qi),n.dispatch(_r.scrollIntoView())}}}}(n,r,i,o,s)}),n.domObserver.start(),n.domChangeCount=0,n.eventHandlers=Object.create(null);var t=function(r){var i=aa[r];n.dom.addEventListener(r,n.eventHandlers[r]=function(o){(function J0e(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var e=t.target;e!=n.dom;e=e.parentNode)if(!e||11==e.nodeType||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0})(n,o)&&!u2(n,o)&&(n.editable||!(o.type in $s))&&i(n,o)})};for(var e in aa)t(e);Rt.safari&&n.dom.addEventListener("input",function(){return null}),c2(n)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},T1={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function $7(n){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),t.translate="no",n.someProp("attributes",function(e){if("function"==typeof e&&(e=e(n.state)),e)for(var r in e)"class"==r&&(t.class+=" "+e[r]),"style"==r?t.style=(t.style?t.style+";":"")+e[r]:!t[r]&&"contenteditable"!=r&&"nodeName"!=r&&(t[r]=String(e[r]))}),[bo.node(0,n.state.doc.content.size,t)]}function K7(n){if(n.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:bo.widget(n.state.selection.head,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function G7(n){return!n.someProp("editable",function(t){return!1===t(n.state)})}function q7(n){var t={};return n.someProp("nodeViews",function(e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])}),t}function J7(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}T1.props.get=function(){if(this._props.state!=this.state){var n=this._props;for(var t in this._props={},n)this._props[t]=n[t];this._props.state=this.state}return this._props},wo.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&c2(this),this._props=t,t.plugins&&(t.plugins.forEach(J7),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)},wo.prototype.setProps=function(t){var e={};for(var r in this._props)e[r]=this._props[r];for(var i in e.state=this.state,t)e[i]=t[i];this.update(e)},wo.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},wo.prototype.updateStateInner=function(t,e){var r=this,i=this.state,o=!1,s=!1;if(t.storedMarks&&this.composing&&(B7(this),s=!0),this.state=t,e){var a=q7(this);(function fve(n,t){var e=0,r=0;for(var i in n){if(n[i]!=t[i])return!0;e++}for(var o in t)r++;return e!=r})(a,this.nodeViews)&&(this.nodeViews=a,o=!0),c2(this)}this.editable=G7(this),K7(this);var l=m2(this),c=$7(this),d=e?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",E=o||!this.docView.matchesNode(t.doc,c,l);(E||!t.selection.eq(i.selection))&&(s=!0);var U="preserve"==d&&s&&null==this.dom.style.overflowAnchor&&function s0e(n){for(var r,i,t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),o=(t.left+t.right)/2,s=e+1;s<Math.min(innerHeight,t.bottom);s+=5){var a=n.root.elementFromPoint(o,s);if(a!=n.dom&&n.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=e-20){r=a,i=l.top;break}}}return{refDOM:r,refTop:i,stack:$z(n.dom)}}(this);if(s){this.domObserver.stop();var W=E&&(Rt.ie||Rt.chrome)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&function hve(n,t){var e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}(i.selection,t.selection);if(E){var ne=Rt.chrome?this.trackWrites=this.root.getSelection().focusNode:null;(o||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=n7(t.doc,c,l,this.dom,this)),ne&&!this.trackWrites&&(W=!0)}W||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function M0e(n){var t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.root.getSelection();return E0(t.node,t.offset,e.anchorNode,e.anchorOffset)}(this))?Pd(this,W):(g7(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var Ce=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(Pe){return Pe(r)})||function Wz(n,t,e){for(var r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument,s=e||n.dom;s;s=$I(s))if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,l=a?i0e(o):o0e(s),c=0,d=0;if(t.top<l.top+Id(r,"top")?d=-(l.top-t.top+Id(i,"top")):t.bottom>l.bottom-Id(r,"bottom")&&(d=t.bottom-l.bottom+Id(i,"bottom")),t.left<l.left+Id(r,"left")?c=-(l.left-t.left+Id(i,"left")):t.right>l.right-Id(r,"right")&&(c=t.right-l.right+Id(i,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{var E=s.scrollLeft,U=s.scrollTop;d&&(s.scrollTop+=d),c&&(s.scrollLeft+=c);var W=s.scrollLeft-E,ne=s.scrollTop-U;t={left:t.left-W,top:t.top-ne,right:t.right-W,bottom:t.bottom-ne}}if(a)break}}(this,t.selection instanceof nr?this.docView.domAfterPos(t.selection.from).getBoundingClientRect():this.coordsAtPos(t.selection.head,1),Ce)}else U&&function a0e(n){var t=n.refDOM,e=n.refTop,r=n.stack,i=t?t.getBoundingClientRect().top:0;Kz(r,0==i?0:i-e)}(U)},wo.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},wo.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var s=0;s<this.pluginViews.length;s++){var a=this.pluginViews[s];a.update&&a.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var e=0;e<this.directPlugins.length;e++){var r=this.directPlugins[e];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var o=this.state.plugins[i];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},wo.prototype.someProp=function(t,e){var i,r=this._props&&this._props[t];if(null!=r&&(i=e?e(r):r))return i;for(var o=0;o<this.directPlugins.length;o++){var s=this.directPlugins[o].props[t];if(null!=s&&(i=e?e(s):s))return i}var a=this.state.plugins;if(a)for(var l=0;l<a.length;l++){var c=a[l].props[t];if(null!=c&&(i=e?e(c):c))return i}},wo.prototype.hasFocus=function(){return this.root.activeElement==this.dom},wo.prototype.focus=function(){this.domObserver.stop(),this.editable&&function l0e(n){if(n.setActive)return n.setActive();if(bg)return n.focus(bg);var t=$z(n);n.focus(null==bg?{get preventScroll(){return bg={preventScroll:!0},!0}}:void 0),bg||(bg=!1,Kz(t,0))}(this.dom),Pd(this),this.domObserver.start()},T1.root.get=function(){var n=this._root;if(null==n)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return n||document},wo.prototype.posAtCoords=function(t){return f0e(this,t)},wo.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),Jz(this,t,e)},wo.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},wo.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},wo.prototype.posAtDOM=function(t,e,r){void 0===r&&(r=-1);var i=this.docView.posFromDOM(t,e,r);if(null==i)throw new RangeError("DOM position not inside the editor");return i},wo.prototype.endOfTextblock=function(t,e){return function v0e(n,t,e){return Yz==t&&Xz==e?Qz:(Yz=t,Xz=e,Qz="up"==e||"down"==e?function g0e(n,t,e){var r=t.selection,i="up"==e?r.$from:r.$to;return Zz(n,t,function(){for(var s=n.docView.domFromPos(i.pos,"up"==e?-1:1).node;;){var a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.dom;break}s=a.dom.parentNode}for(var l=Jz(n,i.pos,1),c=s.firstChild;c;c=c.nextSibling){var d=void 0;if(1==c.nodeType)d=c.getClientRects();else{if(3!=c.nodeType)continue;d=Iu(c,0,c.nodeValue.length).getClientRects()}for(var E=0;E<d.length;E++){var U=d[E];if(U.bottom>U.top+1&&("up"==e?l.top-U.top>2*(U.bottom-l.top):U.bottom-l.bottom>2*(l.bottom-U.top)))return!1}}return!0})}(n,t,e):function y0e(n,t,e){var i=t.selection.$head;if(!i.parent.isTextblock)return!1;var o=i.parentOffset,s=!o,a=o==i.parent.content.size,l=n.root.getSelection();return m0e.test(i.parent.textContent)&&l.modify?Zz(n,t,function(){var c=l.getRangeAt(0),d=l.focusNode,E=l.focusOffset,U=l.caretBidiLevel;l.modify("move",e,"character");var ne=!(i.depth?n.docView.domAfterPos(i.before()):n.dom).contains(1==l.focusNode.nodeType?l.focusNode:l.focusNode.parentNode)||d==l.focusNode&&E==l.focusOffset;return l.removeAllRanges(),l.addRange(c),null!=U&&(l.caretBidiLevel=U),ne}):"left"==e||"backward"==e?s:a}(n,t,e))}(this,e||this.state,t)},wo.prototype.destroy=function(){!this.docView||(function q0e(n){for(var t in n.domObserver.stop(),n.eventHandlers)n.dom.removeEventListener(t,n.eventHandlers[t]);clearTimeout(n.composingTimeout),clearTimeout(n.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],m2(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},T1.isDestroyed.get=function(){return null==this.docView},wo.prototype.dispatchEvent=function(t){return function Z0e(n,t){!u2(n,t)&&aa[t.type]&&(n.editable||!(t.type in $s))&&aa[t.type](n,t)}(this,t)},wo.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(wo.prototype,T1);var pve=["ol",0],gve=["ul",0],mve=["li",0],Z7={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function(t){return 1==t.attrs.order?pve:["ol",{start:t.attrs.order},0]}},Y7={parseDOM:[{tag:"ul"}],toDOM:function(){return gve}};function _ve(n){return function(t,e){var r=t.selection,i=r.$from,o=r.$to,s=r.node;if(s&&s.isBlock||i.depth<2||!i.sameParent(o))return!1;var a=i.node(-1);if(a.type!=n)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(2==i.depth||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(e){for(var l=Dt.empty,c=i.index(-1)?1:i.index(-2)?2:3,d=i.depth-c;d>=i.depth-3;d--)l=Dt.from(i.node(d).copy(l));var E=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;l=l.append(Dt.from(n.createAndFill()));var U=i.before(i.depth-(c-1)),W=t.tr.replace(U,i.after(-E),new Qt(l,4-c,0)),ne=-1;W.doc.nodesBetween(U,W.doc.content.size,function(je,at){if(ne>-1)return!1;je.isTextblock&&0==je.content.size&&(ne=at+1)}),ne>-1&&W.setSelection(t.selection.constructor.near(W.doc.resolve(ne))),e(W.scrollIntoView())}return!0}var Ce=o.pos==i.end()?a.contentMatchAt(0).defaultType:null,Pe=t.tr.delete(i.pos,o.pos),Qe=Ce&&[null,{type:Ce}];return!!yg(Pe.doc,i.pos,2,Qe)&&(e&&e(Pe.split(i.pos,2,Qe).scrollIntoView()),!0)}}function Q7(n){return function(t,e){var r=t.selection,i=r.$from,s=i.blockRange(r.$to,function(a){return a.childCount&&a.firstChild.type==n});return!!s&&(!e||(i.node(s.depth-1).type==n?function bve(n,t,e,r){var i=n.tr,o=r.end,s=r.$to.end(r.depth);return o<s&&(i.step(new Aa(o-1,s,o,s,new Qt(Dt.from(e.create(null,r.parent.copy())),1,0),1,!0)),r=new m0(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth)),t(i.lift(r,v0(r)).scrollIntoView()),!0}(t,e,n,s):function wve(n,t,e){for(var r=n.tr,i=e.parent,o=e.end,s=e.endIndex-1,a=e.startIndex;s>a;s--)o-=i.child(s).nodeSize,r.delete(o-1,o+1);var l=r.doc.resolve(e.start),c=l.nodeAfter;if(r.mapping.map(e.end)!=e.start+l.nodeAfter.nodeSize)return!1;var d=0==e.startIndex,E=e.endIndex==i.childCount,U=l.node(-1),W=l.index(-1);if(!U.canReplace(W+(d?0:1),W+1,c.content.append(E?Dt.empty:Dt.from(i))))return!1;var ne=l.pos,Ce=ne+c.nodeSize;return r.step(new Aa(ne-(d?1:0),Ce+(E?1:0),ne+1,Ce-1,new Qt((d?Dt.empty:Dt.from(i.copy(Dt.empty))).append(E?Dt.empty:Dt.from(i.copy(Dt.empty))),d?0:1,E?0:1),d?0:1)),t(r.scrollIntoView()),!0}(t,e,s)))}}function e9(n){return function(t,e){var r=t.selection,s=r.$from.blockRange(r.$to,function(Ce){return Ce.childCount&&Ce.firstChild.type==n});if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,c=l.child(a-1);if(c.type!=n)return!1;if(e){var d=c.lastChild&&c.lastChild.type==l.type,E=Dt.from(d?n.create():null),U=new Qt(Dt.from(n.create(null,Dt.from(l.type.create(null,E)))),d?3:1,0),W=s.start,ne=s.end;e(t.tr.step(new Aa(W-(d?3:1),ne,W,ne,U,1,!0)).scrollIntoView())}return!0}}const t9=n=>{const t=(n=>{const t={};return Object.keys(n).forEach(e=>{n[e]&&(t[e]=n[e])}),t})(n);return Object.entries(t).map(([e,r])=>`${(n=>n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`))(e)}:${r}`).join(";")},Eve={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:n=>({href:n.getAttribute("href"),title:n.getAttribute("title"),target:n.getAttribute("target")})}],toDOM(n){const{href:t,title:e,target:r}=n.attrs;return["a",{href:t,title:e,target:r},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>"normal"!==n.style.fontWeight&&null},{style:"font-weight",getAttrs:n=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:n=>({color:n})}],toDOM(n){const{color:t}=n.attrs;return["span",{style:`color:${t};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:n=>({backgroundColor:n})}],toDOM(n){const{backgroundColor:t}=n.attrs;return["span",{style:`background-color:${t};`},0]}}},Dve={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(n){const{textAlign:t}=n.style;return{align:n.getAttribute("align")||t||null}}}],toDOM(n){const{align:t}=n.attrs;return["p",{style:t9({textAlign:"left"!==t?t:null})||null},0]}},Ive={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(n){const{textAlign:t}=n.style;return{level:1,align:n.getAttribute("align")||t||null}}},{tag:"h2",getAttrs(n){const{textAlign:t}=n.style;return{level:2,align:n.getAttribute("align")||t||null}}},{tag:"h3",getAttrs(n){const{textAlign:t}=n.style;return{level:3,align:n.getAttribute("align")||t||null}}},{tag:"h4",getAttrs(n){const{textAlign:t}=n.style;return{level:4,align:n.getAttribute("align")||t||null}}},{tag:"h5",getAttrs(n){const{textAlign:t}=n.style;return{level:5,align:n.getAttribute("align")||t||null}}},{tag:"h6",getAttrs(n){const{textAlign:t}=n.style;return{level:6,align:n.getAttribute("align")||t||null}}}],toDOM(n){const{level:t,align:e}=n.attrs;return[`h${t}`,{style:t9({textAlign:"left"!==e?e:null})||null},0]}},Pve={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:n=>({src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt"),width:n.getAttribute("width")})}],toDOM(n){const{src:t,alt:e,title:r,width:i}=n.attrs;return["img",{src:t,alt:e,title:r,width:i}]}},M1=new Qh({marks:Eve,nodes:{doc:{content:"block+"},text:{group:"inline"},paragraph:Dve,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:Ive,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:Pve,list_item:Object.assign(Object.assign({},{parseDOM:[{tag:"li"}],toDOM:function(){return mve},defining:!0}),{content:"paragraph block*"}),ordered_list:Object.assign(Object.assign({},Z7),{content:"list_item+",group:"block"}),bullet_list:Object.assign(Object.assign({},Y7),{content:"list_item+",group:"block"})}});function n9(n,t){return!n.selection.empty&&(t&&t(n.tr.deleteSelection().scrollIntoView()),!0)}function Cg(n,t,e){for(;n;n="start"==t?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(e&&1!=n.childCount)return!1}return!1}function r9(n){if(!n.parent.type.spec.isolating)for(var t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function i9(n){if(!n.parent.type.spec.isolating)for(var t=n.depth-1;t>=0;t--){var e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}function o9(n,t){var e=n.selection,r=e.$head;return!(!r.parent.type.spec.code||!r.sameParent(e.$anchor)||(t&&t(n.tr.insertText("\n").scrollIntoView()),0))}function v2(n){for(var t=0;t<n.edgeCount;t++){var r=n.edge(t).type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function s9(n,t){var e=n.selection,r=e.$head;if(!r.parent.type.spec.code||!r.sameParent(e.$anchor))return!1;var o=r.node(-1),s=r.indexAfter(-1),a=v2(o.contentMatchAt(s));if(!o.canReplaceWith(s,s,a))return!1;if(t){var l=r.after(),c=n.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Wr.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function a9(n,t){var e=n.selection,r=e.$from,i=e.$to;if(e instanceof Mu||r.parent.inlineContent||i.parent.inlineContent)return!1;var o=v2(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){var s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(s,o.createAndFill());a.setSelection(bi.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}function l9(n,t){var r=n.selection.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var i=r.before();if(yg(n.doc,i))return t&&t(n.tr.split(i).scrollIntoView()),!0}var o=r.blockRange(),s=o&&v0(o);return null!=s&&(t&&t(n.tr.lift(o,s).scrollIntoView()),!0)}function _2(n,t){var e=n.selection,r=e.$from,i=e.$to;if(n.selection instanceof nr&&n.selection.node.isBlock)return!(!r.parentOffset||!yg(n.doc,r.pos)||(t&&t(n.tr.split(r.pos).scrollIntoView()),0));if(!r.parent.isBlock)return!1;if(t){var o=i.parentOffset==i.parent.content.size,s=n.tr;(n.selection instanceof bi||n.selection instanceof Mu)&&s.deleteSelection();var a=0==r.depth?null:v2(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=o&&a?[{type:a}]:null,c=yg(s.doc,s.mapping.map(r.pos),1,l);if(!l&&!c&&yg(s.doc,s.mapping.map(r.pos),1,a&&[{type:a}])&&(l=[{type:a}],c=!0),c&&(s.split(s.mapping.map(r.pos),1,l),!o&&!r.parentOffset&&r.parent.type!=a)){var d=s.mapping.map(r.before()),E=s.doc.resolve(d);r.node(-1).canReplaceWith(E.index(),E.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}t(s.scrollIntoView())}return!0}function c9(n,t,e){var o,s,r=t.nodeBefore,i=t.nodeAfter;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(function $ve(n,t,e){var r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!(!(r&&i&&r.type.compatibleContent(i.type))||(!r.content.size&&t.parent.canReplace(o-1,o)?(e&&e(n.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!i.isTextblock&&!RI(n.doc,t.pos)||(e&&e(n.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(n,t,e))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(e){for(var l=t.pos+i.nodeSize,c=Dt.empty,d=o.length-1;d>=0;d--)c=Dt.from(o[d].create(null,c));c=Dt.from(r.copy(c));var E=n.tr.step(new Aa(t.pos-1,l,t.pos,l,new Qt(c,1,0),o.length,!0)),U=l+2*o.length;RI(E.doc,U)&&E.join(U),e(E.scrollIntoView())}return!0}var W=Wr.findFrom(t,1),ne=W&&W.$from.blockRange(W.$to),Ce=ne&&v0(ne);if(null!=Ce&&Ce>=t.depth)return e&&e(n.tr.lift(ne,Ce).scrollIntoView()),!0;if(a&&Cg(i,"start",!0)&&Cg(r,"end")){for(var Pe=r,Qe=[];Qe.push(Pe),!Pe.isTextblock;)Pe=Pe.lastChild;for(var je=i,at=1;!je.isTextblock;je=je.firstChild)at++;if(Pe.canReplace(Pe.childCount,Pe.childCount,je.content)){if(e){for(var yt=Dt.empty,Ct=Qe.length-1;Ct>=0;Ct--)yt=Dt.from(Qe[Ct].copy(yt));e(n.tr.step(new Aa(t.pos-Qe.length,t.pos+i.nodeSize,t.pos+at,t.pos+i.nodeSize-at,new Qt(yt,Qe.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function u9(n){return function(t,e){for(var r=t.selection,i=n<0?r.$from:r.$to,o=i.depth;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(e&&e(t.tr.setSelection(bi.create(t.doc,n<0?i.start(o):i.end(o)))),!0)}}var Kve=u9(-1),Gve=u9(1);function b2(n,t){return function(e,r){var i=e.selection,o=i.from,s=i.to,a=!1;return e.doc.nodesBetween(o,s,function(l,c){if(a)return!1;if(l.isTextblock&&!l.hasMarkup(n,t))if(l.type==n)a=!0;else{var d=e.doc.resolve(c),E=d.index();a=d.parent.canReplaceWith(E,E+1,n)}}),!!a&&(r&&r(e.tr.setBlockType(o,s,n,t).scrollIntoView()),!0)}}function Eg(n,t){return function(e,r){var i=e.selection,s=i.$cursor,a=i.ranges;if(i.empty&&!s||!function Jve(n,t,e){for(var r=function(s){var a=t[s],l=a.$from,c=a.$to,d=0==l.depth&&n.type.allowsMarkType(e);if(n.nodesBetween(l.pos,c.pos,function(E){if(d)return!1;d=E.inlineContent&&E.type.allowsMarkType(e)}),d)return{v:!0}},i=0;i<t.length;i++){var o=r(i);if(o)return o.v}return!1}(e.doc,a,n))return!1;if(r)if(s)n.isInSet(e.storedMarks||s.marks())?r(e.tr.removeStoredMark(n)):r(e.tr.addStoredMark(n.create(t)));else{for(var l=!1,c=e.tr,d=0;!l&&d<a.length;d++){var E=a[d];l=e.doc.rangeHasMark(E.$from.pos,E.$to.pos,n)}for(var ne=0;ne<a.length;ne++){var Ce=a[ne],Pe=Ce.$from,Qe=Ce.$to;if(l)c.removeMark(Pe.pos,Qe.pos,n);else{var je=Pe.pos,at=Qe.pos,yt=Pe.nodeAfter,Ct=Qe.nodeBefore,Vt=yt&&yt.isText?/^\s*/.exec(yt.text)[0].length:0,yn=Ct&&Ct.isText?/\s*$/.exec(Ct.text)[0].length:0;je+Vt<at&&(je+=Vt,at-=yn),c.addMark(je,at,n.create(t))}}r(c.scrollIntoView())}return!0}}function O0(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return function(e,r,i){for(var o=0;o<n.length;o++)if(n[o](e,r,i))return!0;return!1}}var w2=O0(n9,function Uve(n,t,e){var i=n.selection.$cursor;if(!i||(e?!e.endOfTextblock("backward",n):i.parentOffset>0))return!1;var o=r9(i);if(!o){var s=i.blockRange(),a=s&&v0(s);return null!=a&&(t&&t(n.tr.lift(s,a).scrollIntoView()),!0)}var l=o.nodeBefore;if(!l.type.spec.isolating&&c9(n,o,t))return!0;if(0==i.parent.content.size&&(Cg(l,"end")||nr.isSelectable(l))){var c=FI(n.doc,i.before(),i.after(),Qt.empty);if(c.slice.size<c.to-c.from){if(t){var d=n.tr.step(c);d.setSelection(Cg(l,"end")?Wr.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):nr.create(d.doc,o.pos-l.nodeSize)),t(d.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1||(t&&t(n.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),0))},function jve(n,t,e){var r=n.selection,i=r.$head,s=i;if(!r.empty)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=r9(i)}var a=s&&s.nodeBefore;return!(!a||!nr.isSelectable(a)||(t&&t(n.tr.setSelection(nr.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),0))}),d9=O0(n9,function Hve(n,t,e){var i=n.selection.$cursor;if(!i||(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size))return!1;var o=i9(i);if(!o)return!1;var s=o.nodeAfter;if(c9(n,o,t))return!0;if(0==i.parent.content.size&&(Cg(s,"start")||nr.isSelectable(s))){var a=FI(n.doc,i.before(),i.after(),Qt.empty);if(a.slice.size<a.to-a.from){if(t){var l=n.tr.step(a);l.setSelection(Cg(s,"start")?Wr.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):nr.create(l.doc,l.mapping.map(o.pos))),t(l.scrollIntoView())}return!0}}return!(!s.isAtom||o.depth!=i.depth-1||(t&&t(n.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),0))},function Vve(n,t,e){var r=n.selection,i=r.$head,s=i;if(!r.empty)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=i9(i)}var a=s&&s.nodeAfter;return!(!a||!nr.isSelectable(a)||(t&&t(n.tr.setSelection(nr.create(n.doc,s.pos)).scrollIntoView()),0))}),Ou={Enter:O0(o9,a9,l9,_2),"Mod-Enter":s9,Backspace:w2,"Mod-Backspace":w2,"Shift-Backspace":w2,Delete:d9,"Mod-Delete":d9,"Mod-a":function Wve(n,t){return t&&t(n.tr.setSelection(new Mu(n.doc))),!0}},h9={"Ctrl-h":Ou.Backspace,"Alt-Backspace":Ou["Mod-Backspace"],"Ctrl-d":Ou.Delete,"Ctrl-Alt-Backspace":Ou["Mod-Delete"],"Alt-Delete":Ou["Mod-Delete"],"Alt-d":Ou["Mod-Delete"],"Ctrl-a":Kve,"Ctrl-e":Gve};for(var f9 in Ou)h9[f9]=Ou[f9];var Xve=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?h9:Ou,Pu=function(t,e){this.match=t,this.handler="string"==typeof e?function Qve(n){return function(t,e,r,i){var o=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);o+=e[0].slice(s+e[1].length);var a=(r+=s)-i;a>0&&(o=e[0].slice(s-a,s)+o,r=i)}return t.tr.insertText(o,r,i)}}(e):e};function p9(n,t,e,r,i,o){if(n.composing)return!1;var s=n.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"\ufffc")+r,c=0;c<i.length;c++){var d=i[c].match.exec(l),E=d&&i[c].handler(s,d,t-(d[0].length-r.length),e);if(E)return n.dispatch(E.setMeta(o,{transform:E,from:t,to:e,text:r})),!0}return!1}var n_e=new Pu(/--$/,"\u2014"),r_e=new Pu(/\.\.\.$/,"\u2026"),l_e=[new Pu(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new Pu(/"$/,"\u201d"),new Pu(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new Pu(/'$/,"\u2019")];function x2(n,t,e,r){return new Pu(n,function(i,o,s,a){var l=e instanceof Function?e(o):e,c=i.tr.delete(s,a),E=c.doc.resolve(s).blockRange(),U=E&&II(E,t,l);if(!U)return null;c.wrap(E,U);var W=c.doc.resolve(s-1).nodeBefore;return W&&W.type==t&&RI(c.doc,s-1)&&(!r||r(o,W))&&c.join(s-1),c})}function g9(n,t,e){return new Pu(n,function(r,i,o,s){var a=r.doc.resolve(o),l=e instanceof Function?e(i):e;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?r.tr.delete(o,s).setBlockType(o,o,t,l):null})}const S2=(n,t)=>{const{from:e,$from:r,to:i,empty:o}=n.selection;return o?Boolean(t.isInSet(n.storedMarks||r.marks())):n.doc.rangeHasMark(e,i,t)},m9=(n,t,e={})=>{const{selection:r}=n,{$from:i,to:o}=r,s=((n,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===n)return t.node(e).type;return null})(t,i);return Object.entries(e).length&&s?o<=i.end()&&i.parent.hasMarkup(t,e):Boolean(s)},y9=n=>{const t=[],{selection:{from:e,to:r}}=n;return n.doc.nodesBetween(e,r,i=>{t.push(i)}),t},v9=(n,t,e)=>{for(const r of t){const{$from:i,$to:o}=r;let s=0===i.depth&&n.type.allowsMarkType(e);if(n.nodesBetween(i.pos,o.pos,a=>!s&&(s=a.inlineContent&&a.type.allowsMarkType(e),!0)),s)return!0}return!1},_9=(n,t,e)=>new Pu(n,(r,i,o,s)=>{const{tr:a}=r,l=o;let c=s;if(i[2]){const d=o+i[0].indexOf(i[2]),E=d+i[2].length;E<s&&a.delete(E,s),d>o&&a.delete(o,d),c=o+i[2].length}return a.addMark(l,c,t.create(e))}),b9=(n,t={})=>(e,r)=>{const{tr:i,selection:o}=e,{empty:s,ranges:a,$from:l,$to:c}=o;if(s&&o instanceof bi){const{$cursor:d}=o;if(!d||!v9(e.doc,a,n)||(i.addStoredMark(n.create(t)),!i.storedMarksSet))return!1;null==r||r(i)}else{if(i.addMark(l.pos,c.pos,n.create(t)),!i.docChanged)return!1;null==r||r(i.scrollIntoView())}return!0};for(var Fd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},I1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},w9="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),p_e="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),g_e="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),x9="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),m_e="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),y_e=w9&&(x9||+w9[1]<57)||g_e&&x9,ss=0;ss<10;ss++)Fd[48+ss]=Fd[96+ss]=String(ss);for(ss=1;ss<=24;ss++)Fd[ss+111]="F"+ss;for(ss=65;ss<=90;ss++)Fd[ss]=String.fromCharCode(ss+32),I1[ss]=String.fromCharCode(ss);for(var C2 in Fd)I1.hasOwnProperty(C2)||(I1[C2]=Fd[C2]);var __e="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function b_e(n){var t=n.split(/-(?!$)/),e=t[t.length-1];"Space"==e&&(e=" ");for(var r,i,o,s,a=0;a<t.length-1;a++){var l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);__e?s=!0:i=!0}}return r&&(e="Alt-"+e),i&&(e="Ctrl-"+e),s&&(e="Meta-"+e),o&&(e="Shift-"+e),e}function E2(n,t,e){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),!1!==e&&t.shiftKey&&(n="Shift-"+n),n}function P0(n){return new oa({props:{handleKeyDown:x_e(n)}})}function x_e(n){var t=function w_e(n){var t=Object.create(null);for(var e in n)t[b_e(e)]=n[e];return t}(n);return function(e,r){var s,i=function v_e(n){var e=!(y_e&&(n.ctrlKey||n.altKey||n.metaKey)||(p_e||m_e)&&n.shiftKey&&n.key&&1==n.key.length)&&n.key||(n.shiftKey?I1:Fd)[n.keyCode]||n.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(r),o=1==i.length&&" "!=i,a=t[E2(i,r,!o)];if(a&&a(e.state,e.dispatch,e))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Fd[r.keyCode])&&s!=i){var l=t[E2(s,r,!0)];if(l&&l(e.state,e.dispatch,e))return!0}else if(o&&r.shiftKey){var c=t[E2(i,r,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}var as=function(){};as.prototype.append=function(t){return t.length?(t=as.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},as.prototype.prepend=function(t){return t.length?as.from(t).append(this):this},as.prototype.appendInner=function(t){return new S_e(this,t)},as.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?as.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},as.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},as.prototype.forEach=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=this.length),e<=r?this.forEachInner(t,e,r,0):this.forEachInvertedInner(t,e,r,0)},as.prototype.map=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(t(o,s))},e,r),i},as.from=function(t){return t instanceof as?t:t&&t.length?new S9(t):as.empty};var S9=function(n){function t(r){n.call(this),this.values=r}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return 0==i&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(!1===i(this.values[l],a+l))return!1},t.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(!1===i(this.values[l],a+l))return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=200)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=200)return new t(i.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(as);as.empty=new S9([]);var S_e=function(n){function t(e,r){n.call(this),this.left=e,this.right=r,this.length=e.length+r.length,this.depth=Math.max(e.depth,r.depth)+1}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&!1===this.left.forEachInner(r,i,Math.min(o,a),s)||o>a&&!1===this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a))return!1},t.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&!1===this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)||o<a&&!1===this.left.forEachInvertedInner(r,Math.min(i,a),o,s))return!1},t.prototype.sliceInner=function(r,i){if(0==r&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(as);const C9=as;var ls=function(t,e){this.items=t,this.eventCount=e};ls.prototype.popEvent=function(t,e){var s,a,r=this;if(0==this.eventCount)return null;for(var i=this.items.length;;i--)if(this.items.get(i-1).selection){--i;break}e&&(s=this.remapping(i,this.items.length),a=s.maps.length);var c,d,l=t.tr,E=[],U=[];return this.items.forEach(function(W,ne){if(!W.step)return s||(s=r.remapping(i,ne+1),a=s.maps.length),a--,void U.push(W);if(s){U.push(new Ic(W.map));var Pe,Ce=W.step.map(s.slice(a));Ce&&l.maybeStep(Ce).doc&&E.push(new Ic(Pe=l.mapping.maps[l.mapping.maps.length-1],null,null,E.length+U.length)),a--,Pe&&s.appendMap(Pe,a)}else l.maybeStep(W.step);return W.selection?(c=s?W.selection.map(s.slice(a)):W.selection,d=new ls(r.items.slice(0,i).append(U.reverse().concat(E)),r.eventCount-1),!1):void 0},this.items.length,0),{remaining:d,transform:l,selection:c}},ls.prototype.addTransform=function(t,e,r,i){for(var o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null,c=0;c<t.steps.length;c++){var U,d=t.steps[c].invert(t.docs[c]),E=new Ic(t.mapping.maps[c],d,e);(U=l&&l.merge(E))&&(E=U,c?o.pop():a=a.slice(0,a.length-1)),o.push(E),e&&(s++,e=null),i||(l=E)}var W=s-r.depth;return W>k_e&&(a=function A_e(n,t){var e;return n.forEach(function(r,i){if(r.selection&&0==t--)return e=i,!1}),n.slice(e)}(a,W),s-=W),new ls(a.append(o),s)},ls.prototype.remapping=function(t,e){var r=new bs;return this.items.forEach(function(i,o){r.appendMap(i.map,null!=i.mirrorOffset&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:null)},t,e),r},ls.prototype.addMaps=function(t){return 0==this.eventCount?this:new ls(this.items.append(t.map(function(e){return new Ic(e)})),this.eventCount)},ls.prototype.rebased=function(t,e){if(!this.eventCount)return this;var r=[],i=Math.max(0,this.items.length-e),o=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(function(W){W.selection&&a--},i);var l=e;this.items.forEach(function(W){var ne=o.getMirror(--l);if(null!=ne){s=Math.min(s,ne);var Ce=o.maps[ne];if(W.step){var Pe=t.steps[ne].invert(t.docs[ne]),Qe=W.selection&&W.selection.map(o.slice(l+1,ne));Qe&&a++,r.push(new Ic(Ce,Pe,Qe))}else r.push(new Ic(Ce))}},i);for(var c=[],d=e;d<s;d++)c.push(new Ic(o.maps[d]));var E=this.items.slice(0,i).append(c).append(r),U=new ls(E,a);return U.emptyItemCount()>500&&(U=U.compress(this.items.length-r.length)),U},ls.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(e){e.step||t++}),t},ls.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),r=e.maps.length,i=[],o=0;return this.items.forEach(function(s,a){if(a>=t)i.push(s),s.selection&&o++;else if(s.step){var l=s.step.map(e.slice(r)),c=l&&l.getMap();if(r--,c&&e.appendMap(c,r),l){var d=s.selection&&s.selection.map(e.slice(r));d&&o++;var U,E=new Ic(c.invert(),l,d),W=i.length-1;(U=i.length&&i[W].merge(E))?i[W]=U:i.push(E)}}else s.map&&r--},this.items.length,0),new ls(C9.from(i.reverse()),o)},ls.empty=new ls(C9.empty,0);var Ic=function(t,e,r,i){this.map=t,this.step=e,this.selection=r,this.mirrorOffset=i};Ic.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new Ic(e.getMap().invert(),e,this.selection)}};var Nd=function(t,e,r,i){this.done=t,this.undone=e,this.prevRanges=r,this.prevTime=i},k_e=20;function E9(n){var t=[];return n.forEach(function(e,r,i,o){return t.push(i,o)}),t}function A2(n,t){if(!n)return null;for(var e=[],r=0;r<n.length;r+=2){var i=t.map(n[r],1),o=t.map(n[r+1],-1);i<=o&&e.push(i,o)}return e}function A9(n,t,e,r){var i=O1(t),o=Rc.get(t).spec.config,s=(r?n.undone:n.done).popEvent(t,i);if(s){var a=s.selection.resolve(s.transform.doc),l=(r?n.done:n.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),c=new Nd(r?l:s.remaining,r?s.remaining:l,null,0);e(s.transform.setSelection(a).setMeta(Rc,{redo:r,historyState:c}).scrollIntoView())}}var k2=!1,k9=null;function O1(n){var t=n.plugins;if(k9!=t){k2=!1,k9=t;for(var e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){k2=!0;break}}return k2}var Rc=new sa("history"),D9=new sa("closeHistory");function T9(n,t){var e=Rc.getState(n);return!(!e||0==e.done.eventCount||(t&&A9(e,n,t,!1),0))}function D2(n,t){var e=Rc.getState(n);return!(!e||0==e.undone.eventCount||(t&&A9(e,n,t,!0),0))}const I_e=["imgEl"];function R_e(n,t){if(1&n){const e=Dr();Le(0,"span",4)(1,"span",5),At("mousedown",function(i){return In(e),_t().startResizing(i,"left")}),Be(),Le(2,"span",6),At("mousedown",function(i){return In(e),_t().startResizing(i,"right")}),Be(),Le(3,"span",7),At("mousedown",function(i){return In(e),_t().startResizing(i,"left")}),Be(),Le(4,"span",8),At("mousedown",function(i){return In(e),_t().startResizing(i,"right")}),Be()()}}const O_e=function(n){return{"NgxEditor__Resizer--Active":n}},P_e=["ngxEditor"],F_e=["*"];function N_e(n,t){if(1&n&&(Le(0,"div",12),nt(1),Be()),2&n){const e=_t(2);it(1),Tr(" ",(null==e.href.errors?null:e.href.errors.pattern)&&"Please enter valid url."," ")}}function L_e(n,t){if(1&n&&(Le(0,"div",12),nt(1),Be()),2&n){const e=_t(2);it(1),Tr(" ",(null==e.text.errors?null:e.text.errors.required)&&"This is required"," ")}}function B_e(n,t){if(1&n){const e=Dr();Le(0,"div",2)(1,"form",3),At("ngSubmit",function(i){return In(e),_t().insertLink(i)}),Le(2,"div",4)(3,"div",5)(4,"label",6),nt(5),Be(),qt(6,"input",7),vt(7,N_e,2,1,"div",8),Be()(),Le(8,"div",4)(9,"div",5)(10,"label",6),nt(11),Be(),qt(12,"input",9),vt(13,L_e,2,1,"div",8),Be()(),Le(14,"div",4)(15,"div",5)(16,"label"),qt(17,"input",10),nt(18),Be()()(),Le(19,"button",11),nt(20),Be()()()}if(2&n){const e=_t();it(1),ut("formGroup",e.form),it(4),Oi(e.getLabel("url")),it(2),ut("ngIf",e.href.touched&&e.href.invalid),it(4),Oi(e.getLabel("text")),it(2),ut("ngIf",e.text.touched&&e.text.invalid),it(5),Tr(" ",e.getLabel("openInNewTab")," "),it(1),ut("disabled",!e.form.valid),it(1),Oi(e.getLabel("insert"))}}function U_e(n,t){if(1&n&&(Le(0,"div",12),nt(1),Be()),2&n){const e=_t(2);it(1),Tr(" ",(null==e.src.errors?null:e.src.errors.pattern)&&"Please enter valid url."," ")}}function j_e(n,t){if(1&n){const e=Dr();Le(0,"div",2)(1,"form",3),At("ngSubmit",function(i){return In(e),_t().insertLink(i)}),Le(2,"div",4)(3,"div",5)(4,"label",6),nt(5),Be(),qt(6,"input",7),vt(7,U_e,2,1,"div",8),Be()(),Le(8,"div",4)(9,"div",5)(10,"label",6),nt(11),Be(),qt(12,"input",9),Be()(),Le(13,"div",4)(14,"div",5)(15,"label",6),nt(16),Be(),qt(17,"input",10),Be()(),Le(18,"button",11),nt(19),Be()()()}if(2&n){const e=_t();it(1),ut("formGroup",e.form),it(4),Oi(e.getLabel("url")),it(2),ut("ngIf",e.src.touched&&e.src.invalid),it(4),Oi(e.getLabel("altText")),it(5),Oi(e.getLabel("title")),it(2),ut("disabled",!e.form.valid||!e.form.dirty),it(1),Oi(e.getLabel("insert"))}}const H_e=function(n,t){return{"NgxEditor__Dropdown--Active":n,"NgxEditor--Disabled":t}};function V_e(n,t){if(1&n){const e=Dr();Le(0,"div",4),At("mousedown",function(i){const s=In(e).$implicit;return _t(2).onClick(i,s)}),nt(1),Be()}if(2&n){const e=t.$implicit,r=_t(2);ut("ngClass",u_(2,H_e,e===r.activeItem,r.disabledItems.includes(e))),it(1),Tr(" ",r.getName(e)," ")}}function z_e(n,t){if(1&n&&(Le(0,"div",2),vt(1,V_e,2,5,"div",3),Be()),2&n){const e=_t();it(1),ut("ngForOf",e.items)("ngForTrackBy",e.trackByIndex)}}const W_e=function(n,t){return{backgroundColor:n,color:t}},$_e=function(n){return{"NgxEditor__Color--Active":n}};function K_e(n,t){if(1&n){const e=Dr();Le(0,"button",7),At("mousedown",function(i){const s=In(e).$implicit;return _t(3).onColorSelect(i,s)}),Be()}if(2&n){const e=t.$implicit,r=_t(3);ut("ngStyle",u_(3,W_e,e,r.getContrastYIQ(e)))("title",e)("ngClass",Lm(6,$_e,r.activeColors.includes(e)))}}function G_e(n,t){if(1&n&&(Le(0,"div",5),vt(1,K_e,1,8,"button",6),Be()),2&n){const e=t.$implicit,r=_t(2);it(1),ut("ngForOf",e)("ngForTrackBy",r.trackByIndex)}}function q_e(n,t){if(1&n){const e=Dr();Le(0,"div",2),vt(1,G_e,2,2,"div",3),Le(2,"button",4),At("mousedown",function(i){return In(e),_t().remove(i)}),nt(3),Be()()}if(2&n){const e=_t();it(1),ut("ngForOf",e.presets)("ngForTrackBy",e.trackByIndex),it(1),ut("disabled",!e.isActive),it(1),Tr(" ",e.getLabel("remove")," ")}}function J_e(n,t){if(1&n&&qt(0,"ngx-toggle-command",7),2&n){const e=_t().$implicit;Ho(_t(2).iconContainerClass),ut("toolbarItem",e)}}function Z_e(n,t){if(1&n&&qt(0,"ngx-insert-command",7),2&n){const e=_t().$implicit;Ho(_t(2).iconContainerClass),ut("toolbarItem",e)}}function Y_e(n,t){1&n&&qt(0,"ngx-link"),2&n&&Ho(_t(3).iconContainerClass)}function X_e(n,t){1&n&&qt(0,"ngx-image"),2&n&&Ho(_t(3).iconContainerClass)}function Q_e(n,t){if(1&n&&qt(0,"ngx-dropdown",9),2&n){const e=t.$implicit;Ho(_t(4).dropdownContainerClass),ut("group",e.key)("items",e.value)}}function ebe(n,t){if(1&n&&(Ii(0),vt(1,Q_e,1,4,"ngx-dropdown",8),dc(2,"keyvalue"),Ri()),2&n){const e=_t().$implicit,r=_t(2);it(1),ut("ngForOf",nu(2,2,r.getDropdownItems(e)))("ngForTrackBy",r.trackByIndex)}}function tbe(n,t){if(1&n&&qt(0,"ngx-color-picker",10),2&n){const e=_t(3);Ho(e.iconContainerClass),ut("presets",e.presets)}}function nbe(n,t){if(1&n&&qt(0,"ngx-color-picker",11),2&n){const e=_t(3);Ho(e.iconContainerClass),ut("presets",e.presets)}}function rbe(n,t){1&n&&qt(0,"div"),2&n&&Ho(_t(3).seperatorClass)}function ibe(n,t){if(1&n&&(Ii(0),vt(1,J_e,1,3,"ngx-toggle-command",3),vt(2,Z_e,1,3,"ngx-insert-command",3),vt(3,Y_e,1,2,"ngx-link",4),vt(4,X_e,1,2,"ngx-image",4),vt(5,ebe,3,4,"ng-container",2),vt(6,tbe,1,3,"ngx-color-picker",5),vt(7,nbe,1,3,"ngx-color-picker",6),vt(8,rbe,1,2,"div",4),Ri()),2&n){const e=t.$implicit,r=t.last,i=_t().last,o=_t();it(1),ut("ngIf",o.toggleCommands.includes(e)),it(1),ut("ngIf",o.insertCommands.includes(e)),it(1),ut("ngIf","link"===e),it(1),ut("ngIf","image"===e),it(1),ut("ngIf",o.isDropDown(e)),it(1),ut("ngIf","text_color"===e),it(1),ut("ngIf","background_color"===e),it(1),ut("ngIf",r&&!i)}}function obe(n,t){if(1&n&&(Ii(0),vt(1,ibe,9,8,"ng-container",1),Ri()),2&n){const e=t.$implicit,r=_t();it(1),ut("ngForOf",e)("ngForTrackBy",r.trackByIndex)}}function sbe(n,t){if(1&n&&(Ii(0),_a(1,12),Ri()),2&n){const e=_t();it(1),ut("ngTemplateOutlet",e.customMenuRef)}}const abe=function(n,t){return{"NgxEditor--Disabled":n,"NgxEditor__MenuBar--Reverse":t}},hbe=(n=!0)=>new oa({key:new sa("editable"),state:{init:()=>n,apply(t,e){var r;return null!==(r=t.getMeta("UPDATE_EDITABLE"))&&void 0!==r?r:e}},props:{editable(t){return this.getState(t)},attributes(t){return this.getState(t)?null:{class:"NgxEditor__Content--Disabled"}}}}),pbe=n=>new oa({key:new sa("placeholder"),state:{init:()=>null!=n?n:"",apply(t,e){var r;return null!==(r=t.getMeta("UPDATE_PLACEHOLDER"))&&void 0!==r?r:e}},props:{decorations(t){const{doc:e}=t,{textContent:r,childCount:i}=e,o=this.getState(t);if(!o||i>1)return Gr.empty;const s=[];return e.descendants((l,c)=>{var d;if(l.type.isBlock&&0===l.childCount&&0===r.length){const W=bo.node(c,c+l.nodeSize,{class:"NgxEditor__Placeholder","data-placeholder":o,"data-align":null!==(d=l.attrs.align)&&void 0!==d?d:null});s.push(W)}return!1}),Gr.create(e,s)}}}),M9=n=>new oa({key:new sa("focus"),props:{handleDOMEvents:{focus:()=>(n(),!1)}}});let ybe=(()=>{class n{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new Mn}startResizing(e,r){e.preventDefault(),this.resizeImage(e,r)}resizeImage(e,r){const i=e.pageX,o=this.imgEl.nativeElement.clientWidth,s="left"===r,{width:a}=window.getComputedStyle(this.view.dom),l=parseInt(a,10),c=E=>{const W=E.pageX-i,ne=s?o-W:o+W;ne>l||ne<20||(this.outerWidth=`${ne}px`)},d=E=>{E.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),this.imageResize.emit()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Jt({type:n,selectors:[["ngx-image-view"]],viewQuery:function(e,r){if(1&e&&Zr(I_e,7),2&e){let i;un(i=dn())&&(r.imgEl=i.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(e,r){1&e&&(Le(0,"span",0),vt(1,R_e,5,0,"span",1),qt(2,"img",2,3),Be()),2&e&&($a("width",r.outerWidth),ut("ngClass",Lm(7,O_e,r.selected)),it(1),ut("ngIf",r.selected),it(1),ut("src",r.src,rh)("alt",r.alt)("title",r.title))},directives:[fh,gi],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]}),n})();class vbe{constructor(t,e,r,i){this.updating=!1,this.handleResize=()=>{if(this.updating)return;const{state:a,dispatch:l}=this.view,{tr:c}=a,d=c.setNodeMarkup(this.getPos(),void 0,Object.assign(Object.assign({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),E=d.doc.resolve(this.getPos()),U=new nr(E);d.setSelection(U),l(d)};const o=i.get(eu);this.applicationRef=i.get(uh);const s=o.resolveComponentFactory(ybe);this.imageComponentRef=s.create(i,[]),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(t.attrs),this.imageComponentRef.instance.view=e,this.dom=this.imageComponentRef.location.nativeElement,this.view=e,this.node=t,this.getPos=r,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(t,e){return JSON.stringify(t)===JSON.stringify(e)}setNodeAttributes(t){this.imageComponentRef.instance.src=t.src,this.imageComponentRef.instance.alt=t.alt,this.imageComponentRef.instance.title=t.title,this.imageComponentRef.instance.outerWidth=t.width}update(t){return t.type===this.node.type&&(this.node=t,this.computeChanges(this.node.attrs,t.attrs)&&(this.updating=!0,this.setNodeAttributes(t.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}const bbe=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,I9=n=>{const t=[];return n.forEach(e=>{if(e.isText){const r=e.text;let i=0;const o=bbe.exec(r);if(o){const s=o.index,a=s+o[0].length,{link:l}=e.type.schema.marks;s>0&&t.push(e.cut(i,s));const c=r.slice(s,a);t.push(e.cut(s,a).mark(l.create({href:c}).addToSet(e.marks))),i=a}i<r.length&&t.push(e.cut(i))}else t.push(e.copy(I9(e.content)))}),Dt.fromArray(t)},xbe={type:"doc",content:[{type:"paragraph"}]},F0=(n,t)=>{if(!n)return t.nodeFromJSON(xbe);if("string"!=typeof n)return t.nodeFromJSON(n);const e=((n,t)=>{const e=null!=t?t:M1,r=document.createElement("div");return r.innerHTML=n,sl.fromSchema(e).parse(r).toJSON()})(n,t);return t.nodeFromJSON(e)};let Ebe=(()=>{class n{constructor(e,r,i){this.renderer=e,this.injector=r,this.elementRef=i,this.placeholder="Type Here...",this.focusOut=new Mn,this.focusIn=new Mn,this.subscriptions=[],this.onChange=()=>{},this.onTouched=()=>{}}writeValue(e){!this.outputFormat&&"string"==typeof e&&(this.outputFormat="html"),this.editor.setContent(null!=e?e:"")}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.setMeta("UPDATE_EDITABLE",!e),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)}handleChange(e){if("html"!==this.outputFormat)this.onChange(e);else{const r=((n,t)=>{const e=null!=t?t:M1,r=e.nodeFromJSON(n),i=ns.fromSchema(e).serializeFragment(r.content),o=document.createElement("div");return o.appendChild(i),o.innerHTML})(e,this.editor.schema);this.onChange(r)}}setMeta(e,r){const{dispatch:i,state:{tr:o}}=this.editor.view;i(o.setMeta(e,r))}setPlaceholder(e){this.setMeta("UPDATE_PLACEHOLDER",e)}registerPlugins(){this.editor.registerPlugin(hbe()),this.editor.registerPlugin(pbe(this.placeholder)),this.editor.registerPlugin(((n={})=>new oa({key:new sa("attributes"),props:{attributes:n}}))({class:"NgxEditor__Content"})),this.editor.registerPlugin(M9(()=>{this.focusIn.emit()})),this.editor.registerPlugin(M9(()=>{this.focusIn.emit()})),this.editor.registerPlugin((n=>new oa({key:new sa("blur"),props:{handleDOMEvents:{blur:()=>(n(),!1)}}}))(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin((n=>new oa({key:new sa("image-resize"),props:{nodeViews:{image:(t,e,r)=>new vbe(t,e,r,n)}}}))(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(new oa({key:new sa("linkify"),props:{transformPasted:n=>new Qt(I9(n.content),n.openStart,n.openEnd)}}))}ngOnInit(){if(!this.editor)throw new Error("NgxEditor: Required editor instance");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom);const e=this.editor.valueChanges.subscribe(r=>{this.handleChange(r)});this.subscriptions.push(e)}ngOnChanges(e){(null==e?void 0:e.placeholder)&&!e.placeholder.isFirstChange()&&this.setPlaceholder(e.placeholder.currentValue)}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}}return n.\u0275fac=function(e){return new(e||n)(xe(uc),xe(Ci),xe(vn))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-editor"]],viewQuery:function(e,r){if(1&e&&Zr(P_e,7),2&e){let i;un(i=dn())&&(r.ngxEditor=i.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[cn([{provide:js,useExisting:ot(()=>n),multi:!0}]),Si],ngContentSelectors:F_e,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:function(e,r){1&e&&(no(),Le(0,"div",0,1),ur(2),Be())},styles:['.NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open{background-color:#e8f0fe}.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected .NgxEditor__Dropdown--Text,.NgxEditor__Dropdown.NgxEditor__Dropdown--Open .NgxEditor__Dropdown--Text{color:#1a73e8}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\n'],encapsulation:2}),n})(),Ld=(()=>{class n{constructor(){this.customMenuRefChange=new Ne}setCustomMenuRef(e){this.customMenuRefChange.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gbe={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n'};class N0{static get(t,e="currentColor"){return`\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        viewBox="0 0 24 24"\n        fill=${e}\n        height=20\n        width=20\n      >\n        ${Gbe[t]||"<path></path>"}\n      </svg>\n    `}}class Ag{constructor(t){this.name=t}apply(){return(t,e)=>{const{schema:r}=t,i=r.marks[this.name];return!!i&&b9(i)(t,e)}}toggle(){return(t,e)=>{const{schema:r}=t,i=r.marks[this.name];return!!i&&Eg(i)(t,e)}}isActive(t){const{schema:e}=t,r=e.marks[this.name];return!!r&&S2(t,r)}canExecute(t){return this.toggle()(t)}}class P1{constructor(t=!1){this.isBulletList=!1,this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{const{schema:r}=t,i=this.getType(r);return!!i&&(this.isActive(t)?Q7(r.nodes.list_item)(t,e):function yve(n,t){return function(e,r){var i=e.selection,o=i.$from,s=i.$to,a=o.blockRange(s),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(n)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;var d=e.doc.resolve(a.start-2);c=new m0(d,d,a.depth),a.endIndex<a.parent.childCount&&(a=new m0(o,e.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var E=II(c,n,t,a);return!!E&&(r&&r(function vve(n,t,e,r,i){for(var o=Dt.empty,s=e.length-1;s>=0;s--)o=Dt.from(e[s].type.create(e[s].attrs,o));n.step(new Aa(t.start-(r?2:0),t.end,t.start,t.end,new Qt(o,0,0),e.length,!0));for(var a=0,l=0;l<e.length;l++)e[l].type==i&&(a=l+1);for(var c=e.length-a,d=t.start+e.length-(r?2:0),E=t.parent,U=t.startIndex,W=t.endIndex,ne=!0;U<W;U++,ne=!1)!ne&&yg(n.doc,d,c)&&(n.split(d,c),d+=2*c),d+=E.child(U).nodeSize;return n}(e.tr,a,E,l,n).scrollIntoView()),!0)}}(i)(t,e))}}isActive(t){const{schema:e}=t,r=this.getType(e);return!!r&&m9(t,r)}canExecute(t){return this.toggle()(t)}}class af{constructor(t){this.level=t}apply(){return(t,e)=>{const{schema:r}=t,i=r.nodes.heading;return!!i&&b2(i)(t,e)}}toggle(){return(t,e)=>{var r;const{schema:i,selection:o,doc:s}=t,a=i.nodes.heading;if(!a)return!1;const l=o.$from.before(1),c=s.nodeAt(l),d=null!==(r=null==c?void 0:c.attrs)&&void 0!==r?r:{};return this.isActive(t)?b2(i.nodes.paragraph,d)(t,e):b2(a,Object.assign(Object.assign({},d),{level:this.level}))(t,e)}}isActive(t){const{schema:e}=t,r=y9(t),i=e.nodes.heading;if(!i)return!1;const o=[i,e.nodes.text,e.nodes.blockquote],a=r.filter(l=>o.includes(l.type)).find(l=>l.attrs.level===this.level);return Boolean(a)}canExecute(t){return this.toggle()(t)}}class L0{constructor(t){this.align=t}toggle(){return(t,e)=>{const{doc:r,selection:i,tr:o,schema:s}=t,{from:a,to:l}=i;let c=!1;return r.nodesBetween(a,l,(d,E)=>{const U=d.type;return[s.nodes.paragraph,s.nodes.heading].includes(U)&&(c=!0,o.setNodeMarkup(E,U,Object.assign(Object.assign({},d.attrs),{align:this.align}))),!0}),!!c&&(o.docChanged&&(null==e||e(o)),!0)}}isActive(t){const r=y9(t).find(i=>i.attrs.align===this.align);return Boolean(r)}canExecute(t){return this.toggle()(t)}}const Zbe={strict:!0};class T2{update(t){return(e,r)=>{const{schema:i,selection:o}=e,s=i.marks.link;return!(!s||o.empty)&&Eg(s,t)(e,r)}}insert(t,e){return(r,i)=>{var o,s;const{schema:a,tr:l}=r;if(!a.marks.link)return!1;const d={href:e.href,title:null!==(o=e.title)&&void 0!==o?o:t,target:null!==(s=e.target)&&void 0!==s?s:"_blank"},E=a.text(t,[a.marks.link.create(d)]);return l.replaceSelectionWith(E,!1).scrollIntoView(),!!l.docChanged&&(null==i||i(l),!0)}}isActive(t,e=Zbe){if(e.strict)return!0;const{schema:r}=t,i=r.marks.link;return!!i&&S2(t,i)}remove(t,e){return((n,t)=>{const{doc:e,selection:r,tr:i}=n,{$head:{pos:o},from:s,to:a}=r;if(s===a){const l=e.resolve(o),c=o-l.textOffset,d=c+l.parent.child(l.index()).nodeSize;i.removeMark(c,d)}else i.removeMark(s,a);return!!i.docChanged&&(null==t||t(i),!0)})(t,e)}canExecute(t){const e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}}class R9{insert(t,e){return(r,i)=>{const{schema:o,tr:s,selection:a}=r,l=o.nodes.image;if(!l)return!1;const c=Object.assign({width:null,src:t},e);!c.width&&a instanceof nr&&a.node.type===l&&(c.width=a.node.attrs.width),s.replaceSelectionWith(l.createAndFill(c));const d=s.doc.resolve(s.selection.anchor-s.selection.$anchor.nodeBefore.nodeSize);return s.setSelection(new nr(d)).scrollIntoView(),!!s.docChanged&&(null==i||i(s),!0)}}isActive(t){const{selection:e}=t;return e instanceof nr&&"image"===e.node.type.name}}class kg{constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,r)=>{const{schema:i,selection:o,doc:s}=e,a=i.marks[this.name];if(!a)return!1;const{from:l,to:c,empty:d}=o;if(!d&&l+1===c){const E=s.nodeAt(l);if((null==E?void 0:E.isAtom)&&!E.isText&&E.isLeaf)return!1}return b9(a,t)(e,r)}}isActive(t){const{schema:e}=t,r=e.marks[this.name];return!!r&&S2(t,r)}getActiveColors(t){if(!this.isActive(t))return[];const{schema:e}=t;return(n=>{let t=[];const{selection:e,storedMarks:r}=n,{from:i,to:o,empty:s,$from:a}=e;return s?t=r||a.marks():n.doc.nodesBetween(i,o,l=>{t=[...t,...l.marks]}),t})(t).filter(o=>o.type===e.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{const{schema:r}=t,i=r.marks[this.name];return!!i&&(n=i,(t,e)=>{const{tr:r,selection:i,storedMarks:o,doc:s}=t,{empty:a,ranges:l}=i;if(a&&i instanceof bi){const{$cursor:c}=i;if(!c||!v9(t.doc,l,n))return!1;if(n.isInSet(o||c.marks()))return r.removeStoredMark(n),null==e||e(r),!0}else{for(const c of l){const{$from:d,$to:E}=c;s.rangeHasMark(d.pos,E.pos,n)&&r.removeMark(d.pos,E.pos,n)}if(!r.docChanged)return!1;null==e||e(r.scrollIntoView())}return!1})(t,e);var n}}canExecute(t){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(t)}}const Ybe=new Ag("strong"),Xbe=new Ag("em"),Qbe=new Ag("code"),ewe=new Ag("u"),twe=new Ag("s"),nwe=new class qbe{toggle(){return(t,e)=>{const{schema:r}=t,i=r.nodes.blockquote;return!!i&&(this.isActive(t)?function zve(n,t){var e=n.selection,o=e.$from.blockRange(e.$to),s=o&&v0(o);return null!=s&&(t&&t(n.tr.lift(o,s).scrollIntoView()),!0)}(t,e):function qve(n,t){return function(e,r){var i=e.selection,a=i.$from.blockRange(i.$to),l=a&&II(a,n,t);return!!l&&(r&&r(e.tr.wrap(a,l).scrollIntoView()),!0)}}(i)(t,e))}}isActive(t){const{schema:e}=t,r=e.nodes.blockquote;return!!r&&m9(t,r)}canExecute(t){return this.toggle()(t)}},rwe=new class Jbe{insert(){return(t,e)=>{const{schema:r,tr:i}=t,o=r.nodes.horizontal_rule;return!!o&&(e(i.replaceSelectionWith(o.create()).scrollIntoView()),!0)}}canExecute(t){return((n,t)=>{const{$from:e}=n.selection;for(let r=e.depth;r>=0;r-=1){const i=e.index(r);if(e.node(r).canReplaceWith(i,i,t))return!0}return!1})(t,t.schema.nodes.horizontal_rule)}},iwe=new P1(!0),owe=new P1(!1),swe=new af(1),awe=new af(2),lwe=new af(3),cwe=new af(4),uwe=new af(5),dwe=new af(6),hwe=new L0("left"),fwe=new L0("center"),pwe=new L0("right"),gwe=new L0("justify"),mwe=new T2,ywe=new R9,vwe=new kg("text_color","color"),_we=new kg("text_background_color","backgroundColor"),F1={bold:Ybe,italic:Xbe,code:Qbe,underline:ewe,strike:twe,blockquote:nwe,bullet_list:iwe,ordered_list:owe,h1:swe,h2:awe,h3:lwe,h4:cwe,h5:uwe,h6:dwe,align_left:hwe,align_center:fwe,align_right:pwe,align_justify:gwe},O9={horizontal_rule:rwe},B0=mwe,P9=ywe,bwe=vwe,wwe=_we,F9={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class xwe{constructor(t={}){this.locals=F9,this.get=e=>{var r;return null!==(r=this.locals[e])&&void 0!==r?r:""},this.locals=Object.assign(Object.assign({},F9),t)}}let M2=(()=>{class n{constructor(){this.locals={}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lf=(()=>{class n{constructor(e){this.config=e}get locals(){return new xwe(this.config.locals)}}return n.\u0275fac=function(e){return new(e||n)(lt(M2,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N9=n=>{var t;return{locals:null!==(t=n.locals)&&void 0!==t?t:{}}};let Dg=(()=>{class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return n.\u0275fac=function(e){return new(e||n)(xe(fc,16))},n.\u0275pipe=to({name:"sanitizeHtml",type:n,pure:!0}),n})(),Swe=(()=>{class n{constructor(e,r){this.ngxeService=e,this.menuService=r,this.isActive=!1,this.disabled=!1,this.update=i=>{const{state:o}=i,s=F1[this.name];this.isActive=s.isActive(o),this.disabled=!s.canExecute(o)}}get name(){return this.toolbarItem}toggle(e){if(e.preventDefault(),0!==e.button)return;const{state:r,dispatch:i}=this.editorView;F1[this.name].toggle()(r,i)}getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=N0.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(lf),xe(Ld))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-toggle-command"]],hostVars:4,hostBindings:function(e,r){2&e&&br("NgxEditor__MenuItem--Active",r.isActive)("NgxEditor--Disabled",r.disabled)},inputs:{toolbarItem:"toolbarItem"},decls:2,vars:4,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(e,r){1&e&&(Le(0,"div",0),At("mousedown",function(o){return r.toggle(o)}),dc(1,"sanitizeHtml"),Be()),2&e&&ut("innerHTML",nu(1,2,r.html),Xu)("title",r.getTitle(r.name))},pipes:[Dg],styles:[""]}),n})(),Cwe=(()=>{class n{constructor(e,r){this.ngxeService=e,this.menuService=r,this.disabled=!1,this.update=i=>{const{state:o}=i;this.disabled=!O9[this.name].canExecute(o)}}get name(){return this.toolbarItem}insert(e){if(e.preventDefault(),0!==e.button)return;const{state:r,dispatch:i}=this.editorView;O9[this.name].insert()(r,i)}getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=N0.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(lf),xe(Ld))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-insert-command"]],hostVars:2,hostBindings:function(e,r){2&e&&br("NgxEditor--Disabled",r.disabled)},inputs:{toolbarItem:"toolbarItem"},decls:2,vars:4,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(e,r){1&e&&(Le(0,"div",0),At("mousedown",function(o){return r.insert(o)}),dc(1,"sanitizeHtml"),Be()),2&e&&ut("innerHTML",nu(1,2,r.html),Xu)("title",r.getTitle(r.name))},pipes:[Dg],styles:[""]}),n})(),Ewe=(()=>{class n{constructor(e,r,i){this.el=e,this.ngxeService=r,this.menuService=i,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.form=new Op({href:new gs("",[dd.required,dd.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),text:new gs("",[dd.required]),openInNewTab:new gs(!0)}),this.setText=()=>{const{state:{selection:o,doc:s}}=this.editorView,{empty:a,from:l,to:c}=o,d=a?"":s.textBetween(l,c);d&&(this.text.patchValue(d),this.text.disable())},this.update=o=>{const{state:s}=o;this.isActive=B0.isActive(s,{strict:!1}),this.canExecute=B0.canExecute(s)}}get valid(){return this.isActive||this.showPopup}get disabled(){return!this.canExecute}get icon(){return N0.get(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getLabel(e){return this.ngxeService.locals.get(e)}hideForm(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}onMouseDown(e){if(0!==e.button)return;const{state:r,dispatch:i}=this.editorView;this.isActive?B0.remove(r,i):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}insertLink(e){e.preventDefault();const{text:r,href:i,openInNewTab:o}=this.form.getRawValue(),{dispatch:s,state:a}=this.editorView,{selection:l}=a,c={title:i,href:i,target:o?"_blank":"_self"};l.empty?(B0.insert(r,c)(a,s),this.editorView.focus()):B0.update(c)(a,s),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(lf),xe(Ld))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-link"]],hostVars:4,hostBindings:function(e,r){1&e&&At("mousedown",function(o){return r.onDocumentClick(o)},!1,_m),2&e&&br("NgxEditor__MenuItem--Active",r.valid)("NgxEditor--Disabled",r.disabled)},decls:3,vars:5,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(e,r){1&e&&(Le(0,"div",0),At("mousedown",function(o){return r.onMouseDown(o)}),dc(1,"sanitizeHtml"),Be(),vt(2,B_e,21,8,"div",1)),2&e&&(ut("innerHTML",nu(1,3,r.icon),Xu)("title",r.title),it(2),ut("ngIf",r.showPopup))},directives:[gi,kh,pu,fd,xa,ta,Fp,NA],pipes:[Dg],styles:[""]}),n})(),Awe=(()=>{class n{constructor(e,r,i){this.el=e,this.ngxeService=r,this.menuService=i,this.showPopup=!1,this.isActive=!1,this.form=new Op({src:new gs("",[dd.required,dd.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),alt:new gs(""),title:new gs("")}),this.update=o=>{const{state:s}=o;this.isActive=P9.isActive(s)}}get valid(){return this.isActive||this.showPopup}get icon(){return N0.get("image")}get src(){return this.form.get("src")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getLabel(e){return this.ngxeService.locals.get(e)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}onMouseDown(e){0===e.button&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}fillForm(){const{state:e}=this.editorView,{selection:r}=e;if(r instanceof nr&&this.isActive){const{src:i,alt:o="",title:s=""}=r.node.attrs;this.form.setValue({src:i,alt:o,title:s})}}insertLink(e){e.preventDefault();const{src:r,alt:i,title:o}=this.form.getRawValue(),{dispatch:s,state:a}=this.editorView;P9.insert(r,{alt:i,title:o})(a,s),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(lf),xe(Ld))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-image"]],hostVars:2,hostBindings:function(e,r){1&e&&At("mousedown",function(o){return r.onDocumentClick(o)},!1,_m),2&e&&br("NgxEditor__MenuItem--Active",r.valid)},decls:3,vars:5,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(e,r){1&e&&(Le(0,"div",0),At("mousedown",function(o){return r.onMouseDown(o)}),dc(1,"sanitizeHtml"),Be(),vt(2,j_e,20,7,"div",1)),2&e&&(ut("innerHTML",nu(1,3,r.icon),Xu)("title",r.getLabel("insertImage")),it(2),ut("ngIf",r.showPopup))},directives:[gi,kh,pu,fd,xa,ta,Fp],pipes:[Dg],styles:[""]}),n})(),kwe=(()=>{class n{constructor(e,r,i){this.ngxeService=e,this.menuService=r,this.el=i,this.isDropdownOpen=!1,this.disabledItems=[],this.update=o=>{const{state:s}=o;this.disabledItems=[];const a=[];this.items.forEach(l=>{const c=F1[l];c.isActive(s)&&a.push(l),c.canExecute(s)||this.disabledItems.push(l)}),1===a.length?[this.activeItem]=a:this.activeItem=null}}get isSelected(){return Boolean(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(e){!this.el.nativeElement.contains(e)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(e){return this.ngxeService.locals.get(e)}toggleDropdown(e){e.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}trackByIndex(e){return e}onClick(e,r){if(e.preventDefault(),0!==e.button)return;const i=F1[r],{state:o,dispatch:s}=this.editorView;i.toggle()(o,s),this.isDropdownOpen=!1}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(lf),xe(Ld),xe(vn))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-dropdown"]],hostVars:4,hostBindings:function(e,r){1&e&&At("mousedown",function(o){return r.onDocumentClick(o.target)},!1,_m),2&e&&br("NgxEditor__Dropdown--Selected",r.isSelected)("NgxEditor--Disabled",r.isDropdownDisabled)},inputs:{group:"group",items:"items"},decls:3,vars:2,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:function(e,r){1&e&&(Le(0,"div",0),At("mousedown",function(o){return r.toggleDropdown(o)}),nt(1),Be(),vt(2,z_e,2,2,"div",1)),2&e&&(it(1),Tr(" ",r.getName(r.activeItem||r.group),"\n"),it(1),ut("ngIf",r.isDropdownOpen))},directives:[gi,ph,fh],styles:[""]}),n})(),Dwe=(()=>{class n{constructor(e,r,i){this.el=e,this.menuService=r,this.ngxeService=i,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=o=>{const{state:s}=o;this.canExecute=this.command.canExecute(s),this.isActive=this.command.isActive(s),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(s))}}get valid(){return this.isActive||this.showPopup}get disabled(){return!this.canExecute}get title(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}get icon(){return N0.get("text_color"===this.type?"text_color":"color_fill")}get command(){return"text_color"===this.type?bwe:wwe}getContrastYIQ(e){const r=e.replace("#","");return(299*parseInt(r.substring(0,2),16)+587*parseInt(r.substring(2,4),16)+114*parseInt(r.substring(4,6),16))/1e3>=128?"black":"white"}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(e){e.preventDefault(),0===e.button&&(this.showPopup=!this.showPopup)}remove(e){e.preventDefault();const{state:r,dispatch:i}=this.editorView;this.command.remove()(r,i),this.hidePopup()}trackByIndex(e){return e}onColorSelect(e,r){if(e.preventDefault(),0!==e.button)return;const{state:i,dispatch:o}=this.editorView;"text_color"===this.type?this.command.apply({color:r})(i,o):this.command.apply({backgroundColor:r})(i,o),this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}getLabel(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Ld),xe(lf))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-color-picker"]],hostVars:4,hostBindings:function(e,r){1&e&&At("mousedown",function(o){return r.onDocumentClick(o)},!1,_m),2&e&&br("NgxEditor__MenuItem--Active",r.valid)("NgxEditor--Disabled",r.disabled)},inputs:{presets:"presets",type:"type"},decls:3,vars:5,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:function(e,r){1&e&&(Le(0,"div",0),At("mousedown",function(o){return r.togglePopup(o)}),dc(1,"sanitizeHtml"),Be(),vt(2,q_e,4,4,"div",1)),2&e&&(ut("innerHTML",nu(1,3,r.icon),Xu)("title",r.title),it(2),ut("ngIf",r.showPopup))},directives:[gi,ph,mE,fh],pipes:[Dg],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']}),n})();const Twe=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]],Mwe=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"];let Iwe=(()=>{class n{constructor(e){this.menuService=e,this.toolbar=Twe,this.colorPresets=Mwe,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.insertCommands=["horizontal_rule"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){const r=[];return this.colorPresets.forEach((i,o)=>{const s=Math.floor(o/8);r[s]||r.push([]),r[s].push(i)}),r}trackByIndex(e){return e}isDropDown(e){return!!(null==e?void 0:e.heading)}getDropdownItems(e){return e}ngOnInit(){if(!this.editor)throw new Error("NgxEditor: Required editor instance");this.menuService.editor=this.editor}}return n.\u0275fac=function(e){return new(e||n)(xe(Ld))},n.\u0275cmp=Jt({type:n,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[cn([Ld])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(e,r){1&e&&(Le(0,"div",0),vt(1,obe,2,2,"ng-container",1),vt(2,sbe,2,1,"ng-container",2),Be()),2&e&&(ut("ngClass",u_(4,abe,r.disabled,"top"===r.dropdownPlacement)),it(1),ut("ngForOf",r.toolbar)("ngForTrackBy",r.trackByIndex),it(1),ut("ngIf",r.customMenuRef))},directives:[Swe,Cwe,Ewe,Awe,kwe,Dwe,fh,ph,gi,T3],pipes:[M3],styles:[""]}),n})(),Rwe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[Dg],imports:[[Xs,rk]]}),n})();const N1=new Ot("NgxEditorConfig");let Owe=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:N1,useValue:e},{provide:M2,useFactory:N9,deps:[N1]}]}}static forChild(e){return{ngModule:n,providers:[{provide:N1,useValue:e},{provide:M2,useFactory:N9,deps:[N1]},lf]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[],imports:[[Xs,Rwe]]}),n})();const ul=(n,t=!1)=>(e,r)=>{const i=new Ag(n);return t?i.toggle()(e,r):i.apply()(e,r)};class Nwe{constructor(t){if(this.applyTrx=e=>{this.state=this.state.apply(null!=e?e:this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=e=>{this.applyTrx(e)},!t)throw Error("NgxEditor: Required view to initialize commands.");this.view=t,this.state=t.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;const t=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);const e=this.tr.setMeta("FORCE_EMIT",t);return this.view.dispatch(e),!0}focus(){return this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(t){return this.tr.insertText(t),this.applyTrx(),this}insertNewLine(){return O0(o9,a9,l9,_2)(this.state,this.dispatch),this}applyMark(t){return ul(t,!1)(this.state,this.dispatch),this}toggleMark(t){return ul(t,!0)(this.state,this.dispatch),this}bold(){return ul("strong")(this.state,this.dispatch),this}toggleBold(){return ul("strong",!0)(this.state,this.dispatch),this}italics(){return ul("em")(this.state,this.dispatch),this}toggleItalics(){return ul("em",!0)(this.state,this.dispatch),this}underline(){return ul("u")(this.state,this.dispatch),this}toggleUnderline(){return ul("u",!0)(this.state,this.dispatch),this}strike(){return ul("s")(this.state,this.dispatch),this}toggleStrike(){return ul("s",!0)(this.state,this.dispatch),this}code(){return ul("code")(this.state,this.dispatch),this}toggleCode(){return ul("code",!0)(this.state,this.dispatch),this}toggleOrderedList(){return new P1(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new P1(!0).toggle()(this.state,this.dispatch),this}toggleHeading(t){return new af(t).toggle()(this.state,this.dispatch),this}insertLink(t,e){return(new T2).insert(t,e)(this.state,this.dispatch),this}updateLink(t){return(new T2).update(t)(this.state,this.dispatch),this}insertImage(t,e={}){return(new R9).insert(t,e)(this.state,this.dispatch),this}textColor(t){return new kg("text_color").apply({color:t})(this.state,this.dispatch),this}backgroundColor(t){return new kg("text_background_color").apply({backgroundColor:t})(this.state,this.dispatch),this}removeTextColor(){return new kg("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new kg("text_background_color").remove()(this.state,this.dispatch),this}align(t){return new L0(t).toggle()(this.state,this.dispatch),this}insertHTML(t){const{selection:e,schema:r,tr:i}=this.state,{from:o,to:s}=e,a=document.createElement("div");a.innerHTML=t.trim();const l=sl.fromSchema(r).parseSlice(a),c=i.replaceRange(o,s,l);return this.applyTrx(c),this}}const Lwe="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),$we=n=>{const t=l_e.concat(r_e,n_e);return t.push((n=>_9(/(?:^|\s)(?:(?:\*\*|__)(?:(?:[^*_]+))(?:\*\*|__))$/,n))(n.marks.strong)),t.push((n=>_9(/(?:^|\s)(?:(?:\*|_)(?:(?:[^*_]+))(?:\*|_))$/,n))(n.marks.em)),t.push((n=>x2(/^\s*>\s$/,n))(n.nodes.blockquote)),t.push((n=>x2(/^(?:\d+)\.\s$/,n,t=>({order:Number(t[1])}),(t,e)=>e.childCount+e.attrs.order===Number(t[1])))(n.nodes.ordered_list)),t.push((n=>x2(/^\s*(?:[-+*])\s$/,n))(n.nodes.bullet_list)),t.push((n=>g9(/^```$/,n))(n.nodes.code_block)),t.push(((n,t)=>g9(new RegExp("^(#{1,6})\\s$"),n,e=>({level:e[1].length})))(n.nodes.heading)),function t_e(n){var t=n.rules,e=new oa({state:{init:function(){return null},apply:function(i,o){return i.getMeta(this)||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput:function(i,o,s,a){return p9(i,o,s,a,t,e)},handleDOMEvents:{compositionend:function(r){setTimeout(function(){var o=r.state.selection.$cursor;o&&p9(r,o.pos,o.pos,"",t,e)})}}},isInputRules:!0});return e}({rules:t})},Gwe=(n,t)=>{const e=[];return t.keyboardShortcuts&&e.push(...((n,t)=>{const e={};e["Mod-z"]=T9,Lwe?e["Shift-Mod-z"]=D2:e["Mod-y"]=D2;const r=[P0({"Mod-b":Eg(n.marks.strong),"Mod-i":Eg(n.marks.em),"Mod-u":Eg(n.marks.u),"Mod-`":Eg(n.marks.code)}),P0({Enter:_ve(n.nodes.list_item),"Shift-Enter":O0(s9,(i,o)=>{const{tr:s}=i;return o(s.replaceSelectionWith(n.nodes.hard_break.create()).scrollIntoView()),!0}),"Mod-[":Q7(n.nodes.list_item),"Mod-]":e9(n.nodes.list_item),Tab:e9(n.nodes.list_item)}),P0(Xve)];return t.history&&r.push(P0(e)),r})(n,{history:t.history})),t.history&&e.push(function M_e(n){return new oa({key:Rc,state:{init:function(){return new Nd(ls.empty,ls.empty,null,0)},apply:function(e,r,i){return function D_e(n,t,e,r){var o,i=e.getMeta(Rc);if(i)return i.historyState;e.getMeta(D9)&&(n=new Nd(n.done,n.undone,null,0));var s=e.getMeta("appendedTransaction");if(0==e.steps.length)return n;if(s&&s.getMeta(Rc))return s.getMeta(Rc).redo?new Nd(n.done.addTransform(e,null,r,O1(t)),n.undone,E9(e.mapping.maps[e.steps.length-1]),n.prevTime):new Nd(n.done,n.undone.addTransform(e,null,r,O1(t)),null,n.prevTime);if(!1===e.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=e.getMeta("rebased"))?new Nd(n.done.rebased(e,o),n.undone.rebased(e,o),A2(n.prevRanges,e.mapping),n.prevTime):new Nd(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),A2(n.prevRanges,e.mapping),n.prevTime);var a=0==n.prevTime||!s&&(n.prevTime<(e.time||0)-r.newGroupDelay||!function T_e(n,t){if(!t)return!1;if(!n.docChanged)return!0;var e=!1;return n.mapping.maps[0].forEach(function(r,i){for(var o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(e=!0)}),e}(e,n.prevRanges)),l=s?A2(n.prevRanges,e.mapping):E9(e.mapping.maps[e.steps.length-1]);return new Nd(n.done.addTransform(e,a?t.selection.getBookmark():null,r,O1(t)),ls.empty,l,e.time)}(r,i,e,n)}},config:n={depth:n&&n.depth||100,newGroupDelay:n&&n.newGroupDelay||500},props:{handleDOMEvents:{beforeinput:function(e,r){var i="historyUndo"==r.inputType?T9(e.state,e.dispatch):"historyRedo"==r.inputType&&D2(e.state,e.dispatch);return i&&r.preventDefault(),i}}}})}()),t.inputRules&&e.push($we(n)),e},B9={linkOnPaste:!0,resizeImage:!0},U9={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:M1,plugins:[],nodeViews:{},attributes:{},features:B9};class qwe{constructor(t=U9){this.valueChangesSubject=new Ne,this.updateSubject=new Ne,this.options=Object.assign(Object.assign({},U9),t),this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||M1}get commands(){return new Nwe(this.view)}get features(){return Object.assign(Object.assign({},B9),this.options.features)}handleTransactions(t){const e=this.view.state.apply(t);if(this.view.updateState(e),this.updateSubject.next(this.view),!t.docChanged&&!t.getMeta("FORCE_EMIT"))return;const r=e.doc.toJSON();this.valueChangesSubject.next(r)}createEditor(){var t,e;const{options:r,schema:i}=this,{content:o=null,nodeViews:s}=r,{history:a=!0,keyboardShortcuts:l=!0,inputRules:c=!0}=r,d=F0(o,i),E=null!==(t=r.plugins)&&void 0!==t?t:[],U=null!==(e=r.attributes)&&void 0!==e?e:{},W=Gwe(i,{history:a,keyboardShortcuts:l,inputRules:c});this.view=new wo(null,{state:xs.create({doc:d,schema:i,plugins:[...W,...E]}),nodeViews:s,dispatchTransaction:this.handleTransactions.bind(this),attributes:U})}setContent(t){if(null==t)return;const{state:e}=this.view,{tr:r,doc:i}=e,o=F0(t,this.schema);r.replaceWith(0,e.doc.content.size,o),!i.eq(r.doc)&&(!r.docChanged||this.view.dispatch(r))}registerPlugin(t){const{state:e}=this.view,r=[...e.plugins,t],i=e.reconfigure({plugins:r});this.view.updateState(i)}destroy(){this.view.destroy()}}const Hl=()=>new Map,L1=n=>{const t=Hl();return n.forEach((e,r)=>{t.set(r,e)}),t},Ta=(n,t,e)=>{let r=n.get(t);return void 0===r&&n.set(t,r=e()),r},Tg=()=>new Set,I2=n=>n[n.length-1],Ywe=(n,t)=>{for(let e=0;e<t.length;e++)n.push(t[e])},j9=Array.from,Qwe=Array.isArray;class U0{constructor(){this._observers=Hl()}on(t,e){Ta(this._observers,t,Tg).add(e)}once(t,e){const r=(...i)=>{this.off(t,r),e(...i)};this.on(t,r)}off(t,e){const r=this._observers.get(t);void 0!==r&&(r.delete(e),0===r.size&&this._observers.delete(t))}emit(t,e){return j9((this._observers.get(t)||Hl()).values()).forEach(r=>r(...e))}destroy(){this._observers=Hl()}}const cf=Math.floor,B1=(Math,Math.abs),e1e=(Math,Math,Math.log10),Bd=(Math,Math,Math,(n,t)=>n<t?n:t),Fu=(n,t)=>n>t?n:t,H9=(Math,Math,n=>0!==n?n<0:1/n<0),t1e=String.fromCharCode,r1e=/^\s*/g,o1e=/([A-Z])/g,V9=(n,t)=>(n=>n.replace(r1e,""))(n.replace(o1e,e=>`${t}${(n=>n.toLowerCase())(e)}`)),z9="undefined"!=typeof TextEncoder?new TextEncoder:null,W9=z9?n=>z9.encode(n):n=>{const t=unescape(encodeURIComponent(n)),e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.codePointAt(i);return r};let U1="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});U1&&1===U1.decode(new Uint8Array).length&&(U1=null);let K9=new class a1e{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}},G9=!0;try{"undefined"!=typeof localStorage&&(K9=localStorage,G9=!1)}catch(n){}const q9=K9,j1="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name),R2="undefined"!=typeof window&&!j1;let Oc;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);const c1e=[],P2=n=>(n=>void 0===n?null:n)(j1?process.env[n.toUpperCase()]:q9.getItem(n)),J9=((n=>(()=>{if(void 0===Oc)if(j1){Oc=Hl();const n=process.argv;let t=null;for(let e=0;e<n.length;e++){const r=n[e];"-"===r[0]?(null!==t&&Oc.set(t,""),t=r):null!==t?(Oc.set(t,r),t=null):c1e.push(r)}null!==t&&Oc.set(t,"")}else"object"==typeof location?(Oc=Hl(),(location.search||"?").slice(1).split("&").forEach(n=>{if(0!==n.length){const[t,e]=n.split("=");Oc.set(`--${V9(t,"-")}`,e),Oc.set(`-${V9(t,"-")}`,e)}})):Oc=Hl();return Oc})().has(n))("--"+"production")||P2("production"),n=>new Uint8Array(n)),F2=(n,t,e)=>new Uint8Array(n,t,e),Z9=R2?n=>{let t="";for(let e=0;e<n.byteLength;e++)t+=t1e(n[e]);return btoa(t)}:n=>Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"),Y9=R2?n=>{const t=atob(n),e=J9(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}:n=>{const t=Buffer.from(n,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},Ma=128,I1e=Number.isInteger||(n=>"number"==typeof n&&isFinite(n)&&cf(n)===n);class Mg{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const zo=()=>new Mg,wi=n=>{const t=new Uint8Array((n=>{let t=n.cpos;for(let e=0;e<n.bufs.length;e++)t+=n.bufs[e].length;return t})(n));let e=0;for(let r=0;r<n.bufs.length;r++){const i=n.bufs[r];t.set(i,e),e+=i.length}return t.set(F2(n.cbuf.buffer,0,n.cpos),e),t},lo=(n,t)=>{const e=n.cbuf.length;n.cpos===e&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(2*e),n.cpos=0),n.cbuf[n.cpos++]=t},H0=lo,On=(n,t)=>{for(;t>127;)lo(n,Ma|127&t),t>>>=7;lo(n,127&t)},V0=(n,t)=>{const e=H9(t);for(e&&(t=-t),lo(n,(t>63?Ma:0)|(e?64:0)|63&t),t>>>=6;t>0;)lo(n,(t>127?Ma:0)|127&t),t>>>=7},Pc=(n,t)=>{const e=unescape(encodeURIComponent(t)),r=e.length;On(n,r);for(let i=0;i<r;i++)lo(n,e.codePointAt(i))},z0=(n,t)=>{const e=n.cbuf.length,r=n.cpos,i=Bd(e-r,t.length),o=t.length-i;n.cbuf.set(t.subarray(0,i),r),n.cpos+=i,o>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Fu(2*e,o)),n.cbuf.set(t.subarray(i)),n.cpos=o)},co=(n,t)=>{On(n,t.byteLength),z0(n,t)},V1=(n,t)=>{((n,t)=>{const e=n.cbuf.length;e-n.cpos<t&&(n.bufs.push(F2(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(2*Fu(e,t)),n.cpos=0)})(n,t);const e=new DataView(n.cbuf.buffer,n.cpos,t);return n.cpos+=t,e},tW=new DataView(new ArrayBuffer(4)),Ig=(n,t)=>{switch(typeof t){case"string":lo(n,119),Pc(n,t);break;case"number":I1e(t)&&B1(t)<=2147483647?(lo(n,125),V0(n,t)):(n=>(tW.setFloat32(0,n),tW.getFloat32(0)===n))(t)?(lo(n,124),((n,t)=>{V1(n,4).setFloat32(0,t,!1)})(n,t)):(lo(n,123),((n,t)=>{V1(n,8).setFloat64(0,t,!1)})(n,t));break;case"bigint":lo(n,122),((n,t)=>{V1(n,8).setBigInt64(0,t,!1)})(n,t);break;case"object":if(null===t)lo(n,126);else if(t instanceof Array){lo(n,117),On(n,t.length);for(let e=0;e<t.length;e++)Ig(n,t[e])}else if(t instanceof Uint8Array)lo(n,116),co(n,t);else{lo(n,118);const e=Object.keys(t);On(n,e.length);for(let r=0;r<e.length;r++){const i=e[r];Pc(n,i),Ig(n,t[i])}}break;case"boolean":lo(n,t?120:121);break;default:lo(n,127)}};class nW extends Mg{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&On(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const z1=n=>{n.count>0&&(V0(n.encoder,1===n.count?n.s:-n.s),n.count>1&&On(n.encoder,n.count-2))};class W1{constructor(){this.encoder=new Mg,this.s=0,this.count=0}write(t){this.s===t?this.count++:(z1(this),this.count=1,this.s=t)}toUint8Array(){return z1(this),wi(this.encoder)}}const rW=n=>{n.count>0&&(V0(n.encoder,n.diff<<1|(1===n.count?0:1)),n.count>1&&On(n.encoder,n.count-2))};class j2{constructor(){this.encoder=new Mg,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(rW(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return rW(this),wi(this.encoder)}}class B1e{constructor(){this.sarr=[],this.s="",this.lensE=new W1}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Mg;return this.sarr.push(this.s),this.s="",Pc(t,this.sarr.join("")),z0(t,this.lensE.toUint8Array()),wi(t)}}class $1{constructor(t){this.arr=t,this.pos=0}}const Vl=n=>new $1(n),cs=n=>((n,t)=>{const e=F2(n.arr.buffer,n.pos+n.arr.byteOffset,t);return n.pos+=t,e})(n,$n(n)),df=n=>n.arr[n.pos++],$n=n=>{let t=0,e=0;for(;;){const r=n.arr[n.pos++];if(t|=(127&r)<<e,e+=7,r<Ma)return t>>>0;if(e>53)throw new Error("Integer out of range!")}},hf=n=>{let t=n.arr[n.pos++],e=63&t,r=6;const i=(64&t)>0?-1:1;if(0==(t&Ma))return i*e;for(;;){if(t=n.arr[n.pos++],e|=(127&t)<<r,r+=7,t<Ma)return i*(e>>>0);if(r>53)throw new Error("Integer out of range!")}},Fc=n=>{let t=$n(n);if(0===t)return"";{let e=String.fromCodePoint(df(n));if(--t<100)for(;t--;)e+=String.fromCodePoint(df(n));else for(;t>0;){const r=t<1e4?t:1e4,i=n.arr.subarray(n.pos,n.pos+r);n.pos+=r,e+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(e))}},K1=(n,t)=>{const e=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,t);return n.pos+=t,e},V1e=[n=>{},n=>null,hf,n=>K1(n,4).getFloat32(0,!1),n=>K1(n,8).getFloat64(0,!1),n=>K1(n,8).getBigInt64(0,!1),n=>!1,n=>!0,Fc,n=>{const t=$n(n),e={};for(let r=0;r<t;r++)e[Fc(n)]=Rg(n);return e},n=>{const t=$n(n),e=[];for(let r=0;r<t;r++)e.push(Rg(n));return e},cs],Rg=n=>V1e[127-df(n)](n);class sW extends $1{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),this.count=(n=>n.pos!==n.arr.length)(this)?$n(this)+1:-1),this.count--,this.s}}class G1 extends $1{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=hf(this);const t=H9(this.s);this.count=1,t&&(this.s=-this.s,this.count=$n(this)+2)}return this.count--,this.s}}class H2 extends $1{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=hf(this),e=1&t;this.diff=t>>1,this.count=1,e&&(this.count=$n(this)+2)}return this.s+=this.diff,this.count--,this.s}}class z1e{constructor(t){this.decoder=new G1(t),this.str=Fc(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}"undefined"==typeof window||void 0!==window.performance&&window;const aW="undefined"==typeof crypto?null:crypto,W1e=null!==aW?n=>{const t=new ArrayBuffer(n),e=new Uint8Array(t);return aW.getRandomValues(e),t}:n=>{const t=new ArrayBuffer(n),e=new Uint8Array(t);for(let r=0;r<n;r++)e[r]=Math.ceil(4294967295*Math.random()>>>0);return t},lW=Math.random,cW=()=>new Uint32Array(W1e(4))[0],K1e=[1e7]+-1e3+-4e3+-8e3+-1e11,uW=()=>K1e.replace(/[018]/g,n=>(n^cW()&15>>n/4).toString(16)),z2=n=>Promise.resolve(n),Og=n=>new Error(n),zl=()=>{throw Og("Method unimplemented")},dl=()=>{throw Og("Unexpected case")},dW=Object.keys,q1=n=>dW(n).length,hW=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),W2=(n,t,e=0)=>{try{for(;e<n.length;e++)n[e](...t)}finally{e<n.length&&W2(n,t,e+1)}},Z1e=()=>{},W0=(n,t)=>{if(null==n||null==t)return((n,t)=>n===t)(n,t);if(n.constructor!==t.constructor)return!1;if(n===t)return!0;switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),t=new Uint8Array(t);case Uint8Array:if(n.byteLength!==t.byteLength)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;break;case Set:if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;break;case Map:if(n.size!==t.size)return!1;for(const e of n.keys())if(!t.has(e)||!W0(n.get(e),t.get(e)))return!1;break;case Object:if(q1(n)!==q1(t))return!1;for(const e in n)if(!hW(n,e)||!W0(n[e],t[e]))return!1;break;case Array:if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(!W0(n[e],t[e]))return!1;break;default:return!1}return!0},Lu=Symbol;class fW{constructor(t,e){this.left=t,this.right=e}}const Bu=(n,t)=>new fW(n,t),hl="undefined"!=typeof document?document:{},oxe=("undefined"!=typeof DOMParser&&new DOMParser,n=>((n,t)=>{const e=[];for(const[r,i]of n)e.push(t(i,r));return e})(n,(t,e)=>`${e}:${t};`).join("")),Nc=Date.now,la=Lu(),Ud=Lu(),$2=Lu(),J1=Lu(),K2=Lu(),Z1=Lu(),G2=Lu(),$0=Lu(),K0=Lu(),vW={[la]:Bu("font-weight","bold"),[Ud]:Bu("font-weight","normal"),[$2]:Bu("color","blue"),[K2]:Bu("color","green"),[J1]:Bu("color","grey"),[Z1]:Bu("color","red"),[G2]:Bu("color","purple"),[$0]:Bu("color","orange"),[K0]:Bu("color","black")},sxe={[la]:"\x1b[1m",[Ud]:"\x1b[2m",[$2]:"\x1b[34m",[K2]:"\x1b[32m",[J1]:"\x1b[37m",[Z1]:"\x1b[31m",[G2]:"\x1b[35m",[$0]:"\x1b[38;5;208m",[K0]:"\x1b[0m"},Y1=j1?n=>{const t=[],e=[];let r=0;for(;r<n.length;r++){const i=n[r],o=sxe[i];if(void 0!==o)t.push(o);else{if(i.constructor!==String&&i.constructor!==Number)break;t.push(i)}}for(r>0&&(t.push("\x1b[0m"),e.push(t.join("")));r<n.length;r++){const i=n[r];i instanceof Symbol||e.push(i)}return e}:n=>{const t=[],e=[],r=Hl();let i=[],o=0;for(;o<n.length;o++){const s=n[o],a=vW[s];if(void 0!==a)r.set(a.left,a.right);else{if(s.constructor!==String&&s.constructor!==Number)break;{const l=oxe(r);o>0||l.length>0?(t.push("%c"+s),e.push(l)):t.push(s)}}}for(o>0&&(i=e,i.unshift(t.join("")));o<n.length;o++){const s=n[o];s instanceof Symbol||i.push(s)}return i},_W=(...n)=>{console.log(...Y1(n)),Lc.forEach(t=>t.print(n))},Lc=new Set,SW=[K2,G2,$0,$2];let q2=0,CW=Nc();const EW=n=>({[Symbol.iterator](){return this},next:n}),J2=(n,t)=>EW(()=>{const{done:e,value:r}=n.next();return{done:e,value:e?void 0:t(r)}});class Z2{constructor(t,e){this.clock=t,this.len=e}}class Pg{constructor(){this.clients=new Map}}const Uu=(n,t,e)=>t.clients.forEach((r,i)=>{const o=n.doc.store.clients.get(i);for(let s=0;s<r.length;s++){const a=r[s];zW(n,o,a.clock,a.len,e)}}),Fg=(n,t)=>{const e=n.clients.get(t.client);return void 0!==e&&null!==((n,t)=>{let e=0,r=n.length-1;for(;e<=r;){const i=cf((e+r)/2),o=n[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;e=i+1}else r=i-1}return null})(e,t.clock)},Y2=n=>{n.clients.forEach(t=>{let e,r;for(t.sort((i,o)=>i.clock-o.clock),e=1,r=1;e<t.length;e++){const i=t[r-1],o=t[e];i.clock+i.len>=o.clock?i.len=Fu(i.len,o.clock+o.len-i.clock):(r<e&&(t[r]=o),r++)}t.length=r})},G0=n=>{const t=new Pg;for(let e=0;e<n.length;e++)n[e].clients.forEach((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let s=e+1;s<n.length;s++)Ywe(o,n[s].clients.get(i)||[]);t.clients.set(i,o)}});return Y2(t),t},q0=(n,t,e,r)=>{Ta(n.clients,t,()=>[]).push(new Z2(e,r))},X1=()=>new Pg,AW=n=>{const t=X1();return n.clients.forEach((e,r)=>{const i=[];for(let o=0;o<e.length;o++){const s=e[o];if(s.deleted){const a=s.id.clock;let l=s.length;if(o+1<e.length)for(let c=e[o+1];o+1<e.length&&c.deleted;c=e[1+ ++o])l+=c.length;i.push(new Z2(a,l))}}i.length>0&&t.clients.set(r,i)}),t},Bc=(n,t)=>{On(n.restEncoder,t.clients.size),t.clients.forEach((e,r)=>{n.resetDsCurVal(),On(n.restEncoder,r);const i=e.length;On(n.restEncoder,i);for(let o=0;o<i;o++){const s=e[o];n.writeDsClock(s.clock),n.writeDsLen(s.len)}})},jd=n=>{const t=new Pg,e=$n(n.restDecoder);for(let r=0;r<e;r++){n.resetDsCurVal();const i=$n(n.restDecoder),o=$n(n.restDecoder);if(o>0){const s=Ta(t.clients,i,()=>[]);for(let a=0;a<o;a++)s.push(new Z2(n.readDsClock(),n.readDsLen()))}}return t},kW=(n,t,e)=>{const r=new Pg,i=$n(n.restDecoder);for(let o=0;o<i;o++){n.resetDsCurVal();const s=$n(n.restDecoder),a=$n(n.restDecoder),l=e.clients.get(s)||[],c=Xi(e,s);for(let d=0;d<a;d++){const E=n.readDsClock(),U=E+n.readDsLen();if(E<c){c<U&&q0(r,s,c,U-c);let W=Wl(l,E),ne=l[W];for(!ne.deleted&&ne.id.clock<E&&(l.splice(W+1,0,gx(t,ne,E-ne.id.clock)),W++);W<l.length&&(ne=l[W++],ne.id.clock<U);)ne.deleted||(U<ne.id.clock+ne.length&&l.splice(W,0,gx(t,ne,U-ne.id.clock)),ne.delete(t))}else q0(r,s,E,U-E)}}if(r.clients.size>0){const o=new Hu;return On(o.restEncoder,0),Bc(o,r),o.toUint8Array()}return null},DW=cW;class ff extends U0{constructor({guid:t=uW(),collectionid:e=null,gc:r=!0,gcFilter:i=(()=>!0),meta:o=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=DW(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new jW,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.whenLoaded=(n=>new Promise(n))(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})})}load(){const t=this._item;null!==t&&!this.shouldLoad&&ci(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,e=null){ci(this,t,e)}get(t,e=us){const r=Ta(this.share,t,()=>{const o=new e;return o._integrate(this,null),o}),i=r.constructor;if(e!==us&&i!==e){if(i===us){const o=new e;o._map=r._map,r._map.forEach(s=>{for(;null!==s;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;null!==s;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return r}getArray(t=""){return this.get(t,Vd)}getText(t=""){return this.get(t,yf)}getMap(t=""){return this.get(t,mf)}getXmlFragment(t=""){return this.get(t,vf)}toJSON(){const t={};return this.share.forEach((e,r)=>{t[r]=e.toJSON()}),t}destroy(){j9(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new ff(ar($t({guid:this.guid},e.opts),{shouldLoad:!1})),e.doc._item=t,ci(t.parent.doc,r=>{t.deleted||r.subdocsAdded.add(e.doc),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class J0{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return $n(this.restDecoder)}readDsLen(){return $n(this.restDecoder)}}class ju extends J0{readLeftID(){return qn($n(this.restDecoder),$n(this.restDecoder))}readRightID(){return qn($n(this.restDecoder),$n(this.restDecoder))}readClient(){return $n(this.restDecoder)}readInfo(){return df(this.restDecoder)}readString(){return Fc(this.restDecoder)}readParentInfo(){return 1===$n(this.restDecoder)}readTypeRef(){return $n(this.restDecoder)}readLen(){return $n(this.restDecoder)}readAny(){return Rg(this.restDecoder)}readBuf(){return(n=>{const t=J9(n.byteLength);return t.set(n),t})(cs(this.restDecoder))}readJSON(){return JSON.parse(Fc(this.restDecoder))}readKey(){return Fc(this.restDecoder)}}class Uc extends class TW{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=$n(this.restDecoder),this.dsCurrVal}readDsLen(){const t=$n(this.restDecoder)+1;return this.dsCurrVal+=t,t}}{constructor(t){super(t),this.keys=[],$n(t),this.keyClockDecoder=new H2(cs(t)),this.clientDecoder=new G1(cs(t)),this.leftClockDecoder=new H2(cs(t)),this.rightClockDecoder=new H2(cs(t)),this.infoDecoder=new sW(cs(t),df),this.stringDecoder=new z1e(cs(t)),this.parentInfoDecoder=new sW(cs(t),df),this.typeRefDecoder=new G1(cs(t)),this.lenDecoder=new G1(cs(t))}readLeftID(){return new Bg(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Bg(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Rg(this.restDecoder)}readBuf(){return cs(this.restDecoder)}readJSON(){return Rg(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class Ng{constructor(){this.restEncoder=zo()}toUint8Array(){return wi(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){On(this.restEncoder,t)}writeDsLen(t){On(this.restEncoder,t)}}class Lg extends Ng{writeLeftID(t){On(this.restEncoder,t.client),On(this.restEncoder,t.clock)}writeRightID(t){On(this.restEncoder,t.client),On(this.restEncoder,t.clock)}writeClient(t){On(this.restEncoder,t)}writeInfo(t){H0(this.restEncoder,t)}writeString(t){Pc(this.restEncoder,t)}writeParentInfo(t){On(this.restEncoder,t?1:0)}writeTypeRef(t){On(this.restEncoder,t)}writeLen(t){On(this.restEncoder,t)}writeAny(t){Ig(this.restEncoder,t)}writeBuf(t){co(this.restEncoder,t)}writeJSON(t){Pc(this.restEncoder,JSON.stringify(t))}writeKey(t){Pc(this.restEncoder,t)}}class Q1{constructor(){this.restEncoder=zo(),this.dsCurrVal=0}toUint8Array(){return wi(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,On(this.restEncoder,e)}writeDsLen(t){0===t&&dl(),On(this.restEncoder,t-1),this.dsCurrVal+=t}}class Hu extends Q1{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new j2,this.clientEncoder=new W1,this.leftClockEncoder=new j2,this.rightClockEncoder=new j2,this.infoEncoder=new nW(H0),this.stringEncoder=new B1e,this.parentInfoEncoder=new nW(H0),this.typeRefEncoder=new W1,this.lenEncoder=new W1}toUint8Array(){const t=zo();return On(t,0),co(t,this.keyClockEncoder.toUint8Array()),co(t,this.clientEncoder.toUint8Array()),co(t,this.leftClockEncoder.toUint8Array()),co(t,this.rightClockEncoder.toUint8Array()),co(t,wi(this.infoEncoder)),co(t,this.stringEncoder.toUint8Array()),co(t,wi(this.parentInfoEncoder)),co(t,this.typeRefEncoder.toUint8Array()),co(t,this.lenEncoder.toUint8Array()),z0(t,wi(this.restEncoder)),wi(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Ig(this.restEncoder,t)}writeBuf(t){co(this.restEncoder,t)}writeJSON(t){Ig(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const X2=(n,t,e)=>{const r=new Map;e.forEach((i,o)=>{Xi(t,o)>i&&r.set(o,i)}),Q0(t).forEach((i,o)=>{e.has(o)||r.set(o,0)}),On(n.restEncoder,r.size),Array.from(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{((n,t,e,r)=>{r=Fu(r,t[0].id.clock);const i=Wl(t,r);On(n.restEncoder,t.length-i),n.writeClient(e),On(n.restEncoder,r);const o=t[i];o.write(n,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(n,0)})(n,t.clients.get(i),i,o)})},Q2=(n,t,e,r=Uc)=>{const i=Vl(t);((n,t,e,r=new Uc(n))=>{ci(t,i=>{i.local=!1;let o=!1;const s=i.doc,a=s.store,l=((n,t)=>{const e=Hl(),r=$n(n.restDecoder);for(let i=0;i<r;i++){const o=$n(n.restDecoder),s=new Array(o),a=n.readClient();let l=$n(n.restDecoder);e.set(a,{i:0,refs:s});for(let c=0;c<o;c++){const d=n.readInfo();switch(31&d){case 0:{const E=n.readLen();s[c]=new pl(qn(a,l),E),l+=E;break}case 10:{const E=$n(n.restDecoder);s[c]=new Ia(qn(a,l),E),l+=E;break}default:{const E=0==(192&d),U=new ti(qn(a,l),null,(d&Ma)===Ma?n.readLeftID():null,null,64==(64&d)?n.readRightID():null,E?n.readParentInfo()?t.get(n.readString()):n.readLeftID():null,E&&32==(32&d)?n.readString():null,w$(n,d));s[c]=U,l+=U.length}}}}return e})(r,s),c=((n,t,e)=>{const r=[];let i=Array.from(e.keys()).sort((W,ne)=>W-ne);if(0===i.length)return null;const o=()=>{if(0===i.length)return null;let W=e.get(i[i.length-1]);for(;W.refs.length===W.i;){if(i.pop(),!(i.length>0))return null;W=e.get(i[i.length-1])}return W};let s=o();if(null===s&&0===r.length)return null;const a=new jW,l=new Map,c=(W,ne)=>{const Ce=l.get(W);(null==Ce||Ce>ne)&&l.set(W,ne)};let d=s.refs[s.i++];const E=new Map,U=()=>{for(const W of r){const ne=W.id.client,Ce=e.get(ne);Ce?(Ce.i--,a.clients.set(ne,Ce.refs.slice(Ce.i)),e.delete(ne),Ce.i=0,Ce.refs=[]):a.clients.set(ne,[W]),i=i.filter(Pe=>Pe!==ne)}r.length=0};for(;;){if(d.constructor!==Ia){const ne=Ta(E,d.id.client,()=>Xi(t,d.id.client))-d.id.clock;if(ne<0)r.push(d),c(d.id.client,d.id.clock-1),U();else{const Ce=d.getMissing(n,t);if(null!==Ce){r.push(d);const Pe=e.get(Ce)||{refs:[],i:0};if(Pe.refs.length!==Pe.i){d=Pe.refs[Pe.i++];continue}c(Ce,Xi(t,Ce)),U()}else(0===ne||ne<d.length)&&(d.integrate(n,ne),E.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(null!==s&&s.i<s.refs.length)d=s.refs[s.i++];else{if(s=o(),null===s)break;d=s.refs[s.i++]}}if(a.clients.size>0){const W=new Hu;return X2(W,a,new Map),On(W.restEncoder,0),{missing:l,update:W.toUint8Array()}}return null})(i,a,l),d=a.pendingStructs;if(d){for(const[U,W]of d.missing)if(W<Xi(a,U)){o=!0;break}if(c){for(const[U,W]of c.missing){const ne=d.missing.get(U);(null==ne||ne>W)&&d.missing.set(U,W)}d.update=ox([d.update,c.update])}}else a.pendingStructs=c;const E=kW(r,i,a);if(a.pendingDs){const U=new Uc(Vl(a.pendingDs));$n(U.restDecoder);const W=kW(U,i,a);a.pendingDs=E&&W?ox([E,W]):E||W}else a.pendingDs=E;if(o){const U=a.pendingStructs.update;a.pendingStructs=null,Q2(i.doc,U)}},e,!1)})(i,n,e,new r(i))},RW=n=>(n=>{const t=new Map,e=$n(n.restDecoder);for(let r=0;r<e;r++){const i=$n(n.restDecoder),o=$n(n.restDecoder);t.set(i,o)}return t})(new J0(Vl(n))),eR=(n,t)=>(On(n.restEncoder,t.size),Array.from(t.entries()).sort((e,r)=>r[0]-e[0]).forEach(([e,r])=>{On(n.restEncoder,e),On(n.restEncoder,r)}),n);class xxe{constructor(){this.l=[]}}const OW=()=>new xxe,PW=(n,t)=>n.l.push(t),FW=(n,t)=>{const e=n.l,r=e.length;n.l=e.filter(i=>t!==i),r===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},NW=(n,t,e)=>W2(n.l,[t,e]);class Bg{constructor(t,e){this.client=t,this.clock=e}}const Ug=(n,t)=>n===t||null!==n&&null!==t&&n.client===t.client&&n.clock===t.clock,qn=(n,t)=>new Bg(n,t),Z0=n=>{for(const[t,e]of n.doc.share.entries())if(e===n)return t;throw dl()},Y0=(n,t)=>{for(;null!==t;){if(t.parent===n)return!0;t=t.parent._item}return!1};class jg{constructor(t,e,r,i=0){this.type=t,this.tname=e,this.item=r,this.assoc=i}}const X0=n=>new jg(null==n.type?null:qn(n.type.client,n.type.clock),n.tname||null,null==n.item?null:qn(n.item.client,n.item.clock),null==n.assoc?0:n.assoc);class Sxe{constructor(t,e,r=0){this.type=t,this.index=e,this.assoc=r}}const ex=(n,t,e)=>{let r=null,i=null;return null===n._item?i=Z0(n):r=qn(n._item.id.client,n._item.id.clock),new jg(r,i,t,e)},tR=(n,t,e=0)=>{let r=n._start;if(e<0){if(0===t)return ex(n,null,e);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return ex(n,qn(r.id.client,r.id.clock+t),e);t-=r.length}if(null===r.right&&e<0)return ex(n,r.lastId,e);r=r.right}return ex(n,null,e)},UW=(n,t)=>n===t||null!==n&&null!==t&&n.tname===t.tname&&Ug(n.item,t.item)&&Ug(n.type,t.type)&&n.assoc===t.assoc;class tx{constructor(t,e){this.ds=t,this.sv=e}}const nR=(n,t)=>new tx(n,t),pf=(nR(X1(),new Map),(n,t)=>void 0===t?!n.deleted:t.sv.has(n.id.client)&&(t.sv.get(n.id.client)||0)>n.id.clock&&!Fg(t.ds,n.id)),nx=(n,t)=>{const e=Ta(n.meta,nx,Tg),r=n.doc.store;e.has(t)||(t.sv.forEach((i,o)=>{i<Xi(r,o)&&Ks(n,qn(o,i))}),Uu(n,t.ds,i=>{}),e.add(t))};class jW{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Q0=n=>{const t=new Map;return n.clients.forEach((e,r)=>{const i=e[e.length-1];t.set(r,i.id.clock+i.length)}),t},Xi=(n,t)=>{const e=n.clients.get(t);if(void 0===e)return 0;const r=e[e.length-1];return r.id.clock+r.length},HW=(n,t)=>{let e=n.clients.get(t.id.client);if(void 0===e)e=[],n.clients.set(t.id.client,e);else{const r=e[e.length-1];if(r.id.clock+r.length!==t.id.clock)throw dl()}e.push(t)},Wl=(n,t)=>{let e=0,r=n.length-1,i=n[r],o=i.id.clock;if(o===t)return r;let s=cf(t/(o+i.length-1)*r);for(;e<=r;){if(i=n[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;e=s+1}else r=s-1;s=cf((e+r)/2)}throw dl()},rx=(n,t)=>{const e=n.clients.get(t.client);return e[Wl(e,t.clock)]},rR=(n,t,e)=>{const r=Wl(t,e),i=t[r];return i.id.clock<e&&i instanceof ti?(t.splice(r+1,0,gx(n,i,e-i.id.clock)),r+1):r},Ks=(n,t)=>{const e=n.doc.store.clients.get(t.client);return e[rR(n,e,t.clock)]},VW=(n,t,e)=>{const r=t.clients.get(e.client),i=Wl(r,e.clock),o=r[i];return e.clock!==o.id.clock+o.length-1&&o.constructor!==pl&&r.splice(i+1,0,gx(n,o,e.clock-o.id.clock+1)),o},zW=(n,t,e,r,i)=>{if(0===r)return;const o=e+r;let a,s=rR(n,t,e);do{a=t[s++],o<a.id.clock+a.length&&rR(n,t,o),i(a)}while(s<t.length&&t[s].id.clock<o)};class Rxe{constructor(t,e,r){this.doc=t,this.deleteSet=new Pg,this.beforeState=Q0(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const WW=(n,t)=>!(0===t.deleteSet.clients.size&&!((n,t)=>{for(const[e,r]of n)if(t(r,e))return!0;return!1})(t.afterState,(e,r)=>t.beforeState.get(r)!==e)||(Y2(t.deleteSet),((n,t)=>{X2(n,t.doc.store,t.beforeState)})(n,t),Bc(n,t.deleteSet),0)),$W=(n,t,e)=>{const r=t._item;(null===r||r.id.clock<(n.beforeState.get(r.id.client)||0)&&!r.deleted)&&Ta(n.changed,t,Tg).add(e)},ix=(n,t)=>{const e=n[t-1],r=n[t];e.deleted===r.deleted&&e.constructor===r.constructor&&e.mergeWith(r)&&(n.splice(t,1),r instanceof ti&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,e))},qW=(n,t)=>{if(t<n.length){const e=n[t],r=e.doc,i=r.store,o=e.deleteSet,s=e._mergeStructs;try{Y2(o),e.afterState=Q0(e.doc.store),r._transaction=null,r.emit("beforeObserverCalls",[e,r]);const a=[];e.changed.forEach((l,c)=>a.push(()=>{(null===c._item||!c._item.deleted)&&c._callObserver(e,l)})),a.push(()=>{e.changedParentTypes.forEach((l,c)=>a.push(()=>{(null===c._item||!c._item.deleted)&&((l=l.filter(d=>null===d.target._item||!d.target._item.deleted)).forEach(d=>{d.currentTarget=c}),l.sort((d,E)=>d.path.length-E.path.length),NW(c._dEH,l,e))})),a.push(()=>r.emit("afterTransaction",[e,r]))}),W2(a,[])}finally{r.gc&&((n,t,e)=>{for(const[r,i]of n.clients.entries()){const o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){const a=i[s],l=a.clock+a.len;for(let c=Wl(o,a.clock),d=o[c];c<o.length&&d.id.clock<l;d=o[++c]){const E=o[c];if(a.clock+a.len<=E.id.clock)break;E instanceof ti&&E.deleted&&!E.keep&&e(E)&&E.gc(t,!1)}}}})(o,i,r.gcFilter),((n,t)=>{n.clients.forEach((e,r)=>{const i=t.clients.get(r);for(let o=e.length-1;o>=0;o--){const s=e[o];for(let l=Bd(i.length-1,1+Wl(i,s.clock+s.len-1)),c=i[l];l>0&&c.id.clock>=s.clock;c=i[--l])ix(i,l)}})})(o,i),e.afterState.forEach((d,E)=>{const U=e.beforeState.get(E)||0;if(U!==d){const W=i.clients.get(E),ne=Fu(Wl(W,U),1);for(let Ce=W.length-1;Ce>=ne;Ce--)ix(W,Ce)}});for(let d=0;d<s.length;d++){const{client:E,clock:U}=s[d].id,W=i.clients.get(E),ne=Wl(W,U);ne+1<W.length&&ix(W,ne+1),ne>0&&ix(W,ne)}if(!e.local&&e.afterState.get(r.clientID)!==e.beforeState.get(r.clientID)&&(_W($0,la,"[yjs] ",Ud,Z1,"Changed the client-id because another client seems to be using it."),r.clientID=DW()),r.emit("afterTransactionCleanup",[e,r]),r._observers.has("update")){const d=new Lg;WW(d,e)&&r.emit("update",[d.toUint8Array(),e.origin,r,e])}if(r._observers.has("updateV2")){const d=new Hu;WW(d,e)&&r.emit("updateV2",[d.toUint8Array(),e.origin,r,e])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=e;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,null==d.collectionid&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,e]),c.forEach(d=>d.destroy())),n.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,n])):qW(n,t+1)}}},ci=(n,t,e=null,r=!0)=>{const i=n._transactionCleanups;let o=!1;null===n._transaction&&(o=!0,n._transaction=new Rxe(n,e,r),i.push(n._transaction),1===i.length&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{t(n._transaction)}finally{o&&i[0]===n._transaction&&qW(i,0)}};class Oxe{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const JW=(n,t,e)=>{Uu(n,e.deletions,r=>{r instanceof ti&&t.scope.some(i=>Y0(i,r))&&pR(r,!1)})},ZW=(n,t,e)=>{let r=null,i=null;const o=n.doc,s=n.scope;return ci(o,a=>{for(;t.length>0&&null===r;){const l=o.store,c=t.pop(),d=new Set,E=[];let U=!1;Uu(a,c.insertions,W=>{if(W instanceof ti){if(null!==W.redone){let{item:ne,diff:Ce}=fR(l,W.id);Ce>0&&(ne=Ks(a,qn(ne.id.client,ne.id.clock+Ce))),W=ne}!W.deleted&&s.some(ne=>Y0(ne,W))&&E.push(W)}}),Uu(a,c.deletions,W=>{W instanceof ti&&s.some(ne=>Y0(ne,W))&&!Fg(c.insertions,W.id)&&d.add(W)}),d.forEach(W=>{U=null!==b$(a,W,d,c.insertions,n.ignoreRemoteMapChanges)||U});for(let W=E.length-1;W>=0;W--){const ne=E[W];n.deleteFilter(ne)&&(ne.delete(a),U=!0)}r=U?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),i=a},n),null!=r&&n.emit("stack-item-popped",[{stackItem:r,type:e,changedParentTypes:i.changedParentTypes},n]),r};class Pxe extends U0{constructor(t,{captureTimeout:e=500,deleteFilter:r=(()=>!0),trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1}={}){super(),this.scope=[],this.addToScope(t),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=this.scope[0].doc,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.afterTransactionHandler=s=>{if(!this.scope.some(ne=>s.changedParentTypes.has(ne))||!(this.trackedOrigins.has(s.origin)||s.origin&&this.trackedOrigins.has(s.origin.constructor)))return;const a=this.undoing,l=this.redoing,c=a?this.redoStack:this.undoStack;a?this.stopCapturing():l||this.clear(!1,!0);const d=new Pg;s.afterState.forEach((ne,Ce)=>{const Pe=s.beforeState.get(Ce)||0,Qe=ne-Pe;Qe>0&&q0(d,Ce,Pe,Qe)});const E=Nc();let U=!1;if(E-this.lastChange<e&&c.length>0&&!a&&!l){const ne=c[c.length-1];ne.deletions=G0([ne.deletions,s.deleteSet]),ne.insertions=G0([ne.insertions,d])}else c.push(new Oxe(s.deleteSet,d)),U=!0;!a&&!l&&(this.lastChange=E),Uu(s,s.deleteSet,ne=>{ne instanceof ti&&this.scope.some(Ce=>Y0(Ce,ne))&&pR(ne,!0)});this.emit(U?"stack-item-added":"stack-item-updated",[{stackItem:c[c.length-1],origin:s.origin,type:a?"redo":"undo",changedParentTypes:s.changedParentTypes},this])},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){(t=Qwe(t)?t:[t]).forEach(e=>{this.scope.every(r=>r!==e)&&this.scope.push(e)})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(i=>JW(r,this,i)),this.undoStack=[]),e&&(this.redoStack.forEach(i=>JW(r,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}])})}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=ZW(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=ZW(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class gf{constructor(t,e){this.gen=function*Fxe(n){const t=$n(n.restDecoder);for(let e=0;e<t;e++){const r=$n(n.restDecoder),i=n.readClient();let o=$n(n.restDecoder);for(let s=0;s<r;s++){const a=n.readInfo();if(10===a){const l=$n(n.restDecoder);yield new Ia(qn(i,o),l),o+=l}else if(0!=(31&a)){const l=0==(192&a),c=new ti(qn(i,o),null,(a&Ma)===Ma?n.readLeftID():null,null,64==(64&a)?n.readRightID():null,l?n.readParentInfo()?n.readString():n.readLeftID():null,l&&32==(32&a)?n.readString():null,w$(n,a));yield c,o+=c.length}else{const l=n.readLen();yield new pl(qn(i,o),l),o+=l}}}}(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Ia);return this.curr}}class iR{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Bxe=n=>ox(n,ju,Lg),Hxe=(n,t)=>{if(n.constructor===pl){const{client:e,clock:r}=n.id;return new pl(qn(e,r+t),n.length-t)}if(n.constructor===Ia){const{client:e,clock:r}=n.id;return new Ia(qn(e,r+t),n.length-t)}{const e=n,{client:r,clock:i}=e.id;return new ti(qn(r,i+t),null,qn(r,i+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},ox=(n,t=Uc,e=Hu)=>{if(1===n.length)return n[0];const r=n.map(d=>new t(Vl(d)));let i=r.map(d=>new gf(d,!0)),o=null;const s=new e,a=new iR(s);for(;i=i.filter(U=>null!==U.curr),i.sort((U,W)=>{if(U.curr.id.client===W.curr.id.client){const ne=U.curr.id.clock-W.curr.id.clock;return 0===ne?U.curr.constructor===W.curr.constructor?0:U.curr.constructor===Ia?1:-1:ne}return W.curr.id.client-U.curr.id.client}),0!==i.length;){const d=i[0],E=d.curr.id.client;if(null!==o){let U=d.curr,W=!1;for(;null!==U&&U.id.clock+U.length<=o.struct.id.clock+o.struct.length&&U.id.client>=o.struct.id.client;)U=d.next(),W=!0;if(null===U||U.id.client!==E||W&&U.id.clock>o.struct.id.clock+o.struct.length)continue;if(E!==o.struct.id.client)Hd(a,o.struct,o.offset),o={struct:U,offset:0},d.next();else if(o.struct.id.clock+o.struct.length<U.id.clock)if(o.struct.constructor===Ia)o.struct.length=U.id.clock+U.length-o.struct.id.clock;else{Hd(a,o.struct,o.offset);const ne=U.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Ia(qn(E,o.struct.id.clock+o.struct.length),ne),offset:0}}else{const ne=o.struct.id.clock+o.struct.length-U.id.clock;ne>0&&(o.struct.constructor===Ia?o.struct.length-=ne:U=Hxe(U,ne)),o.struct.mergeWith(U)||(Hd(a,o.struct,o.offset),o={struct:U,offset:0},d.next())}}else o={struct:d.curr,offset:0},d.next();for(let U=d.curr;null!==U&&U.id.client===E&&U.id.clock===o.struct.id.clock+o.struct.length&&U.constructor!==Ia;U=d.next())Hd(a,o.struct,o.offset),o={struct:U,offset:0}}null!==o&&(Hd(a,o.struct,o.offset),o=null),oR(a);const l=r.map(d=>jd(d)),c=G0(l);return Bc(s,c),s.toUint8Array()},YW=(n,t,e=Uc,r=Hu)=>{const i=RW(t),o=new r,s=new iR(o),a=new e(Vl(n)),l=new gf(a,!1);for(;l.curr;){const d=l.curr,E=d.id.client,U=i.get(E)||0;if(l.curr.constructor!==Ia)if(d.id.clock+d.length>U)for(Hd(s,d,Fu(U-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===E;)Hd(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===E&&l.curr.id.clock+l.curr.length<=U;)l.next();else l.next()}oR(s);const c=jd(a);return Bc(o,c),o.toUint8Array()},XW=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:wi(n.encoder.restEncoder)}),n.encoder.restEncoder=zo(),n.written=0)},Hd=(n,t,e)=>{n.written>0&&n.currClient!==t.id.client&&XW(n),0===n.written&&(n.currClient=t.id.client,n.encoder.writeClient(t.id.client),On(n.encoder.restEncoder,t.id.clock+e)),t.write(n.encoder,e),n.written++},oR=n=>{XW(n);const t=n.encoder.restEncoder;On(t,n.clientStructs.length);for(let e=0;e<n.clientStructs.length;e++){const r=n.clientStructs[e];On(t,r.written),z0(t,r.restEncoder)}},Vxe=n=>((n,t,e)=>{const r=new t(Vl(n)),i=new gf(r,!1),o=new e,s=new iR(o);for(let l=i.curr;null!==l;l=i.next())Hd(s,l,0);oR(s);const a=jd(r);return Bc(o,a),o.toUint8Array()})(n,Uc,Lg);class sx{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null}get path(){return zxe(this.currentTarget,this.target)}deletes(t){return Fg(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(i=>{if(null!==i){const o=e._map.get(i);let s,a;if(this.adds(o)){let l=o.left;for(;null!==l&&this.adds(l);)l=l.left;if(this.deletes(o)){if(null===l||!this.deletes(l))return;s="delete",a=I2(l.content.getContent())}else null!==l&&this.deletes(l)?(s="update",a=I2(l.content.getContent())):(s="add",a=void 0)}else{if(!this.deletes(o))return;s="delete",a=I2(o.content.getContent())}t.set(i,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){const e=this.target,r=Tg(),i=Tg(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let a=null;const l=()=>{a&&o.push(a)};for(let c=e._start;null!==c;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((null===a||void 0===a.delete)&&(l(),a={delete:0}),a.delete+=c.length,i.add(c)):this.adds(c)?((null===a||void 0===a.insert)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((null===a||void 0===a.retain)&&(l(),a={retain:0}),a.retain+=c.length);null!==a&&void 0===a.retain&&l()}this._changes=t}return t}}const zxe=(n,t)=>{const e=[];for(;null!==t._item&&t!==n;){if(null!==t._item.parentSub)e.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&null!==i;)i.deleted||r++,i=i.right;e.unshift(r)}t=t._item.parent}return e};let sR=0;class Wxe{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=sR++}}const t$=(n,t,e)=>{n.p.marker=!1,n.p=t,t.marker=!0,n.index=e,n.timestamp=sR++},ax=(n,t)=>{if(null===n._start||0===t||null===n._searchMarker)return null;const e=0===n._searchMarker.length?null:n._searchMarker.reduce((o,s)=>B1(t-o.index)<B1(t-s.index)?o:s);let r=n._start,i=0;for(null!==e&&(r=e.p,i=e.index,(n=>{n.timestamp=sR++})(e));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==e&&B1(e.index-i)<r.parent.length/80?(t$(e,r,i),e):((n,t,e)=>{if(n.length>=80){const r=n.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return t$(r,t,e),r}{const r=new Wxe(t,e);return n.push(r),r}})(n._searchMarker,r,i)},ev=(n,t,e)=>{for(let r=n.length-1;r>=0;r--){const i=n[r];if(e>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(null===o||!0===o.marker){n.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||e>0&&t===i.index)&&(i.index=Fu(t,i.index+e))}},lx=(n,t,e)=>{const r=n,i=t.changedParentTypes;for(;Ta(i,n,()=>[]).push(e),null!==n._item;)n=n._item.parent;NW(r._eH,e,t)};class us{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=OW(),this._dEH=OW(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw zl()}clone(){throw zl()}_write(t){}get _first(){let t=this._start;for(;null!==t&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){PW(this._eH,t)}observeDeep(t){PW(this._dEH,t)}unobserve(t){FW(this._eH,t)}unobserveDeep(t){FW(this._dEH,t)}toJSON(){}}const n$=(n,t,e)=>{t<0&&(t=n._length+t),e<0&&(e=n._length+e);let r=e-t;const i=[];let o=n._start;for(;null!==o&&r>0;){if(o.countable&&!o.deleted){const s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)i.push(s[a]),r--;t=0}}o=o.right}return i},r$=n=>{const t=[];let e=n._start;for(;null!==e;){if(e.countable&&!e.deleted){const r=e.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}e=e.right}return t},i$=(n,t)=>{const e=[];let r=n._start;for(;null!==r;){if(r.countable&&pf(r,t)){const i=r.content.getContent();for(let o=0;o<i.length;o++)e.push(i[o])}r=r.right}return e},tv=(n,t)=>{let e=0,r=n._start;for(;null!==r;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],e++,n)}r=r.right}},o$=(n,t)=>{const e=[];return tv(n,(r,i)=>{e.push(t(r,i,n))}),e},Gxe=n=>{let t=n._start,e=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===e){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};e=t.content.getContent(),r=0,t=t.right}const i=e[r++];return e.length<=r&&(e=null),{done:!1,value:i}}}},s$=(n,t)=>{const e=ax(n,t);let r=n._start;for(null!==e&&(r=e.p,t-=e.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},cx=(n,t,e,r)=>{let i=e;const o=n.doc,s=o.clientID,a=o.store,l=null===e?t._start:e.right;let c=[];const d=()=>{c.length>0&&(i=new ti(qn(s,Xi(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new bf(c)),i.integrate(n,0),c=[])};r.forEach(E=>{if(null===E)c.push(E);else switch(E.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(E);break;default:switch(d(),E.constructor){case Uint8Array:case ArrayBuffer:i=new ti(qn(s,Xi(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new nv(new Uint8Array(E))),i.integrate(n,0);break;case ff:i=new ti(qn(s,Xi(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new iv(E)),i.integrate(n,0);break;default:if(!(E instanceof us))throw new Error("Unexpected content type in insert operation");i=new ti(qn(s,Xi(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Kl(E)),i.integrate(n,0)}}}),d()},a$=Og("Length exceeded!"),l$=(n,t,e,r)=>{if(e>t._length)throw a$;if(0===e)return t._searchMarker&&ev(t._searchMarker,e,r.length),cx(n,t,null,r);const i=e,o=ax(t,e);let s=t._start;for(null!==o&&(s=o.p,0==(e-=o.index)&&(s=s.prev,e+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(e<=s.length){e<s.length&&Ks(n,qn(s.id.client,s.id.clock+e));break}e-=s.length}return t._searchMarker&&ev(t._searchMarker,i,r.length),cx(n,t,s,r)},c$=(n,t,e,r)=>{if(0===r)return;const i=e,o=r,s=ax(t,e);let a=t._start;for(null!==s&&(a=s.p,e-=s.index);null!==a&&e>0;a=a.right)!a.deleted&&a.countable&&(e<a.length&&Ks(n,qn(a.id.client,a.id.clock+e)),e-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&Ks(n,qn(a.id.client,a.id.clock+r)),a.delete(n),r-=a.length),a=a.right;if(r>0)throw a$;t._searchMarker&&ev(t._searchMarker,i,-o+r)},ux=(n,t,e)=>{const r=t._map.get(e);void 0!==r&&r.delete(n)},aR=(n,t,e,r)=>{const i=t._map.get(e)||null,o=n.doc,s=o.clientID;let a;if(null==r)a=new bf([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new bf([r]);break;case Uint8Array:a=new nv(r);break;case ff:a=new iv(r);break;default:if(!(r instanceof us))throw new Error("Unexpected content type");a=new Kl(r)}new ti(qn(s,Xi(o.store,s)),i,i&&i.lastId,null,null,t,e,a).integrate(n,0)},lR=(n,t)=>{const e=n._map.get(t);return void 0===e||e.deleted?void 0:e.content.getContent()[e.length-1]},u$=n=>{const t={};return n._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},d$=(n,t)=>{const e=n._map.get(t);return void 0!==e&&!e.deleted},dx=n=>((n,t)=>EW(()=>{let e;do{e=n.next()}while(!e.done&&!t(e.value));return e}))(n.entries(),t=>!t[1].deleted);class Jxe extends sx{constructor(t,e){super(t,e),this._transaction=e}}class Vd extends us{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Vd;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Vd}clone(){const t=new Vd;return t.insert(0,this.toArray().map(e=>e instanceof us?e.clone():e)),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),lx(this,t,new Jxe(this,t))}insert(t,e){null!==this.doc?ci(this.doc,r=>{l$(r,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?ci(this.doc,e=>{((n,t,e)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;cx(n,t,i,e)})(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?ci(this.doc,r=>{c$(r,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return s$(this,t)}toArray(){return r$(this)}slice(t=0,e=this.length){return n$(this,t,e)}toJSON(){return this.map(t=>t instanceof us?t.toJSON():t)}map(t){return o$(this,t)}forEach(t){tv(this,t)}[Symbol.iterator](){return Gxe(this)}_write(t){t.writeTypeRef(vSe)}}class Yxe extends sx{constructor(t,e,r){super(t,e),this.keysChanged=r}}class mf extends us{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new mf}clone(){const t=new mf;return this.forEach((e,r)=>{t.set(r,e instanceof us?e.clone():e)}),t}_callObserver(t,e){lx(this,t,new Yxe(this,t,e))}toJSON(){const t={};return this._map.forEach((e,r)=>{if(!e.deleted){const i=e.content.getContent()[e.length-1];t[r]=i instanceof us?i.toJSON():i}}),t}get size(){return[...dx(this._map)].length}keys(){return J2(dx(this._map),t=>t[0])}values(){return J2(dx(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return J2(dx(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){return this._map.forEach((r,i)=>{r.deleted||t(r.content.getContent()[r.length-1],i,this)}),{}}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?ci(this.doc,e=>{ux(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?ci(this.doc,r=>{aR(r,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return lR(this,t)}has(t){return d$(this,t)}clear(){null!==this.doc?ci(this.doc,t=>{this.forEach(function(e,r,i){ux(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(_Se)}}const zd=(n,t)=>n===t||"object"==typeof n&&"object"==typeof t&&n&&t&&((n,t)=>n===t||q1(n)===q1(t)&&((n,t)=>{for(const e in n)if(!t(n[e],e))return!1;return!0})(n,(e,r)=>(void 0!==e||hW(t,r))&&t[r]===e))(n,t);class cR{constructor(t,e,r,i){this.left=t,this.right=e,this.index=r,this.currentAttributes=i}forward(){null===this.right&&dl(),this.right.content.constructor===xo?this.right.deleted||Hg(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const h$=(n,t,e)=>{for(;null!==t.right&&e>0;)t.right.content.constructor===xo?t.right.deleted||Hg(t.currentAttributes,t.right.content):t.right.deleted||(e<t.right.length&&Ks(n,qn(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length),t.left=t.right,t.right=t.right.right;return t},hx=(n,t,e)=>{const r=new Map,i=ax(t,e);if(i){const o=new cR(i.p.left,i.p,i.index,r);return h$(n,o,e-i.index)}{const o=new cR(null,t._start,0,r);return h$(n,o,e)}},f$=(n,t,e,r)=>{for(;null!==e.right&&(!0===e.right.deleted||e.right.content.constructor===xo&&zd(r.get(e.right.content.key),e.right.content.value));)e.right.deleted||r.delete(e.right.content.key),e.forward();const i=n.doc,o=i.clientID;r.forEach((s,a)=>{const l=e.left,c=e.right,d=new ti(qn(o,Xi(i.store,o)),l,l&&l.lastId,c,c&&c.id,t,null,new xo(a,s));d.integrate(n,0),e.right=d,e.forward()})},Hg=(n,t)=>{const{key:e,value:r}=t;null===r?n.delete(e):n.set(e,r)},p$=(n,t)=>{for(;null!==n.right&&(n.right.deleted||n.right.content.constructor===xo&&zd(t[n.right.content.key]||null,n.right.content.value));)n.forward()},g$=(n,t,e,r)=>{const i=n.doc,o=i.clientID,s=new Map;for(const a in r){const l=r[a],c=e.currentAttributes.get(a)||null;if(!zd(c,l)){s.set(a,c);const{left:d,right:E}=e;e.right=new ti(qn(o,Xi(i.store,o)),d,d&&d.lastId,E,E&&E.id,t,null,new xo(a,l)),e.right.integrate(n,0),e.forward()}}return s},uR=(n,t,e,r,i)=>{e.currentAttributes.forEach((U,W)=>{void 0===i[W]&&(i[W]=null)});const o=n.doc,s=o.clientID;p$(e,i);const a=g$(n,t,e,i),l=r.constructor===String?new $l(r):r instanceof us?new Kl(r):new _f(r);let{left:c,right:d,index:E}=e;t._searchMarker&&ev(t._searchMarker,e.index,l.getLength()),d=new ti(qn(s,Xi(o.store,s)),c,c&&c.lastId,d,d&&d.id,t,null,l),d.integrate(n,0),e.right=d,e.index=E,e.forward(),f$(n,t,e,a)},m$=(n,t,e,r,i)=>{const o=n.doc,s=o.clientID;p$(e,i);const a=g$(n,t,e,i);e:for(;null!==e.right&&(r>0||a.size>0&&(e.right.deleted||e.right.content.constructor===xo));){if(!e.right.deleted)switch(e.right.content.constructor){case xo:{const{key:l,value:c}=e.right.content,d=i[l];if(void 0!==d){if(zd(d,c))a.delete(l);else{if(0===r)break e;a.set(l,c)}e.right.delete(n)}else e.currentAttributes.set(l,c);break}default:r<e.right.length&&Ks(n,qn(e.right.id.client,e.right.id.clock+r)),r-=e.right.length}e.forward()}if(r>0){let l="";for(;r>0;r--)l+="\n";e.right=new ti(qn(s,Xi(o.store,s)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new $l(l)),e.right.integrate(n,0),e.forward()}f$(n,t,e,a)},y$=(n,t,e,r,i)=>{let o=e;const s=L1(i);for(;o&&(!o.countable||o.deleted);)!o.deleted&&o.content.constructor===xo&&Hg(s,o.content),o=o.right;let a=0,l=!1;for(;t!==o;){if(e===t&&(l=!0),!t.deleted){const c=t.content;switch(c.constructor){case xo:{const{key:d,value:E}=c;((s.get(d)||null)!==E||(r.get(d)||null)===E)&&(t.delete(n),a++,!l&&(i.get(d)||null)===E&&(r.get(d)||null)!==E&&i.delete(d));break}}}t=t.right}return a},v$=(n,t,e)=>{const r=e,i=L1(t.currentAttributes),o=t.right;for(;e>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case Kl:case _f:case $l:e<t.right.length&&Ks(n,qn(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(n)}t.forward()}o&&y$(n,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&ev(s._searchMarker,t.index,-r+e),t};class tSe extends sx{constructor(t,e,r){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{null===i?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){return null===this._changes&&(this._changes={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set}),this._changes}get delta(){if(null===this._delta){const e=[];ci(this.target.doc,r=>{const i=new Map,o=new Map;let s=this.target._start,a=null;const l={};let c="",d=0,E=0;const U=()=>{if(null!==a){let W;switch(a){case"delete":W={delete:E},E=0;break;case"insert":W={insert:c},i.size>0&&(W.attributes={},i.forEach((ne,Ce)=>{null!==ne&&(W.attributes[Ce]=ne)})),c="";break;case"retain":if(W={retain:d},Object.keys(l).length>0){W.attributes={};for(const ne in l)W.attributes[ne]=l[ne]}d=0}e.push(W),a=null}};for(;null!==s;){switch(s.content.constructor){case Kl:case _f:this.adds(s)?this.deletes(s)||(U(),a="insert",c=s.content.getContent()[0],U()):this.deletes(s)?("delete"!==a&&(U(),a="delete"),E+=1):s.deleted||("retain"!==a&&(U(),a="retain"),d+=1);break;case $l:this.adds(s)?this.deletes(s)||("insert"!==a&&(U(),a="insert"),c+=s.content.str):this.deletes(s)?("delete"!==a&&(U(),a="delete"),E+=s.length):s.deleted||("retain"!==a&&(U(),a="retain"),d+=s.length);break;case xo:{const{key:W,value:ne}=s.content;if(this.adds(s)){if(!this.deletes(s)){const Ce=i.get(W)||null;zd(Ce,ne)?null!==ne&&s.delete(r):("retain"===a&&U(),zd(ne,o.get(W)||null)?delete l[W]:l[W]=ne)}}else if(this.deletes(s)){o.set(W,ne);const Ce=i.get(W)||null;zd(Ce,ne)||("retain"===a&&U(),l[W]=Ce)}else if(!s.deleted){o.set(W,ne);const Ce=l[W];void 0!==Ce&&(zd(Ce,ne)?null!==Ce&&s.delete(r):("retain"===a&&U(),null===ne?delete l[W]:l[W]=ne))}s.deleted||("insert"===a&&U(),Hg(i,s.content));break}}s=s.right}for(U();e.length>0;){const W=e[e.length-1];if(void 0===W.retain||void 0!==W.attributes)break;e.pop()}}),this._delta=e}return this._delta}}class yf extends us{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new yf}clone(){const t=new yf;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const r=new tSe(this,t,e),i=t.doc;if(lx(this,t,r),!t.local){let o=!1;for(const[s,a]of t.afterState.entries()){const l=t.beforeState.get(s)||0;if(a!==l&&(zW(t,i.store.clients.get(s),l,a,c=>{!c.deleted&&c.content.constructor===xo&&(o=!0)}),o))break}o||Uu(t,t.deleteSet,s=>{s instanceof pl||o||s.parent===this&&s.content.constructor===xo&&(o=!0)}),ci(i,s=>{o?(n=>{let t=0;ci(n.doc,e=>{let r=n._start,i=n._start,o=Hl();const s=L1(o);for(;i;)!1===i.deleted&&(i.content.constructor===xo?Hg(s,i.content):(t+=y$(e,r,i,o,s),o=L1(s),r=i)),i=i.right})})(this):Uu(s,s.deleteSet,a=>{a instanceof pl||a.parent===this&&((n,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===xo){const r=t.content.key;e.has(r)?t.delete(n):e.add(r)}t=t.left}})(s,a)})})}}toString(){let t="",e=this._start;for(;null!==e;)!e.deleted&&e.countable&&e.content.constructor===$l&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?ci(this.doc,r=>{const i=new cR(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const s=t[o];if(void 0!==s.insert){const a=e||"string"!=typeof s.insert||o!==t.length-1||null!==i.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&uR(r,this,i,a,s.attributes||{})}else void 0!==s.retain?m$(r,this,i,s.retain,s.attributes||{}):void 0!==s.delete&&v$(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,r){const i=[],o=new Map;let a="",l=this._start;function c(){if(a.length>0){const d={};let E=!1;o.forEach((W,ne)=>{E=!0,d[ne]=W});const U={insert:a};E&&(U.attributes=d),i.push(U),a=""}}return ci(this.doc,d=>{for(t&&nx(d,t),e&&nx(d,e);null!==l;){if(pf(l,t)||void 0!==e&&pf(l,e))switch(l.content.constructor){case $l:{const E=o.get("ychange");void 0===t||pf(l,t)?void 0===e||pf(l,e)?void 0!==E&&(c(),o.delete("ychange")):(void 0===E||E.user!==l.id.client||"added"!==E.state)&&(c(),o.set("ychange",r?r("added",l.id):{type:"added"})):(void 0===E||E.user!==l.id.client||"removed"!==E.state)&&(c(),o.set("ychange",r?r("removed",l.id):{type:"removed"})),a+=l.content.str;break}case Kl:case _f:{c();const E={insert:l.content.getContent()[0]};if(o.size>0){const U={};E.attributes=U,o.forEach((W,ne)=>{U[ne]=W})}i.push(E);break}case xo:pf(l,t)&&(c(),Hg(o,l.content))}l=l.right}c()},nx),i}insert(t,e,r){if(e.length<=0)return;const i=this.doc;null!==i?ci(i,o=>{const s=hx(o,this,t);r||(r={},s.currentAttributes.forEach((a,l)=>{r[l]=a})),uR(o,this,s,e,r)}):this._pending.push(()=>this.insert(t,e,r))}insertEmbed(t,e,r={}){const i=this.doc;null!==i?ci(i,o=>{const s=hx(o,this,t);uR(o,this,s,e,r)}):this._pending.push(()=>this.insertEmbed(t,e,r))}delete(t,e){if(0===e)return;const r=this.doc;null!==r?ci(r,i=>{v$(i,hx(i,this,t),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,r){if(0===e)return;const i=this.doc;null!==i?ci(i,o=>{const s=hx(o,this,t);null!==s.right&&m$(o,this,s,e,r)}):this._pending.push(()=>this.format(t,e,r))}removeAttribute(t){null!==this.doc?ci(this.doc,e=>{ux(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){null!==this.doc?ci(this.doc,r=>{aR(r,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return lR(this,t)}getAttributes(t){return u$(this)}_write(t){t.writeTypeRef(bSe)}}class dR{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==ca&&e.constructor!==vf||null===e._start)for(;null!==t;){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class vf extends us{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new vf}clone(){const t=new vf;return t.insert(0,this.toArray().map(e=>e instanceof us?e.clone():e)),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new dR(this,t)}querySelector(t){t=t.toUpperCase();const r=new dR(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new dR(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){lx(this,t,new oSe(this,e,t))}toString(){return o$(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},r){const i=t.createDocumentFragment();return void 0!==r&&r._createAssociation(i,this),tv(this,o=>{i.insertBefore(o.toDOM(t,e,r),null)}),i}insert(t,e){null!==this.doc?ci(this.doc,r=>{l$(r,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)ci(this.doc,r=>{cx(r,this,t&&t instanceof us?t._item:t,e)});else{const r=this._prelimContent,i=null===t?0:r.findIndex(o=>o===t)+1;if(0===i&&null!==t)throw Og("Reference item not found");r.splice(i,0,...e)}}delete(t,e=1){null!==this.doc?ci(this.doc,r=>{c$(r,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return r$(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return s$(this,t)}slice(t=0,e=this.length){return n$(this,t,e)}forEach(t){tv(this,t)}_write(t){t.writeTypeRef(xSe)}}class ca extends vf{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new ca(this.nodeName)}clone(){const t=new ca(this.nodeName),e=this.getAttributes();for(const r in e)t.setAttribute(r,e[r]);return t.insert(0,this.toArray().map(r=>r instanceof us?r.clone():r)),t}toString(){const t=this.getAttributes(),e=[],r=[];for(const a in t)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const l=r[a];e.push(l+'="'+t[l]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${e.length>0?" "+e.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(t){null!==this.doc?ci(this.doc,e=>{ux(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?ci(this.doc,r=>{aR(r,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return lR(this,t)}hasAttribute(t){return d$(this,t)}getAttributes(t){return u$(this)}toDOM(t=document,e={},r){const i=t.createElement(this.nodeName),o=this.getAttributes();for(const s in o)i.setAttribute(s,o[s]);return tv(this,s=>{i.appendChild(s.toDOM(t,e,r))}),void 0!==r&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(wSe),t.writeKey(this.nodeName)}}class oSe extends sx{constructor(t,e,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(i=>{null===i?this.childListChanged=!0:this.attributesChanged.add(i)})}}class fx extends mf{constructor(t){super(),this.hookName=t}_copy(){return new fx(this.hookName)}clone(){const t=new fx(this.hookName);return this.forEach((e,r)=>{t.set(r,e)}),t}toDOM(t=document,e={},r){const i=e[this.hookName];let o;return o=void 0!==i?i.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==r&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(SSe),t.writeKey(this.hookName)}}class fl extends yf{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new fl}clone(){const t=new fl;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,r){const i=t.createTextNode(this.toString());return void 0!==r&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const e=[];for(const i in t.attributes){const o=[];for(const s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,a)=>s.key<a.key?-1:1),e.push({nodeName:i,attrs:o})}e.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<e.length;i++){const o=e[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){const a=o.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let i=e.length-1;i>=0;i--)r+=`</${e[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(CSe)}}class hR{constructor(t,e){this.id=t,this.length=e}get deleted(){throw zl()}mergeWith(t){return!1}write(t,e,r){throw zl()}integrate(t,e){throw zl()}}class pl extends hR{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),HW(t.doc.store,this)}write(t,e){t.writeInfo(0),t.writeLen(this.length-e)}getMissing(t,e){return null}}class nv{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new nv(this.content)}splice(t){throw zl()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}class rv{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new rv(this.len)}splice(t){const e=new rv(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){q0(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const _$=(n,t)=>new ff(ar($t({guid:n},t),{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class iv{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new iv(_$(this.doc.guid,this.opts))}splice(t){throw zl()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}class _f{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new _f(this.embed)}splice(t){throw zl()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}class xo{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new xo(this.key,this.value)}splice(t){throw zl()}mergeWith(t){return!1}integrate(t,e){e.parent._searchMarker=null}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}class px{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new px(this.arr)}splice(t){const e=new px(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const r=this.arr.length;t.writeLen(r-e);for(let i=e;i<r;i++){const o=this.arr[i];t.writeString(void 0===o?"undefined":JSON.stringify(o))}}getRef(){return 2}}class bf{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new bf(this.arr)}splice(t){const e=new bf(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const r=this.arr.length;t.writeLen(r-e);for(let i=e;i<r;i++)t.writeAny(this.arr[i])}getRef(){return 8}}class $l{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new $l(this.str)}splice(t){const e=new $l(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\ufffd",e.str="\ufffd"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const ySe=[n=>new Vd,n=>new mf,n=>new yf,n=>new ca(n.readKey()),n=>new vf,n=>new fx(n.readKey()),n=>new fl],vSe=0,_Se=1,bSe=2,wSe=3,xSe=4,SSe=5,CSe=6;class Kl{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Kl(this.type._copy())}splice(t){throw zl()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;null!==e;)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(r=>{r.deleted?t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;null!==e;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(r=>{for(;null!==r;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const fR=(n,t)=>{let i,e=t,r=0;do{r>0&&(e=qn(e.client,e.clock+r)),i=rx(n,e),r=e.clock-i.id.clock,e=i.redone}while(null!==e&&i instanceof ti);return{item:i,diff:r}},pR=(n,t)=>{for(;null!==n&&n.keep!==t;)n.keep=t,n=n.parent._item},gx=(n,t,e)=>{const{client:r,clock:i}=t.id,o=new ti(qn(r,i+e),t,qn(r,i+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=qn(t.redone.client,t.redone.clock+e)),t.right=o,null!==o.right&&(o.right.left=o),n._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=e,o},b$=(n,t,e,r,i)=>{const o=n.doc,s=o.store,a=o.clientID,l=t.redone;if(null!==l)return Ks(n,l);let E,c=t.parent._item,d=null;if(null!==c&&!0===c.deleted){if(null===c.redone&&(!e.has(c)||null===b$(n,c,e,r,i)))return null;for(;null!==c.redone;)c=Ks(n,c.redone)}const U=null===c?t.parent:c.content.type;if(null===t.parentSub){for(d=t.left,E=t;null!==d;){let Pe=d;for(;null!==Pe&&Pe.parent._item!==c;)Pe=null===Pe.redone?null:Ks(n,Pe.redone);if(null!==Pe&&Pe.parent._item===c){d=Pe;break}d=d.left}for(;null!==E;){let Pe=E;for(;null!==Pe&&Pe.parent._item!==c;)Pe=null===Pe.redone?null:Ks(n,Pe.redone);if(null!==Pe&&Pe.parent._item===c){E=Pe;break}E=E.right}}else if(E=null,t.right&&!i){for(d=t;null!==d&&null!==d.right&&Fg(r,d.right.id);)d=d.right;for(;null!==d&&null!==d.redone;)d=Ks(n,d.redone);if(null===d||d.parent._item!==c||d&&null!==d.right)return null}else d=U._map.get(t.parentSub)||null;const W=Xi(s,a),ne=qn(a,W),Ce=new ti(ne,d,d&&d.lastId,E,E&&E.id,U,t.parentSub,t.content.copy());return t.redone=ne,pR(Ce,!0),Ce.integrate(n,0),Ce};class ti extends hR{constructor(t,e,r,i,o,s,a,l){super(t,l.getLength()),this.origin=r,this.left=e,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?2:0}set marker(t){(8&this.info)>0!==t&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(t){this.keep!==t&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(t){this.deleted!==t&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Xi(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Xi(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Bg&&this.id.client!==this.parent.client&&this.parent.clock>=Xi(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=VW(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ks(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===pl||this.right&&this.right.constructor===pl)&&(this.parent=null),this.parent){if(this.parent.constructor===Bg){const r=rx(e,this.parent);this.parent=r.constructor===pl?null:r.content.type}}else this.left&&this.left.constructor===ti&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===ti&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=VW(t,t.doc.store,qn(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let i,r=this.left;if(null!==r)i=r.right;else if(null!==this.parentSub)for(i=this.parent._map.get(this.parentSub)||null;null!==i&&null!==i.left;)i=i.left;else i=this.parent._start;const o=new Set,s=new Set;for(;null!==i&&i!==this.right;){if(s.add(i),o.add(i),Ug(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(Ug(this.rightOrigin,i.rightOrigin))break}else{if(null===i.origin||!s.has(rx(t.doc.store,i.origin)))break;o.has(rx(t.doc.store,i.origin))||(r=i,o.clear())}i=i.right}this.left=r}if(null!==this.left)this.right=this.left.right,this.left.right=this;else{let r;if(null!==this.parentSub)for(r=this.parent._map.get(this.parentSub)||null;null!==r&&null!==r.left;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),HW(t.doc.store,this),this.content.integrate(t,this),$W(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new pl(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;null!==t&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;null!==t&&t.deleted;)t=t.left;return t}get lastId(){return 1===this.length?this.id:qn(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Ug(t.origin,this.lastId)&&this.right===t&&Ug(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),q0(t.deleteSet,this.id.client,this.id.clock,this.length),$W(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw dl();this.content.gc(t),e?((n,t,e)=>{const r=n.clients.get(t.id.client);r[Wl(r,t.id.clock)]=e})(t,this,new pl(this.id,this.length)):this.content=new rv(this.length)}write(t,e){const r=e>0?qn(this.id.client,this.id.clock+e-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=31&this.content.getRef()|(null===r?0:Ma)|(null===i?0:64)|(null===o?0:32);if(t.writeInfo(s),null!==r&&t.writeLeftID(r),null!==i&&t.writeRightID(i),null===r&&null===i){const a=this.parent;if(void 0!==a._item){const l=a._item;if(null===l){const c=Z0(a);t.writeParentInfo(!0),t.writeString(c)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Bg?(t.writeParentInfo(!1),t.writeLeftID(a)):dl();null!==o&&t.writeString(o)}this.content.write(t,e)}}const w$=(n,t)=>ASe[31&t](n),ASe=[()=>{dl()},n=>new rv(n.readLen()),n=>{const t=n.readLen(),e=[];for(let r=0;r<t;r++){const i=n.readString();e.push("undefined"===i?void 0:JSON.parse(i))}return new px(e)},n=>new nv(n.readBuf()),n=>new $l(n.readString()),n=>new _f(n.readJSON()),n=>new xo(n.readKey(),n.readJSON()),n=>new Kl(ySe[n.readTypeRef()](n)),n=>{const t=n.readLen(),e=[];for(let r=0;r<t;r++)e.push(n.readAny());return new bf(e)},n=>new iv(_$(n.readString(),n.readAny())),()=>{dl()}];class Ia extends hR{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){dl()}write(t,e){t.writeInfo(10),On(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const x$="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},S$="__ $YJS$ __";!0===x$[S$]&&console.warn("Yjs was already imported. Importing different versions of Yjs often leads to issues."),x$[S$]=!0;const mx=3e4,gR=n=>{if(n.shouldConnect&&null===n.ws){const t=new WebSocket(n.url),e=n.binaryType;let r=null;e&&(t.binaryType=e),n.ws=t,n.connecting=!0,n.connected=!1,t.onmessage=s=>{n.lastMessageReceived=Nc();const a=s.data,l="string"==typeof a?JSON.parse(a):a;l&&"pong"===l.type&&(clearTimeout(r),r=setTimeout(o,mx/2)),n.emit("message",[l,n])};const i=s=>{null!==n.ws&&(n.ws=null,n.connecting=!1,n.connected?(n.connected=!1,n.emit("disconnect",[{type:"disconnect",error:s},n])):n.unsuccessfulReconnects++,setTimeout(gR,Bd(1200*e1e(n.unsuccessfulReconnects+1),2500),n)),clearTimeout(r)},o=()=>{n.ws===t&&n.send({type:"ping"})};t.onclose=()=>i(null),t.onerror=s=>i(s),t.onopen=()=>{n.lastMessageReceived=Nc(),n.connecting=!1,n.connected=!0,n.unsuccessfulReconnects=0,n.emit("connect",[{type:"connect"},n]),r=setTimeout(o,mx/2)}}};class MSe extends U0{constructor(t,{binaryType:e}={}){super(),this.url=t,this.ws=null,this.binaryType=e||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&mx<Nc()-this.lastMessageReceived&&this.ws.close()},mx/2),gR(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&null===this.ws&&gR(this)}}const ISe=new Map,OSe="undefined"==typeof BroadcastChannel?class RSe{constructor(t){this.room=t,this.onmessage=null,(n=>{G9||addEventListener("storage",n)})(e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:Y9(e.newValue||"")}))}postMessage(t){q9.setItem(this.room,Z9((n=>new Uint8Array(n))(t)))}}:BroadcastChannel,mR=n=>Ta(ISe,n,()=>{const t=new Set,e=new OSe(n);return e.onmessage=r=>t.forEach(i=>i(r.data,"broadcastchannel")),{bc:e,subs:t}}),C$=()=>{let n=!0;return(t,e)=>{if(n){n=!1;try{t()}finally{n=!0}}else void 0!==e&&e()}};var LSe=F(5753);const A$=(n,t)=>{On(n,0);const e=(n=>((n,t=new Q1)=>(n instanceof Map?eR(t,n):((n,t)=>{eR(n,Q0(t.store))})(t,n),t.toUint8Array()))(n,new Ng))(t);co(n,e)},k$=(n,t,e)=>{On(n,1),co(n,((n,t)=>((n,t=new Uint8Array([0]),e=new Hu)=>{((n,t,e=new Map)=>{X2(n,t.store,e),Bc(n,AW(t.store))})(e,n,RW(t));const i=[e.toUint8Array()];if(n.store.pendingDs&&i.push(n.store.pendingDs),n.store.pendingStructs&&i.push(YW(n.store.pendingStructs.update,t)),i.length>1){if(e.constructor===Lg)return Bxe(i.map((o,s)=>0===s?o:Vxe(o)));if(e.constructor===Hu)return ox(i)}return i[0]})(n,t,new Lg))(t,e))},D$=(n,t,e)=>{try{((n,t,e)=>{Q2(n,t,e,ju)})(t,cs(n),e)}catch(r){console.error("Caught error while handling a Yjs update",r)}},jSe=D$;class VSe extends U0{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=Nc();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&3e4<=e-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&bR(this,r,"timeout")},cf(3e3)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,r=this.meta.get(e),i=void 0===r?0:r.clock+1,o=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:i,lastUpdated:Nc()});const s=[],a=[],l=[],c=[];null===t?c.push(e):null==o?null!=t&&s.push(e):(a.push(e),W0(o,t)||l.push(e)),(s.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:s,updated:l,removed:c},"local"]),this.emit("update",[{added:s,updated:a,removed:c},"local"])}setLocalStateField(t,e){const r=this.getLocalState();null!==r&&this.setLocalState(ar($t({},r),{[t]:e}))}getStates(){return this.states}}const bR=(n,t,e)=>{const r=[];for(let i=0;i<t.length;i++){const o=t[i];if(n.states.has(o)){if(n.states.delete(o),o===n.clientID){const s=n.meta.get(o);n.meta.set(o,{clock:s.clock+1,lastUpdated:Nc()})}r.push(o)}}r.length>0&&(n.emit("change",[{added:[],updated:[],removed:r},e]),n.emit("update",[{added:[],updated:[],removed:r},e]))},yx=(n,t,e=n.states)=>{const r=t.length,i=zo();On(i,r);for(let o=0;o<r;o++){const s=t[o],a=e.get(s)||null,l=n.meta.get(s).clock;On(i,s),On(i,l),Pc(i,JSON.stringify(a))}return wi(i)},T$=(n,t)=>{if(!t)return z2(n);const e=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:e},t,n).then(r=>{const i=zo();return Pc(i,"AES-GCM"),co(i,e),co(i,new Uint8Array(r)),wi(i)})},M$=(n,t)=>{if(!t)return z2(n);const e=Vl(n);"AES-GCM"!==Fc(e)&&(n=>{Promise.reject(n)})(Og("Unknown encryption algorithm"));const i=cs(e),o=cs(e);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,o).then(s=>new Uint8Array(s))},Gl=(n=>{const t=SW[q2],e=P2("log"),r=null!==e&&("*"===e||"true"===e||new RegExp(e,"gi").test(n));return q2=(q2+1)%SW.length,n+=": ",r?(...i)=>{const o=Nc(),s=o-CW;CW=o,_W(t,n,K0,...i.map(a=>"string"==typeof a||"symbol"==typeof a?a:JSON.stringify(a)),t," +"+s+"ms")}:Z1e})("y-webrtc"),vx=new Map,wf=new Map,R$=n=>{let t=!0;n.webrtcConns.forEach(e=>{e.synced||(t=!1)}),(!t&&n.synced||t&&!n.synced)&&(n.synced=t,n.provider.emit("synced",[{synced:t}]),Gl("synced ",la,n.name,Ud," with all peers"))},O$=(n,t,e)=>{const r=Vl(t),i=zo(),o=$n(r);if(void 0===n)return null;const s=n.awareness,a=n.doc;let l=!1;switch(o){case 0:{On(i,0);const c=((n,t,e,r)=>{const i=$n(n);switch(i){case 0:((n,t,e)=>{k$(t,e,cs(n))})(n,t,e);break;case 1:D$(n,e,r);break;case 2:jSe(n,e,r);break;default:throw new Error("Unknown message type")}return i})(r,i,a,n);1===c&&!n.synced&&e(),0===c&&(l=!0);break}case 3:On(i,1),co(i,yx(s,Array.from(s.getStates().keys()))),l=!0;break;case 1:((n,t,e)=>{const r=Vl(t),i=Nc(),o=[],s=[],a=[],l=[],c=$n(r);for(let d=0;d<c;d++){const E=$n(r);let U=$n(r);const W=JSON.parse(Fc(r)),ne=n.meta.get(E),Ce=n.states.get(E),Pe=void 0===ne?0:ne.clock;(Pe<U||Pe===U&&null===W&&n.states.has(E))&&(null===W?E===n.clientID&&null!=n.getLocalState()?U++:n.states.delete(E):n.states.set(E,W),n.meta.set(E,{clock:U,lastUpdated:i}),void 0===ne&&null!==W?o.push(E):void 0!==ne&&null===W?l.push(E):null!==W&&(W0(W,Ce)||a.push(E),s.push(E)))}(o.length>0||a.length>0||l.length>0)&&n.emit("change",[{added:o,updated:a,removed:l},e]),(o.length>0||s.length>0||l.length>0)&&n.emit("update",[{added:o,updated:s,removed:l},e])})(s,cs(r),n);break;case 4:{const c=1===df(r),d=Fc(r);if(d!==n.peerId&&(n.bcConns.has(d)&&!c||!n.bcConns.has(d)&&c)){const E=[],U=[];c?(n.bcConns.add(d),U.push(d)):(n.bcConns.delete(d),E.push(d)),n.provider.emit("peers",[{added:U,removed:E,webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]),N$(n)}break}default:return console.error("Unable to compute message"),i}return l?i:null},xR=(n,t)=>{Gl("send message to ",la,n.remotePeerId,Ud,J1," (",n.room.name,")",K0);try{n.peer.send(wi(t))}catch(e){}};class P${constructor(t,e,r,i){Gl("establishing connection to ",la,r),this.room=i,this.remotePeerId=r,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new LSe($t({initiator:e},i.provider.peerOpts)),this.peer.on("signal",o=>{CR(t,i,{to:r,from:i.peerId,type:"signal",signal:o})}),this.peer.on("connect",()=>{Gl("connected to ",la,r),this.connected=!0;const s=i.provider.doc,a=i.awareness,l=zo();On(l,0),A$(l,s),xR(this,l);const c=a.getStates();if(c.size>0){const d=zo();On(d,1),co(d,yx(a,Array.from(c.keys()))),xR(this,d)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,i.webrtcConns.has(this.remotePeerId)&&(i.webrtcConns.delete(this.remotePeerId),i.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}])),R$(i),this.peer.destroy(),Gl("closed connection to ",la,r),SR(i)}),this.peer.on("error",o=>{Gl("Error in connection to ",la,r,": ",o),SR(i)}),this.peer.on("data",o=>{const s=((n,t)=>{const e=n.room;return Gl("received message from ",la,n.remotePeerId,J1," (",e.name,")",Ud,K0),O$(e,t,()=>{n.synced=!0,Gl("synced ",la,e.name,Ud," with ",la,n.remotePeerId),R$(e)})})(this,o);null!==s&&xR(this,s)})}destroy(){this.peer.destroy()}}const Wd=(n,t)=>T$(t,n.key).then(e=>n.mux(()=>((n,t,e=null)=>{const r=mR(n);r.bc.postMessage(t),r.subs.forEach(i=>i(t,e))})(n.name,e))),F$=(n,t)=>{n.bcconnected&&Wd(n,t),((n,t)=>{Gl("broadcast message in ",la,n.name,Ud),n.webrtcConns.forEach(e=>{try{e.peer.send(t)}catch(r){}})})(n,t)},SR=n=>{vx.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[n.name]}),n.webrtcConns.size<n.provider.maxConns&&CR(t,n,{type:"announce",from:n.peerId}))})},N$=n=>{if(n.provider.filterBcConns){const t=zo();On(t,4),H0(t,1),Pc(t,n.peerId),Wd(n,wi(t))}};class JSe{constructor(t,e,r,i){this.peerId=uW(),this.doc=t,this.awareness=e.awareness,this.provider=e,this.synced=!1,this.name=r,this.key=i,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=C$(),this.bcconnected=!1,this._bcSubscriber=o=>M$(new Uint8Array(o),i).then(s=>this.mux(()=>{const a=O$(this,s,()=>{});a&&Wd(this,wi(a))})),this._docUpdateHandler=(o,s)=>{const a=zo();On(a,0),((n,t)=>{On(n,2),co(n,t)})(a,o),F$(this,wi(a))},this._awarenessUpdateHandler=({added:o,updated:s,removed:a},l)=>{const c=o.concat(s).concat(a),d=zo();On(d,1),co(d,yx(this.awareness,c)),F$(this,wi(d))},this._beforeUnloadHandler=()=>{bR(this.awareness,[t.clientID],"window unload"),wf.forEach(o=>{o.disconnect()})},"undefined"!=typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!=typeof process&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),SR(this),((n,t)=>{mR(this.name).subs.add(t)})(0,this._bcSubscriber),this.bcconnected=!0,N$(this);const e=zo();On(e,0),A$(e,this.doc),Wd(this,wi(e));const r=zo();On(r,0),k$(r,this.doc),Wd(this,wi(r));const i=zo();On(i,3),Wd(this,wi(i));const o=zo();On(o,1),co(o,yx(this.awareness,[this.doc.clientID])),Wd(this,wi(o))}disconnect(){vx.forEach(e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})}),bR(this.awareness,[this.doc.clientID],"disconnect");const t=zo();On(t,4),H0(t,0),Pc(t,this.peerId),Wd(this,wi(t)),((n,t)=>{mR(this.name).subs.delete(t)})(0,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(e=>e.destroy())}destroy(){this.disconnect(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!=typeof process&&process.off("exit",this._beforeUnloadHandler)}}const CR=(n,t,e)=>{t.key?((n,t)=>{const e=zo();return Ig(e,n),T$(wi(e),t)})(e,t.key).then(r=>{n.send({type:"publish",topic:t.name,data:Z9(r)})}):n.send({type:"publish",topic:t.name,data:e})};class YSe extends MSe{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{Gl(`connected (${t})`);const e=Array.from(wf.keys());this.send({type:"subscribe",topics:e}),wf.forEach(r=>CR(this,r,{type:"announce",from:r.peerId}))}),this.on("message",e=>{if("publish"===e.type){const r=e.topic,i=wf.get(r);if(null==i||"string"!=typeof r)return;const o=s=>{const a=i.webrtcConns,l=i.peerId;if(null==s||s.from===l||void 0!==s.to&&s.to!==l||i.bcConns.has(s.from))return;const c=a.has(s.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[s.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(s.type){case"announce":a.size<i.provider.maxConns&&(Ta(a,s.from,()=>new P$(this,!0,s.from,i)),c());break;case"signal":s.to===l&&(Ta(a,s.from,()=>new P$(this,!1,s.from,i)).peer.signal(s.signal),c())}};i.key?"string"==typeof e.data&&((n,t)=>M$(n,t).then(e=>Rg(Vl(new Uint8Array(e)))))(Y9(e.data),i.key).then(o):o(e.data)}}),this.on("disconnect",()=>Gl(`disconnect (${t})`))}}class XSe extends U0{constructor(t,e,{signaling:r=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:i=null,awareness:o=new VSe(e),maxConns:s=20+cf(15*lW()),filterBcConns:a=!0,peerOpts:l={}}={}){super(),this.roomName=t,this.doc=e,this.filterBcConns=a,this.awareness=o,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=s,this.peerOpts=l,this.key=i?((n,t)=>{const e=W9(n).buffer,r=W9(t).buffer;return crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]).then(i=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))})(i,t):z2(null),this.room=null,this.key.then(c=>{this.room=((n,t,e,r)=>{if(wf.has(e))throw Og(`A Yjs Doc connected to room "${e}" already exists!`);const i=new JSe(n,t,e,r);return wf.set(e,i),i})(e,this,t,c),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const e=Ta(vx,t,()=>new YSe(t));this.signalingConns.push(e),e.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),0===t.providers.size&&(t.destroy(),vx.delete(t.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),wf.delete(this.roomName)}),super.destroy()}}const Hi=new sa("y-sync"),sv=new sa("y-undo"),_x=new sa("yjs-cursor"),bx=n=>class{constructor(e){this._=e}destroy(){n(this._)}},tCe=bx(clearTimeout),zg=(n,t)=>new tCe(setTimeout(t,n));bx(clearInterval),bx(n=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(n)),bx(n=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(n));let lv=null;const oCe=()=>{const n=lv;lv=null,n.forEach((t,e)=>{const r=e.state.tr,i=Hi.getState(e.state);i&&i.binding&&!i.binding.isDestroyed&&(t.forEach((o,s)=>{r.setMeta(s,o)}),e.dispatch(r))})},wx=(n,t,e)=>{if(0===n)return tR(t,0);let r=null===t._first?null:t._first.content.type;for(;null!==r&&t!==r;){if(r instanceof fl){if(r._length>=n)return tR(r,n);if(n-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,n--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{const i=(e.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&n<i)r=r._first.content.type,n--;else{if(1===n&&0===r._length&&i>1)return new jg(null===r._item?null:r._item.id,null===r._item?Z0(r):null,null);if(n-=i,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===n)return r=null===r._item?r:r._item.parent,new jg(null===r._item?null:r._item.id,null===r._item?Z0(r):null,null);do{r=r._item.parent,n--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw dl();if(0===n&&r.constructor!==fl&&r!==t)return aCe(r._item.parent,r._item)}return tR(t,t._length)},aCe=(n,t)=>{let e=null,r=null;return null===n._item?r=Z0(n):e=qn(n._item.id.client,n._item.id.clock),new jg(e,r,t.id)},cv=(n,t,e,r)=>{const i=((n,t)=>{const e=t.store,r=n.item,i=n.type,o=n.tname,s=n.assoc;let a=null,l=0;if(null!==r){if(Xi(e,r.client)<=r.clock)return null;const c=fR(e,r),d=c.item;if(!(d instanceof ti))return null;if(a=d.parent,null===a._item||!a._item.deleted){l=d.deleted||!d.countable?0:c.diff+(s>=0?0:1);let E=d.left;for(;null!==E;)!E.deleted&&E.countable&&(l+=E.length),E=E.left}}else{if(null!==o)a=t.get(o);else{if(null===i)throw dl();{if(Xi(e,i.client)<=i.clock)return null;const{item:c}=fR(e,i);if(!(c instanceof ti&&c.content instanceof Kl))return null;a=c.content.type}}l=s>=0?a._length:0}return((n,t,e=0)=>new Sxe(n,t,e))(a,l,n.assoc)})(e,n);if(null===i||i.type!==t&&!Y0(t,i.type._item))return null;let o=i.type,s=0;if(o.constructor===fl)s=i.index;else if(null===o._item||!o._item.deleted){let a=o._first,l=0;for(;l<o._length&&l<i.index&&null!==a;){if(!a.deleted){const c=a.content.type;l++,s+=c instanceof fl?c._length:r.get(c).nodeSize}a=a.right}s+=1}for(;o!==t&&null!==o._item;){const a=o._item.parent;if(null===a._item||!a._item.deleted){s+=1;let l=a._first;for(;null!==l;){const c=l.content.type;if(c===o)break;l.deleted||(s+=c instanceof fl?c._length:r.get(c).nodeSize),l=l.right}}o=a}return s-1},xx=(n,t)=>void 0===t?!n.deleted:t.sv.has(n.id.client)&&t.sv.get(n.id.client)>n.id.clock&&!Fg(t.ds,n.id),uCe=[{light:"#ecd44433",dark:"#ecd444"}],dCe=(n,t,e)=>{if(!n.has(e)){if(n.size<t.length){const r=Tg();n.forEach(i=>r.add(i)),t=t.filter(i=>!r.has(i))}n.set(e,(n=>n[cf(lW()*n.length)])(t))}return n.get(e)},hCe=(n,{colors:t=uCe,colorMapping:e=new Map,permanentUserData:r=null}={})=>{let o,i=!1;const s=new oa({props:{editable:a=>{const l=Hi.getState(a);return null==l.snapshot&&null==l.prevSnapshot}},key:Hi,state:{init:(a,l)=>({type:n,doc:n.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:t,colorMapping:e,permanentUserData:r}),apply:(a,l)=>{const c=a.getMeta(Hi);if(void 0!==c){l=Object.assign({},l);for(const d in c)l[d]=c[d]}return l.isChangeOrigin=void 0!==c&&!!c.isChangeOrigin,null!==l.binding&&void 0!==c&&(null!=c.snapshot||null!=c.prevSnapshot)&&zg(0,()=>{null==l.binding||l.binding.isDestroyed||(null==c.restore?l.binding._renderSnapshot(c.snapshot,c.prevSnapshot,l):(l.binding._renderSnapshot(c.snapshot,c.snapshot,l),delete l.restore,delete l.snapshot,delete l.prevSnapshot,l.binding._prosemirrorChanged(l.binding.prosemirrorView.state.doc)))}),l}},view:a=>{const l=new pCe(n,a);return null!=o&&clearTimeout(o),o=zg(0,()=>{l._forceRerender(),a.dispatch(a.state.tr.setMeta(Hi,{binding:l}))}),{update:()=>{const c=s.getState(a.state);null==c.snapshot&&null==c.prevSnapshot&&(i||null!==a.state.doc.content.findDiffStart(a.state.doc.type.createAndFill().content))&&(i=!0,l._prosemirrorChanged(a.state.doc))},destroy:()=>{clearTimeout(o),l.destroy()}}}});return s},ER=(n,t)=>({anchor:wx(t.selection.anchor,n.type,n.mapping),head:wx(t.selection.head,n.type,n.mapping)});class pCe{constructor(t,e){this.type=t,this.prosemirrorView=e,this.mux=C$(),this.isDestroyed=!1,this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=ER(this,e.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(R2&&null===this._domSelectionInView&&(zg(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),e=this.prosemirrorView._root.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset),0===e.getClientRects().length&&e.startContainer&&e.collapsed&&e.selectNodeContents(e.startContainer);const i=e.getBoundingClientRect(),o=hl.documentElement;return i.bottom>=0&&i.right>=0&&i.left<=(window.innerWidth||o.clientWidth||0)&&i.top<=(window.innerHeight||o.clientHeight||0)}renderSnapshot(t,e){e||(e=nR(X1(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Hi,{snapshot:t,prevSnapshot:e}))}unrenderSnapshot(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(r=>Sx(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>null!==r),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Qt(new Dt(t),0,0));e.setMeta(Hi,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(e)})}_forceRerender(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(r=>Sx(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>null!==r),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Qt(new Dt(t),0,0));this.prosemirrorView.dispatch(e.setMeta(Hi,{isChangeOrigin:!0}))})}_renderSnapshot(t,e,r){t||(t=(n=>nR(AW(n.store),Q0(n.store)))(this.doc)),this.mapping=new Map,this.mux(()=>{this.doc.transact(i=>{const o=r.permanentUserData;o&&o.dss.forEach(c=>{Uu(i,c,d=>{})});const s=(c,d)=>{const E="added"===c?o.getUserByClientId(d.client):o.getUserByDeletedId(d);return{user:E,type:c,color:dCe(r.colorMapping,r.colors,E)}},a=i$(this.type,new tx(e.ds,t.sv)).map(c=>!c._item.deleted||xx(c._item,t)||xx(c._item,e)?Sx(c,this.prosemirrorView.state.schema,new Map,t,e,s):null).filter(c=>null!==c),l=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Qt(new Dt(a),0,0));this.prosemirrorView.dispatch(l.setMeta(Hi,{isChangeOrigin:!0}))},Hi)})}_typeChanged(t,e){const r=Hi.getState(this.prosemirrorView.state);0!==t.length&&null==r.snapshot&&null==r.prevSnapshot?this.mux(()=>{const i=(a,l)=>this.mapping.delete(l);Uu(e,e.deleteSet,a=>a.constructor===ti&&this.mapping.delete(a.content.type)),e.changed.forEach(i),e.changedParentTypes.forEach(i);const o=this.type.toArray().map(a=>L$(a,this.prosemirrorView.state.schema,this.mapping)).filter(a=>null!==a);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Qt(new Dt(o),0,0));((n,t,e)=>{if(null!==t&&null!==t.anchor&&null!==t.head){const r=cv(e.doc,e.type,t.anchor,e.mapping),i=cv(e.doc,e.type,t.head,e.mapping);null!==r&&null!==i&&(n=n.setSelection(bi.create(n.doc,r,i)))}})(s,this.beforeTransactionSelection,this),s=s.setMeta(Hi,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)}):this.renderSnapshot(r.snapshot,r.prevSnapshot)}_prosemirrorChanged(t){this.mux(()=>{this.doc.transact(()=>{DR(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=ER(this,this.prosemirrorView.state)},Hi)})}destroy(){this.isDestroyed=!0,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const L$=(n,t,e,r,i,o)=>{const s=e.get(n);if(void 0===s){if(n instanceof ca)return Sx(n,t,e,r,i,o);throw zl()}return s},Sx=(n,t,e,r,i,o)=>{const s=[],a=l=>{if(l.constructor===ca){const c=L$(l,t,e,r,i,o);null!==c&&s.push(c)}else{const c=gCe(l,t,e,r,i,o);null!==c&&c.forEach(d=>{null!==d&&s.push(d)})}};void 0===r||void 0===i?n.toArray().forEach(a):i$(n,new tx(i.ds,r.sv)).forEach(a);try{const l=n.getAttributes(r);void 0!==r&&(xx(n._item,r)?xx(n._item,i)||(l.ychange=o?o("added",n._item.id):{type:"added"}):l.ychange=o?o("removed",n._item.id):{type:"removed"});const c=t.node(n.nodeName,l,s);return e.set(n,c),c}catch(l){return n.doc.transact(c=>{n._item.delete(c)},Hi),e.delete(n),null}},gCe=(n,t,e,r,i,o)=>{const s=[],a=n.toDelta(r,i,o);try{for(let l=0;l<a.length;l++){const c=a[l],d=[];for(const E in c.attributes)d.push(t.mark(E,c.attributes[E]));s.push(t.text(c.insert,d))}}catch(l){return n.doc.transact(c=>{n._item.delete(c)},Hi),null}return s},AR=(n,t)=>n instanceof Array?((n,t)=>{const e=new fl,r=n.map(i=>({insert:i.text,attributes:H$(i.marks)}));return e.applyDelta(r),t.set(e,n),e})(n,t):((n,t)=>{const e=new ca(n.type.name);for(const r in n.attrs){const i=n.attrs[r];null!==i&&"ychange"!==r&&e.setAttribute(r,i)}return e.insert(0,Cx(n).map(r=>AR(r,t))),t.set(e,n),e})(n,t),B$=n=>"object"==typeof n&&null!==n,kR=(n,t)=>{const e=Object.keys(n).filter(i=>null!==n[i]);let r=e.length===Object.keys(t).filter(i=>null!==t[i]).length;for(let i=0;i<e.length&&r;i++){const o=e[i],s=n[o],a=t[o];r="ychange"===o||s===a||B$(s)&&B$(a)&&kR(s,a)}return r},Cx=n=>{const t=n.content.content,e=[];for(let r=0;r<t.length;r++){const i=t[r];if(i.isText){const o=[];for(let s=t[r];r<t.length&&s.isText;s=t[++r])o.push(s);r--,e.push(o)}else e.push(i)}return e},U$=(n,t)=>{const e=n.toDelta();return e.length===t.length&&e.every((r,i)=>r.insert===t[i].text&&dW(r.attributes||{}).length===t[i].marks.length&&t[i].marks.every(o=>kR(r.attributes[o.type.name]||{},o.attrs)))},uv=(n,t)=>{if(n instanceof ca&&!(t instanceof Array)&&TR(n,t)){const e=Cx(t);return n._length===e.length&&kR(n.getAttributes(),t.attrs)&&n.toArray().every((r,i)=>uv(r,e[i]))}return n instanceof fl&&t instanceof Array&&U$(n,t)},Ex=(n,t)=>n===t||n instanceof Array&&t instanceof Array&&n.length===t.length&&n.every((e,r)=>t[r]===e),j$=(n,t,e)=>{const r=n.toArray(),i=Cx(t),o=i.length,s=r.length,a=Bd(s,o);let l=0,c=0,d=!1;for(;l<a;l++){const E=r[l],U=i[l];if(Ex(e.get(E),U))d=!0;else if(!uv(E,U))break}for(;l+c<a;c++){const E=r[s-c-1],U=i[o-c-1];if(Ex(e.get(E),U))d=!0;else if(!uv(E,U))break}return{equalityFactor:l+c,foundMappedChild:d}},_Ce=(n,t,e)=>{e.set(n,t);const{nAttrs:r,str:i}=(n=>{let t="",e=n._start;const r={};for(;null!==e;)e.deleted||(e.countable&&e.content instanceof $l?t+=e.content.str:e.content instanceof xo&&(r[e.content.key]=null)),e=e.right;return{str:t,nAttrs:r}})(n),o=t.map(c=>({insert:c.text,attributes:Object.assign({},r,H$(c.marks))})),{insert:s,remove:a,index:l}=((n,t)=>{let e=0,r=0;for(;e<n.length&&e<t.length&&n[e]===t[e];)e++;for(;r+e<n.length&&r+e<t.length&&n[n.length-r-1]===t[t.length-r-1];)r++;return{index:e,remove:n.length-e-r,insert:t.slice(e,t.length-r)}})(i,o.map(c=>c.insert).join(""));n.delete(l,a),n.insert(l,s),n.applyDelta(o.map(c=>({retain:c.insert.length,attributes:c.attributes})))},H$=n=>{const t={};return n.forEach(e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)}),t},DR=(n,t,e,r)=>{if(t instanceof ca&&t.nodeName!==e.type.name)throw new Error("node name mismatch!");if(r.set(t,e),t instanceof ca){const E=t.getAttributes(),U=e.attrs;for(const W in U)null!==U[W]?E[W]!==U[W]&&"ychange"!==W&&t.setAttribute(W,U[W]):t.removeAttribute(W);for(const W in E)void 0===U[W]&&t.removeAttribute(W)}const i=Cx(e),o=i.length,s=t.toArray(),a=s.length,l=Bd(o,a);let c=0,d=0;for(;c<l;c++){const E=s[c],U=i[c];if(!Ex(r.get(E),U)){if(!uv(E,U))break;r.set(E,U)}}for(;d+c+1<l;d++){const E=s[a-d-1],U=i[o-d-1];if(!Ex(r.get(E),U)){if(!uv(E,U))break;r.set(E,U)}}n.transact(()=>{for(;a-c-d>0&&o-c-d>0;){const U=s[c],W=i[c],ne=s[a-d-1],Ce=i[o-d-1];if(U instanceof fl&&W instanceof Array)U$(U,W)||_Ce(U,W,r),c+=1;else{let Pe=U instanceof ca&&TR(U,W),Qe=ne instanceof ca&&TR(ne,Ce);if(Pe&&Qe){const je=j$(U,W,r),at=j$(ne,Ce,r);je.foundMappedChild&&!at.foundMappedChild?Qe=!1:!je.foundMappedChild&&at.foundMappedChild||je.equalityFactor<at.equalityFactor?Pe=!1:Qe=!1}Pe?(DR(n,U,W,r),c+=1):Qe?(DR(n,ne,Ce,r),d+=1):(t.delete(c,1),t.insert(c,[AR(W,r)]),c+=1)}}const E=a-c-d;if(E>0&&t.delete(c,E),c+d<o){const U=[];for(let W=c;W<o-d;W++)U.push(AR(i[W],r));t.insert(c,U)}},Hi)},TR=(n,t)=>!(t instanceof Array)&&n.nodeName===t.type.name,bCe=n=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${n.color}`);const e=document.createElement("div");e.setAttribute("style",`background-color: ${n.color}`),e.insertBefore(document.createTextNode(n.name),null);const r=document.createTextNode("\u2060"),i=document.createTextNode("\u2060");return t.insertBefore(r,null),t.insertBefore(e,null),t.insertBefore(i,null),t},wCe=n=>({style:`background-color: ${n.color}70`,class:"ProseMirror-yjs-selection"}),xCe=/^#[0-9a-fA-F]{6}$/,V$=(n,t,e,r)=>{const i=Hi.getState(n),o=i.doc,s=[];return null!=i.snapshot||null!=i.prevSnapshot||null===i.binding?Gr.create(n.doc,[]):(t.getStates().forEach((a,l)=>{if(l!==o.clientID&&null!=a.cursor){const c=a.user||{};null==c.color?c.color="#ffa500":xCe.test(c.color)||console.warn("A user uses an unsupported color format",c),null==c.name&&(c.name=`User: ${l}`);let d=cv(o,i.type,X0(a.cursor.anchor),i.binding.mapping),E=cv(o,i.type,X0(a.cursor.head),i.binding.mapping);if(null!==d&&null!==E){const U=Fu(n.doc.content.size-1,0);d=Bd(d,U),E=Bd(E,U),s.push(bo.widget(E,()=>e(c),{key:l+"",side:10}));const W=Bd(d,E),ne=Fu(d,E);s.push(bo.inline(W,ne,r(c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Gr.create(n.doc,s))},SCe=(n,{cursorBuilder:t=bCe,selectionBuilder:e=wCe,getSelection:r=(o=>o.selection)}={},i="cursor")=>new oa({key:_x,state:{init:(o,s)=>V$(s,n,t,e),apply(o,s,a,l){const c=Hi.getState(l),d=o.getMeta(_x);return c&&c.isChangeOrigin||d&&d.awarenessUpdated?V$(l,n,t,e):s.map(o.mapping,o.doc)}},props:{decorations:o=>_x.getState(o)},view:o=>{const s=()=>{o.docView&&((n,t,e)=>{lv||(lv=new Map,zg(0,oCe)),Ta(lv,n,Hl).set(t,{awarenessUpdated:!0})})(o,_x)},a=()=>{const l=Hi.getState(o.state),c=n.getLocalState()||{};if(null!=l.binding)if(o.hasFocus()){const d=r(o.state),E=wx(d.anchor,l.type,l.binding.mapping),U=wx(d.head,l.type,l.binding.mapping);(null==c.cursor||!UW(X0(c.cursor.anchor),E)||!UW(X0(c.cursor.head),U))&&n.setLocalStateField(i,{anchor:E,head:U})}else null!=c.cursor&&null!==cv(l.doc,l.type,X0(c.cursor.anchor),l.binding.mapping)&&n.setLocalStateField(i,null)};return n.on("change",s),o.dom.addEventListener("focusin",a),o.dom.addEventListener("focusout",a),{update:a,destroy:()=>{o.dom.removeEventListener("focusin",a),o.dom.removeEventListener("focusout",a),n.off("change",s),n.setLocalStateField(i,null)}}}}),CCe=n=>{const t=sv.getState(n).undoManager;if(null!=t)return t.undo(),!0},z$=n=>{const t=sv.getState(n).undoManager;if(null!=t)return t.redo(),!0},ECe=new Set(["paragraph"]),kCe=({protectedNodes:n=ECe,trackedOrigins:t=[],undoManager:e=null}={})=>new oa({key:sv,state:{init:(r,i)=>{const o=Hi.getState(i),s=e||new Pxe(o.type,{trackedOrigins:new Set([Hi].concat(t)),deleteFilter:a=>((n,t)=>!(n instanceof ti&&n.content instanceof Kl&&(n.content.type instanceof yf||n.content.type instanceof ca&&t.has(n.content.type.nodeName))&&0!==n.content.type._length))(a,n)});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,i,o,s)=>{const a=Hi.getState(s).binding,l=i.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:ER(a,o),hasUndoOps:c,hasRedoOps:d}:c!==i.hasUndoOps||d!==i.hasRedoOps?Object.assign({},i,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):i}},view:r=>{const i=Hi.getState(r.state),o=sv.getState(r.state).undoManager;return o.on("stack-item-added",({stackItem:s})=>{const a=i.binding;a&&s.meta.set(a,sv.getState(r.state).prevSel)}),o.on("stack-item-popped",({stackItem:s})=>{const a=i.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{o.destroy()}}}});let MR=(()=>{class n{constructor(e,r){this.keystoreService=e,this.encryptionService=r}getKey(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.keystoreService.findAllKeystores(o=>o.handlesKeyForUrl(e));return Promise.any(i.map(o=>o.getKey(e))).catch(o=>{throw new c0(`Could not find key for ${e}`,{cause:o})})})()}getOrCreateKey(e){var r=this;return(0,Xe.Z)(function*(){return r.getKey(e).catch(function(){var i=(0,Xe.Z)(function*(o){if(!(o instanceof c0))throw o;const s=r.encryptionService.generateNewKey();return yield r.addKeyToKeystores(e,s),s});return function(o){return i.apply(this,arguments)}}())})()}addKeyToKeystores(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.keystoreService.findAllKeystores(s=>s.handlesKeyForUrl(e));yield Promise.all(o.map(s=>s.addKey(e,r)))})()}getOrCreateFolderKeystore(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.keystoreService.findAllKeystores(a=>Promise.resolve(a instanceof Gh&&a.getFolderUrl()===e));return i.length||i.push(yield r.createFolderKeystore(e)),{keystoreUrl:i[0].getStorageUrl(),encryptionKey:i[0].getStorage().getEncryptionKey()}})()}createFolderKeystore(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.keystoreService.createEmptyFolderKeystore(e),o=yield r.getKeysInFolder(e);return yield i.addKeys(o),i})()}getKeysInFolder(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.getKeysAll();return Object.fromEntries(Object.entries(i).filter(([o])=>o.startsWith(e)))})()}getKeysAll(){var e=this;return(0,Xe.Z)(function*(){const i=(yield e.keystoreService.getKeystores()).map(s=>s.getKeysAll())||[];return(yield Promise.all(i)).reduce((s,a)=>Object.assign(Object.assign({},s),a))})()}}return n.\u0275fac=function(e){return new(e||n)(lt(lg),lt(qh))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DCe=(()=>{class n{constructor(e,r,i){this.fileService=e,this.encryptionService=r,this.directoryService=i}createNewRandomGroup(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.generateSecretGroupFileUrl();return yield e.createGroupFile(r),`${r}#some-group-name`})()}createGroupFile(e){var r=this;return(0,Xe.Z)(function*(){yield r.fileService.writeFile(new Blob([],{type:"text/turtle"}),e)})()}generateSecretGroupFileUrl(){var e=this;return(0,Xe.Z)(function*(){const r=e.encryptionService.generateNewKey();return`${yield e.directoryService.getGroupsDirectory()}group-${r}.ttl`})()}}return n.\u0275fac=function(e){return new(e||n)(lt(Ca),lt(qh),lt(kd))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ax extends Zi{constructor(t,e){super("NotACryptpadUrlException",t,"Url has to include solidcryptpad",e)}}let dv=(()=>{class n{constructor(e,r,i,o){this.keyService=e,this.encryptionService=r,this.fileService=i,this.directoryService=o}encryptFile(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.keyService.getOrCreateKey(r),s=yield i.encryptionService.encryptBlob(e,o);return new Blob([s])})()}decryptFile(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.keyService.getKey(r);return i.decryptFileWithKey(e,o)})()}decryptFileWithKey(e,r){var i=this;return(0,Xe.Z)(function*(){return i.encryptionService.decryptAsBlob(yield e.text(),r).catch(Ac(`Could not decrypt ${e}`))})()}readAndDecryptFile(e){var r=this;return(0,Xe.Z)(function*(){if(!r.directoryService.isInEncryptedDirectory(e))throw new Ax(`Cannot encrypt ${e} if it is not in an encrypted directory`);const i=yield r.fileService.readFile(e);return r.decryptFile(i,e)})()}readAndDecryptFileWithKey(e,r){var i=this;return(0,Xe.Z)(function*(){if(!i.directoryService.isInEncryptedDirectory(e))throw new Ax(`Cannot encrypt ${e} if it is not in an encrypted directory`);const o=yield i.fileService.readFile(e);return i.decryptFileWithKey(o,r)})()}writeAndEncryptFile(e,r){var i=this;return(0,Xe.Z)(function*(){if(r=r.replace(/ /g,""),!i.directoryService.isInEncryptedDirectory(r))throw new Ax(`Cannot encrypt ${r} if it is not in an encrypted directory`);const o=yield i.encryptFile(e,r);return i.fileService.writeFile(o,r)})()}}return n.\u0275fac=function(e){return new(e||n)(lt(MR),lt(qh),lt(Ca),lt(kd))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W$=(()=>{class n{constructor(e,r,i,o){this.profileService=e,this.directoryService=r,this.fileEncryptionService=i,this.fileService=o}addLink(e,r){var i=this;return(0,Xe.Z)(function*(){if(!(yield i.sharedByMeIndexExists()))return void(yield i.instantiateSharedByMeIndexWithFirstEntry(e,r));const o=yield i.getAllSharedByMe();o.links.push({resourceName:e,link:r}),yield i.saveIndex(JSON.stringify(o))})()}instantiateSharedByMeIndexWithFirstEntry(e,r){var i=this;return(0,Xe.Z)(function*(){const o=JSON.stringify({links:[{resourceName:e,link:r}]});yield i.saveIndex(o)})()}getAllSharedByMe(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.fileEncryptionService.readAndDecryptFile(yield e.getIndexUrl());return JSON.parse(yield r.text())})()}removeLink(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.getAllSharedByMe();i.links.splice(i.links.findIndex(o=>o.link===e),1),yield r.saveIndex(JSON.stringify(i))})()}getIndexUrl(){var e=this;return(0,Xe.Z)(function*(){return(yield e.directoryService.getSharingDirectory())+"shared-by-me.json"})()}sharedByMeIndexExists(){var e=this;return(0,Xe.Z)(function*(){return e.fileService.resourceExists(yield e.getIndexUrl())})()}saveIndex(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.getIndexUrl(),o=new Blob([e],{type:"application/json"});yield r.fileEncryptionService.writeAndEncryptFile(o,i)})()}}return n.\u0275fac=function(e){return new(e||n)(lt(zw),lt(kd),lt(dv),lt(Ca))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IR=(()=>{class n{constructor(e,r,i,o,s){this.keyService=e,this.fileService=r,this.groupService=i,this.permissionService=o,this.sharedByMeService=s}createFileSharingLink(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.keyService.getKey(e),s=btoa(o),a=yield i.createSecretAppendableGroup();yield i.permissionService.setGroupPermissions(e,a,r);const l=i.toSharingLink({file:e,key:s,group:a}),c=e.substring(e.lastIndexOf("/")+1);return yield i.sharedByMeService.addLink(c,l),l})()}createFolderSharingLink(e,r){var i=this;return(0,Xe.Z)(function*(){const o=yield i.createSecretAppendableGroup(),{keystoreUrl:s,encryptionKey:a}=yield i.setupKeystoreForFolder(e,o,r.write||!1);yield i.permissionService.setGroupPermissions(e,o,r),yield i.permissionService.setGroupPermissionsForContainedResources(e,o,r);const l=i.toSharingLink({folder:e,group:o,keystore:s,keystoreEncryptionKey:a}),c=e.split("/")[e.split("/").length-2];return yield i.sharedByMeService.addLink(c,l),l})()}setupKeystoreForFolder(e,r,i){var o=this;return(0,Xe.Z)(function*(){const{keystoreUrl:s,encryptionKey:a}=yield o.keyService.getOrCreateFolderKeystore(e);return yield o.permissionService.setGroupPermissions(s,r,{read:!0,write:i}),{keystoreUrl:s,encryptionKey:a}})()}createSecretAppendableGroup(){var e=this;return(0,Xe.Z)(function*(){const r=yield e.groupService.createNewRandomGroup();return yield e.permissionService.setPublicPermissions(r,{read:!0,append:!0}),r})()}toSharingLink(e){const r=new URLSearchParams(e);return`${window.location.origin}/share?${r.toString()}`}deactivateLink(e){var r=this;return(0,Xe.Z)(function*(){const i=new URLSearchParams(e).get("group");yield r.fileService.deleteFile(i),yield r.sharedByMeService.removeLink(e)})()}}return n.\u0275fac=function(e){return new(e||n)(lt(MR),lt(Ca),lt(DCe),lt(Gw),lt(W$))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class TCe{constructor(t,e){this._document=e;const r=this._textarea=this._document.createElement("textarea"),i=r.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",r.setAttribute("aria-hidden","true"),r.value=t,this._document.body.appendChild(r)}copy(){const t=this._textarea;let e=!1;try{if(t){const r=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),r&&r.focus()}}catch(r){}return e}destroy(){const t=this._textarea;t&&(t.remove(),this._textarea=void 0)}}let RR=(()=>{class n{constructor(e){this._document=e}copy(e){const r=this.beginCopy(e),i=r.copy();return r.destroy(),i}beginCopy(e){return new TCe(e,this._document)}}return n.\u0275fac=function(e){return new(e||n)(lt(zn))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MCe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();const ICe=["input"],RCe=function(n){return{enterDuration:n}},OCe=["*"],PCe=new Ot("mat-checkbox-default-options",{providedIn:"root",factory:$$});function $$(){return{color:"accent",clickAction:"check-indeterminate"}}let FCe=0;const K$=$$(),NCe={provide:js,useExisting:ot(()=>OR),multi:!0};class LCe{}const BCe=Sb(Eh(du(Mp(class{constructor(n){this._elementRef=n}}))));let OR=(()=>{class n extends BCe{constructor(e,r,i,o,s,a,l){super(e),this._changeDetectorRef=r,this._focusMonitor=i,this._ngZone=o,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++FCe,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Mn,this.indeterminateChange=new Mn,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||K$,this.color=this.defaultColor=this._options.color||K$.color,this.tabIndex=parseInt(s)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=Mr(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){const r=Mr(e);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const r=Mr(e);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const r=e!=this._indeterminate;this._indeterminate=Mr(e),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let r=this._currentCheckState,i=this._elementRef.nativeElement;if(r!==e&&(this._currentAnimationClass.length>0&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(o)},1e3)})}}_emitChangeEvent(){const e=new LCe;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_onInputClick(e){var r;const i=null===(r=this._options)||void 0===r?void 0:r.clickAction;e.stopPropagation(),this.disabled||"noop"===i?!this.disabled&&"noop"===i&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==i&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,r){e?this._focusMonitor.focusVia(this._inputElement,e,r):this._inputElement.nativeElement.focus(r)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,r){if("NoopAnimations"===this._animationMode)return"";let i="";switch(e){case 0:if(1===r)i="unchecked-checked";else{if(3!=r)return"";i="unchecked-indeterminate"}break;case 2:i=1===r?"unchecked-checked":"unchecked-indeterminate";break;case 1:i=2===r?"checked-unchecked":"checked-indeterminate";break;case 3:i=1===r?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${i}`}_syncIndeterminate(e){const r=this._inputElement;r&&(r.nativeElement.indeterminate=e)}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Ni),xe(sd),xe(Vn),Zs("tabindex"),xe(Qa,8),xe(PCe,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-checkbox"]],viewQuery:function(e,r){if(1&e&&(Zr(ICe,5),Zr(hu,5)),2&e){let i;un(i=dn())&&(r._inputElement=i.first),un(i=dn())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(e,r){2&e&&(td("id",r.id),tr("tabindex",null)("aria-label",null)("aria-labelledby",null),br("mat-checkbox-indeterminate",r.indeterminate)("mat-checkbox-checked",r.checked)("mat-checkbox-disabled",r.disabled)("mat-checkbox-label-before","before"==r.labelPosition)("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[cn([NCe]),Ht],ngContentSelectors:OCe,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,r){if(1&e&&(no(),Le(0,"label",0,1)(2,"span",2)(3,"input",3,4),At("change",function(o){return r._onInteractionEvent(o)})("click",function(o){return r._onInputClick(o)}),Be(),Le(5,"span",5),qt(6,"span",6),Be(),qt(7,"span",7),Le(8,"span",8),Av(),Le(9,"svg",9),qt(10,"path",10),Be(),tS(),qt(11,"span",11),Be()(),Le(12,"span",12,13),At("cdkObserveContent",function(){return r._onLabelTextChange()}),Le(14,"span",14),nt(15,"\xa0"),Be(),ur(16),Be()()),2&e){const i=Al(1),o=Al(13);tr("for",r.inputId),it(2),br("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),it(1),ut("id",r.inputId)("required",r.required)("checked",r.checked)("disabled",r.disabled)("tabIndex",r.tabIndex),tr("value",r.value)("name",r.name)("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-checked",r._getAriaChecked())("aria-describedby",r.ariaDescribedby),it(2),ut("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Lm(19,RCe,"NoopAnimations"===r._animationMode?0:150))}},directives:[hu,nA],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),n})(),G$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})(),HCe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Ip,ir,nb,G$],ir,G$]}),n})();const VCe=["primaryValueBar"],zCe=Eh(class{constructor(n){this._elementRef=n}},"primary"),WCe=new Ot("mat-progress-bar-location",{providedIn:"root",factory:function $Ce(){const n=hm(zn),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),KCe=new Ot("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let GCe=0,Wg=(()=>{class n extends zCe{constructor(e,r,i,o,s,a){super(e),this._ngZone=r,this._animationMode=i,this._changeDetectorRef=a,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new Mn,this._animationEndSubscription=w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+GCe++;const l=o?o.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${l}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===i,s&&(s.color&&(this.color=this.defaultColor=s.color),this.mode=s.mode||this.mode)}get value(){return this._value}set value(e){var r;this._value=q$(Ap(e)||0),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(e){var r;this._bufferValue=q$(e||0),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=gu(e,"transitionend").pipe(si(r=>r.target===e)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Vn),xe(Qa,8),xe(WCe,8),xe(KCe,8),xe(Ni))},n.\u0275cmp=Jt({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(e,r){if(1&e&&Zr(VCe,5),2&e){let i;un(i=dn())&&(r._primaryValueBar=i.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,r){2&e&&(tr("aria-valuenow","indeterminate"===r.mode||"query"===r.mode?null:r.value)("mode",r.mode),br("_mat-animation-noopable",r._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[Ht],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,r){1&e&&(Le(0,"div",0),Av(),Le(1,"svg",1)(2,"defs")(3,"pattern",2),qt(4,"circle",3),Be()(),qt(5,"rect",4),Be(),tS(),qt(6,"div",5)(7,"div",6,7)(9,"div",8),Be()),2&e&&(it(3),ut("id",r.progressbarId),it(2),tr("fill",r._rectangleFillValue),it(1),ut("ngStyle",r._bufferTransform()),it(1),ut("ngStyle",r._primaryTransform()))},directives:[mE],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),n})();function q$(n,t=0,e=100){return Math.max(t,Math.min(e,n))}let qCe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Xs,ir],ir]}),n})();function JCe(n,t){1&n&&qt(0,"mat-progress-bar",10)}function ZCe(n,t){if(1&n){const e=Dr();Le(0,"div")(1,"div",2)(2,"section",3)(3,"h4"),nt(4,"What access would you like to grant your collaborators?"),Be(),Le(5,"p")(6,"mat-checkbox",4),nt(7,"Read"),Be()(),Le(8,"p")(9,"mat-checkbox",5),nt(10,"Write"),Be()()(),Le(11,"p"),nt(12),Le(13,"a",6),nt(14),Be()(),vt(15,JCe,1,0,"mat-progress-bar",7),Be(),Le(16,"div",8)(17,"button",9),At("click",function(){return In(e),_t().createLink()}),nt(18,"Create Link"),Be(),Le(19,"button",9),At("click",function(){return In(e),_t().cancel()}),nt(20,"Close"),Be()()()}if(2&n){const e=_t();it(2),ut("formGroup",e.access),it(10),Tr(" Your collaborators will be able to READ ",e.access.value.write?"and WRITE to ":""," "),it(1),ut("href",e.data.fileUrl,rh),it(1),Oi(e.data.fileUrl),it(1),ut("ngIf",e.loading)}}function YCe(n,t){if(1&n){const e=Dr();Le(0,"div")(1,"div",2)(2,"p"),nt(3," Here is your freshly baked link for sharing the file with your collaborators. "),Be(),Le(4,"p"),nt(5," Click on the link to copy it to your clipboard or use one of the buttons below. "),Be(),Le(6,"div",11),At("click",function(){return In(e),_t().copyLink()}),Le(7,"small",12),nt(8),Be()()(),Le(9,"div",8)(10,"button",9),At("click",function(){return In(e),_t().copyLink()}),nt(11,"Copy to clipboard"),Be(),Le(12,"button",9),At("click",function(){return In(e),_t().cancel()}),nt(13,"Close"),Be()()()}if(2&n){const e=_t();it(8),Tr(" ",e.link," ")}}let J$=(()=>{class n{constructor(e,r,i,o,s,a){this.formBuilder=e,this.dialogRef=r,this.linkSharingService=i,this.notificationService=o,this.clipboard=s,this.data=a,this.access=this.formBuilder.group({read:new gs({value:!0,disabled:!0}),write:!1}),this.loading=!1,this.link=void 0}createLink(){var e=this;return(0,Xe.Z)(function*(){const r=e.data.fileUrl,i=e.access.getRawValue();e.loading=!0;try{e.link=yield e.linkSharingService.createFileSharingLink(r,i)}catch(o){Ac("Error creating link")(o)}finally{e.loading=!1}})()}cancel(){this.dialogRef.close()}copyLink(){var e=this;return(0,Xe.Z)(function*(){null!=e.link&&e.clipboard.copy(e.link),e.notificationService.success({title:"Success!",message:"Link has been copied to your clipboard."})})()}}return n.\u0275fac=function(e){return new(e||n)(xe(RB),xe(ol),xe(IR),xe(pd),xe(RR),xe(kc))},n.\u0275cmp=Jt({type:n,selectors:[["app-link-share"]],decls:4,vars:2,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup"],["formControlName","read"],["formControlName","write"],[3,"href"],["mode","indeterminate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mode","indeterminate"],[2,"border","solid #e6964f","border-radius","10px",3,"click"],["data-cy","sharing-link",2,"width","450px","word-wrap","break-word","display","inline-block","padding","3px","color","gray"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Share file via link"),Be(),vt(2,ZCe,21,5,"div",1),vt(3,YCe,14,1,"div",1)),2&e&&(it(2),ut("ngIf",!r.link),it(1),ut("ngIf",r.link))},directives:[Eu,gi,Ad,pu,fd,OR,ta,Fp,Wg,Au,Qo],styles:[""]}),n})();var XCe=F(5495),QCe=F.n(XCe);let $g={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const tEe=/[&<>"']/,nEe=/[&<>"']/g,rEe=/[<>"']|&(?!#?\w+;)/,iEe=/[<>"']|&(?!#?\w+;)/g,oEe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Y$=n=>oEe[n];function Wo(n,t){if(t){if(tEe.test(n))return n.replace(nEe,Y$)}else if(rEe.test(n))return n.replace(iEe,Y$);return n}const sEe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function X$(n){return n.replace(sEe,(t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const aEe=/(^|[^\[])\^/g;function ui(n,t){n="string"==typeof n?n:n.source,t=t||"";const e={replace:(r,i)=>(i=(i=i.source||i).replace(aEe,"$1"),n=n.replace(r,i),e),getRegex:()=>new RegExp(n,t)};return e}const lEe=/[^\w:]/g,cEe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Q$(n,t,e){if(n){let r;try{r=decodeURIComponent(X$(e)).replace(lEe,"").toLowerCase()}catch(i){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!cEe.test(e)&&(e=function fEe(n,t){kx[" "+n]||(kx[" "+n]=uEe.test(n)?n+"/":Tx(n,"/",!0));const e=-1===(n=kx[" "+n]).indexOf(":");return"//"===t.substring(0,2)?e?t:n.replace(dEe,"$1")+t:"/"===t.charAt(0)?e?t:n.replace(hEe,"$1")+t:n+t}(t,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(r){return null}return e}const kx={},uEe=/^[^:]+:\/*[^/]*$/,dEe=/^([^:]+:)[\s\S]*$/,hEe=/^([^:]+:\/*[^/]*)[\s\S]*$/,Dx={exec:function(){}};function ql(n){let e,r,t=1;for(;t<arguments.length;t++)for(r in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function eK(n,t){const r=n.replace(/\|/g,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&"\\"===a[c];)l=!l;return l?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function Tx(n,t,e){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const o=n.charAt(r-i-1);if(o!==t||e){if(o===t||!e)break;i++}else i++}return n.slice(0,r-i)}function tK(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function nK(n,t){if(t<1)return"";let e="";for(;t>1;)1&t&&(e+=n),t>>=1,n+=n;return e+n}function rK(n,t,e,r){const i=t.href,o=t.title?Wo(t.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const a={type:"link",raw:e,href:i,title:o,text:s,tokens:r.inlineTokens(s,[])};return r.state.inLink=!1,a}return{type:"image",raw:e,href:i,title:o,text:Wo(s)}}class PR{constructor(t){this.options=t||$g}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Tx(r,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const r=e[0],i=function gEe(n,t){const e=n.match(/^(\s+)(?:```)/);if(null===e)return t;const r=e[1];return t.split("\n").map(i=>{const o=i.match(/^\s+/);if(null===o)return i;const[s]=o;return s.length>=r.length?i.slice(r.length):i}).join("\n")}(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim():e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){const o=Tx(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}const i={type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const r=e[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r,i,o,s,a,l,c,d,E,U,W,ne,Ce=e[1].trim();const Pe=Ce.length>1,Qe={type:"list",raw:"",ordered:Pe,start:Pe?+Ce.slice(0,-1):"",loose:!1,items:[]};Ce=Pe?`\\d{1,9}\\${Ce.slice(-1)}`:`\\${Ce}`,this.options.pedantic&&(Ce=Pe?Ce:"[*+-]");const je=new RegExp(`^( {0,3}${Ce})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;t&&(ne=!1,(e=je.exec(t))&&!this.rules.block.hr.test(t));){if(r=e[0],t=t.substring(r.length),d=e[2].split("\n",1)[0],E=t.split("\n",1)[0],this.options.pedantic?(s=2,W=d.trimLeft()):(s=e[2].search(/[^ ]/),s=s>4?1:s,W=d.slice(s),s+=e[1].length),l=!1,!d&&/^ *$/.test(E)&&(r+=E+"\n",t=t.substring(E.length+1),ne=!0),!ne){const yt=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),Ct=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);for(;t&&(U=t.split("\n",1)[0],d=U,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!yt.test(d)&&!Ct.test(t));){if(d.search(/[^ ]/)>=s||!d.trim())W+="\n"+d.slice(s);else{if(l)break;W+="\n"+d}!l&&!d.trim()&&(l=!0),r+=U+"\n",t=t.substring(U.length+1)}}Qe.loose||(c?Qe.loose=!0:/\n *\n *$/.test(r)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(W),i&&(o="[ ] "!==i[0],W=W.replace(/^\[[ xX]\] +/,""))),Qe.items.push({type:"list_item",raw:r,task:!!i,checked:o,loose:!1,text:W}),Qe.raw+=r}Qe.items[Qe.items.length-1].raw=r.trimRight(),Qe.items[Qe.items.length-1].text=W.trimRight(),Qe.raw=Qe.raw.trimRight();const at=Qe.items.length;for(a=0;a<at;a++){this.lexer.state.top=!1,Qe.items[a].tokens=this.lexer.blockTokens(Qe.items[a].text,[]);const yt=Qe.items[a].tokens.filter(Vt=>"space"===Vt.type),Ct=yt.every(Vt=>{const yn=Vt.raw.split("");let Bn=0;for(const Qn of yn)if("\n"===Qn&&(Bn+=1),Bn>1)return!0;return!1});!Qe.loose&&yt.length&&Ct&&(Qe.loose=!0,Qe.items[a].loose=!0)}return Qe}}html(t){const e=this.rules.block.html.exec(t);if(e){const r={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};return this.options.sanitize&&(r.type="paragraph",r.text=this.options.sanitizer?this.options.sanitizer(e[0]):Wo(e[0]),r.tokens=[],this.lexer.inline(r.text,r.tokens)),r}}def(t){const e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}table(t){const e=this.rules.block.table.exec(t);if(e){const r={type:"table",header:eK(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=e[0];let o,s,a,l,i=r.align.length;for(o=0;o<i;o++)r.align[o]=/^ *-+: *$/.test(r.align[o])?"right":/^ *:-+: *$/.test(r.align[o])?"center":/^ *:-+ *$/.test(r.align[o])?"left":null;for(i=r.rows.length,o=0;o<i;o++)r.rows[o]=eK(r.rows[o],r.header.length).map(c=>({text:c}));for(i=r.header.length,s=0;s<i;s++)r.header[s].tokens=[],this.lexer.inlineTokens(r.header[s].text,r.header[s].tokens);for(i=r.rows.length,s=0;s<i;s++)for(l=r.rows[s],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return r}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e){const r={type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const r={type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}text(t){const e=this.rules.block.text.exec(t);if(e){const r={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:Wo(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Wo(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=Tx(r.slice(0,-1),"\\");if((r.length-s.length)%2==0)return}else{const s=function pEe(n,t){if(-1===n.indexOf(t[1]))return-1;const e=n.length;let r=0,i=0;for(;i<e;i++)if("\\"===n[i])i++;else if(n[i]===t[0])r++;else if(n[i]===t[1]&&(r--,r<0))return i;return-1}(e[2],"()");if(s>-1){const l=(0===e[0].indexOf("!")?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),rK(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i||!i.href){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return rK(r,i,r[0],this.lexer)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrong.lDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const o=i[1]||i[2]||"";if(!o||o&&(""===r||this.rules.inline.punctuation.exec(r))){const s=i[0].length-1;let a,l,c=s,d=0;const E="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(E.lastIndex=0,e=e.slice(-1*t.length+s);null!=(i=E.exec(e));){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}if((i[5]||i[6])&&s%3&&!((s+l)%3)){d+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+d),Math.min(s,l)%2){const W=t.slice(1,s+i.index+l);return{type:"em",raw:t.slice(0,s+i.index+l+1),text:W,tokens:this.lexer.inlineTokens(W,[])}}const U=t.slice(2,s+i.index+l-1);return{type:"strong",raw:t.slice(0,s+i.index+l+1),text:U,tokens:this.lexer.inlineTokens(U,[])}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=Wo(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(t,e){const r=this.rules.inline.autolink.exec(t);if(r){let i,o;return"@"===r[2]?(i=Wo(this.options.mangle?e(r[1]):r[1]),o="mailto:"+i):(i=Wo(r[1]),o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(t,e){let r;if(r=this.rules.inline.url.exec(t)){let i,o;if("@"===r[2])i=Wo(this.options.mangle?e(r[0]):r[0]),o="mailto:"+i;else{let s;do{s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(s!==r[0]);i=Wo(r[0]),o="www."===r[1]?"http://"+i:i}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t,e){const r=this.rules.inline.text.exec(t);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Wo(r[0]):r[0]:Wo(this.options.smartypants?e(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const Pn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Dx,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Pn.def=ui(Pn.def).replace("label",Pn._label).replace("title",Pn._title).getRegex(),Pn.bullet=/(?:[*+-]|\d{1,9}[.)])/,Pn.listItemStart=ui(/^( *)(bull) */).replace("bull",Pn.bullet).getRegex(),Pn.list=ui(Pn.list).replace(/bull/g,Pn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Pn.def.source+")").getRegex(),Pn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Pn.html=ui(Pn.html,"i").replace("comment",Pn._comment).replace("tag",Pn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Pn.paragraph=ui(Pn._paragraph).replace("hr",Pn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn._tag).getRegex(),Pn.blockquote=ui(Pn.blockquote).replace("paragraph",Pn.paragraph).getRegex(),Pn.normal=ql({},Pn),Pn.gfm=ql({},Pn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Pn.gfm.table=ui(Pn.gfm.table).replace("hr",Pn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn._tag).getRegex(),Pn.gfm.paragraph=ui(Pn._paragraph).replace("hr",Pn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Pn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pn._tag).getRegex(),Pn.pedantic=ql({},Pn.normal,{html:ui("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Pn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dx,paragraph:ui(Pn.normal._paragraph).replace("hr",Pn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Pn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const fn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Dx,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Dx,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function mEe(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function iK(n){let e,r,t="";const i=n.length;for(e=0;e<i;e++)r=n.charCodeAt(e),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t}fn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",fn.punctuation=ui(fn.punctuation).replace(/punctuation/g,fn._punctuation).getRegex(),fn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,fn.escapedEmSt=/\\\*|\\_/g,fn._comment=ui(Pn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),fn.emStrong.lDelim=ui(fn.emStrong.lDelim).replace(/punct/g,fn._punctuation).getRegex(),fn.emStrong.rDelimAst=ui(fn.emStrong.rDelimAst,"g").replace(/punct/g,fn._punctuation).getRegex(),fn.emStrong.rDelimUnd=ui(fn.emStrong.rDelimUnd,"g").replace(/punct/g,fn._punctuation).getRegex(),fn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,fn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,fn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,fn.autolink=ui(fn.autolink).replace("scheme",fn._scheme).replace("email",fn._email).getRegex(),fn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,fn.tag=ui(fn.tag).replace("comment",fn._comment).replace("attribute",fn._attribute).getRegex(),fn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,fn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,fn.link=ui(fn.link).replace("label",fn._label).replace("href",fn._href).replace("title",fn._title).getRegex(),fn.reflink=ui(fn.reflink).replace("label",fn._label).replace("ref",Pn._label).getRegex(),fn.nolink=ui(fn.nolink).replace("ref",Pn._label).getRegex(),fn.reflinkSearch=ui(fn.reflinkSearch,"g").replace("reflink",fn.reflink).replace("nolink",fn.nolink).getRegex(),fn.normal=ql({},fn),fn.pedantic=ql({},fn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ui(/^!?\[(label)\]\((.*?)\)/).replace("label",fn._label).getRegex(),reflink:ui(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fn._label).getRegex()}),fn.gfm=ql({},fn.normal,{escape:ui(fn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),fn.gfm.url=ui(fn.gfm.url,"i").replace("email",fn.gfm._extended_email).getRegex(),fn.breaks=ql({},fn.gfm,{br:ui(fn.br).replace("{2,}","*").getRegex(),text:ui(fn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class Vu{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||$g,this.options.tokenizer=this.options.tokenizer||new PR,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Pn.normal,inline:fn.normal};this.options.pedantic?(e.block=Pn.pedantic,e.inline=fn.pedantic):this.options.gfm&&(e.block=Pn.gfm,e.inline=this.options.breaks?fn.breaks:fn.gfm),this.tokenizer.rules=e}static get rules(){return{block:Pn,inline:fn}}static lex(t,e){return new Vu(e).lex(t)}static lexInline(t,e){return new Vu(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let r,i,o,s;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(r=a.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),1===r.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=t.slice(1);let c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},l),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=e[e.length-1],s&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),s=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,e}inline(t,e){this.inlineQueue.push({src:t,tokens:e})}inlineTokens(t,e=[]){let r,i,o,a,l,c,s=t;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+nK("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+nK("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(r=d.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t,iK)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,iK))){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const E=t.slice(1);let U;this.options.extensions.startInline.forEach(function(W){U=W.call({lexer:this},E),"number"==typeof U&&U>=0&&(d=Math.min(d,U))}),d<1/0&&d>=0&&(o=t.substring(0,d+1))}if(r=this.tokenizer.inlineText(o,mEe)){t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),l=!0,i=e[e.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return e}}class Mx{constructor(t){this.options=t||$g}code(t,e,r){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(t,i);null!=o&&o!==t&&(r=!0,t=o)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+Wo(i,!0)+'">'+(r?t:Wo(t,!0))+"</code></pre>\n":"<pre><code>"+(r?t:Wo(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,r,i){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+i.slug(r)}">${t}</h${e}>\n`:`<h${e}>${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,r){const i=e?"ol":"ul";return"<"+i+(e&&1!==r?' start="'+r+'"':"")+">\n"+t+"</"+i+">\n"}listitem(t){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){if(null===(t=Q$(this.options.sanitize,this.options.baseUrl,t)))return r;let i='<a href="'+Wo(t)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+r+"</a>",i}image(t,e,r){if(null===(t=Q$(this.options.sanitize,this.options.baseUrl,t)))return r;let i=`<img src="${t}" alt="${r}"`;return e&&(i+=` title="${e}"`),i+=this.options.xhtml?"/>":">",i}text(t){return t}}class oK{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}}class sK{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let r=t,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[t];do{i++,r=t+"-"+i}while(this.seen.hasOwnProperty(r))}return e||(this.seen[t]=i,this.seen[r]=0),r}slug(t,e={}){const r=this.serialize(t);return this.getNextSafeSlug(r,e.dryrun)}}class zu{constructor(t){this.options=t||$g,this.options.renderer=this.options.renderer||new Mx,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new oK,this.slugger=new sK}static parse(t,e){return new zu(e).parse(t)}static parseInline(t,e){return new zu(e).parseInline(t)}parse(t,e=!0){let i,o,s,a,l,c,d,E,U,W,ne,Ce,Pe,Qe,je,at,yt,Ct,Vt,r="";const yn=t.length;for(i=0;i<yn;i++)if(W=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[W.type]&&(Vt=this.options.extensions.renderers[W.type].call({parser:this},W),!1!==Vt||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(W.type)))r+=Vt||"";else switch(W.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(W.tokens),W.depth,X$(this.parseInline(W.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(W.text,W.lang,W.escaped);continue;case"table":for(E="",d="",a=W.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(W.header[o].tokens),{header:!0,align:W.align[o]});for(E+=this.renderer.tablerow(d),U="",a=W.rows.length,o=0;o<a;o++){for(c=W.rows[o],d="",l=c.length,s=0;s<l;s++)d+=this.renderer.tablecell(this.parseInline(c[s].tokens),{header:!1,align:W.align[s]});U+=this.renderer.tablerow(d)}r+=this.renderer.table(E,U);continue;case"blockquote":U=this.parse(W.tokens),r+=this.renderer.blockquote(U);continue;case"list":for(ne=W.ordered,Ce=W.start,Pe=W.loose,a=W.items.length,U="",o=0;o<a;o++)je=W.items[o],at=je.checked,yt=je.task,Qe="",je.task&&(Ct=this.renderer.checkbox(at),Pe?je.tokens.length>0&&"paragraph"===je.tokens[0].type?(je.tokens[0].text=Ct+" "+je.tokens[0].text,je.tokens[0].tokens&&je.tokens[0].tokens.length>0&&"text"===je.tokens[0].tokens[0].type&&(je.tokens[0].tokens[0].text=Ct+" "+je.tokens[0].tokens[0].text)):je.tokens.unshift({type:"text",text:Ct}):Qe+=Ct),Qe+=this.parse(je.tokens,Pe),U+=this.renderer.listitem(Qe,yt,at);r+=this.renderer.list(U,ne,Ce);continue;case"html":r+=this.renderer.html(W.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(W.tokens));continue;case"text":for(U=W.tokens?this.parseInline(W.tokens):W.text;i+1<yn&&"text"===t[i+1].type;)W=t[++i],U+="\n"+(W.tokens?this.parseInline(W.tokens):W.text);r+=e?this.renderer.paragraph(U):U;continue;default:{const Bn='Token with "'+W.type+'" type was not found.';if(this.options.silent)return void console.error(Bn);throw new Error(Bn)}}return r}parseInline(t,e){e=e||this.renderer;let i,o,s,r="";const a=t.length;for(i=0;i<a;i++)if(o=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))r+=s||"";else switch(o.type){case"escape":case"text":r+=e.text(o.text);break;case"html":r+=e.html(o.text);break;case"link":r+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break;case"image":r+=e.image(o.href,o.title,o.text);break;case"strong":r+=e.strong(this.parseInline(o.tokens,e));break;case"em":r+=e.em(this.parseInline(o.tokens,e));break;case"codespan":r+=e.codespan(o.text);break;case"br":r+=e.br();break;case"del":r+=e.del(this.parseInline(o.tokens,e));break;default:{const l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(l);throw new Error(l)}}return r}}function Ln(n,t,e){if(null==n)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof n)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if("function"==typeof t&&(e=t,t=null),tK(t=ql({},Ln.defaults,t||{})),e){const r=t.highlight;let i;try{i=Vu.lex(n,t)}catch(a){return e(a)}const o=function(a){let l;if(!a)try{t.walkTokens&&Ln.walkTokens(i,t.walkTokens),l=zu.parse(i,t)}catch(c){a=c}return t.highlight=r,a?e(a):e(null,l)};if(!r||r.length<3||(delete t.highlight,!i.length))return o();let s=0;return Ln.walkTokens(i,function(a){"code"===a.type&&(s++,setTimeout(()=>{r(a.text,a.lang,function(l,c){if(l)return o(l);null!=c&&c!==a.text&&(a.text=c,a.escaped=!0),s--,0===s&&o()})},0))}),void(0===s&&o())}try{const r=Vu.lex(n,t);return t.walkTokens&&Ln.walkTokens(r,t.walkTokens),zu.parse(r,t)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Wo(r.message+"",!0)+"</pre>";throw r}}Ln.options=Ln.setOptions=function(n){return ql(Ln.defaults,n),function eEe(n){$g=n}(Ln.defaults),Ln},Ln.getDefaults=function Z$(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Ln.defaults=$g,Ln.use=function(...n){const t=ql({},...n),e=Ln.defaults.extensions||{renderers:{},childTokens:{}};let r;n.forEach(i=>{if(i.extensions&&(r=!0,i.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const s=e.renderers?e.renderers[o.name]:null;e.renderers[o.name]=s?function(...a){let l=o.renderer.apply(this,a);return!1===l&&(l=s.apply(this,a)),l}:o.renderer}if(o.tokenizer){if(!o.level||"block"!==o.level&&"inline"!==o.level)throw new Error("extension level must be 'block' or 'inline'");e[o.level]?e[o.level].unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&("block"===o.level?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:"inline"===o.level&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}o.childTokens&&(e.childTokens[o.name]=o.childTokens)})),i.renderer){const o=Ln.defaults.renderer||new Mx;for(const s in i.renderer){const a=o[s];o[s]=(...l)=>{let c=i.renderer[s].apply(o,l);return!1===c&&(c=a.apply(o,l)),c}}t.renderer=o}if(i.tokenizer){const o=Ln.defaults.tokenizer||new PR;for(const s in i.tokenizer){const a=o[s];o[s]=(...l)=>{let c=i.tokenizer[s].apply(o,l);return!1===c&&(c=a.apply(o,l)),c}}t.tokenizer=o}if(i.walkTokens){const o=Ln.defaults.walkTokens;t.walkTokens=function(s){i.walkTokens.call(this,s),o&&o.call(this,s)}}r&&(t.extensions=e),Ln.setOptions(t)})},Ln.walkTokens=function(n,t){for(const e of n)switch(t.call(Ln,e),e.type){case"table":for(const r of e.header)Ln.walkTokens(r.tokens,t);for(const r of e.rows)for(const i of r)Ln.walkTokens(i.tokens,t);break;case"list":Ln.walkTokens(e.items,t);break;default:Ln.defaults.extensions&&Ln.defaults.extensions.childTokens&&Ln.defaults.extensions.childTokens[e.type]?Ln.defaults.extensions.childTokens[e.type].forEach(function(r){Ln.walkTokens(e[r],t)}):e.tokens&&Ln.walkTokens(e.tokens,t)}},Ln.parseInline=function(n,t){if(null==n)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof n)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");tK(t=ql({},Ln.defaults,t||{}));try{const e=Vu.lexInline(n,t);return t.walkTokens&&Ln.walkTokens(e,t.walkTokens),zu.parseInline(e,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Wo(e.message+"",!0)+"</pre>";throw e}},Ln.Parser=zu,Ln.parser=zu.parse,Ln.Renderer=Mx,Ln.TextRenderer=oK,Ln.Lexer=Vu,Ln.lexer=Vu.lex,Ln.Tokenizer=PR,Ln.Slugger=sK,Ln.parse=Ln;const yEe=["thumbContainer"],vEe=["toggleBar"],_Ee=["input"],bEe=function(n){return{enterDuration:n}},wEe=["*"],xEe=new Ot("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let SEe=0;const CEe={provide:js,useExisting:ot(()=>FR),multi:!0};class EEe{constructor(t,e){this.source=t,this.checked=e}}const AEe=Sb(Eh(du(Mp(class{constructor(n){this._elementRef=n}}))));let FR=(()=>{class n extends AEe{constructor(e,r,i,o,s,a){super(e),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=s,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++SEe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Mn,this.toggleChange=new Mn,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=s.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(e){this._required=Mr(e)}get checked(){return this._checked}set checked(e){this._checked=Mr(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,r){r?this._focusMonitor.focusVia(this._inputElement,r,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new EEe(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(sd),xe(Ni),Zs("tabindex"),xe(xEe),xe(Qa,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,r){if(1&e&&(Zr(yEe,5),Zr(vEe,5),Zr(_Ee,5)),2&e){let i;un(i=dn())&&(r._thumbEl=i.first),un(i=dn())&&(r._thumbBarEl=i.first),un(i=dn())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,r){2&e&&(td("id",r.id),tr("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),br("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[cn([CEe]),Ht],ngContentSelectors:wEe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,r){if(1&e&&(no(),Le(0,"label",0,1)(2,"span",2,3)(4,"input",4,5),At("change",function(o){return r._onChangeEvent(o)})("click",function(o){return r._onInputClick(o)}),Be(),Le(6,"span",6,7),qt(8,"span",8),Le(9,"span",9),qt(10,"span",10),Be()()(),Le(11,"span",11,12),At("cdkObserveContent",function(){return r._onLabelTextChange()}),Le(13,"span",13),nt(14,"\xa0"),Be(),ur(15),Be()()),2&e){const i=Al(1),o=Al(12);tr("for",r.inputId),it(2),br("mat-slide-toggle-bar-no-side-margin",!o.textContent||!o.textContent.trim()),it(2),ut("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),tr("name",r.name)("aria-checked",r.checked)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),it(5),ut("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Lm(18,bEe,r._noopAnimations?0:150))}},directives:[hu,nA],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),aK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})(),TEe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[aK,Ip,ir,nb],aK,ir]}),n})();function MEe(n,t){1&n&&(Le(0,"small",5),nt(1,"This file has been shared with you by another user."),Be())}function IEe(n,t){1&n&&qt(0,"mat-progress-bar",6)}function REe(n,t){if(1&n){const e=Dr();Le(0,"button",14),At("click",function(){return In(e),_t(3).shareFile()}),nt(1," Share "),Be()}}function OEe(n,t){if(1&n){const e=Dr();Le(0,"button",15),At("click",function(){return In(e),_t(3).closeFile(!1)}),nt(1," Close file without saving. "),Be()}}function PEe(n,t){if(1&n){const e=Dr();Le(0,"div")(1,"div",7),qt(2,"ngx-editor-menu",8),Le(3,"ngx-editor",9),At("ngModelChange",function(i){return In(e),_t(2).html=i}),Be()(),qt(4,"br"),Le(5,"button",10),At("click",function(){return In(e),_t(2).closeFile(!0)}),nt(6," Save and close file "),Be(),vt(7,REe,2,0,"button",11),Le(8,"mat-slide-toggle",12),At("ngModelChange",function(i){return In(e),_t(2).autoSave=i}),nt(9,"Auto-Save "),Be(),vt(10,OEe,2,0,"button",13),Be()}if(2&n){const e=_t(2);it(2),ut("editor",e.editor),it(1),ut("editor",e.editor)("ngModel",e.html)("disabled",!1)("placeholder","Type here..."),it(4),ut("ngIf",!e.sharedFile),it(1),ut("ngModel",e.autoSave),it(2),ut("ngIf",!e.autoSave)}}function FEe(n,t){if(1&n&&(Le(0,"div")(1,"h3"),nt(2," You are editing "),Le(3,"i"),nt(4),Be(),nt(5,"! "),Be(),vt(6,MEe,2,0,"small",3),vt(7,IEe,1,0,"mat-progress-bar",4),vt(8,PEe,11,8,"div",2),Be()),2&n){const e=_t();it(4),Oi(e.fileUrl),it(2),ut("ngIf",e.sharedFile),it(1),ut("ngIf",!e.fileLoaded),it(1),ut("ngIf",e.fileLoaded)}}const NEe=function(){return["/files"]};function LEe(n,t){1&n&&(Le(0,"div")(1,"h3"),nt(2," No filename given. Go to "),Le(3,"a",16),nt(4,"Files"),Be(),nt(5," to select an file to edit. "),Be()()),2&n&&(it(3),ut("routerLink",Nm(1,NEe)))}let BEe=(()=>{class n{constructor(e,r,i,o,s,a,l,c,d,E){this.profileService=e,this.directoryService=r,this.fileEncryptionService=i,this.solidFileHandlerService=o,this.keyService=s,this.route=a,this.router=l,this.dialog=c,this.sanitizer=d,this.notificationService=E,this.html="",this.readyForSave=!1,this.baseUrl="",this.fileUrl="",this.sharedKey="",this.errorMsg="",this.autoSave=!0,this.sharedFile=!1,this.fileLoaded=!1,this.fileType="text/plain"}ngOnInit(){this.setupBaseUrl()}setupBaseUrl(){this.directoryService.getRootDirectory().then(e=>{this.baseUrl=e,this.setupSharedFileKey(),this.setupFilenameFromParams(),this.setSharedFile()})}setupFilenameFromParams(){var e=this;this.route.queryParams.subscribe(function(){var r=(0,Xe.Z)(function*(i){e.fileUrl=i.file;const o=i.fileToCreate;o&&(e.fileUrl=o,yield e.saveFile()),e.fileUrl?e.setupEditor():(e.closeEditor(),e.notificationService.error({title:"",message:"No Filename given. Select a file to edit it."}),e.router.navigate(["/files"]))});return function(i){return r.apply(this,arguments)}}())}setupSharedFileKey(){this.route.queryParams.subscribe(e=>{const r=e.key;r&&(this.sharedKey=atob(r))})}setupEditor(){var e=this;return(0,Xe.Z)(function*(){e.closeEditor(),e.ydoc=new ff,e.provider=new XSe(e.getRoomName(),e.ydoc,{password:yield e.getRoomPassword()}),e.profileService.getUserName().then(r=>{e.setUsername(r)}),e.xmlFragement=e.ydoc.getXmlFragment("prosemirror"),e.editor=new qwe({history:!1,plugins:[hCe(e.xmlFragement),SCe(e.provider.awareness),kCe(),P0({"Mod-z":CCe,"Mod-y":z$,"Mod-Shift-z":z$})]}),gu(e.ydoc,"update").pipe(tA(1e3),si(()=>e.readyForSave&&e.autoSave)).subscribe(()=>e.saveFile()),e.loadFile()})()}saveFile(){var e=this;return(0,Xe.Z)(function*(){const r=e.fileUrl,i=e.sanitizeHtmlContent(e.html),o=new Blob([i],{type:e.fileType});yield e.fileEncryptionService.writeAndEncryptFile(o,r)})()}handleReadFile(e){var r;this.fileType=e.type,(""===this.fileType||"application/octet-stream"===this.fileType)&&(this.fileType=null!==(r=this.solidFileHandlerService.guessContentType(this.fileUrl))&&void 0!==r?r:"text/plain"),e.text().then(i=>{i=Ln(i),this.html=this.sanitizeHtmlContent(i),this.readyForSave=!0,this.fileLoaded=!0,this.editor.commands.focus().exec()})}handleReadFileError(e){if(e instanceof Ww)return console.debug("file not found, creating file"),this.readyForSave=!0,void this.saveFile();this.errorMsg="Error while opening your file: "+e,console.error("couldnt load file",e)}setUsername(e){const i=(new(QCe())).hex(e);this.provider.awareness.setLocalStateField("user",{color:i,name:e})}loadFile(){this.sharedKey?this.fileEncryptionService.readAndDecryptFileWithKey(this.fileUrl,this.sharedKey).then(e=>{this.fileType=e.type,this.handleReadFile(e)},e=>{this.handleReadFileError(e)}):this.fileEncryptionService.readAndDecryptFile(this.fileUrl).then(e=>{this.handleReadFile(e)},e=>{this.handleReadFileError(e)})}closeFile(e){var r=this;return(0,Xe.Z)(function*(){r.fileLoaded=!1,r.readyForSave=!1,e&&(yield r.saveFile(),r.notificationService.success({title:"",message:"File saved!"})),r.closeEditor(),r.html="",r.router.navigate(["/preview"],{queryParams:{url:r.fileUrl}})})()}shareFile(){var e=this;return(0,Xe.Z)(function*(){e.dialog.open(J$,{data:{fileUrl:e.fileUrl}})})()}closeEditor(){var e,r,i;this.errorMsg="",null===(e=this.provider)||void 0===e||e.disconnect(),null===(r=this.ydoc)||void 0===r||r.destroy(),null===(i=this.editor)||void 0===i||i.destroy()}getRoomName(){return"room-"+this.fileUrl}getRoomPassword(){return this.keyService.getKey(this.fileUrl)}sanitizeHtmlContent(e){let r=this.sanitizer.sanitize(kr.HTML,e);return null===r&&(r=""),r}setSharedFile(){this.sharedFile=!this.fileUrl.includes(this.baseUrl)}ngOnDestroy(){this.closeEditor()}}return n.\u0275fac=function(e){return new(e||n)(xe(zw),xe(kd),xe(dv),xe(Ca),xe(MR),xe(Il),xe(Ei),xe(Zh),xe(fc),xe(pd))},n.\u0275cmp=Jt({type:n,selectors:[["app-text-editor"]],decls:6,vars:3,consts:[[1,"container"],[1,"content"],[4,"ngIf"],["style","color: #e38c45",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[2,"color","#e38c45"],["mode","indeterminate"],[1,"editor"],[3,"editor"],[3,"editor","ngModel","disabled","placeholder","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"editor-button",3,"click"],["mat-raised-button","","type","button","color","primary","class","editor-button",3,"click",4,"ngIf"],[1,"editor-button",3,"ngModel","ngModelChange"],["color","warn","mat-raised-button","","type","button","class","editor-button",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","primary",1,"editor-button",3,"click"],["color","warn","mat-raised-button","","type","button",1,"editor-button",3,"click"],[3,"routerLink"]],template:function(e,r){1&e&&(Le(0,"div",0)(1,"div",1)(2,"h3"),nt(3),Be(),vt(4,FEe,9,4,"div",2),vt(5,LEe,6,2,"div",2),Be()()),2&e&&(it(3),Oi(r.errorMsg),it(1),ut("ngIf",r.fileUrl),it(1),ut("ngIf",!r.fileUrl))},directives:[gi,Wg,Iwe,Ebe,ta,Pp,Qo,FR,ly],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:900px;min-width:320px;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}  .NgxEditor{max-height:75vh;min-height:75vh;overflow-y:scroll}  .NgxEditor__Content{min-height:400px}.editor-button[_ngcontent-%COMP%]{margin-right:7px;margin-left:7px;margin-bottom:7px}"]}),n})();class jEe extends class UEe{constructor(){this.expansionModel=new rI(!0)}toggle(t){this.expansionModel.toggle(this._trackByValue(t))}expand(t){this.expansionModel.select(this._trackByValue(t))}collapse(t){this.expansionModel.deselect(this._trackByValue(t))}isExpanded(t){return this.expansionModel.isSelected(this._trackByValue(t))}toggleDescendants(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}collapseAll(){this.expansionModel.clear()}expandDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.select(...e.map(r=>this._trackByValue(r)))}collapseDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.deselect(...e.map(r=>this._trackByValue(r)))}_trackByValue(t){return this.trackBy?this.trackBy(t):t}}{constructor(t,e,r){super(),this.getLevel=t,this.isExpandable=e,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(t){const r=[];for(let i=this.dataNodes.indexOf(t)+1;i<this.dataNodes.length&&this.getLevel(t)<this.getLevel(this.dataNodes[i]);i++)r.push(this.dataNodes[i]);return r}expandAll(){this.expansionModel.select(...this.dataNodes.map(t=>this._trackByValue(t)))}}const Ix=new Ot("CDK_TREE_NODE_OUTLET_NODE");let hv=(()=>{class n{constructor(e,r){this.viewContainer=e,this._node=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(Ix,8))},n.\u0275dir=bt({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class HEe{constructor(t){this.$implicit=t}}let Rx=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),Wu=(()=>{class n{constructor(e,r){this._differs=e,this._changeDetectorRef=r,this._onDestroy=new Ne,this._levels=new Map,this.viewChange=new Bs({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(r=>!r.when);this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;qw(this._dataSource)?e=this._dataSource.connect(this):iI(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=An(this._dataSource)),e&&(this._dataSubscription=e.pipe(Ji(this._onDestroy)).subscribe(r=>this.renderNodeChanges(r)))}renderNodeChanges(e,r=this._dataDiffer,i=this._nodeOutlet.viewContainer,o){const s=r.diff(e);!s||(s.forEachOperation((a,l,c)=>{if(null==a.previousIndex)this.insertNode(e[c],c,i,o);else if(null==c)i.remove(l),this._levels.delete(a.item);else{const d=i.get(l);i.move(d,c)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,r){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(o=>o.when&&o.when(r,e))||this._defaultNodeDef}insertNode(e,r,i,o){const s=this._getNodeDef(e,r),a=new HEe(e);a.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==o&&this._levels.has(o)?this._levels.get(o)+1:0,this._levels.set(e,a.level),(i||this._nodeOutlet.viewContainer).createEmbeddedView(s.template,a,r),jc.mostRecentTreeNode&&(jc.mostRecentTreeNode.data=e)}}return n.\u0275fac=function(e){return new(e||n)(xe(Ka),xe(Ni))},n.\u0275cmp=Jt({type:n,selectors:[["cdk-tree"]],contentQueries:function(e,r,i){if(1&e&&pr(i,Rx,5),2&e){let o;un(o=dn())&&(r._nodeDefs=o)}},viewQuery:function(e,r){if(1&e&&Zr(hv,7),2&e){let i;un(i=dn())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,r){1&e&&_a(0,0)},directives:[hv],encapsulation:2}),n})(),jc=(()=>{class n{constructor(e,r){this._elementRef=e,this._tree=r,this._destroyed=new Ne,this._dataChanges=new Ne,n.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function VEe(n){let t=n.parentElement;for(;t&&!zEe(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?Ap(t.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.mostRecentTreeNode=null,n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Wu))},n.\u0275dir=bt({type:n,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(e,r){2&e&&tr("aria-expanded",r.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n})();function zEe(n){const t=n.classList;return!(!(null==t?void 0:t.contains("cdk-nested-tree-node"))&&!(null==t?void 0:t.contains("cdk-tree")))}const WEe=/([A-Za-z%]+)$/;let LR=(()=>{class n{constructor(e,r,i,o){this._treeNode=e,this._tree=r,this._element=i,this._dir=o,this._destroyed=new Ne,this.indentUnits="px",this._indent=40,this._setPadding(),o&&o.change.pipe(Ji(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,r=null==this._level?e:this._level;return"number"==typeof r?`${r*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const r=this._paddingIndent();if(r!==this._currentPadding||e){const i=this._element.nativeElement,o=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",s="paddingLeft"===o?"paddingRight":"paddingLeft";i.style[o]=r||"",i.style[s]="",this._currentPadding=r}}_setLevelInput(e){this._level=Ap(e,null),this._setPadding()}_setIndentInput(e){let r=e,i="px";if("string"==typeof e){const o=e.split(WEe);r=o[0],i=o[1]||i}this.indentUnits=i,this._indent=Ap(r),this._setPadding()}}return n.\u0275fac=function(e){return new(e||n)(xe(jc),xe(Wu),xe(vn),xe(id,8))},n.\u0275dir=bt({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),BR=(()=>{class n{constructor(e,r){this._tree=e,this._treeNode=r,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=Mr(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(xe(Wu),xe(jc))},n.\u0275dir=bt({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,r){1&e&&At("click",function(o){return r._toggle(o)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),$Ee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})(),KEe=(()=>{class n{constructor(){this.fileOver=!1,this.fileDropped=new Mn}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}onDrop(e){if(e.preventDefault(),e.stopPropagation(),this.fileOver=!1,null!=e.dataTransfer){const r=e.dataTransfer.files;r.length>0&&this.fileDropped.emit(r)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","appDragAndDrop",""]],hostVars:2,hostBindings:function(e,r){1&e&&At("dragover",function(o){return r.onDragOver(o)})("dragleave",function(o){return r.onDragLeave(o)})("drop",function(o){return r.onDrop(o)}),2&e&&br("fileover",r.fileOver)},outputs:{fileDropped:"fileDropped"}}),n})();const GEe=["file_input"],qEe=["fileDropRef"];function JEe(n,t){if(1&n){const e=Dr();Le(0,"div",11),qt(1,"img",12),Le(2,"div",13)(3,"h4",14),nt(4),Be(),Le(5,"p",15),nt(6),Be()(),Le(7,"button",16),At("click",function(){const o=In(e).index;return _t().deleteFile(o)}),Le(8,"mat-icon"),nt(9,"delete"),Be()()()}if(2&n){const e=t.$implicit,r=_t();it(4),Tr(" ",null==e?null:e.name," "),it(2),Tr(" ",r.formatBytes(e.size)," ")}}let ZEe=(()=>{class n{constructor(e,r,i,o){this.data=e,this.dialogRef=r,this.fileService=i,this.fileEncryptionService=o,this.files=[]}uploadFiles(){var e=this;return(0,Xe.Z)(function*(){for(const r of e.files)yield e.uploadFile(r);e.close()})()}uploadFile(e){var r=this;return(0,Xe.Z)(function*(){const i=r.data.folder.url+e.name,o=r.fileService.guessContentType(e.name);let s;if("text/plain"===o){const a=yield e.text();s=new Blob([Ln(a,{breaks:!0})],{type:"text/plain"})}else s=e.slice(0,e.size,o||void 0);yield r.fileEncryptionService.writeAndEncryptFile(s,i).catch(Ac("could not upload file"))})()}handleChange(e){this.files=Array.from(e.currentTarget.files||[])}handleDrop(e){this.files=Array.from(e)}close(){this.dialogRef.close()}deleteFile(e){this.files.splice(e,1)}formatBytes(e,r=2){if(0===e)return"0 Bytes";const o=r<=0?0:r,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}}return n.\u0275fac=function(e){return new(e||n)(xe(kc),xe(ol),xe(Ca),xe(dv))},n.\u0275cmp=Jt({type:n,selectors:[["app-file-upload"]],viewQuery:function(e,r){if(1&e&&(Zr(GEe,5),Zr(qEe,5)),2&e){let i;un(i=dn())&&(r.input=i.first),un(i=dn())&&(r.fileDropEl=i.first)}},decls:17,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appDragAndDrop","",1,"dropzone",3,"fileDropped"],["type","file","id","fileDropRef","multiple","",3,"change"],["fileDropRef",""],["for","fileDropRef"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","secondary",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"single-file"],["src","assets/document.svg","width","45px","alt","file"],[1,"info"],[1,"name"],[1,"size"],["mat-icon-button","",1,"delete",3,"click"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"File Upload"),Be(),Le(2,"div",1)(3,"div",2),At("fileDropped",function(o){return r.handleDrop(o)}),Le(4,"input",3,4),At("change",function(o){return r.handleChange(o)}),Be(),Le(6,"h3"),nt(7,"Drag and Drop file here"),Be(),Le(8,"label",5),nt(9,"Browse for file"),Be()(),Le(10,"div",6),vt(11,JEe,10,2,"div",7),Be()(),Le(12,"div",8)(13,"button",9),At("click",function(){return r.close()}),nt(14,"Cancel"),Be(),Le(15,"button",10),At("click",function(){return r.uploadFiles()}),nt(16," Upload "),Be()()),2&e&&(it(11),ut("ngForOf",r.files))},directives:[Eu,Ad,KEe,ph,Qo,md,Au],styles:[".dropzone[_ngcontent-%COMP%]{width:450px;height:150px;padding:2rem;text-align:center;border:dashed 1px gray;position:relative;margin:0 auto}.dropzone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:44px;border-radius:20px;background-color:#e38c45;padding:8px 16px}.dropzone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#e38c45}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px gray;margin-bottom:1rem;flex-grow:1}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#f08080;margin:0;margin-bottom:.25rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}"]}),n})();class YEe{constructor(t,e,r,i,o=!0,s=!1){this.link=t,this.shortName=e,this.level=r,this.expandable=i,this.canWrite=o,this.isLoading=s}}class XEe{constructor(t,e,r,i){this.treeControl=t,this.solidFileHandlerService=e,this.permissionService=r,this.root=i,this.dataChange=new Bs([])}get data(){return this.dataChange.value}connect(t){var e=this;return this.treeControl.expansionModel.changed.subscribe(function(){var r=(0,Xe.Z)(function*(i){e.openFolder(i),e.closeFolder(i)});return function(i){return r.apply(this,arguments)}}()),this.createNode(this.root).then(r=>{this.dataChange.next([r]),this.treeControl.expand(r)}),ge(t.viewChange,this.dataChange).pipe(K(()=>this.data))}openFolder(t){var e=this;return(0,Xe.Z)(function*(){for(const r of t.added){r.isLoading=!0;try{yield e.openNode(r)}catch(i){Ac(`could not open ${r.link}`)(i)}finally{r.isLoading=!1}}e.dataChange.next(e.data)})()}openNode(t){var e=this;return(0,Xe.Z)(function*(){const i=(yield e.solidFileHandlerService.getContainerContent(t.link)).filter(a=>!e.solidFileHandlerService.isHiddenFile(a)).map(a=>e.createNode(a,t.level+1)),o=[];for(const a of i)o.push(yield a);const s=e.data.indexOf(t);e.data.splice(s+1,0,...o),e.dataChange.next(e.data)})()}createNode(t,e=1){var r=this;return(0,Xe.Z)(function*(){const i=r.solidFileHandlerService.isContainer(t),o=yield r.permissionService.hasWritePermissions(t);return new YEe(t,r.toDisplayName(t),e,i,o)})()}reloadNode(t){var e=this;return(0,Xe.Z)(function*(){e.closeNode(t),yield e.openNode(t)})()}getParent(t){for(let r=this.data.indexOf(t);r>=0;r--)if(t.level>this.data[r].level)return this.data[r];return t}closeFolder(t){var e=this;return(0,Xe.Z)(function*(){t.removed.slice().reverse().forEach(r=>{e.closeNode(r)})})()}closeNode(t){try{t.isLoading=!0;const e=this.data.indexOf(t);let r=0;for(let i=e+1;i<this.data.length&&this.data[i].level>t.level;i++,r++);this.data.splice(e+1,r)}finally{this.dataChange.next(this.data),t.isLoading=!1}}disconnect(t){}toDisplayName(t){return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.substring(t.lastIndexOf("/")+1)}}function QEe(n,t){1&n&&(Le(0,"mat-error"),nt(1," Folder name is "),Le(2,"strong"),nt(3,"required"),Be()())}let eAe=(()=>{class n{constructor(e,r,i){this.node=e,this.dialogRef=r,this.fileService=i,this.folderCreateFormControl=new gs("",[dd.required])}createFolder(){var e=this;return(0,Xe.Z)(function*(){e.folderCreateFormControl.value&&(yield e.fileService.writeContainer(e.node.link+e.folderCreateFormControl.value),e.close())})()}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(xe(kc),xe(ol),xe(Ca))},n.\u0275cmp=Jt({type:n,selectors:[["app-folder-create"]],hostBindings:function(e,r){1&e&&At("keyup.Enter",function(){return r.createFolder()},!1,AS)},decls:14,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"create-dialog"],[1,"create-form"],["appearance","fill",1,"create-input"],["type","text","id","create-folder","matInput","","placeholder","myFolder",3,"formControl"],[4,"ngIf"],["mat-dialog-actions",""],["id","close","mat-button","",3,"click"],["id","create","mat-button","",3,"click"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Create Folder"),Be(),Le(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),nt(6,"Folder Name"),Be(),qt(7,"input",4),Be(),vt(8,QEe,4,0,"mat-error",5),Be()(),Le(9,"div",6)(10,"button",7),At("click",function(){return r.close()}),nt(11,"Cancel"),Be(),Le(12,"button",8),At("click",function(){return r.createFolder()}),nt(13,"Create"),Be()()),2&e&&(it(7),ut("formControl",r.folderCreateFormControl),it(1),ut("ngIf",r.folderCreateFormControl.hasError("required")))},directives:[Eu,Ad,kh,pu,hd,Mh,mu,Ih,xa,ta,Dh,gi,ok,Au,Qo],styles:[".create-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.create-input[_ngcontent-%COMP%]{width:100%}.create-dialog[_ngcontent-%COMP%]{width:300px}"]}),n})();function tAe(n,t){1&n&&(Le(0,"mat-error"),nt(1," Filename is "),Le(2,"strong"),nt(3,"required"),Be()())}let nAe=(()=>{class n{constructor(e,r,i){this.node=e,this.router=r,this.dialogRef=i,this.fileCreateFormControl=new gs("",[dd.required])}createFile(){var e=this;return(0,Xe.Z)(function*(){e.fileCreateFormControl.value&&(yield e.router.navigate(["editor"],{queryParams:{fileToCreate:e.node.link+e.fileCreateFormControl.value}}),e.close())})()}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(xe(kc),xe(Ei),xe(ol))},n.\u0275cmp=Jt({type:n,selectors:[["app-file-create"]],hostBindings:function(e,r){1&e&&At("keyup.Enter",function(){return r.createFile()},!1,AS)},decls:14,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"create-dialog"],[1,"create-form"],["appearance","fill",1,"create-input"],["type","text","id","create-file","matInput","","placeholder","myFile.txt",3,"formControl"],[4,"ngIf"],["mat-dialog-actions",""],["id","close","mat-button","",3,"click"],["id","create","mat-button","",3,"click"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Create File"),Be(),Le(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),nt(6,"File Name"),Be(),qt(7,"input",4),Be(),vt(8,tAe,4,0,"mat-error",5),Be()(),Le(9,"div",6)(10,"button",7),At("click",function(){return r.close()}),nt(11,"Cancel"),Be(),Le(12,"button",8),At("click",function(){return r.createFile()}),nt(13,"Create"),Be()()),2&e&&(it(7),ut("formControl",r.fileCreateFormControl),it(1),ut("ngIf",r.fileCreateFormControl.hasError("required")))},directives:[Eu,Ad,kh,pu,hd,Mh,mu,Ih,xa,ta,Dh,gi,ok,Au,Qo],styles:[".create-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.create-input[_ngcontent-%COMP%]{width:100%}.create-dialog[_ngcontent-%COMP%]{width:300px}"]}),n})();function rAe(n,t){1&n&&qt(0,"mat-progress-bar",10)}function iAe(n,t){if(1&n){const e=Dr();Le(0,"div")(1,"div",2)(2,"section",3)(3,"h4"),nt(4,"What access would you like to grant your collaborators?"),Be(),Le(5,"p")(6,"mat-checkbox",4),nt(7,"Read"),Be()(),Le(8,"p")(9,"mat-checkbox",5),nt(10,"Write"),Be()()(),Le(11,"p"),nt(12),Le(13,"a",6),nt(14),Be(),nt(15," and its contents. "),Be(),vt(16,rAe,1,0,"mat-progress-bar",7),Be(),Le(17,"div",8)(18,"button",9),At("click",function(){return In(e),_t().createLink()}),nt(19,"Create Link"),Be(),Le(20,"button",9),At("click",function(){return In(e),_t().cancel()}),nt(21,"Close"),Be()()()}if(2&n){const e=_t();it(2),ut("formGroup",e.access),it(10),Tr(" Your collaborators will be able to READ ",e.access.value.write?"and WRITE to ":""," "),it(1),ut("href",e.data.folderUrl,rh),it(1),Oi(e.data.folderUrl),it(2),ut("ngIf",e.loading)}}function oAe(n,t){if(1&n){const e=Dr();Le(0,"div")(1,"div",2)(2,"p"),nt(3," Here is your freshly baked link for sharing the folder with your collaborators. "),Be(),Le(4,"p"),nt(5," Click on the link to copy it to your clipboard or use one of the buttons below. "),Be(),Le(6,"div",11),At("click",function(){return In(e),_t().copyLink()}),Le(7,"small",12),nt(8),Be()()(),Le(9,"div",8)(10,"button",9),At("click",function(){return In(e),_t().copyLink()}),nt(11,"Copy to clipboard"),Be(),Le(12,"button",9),At("click",function(){return In(e),_t().cancel()}),nt(13,"Close"),Be()()()}if(2&n){const e=_t();it(8),Tr(" ",e.link," ")}}let sAe=(()=>{class n{constructor(e,r,i,o,s,a){this.formBuilder=e,this.dialogRef=r,this.linkSharingService=i,this.notificationService=o,this.clipboard=s,this.data=a,this.access=this.formBuilder.group({read:new gs({value:!0,disabled:!0}),write:!1}),this.loading=!1,this.link=void 0}createLink(){var e=this;return(0,Xe.Z)(function*(){const r=e.data.folderUrl,i=e.access.getRawValue();e.loading=!0;try{e.link=yield e.linkSharingService.createFolderSharingLink(r,i)}catch(o){Ac("Error creating link")(o)}finally{e.loading=!1}})()}cancel(){this.dialogRef.close()}copyLink(){var e=this;return(0,Xe.Z)(function*(){null!=e.link&&e.clipboard.copy(e.link),e.notificationService.success({title:"Success!",message:"Link has been copied to your clipboard."})})()}}return n.\u0275fac=function(e){return new(e||n)(xe(RB),xe(ol),xe(IR),xe(pd),xe(RR),xe(kc))},n.\u0275cmp=Jt({type:n,selectors:[["app-folder-share"]],decls:4,vars:2,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup"],["formControlName","read"],["formControlName","write"],[3,"href"],["mode","indeterminate",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mode","indeterminate"],[2,"border","solid #e6964f","border-radius","10px",3,"click"],["data-cy","sharing-link",2,"width","450px","word-wrap","break-word","display","inline-block","padding","3px","color","gray"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Share Folder via link"),Be(),vt(2,iAe,22,5,"div",1),vt(3,oAe,14,1,"div",1)),2&e&&(it(2),ut("ngIf",!r.link),it(1),ut("ngIf",r.link))},directives:[Eu,gi,Ad,pu,fd,OR,ta,Fp,Wg,Au,Qo],styles:[""]}),n})();var aAe=F(5650);let lK=(()=>{class n{constructor(e,r){this.dialogRef=e,this.data=r}delete(){this.dialogRef.close(!0)}cancel(){this.dialogRef.close(!1)}}return n.\u0275fac=function(e){return new(e||n)(xe(ol),xe(kc))},n.\u0275cmp=Jt({type:n,selectors:[["app-delete-confirmation"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-actions",""],["id","delete","mat-button","",3,"click"],["id","cancel","mat-button","",3,"click"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Delete"),Be(),Le(2,"p"),nt(3),Be(),Le(4,"div",1)(5,"button",2),At("click",function(){return r.delete()}),nt(6,"Delete"),Be(),Le(7,"button",3),At("click",function(){return r.cancel()}),nt(8,"Cancel"),Be()()),2&e&&(it(3),SC(" Are you sure you want to delete ",r.data.type,": ",r.data.url,"?\n"))},directives:[Eu,Au,Qo],styles:[""]}),n})();const lAe=Sb(Mp(jc));let cK=(()=>{class n extends lAe{constructor(e,r,i){super(e,r),this.tabIndex=Number(i)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Wu),Zs("tabindex"))},n.\u0275dir=bt({type:n,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[cn([{provide:jc,useExisting:n}]),Ht]}),n})(),uK=(()=>{class n extends Rx{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[cn([{provide:Rx,useExisting:n}]),Ht]}),n})(),dK=(()=>{class n extends LR{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[cn([{provide:LR,useExisting:n}]),Ht]}),n})(),UR=(()=>{class n{constructor(e,r){this.viewContainer=e,this._node=r}}return n.\u0275fac=function(e){return new(e||n)(xe(Fi),xe(Ix,8))},n.\u0275dir=bt({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[cn([{provide:hv,useExisting:n}])]}),n})(),hK=(()=>{class n extends Wu{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275cmp=Jt({type:n,selectors:[["mat-tree"]],viewQuery:function(e,r){if(1&e&&Zr(UR,7),2&e){let i;un(i=dn())&&(r._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[cn([{provide:Wu,useExisting:n}]),Ht],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,r){1&e&&_a(0,0)},directives:[UR],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),fK=(()=>{class n extends BR{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[cn([{provide:BR,useExisting:n}]),Ht]}),n})(),uAe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[$Ee,ir],ir]}),n})();const dAe=["mat-menu-item",""];function hAe(n,t){1&n&&(Av(),Le(0,"svg",2),qt(1,"polygon",3),Be())}const pK=["*"];function fAe(n,t){if(1&n){const e=Dr();Le(0,"div",0),At("keydown",function(i){return In(e),_t()._handleKeydown(i)})("click",function(){return In(e),_t().closed.emit("click")})("@transformMenu.start",function(i){return In(e),_t()._onAnimationStart(i)})("@transformMenu.done",function(i){return In(e),_t()._onAnimationDone(i)}),Le(1,"div",1),ur(2),Be()()}if(2&n){const e=_t();ut("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),tr("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Ox={transformMenu:yc("transformMenu",[Xo("void",Yr({opacity:0,transform:"scale(0.8)"})),Us("void => enter",ea("120ms cubic-bezier(0, 0, 0.2, 1)",Yr({opacity:1,transform:"scale(1)"}))),Us("* => void",ea("100ms 25ms linear",Yr({opacity:0})))]),fadeInItems:yc("fadeInItems",[Xo("showing",Yr({opacity:1})),Us("void => *",[Yr({opacity:0}),ea("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},pAe=new Ot("MatMenuContent"),jR=new Ot("MAT_MENU_PANEL"),gAe=du(Mp(class{}));let Kg=(()=>{class n extends gAe{constructor(e,r,i,o,s){var a;super(),this._elementRef=e,this._document=r,this._focusMonitor=i,this._parentMenu=o,this._changeDetectorRef=s,this.role="menuitem",this._hovered=new Ne,this._focused=new Ne,this._highlighted=!1,this._triggersSubmenu=!1,null===(a=null==o?void 0:o.addItem)||void 0===a||a.call(o,this)}focus(e,r){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e;const r=this._elementRef.nativeElement.cloneNode(!0),i=r.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<i.length;o++)i[o].remove();return(null===(e=r.textContent)||void 0===e?void 0:e.trim())||""}_setHighlighted(e){var r;this._highlighted=e,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(zn),xe(sd),xe(jR,8),xe(Ni))},n.\u0275cmp=Jt({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,r){1&e&&At("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),2&e&&(tr("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),br("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Ht],attrs:dAe,ngContentSelectors:pK,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,r){1&e&&(no(),ur(0),qt(1,"div",0),vt(2,hAe,2,0,"svg",1)),2&e&&(it(1),ut("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),it(1),ut("ngIf",r._triggersSubmenu))},directives:[hu,gi],encapsulation:2,changeDetection:0}),n})();const gK=new Ot("mat-menu-default-options",{providedIn:"root",factory:function mAe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let yAe=0,fv=(()=>{class n{constructor(e,r,i,o){this._elementRef=e,this._ngZone=r,this._defaultOptions=i,this._changeDetectorRef=o,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new lh,this._tabSubscription=w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Ne,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Mn,this.close=this.closed,this.panelId="mat-menu-panel-"+yAe++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Mr(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Mr(e)}set panelClass(e){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new rA(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Qs(this._directDescendantItems),Ja(e=>ge(...e.map(r=>r._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{var r;const i=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=i.activeItem)||void 0===r?void 0:r._hasFocus())){const o=e.toArray(),s=Math.max(0,Math.min(o.length-1,i.activeItemIndex||0));o[s]&&!o[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Qs(this._directDescendantItems),Ja(r=>ge(...r.map(i=>i._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const r=e.keyCode,i=this._keyManager;switch(r){case 27:mc(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(ke(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const r=this._keyManager;if(r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&this._directDescendantItems.length){let i=this._directDescendantItems.first._getHostElement().parentElement;for(;i;){if("menu"===i.getAttribute("role")){i.focus();break}i=i.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const r=Math.min(this._baseElevation+e,24),i=`${this._elevationPrefix}${r}`,o=Object.keys(this._classList).find(s=>s.startsWith(this._elevationPrefix));(!o||o===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(e=this.xPosition,r=this.yPosition){var i;const o=this._classList;o["mat-menu-before"]="before"===e,o["mat-menu-after"]="after"===e,o["mat-menu-above"]="above"===r,o["mat-menu-below"]="below"===r,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Qs(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Vn),xe(gK),xe(Ni))},n.\u0275dir=bt({type:n,contentQueries:function(e,r,i){if(1&e&&(pr(i,pAe,5),pr(i,Kg,5),pr(i,Kg,4)),2&e){let o;un(o=dn())&&(r.lazyContent=o.first),un(o=dn())&&(r._allItems=o),un(o=dn())&&(r.items=o)}},viewQuery:function(e,r){if(1&e&&Zr(Pi,5),2&e){let i;un(i=dn())&&(r.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),HR=(()=>{class n extends fv{constructor(e,r,i,o){super(e,r,i,o),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Vn),xe(gK),xe(Ni))},n.\u0275cmp=Jt({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,r){2&e&&tr("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[cn([{provide:jR,useExisting:n}]),Ht],ngContentSelectors:pK,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,r){1&e&&(no(),vt(0,fAe,3,6,"ng-template"))},directives:[fh],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[Ox.transformMenu,Ox.fadeInItems]},changeDetection:0}),n})();const mK=new Ot("mat-menu-scroll-strategy"),_Ae={provide:mK,deps:[_c],useFactory:function vAe(n){return()=>n.scrollStrategies.reposition()}},vK=Ep({passive:!0});let bAe=(()=>{class n{constructor(e,r,i,o,s,a,l,c,d){this._overlay=e,this._element=r,this._viewContainerRef=i,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=w.EMPTY,this._hoverSubscription=w.EMPTY,this._menuCloseSubscription=w.EMPTY,this._handleTouchStart=E=>{oA(E)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Mn,this.onMenuOpen=this.menuOpened,this.menuClosed=new Mn,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=s instanceof fv?s:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,vK),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,vK),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),r=e.getConfig(),i=r.positionStrategy;this._setPosition(i),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof fv&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Ji(this.menu.close)).subscribe(()=>{i.withLockedPosition(!1).reapplyLastPosition(),i.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(e,r){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof fv?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(si(i=>"void"===i.toState),ke(1),Ji(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,r=this.menu.parentMenu;for(;r;)e++,r=r.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new jb({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(r=>{const i="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(i,o)):this.menu.setPositionClasses(i,o)})}_setPosition(e){let[r,i]="before"===this.menu.xPosition?["end","start"]:["start","end"],[o,s]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[a,l]=[o,s],[c,d]=[r,i],E=0;this.triggersSubmenu()?(d=r="before"===this.menu.xPosition?"start":"end",i=c="end"===r?"start":"end",E="bottom"===o?8:-8):this.menu.overlapTrigger||(a="top"===o?"bottom":"top",l="top"===s?"bottom":"top"),e.withPositions([{originX:r,originY:a,overlayX:c,overlayY:o,offsetY:E},{originX:i,originY:a,overlayX:d,overlayY:o,offsetY:E},{originX:r,originY:l,overlayX:c,overlayY:s,offsetY:-E},{originX:i,originY:l,overlayX:d,overlayY:s,offsetY:-E}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return ge(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:An(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(si(s=>s!==this._menuItemInstance),si(()=>this._menuOpen)):An(),r)}_handleMousedown(e){iA(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const r=e.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(si(e=>e===this._menuItemInstance&&!e.disabled),vk(0,ck)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof fv&&this.menu._isAnimating?this.menu._animationDone.pipe(ke(1),vk(0,ck),Ji(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Cy(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(xe(_c),xe(vn),xe(Fi),xe(mK),xe(jR,8),xe(Kg,10),xe(id,8),xe(sd),xe(Vn))},n.\u0275dir=bt({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,r){1&e&&At("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),2&e&&tr("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),VR=(()=>{class n extends bAe{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[Ht]}),n})(),wAe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[_Ae],imports:[[Xs,ir,Ip,Ey],Np,ir]}),n})();function xAe(n,t){if(1&n){const e=Dr();Le(0,"div",10)(1,"button",11)(2,"mat-icon",12),nt(3,"more_horiz"),Be()(),Le(4,"mat-menu",null,13)(6,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).downloadFile(i)}),nt(7," Download "),Be(),Le(8,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).deleteFile(i)}),nt(9," Delete File "),Be(),Le(10,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).shareFile(i)}),nt(11," Share File "),Be()()()}if(2&n){const e=Al(5);it(1),ut("matMenuTriggerFor",e)}}function SAe(n,t){if(1&n){const e=Dr();Le(0,"mat-tree-node",5)(1,"button",6),At("click",function(){const o=In(e).$implicit;return _t(2).open(o)}),Le(2,"mat-icon",7),nt(3),Be()(),nt(4),qt(5,"span",8),vt(6,xAe,12,1,"div",9),Be()}if(2&n){const e=t.$implicit,r=_t(2);up("id","",e.shortName,"Node"),it(3),Oi(r.getFileIcon(e)),it(1),Tr(" ",e.shortName," "),it(2),ut("ngIf",e.canWrite)}}function CAe(n,t){1&n&&qt(0,"mat-progress-bar",20)}function EAe(n,t){if(1&n){const e=Dr();Le(0,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).upload(i)}),nt(1," Upload Files "),Be()}}function AAe(n,t){if(1&n){const e=Dr();Le(0,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).shareFolder(i)}),nt(1," Share Folder "),Be()}}function kAe(n,t){if(1&n){const e=Dr();Le(0,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).createFolder(i)}),nt(1," Create Folder "),Be()}}function DAe(n,t){if(1&n){const e=Dr();Le(0,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).createFile(i)}),nt(1," Create File "),Be()}}function TAe(n,t){if(1&n){const e=Dr();Le(0,"button",14),At("click",function(){In(e);const i=_t().$implicit;return _t(2).deleteFolder(i)}),nt(1," Delete Folder "),Be()}}function MAe(n,t){if(1&n){const e=Dr();Le(0,"mat-tree-node",5)(1,"button",15)(2,"mat-icon",16),nt(3),Be()(),Le(4,"span"),nt(5),Be(),vt(6,CAe,1,0,"mat-progress-bar",17),qt(7,"span",8),Le(8,"div",10)(9,"button",11)(10,"mat-icon",12),nt(11,"more_horiz"),Be()(),Le(12,"mat-menu",null,18)(14,"button",14),At("click",function(){const o=In(e).$implicit;return _t(2).downloadFolder(o)}),nt(15," Download "),Be(),Le(16,"button",14),At("click",function(){const o=In(e).$implicit;return _t(2).open(o)}),nt(17,"Open Folder"),Be(),vt(18,EAe,2,0,"button",19),vt(19,AAe,2,0,"button",19),vt(20,kAe,2,0,"button",19),vt(21,DAe,2,0,"button",19),vt(22,TAe,2,0,"button",19),Be()()()}if(2&n){const e=t.$implicit,r=Al(13),i=_t(2);up("id","",e.shortName,"Node"),it(1),up("id","",e.shortName,"_expand"),tr("aria-label","Toggle "+e.shortName),it(2),Tr(" ",i.treeControl.isExpanded(e)?"folder_open":"folder"," "),it(2),Oi(e.shortName),it(1),ut("ngIf",e.isLoading),it(3),ut("matMenuTriggerFor",r),it(9),ut("ngIf",e.canWrite),it(1),ut("ngIf",e.canWrite),it(1),ut("ngIf",e.canWrite),it(1),ut("ngIf",e.canWrite),it(1),ut("ngIf",e.canWrite)}}function IAe(n,t){if(1&n&&(Le(0,"mat-tree",2),vt(1,SAe,7,4,"mat-tree-node",3),vt(2,MAe,23,12,"mat-tree-node",4),Be()),2&n){const e=_t();ut("dataSource",e.dataSource)("treeControl",e.treeControl),it(2),ut("matTreeNodeDefWhen",e.hasChild)}}let RAe=(()=>{class n{constructor(e,r,i,o,s,a,l,c){this.solidFileHandlerService=e,this.fileEncryptionService=r,this.directoryService=i,this.route=o,this.router=s,this.dialog=a,this.notification=l,this.permissionService=c,this.rootPath=null}ngOnInit(){var e=this;this.route.queryParams.subscribe(function(){var r=(0,Xe.Z)(function*(i){let o=i.url;if(o&&!e.directoryService.isInEncryptedDirectory(o))throw new Ax(`Not loading ${o}, because it is not an encrypted directory`);o||(o=yield e.directoryService.getDefaultStorageDirectory(),(yield e.solidFileHandlerService.ensureContainerExists(o))&&e.notification.info({title:"Created",message:"a solidcryptpad folder was created for you"})),e.rootPath=o,e.treeControl=new jEe(e.getLevel,e.isExpandable),e.dataSource=new XEe(e.treeControl,e.solidFileHandlerService,e.permissionService,e.rootPath)});return function(i){return r.apply(this,arguments)}}())}getLevel(e){return e.level}isExpandable(e){return e.expandable}hasChild(e,r){return r.expandable}open(e){this.router.navigate(e.expandable?["files"]:["preview"],{queryParams:{url:e.link}})}downloadBlob(e,r="file"){const i=URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.download=r,document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(o)}downloadFile(e){var r=this;return(0,Xe.Z)(function*(){const i=yield r.solidFileHandlerService.readFile(e.link),o=yield r.fileEncryptionService.decryptFile(i,e.link);r.downloadBlob(o,e.shortName)})()}getFilesInFolder(e){var r=this;return(0,Xe.Z)(function*(){let i=[];const o=yield r.solidFileHandlerService.getContainerContent(e);for(const s of o)r.solidFileHandlerService.isContainer(s)?i=i.concat(yield r.getFilesInFolder(s)):i.push(s);return i})()}downloadFolder(e){var r=this;return(0,Xe.Z)(function*(){const i=e.link.split("/")[e.link.split("/").length-2],o=yield r.getFilesInFolder(e.link),s=new aAe;for(const a of o)if(!r.solidFileHandlerService.isContainer(a)){const l=yield r.solidFileHandlerService.readFile(a),c=yield r.fileEncryptionService.decryptFile(l,a),d=i+a.split(i)[1];s.file(d,c)}r.downloadBlob(yield s.generateAsync({type:"blob"}),i+".zip")})()}upload(e){var r=this;return(0,Xe.Z)(function*(){const i=r.dialog.open(ZEe,{data:{folder:{url:e.link}}});yield Jh(i.afterClosed()),r.dataSource.reloadNode(e)})()}createFolder(e){var r=this;return(0,Xe.Z)(function*(){const i=r.dialog.open(eAe,{data:e});yield Jh(i.afterClosed()),r.dataSource.reloadNode(e)})()}createFile(e){this.dialog.open(nAe,{data:e})}deleteFolder(e){var r=this;return(0,Xe.Z)(function*(){const i=r.dialog.open(lK,{data:{type:"folder",url:e.link}});(yield Jh(i.afterClosed()))?(yield r.solidFileHandlerService.deleteFolder(e.link),yield r.dataSource.reloadNode(r.dataSource.getParent(e))):r.notification.info({title:"delete",message:"aborted"})})()}deleteFile(e){var r=this;return(0,Xe.Z)(function*(){const i=r.dialog.open(lK,{data:{type:"file",url:e.link}});(yield Jh(i.afterClosed()))?(yield r.solidFileHandlerService.deleteFile(e.link),yield r.dataSource.reloadNode(r.dataSource.getParent(e))):r.notification.info({title:"delete",message:"aborted"})})()}shareFolder(e){var r=this;return(0,Xe.Z)(function*(){yield r.dialog.open(sAe,{data:{folderUrl:e.link}})})()}shareFile(e){var r=this;return(0,Xe.Z)(function*(){yield r.dialog.open(J$,{data:{fileUrl:e.link}})})()}getFileIcon(e){return e.shortName.endsWith(".config")?"settings":e.shortName.endsWith(".zip")?"folder_zip":"description"}}return n.\u0275fac=function(e){return new(e||n)(xe(Ca),xe(dv),xe(kd),xe(Il),xe(Ei),xe(Zh),xe(pd),xe(Gw))},n.\u0275cmp=Jt({type:n,selectors:[["app-tree-nested-explorer"]],decls:2,vars:1,consts:[[1,"box"],[3,"dataSource","treeControl",4,"ngIf"],[3,"dataSource","treeControl"],["matTreeNodePadding","2px","data-cy","tree-node",3,"id",4,"matTreeNodeDef"],["matTreeNodePadding","2px","data-cy","tree-node",3,"id",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","2px","data-cy","tree-node",3,"id"],["mat-icon-button","",3,"click"],["data-cy","open-node",1,"mat-icon"],[1,"spacer"],["class","menu","data-cy","folder-menu",4,"ngIf"],["data-cy","folder-menu",1,"menu"],["mat-icon-button","",2,"color","gray",3,"matMenuTriggerFor"],["title","Options",1,"mat-icon"],["folder_menu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","","matTreeNodeToggle","",3,"id"],[1,"mat-icon-rtl-mirror"],["mode","indeterminate","class","example-tree-progress-bar",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mode","indeterminate",1,"example-tree-progress-bar"]],template:function(e,r){1&e&&(Le(0,"div",0),vt(1,IAe,3,3,"mat-tree",1),Be()),2&e&&(it(1),ut("ngIf",r.dataSource))},directives:[gi,hK,uK,cK,dK,Qo,md,VR,HR,Kg,fK,Wg],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;width:100%}.mat-tree-node[_ngcontent-%COMP%]{border-bottom:1px solid;border-radius:10px;border-color:gray}.mat-tree[_ngcontent-%COMP%]{border:1px solid gray;border-radius:10px;min-width:60%}.mat-tree-node[_ngcontent-%COMP%]:hover{background-color:#f4cfab}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();function OAe(n,t){if(1&n&&(Le(0,"h3"),nt(1),Be()),2&n){const e=_t().$implicit;it(1),Tr("\xa0",e," /")}}function PAe(n,t){if(1&n&&(Le(0,"div"),vt(1,OAe,2,1,"h3",2),Be()),2&n){const e=t.$implicit;it(1),ut("ngIf",e)}}function FAe(n,t){if(1&n){const e=Dr();Le(0,"div",3),vt(1,PAe,2,1,"div",4),Le(2,"button",5),At("click",function(){return In(e),_t().toggleChangingDirectory()}),Le(3,"mat-icon"),nt(4,"swap_horiz"),Be()()()}if(2&n){const e=_t();it(1),ut("ngForOf",e.directoryFullPathSplitBySlash)}}function NAe(n,t){1&n&&(Le(0,"mat-error"),nt(1," Folder name is "),Le(2,"strong"),nt(3,"required"),Be()())}function LAe(n,t){if(1&n){const e=Dr();Le(0,"form")(1,"mat-form-field",6)(2,"mat-label"),nt(3,"Change directory"),Be(),qt(4,"input",7),Be(),vt(5,NAe,4,0,"mat-error",2),Le(6,"button",8),At("click",function(){In(e);const i=_t();return i.goToFolder(i.changeDirectoryToFormControl.value)}),nt(7," Change directory "),Be(),Le(8,"button",9),At("click",function(){return In(e),_t().toggleChangingDirectory()}),nt(9," Done "),Be()()}if(2&n){const e=_t();it(4),cp("placeholder",e.currentUrl),ut("formControl",e.changeDirectoryToFormControl),it(1),ut("ngIf",e.changeDirectoryToFormControl.hasError("required"))}}let BAe=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.directoryService=i,this.currentUrl="",this.directoryFullPathSplitBySlash=[],this.changeDirectoryToFormControl=new gs(this.currentUrl),this.changingDirectory=!1}ngOnInit(){var e=this;return(0,Xe.Z)(function*(){e.route.queryParams.subscribe(function(){var r=(0,Xe.Z)(function*(i){e.currentUrl=i.url,e.currentUrl||(e.currentUrl=yield e.directoryService.getDefaultStorageDirectory()),e.updateUrlSplit(e.currentUrl)});return function(i){return r.apply(this,arguments)}}())})()}goToFolder(e){var r=this;return(0,Xe.Z)(function*(){yield r.router.navigateByUrl(`files?url=${e}`),r.updateUrlSplit(e),r.toggleChangingDirectory()})()}updateUrlSplit(e){const r=e.includes("https")?8:7;this.directoryFullPathSplitBySlash=e.substring(r).split("/")}toggleChangingDirectory(){this.changingDirectory=!this.changingDirectory}}return n.\u0275fac=function(e){return new(e||n)(xe(Ei),xe(Il),xe(kd))},n.\u0275cmp=Jt({type:n,selectors:[["app-file-explorer"]],decls:4,vars:2,consts:[[1,"box"],["class","horizontal",4,"ngIf"],[4,"ngIf"],[1,"horizontal"],[4,"ngFor","ngForOf"],["mat-icon-button","","title","Change directory",2,"margin-left","1rem","margin-top","0.5rem",3,"click"],["appearance","standard",1,"create-input",2,"min-width","350px"],["type","text","id","currentFolderLink","matInput","",3,"formControl","placeholder"],["mat-raised-button","","folderGo","","id","folderGo","color","primary",2,"margin-left","1rem",3,"click"],["mat-stroked-button","","color","primary",2,"margin-left","0.5rem",3,"click"]],template:function(e,r){1&e&&(Le(0,"div",0),vt(1,FAe,5,1,"div",1),vt(2,LAe,10,3,"form",2),Be(),qt(3,"app-tree-nested-explorer")),2&e&&(it(1),ut("ngIf",!r.changingDirectory),it(1),ut("ngIf",r.changingDirectory))},directives:[gi,ph,Qo,md,kh,pu,hd,Mh,mu,Ih,xa,ta,Dh,ok,RAe],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.horizontal[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})(),UAe=0;const zR=new Ot("CdkAccordion");let jAe=(()=>{class n{constructor(){this._stateChanges=new Ne,this._openCloseAllActions=new Ne,this.id="cdk-accordion-"+UAe++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Mr(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[cn([{provide:zR,useExisting:n}]),Si]}),n})(),HAe=0,VAe=(()=>{class n{constructor(e,r,i){this.accordion=e,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=w.EMPTY,this.closed=new Mn,this.opened=new Mn,this.destroyed=new Mn,this.expandedChange=new Mn,this.id="cdk-accordion-child-"+HAe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Mr(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Mr(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(xe(zR,12),xe(Ni),xe(GV))},n.\u0275dir=bt({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[cn([{provide:zR,useValue:void 0}])]}),n})(),zAe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();const WAe=["body"];function $Ae(n,t){}const KAe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],GAe=["mat-expansion-panel-header","*","mat-action-row"];function qAe(n,t){1&n&&qt(0,"span",2),2&n&&ut("@indicatorRotate",_t()._getExpandedState())}const JAe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ZAe=["mat-panel-title","mat-panel-description","*"],WR=new Ot("MAT_ACCORDION"),_K="225ms cubic-bezier(0.4,0.0,0.2,1)",bK={indicatorRotate:yc("indicatorRotate",[Xo("collapsed, void",Yr({transform:"rotate(0deg)"})),Xo("expanded",Yr({transform:"rotate(180deg)"})),Us("expanded <=> collapsed, void => collapsed",ea(_K))]),bodyExpansion:yc("bodyExpansion",[Xo("collapsed, void",Yr({height:"0px",visibility:"hidden"})),Xo("expanded",Yr({height:"*",visibility:"visible"})),Us("expanded <=> collapsed, void => collapsed",ea(_K))])};let YAe=(()=>{class n{constructor(e){this._template=e}}return n.\u0275fac=function(e){return new(e||n)(xe(Pi))},n.\u0275dir=bt({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),XAe=0;const wK=new Ot("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let xK=(()=>{class n extends VAe{constructor(e,r,i,o,s,a,l){super(e,r,i),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Mn,this.afterCollapse=new Mn,this._inputChanges=new Ne,this._headerId="mat-expansion-panel-header-"+XAe++,this._bodyAnimationDone=new Ne,this.accordion=e,this._document=s,this._bodyAnimationDone.pipe(p8((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Mr(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Qs(null),si(()=>this.expanded&&!this._portal),ke(1)).subscribe(()=>{this._portal=new Cy(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,r=this._body.nativeElement;return e===r||r.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(xe(WR,12),xe(Ni),xe(GV),xe(Fi),xe(zn),xe(Qa,8),xe(wK,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,r,i){if(1&e&&pr(i,YAe,5),2&e){let o;un(o=dn())&&(r._lazyContent=o.first)}},viewQuery:function(e,r){if(1&e&&Zr(WAe,5),2&e){let i;un(i=dn())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,r){2&e&&br("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[cn([{provide:WR,useValue:void 0}]),Ht,Si],ngContentSelectors:GAe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,r){1&e&&(no(KAe),ur(0),Le(1,"div",0,1),At("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),Le(3,"div",2),ur(4,1),vt(5,$Ae,0,0,"ng-template",3),Be(),ur(6,2),Be()),2&e&&(it(1),ut("@bodyExpansion",r._getExpandedState())("id",r.id),tr("aria-labelledby",r._headerId),it(4),ut("cdkPortalOutlet",r._portal))},directives:[pk],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[bK.bodyExpansion]},changeDetection:0}),n})();class QAe{}const eke=Sb(QAe);let SK=(()=>{class n extends eke{constructor(e,r,i,o,s,a,l){super(),this.panel=e,this._element=r,this._focusMonitor=i,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=w.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe(si(d=>!(!d.hideToggle&&!d.togglePosition))):qo;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=ge(e.opened,e.closed,c,e._inputChanges.pipe(si(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(si(()=>e._containsFocus())).subscribe(()=>i.focusVia(r,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:mc(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,r){e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(xe(xK,1),xe(vn),xe(sd),xe(Ni),xe(wK,8),xe(Qa,8),Zs("tabindex"))},n.\u0275cmp=Jt({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,r){1&e&&At("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&e&&(tr("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),$a("height",r._getHeaderHeight()),br("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Ht],ngContentSelectors:ZAe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,r){1&e&&(no(JAe),Le(0,"span",0),ur(1),ur(2,1),ur(3,2),Be(),vt(4,qAe,1,1,"span",1)),2&e&&(it(4),ut("ngIf",r._showToggle()))},directives:[gi],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[bK.indicatorRotate]},changeDetection:0}),n})(),tke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),nke=(()=>{class n extends jAe{constructor(){super(...arguments),this._ownHeaders=new lh,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Mr(e)}ngAfterContentInit(){this._headers.changes.pipe(Qs(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new rA(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Xn(n)))(r||n)}}(),n.\u0275dir=bt({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,r,i){if(1&e&&pr(i,SK,5),2&e){let o;un(o=dn())&&(r._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,r){2&e&&br("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[cn([{provide:WR,useExisting:n}]),Ht]}),n})(),rke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[Xs,ir,zAe,gk]]}),n})(),ike=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[ir],ir]}),n})();const CK=["*"],oke=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],ske=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],dke=Mp(du(class{})),hke=du(class{}),AK=new Ot("MatList"),fke=new Ot("MatNavList");let pke=(()=>{class n extends dke{constructor(e){super(),this._elementRef=e,this._stateChanges=new Ne,"action-list"===this._getListType()&&e.nativeElement.classList.add("mat-action-list")}_getListType(){const e=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===e?"list":"mat-action-list"===e?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(e){return new(e||n)(xe(vn))},n.\u0275cmp=Jt({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[cn([{provide:AK,useExisting:n}]),Ht,Si],ngContentSelectors:CK,decls:1,vars:0,template:function(e,r){1&e&&(no(),ur(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),n})(),kK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),DK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),gke=(()=>{class n extends hke{constructor(e,r,i,o){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new Ne,this._disabled=!1,this._isInteractiveList=!!(i||o&&"action-list"===o._getListType()),this._list=i||o;const s=this._getHostElement();"button"===s.nodeName.toLowerCase()&&!s.hasAttribute("type")&&s.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Ji(this._destroyed)).subscribe(()=>{r.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Mr(e)}ngAfterContentInit(){!function _5(n,t,e="mat"){n.changes.pipe(Qs(n)).subscribe(({length:r})=>{yy(t,`${e}-2-line`,!1),yy(t,`${e}-3-line`,!1),yy(t,`${e}-multi-line`,!1),2===r||3===r?yy(t,`${e}-${r}-line`,!0):r>3&&yy(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Ni),xe(fke,8),xe(AK,8))},n.\u0275cmp=Jt({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,r,i){if(1&e&&(pr(i,kK,5),pr(i,DK,5),pr(i,v5,5)),2&e){let o;un(o=dn())&&(r._avatar=o.first),un(o=dn())&&(r._icon=o.first),un(o=dn())&&(r._lines=o)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,r){2&e&&br("mat-list-item-disabled",r.disabled)("mat-list-item-avatar",r._avatar||r._icon)("mat-list-item-with-avatar",r._avatar||r._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[Ht],ngContentSelectors:ske,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,r){1&e&&(no(oke),Le(0,"span",0),qt(1,"span",1),ur(2),Le(3,"span",2),ur(4,1),Be(),ur(5,2),Be()),2&e&&(it(1),ut("matRippleTrigger",r._getHostElement())("matRippleDisabled",r._isRippleDisabled()))},directives:[hu],encapsulation:2,changeDetection:0}),n})(),wke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[b5,Ip,ir,FA,Xs],b5,ir,FA,ike]}),n})(),xke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Jt({type:n,selectors:[["app-faq"]],decls:65,vars:0,consts:[[1,"box"],[2,"width","50%"],["multi",""],["role","list"],["role","listitem"],["href","https://solidweb.org/"],["href","https://solidcommunity.net/"],["href","https://inrupt.net/"],["href","https://forum.solidweb.org/"],["href","https://forum.solidproject.org/t/local-first-offline-and-solid-login/4896"]],template:function(e,r){1&e&&(Le(0,"div",0)(1,"div",1)(2,"h1"),nt(3,"FAQ"),Be(),Le(4,"mat-accordion",2)(5,"mat-expansion-panel")(6,"mat-expansion-panel-header")(7,"mat-panel-title")(8,"h3"),nt(9,"What is a Solid Pod?"),Be()()(),Le(10,"p"),nt(11," Solid is a specification that lets people store their data securely in decentralized data stores called Pods. Pods are like secure personal web servers for data. When data is stored in someone's Pod, they control which people and applications can access it. "),Be()(),Le(12,"mat-expansion-panel")(13,"mat-expansion-panel-header")(14,"mat-panel-title")(15,"h3"),nt(16,"How can i create a Solid Pod?"),Be()()(),Le(17,"p"),nt(18," You need to find yourself a so called "),Le(19,"strong"),nt(20,"identity provider"),Be(),nt(21," of which there are several. We recommend one of the following (you will be redirected away from SolidCryptPad). "),Be(),Le(22,"mat-list",3)(23,"mat-list-item",4)(24,"a",5),nt(25,"Solidweb"),Be()(),Le(26,"mat-list-item",4)(27,"a",6),nt(28,"Solid Community"),Be()(),Le(29,"mat-list-item",4)(30,"a",7),nt(31,"Inrupt"),Be()()()(),Le(32,"mat-expansion-panel")(33,"mat-expansion-panel-header")(34,"mat-panel-title")(35,"h3"),nt(36,"Why SolidCryptPad?"),Be()()(),Le(37,"p"),nt(38," These days, many documents are written in web based editors such as Google Docs. When using these services, users usually do not have the choice of where their data is stored. "),Be(),Le(39,"p"),nt(40," SolidCryptPad offers improvements in terms of security and flexibility given that due to the Solid protocol you can freely choose and switch your storage provider. "),Be(),Le(41,"p"),nt(42,"On top of that, everything you do is end-to-end encrypted."),Be()(),Le(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title")(46,"h3"),nt(47," I logged out but I don't need a password to login again, why? "),Be()()(),Le(48,"p"),nt(49," The logout behavior of Solid based applications is (currently) somewhat counterintuitive. While you might expect that logging out from an application means you are completely logged out and need to enter your password again next time around, with Solid it is a bit different. A logout here means that you are logged out from the application but "),Le(50,"strong"),nt(51,"not from the identity provider"),Be(),nt(52," (IDP). "),Be(),Le(53,"p"),nt(54,' This means that to "fully" log out from SolidCryptPad you\'d need to login on the website of your IDP, go to the settings and revoke all permissions of SolidCryptPad. Only then can you log in with a different pod. A hacky alternative is, of course, to use a private browser tab. '),Be(),Le(55,"p"),nt(56," We are aware that this is suboptimal, but currently our hands are tied due to the specification we have built our application on. "),Be(),Le(57,"p"),nt(58," For more information on this topic a good starting point is the "),Le(59,"a",8),nt(60,"Solid Forum"),Be(),nt(61," which has several discussions centered around this topic such as "),Le(62,"a",9),nt(63,"this one"),Be(),nt(64,". "),Be()()()()())},directives:[nke,xK,SK,tke,pke,gke],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%}"]}),n})();const Ske=["*"];var pv=(()=>(function(n){n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers"}(pv||(pv={})),pv))();class Eke{}const MK=new Ot("SECURITY_CONTEXT");let $R=(()=>{class n{constructor(e,r,i,o,s){this.platform=e,this.securityContext=r,this.http=i,this.sanitizer=s,this.initialMarkedOptions={renderer:new Mx},this.options=o}get options(){return this._options}set options(e){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),e)}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}compile(e,r=!1,i=!1,o=this.options){const s=this.trimIndentation(e),a=r?this.decodeHtml(s):s,c=Ln(i?this.renderEmoji(a):a,o);return this.sanitizer.sanitize(this.securityContext,c)||""}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe(K(r=>this.handleExtension(e,r)))}highlight(e){if(Gm(this.platform)&&"undefined"!=typeof Prism){e||(e=document);const r=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(e)}}renderKatex(e,r){if(!Gm(this.platform))return e;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return e.replace(/\$([^\s][^$]*?[^\s])\$/gm,(i,o)=>katex.renderToString(o,r))}decodeHtml(e){if(!Gm(this.platform))return e;const r=document.createElement("textarea");return r.innerHTML=e,r.value}handleExtension(e,r){const i=e?e.split("?")[0].split(".").splice(-1).join():"";return"md"!==i?"```"+i+"\n"+r+"\n```":r}renderEmoji(e){if(!Gm(this.platform))return e;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}trimIndentation(e){if(!e)return"";let r;return e.split("\n").map(i=>{let o=r;return i.length>0&&(o=isNaN(o)?i.search(/\S|$/):Math.min(i.search(/\S|$/),o)),isNaN(r)&&(r=o),o?i.substring(o):i}).join("\n")}}return n.\u0275fac=function(e){return new(e||n)(lt(Vm),lt(MK),lt(Vb,8),lt(Eke,8),lt(fc))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),IK=(()=>{class n{constructor(e,r){this.element=e,this.markdownService=r,this.error=new Mn,this.load=new Mn,this.ready=new Mn,this._commandLine=!1,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(e,r=!1){let i=this.markdownService.compile(e,r,this.emoji);i=this.katex?this.markdownService.renderKatex(i,this.katexOptions):i,this.element.nativeElement.innerHTML=i,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(e){return null!=e&&"false"!=`${String(e)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(e=>{this.render(e),this.load.emit(e)},e=>this.error.emit(e))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,pv.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,pv.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,r){const i=e.querySelectorAll("pre");for(let o=0;o<i.length;o++){const s=r instanceof Array?r:[r];i.item(o).classList.add(...s)}}setPluginOptions(e,r){const i=e.querySelectorAll("pre");for(let o=0;o<i.length;o++)Object.keys(r).forEach(s=>{const a=r[s];if(a){const l=this.toLispCase(s);i.item(o).setAttribute(l,a.toString())}})}toLispCase(e){const r=e.match(/([A-Z])/g);if(!r)return e;let i=e.toString();for(let o=0,s=r.length;o<s;o++)i=i.replace(new RegExp(r[o]),"-"+r[o].toLowerCase());return"-"===i.slice(0,1)&&(i=i.slice(1)),i}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe($R))},n.\u0275cmp=Jt({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Si],ngContentSelectors:Ske,decls:1,vars:0,template:function(e,r){1&e&&(no(),ur(0))},encapsulation:2}),n})(),Tke=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[$R,e&&e.loader||[],e&&e.markedOptions||[],{provide:MK,useValue:e&&null!=e.sanitize?e.sanitize:kr.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({}),n})();function Mke(n,t){if(1&n&&(Le(0,"div",8),qt(1,"img",9),Be()),2&n){const e=_t();it(1),cp("src",e.imageUrl,rh)}}function Ike(n,t){if(1&n&&(Le(0,"div",10),qt(1,"markdown",11),Be()),2&n){const e=_t();it(1),ut("data",e.textFileContent)}}function Rke(n,t){1&n&&qt(0,"mat-progress-bar",12)}function Oke(n,t){1&n&&(Le(0,"h3",13),nt(1," You can not edit this file. "),Be())}const Pke=function(){return["/files"]};function Fke(n,t){1&n&&(Le(0,"button",14),nt(1," Back to files "),Be()),2&n&&ut("routerLink",Nm(1,Pke))}function Nke(n,t){if(1&n){const e=Dr();Le(0,"button",15),At("click",function(){In(e);const i=_t();return i.open(i.fileUrl)}),nt(1," Open in editor "),Be()}}let Lke=(()=>{class n{constructor(e,r,i,o,s){this.fileEncryptionService=e,this.route=r,this.router=i,this.sanitizer=o,this.permissionService=s,this.fileUrl="",this.textFileContent="no content",this.fileType="",this.errorMsg="",this.loading=!1}ngOnInit(){var e=this;return(0,Xe.Z)(function*(){e.loading=!0,e.setupFilenameFromParams(),yield e.loadDecryptedFile(),e.isWriteable=yield e.permissionService.hasWritePermissions(e.fileUrl),e.loading=!1})()}setupFilenameFromParams(){this.route.queryParams.subscribe(e=>{this.fileUrl=e.url,(null==this.fileUrl||""===this.fileUrl)&&console.debug("no filename given")})}loadDecryptedFile(){var e=this;return(0,Xe.Z)(function*(){yield e.fileEncryptionService.readAndDecryptFile(e.fileUrl).then(r=>{e.fileType=r.type,e.fileType.includes("text")?e.getTextFileContent(r):e.fileType.includes("image")?e.getImageUrlFromBlob(r):e.errorMsg="No Preview for ContentType: "+e.fileType},r=>{e.errorMsg="Error while opening your file: "+r,console.error("couldnt load file",r)})})()}getTextFileContent(e){var r=this;return(0,Xe.Z)(function*(){r.textFileContent=r.sanitizeHtmlContent(Ln(yield e.text()))})()}getImageUrlFromBlob(e){const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{this.imageUrl=r.result}}sanitizeHtmlContent(e){let r=this.sanitizer.sanitize(kr.HTML,e);return null===r&&(r=""),r}open(e){this.router.navigateByUrl(`/editor?file=${e}`)}}return n.\u0275fac=function(e){return new(e||n)(xe(dv),xe(Il),xe(Ei),xe(fc),xe(Gw))},n.\u0275cmp=Jt({type:n,selectors:[["app-file-preview"]],decls:16,vars:8,consts:[[1,"container"],[1,"content"],["class","previewImages",4,"ngIf"],["class","previewText",4,"ngIf"],["mode","indeterminate",4,"ngIf"],["style","color: #0074d9",4,"ngIf"],["class","editor-button","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["class","editor-button","mat-raised-button","","color","accent",3,"click",4,"ngIf"],[1,"previewImages"],[3,"src"],[1,"previewText"],[2,"white-space","pre-wrap",3,"data"],["mode","indeterminate"],[2,"color","#0074d9"],["mat-raised-button","","color","primary",1,"editor-button",3,"routerLink"],["mat-raised-button","","color","accent",1,"editor-button",3,"click"]],template:function(e,r){1&e&&(Le(0,"div",0)(1,"div",1)(2,"h3"),nt(3),Be(),Le(4,"h3"),nt(5," Preview from "),Le(6,"i"),nt(7),Be(),nt(8,"! "),Be(),vt(9,Mke,2,1,"div",2),vt(10,Ike,2,1,"div",3),vt(11,Rke,1,0,"mat-progress-bar",4),vt(12,Oke,2,0,"h3",5),qt(13,"br"),vt(14,Fke,2,2,"button",6),vt(15,Nke,2,0,"button",7),Be()()),2&e&&(it(3),Oi(r.errorMsg),it(4),Tr("",r.fileUrl," "),it(2),ut("ngIf",r.fileType.includes("image")),it(1),ut("ngIf",r.fileType.includes("text")),it(1),ut("ngIf",r.loading),it(1),ut("ngIf",!r.isWriteable&&!r.loading),it(2),ut("ngIf",!r.loading),it(1),ut("ngIf",r.fileType.includes("text")&&r.isWriteable))},directives:[gi,IK,Wg,Qo,xp],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:850px;min-width:320px;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%}.previewText[_ngcontent-%COMP%]{white-space:pre;height:auto;max-height:75vh;margin:10px auto;padding:10px;display:flex;flex-direction:column;background-color:#eee;overflow:scroll;text-align:justify;box-shadow:10px 5px 5px #d3d3d3}.previewImages[_ngcontent-%COMP%]{margin:10px;padding:10px;border:solid 2px #000000;display:inline-block}.previewImages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.editor-button[_ngcontent-%COMP%]{margin-right:7px;margin-left:7px;margin-bottom:7px}"]}),n})();class Bke extends Zi{constructor(t,e){super("InvalidSharingLinkException",t,"Invalid sharing link",e)}}function Uke(n,t){1&n&&(Le(0,"div")(1,"h1"),nt(2,"Please wait, we are redirecting you to your file."),Be(),qt(3,"mat-progress-bar",2),Be())}function jke(n,t){1&n&&(Le(0,"div")(1,"div",3)(2,"mat-icon",4),nt(3,"warning"),Be()(),Le(4,"h1"),nt(5,"Something went wrong."),Be(),Le(6,"h4"),nt(7,"Your link seems to be incomplete, corrupted or invalid."),Be(),Le(8,"h4"),nt(9,"Please contact the owner."),Be()())}let Hke=(()=>{class n{constructor(e,r,i,o,s,a){this.route=e,this.router=r,this.fileService=i,this.keystoreService=o,this.keystoreStorageService=s,this.directoryService=a,this.error=!1}ngOnInit(){this.parseParamsAndCallProcessingMethod(this.route.queryParams)}parseParamsAndCallProcessingMethod(e){var r=this;e.subscribe(function(){var i=(0,Xe.Z)(function*(o){o.file?yield r.processShareFile(o.file,o.key,o.group):o.group?yield r.processShareFolder(o.folder,o.group,o.keystore,o.keystoreEncryptionKey):(r.error=!0,vp(()=>new Bke("Your link is incomplete or corrupted. Please check with the owner of the file.")))});return function(o){return i.apply(this,arguments)}}())}processShareFile(e,r,i){var o=this;return(0,Xe.Z)(function*(){yield o.fileService.addCurrentUserToGroup(i),yield(yield o.keystoreService.getSharedFilesKeystore()).addKey(e,atob(r)),yield o.router.navigate(["preview"],{queryParams:{url:e}})})()}processShareFolder(e,r,i,o){var s=this;return(0,Xe.Z)(function*(){yield s.fileService.addCurrentUserToGroup(r);const a=s.keystoreStorageService.createSecureStorage(o);yield s.keystoreService.addKeystore(new d0(i,e,a,s.directoryService)),yield s.router.navigate(["files"],{queryParams:{url:e}})})()}}return n.\u0275fac=function(e){return new(e||n)(xe(Il),xe(Ei),xe(Ca),xe(lg),xe(WV),xe(kd))},n.\u0275cmp=Jt({type:n,selectors:[["app-share"]],decls:3,vars:2,consts:[[1,"box"],[4,"ngIf"],["mode","indeterminate",2,"width","400px"],[1,"icon-container"],[1,"large-icon"]],template:function(e,r){1&e&&(Le(0,"div",0),vt(1,Uke,4,0,"div",1),vt(2,jke,10,0,"div",1),Be()),2&e&&(it(1),ut("ngIf",!r.error),it(1),ut("ngIf",r.error))},directives:[gi,Wg,md],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%}.large-icon[_ngcontent-%COMP%]{transform:scale(4);color:#e38c45;margin-bottom:2rem}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}"]}),n})();function Vke(n,t){1&n&&(Le(0,"th",13),nt(1,"Type"),Be())}function zke(n,t){if(1&n&&(Le(0,"td",14),nt(1),Be()),2&n){const e=t.$implicit;it(1),Tr(" ",e.url.includes("folder=")?"Folder":"File"," ")}}function Wke(n,t){1&n&&(Le(0,"th",13),nt(1,"Name"),Be())}function $ke(n,t){if(1&n&&(Le(0,"td",14),nt(1),Be()),2&n){const e=t.$implicit;it(1),Oi(e.resourceName)}}function Kke(n,t){1&n&&(Le(0,"th",13),nt(1,"Url"),Be())}function Gke(n,t){if(1&n&&(Le(0,"td",15),nt(1),dc(2,"slice"),Be()),2&n){const e=t.$implicit;it(1),Tr(" ",function pL(n,t,e,r,i){const o=n+20,s=Mt(),a=Of(s,o);return Um(s,o)?dL(s,Os(),t,a.transform,e,r,i,a):a.transform(e,r,i)}(2,1,e.url,0,60),"... ")}}function qke(n,t){1&n&&(Le(0,"th",13),nt(1,"Actions"),Be())}function Jke(n,t){if(1&n){const e=Dr();Le(0,"td",15)(1,"button",16)(2,"mat-icon",17),nt(3,"more_horiz"),Be()(),Le(4,"mat-menu",null,18)(6,"button",19),At("click",function(){const o=In(e).$implicit;return _t(2).copyUrl(o.url,o.resourceName)}),nt(7," Copy URL "),Be(),Le(8,"button",19),At("click",function(){const o=In(e).$implicit;return _t(2).deactivateLink(o.url)}),nt(9," Deactivate "),Be()()()}if(2&n){const e=Al(5);it(1),ut("matMenuTriggerFor",e)}}function Zke(n,t){1&n&&qt(0,"tr",20)}function Yke(n,t){1&n&&qt(0,"tr",21)}function Xke(n,t){if(1&n&&(Le(0,"div",2)(1,"table",3),Ii(2,4),vt(3,Vke,2,0,"th",5),vt(4,zke,2,1,"td",6),Ri(),Ii(5,7),vt(6,Wke,2,0,"th",5),vt(7,$ke,2,1,"td",6),Ri(),Ii(8,8),vt(9,Kke,2,0,"th",5),vt(10,Gke,3,5,"td",9),Ri(),Ii(11,10),vt(12,qke,2,0,"th",5),vt(13,Jke,10,1,"td",9),Ri(),vt(14,Zke,1,0,"tr",11),vt(15,Yke,1,0,"tr",12),Be()()),2&n){const e=_t();it(1),ut("dataSource",e.resourcesSharedByMe),it(13),ut("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),it(1),ut("matRowDefColumns",e.displayedColumns)}}const Qke=[{path:"",component:Ode},{path:"files",component:BAe,canActivate:[hg]},{path:"preview",component:Lke,canActivate:[hg]},{path:"home",component:bye,canActivate:[hg]},{path:"editor",component:BEe,canActivate:[hg]},{path:"links",component:(()=>{class n{constructor(e,r,i,o,s,a){this.keystoreService=e,this.router=r,this.clipboard=i,this.notificationService=o,this.linkShareService=s,this.sharedByMeService=a,this.resourcesSharedByMe=[],this.displayedColumns=["type","fileName","url","actions"]}ngOnInit(){var e=this;return(0,Xe.Z)(function*(){yield e.loadLinks()})()}loadLinks(){var e=this;return(0,Xe.Z)(function*(){e.resourcesSharedByMe=[],(yield e.sharedByMeService.getAllSharedByMe()).links.forEach(i=>{e.resourcesSharedByMe.push({resourceName:i.resourceName,url:i.link})})})()}copyUrl(e,r){var i=this;return(0,Xe.Z)(function*(){i.clipboard.copy(e),i.notificationService.success({title:"",message:"Copied url for "+r})})()}deactivateLink(e){var r=this;return(0,Xe.Z)(function*(){r.linkShareService.deactivateLink(e),yield r.loadLinks(),yield r.router.navigate(["/"])})()}}return n.\u0275fac=function(e){return new(e||n)(xe(lg),xe(Ei),xe(RR),xe(pd),xe(IR),xe(W$))},n.\u0275cmp=Jt({type:n,selectors:[["app-shared-by-me"]],decls:6,vars:1,consts:[[1,"container","content"],["class","mat-elevation-z8 scroll-container","style","width: 100%",4,"ngIf"],[1,"mat-elevation-z8","scroll-container",2,"width","100%"],["mat-table","",3,"dataSource"],["matColumnDef","type"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fileName"],["matColumnDef","url"],["class","","mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,""],["mat-icon-button","",2,"color","gray",3,"matMenuTriggerFor"],["title","Options",1,"mat-icon"],["folder_menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(Le(0,"div",0),qt(1,"br"),Le(2,"h3"),nt(3,"Shared Links created by you."),Be(),qt(4,"br"),vt(5,Xke,16,4,"div",1),Be()),2&e&&(it(5),ut("ngIf",r.resourcesSharedByMe.length>0))},directives:[gi,gI,a1,s1,l1,o1,c1,Qo,VR,md,HR,Kg,mI,vI,yI,_I],pipes:[R3],styles:[".scroll-container[_ngcontent-%COMP%]{max-height:400px;max-width:100%;overflow:auto}.mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background-color:#f4cfab}table[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{width:100%;white-space:nowrap;overflow:auto;text-overflow:ellipsis}.truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.container[_ngcontent-%COMP%]{width:100%;max-width:1200px;min-width:320px;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}"]}),n})(),canActivate:[hg]},{path:"share",component:Hke,canActivate:[hg]},{path:"faq",component:xke},{path:"**",component:dle}];let eDe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[o8.forRoot(Qke)],o8]}),n})(),tDe=(()=>{class n{constructor(e,r,i,o,s){this.dialogRef=e,this.masterPasswordService=r,this.encryptionService=i,this.notificationService=o,this.keystoreService=s,this.old_password="",this.new_password="",this.repeated_password=""}changePassword(){var e=this;return(0,Xe.Z)(function*(){const r=e.encryptionService.SHA256Salted(e.old_password);return(yield e.masterPasswordService.getMasterPassword())!=r?(e.notificationService.error({title:"Password error",message:"old password does not match"}),void e.dialogRef.close()):e.new_password!=e.repeated_password?(e.notificationService.error({title:"Password",message:"new password not repeated correctly"}),void e.dialogRef.close()):(yield e.keystoreService.loadKeystores(),yield e.masterPasswordService.setMasterPassword(e.new_password),yield e.keystoreService.saveKeystoresMetadata(),e.notificationService.success({title:"Password",message:"Password changed successfully"}),void e.dialogRef.close())})()}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(xe(ol),xe(zV),xe(qh),xe(pd),xe(lg))},n.\u0275cmp=Jt({type:n,selectors:[["app-change-password"]],decls:27,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["for","old-password"],["matInput","","type","password","id","old-password",3,"ngModel","ngModelChange"],["for","new-password"],["matInput","","type","password","id","new-password",3,"ngModel","ngModelChange"],["for","repeat-password"],["matInput","","type","password","id","repeat-password",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["id","close","mat-button","",3,"click"],["id","change","mat-button","",3,"click"]],template:function(e,r){1&e&&(Le(0,"h1",0),nt(1,"Change Masterpassword"),Be(),Le(2,"p")(3,"b"),nt(4,"IMPORTANT:"),Be(),nt(5," do not lose this key else your data will be lost"),Be(),Le(6,"div",1)(7,"p")(8,"mat-form-field")(9,"mat-label",2),nt(10,"old password"),Be(),Le(11,"input",3),At("ngModelChange",function(o){return r.old_password=o}),Be()()(),Le(12,"p")(13,"mat-form-field")(14,"mat-label",4),nt(15,"new password"),Be(),Le(16,"input",5),At("ngModelChange",function(o){return r.new_password=o}),Be()()(),Le(17,"p")(18,"mat-form-field")(19,"mat-label",6),nt(20,"repeat password"),Be(),Le(21,"input",7),At("ngModelChange",function(o){return r.repeated_password=o}),Be()()()(),Le(22,"div",8)(23,"button",9),At("click",function(){return r.close()}),nt(24,"Close"),Be(),Le(25,"button",10),At("click",function(){return r.changePassword()}),nt(26,"Change"),Be()()),2&e&&(it(11),ut("ngModel",r.old_password),it(5),ut("ngModel",r.new_password),it(5),ut("ngModel",r.repeated_password))},directives:[Eu,Ad,Mh,mu,Ih,xa,ta,Pp,Au,Qo],styles:[""]}),n})();const nDe=["*",[["mat-toolbar-row"]]],rDe=["*","mat-toolbar-row"],iDe=Eh(class{constructor(n){this._elementRef=n}});let oDe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=bt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),sDe=(()=>{class n extends iDe{constructor(e,r,i){super(e),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(ps),xe(zn))},n.\u0275cmp=Jt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,r,i){if(1&e&&pr(i,oDe,5),2&e){let o;un(o=dn())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,r){2&e&&br("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Ht],ngContentSelectors:rDe,decls:2,vars:0,template:function(e,r){1&e&&(no(nDe),ur(0),ur(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),RK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({imports:[[ir],ir]}),n})(),aDe=(()=>{class n{constructor(e,r,i,o){this.element=e,this.templateRef=r,this.viewContainer=i,this.solidAuthenticationService=o}ngOnInit(){this.solidAuthenticationService.isLoggedIn().subscribe(e=>{e?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}}return n.\u0275fac=function(e){return new(e||n)(xe(vn),xe(Pi),xe(Fi),xe(Rl))},n.\u0275dir=bt({type:n,selectors:[["","appLoggedIn",""]]}),n})();function lDe(n,t){1&n&&(Le(0,"li",3)(1,"a",9),nt(2,"Home"),Be()())}function cDe(n,t){1&n&&(Le(0,"li",3)(1,"a",10),nt(2,"Files"),Be()())}const uDe=function(){return["/links"]};function dDe(n,t){if(1&n){const e=Dr();Le(0,"div",11)(1,"button",12)(2,"mat-icon",13),nt(3,"account_circle"),Be()(),Le(4,"mat-menu",null,14)(6,"button",15),At("click",function(){return In(e),_t().changeMasterPassword()}),nt(7," Change Password "),Be(),Le(8,"button",16),nt(9,"Created Links"),Be(),Le(10,"button",15),At("click",function(){return In(e),_t().logout()}),nt(11,"Logout"),Be()()()}if(2&n){const e=Al(5);it(1),ut("matMenuTriggerFor",e),it(7),ut("routerLink",Nm(2,uDe))}}let hDe=(()=>{class n{constructor(e,r,i){this.solidAuthenticationService=e,this.dialog=r,this.keyStoreService=i,this.darkModeToggleEvent=new Mn,this.toggleControl=new gs(!1)}ngOnInit(){const e="darkMode"===window.localStorage.getItem("darkMode");this.toggleControl.setValue(e),this.toggleControl.valueChanges.subscribe(()=>this.darkModeToggleEvent.emit(e))}toggleDarkMode(e){this.toggleControl.valueChanges.subscribe(()=>{this.darkModeToggleEvent.emit(e.checked)})}logout(){this.solidAuthenticationService.logout()}changeMasterPassword(){var e=this;return(0,Xe.Z)(function*(){const r=e.dialog.open(tDe,{});return yield Jh(r.afterClosed())})()}}return n.\u0275fac=function(e){return new(e||n)(xe(Rl),xe(Zh),xe(lg))},n.\u0275cmp=Jt({type:n,selectors:[["app-navbar"]],outputs:{darkModeToggleEvent:"darkModeToggleEvent"},decls:17,vars:1,consts:[["color","accent"],["routerLink",""],["routerLinkActive","active",4,"appLoggedIn"],["routerLinkActive","active"],["routerLink","faq"],[1,"spacer"],["style","margin-right: 1em",4,"appLoggedIn"],[2,"margin-right","0.5em"],["ngDefaultControl","",2,"margin-right","0.5em",3,"formControl","change"],["routerLink","home"],["routerLink","files"],[2,"margin-right","1em"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor"],["data-cy","nav-account-icon"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink"]],template:function(e,r){1&e&&(Le(0,"mat-toolbar",0)(1,"h1")(2,"a",1),nt(3,"SolidCryptPad"),Be()(),Le(4,"ul"),vt(5,lDe,3,0,"li",2),vt(6,cDe,3,0,"li",2),Le(7,"li",3)(8,"a",4),nt(9,"FAQ"),Be()()(),qt(10,"span",5),vt(11,dDe,12,3,"div",6),Le(12,"mat-icon",7),nt(13,"brightness_5"),Be(),Le(14,"mat-slide-toggle",8),At("change",function(o){return r.toggleDarkMode(o)}),Be(),Le(15,"mat-icon"),nt(16,"bedtime"),Be()()),2&e&&(it(14),ut("formControl",r.toggleControl))},directives:[sDe,ly,aDe,Q4,Qo,VR,md,HR,Kg,xp,FR,xa,ta,Dh],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{text-decoration:inherit;color:inherit}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding-right:1em}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{text-decoration:underline;text-underline-offset:.2em}"]}),n})(),fDe=(()=>{class n{constructor(e,r,i,o){this.solidFileHandler=e,this.matIconRegistry=r,this.domSanitizer=i,this.redirect=o,this.link="",this.className=window.localStorage.getItem("darkMode")}toggleDarkMode(e){this.className=e?"":"darkMode",window.localStorage.setItem("darkMode",this.className)}ngOnInit(){this.matIconRegistry.addSvgIcon("solid",this.domSanitizer.bypassSecurityTrustResourceUrl("../assets/solid-emblem.svg")),this.redirect.tryRedirect()}}return n.\u0275fac=function(e){return new(e||n)(xe(Ca),xe(Dy),xe(fc),xe(QV))},n.\u0275cmp=Jt({type:n,selectors:[["app-root"]],hostVars:2,hostBindings:function(e,r){2&e&&Ho(r.className)},decls:3,vars:0,consts:[[3,"darkModeToggleEvent"],[1,"mat-app-background",2,"height","100vh"]],template:function(e,r){1&e&&(Le(0,"app-navbar",0),At("darkModeToggleEvent",function(o){return r.toggleDarkMode(o)}),Be(),Le(1,"div",1),qt(2,"router-outlet"),Be())},directives:[hDe,jE],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{text-decoration:inherit;color:inherit}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding-right:1em}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{text-decoration:underline;text-underline-offset:.2em}"]}),n})(),pDe=(()=>{class n extends ic{constructor(e){super(),this.injector=e,this.notificationService=void 0}handleError(e){void 0===this.notificationService&&(this.notificationService=this.injector.get(pd)),"rejection"in e&&(e=e.rejection),console.error(e),this.notificationService.error(e instanceof Zi?{title:e.title,message:e.message}:{title:"Unknown Error",message:"an unknown error occured"})}}return n.\u0275fac=function(e){return new(e||n)(lt(Ci))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gDe extends Zi{constructor(t,e){super("NotImplementedException",t,"This feature  has not been implemented yet",e)}}function mDe(){var n;return null===(n=window.cypress)||void 0===n?void 0:n.authenticationMock.use}let yDe=(()=>{class n extends Rl{constructor(){super(),this.oidcList=[{name:"Solid Web",url:"https://solidweb.org/"},{name:"Solid Community",url:"https://solidcommunity.net/"},{name:"Inrupt",url:"https://inrupt.net/"}],console.log("using mocked authentication service")}getDefaultOidcProviders(){const e=[];return this.oidcList.forEach(r=>e.push(Object.assign({},r))),e}initializeLoginStatus(){var e=this;return(0,Xe.Z)(function*(){var r;if(console.log("initializing mock authentication service"),!(null===(r=window.cypress)||void 0===r?void 0:r.authenticationMock.use)||!window.cypress.authenticationMock.fetch)throw new Ed("could not find mock login credentials");e.authFetch=window.cypress.authenticationMock.fetch,e.webId=window.cypress.authenticationMock.webId,console.log("mock authentication service initialized for "+e.webId)})()}isLoggedIn(){return An(!0)}goToLoginPage(){throw new gDe("goToLoginPage is not implemented for mock authentication service")}authenticatedFetch(e,r){var i=this;return(0,Xe.Z)(function*(){if(!i.authFetch)throw new Ed("Tried to use mocked authenticatedFetch before initialitzed");return i.authFetch(e,r)})()}getWebId(){var e=this;return(0,Xe.Z)(function*(){if(!e.webId)throw new Ed("Tried to use getWebId before initialitzed");return e.webId})()}logout(){throw new Error("logout is not implemented for mock authentication service")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();var vDe=F(1385);class _De extends Zi{constructor(t,e){super("RequiresLoginException",t,"Login required",e)}}let bDe=(()=>{class n extends Rl{constructor(e,r){super(),this.router=e,this.userLocalStorage=r,this.oidcList=[{name:"Solid Web",url:"https://solidweb.org/"},{name:"Solid Community",url:"https://solidcommunity.net/"},{name:"Inrupt",url:"https://inrupt.net/"}],this.authnBrowser=vDe}getDefaultOidcProviders(){const e=[];return this.oidcList.forEach(r=>e.push(Object.assign({},r))),e}initializeLoginStatus(){var e=this;return(0,Xe.Z)(function*(){e.authnBrowser.onSessionRestore(r=>e.onSessionRestore(r)),yield e.authnBrowser.handleIncomingRedirect({restorePreviousSession:!0})})()}onSessionRestore(e){const r=new URL(e);this.router.navigateByUrl(r.pathname+r.search+r.hash)}isLoggedIn(){return An(this.authnBrowser.getDefaultSession().info.isLoggedIn)}goToLoginPage(e){var r=this;return(0,Xe.Z)(function*(){yield r.authnBrowser.login({oidcIssuer:e,redirectUrl:window.location.href,clientName:"SolidCryptPad"})})()}authenticatedFetch(e,r){var i=this;return(0,Xe.Z)(function*(){return i.authnBrowser.fetch(e,r)})()}getWebId(){var e=this;return(0,Xe.Z)(function*(){if(yield e.isLoggedIn()){const r=e.authnBrowser.getDefaultSession().info.webId;if(!r)throw new Ed("Could not find webId despite being logged in");return r}throw new _De("Not authenticated yet!")})()}logout(){return this.authnBrowser.onLogout(()=>{this.router.navigate(["/"]),setTimeout(()=>{window.location.reload()},0)}),this.userLocalStorage.clear(),this.authnBrowser.getDefaultSession().logout()}}return n.\u0275fac=function(e){return new(e||n)(lt(Ei),lt(VV))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})();const EDe={provide:new Ot("mat-select-scroll-strategy"),deps:[_c],useFactory:function CDe(n){return()=>n.scrollStrategies.reposition()}};let ADe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[EDe],imports:[[Xs,Ey,Cb,ir],Np,xy,Cb,ir]}),n})();const MDe={provide:new Ot("mat-tooltip-scroll-strategy"),deps:[_c],useFactory:function TDe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let RDe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[MDe],imports:[[Voe,Xs,Ey,ir],ir,Np]}),n})(),KR=(()=>{class n{constructor(){this.changes=new Ne,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,r,i)=>{if(0==i||0==r)return`0 of ${i}`;const o=e*r;return`${o+1} \u2013 ${o<(i=Math.max(i,0))?Math.min(o+r,i):o+r} of ${i}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LDe={provide:KR,deps:[[new za,new th,KR]],useFactory:function NDe(n){return n||new KR}};let BDe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n}),n.\u0275inj=mn({providers:[LDe],imports:[[Xs,T5,ADe,RDe,ir]]}),n})(),UDe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=En({type:n,bootstrap:[fDe]}),n.\u0275inj=mn({providers:[{provide:Rl,useClass:mDe()?yDe:bDe},{provide:g_,useFactory:t=>()=>t.initializeLoginStatus(),deps:[Rl],multi:!0},{provide:ic,useClass:pDe}],imports:[[zB,xy,HCe,jV,K3,eDe,Hae,RK,uAe,rke,RK,jV,T5,oce,bde,Owe,Tce.forRoot({closeButton:!0}),qCe,Ide,sde,xy,zB,TEe,rk,wke,wAe,Tke.forRoot(),MCe,qme,BDe]]}),n})();(function mee(){QL=!1})(),xne().bootstrapModule(UDe).catch(n=>console.error(n))},1977:(Ge,G,F)=>{const B=F(5599);Ge.exports=B},8229:Ge=>{class G{constructor(B){this.value=B||"b"+ ++G.nextId}equals(B){return!!B&&B.termType===this.termType&&B.value===this.value}}G.prototype.termType="BlankNode",G.nextId=0,Ge.exports=G},5599:(Ge,G,F)=>{const B=F(8229),C=F(7596),b=F(784),S=F(5494),k=F(5830),h=F(977),f=F(7241),L={namedNode:function u(M){return new k(M)},blankNode:function p(M){return new B(M)},literal:function w(M,N){return"string"==typeof N?-1===N.indexOf(":")?new S(M,N):new S(M,null,L.namedNode(N)):new S(M,null,N)},variable:function g(M){return new f(M)},defaultGraph:function x(){return L.defaultGraphInstance},triple:function m(M,N,I){return L.quad(M,N,I)},quad:function _(M,N,I,P){return new h(M,N,I,P||L.defaultGraphInstance)},fromTerm:function T(M){return b.call(L,M)},fromQuad:function D(M){return b.call(L,M)},defaultGraphInstance:new C};Ge.exports=L},7596:Ge=>{class G{equals(B){return!!B&&B.termType===this.termType}}G.prototype.termType="DefaultGraph",G.prototype.value="",Ge.exports=G},5494:(Ge,G,F)=>{const B=F(5830);class C{constructor(S,k,h){this.value=S,this.datatype=C.stringDatatype,this.language="",k?(this.language=k,this.datatype=C.langStringDatatype):h&&(this.datatype=h)}equals(S){return!!S&&S.termType===this.termType&&S.value===this.value&&S.language===this.language&&S.datatype.equals(this.datatype)}}C.prototype.termType="Literal",C.langStringDatatype=new B("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),C.stringDatatype=new B("http://www.w3.org/2001/XMLSchema#string"),Ge.exports=C},5830:Ge=>{class G{constructor(B){this.value=B}equals(B){return!!B&&B.termType===this.termType&&B.value===this.value}}G.prototype.termType="NamedNode",Ge.exports=G},977:(Ge,G,F)=>{const B=F(7596);class C{constructor(S,k,h,f){this.subject=S,this.predicate=k,this.object=h,this.graph=f||new B}equals(S){return!!S&&("Quad"===S.termType||!S.termType)&&S.subject.equals(this.subject)&&S.predicate.equals(this.predicate)&&S.object.equals(this.object)&&S.graph.equals(this.graph)}}C.prototype.termType="Quad",C.prototype.value="",Ge.exports=C},7241:Ge=>{class G{constructor(B){this.value=B}equals(B){return!!B&&B.termType===this.termType&&B.value===this.value}}G.prototype.termType="Variable",Ge.exports=G},784:Ge=>{Ge.exports=function G(F){if(!F)return null;if("BlankNode"===F.termType)return this.blankNode(F.value);if("DefaultGraph"===F.termType)return this.defaultGraph();if("Literal"===F.termType)return this.literal(F.value,F.language||this.namedNode(F.datatype.value));if("NamedNode"===F.termType)return this.namedNode(F.value);if("Quad"===F.termType){const B=this.fromTerm(F.subject),C=this.fromTerm(F.predicate),b=this.fromTerm(F.object),S=this.fromTerm(F.graph);return this.quad(B,C,b,S)}if("Variable"===F.termType)return this.variable(F.value);throw new Error(`unknown termType ${F.termType}`)}},8421:Ge=>{function G(k){return"string"==typeof k||k instanceof String}function B(k){if("string"==typeof k)return k;if(!k)return"";if(void 0!==k.id&&"Quad"!==k.termType)return k.id;let h,f,u,p;switch(k.termType){case"NamedNode":return k.value;case"BlankNode":return`_:${k.value}`;case"Variable":return`?${k.value}`;case"DefaultGraph":return"";case"Literal":return k.language?`"${k.value}"@${k.language}`:`"${k.value}"${k.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==k.datatype.value?`^^${k.datatype.value}`:""}`;case"Quad":return h=b(B(k.subject)),f=b(B(k.predicate)),u=b(B(k.object)),p="DefaultGraph"===k.graph.termType?"":` ${B(k.graph)}`,`<<${h} ${f} ${u}${p}>>`;default:throw new Error(`Unexpected termType: ${k.termType}`)}}const C=/^"(.*".*)(?="[^"]*$)/;function b(k){return k.replace(C,(h,f)=>`"${f.replace(/"/g,'""')}`)}class S{constructor(h){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,h)for(const f of h)this.add(f)}get size(){let h=this._size;if(null!==h)return h;h=0;const f=this._graphs;let u,p;for(const w in f)for(const g in u=f[w].subjects)for(const x in p=u[g])h+=Object.keys(p[x]).length;return this._size=h,this._size}add(h){let f=B(h.subject),u=B(h.predicate),p=B(h.object);const w=B(h.graph);let g=this._graphs[w];g||(g=this._graphs[w]={subjects:{},predicates:{},objects:{}},Object.freeze(g));const x=this._ids,m=this._entities;return f=x[f]||(x[m[++this._id]=f]=this._id),u=x[u]||(x[m[++this._id]=u]=this._id),p=x[p]||(x[m[++this._id]=p]=this._id),this._addToIndex(g.subjects,f,u,p),this._addToIndex(g.predicates,u,p,f),this._addToIndex(g.objects,p,f,u),this._setQuad(f,u,p,w,h),this._size=null,this}delete(h){let f=B(h.subject),u=B(h.predicate),p=B(h.object);const w=B(h.graph),g=this._ids,x=this._graphs;let m,_,T;if(!((f=g[f])&&(u=g[u])&&(p=g[p])&&(m=x[w])&&(_=m.subjects[f])&&(T=_[u])&&p in T))return this;for(f in this._removeFromIndex(m.subjects,f,u,p),this._removeFromIndex(m.predicates,u,p,f),this._removeFromIndex(m.objects,p,f,u),null!==this._size&&this._size--,this._deleteQuad(f,u,p,w),m.subjects)return this;return delete x[w],this}has(h){const f=B(h.subject),u=B(h.predicate),p=B(h.object),w=B(h.graph),g=this._graphs[w];if(!g)return!1;const x=this._ids;let m,_,T;return!(G(f)&&!(m=x[f])||G(u)&&!(_=x[u])||G(p)&&!(T=x[p]))&&1===this._countInIndex(g.objects,T,m,_)}match(h,f,u,p){return this._createDataset(this._match(h,f,u,p))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(h,f,u,p){const w=h[f]||(h[f]={}),g=w[u]||(w[u]={}),x=p in g;return x||(g[p]=null),!x}_removeFromIndex(h,f,u,p){const w=h[f],g=w[u];delete g[p];for(const x in g)return;delete w[u];for(const x in w)return;delete h[f]}_findInIndex(h,f,u,p,w,g,x,m,_,T){let D,L,M;f&&((D=h,h={})[f]=D[f]);for(const N in h)if(L=h[N],L){u&&((D=L,L={})[u]=D[u]);for(const I in L)if(M=L[I],M){const P=p?p in M?[p]:[]:Object.keys(M);for(let V=0;V<P.length;V++){const j={[w]:N,[g]:I,[x]:P[V]},oe=this._getQuad(j.subject,j.predicate,j.object,m);if(T)T.push(oe);else if(_(oe))return!0}}}return T}_countInIndex(h,f,u,p){let g,x,m,w=0;f&&((g=h,h={})[f]=g[f]);for(const _ in h)if(x=h[_],x){u&&((g=x,x={})[u]=g[u]);for(const T in x)m=x[T],m&&(p?p in m&&w++:w+=Object.keys(m).length)}return w}_getGraphs(h){return G(h)?{[h]:this._graphs[h]}:this._graphs}_match(h,f,u,p){h=h&&B(h),f=f&&B(f),u=u&&B(u),p=p&&B(p);const w=[],g=this._getGraphs(p),x=this._ids;let m,_,T,D;if(G(h)&&!(_=x[h])||G(f)&&!(T=x[f])||G(u)&&!(D=x[u]))return w;for(const L in g)m=g[L],m&&(_?D?this._findInIndex(m.objects,D,_,T,"object","subject","predicate",L,null,w):this._findInIndex(m.subjects,_,T,null,"subject","predicate","object",L,null,w):T?this._findInIndex(m.predicates,T,D,null,"predicate","object","subject",L,null,w):D?this._findInIndex(m.objects,D,null,null,"object","subject","predicate",L,null,w):this._findInIndex(m.subjects,null,null,null,"subject","predicate","object",L,null,w));return w}_getQuad(h,f,u,p){return this._quads.get(this._toId(h,f,u,p))}_setQuad(h,f,u,p,w){this._quads.set(this._toId(h,f,u,p),w)}_deleteQuad(h,f,u,p){this._quads.delete(this._toId(h,f,u,p))}_createDataset(h){return new this.constructor(h)}_toId(h,f,u,p){return`${h}:${f}:${u}:${p}`}}Ge.exports=S},5122:(Ge,G,F)=>{const B=F(1977),C=F(8421);Ge.exports=Object.assign({dataset:function b(S){return new C(S)}},B)},5423:Ge=>{"use strict";Ge.exports=function G(F){return null===F||"object"!=typeof F||null!=F.toJSON?JSON.stringify(F):Array.isArray(F)?"["+F.reduce((B,C,b)=>B+(0===b?"":",")+G(void 0===C||"symbol"==typeof C?null:C),"")+"]":"{"+Object.keys(F).sort().reduce((B,C,b)=>void 0===F[C]||"symbol"==typeof F[C]?B:B+(0===B.length?"":",")+G(C)+":"+G(F[C]),"")+"}"}},5495:function(Ge,G){"use strict";var b,S,k,h,f,u,p,w,g,x,m,_,T,D,L,M,N,I,P,V,j,oe,be,F=this&&this.__extends||(be=function(de,we){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ye,ze){Ye.__proto__=ze}||function(Ye,ze){for(var He in ze)Object.prototype.hasOwnProperty.call(ze,He)&&(Ye[He]=ze[He])})(de,we)},function(de,we){if("function"!=typeof we&&null!==we)throw new TypeError("Class extends value "+String(we)+" is not a constructor or null");function Ye(){this.constructor=de}be(de,we),de.prototype=null===we?Object.create(we):(Ye.prototype=we.prototype,new Ye)}),B=this&&this.__classPrivateFieldSet||function(be,de,we){if(!de.has(be))throw new TypeError("attempted to set private field on non-instance");return de.set(be,we),we},C=this&&this.__classPrivateFieldGet||function(be,de){if(!de.has(be))throw new TypeError("attempted to get private field on non-instance");return de.get(be)};G.__esModule=!0,G.default=void 0;var J=function(be){var Ye=0;be+="x";for(var ze=Math.floor(65745979961613.07),He=0;He<be.length;He++)Ye>ze&&(Ye=Math.floor(Ye/137)),Ye=131*Ye+be.charCodeAt(He);return Ye},le="0123456789abcdef".split(""),q=[-2147483648,8388608,32768,128],ue=[24,16,8,0],he=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ce=[],pe=function(){function be(de,we){void 0===de&&(de=!1),void 0===we&&(we=!1),b.set(this,void 0),S.set(this,void 0),k.set(this,void 0),h.set(this,void 0),f.set(this,void 0),u.set(this,void 0),p.set(this,void 0),w.set(this,void 0),g.set(this,void 0),x.set(this,void 0),m.set(this,void 0),_.set(this,void 0),T.set(this,void 0),D.set(this,void 0),L.set(this,void 0),M.set(this,void 0),N.set(this,0),I.set(this,void 0),this.init(de,we)}return be.prototype.init=function(de,we){we?(ce[0]=ce[16]=ce[1]=ce[2]=ce[3]=ce[4]=ce[5]=ce[6]=ce[7]=ce[8]=ce[9]=ce[10]=ce[11]=ce[12]=ce[13]=ce[14]=ce[15]=0,B(this,S,ce)):B(this,S,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),de?(B(this,u,3238371032),B(this,p,914150663),B(this,w,812702999),B(this,g,4144912697),B(this,x,4290775857),B(this,m,1750603025),B(this,_,1694076839),B(this,T,3204075428)):(B(this,u,1779033703),B(this,p,3144134277),B(this,w,1013904242),B(this,g,2773480762),B(this,x,1359893119),B(this,m,2600822924),B(this,_,528734635),B(this,T,1541459225)),B(this,b,B(this,I,B(this,k,B(this,L,0)))),B(this,h,B(this,D,!1)),B(this,f,!0),B(this,M,de)},be.prototype.update=function(de){if(C(this,h))return this;for(var we,Ye=0,ze=(we=de instanceof ArrayBuffer?new Uint8Array(de):de).length,He=C(this,S);Ye<ze;){var Ne=void 0;if(C(this,D)&&(B(this,D,!1),He[0]=C(this,b),He[16]=He[1]=He[2]=He[3]=He[4]=He[5]=He[6]=He[7]=He[8]=He[9]=He[10]=He[11]=He[12]=He[13]=He[14]=He[15]=0),"string"!=typeof we)for(Ne=C(this,I);Ye<ze&&Ne<64;++Ye)He[Ne>>2]|=we[Ye]<<ue[3&Ne++];else for(Ne=C(this,I);Ye<ze&&Ne<64;++Ye){var ye=we.charCodeAt(Ye);ye<128?He[Ne>>2]|=ye<<ue[3&Ne++]:ye<2048?(He[Ne>>2]|=(192|ye>>6)<<ue[3&Ne++],He[Ne>>2]|=(128|63&ye)<<ue[3&Ne++]):ye<55296||ye>=57344?(He[Ne>>2]|=(224|ye>>12)<<ue[3&Ne++],He[Ne>>2]|=(128|ye>>6&63)<<ue[3&Ne++],He[Ne>>2]|=(128|63&ye)<<ue[3&Ne++]):(ye=65536+((1023&ye)<<10|1023&we.charCodeAt(++Ye)),He[Ne>>2]|=(240|ye>>18)<<ue[3&Ne++],He[Ne>>2]|=(128|ye>>12&63)<<ue[3&Ne++],He[Ne>>2]|=(128|ye>>6&63)<<ue[3&Ne++],He[Ne>>2]|=(128|63&ye)<<ue[3&Ne++])}B(this,N,Ne),B(this,k,C(this,k)+(Ne-C(this,I))),Ne>=64?(B(this,b,He[16]),B(this,I,Ne-64),this.hash(),B(this,D,!0)):B(this,I,Ne)}return C(this,k)>4294967295&&(B(this,L,C(this,L)+(C(this,k)/4294967296<<0)),B(this,k,C(this,k)%4294967296)),this},be.prototype.finalize=function(){if(!C(this,h)){B(this,h,!0);var de=C(this,S),we=C(this,N);de[16]=C(this,b),de[we>>2]|=q[3&we],B(this,b,de[16]),we>=56&&(C(this,D)||this.hash(),de[0]=C(this,b),de[16]=de[1]=de[2]=de[3]=de[4]=de[5]=de[6]=de[7]=de[8]=de[9]=de[10]=de[11]=de[12]=de[13]=de[14]=de[15]=0),de[14]=C(this,L)<<3|C(this,k)>>>29,de[15]=C(this,k)<<3,this.hash()}},be.prototype.hash=function(){for(var te,R,H,Z,Ae,de=C(this,u),we=C(this,p),Ye=C(this,w),ze=C(this,g),He=C(this,x),Ne=C(this,m),ye=C(this,_),ee=C(this,T),ie=C(this,S),Ke=16;Ke<64;++Ke)ie[Ke]=ie[Ke-16]+(((te=ie[Ke-15])>>>7|te<<25)^(te>>>18|te<<14)^te>>>3)+ie[Ke-7]+(((te=ie[Ke-2])>>>17|te<<15)^(te>>>19|te<<13)^te>>>10)<<0;Ae=we&Ye;for(var Re=0;Re<64;Re+=4)C(this,f)?(C(this,M)?(R=300032,ee=(te=ie[0]-1413257819)-150054599<<0,ze=te+24177077<<0):(R=704751109,ee=(te=ie[0]-210244248)-1521486534<<0,ze=te+143694565<<0),B(this,f,!1)):(ee=ze+(te=ee+((He>>>6|He<<26)^(He>>>11|He<<21)^(He>>>25|He<<7))+(He&Ne^~He&ye)+he[Re]+ie[Re])<<0,ze=te+(((de>>>2|de<<30)^(de>>>13|de<<19)^(de>>>22|de<<10))+((R=de&we)^de&Ye^Ae))<<0),ye=Ye+(te=ye+((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&He^~ee&Ne)+he[Re+1]+ie[Re+1])<<0,Ye=te+(((ze>>>2|ze<<30)^(ze>>>13|ze<<19)^(ze>>>22|ze<<10))+((H=ze&de)^ze&we^R))<<0,Ne=we+(te=Ne+((ye>>>6|ye<<26)^(ye>>>11|ye<<21)^(ye>>>25|ye<<7))+(ye&ee^~ye&He)+he[Re+2]+ie[Re+2])<<0,we=te+(((Ye>>>2|Ye<<30)^(Ye>>>13|Ye<<19)^(Ye>>>22|Ye<<10))+((Z=Ye&ze)^Ye&de^H))<<0,He=de+(te=He+((Ne>>>6|Ne<<26)^(Ne>>>11|Ne<<21)^(Ne>>>25|Ne<<7))+(Ne&ye^~Ne&ee)+he[Re+3]+ie[Re+3])<<0,de=te+(((we>>>2|we<<30)^(we>>>13|we<<19)^(we>>>22|we<<10))+((Ae=we&Ye)^we&ze^Z))<<0;B(this,u,C(this,u)+de<<0),B(this,p,C(this,p)+we<<0),B(this,w,C(this,w)+Ye<<0),B(this,g,C(this,g)+ze<<0),B(this,x,C(this,x)+He<<0),B(this,m,C(this,m)+Ne<<0),B(this,_,C(this,_)+ye<<0),B(this,T,C(this,T)+ee<<0)},be.prototype.hex=function(){this.finalize();var de=C(this,u),we=C(this,p),Ye=C(this,w),ze=C(this,g),He=C(this,x),Ne=C(this,m),ye=C(this,_),ee=C(this,T),ie=le[de>>28&15]+le[de>>24&15]+le[de>>20&15]+le[de>>16&15]+le[de>>12&15]+le[de>>8&15]+le[de>>4&15]+le[15&de]+le[we>>28&15]+le[we>>24&15]+le[we>>20&15]+le[we>>16&15]+le[we>>12&15]+le[we>>8&15]+le[we>>4&15]+le[15&we]+le[Ye>>28&15]+le[Ye>>24&15]+le[Ye>>20&15]+le[Ye>>16&15]+le[Ye>>12&15]+le[Ye>>8&15]+le[Ye>>4&15]+le[15&Ye]+le[ze>>28&15]+le[ze>>24&15]+le[ze>>20&15]+le[ze>>16&15]+le[ze>>12&15]+le[ze>>8&15]+le[ze>>4&15]+le[15&ze]+le[He>>28&15]+le[He>>24&15]+le[He>>20&15]+le[He>>16&15]+le[He>>12&15]+le[He>>8&15]+le[He>>4&15]+le[15&He]+le[Ne>>28&15]+le[Ne>>24&15]+le[Ne>>20&15]+le[Ne>>16&15]+le[Ne>>12&15]+le[Ne>>8&15]+le[Ne>>4&15]+le[15&Ne]+le[ye>>28&15]+le[ye>>24&15]+le[ye>>20&15]+le[ye>>16&15]+le[ye>>12&15]+le[ye>>8&15]+le[ye>>4&15]+le[15&ye];return C(this,M)||(ie+=le[ee>>28&15]+le[ee>>24&15]+le[ee>>20&15]+le[ee>>16&15]+le[ee>>12&15]+le[ee>>8&15]+le[ee>>4&15]+le[15&ee]),ie},be.prototype.toString=function(){return this.hex()},be.prototype.digest=function(){this.finalize();var de=C(this,u),we=C(this,p),Ye=C(this,w),ze=C(this,g),He=C(this,x),Ne=C(this,m),ye=C(this,_),ee=C(this,T),ie=[de>>24&255,de>>16&255,de>>8&255,255&de,we>>24&255,we>>16&255,we>>8&255,255&we,Ye>>24&255,Ye>>16&255,Ye>>8&255,255&Ye,ze>>24&255,ze>>16&255,ze>>8&255,255&ze,He>>24&255,He>>16&255,He>>8&255,255&He,Ne>>24&255,Ne>>16&255,Ne>>8&255,255&Ne,ye>>24&255,ye>>16&255,ye>>8&255,255&ye];return C(this,M)||ie.push(ee>>24&255,ee>>16&255,ee>>8&255,255&ee),ie},be.prototype.array=function(){return this.digest()},be.prototype.arrayBuffer=function(){this.finalize();var de=new ArrayBuffer(C(this,M)?28:32),we=new DataView(de);return we.setUint32(0,C(this,u)),we.setUint32(4,C(this,p)),we.setUint32(8,C(this,w)),we.setUint32(12,C(this,g)),we.setUint32(16,C(this,x)),we.setUint32(20,C(this,m)),we.setUint32(24,C(this,_)),C(this,M)||we.setUint32(28,C(this,T)),de},be}();function Ee(be){var de=new pe;return de.update(be),parseInt(de.hex().substring(0,8),16)}b=new WeakMap,S=new WeakMap,k=new WeakMap,h=new WeakMap,f=new WeakMap,u=new WeakMap,p=new WeakMap,w=new WeakMap,g=new WeakMap,x=new WeakMap,m=new WeakMap,_=new WeakMap,T=new WeakMap,D=new WeakMap,L=new WeakMap,M=new WeakMap,N=new WeakMap,I=new WeakMap,function(be){function de(we,Ye,ze){void 0===Ye&&(Ye=!1),void 0===ze&&(ze=!1);var Ne,He=be.call(this,Ye,ze)||this;if(P.set(He,void 0),V.set(He,void 0),j.set(He,void 0),oe.set(He,void 0),"string"==typeof we){for(var ye=[],ee=we.length,ie=0,$=0;$<ee;++$){var se=we.charCodeAt($);se<128?ye[ie++]=se:se<2048?(ye[ie++]=192|se>>6,ye[ie++]=128|63&se):se<55296||se>=57344?(ye[ie++]=224|se>>12,ye[ie++]=128|se>>6&63,ye[ie++]=128|63&se):(se=65536+((1023&se)<<10|1023&we.charCodeAt(++$)),ye[ie++]=240|se>>18,ye[ie++]=128|se>>12&63,ye[ie++]=128|se>>6&63,ye[ie++]=128|63&se)}Ne=ye}else Ne=we instanceof ArrayBuffer?new Uint8Array(we):we;Ne.length>64&&(Ne=new pe(Ye,!0).update(Ne).array());var K=[],te=[];for($=0;$<64;++$){var X=Ne[$]||0;K[$]=92^X,te[$]=54^X}return He.update(te),B(He,j,K),B(He,P,!0),B(He,V,Ye),B(He,oe,ze),He}F(de,be),de.prototype.finalize=function(){if(be.prototype.finalize.call(this),C(this,P)){B(this,P,!1);var we=this.array();be.prototype.init.call(this,C(this,V),C(this,oe)),this.update(C(this,j)),this.update(we),be.prototype.finalize.call(this)}}}(pe),P=new WeakMap,V=new WeakMap,j=new WeakMap,oe=new WeakMap;var Te=function(be,de,we){var Ye=we<.5?we*(1+de):we+de-we*de,ze=2*we-Ye;return[(be/=360)+1/3,be,be-1/3].map(function(He){return He<0&&He++,He>1&&He--,He=He<1/6?ze+6*(Ye-ze)*He:He<.5?Ye:He<2/3?ze+6*(Ye-ze)*(2/3-He):ze,Math.round(255*He)})},De=function(){function be(de){void 0===de&&(de={});var we=[de.lightness,de.saturation].map(function(He){return He=void 0!==He?He:[.35,.5,.65],Array.isArray(He)?He.concat():[He]}),ze=we[1];this.L=we[0],this.S=ze,"number"==typeof de.hue&&(de.hue={min:de.hue,max:de.hue}),"object"==typeof de.hue&&!Array.isArray(de.hue)&&(de.hue=[de.hue]),void 0===de.hue&&(de.hue=[]),this.hueRanges=de.hue.map(function(He){return{min:void 0===He.min?0:He.min,max:void 0===He.max?360:He.max}}),this.hash=Ee,"function"==typeof de.hash&&(this.hash=de.hash),"bkdr"===de.hash&&(this.hash=J)}return be.prototype.hsl=function(de){var we,Ye,He=this.hash(de);if(this.hueRanges.length){var ye=this.hueRanges[He%this.hueRanges.length];we=He/this.hueRanges.length%727*(ye.max-ye.min)/727+ye.min}else we=He%359;return He=Math.ceil(He/360),Ye=this.S[He%this.S.length],He=Math.ceil(He/this.S.length),[we,Ye,this.L[He%this.L.length]]},be.prototype.rgb=function(de){var we=this.hsl(de);return Te.apply(this,we)},be.prototype.hex=function(de){return function(be){var de="#";return be.forEach(function(we){we<16&&(de+=0),de+=we.toString(16)}),de}(this.rgb(de))},be}();G.default=De},8472:function(Ge,G){var b,F="undefined"!=typeof self?self:this,B=function(){function b(){this.fetch=!1,this.DOMException=F.DOMException}return b.prototype=F,new b}();b=B,function(k){var h_searchParams="URLSearchParams"in b,h_iterable="Symbol"in b&&"iterator"in Symbol,h_blob="FileReader"in b&&"Blob"in b&&function(){try{return new Blob,!0}catch(he){return!1}}(),h_formData="FormData"in b,h_arrayBuffer="ArrayBuffer"in b;if(h_arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(he){return he&&u.indexOf(Object.prototype.toString.call(he))>-1};function w(he){if("string"!=typeof he&&(he=String(he)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(he))throw new TypeError("Invalid character in header field name");return he.toLowerCase()}function g(he){return"string"!=typeof he&&(he=String(he)),he}function x(he){var ce={next:function(){var pe=he.shift();return{done:void 0===pe,value:pe}}};return h_iterable&&(ce[Symbol.iterator]=function(){return ce}),ce}function m(he){this.map={},he instanceof m?he.forEach(function(ce,pe){this.append(pe,ce)},this):Array.isArray(he)?he.forEach(function(ce){this.append(ce[0],ce[1])},this):he&&Object.getOwnPropertyNames(he).forEach(function(ce){this.append(ce,he[ce])},this)}function _(he){if(he.bodyUsed)return Promise.reject(new TypeError("Already read"));he.bodyUsed=!0}function T(he){return new Promise(function(ce,pe){he.onload=function(){ce(he.result)},he.onerror=function(){pe(he.error)}})}function D(he){var ce=new FileReader,pe=T(ce);return ce.readAsArrayBuffer(he),pe}function N(he){if(he.slice)return he.slice(0);var ce=new Uint8Array(he.byteLength);return ce.set(new Uint8Array(he)),ce.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(he){this._bodyInit=he,he?"string"==typeof he?this._bodyText=he:h_blob&&Blob.prototype.isPrototypeOf(he)?this._bodyBlob=he:h_formData&&FormData.prototype.isPrototypeOf(he)?this._bodyFormData=he:h_searchParams&&URLSearchParams.prototype.isPrototypeOf(he)?this._bodyText=he.toString():h_arrayBuffer&&h_blob&&function f(he){return he&&DataView.prototype.isPrototypeOf(he)}(he)?(this._bodyArrayBuffer=N(he.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(he)||p(he))?this._bodyArrayBuffer=N(he):this._bodyText=he=Object.prototype.toString.call(he):this._bodyText="",this.headers.get("content-type")||("string"==typeof he?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h_searchParams&&URLSearchParams.prototype.isPrototypeOf(he)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h_blob&&(this.blob=function(){var he=_(this);if(he)return he;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(D)}),this.text=function(){var he=_(this);if(he)return he;if(this._bodyBlob)return function L(he){var ce=new FileReader,pe=T(ce);return ce.readAsText(he),pe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function M(he){for(var ce=new Uint8Array(he),pe=new Array(ce.length),fe=0;fe<ce.length;fe++)pe[fe]=String.fromCharCode(ce[fe]);return pe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h_formData&&(this.formData=function(){return this.text().then(oe)}),this.json=function(){return this.text().then(JSON.parse)},this}m.prototype.append=function(he,ce){he=w(he),ce=g(ce);var pe=this.map[he];this.map[he]=pe?pe+", "+ce:ce},m.prototype.delete=function(he){delete this.map[w(he)]},m.prototype.get=function(he){return he=w(he),this.has(he)?this.map[he]:null},m.prototype.has=function(he){return this.map.hasOwnProperty(w(he))},m.prototype.set=function(he,ce){this.map[w(he)]=g(ce)},m.prototype.forEach=function(he,ce){for(var pe in this.map)this.map.hasOwnProperty(pe)&&he.call(ce,this.map[pe],pe,this)},m.prototype.keys=function(){var he=[];return this.forEach(function(ce,pe){he.push(pe)}),x(he)},m.prototype.values=function(){var he=[];return this.forEach(function(ce){he.push(ce)}),x(he)},m.prototype.entries=function(){var he=[];return this.forEach(function(ce,pe){he.push([pe,ce])}),x(he)},h_iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);var P=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function j(he,ce){var pe=(ce=ce||{}).body;if(he instanceof j){if(he.bodyUsed)throw new TypeError("Already read");this.url=he.url,this.credentials=he.credentials,ce.headers||(this.headers=new m(he.headers)),this.method=he.method,this.mode=he.mode,this.signal=he.signal,!pe&&null!=he._bodyInit&&(pe=he._bodyInit,he.bodyUsed=!0)}else this.url=String(he);if(this.credentials=ce.credentials||this.credentials||"same-origin",(ce.headers||!this.headers)&&(this.headers=new m(ce.headers)),this.method=function V(he){var ce=he.toUpperCase();return P.indexOf(ce)>-1?ce:he}(ce.method||this.method||"GET"),this.mode=ce.mode||this.mode||null,this.signal=ce.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&pe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(pe)}function oe(he){var ce=new FormData;return he.trim().split("&").forEach(function(pe){if(pe){var fe=pe.split("="),Ee=fe.shift().replace(/\+/g," "),_e=fe.join("=").replace(/\+/g," ");ce.append(decodeURIComponent(Ee),decodeURIComponent(_e))}}),ce}function J(he){var ce=new m;return he.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(fe){var Ee=fe.split(":"),_e=Ee.shift().trim();if(_e){var Te=Ee.join(":").trim();ce.append(_e,Te)}}),ce}function le(he,ce){ce||(ce={}),this.type="default",this.status=void 0===ce.status?200:ce.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ce?ce.statusText:"OK",this.headers=new m(ce.headers),this.url=ce.url||"",this._initBody(he)}j.prototype.clone=function(){return new j(this,{body:this._bodyInit})},I.call(j.prototype),I.call(le.prototype),le.prototype.clone=function(){return new le(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},le.error=function(){var he=new le(null,{status:0,statusText:""});return he.type="error",he};var q=[301,302,303,307,308];le.redirect=function(he,ce){if(-1===q.indexOf(ce))throw new RangeError("Invalid status code");return new le(null,{status:ce,headers:{location:he}})},k.DOMException=b.DOMException;try{new k.DOMException}catch(he){k.DOMException=function(ce,pe){this.message=ce,this.name=pe;var fe=Error(ce);this.stack=fe.stack},k.DOMException.prototype=Object.create(Error.prototype),k.DOMException.prototype.constructor=k.DOMException}function ue(he,ce){return new Promise(function(pe,fe){var Ee=new j(he,ce);if(Ee.signal&&Ee.signal.aborted)return fe(new k.DOMException("Aborted","AbortError"));var _e=new XMLHttpRequest;function Te(){_e.abort()}_e.onload=function(){var De={status:_e.status,statusText:_e.statusText,headers:J(_e.getAllResponseHeaders()||"")};De.url="responseURL"in _e?_e.responseURL:De.headers.get("X-Request-URL"),pe(new le("response"in _e?_e.response:_e.responseText,De))},_e.onerror=function(){fe(new TypeError("Network request failed"))},_e.ontimeout=function(){fe(new TypeError("Network request failed"))},_e.onabort=function(){fe(new k.DOMException("Aborted","AbortError"))},_e.open(Ee.method,Ee.url,!0),"include"===Ee.credentials?_e.withCredentials=!0:"omit"===Ee.credentials&&(_e.withCredentials=!1),"responseType"in _e&&h_blob&&(_e.responseType="blob"),Ee.headers.forEach(function(De,be){_e.setRequestHeader(be,De)}),Ee.signal&&(Ee.signal.addEventListener("abort",Te),_e.onreadystatechange=function(){4===_e.readyState&&Ee.signal.removeEventListener("abort",Te)}),_e.send(void 0===Ee._bodyInit?null:Ee._bodyInit)})}ue.polyfill=!0,b.fetch||(b.fetch=ue,b.Headers=m,b.Request=j,b.Response=le),k.Headers=m,k.Request=j,k.Response=le,k.fetch=ue,Object.defineProperty(k,"__esModule",{value:!0})}({}),B.fetch.ponyfill=!0,delete B.fetch.polyfill;var C=B;(G=C.fetch).default=C.fetch,G.fetch=C.fetch,G.Headers=C.Headers,G.Request=C.Request,G.Response=C.Response,Ge.exports=G},7466:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(8319),F(9493),F(7865),F(3057),function(){var C=B,S=C.lib.BlockCipher,k=C.algo,h=[],f=[],u=[],p=[],w=[],g=[],x=[],m=[],_=[],T=[];!function(){for(var M=[],N=0;N<256;N++)M[N]=N<128?N<<1:N<<1^283;var I=0,P=0;for(N=0;N<256;N++){var V=P^P<<1^P<<2^P<<3^P<<4;h[I]=V=V>>>8^255&V^99,f[V]=I;var le,j=M[I],oe=M[j],J=M[oe];u[I]=(le=257*M[V]^16843008*V)<<24|le>>>8,p[I]=le<<16|le>>>16,w[I]=le<<8|le>>>24,g[I]=le,x[V]=(le=16843009*J^65537*oe^257*j^16843008*I)<<24|le>>>8,m[V]=le<<16|le>>>16,_[V]=le<<8|le>>>24,T[V]=le,I?(I=j^M[M[M[J^j]]],P^=M[M[P]]):I=P=1}}();var D=[0,1,2,4,8,16,32,64,128,27,54],L=k.AES=S.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var N=this._keyPriorReset=this._key,I=N.words,P=N.sigBytes/4,j=4*((this._nRounds=P+6)+1),oe=this._keySchedule=[],J=0;J<j;J++)J<P?oe[J]=I[J]:(M=oe[J-1],J%P?P>6&&J%P==4&&(M=h[M>>>24]<<24|h[M>>>16&255]<<16|h[M>>>8&255]<<8|h[255&M]):(M=h[(M=M<<8|M>>>24)>>>24]<<24|h[M>>>16&255]<<16|h[M>>>8&255]<<8|h[255&M],M^=D[J/P|0]<<24),oe[J]=oe[J-P]^M);for(var le=this._invKeySchedule=[],q=0;q<j;q++){if(J=j-q,q%4)var M=oe[J];else M=oe[J-4];le[q]=q<4||J<=4?M:x[h[M>>>24]]^m[h[M>>>16&255]]^_[h[M>>>8&255]]^T[h[255&M]]}}},encryptBlock:function(M,N){this._doCryptBlock(M,N,this._keySchedule,u,p,w,g,h)},decryptBlock:function(M,N){var I=M[N+1];M[N+1]=M[N+3],M[N+3]=I,this._doCryptBlock(M,N,this._invKeySchedule,x,m,_,T,f),I=M[N+1],M[N+1]=M[N+3],M[N+3]=I},_doCryptBlock:function(M,N,I,P,V,j,oe,J){for(var le=this._nRounds,q=M[N]^I[0],ue=M[N+1]^I[1],he=M[N+2]^I[2],ce=M[N+3]^I[3],pe=4,fe=1;fe<le;fe++){var Ee=P[q>>>24]^V[ue>>>16&255]^j[he>>>8&255]^oe[255&ce]^I[pe++],_e=P[ue>>>24]^V[he>>>16&255]^j[ce>>>8&255]^oe[255&q]^I[pe++],Te=P[he>>>24]^V[ce>>>16&255]^j[q>>>8&255]^oe[255&ue]^I[pe++],De=P[ce>>>24]^V[q>>>16&255]^j[ue>>>8&255]^oe[255&he]^I[pe++];q=Ee,ue=_e,he=Te,ce=De}Ee=(J[q>>>24]<<24|J[ue>>>16&255]<<16|J[he>>>8&255]<<8|J[255&ce])^I[pe++],_e=(J[ue>>>24]<<24|J[he>>>16&255]<<16|J[ce>>>8&255]<<8|J[255&q])^I[pe++],Te=(J[he>>>24]<<24|J[ce>>>16&255]<<16|J[q>>>8&255]<<8|J[255&ue])^I[pe++],De=(J[ce>>>24]<<24|J[q>>>16&255]<<16|J[ue>>>8&255]<<8|J[255&he])^I[pe++],M[N]=Ee,M[N+1]=_e,M[N+2]=Te,M[N+3]=De},keySize:8});C.AES=S._createHelper(L)}(),B.AES)},3057:function(Ge,G,F){var b,S,k,h,f,u,w,x,m,T,D,L,N,P,j,oe,le,q,B;Ge.exports=(B=F(7585),F(7865),void(B.lib.Cipher||(b=B,S=b.lib,k=S.Base,h=S.WordArray,f=S.BufferedBlockAlgorithm,u=b.enc,w=u.Base64,x=b.algo.EvpKDF,m=S.Cipher=f.extend({cfg:k.extend(),createEncryptor:function(ue,he){return this.create(this._ENC_XFORM_MODE,ue,he)},createDecryptor:function(ue,he){return this.create(this._DEC_XFORM_MODE,ue,he)},init:function(ue,he,ce){this.cfg=this.cfg.extend(ce),this._xformMode=ue,this._key=he,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(ue){return this._append(ue),this._process()},finalize:function(ue){return ue&&this._append(ue),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ue(he){return"string"==typeof he?q:oe}return function(he){return{encrypt:function(ce,pe,fe){return ue(pe).encrypt(he,ce,pe,fe)},decrypt:function(ce,pe,fe){return ue(pe).decrypt(he,ce,pe,fe)}}}}()}),S.StreamCipher=m.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),T=b.mode={},D=S.BlockCipherMode=k.extend({createEncryptor:function(ue,he){return this.Encryptor.create(ue,he)},createDecryptor:function(ue,he){return this.Decryptor.create(ue,he)},init:function(ue,he){this._cipher=ue,this._iv=he}}),L=T.CBC=function(){var ue=D.extend();function he(ce,pe,fe){var Ee,_e=this._iv;_e?(Ee=_e,this._iv=undefined):Ee=this._prevBlock;for(var Te=0;Te<fe;Te++)ce[pe+Te]^=Ee[Te]}return ue.Encryptor=ue.extend({processBlock:function(ce,pe){var fe=this._cipher,Ee=fe.blockSize;he.call(this,ce,pe,Ee),fe.encryptBlock(ce,pe),this._prevBlock=ce.slice(pe,pe+Ee)}}),ue.Decryptor=ue.extend({processBlock:function(ce,pe){var fe=this._cipher,Ee=fe.blockSize,_e=ce.slice(pe,pe+Ee);fe.decryptBlock(ce,pe),he.call(this,ce,pe,Ee),this._prevBlock=_e}}),ue}(),N=(b.pad={}).Pkcs7={pad:function(ue,he){for(var ce=4*he,pe=ce-ue.sigBytes%ce,fe=pe<<24|pe<<16|pe<<8|pe,Ee=[],_e=0;_e<pe;_e+=4)Ee.push(fe);var Te=h.create(Ee,pe);ue.concat(Te)},unpad:function(ue){ue.sigBytes-=255&ue.words[ue.sigBytes-1>>>2]}},S.BlockCipher=m.extend({cfg:m.cfg.extend({mode:L,padding:N}),reset:function(){var ue;m.reset.call(this);var he=this.cfg,ce=he.iv,pe=he.mode;this._xformMode==this._ENC_XFORM_MODE?ue=pe.createEncryptor:(ue=pe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ue?this._mode.init(this,ce&&ce.words):(this._mode=ue.call(pe,this,ce&&ce.words),this._mode.__creator=ue)},_doProcessBlock:function(ue,he){this._mode.processBlock(ue,he)},_doFinalize:function(){var ue,he=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(he.pad(this._data,this.blockSize),ue=this._process(!0)):(ue=this._process(!0),he.unpad(ue)),ue},blockSize:4}),P=S.CipherParams=k.extend({init:function(ue){this.mixIn(ue)},toString:function(ue){return(ue||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(ue){var ce=ue.ciphertext,pe=ue.salt;return(pe?h.create([1398893684,1701076831]).concat(pe).concat(ce):ce).toString(w)},parse:function(ue){var he,ce=w.parse(ue),pe=ce.words;return 1398893684==pe[0]&&1701076831==pe[1]&&(he=h.create(pe.slice(2,4)),pe.splice(0,4),ce.sigBytes-=16),P.create({ciphertext:ce,salt:he})}},oe=S.SerializableCipher=k.extend({cfg:k.extend({format:j}),encrypt:function(ue,he,ce,pe){pe=this.cfg.extend(pe);var fe=ue.createEncryptor(ce,pe),Ee=fe.finalize(he),_e=fe.cfg;return P.create({ciphertext:Ee,key:ce,iv:_e.iv,algorithm:ue,mode:_e.mode,padding:_e.padding,blockSize:ue.blockSize,formatter:pe.format})},decrypt:function(ue,he,ce,pe){return pe=this.cfg.extend(pe),he=this._parse(he,pe.format),ue.createDecryptor(ce,pe).finalize(he.ciphertext)},_parse:function(ue,he){return"string"==typeof ue?he.parse(ue,this):ue}}),le=(b.kdf={}).OpenSSL={execute:function(ue,he,ce,pe){pe||(pe=h.random(8));var fe=x.create({keySize:he+ce}).compute(ue,pe),Ee=h.create(fe.words.slice(he),4*ce);return fe.sigBytes=4*he,P.create({key:fe,iv:Ee,salt:pe})}},q=S.PasswordBasedCipher=oe.extend({cfg:oe.cfg.extend({kdf:le}),encrypt:function(ue,he,ce,pe){var fe=(pe=this.cfg.extend(pe)).kdf.execute(ce,ue.keySize,ue.ivSize);pe.iv=fe.iv;var Ee=oe.encrypt.call(this,ue,he,fe.key,pe);return Ee.mixIn(fe),Ee},decrypt:function(ue,he,ce,pe){pe=this.cfg.extend(pe),he=this._parse(he,pe.format);var fe=pe.kdf.execute(ce,ue.keySize,ue.ivSize,he.salt);return pe.iv=fe.iv,oe.decrypt.call(this,ue,he,fe.key,pe)}}))))},7585:function(Ge,G,F){var B;Ge.exports=(B=B||function(C,b){var S;if("undefined"!=typeof window&&window.crypto&&(S=window.crypto),"undefined"!=typeof self&&self.crypto&&(S=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(S=globalThis.crypto),!S&&"undefined"!=typeof window&&window.msCrypto&&(S=window.msCrypto),!S&&"undefined"!=typeof global&&global.crypto&&(S=global.crypto),!S)try{S=F(2480)}catch(M){}var k=function(){if(S){if("function"==typeof S.getRandomValues)try{return S.getRandomValues(new Uint32Array(1))[0]}catch(M){}if("function"==typeof S.randomBytes)try{return S.randomBytes(4).readInt32LE()}catch(M){}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function M(){}return function(N){var I;return M.prototype=N,I=new M,M.prototype=null,I}}(),f={},u=f.lib={},p=u.Base={extend:function(M){var N=h(this);return M&&N.mixIn(M),(!N.hasOwnProperty("init")||this.init===N.init)&&(N.init=function(){N.$super.init.apply(this,arguments)}),N.init.prototype=N,N.$super=this,N},create:function(){var M=this.extend();return M.init.apply(M,arguments),M},init:function(){},mixIn:function(M){for(var N in M)M.hasOwnProperty(N)&&(this[N]=M[N]);M.hasOwnProperty("toString")&&(this.toString=M.toString)},clone:function(){return this.init.prototype.extend(this)}},w=u.WordArray=p.extend({init:function(M,N){M=this.words=M||[],this.sigBytes=null!=N?N:4*M.length},toString:function(M){return(M||x).stringify(this)},concat:function(M){var N=this.words,I=M.words,P=this.sigBytes,V=M.sigBytes;if(this.clamp(),P%4)for(var j=0;j<V;j++)N[P+j>>>2]|=(I[j>>>2]>>>24-j%4*8&255)<<24-(P+j)%4*8;else for(var J=0;J<V;J+=4)N[P+J>>>2]=I[J>>>2];return this.sigBytes+=V,this},clamp:function(){var M=this.words,N=this.sigBytes;M[N>>>2]&=4294967295<<32-N%4*8,M.length=C.ceil(N/4)},clone:function(){var M=p.clone.call(this);return M.words=this.words.slice(0),M},random:function(M){for(var N=[],I=0;I<M;I+=4)N.push(k());return new w.init(N,M)}}),g=f.enc={},x=g.Hex={stringify:function(M){for(var N=M.words,I=M.sigBytes,P=[],V=0;V<I;V++){var j=N[V>>>2]>>>24-V%4*8&255;P.push((j>>>4).toString(16)),P.push((15&j).toString(16))}return P.join("")},parse:function(M){for(var N=M.length,I=[],P=0;P<N;P+=2)I[P>>>3]|=parseInt(M.substr(P,2),16)<<24-P%8*4;return new w.init(I,N/2)}},m=g.Latin1={stringify:function(M){for(var N=M.words,I=M.sigBytes,P=[],V=0;V<I;V++)P.push(String.fromCharCode(N[V>>>2]>>>24-V%4*8&255));return P.join("")},parse:function(M){for(var N=M.length,I=[],P=0;P<N;P++)I[P>>>2]|=(255&M.charCodeAt(P))<<24-P%4*8;return new w.init(I,N)}},_=g.Utf8={stringify:function(M){try{return decodeURIComponent(escape(m.stringify(M)))}catch(N){throw new Error("Malformed UTF-8 data")}},parse:function(M){return m.parse(unescape(encodeURIComponent(M)))}},T=u.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(M){"string"==typeof M&&(M=_.parse(M)),this._data.concat(M),this._nDataBytes+=M.sigBytes},_process:function(M){var N,I=this._data,P=I.words,V=I.sigBytes,j=this.blockSize,J=V/(4*j),le=(J=M?C.ceil(J):C.max((0|J)-this._minBufferSize,0))*j,q=C.min(4*le,V);if(le){for(var ue=0;ue<le;ue+=j)this._doProcessBlock(P,ue);N=P.splice(0,le),I.sigBytes-=q}return new w.init(N,q)},clone:function(){var M=p.clone.call(this);return M._data=this._data.clone(),M},_minBufferSize:0}),L=(u.Hasher=T.extend({cfg:p.extend(),init:function(M){this.cfg=this.cfg.extend(M),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(M){return this._append(M),this._process(),this},finalize:function(M){return M&&this._append(M),this._doFinalize()},blockSize:16,_createHelper:function(M){return function(N,I){return new M.init(I).finalize(N)}},_createHmacHelper:function(M){return function(N,I){return new L.HMAC.init(M,I).finalize(N)}}}),f.algo={});return f}(Math),B)},8319:function(Ge,G,F){var B,S;Ge.exports=(B=F(7585),S=B.lib.WordArray,B.enc.Base64={stringify:function(u){var p=u.words,w=u.sigBytes,g=this._map;u.clamp();for(var x=[],m=0;m<w;m+=3)for(var L=(p[m>>>2]>>>24-m%4*8&255)<<16|(p[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|p[m+2>>>2]>>>24-(m+2)%4*8&255,M=0;M<4&&m+.75*M<w;M++)x.push(g.charAt(L>>>6*(3-M)&63));var N=g.charAt(64);if(N)for(;x.length%4;)x.push(N);return x.join("")},parse:function(u){var p=u.length,w=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var x=0;x<w.length;x++)g[w.charCodeAt(x)]=x}var m=w.charAt(64);if(m){var _=u.indexOf(m);-1!==_&&(p=_)}return function f(u,p,w){for(var g=[],x=0,m=0;m<p;m++)if(m%4){var _=w[u.charCodeAt(m-1)]<<m%4*2,T=w[u.charCodeAt(m)]>>>6-m%4*2;g[x>>>2]|=(_|T)<<24-x%4*8,x++}return S.create(g,x)}(u,p,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},B.enc.Base64)},4410:function(Ge,G,F){var B,S;Ge.exports=(B=F(7585),S=B.lib.WordArray,B.enc.Base64url={stringify:function(u,p=!0){var w=u.words,g=u.sigBytes,x=p?this._safe_map:this._map;u.clamp();for(var m=[],_=0;_<g;_+=3)for(var M=(w[_>>>2]>>>24-_%4*8&255)<<16|(w[_+1>>>2]>>>24-(_+1)%4*8&255)<<8|w[_+2>>>2]>>>24-(_+2)%4*8&255,N=0;N<4&&_+.75*N<g;N++)m.push(x.charAt(M>>>6*(3-N)&63));var I=x.charAt(64);if(I)for(;m.length%4;)m.push(I);return m.join("")},parse:function(u,p=!0){var w=u.length,g=p?this._safe_map:this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var m=0;m<g.length;m++)x[g.charCodeAt(m)]=m}var _=g.charAt(64);if(_){var T=u.indexOf(_);-1!==T&&(w=T)}return function f(u,p,w){for(var g=[],x=0,m=0;m<p;m++)if(m%4){var _=w[u.charCodeAt(m-1)]<<m%4*2,T=w[u.charCodeAt(m)]>>>6-m%4*2;g[x>>>2]|=(_|T)<<24-x%4*8,x++}return S.create(g,x)}(u,w,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},B.enc.Base64url)},9012:function(Ge,G,F){var B;Ge.exports=(B=F(7585),function(){var S=B.lib.WordArray,k=B.enc;function f(u){return u<<8&4278255360|u>>>8&16711935}k.Utf16=k.Utf16BE={stringify:function(u){for(var p=u.words,w=u.sigBytes,g=[],x=0;x<w;x+=2)g.push(String.fromCharCode(p[x>>>2]>>>16-x%4*8&65535));return g.join("")},parse:function(u){for(var p=u.length,w=[],g=0;g<p;g++)w[g>>>1]|=u.charCodeAt(g)<<16-g%2*16;return S.create(w,2*p)}},k.Utf16LE={stringify:function(u){for(var p=u.words,w=u.sigBytes,g=[],x=0;x<w;x+=2){var m=f(p[x>>>2]>>>16-x%4*8&65535);g.push(String.fromCharCode(m))}return g.join("")},parse:function(u){for(var p=u.length,w=[],g=0;g<p;g++)w[g>>>1]|=f(u.charCodeAt(g)<<16-g%2*16);return S.create(w,2*p)}}}(),B.enc.Utf16)},7865:function(Ge,G,F){var C,b,S,k,h,u,B;Ge.exports=(B=F(7585),F(5162),F(3764),k=(b=(C=B).lib).WordArray,u=(h=C.algo).EvpKDF=(S=b.Base).extend({cfg:S.extend({keySize:4,hasher:h.MD5,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,w){for(var g,x=this.cfg,m=x.hasher.create(),_=k.create(),T=_.words,D=x.keySize,L=x.iterations;T.length<D;){g&&m.update(g),g=m.update(p).finalize(w),m.reset();for(var M=1;M<L;M++)g=m.finalize(g),m.reset();_.concat(g)}return _.sigBytes=4*D,_}}),C.EvpKDF=function(p,w,g){return u.create(g).compute(p,w)},B.EvpKDF)},1847:function(Ge,G,F){var B,k,f;Ge.exports=(B=F(7585),F(3057),k=B.lib.CipherParams,f=B.enc.Hex,B.format.Hex={stringify:function(w){return w.ciphertext.toString(f)},parse:function(w){var g=f.parse(w);return k.create({ciphertext:g})}},B.format.Hex)},3764:function(Ge,G,F){var B,h;Ge.exports=(B=F(7585),h=B.enc.Utf8,void(B.algo.HMAC=B.lib.Base.extend({init:function(p,w){p=this._hasher=new p.init,"string"==typeof w&&(w=h.parse(w));var g=p.blockSize,x=4*g;w.sigBytes>x&&(w=p.finalize(w)),w.clamp();for(var m=this._oKey=w.clone(),_=this._iKey=w.clone(),T=m.words,D=_.words,L=0;L<g;L++)T[L]^=1549556828,D[L]^=909522486;m.sigBytes=_.sigBytes=x,this.reset()},reset:function(){var p=this._hasher;p.reset(),p.update(this._iKey)},update:function(p){return this._hasher.update(p),this},finalize:function(p){var w=this._hasher,g=w.finalize(p);return w.reset(),w.finalize(this._oKey.clone().concat(g))}})))},7206:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(401),F(7412),F(9012),F(8319),F(4410),F(9493),F(5162),F(1817),F(8769),F(3351),F(6787),F(1971),F(4973),F(3764),F(8812),F(7865),F(3057),F(4424),F(6635),F(3592),F(9354),F(7934),F(4413),F(4630),F(187),F(1691),F(3237),F(1847),F(7466),F(7243),F(486),F(8182),F(3544),B)},7412:function(Ge,G,F){var B;Ge.exports=(B=F(7585),function(){if("function"==typeof ArrayBuffer){var S=B.lib.WordArray,k=S.init,h=S.init=function(f){if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),(f instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&f instanceof Uint8ClampedArray||f instanceof Int16Array||f instanceof Uint16Array||f instanceof Int32Array||f instanceof Uint32Array||f instanceof Float32Array||f instanceof Float64Array)&&(f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),f instanceof Uint8Array){for(var u=f.byteLength,p=[],w=0;w<u;w++)p[w>>>2]|=f[w]<<24-w%4*8;k.call(this,p,u)}else k.apply(this,arguments)};h.prototype=S}}(),B.lib.WordArray)},9493:function(Ge,G,F){var B;Ge.exports=(B=F(7585),function(C){var b=B,S=b.lib,k=S.WordArray,h=S.Hasher,f=b.algo,u=[];!function(){for(var _=0;_<64;_++)u[_]=4294967296*C.abs(C.sin(_+1))|0}();var p=f.MD5=h.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,T){for(var D=0;D<16;D++){var L=T+D,M=_[L];_[L]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8)}var N=this._hash.words,I=_[T+0],P=_[T+1],V=_[T+2],j=_[T+3],oe=_[T+4],J=_[T+5],le=_[T+6],q=_[T+7],ue=_[T+8],he=_[T+9],ce=_[T+10],pe=_[T+11],fe=_[T+12],Ee=_[T+13],_e=_[T+14],Te=_[T+15],De=N[0],be=N[1],de=N[2],we=N[3];De=w(De,be,de,we,I,7,u[0]),we=w(we,De,be,de,P,12,u[1]),de=w(de,we,De,be,V,17,u[2]),be=w(be,de,we,De,j,22,u[3]),De=w(De,be,de,we,oe,7,u[4]),we=w(we,De,be,de,J,12,u[5]),de=w(de,we,De,be,le,17,u[6]),be=w(be,de,we,De,q,22,u[7]),De=w(De,be,de,we,ue,7,u[8]),we=w(we,De,be,de,he,12,u[9]),de=w(de,we,De,be,ce,17,u[10]),be=w(be,de,we,De,pe,22,u[11]),De=w(De,be,de,we,fe,7,u[12]),we=w(we,De,be,de,Ee,12,u[13]),de=w(de,we,De,be,_e,17,u[14]),De=g(De,be=w(be,de,we,De,Te,22,u[15]),de,we,P,5,u[16]),we=g(we,De,be,de,le,9,u[17]),de=g(de,we,De,be,pe,14,u[18]),be=g(be,de,we,De,I,20,u[19]),De=g(De,be,de,we,J,5,u[20]),we=g(we,De,be,de,ce,9,u[21]),de=g(de,we,De,be,Te,14,u[22]),be=g(be,de,we,De,oe,20,u[23]),De=g(De,be,de,we,he,5,u[24]),we=g(we,De,be,de,_e,9,u[25]),de=g(de,we,De,be,j,14,u[26]),be=g(be,de,we,De,ue,20,u[27]),De=g(De,be,de,we,Ee,5,u[28]),we=g(we,De,be,de,V,9,u[29]),de=g(de,we,De,be,q,14,u[30]),De=x(De,be=g(be,de,we,De,fe,20,u[31]),de,we,J,4,u[32]),we=x(we,De,be,de,ue,11,u[33]),de=x(de,we,De,be,pe,16,u[34]),be=x(be,de,we,De,_e,23,u[35]),De=x(De,be,de,we,P,4,u[36]),we=x(we,De,be,de,oe,11,u[37]),de=x(de,we,De,be,q,16,u[38]),be=x(be,de,we,De,ce,23,u[39]),De=x(De,be,de,we,Ee,4,u[40]),we=x(we,De,be,de,I,11,u[41]),de=x(de,we,De,be,j,16,u[42]),be=x(be,de,we,De,le,23,u[43]),De=x(De,be,de,we,he,4,u[44]),we=x(we,De,be,de,fe,11,u[45]),de=x(de,we,De,be,Te,16,u[46]),De=m(De,be=x(be,de,we,De,V,23,u[47]),de,we,I,6,u[48]),we=m(we,De,be,de,q,10,u[49]),de=m(de,we,De,be,_e,15,u[50]),be=m(be,de,we,De,J,21,u[51]),De=m(De,be,de,we,fe,6,u[52]),we=m(we,De,be,de,j,10,u[53]),de=m(de,we,De,be,ce,15,u[54]),be=m(be,de,we,De,P,21,u[55]),De=m(De,be,de,we,ue,6,u[56]),we=m(we,De,be,de,Te,10,u[57]),de=m(de,we,De,be,le,15,u[58]),be=m(be,de,we,De,Ee,21,u[59]),De=m(De,be,de,we,oe,6,u[60]),we=m(we,De,be,de,pe,10,u[61]),de=m(de,we,De,be,V,15,u[62]),be=m(be,de,we,De,he,21,u[63]),N[0]=N[0]+De|0,N[1]=N[1]+be|0,N[2]=N[2]+de|0,N[3]=N[3]+we|0},_doFinalize:function(){var _=this._data,T=_.words,D=8*this._nDataBytes,L=8*_.sigBytes;T[L>>>5]|=128<<24-L%32;var M=C.floor(D/4294967296),N=D;T[15+(L+64>>>9<<4)]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),T[14+(L+64>>>9<<4)]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),_.sigBytes=4*(T.length+1),this._process();for(var I=this._hash,P=I.words,V=0;V<4;V++){var j=P[V];P[V]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8)}return I},clone:function(){var _=h.clone.call(this);return _._hash=this._hash.clone(),_}});function w(_,T,D,L,M,N,I){var P=_+(T&D|~T&L)+M+I;return(P<<N|P>>>32-N)+T}function g(_,T,D,L,M,N,I){var P=_+(T&L|D&~L)+M+I;return(P<<N|P>>>32-N)+T}function x(_,T,D,L,M,N,I){var P=_+(T^D^L)+M+I;return(P<<N|P>>>32-N)+T}function m(_,T,D,L,M,N,I){var P=_+(D^(T|~L))+M+I;return(P<<N|P>>>32-N)+T}b.MD5=h._createHelper(p),b.HmacMD5=h._createHmacHelper(p)}(Math),B.MD5)},4424:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.mode.CFB=function(){var C=B.lib.BlockCipherMode.extend();function b(S,k,h,f){var u,p=this._iv;p?(u=p.slice(0),this._iv=void 0):u=this._prevBlock,f.encryptBlock(u,0);for(var w=0;w<h;w++)S[k+w]^=u[w]}return C.Encryptor=C.extend({processBlock:function(S,k){var h=this._cipher,f=h.blockSize;b.call(this,S,k,f,h),this._prevBlock=S.slice(k,k+f)}}),C.Decryptor=C.extend({processBlock:function(S,k){var h=this._cipher,f=h.blockSize,u=S.slice(k,k+f);b.call(this,S,k,f,h),this._prevBlock=u}}),C}(),B.mode.CFB)},3592:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.mode.CTRGladman=function(){var C=B.lib.BlockCipherMode.extend();function b(h){if(255==(h>>24&255)){var f=h>>16&255,u=h>>8&255,p=255&h;255===f?(f=0,255===u?(u=0,255===p?p=0:++p):++u):++f,h=0,h+=f<<16,h+=u<<8,h+=p}else h+=1<<24;return h}var k=C.Encryptor=C.extend({processBlock:function(h,f){var u=this._cipher,p=u.blockSize,w=this._iv,g=this._counter;w&&(g=this._counter=w.slice(0),this._iv=void 0),function S(h){return 0===(h[0]=b(h[0]))&&(h[1]=b(h[1])),h}(g);var x=g.slice(0);u.encryptBlock(x,0);for(var m=0;m<p;m++)h[f+m]^=x[m]}});return C.Decryptor=k,C}(),B.mode.CTRGladman)},6635:function(Ge,G,F){var C,b,B;Ge.exports=(B=F(7585),F(3057),B.mode.CTR=(b=(C=B.lib.BlockCipherMode.extend()).Encryptor=C.extend({processBlock:function(S,k){var h=this._cipher,f=h.blockSize,u=this._iv,p=this._counter;u&&(p=this._counter=u.slice(0),this._iv=void 0);var w=p.slice(0);h.encryptBlock(w,0),p[f-1]=p[f-1]+1|0;for(var g=0;g<f;g++)S[k+g]^=w[g]}}),C.Decryptor=b,C),B.mode.CTR)},7934:function(Ge,G,F){var C,B;Ge.exports=(B=F(7585),F(3057),B.mode.ECB=((C=B.lib.BlockCipherMode.extend()).Encryptor=C.extend({processBlock:function(b,S){this._cipher.encryptBlock(b,S)}}),C.Decryptor=C.extend({processBlock:function(b,S){this._cipher.decryptBlock(b,S)}}),C),B.mode.ECB)},9354:function(Ge,G,F){var C,b,B;Ge.exports=(B=F(7585),F(3057),B.mode.OFB=(b=(C=B.lib.BlockCipherMode.extend()).Encryptor=C.extend({processBlock:function(S,k){var h=this._cipher,f=h.blockSize,u=this._iv,p=this._keystream;u&&(p=this._keystream=u.slice(0),this._iv=void 0),h.encryptBlock(p,0);for(var w=0;w<f;w++)S[k+w]^=p[w]}}),C.Decryptor=b,C),B.mode.OFB)},4413:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.pad.AnsiX923={pad:function(C,b){var S=C.sigBytes,k=4*b,h=k-S%k,f=S+h-1;C.clamp(),C.words[f>>>2]|=h<<24-f%4*8,C.sigBytes+=h},unpad:function(C){C.sigBytes-=255&C.words[C.sigBytes-1>>>2]}},B.pad.Ansix923)},4630:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.pad.Iso10126={pad:function(C,b){var S=4*b,k=S-C.sigBytes%S;C.concat(B.lib.WordArray.random(k-1)).concat(B.lib.WordArray.create([k<<24],1))},unpad:function(C){C.sigBytes-=255&C.words[C.sigBytes-1>>>2]}},B.pad.Iso10126)},187:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.pad.Iso97971={pad:function(C,b){C.concat(B.lib.WordArray.create([2147483648],1)),B.pad.ZeroPadding.pad(C,b)},unpad:function(C){B.pad.ZeroPadding.unpad(C),C.sigBytes--}},B.pad.Iso97971)},3237:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.pad.NoPadding={pad:function(){},unpad:function(){}},B.pad.NoPadding)},1691:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(3057),B.pad.ZeroPadding={pad:function(C,b){var S=4*b;C.clamp(),C.sigBytes+=S-(C.sigBytes%S||S)},unpad:function(C){var b=C.words,S=C.sigBytes-1;for(S=C.sigBytes-1;S>=0;S--)if(b[S>>>2]>>>24-S%4*8&255){C.sigBytes=S+1;break}}},B.pad.ZeroPadding)},8812:function(Ge,G,F){var C,b,S,k,h,u,p,B;Ge.exports=(B=F(7585),F(5162),F(3764),k=(b=(C=B).lib).WordArray,u=(h=C.algo).HMAC,p=h.PBKDF2=(S=b.Base).extend({cfg:S.extend({keySize:4,hasher:h.SHA1,iterations:1}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,g){for(var x=this.cfg,m=u.create(x.hasher,w),_=k.create(),T=k.create([1]),D=_.words,L=T.words,M=x.keySize,N=x.iterations;D.length<M;){var I=m.update(g).finalize(T);m.reset();for(var P=I.words,V=P.length,j=I,oe=1;oe<N;oe++){j=m.finalize(j),m.reset();for(var J=j.words,le=0;le<V;le++)P[le]^=J[le]}_.concat(I),L[0]++}return _.sigBytes=4*M,_}}),C.PBKDF2=function(w,g,x){return p.create(x).compute(w,g)},B.PBKDF2)},3544:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(8319),F(9493),F(7865),F(3057),function(){var C=B,S=C.lib.StreamCipher,h=[],f=[],u=[],p=C.algo.RabbitLegacy=S.extend({_doReset:function(){var g=this._key.words,x=this.cfg.iv,m=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],_=this._C=[g[2]<<16|g[2]>>>16,4294901760&g[0]|65535&g[1],g[3]<<16|g[3]>>>16,4294901760&g[1]|65535&g[2],g[0]<<16|g[0]>>>16,4294901760&g[2]|65535&g[3],g[1]<<16|g[1]>>>16,4294901760&g[3]|65535&g[0]];this._b=0;for(var T=0;T<4;T++)w.call(this);for(T=0;T<8;T++)_[T]^=m[T+4&7];if(x){var D=x.words,L=D[0],M=D[1],N=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),I=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),P=N>>>16|4294901760&I,V=I<<16|65535&N;for(_[0]^=N,_[1]^=P,_[2]^=I,_[3]^=V,_[4]^=N,_[5]^=P,_[6]^=I,_[7]^=V,T=0;T<4;T++)w.call(this)}},_doProcessBlock:function(g,x){var m=this._X;w.call(this),h[0]=m[0]^m[5]>>>16^m[3]<<16,h[1]=m[2]^m[7]>>>16^m[5]<<16,h[2]=m[4]^m[1]>>>16^m[7]<<16,h[3]=m[6]^m[3]>>>16^m[1]<<16;for(var _=0;_<4;_++)h[_]=16711935&(h[_]<<8|h[_]>>>24)|4278255360&(h[_]<<24|h[_]>>>8),g[x+_]^=h[_]},blockSize:4,ivSize:2});function w(){for(var g=this._X,x=this._C,m=0;m<8;m++)f[m]=x[m];for(x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<f[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<f[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<f[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<f[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<f[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<f[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<f[6]>>>0?1:0)|0,this._b=x[7]>>>0<f[7]>>>0?1:0,m=0;m<8;m++){var _=g[m]+x[m],T=65535&_,D=_>>>16;u[m]=((T*T>>>17)+T*D>>>15)+D*D^((4294901760&_)*_|0)+((65535&_)*_|0)}g[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,g[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,g[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,g[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,g[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,g[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,g[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,g[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}C.RabbitLegacy=S._createHelper(p)}(),B.RabbitLegacy)},8182:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(8319),F(9493),F(7865),F(3057),function(){var C=B,S=C.lib.StreamCipher,h=[],f=[],u=[],p=C.algo.Rabbit=S.extend({_doReset:function(){for(var g=this._key.words,x=this.cfg.iv,m=0;m<4;m++)g[m]=16711935&(g[m]<<8|g[m]>>>24)|4278255360&(g[m]<<24|g[m]>>>8);var _=this._X=[g[0],g[3]<<16|g[2]>>>16,g[1],g[0]<<16|g[3]>>>16,g[2],g[1]<<16|g[0]>>>16,g[3],g[2]<<16|g[1]>>>16],T=this._C=[g[2]<<16|g[2]>>>16,4294901760&g[0]|65535&g[1],g[3]<<16|g[3]>>>16,4294901760&g[1]|65535&g[2],g[0]<<16|g[0]>>>16,4294901760&g[2]|65535&g[3],g[1]<<16|g[1]>>>16,4294901760&g[3]|65535&g[0]];for(this._b=0,m=0;m<4;m++)w.call(this);for(m=0;m<8;m++)T[m]^=_[m+4&7];if(x){var D=x.words,L=D[0],M=D[1],N=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),I=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),P=N>>>16|4294901760&I,V=I<<16|65535&N;for(T[0]^=N,T[1]^=P,T[2]^=I,T[3]^=V,T[4]^=N,T[5]^=P,T[6]^=I,T[7]^=V,m=0;m<4;m++)w.call(this)}},_doProcessBlock:function(g,x){var m=this._X;w.call(this),h[0]=m[0]^m[5]>>>16^m[3]<<16,h[1]=m[2]^m[7]>>>16^m[5]<<16,h[2]=m[4]^m[1]>>>16^m[7]<<16,h[3]=m[6]^m[3]>>>16^m[1]<<16;for(var _=0;_<4;_++)h[_]=16711935&(h[_]<<8|h[_]>>>24)|4278255360&(h[_]<<24|h[_]>>>8),g[x+_]^=h[_]},blockSize:4,ivSize:2});function w(){for(var g=this._X,x=this._C,m=0;m<8;m++)f[m]=x[m];for(x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<f[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<f[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<f[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<f[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<f[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<f[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<f[6]>>>0?1:0)|0,this._b=x[7]>>>0<f[7]>>>0?1:0,m=0;m<8;m++){var _=g[m]+x[m],T=65535&_,D=_>>>16;u[m]=((T*T>>>17)+T*D>>>15)+D*D^((4294901760&_)*_|0)+((65535&_)*_|0)}g[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,g[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,g[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,g[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,g[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,g[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,g[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,g[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}C.Rabbit=S._createHelper(p)}(),B.Rabbit)},486:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(8319),F(9493),F(7865),F(3057),function(){var C=B,S=C.lib.StreamCipher,k=C.algo,h=k.RC4=S.extend({_doReset:function(){for(var p=this._key,w=p.words,g=p.sigBytes,x=this._S=[],m=0;m<256;m++)x[m]=m;m=0;for(var _=0;m<256;m++){var T=m%g,L=x[m];x[m]=x[_=(_+x[m]+(w[T>>>2]>>>24-T%4*8&255))%256],x[_]=L}this._i=this._j=0},_doProcessBlock:function(p,w){p[w]^=f.call(this)},keySize:8,ivSize:0});function f(){for(var p=this._S,w=this._i,g=this._j,x=0,m=0;m<4;m++){var _=p[w=(w+1)%256];p[w]=p[g=(g+p[w])%256],p[g]=_,x|=p[(p[w]+p[g])%256]<<24-8*m}return this._i=w,this._j=g,x}C.RC4=S._createHelper(h);var u=k.RC4Drop=h.extend({cfg:h.cfg.extend({drop:192}),_doReset:function(){h._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)f.call(this)}});C.RC4Drop=S._createHelper(u)}(),B.RC4)},4973:function(Ge,G,F){var B;Ge.exports=(B=F(7585),function(C){var b=B,S=b.lib,k=S.WordArray,h=S.Hasher,f=b.algo,u=k.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=k.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),w=k.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=k.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=k.create([0,1518500249,1859775393,2400959708,2840853838]),m=k.create([1352829926,1548603684,1836072691,2053994217,0]),_=f.RIPEMD160=h.extend({_doReset:function(){this._hash=k.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,V){for(var j=0;j<16;j++){var oe=V+j,J=P[oe];P[oe]=16711935&(J<<8|J>>>24)|4278255360&(J<<24|J>>>8)}var Ee,_e,Te,De,be,de,we,Ye,ze,He,Ne,le=this._hash.words,q=x.words,ue=m.words,he=u.words,ce=p.words,pe=w.words,fe=g.words;for(de=Ee=le[0],we=_e=le[1],Ye=Te=le[2],ze=De=le[3],He=be=le[4],j=0;j<80;j+=1)Ne=Ee+P[V+he[j]]|0,Ne+=j<16?T(_e,Te,De)+q[0]:j<32?D(_e,Te,De)+q[1]:j<48?L(_e,Te,De)+q[2]:j<64?M(_e,Te,De)+q[3]:N(_e,Te,De)+q[4],Ne=(Ne=I(Ne|=0,pe[j]))+be|0,Ee=be,be=De,De=I(Te,10),Te=_e,_e=Ne,Ne=de+P[V+ce[j]]|0,Ne+=j<16?N(we,Ye,ze)+ue[0]:j<32?M(we,Ye,ze)+ue[1]:j<48?L(we,Ye,ze)+ue[2]:j<64?D(we,Ye,ze)+ue[3]:T(we,Ye,ze)+ue[4],Ne=(Ne=I(Ne|=0,fe[j]))+He|0,de=He,He=ze,ze=I(Ye,10),Ye=we,we=Ne;Ne=le[1]+Te+ze|0,le[1]=le[2]+De+He|0,le[2]=le[3]+be+de|0,le[3]=le[4]+Ee+we|0,le[4]=le[0]+_e+Ye|0,le[0]=Ne},_doFinalize:function(){var P=this._data,V=P.words,j=8*this._nDataBytes,oe=8*P.sigBytes;V[oe>>>5]|=128<<24-oe%32,V[14+(oe+64>>>9<<4)]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),P.sigBytes=4*(V.length+1),this._process();for(var J=this._hash,le=J.words,q=0;q<5;q++){var ue=le[q];le[q]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8)}return J},clone:function(){var P=h.clone.call(this);return P._hash=this._hash.clone(),P}});function T(P,V,j){return P^V^j}function D(P,V,j){return P&V|~P&j}function L(P,V,j){return(P|~V)^j}function M(P,V,j){return P&j|V&~j}function N(P,V,j){return P^(V|~j)}function I(P,V){return P<<V|P>>>32-V}b.RIPEMD160=h._createHelper(_),b.HmacRIPEMD160=h._createHmacHelper(_)}(Math),B.RIPEMD160)},5162:function(Ge,G,F){var C,b,S,k,f,u,B;Ge.exports=(B=F(7585),S=(b=(C=B).lib).WordArray,f=[],u=C.algo.SHA1=(k=b.Hasher).extend({_doReset:function(){this._hash=new S.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,w){for(var g=this._hash.words,x=g[0],m=g[1],_=g[2],T=g[3],D=g[4],L=0;L<80;L++){if(L<16)f[L]=0|p[w+L];else{var M=f[L-3]^f[L-8]^f[L-14]^f[L-16];f[L]=M<<1|M>>>31}var N=(x<<5|x>>>27)+D+f[L];N+=L<20?1518500249+(m&_|~m&T):L<40?1859775393+(m^_^T):L<60?(m&_|m&T|_&T)-1894007588:(m^_^T)-899497514,D=T,T=_,_=m<<30|m>>>2,m=x,x=N}g[0]=g[0]+x|0,g[1]=g[1]+m|0,g[2]=g[2]+_|0,g[3]=g[3]+T|0,g[4]=g[4]+D|0},_doFinalize:function(){var p=this._data,w=p.words,g=8*this._nDataBytes,x=8*p.sigBytes;return w[x>>>5]|=128<<24-x%32,w[14+(x+64>>>9<<4)]=Math.floor(g/4294967296),w[15+(x+64>>>9<<4)]=g,p.sigBytes=4*w.length,this._process(),this._hash},clone:function(){var p=k.clone.call(this);return p._hash=this._hash.clone(),p}}),C.SHA1=k._createHelper(u),C.HmacSHA1=k._createHmacHelper(u),B.SHA1)},8769:function(Ge,G,F){var C,S,k,h,f,B;Ge.exports=(B=F(7585),F(1817),S=(C=B).lib.WordArray,f=(k=C.algo).SHA224=(h=k.SHA256).extend({_doReset:function(){this._hash=new S.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=h._doFinalize.call(this);return u.sigBytes-=4,u}}),C.SHA224=h._createHelper(f),C.HmacSHA224=h._createHmacHelper(f),B.SHA224)},1817:function(Ge,G,F){var B;Ge.exports=(B=F(7585),function(C){var b=B,S=b.lib,k=S.WordArray,h=S.Hasher,f=b.algo,u=[],p=[];!function(){function x(D){for(var L=C.sqrt(D),M=2;M<=L;M++)if(!(D%M))return!1;return!0}function m(D){return 4294967296*(D-(0|D))|0}for(var _=2,T=0;T<64;)x(_)&&(T<8&&(u[T]=m(C.pow(_,.5))),p[T]=m(C.pow(_,1/3)),T++),_++}();var w=[],g=f.SHA256=h.extend({_doReset:function(){this._hash=new k.init(u.slice(0))},_doProcessBlock:function(x,m){for(var _=this._hash.words,T=_[0],D=_[1],L=_[2],M=_[3],N=_[4],I=_[5],P=_[6],V=_[7],j=0;j<64;j++){if(j<16)w[j]=0|x[m+j];else{var oe=w[j-15],le=w[j-2];w[j]=((oe<<25|oe>>>7)^(oe<<14|oe>>>18)^oe>>>3)+w[j-7]+((le<<15|le>>>17)^(le<<13|le>>>19)^le>>>10)+w[j-16]}var he=T&D^T&L^D&L,fe=V+((N<<26|N>>>6)^(N<<21|N>>>11)^(N<<7|N>>>25))+(N&I^~N&P)+p[j]+w[j];V=P,P=I,I=N,N=M+fe|0,M=L,L=D,D=T,T=fe+(((T<<30|T>>>2)^(T<<19|T>>>13)^(T<<10|T>>>22))+he)|0}_[0]=_[0]+T|0,_[1]=_[1]+D|0,_[2]=_[2]+L|0,_[3]=_[3]+M|0,_[4]=_[4]+N|0,_[5]=_[5]+I|0,_[6]=_[6]+P|0,_[7]=_[7]+V|0},_doFinalize:function(){var x=this._data,m=x.words,_=8*this._nDataBytes,T=8*x.sigBytes;return m[T>>>5]|=128<<24-T%32,m[14+(T+64>>>9<<4)]=C.floor(_/4294967296),m[15+(T+64>>>9<<4)]=_,x.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var x=h.clone.call(this);return x._hash=this._hash.clone(),x}});b.SHA256=h._createHelper(g),b.HmacSHA256=h._createHmacHelper(g)}(Math),B.SHA256)},1971:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(401),function(C){var b=B,S=b.lib,k=S.WordArray,h=S.Hasher,u=b.x64.Word,p=b.algo,w=[],g=[],x=[];!function(){for(var T=1,D=0,L=0;L<24;L++){w[T+5*D]=(L+1)*(L+2)/2%64;var N=(2*T+3*D)%5;T=D%5,D=N}for(T=0;T<5;T++)for(D=0;D<5;D++)g[T+5*D]=D+(2*T+3*D)%5*5;for(var I=1,P=0;P<24;P++){for(var V=0,j=0,oe=0;oe<7;oe++){if(1&I){var J=(1<<oe)-1;J<32?j^=1<<J:V^=1<<J-32}128&I?I=I<<1^113:I<<=1}x[P]=u.create(V,j)}}();var m=[];!function(){for(var T=0;T<25;T++)m[T]=u.create()}();var _=p.SHA3=h.extend({cfg:h.cfg.extend({outputLength:512}),_doReset:function(){for(var T=this._state=[],D=0;D<25;D++)T[D]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(T,D){for(var L=this._state,M=this.blockSize/2,N=0;N<M;N++){var I=T[D+2*N],P=T[D+2*N+1];I=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),(V=L[N]).high^=P=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),V.low^=I}for(var j=0;j<24;j++){for(var oe=0;oe<5;oe++){for(var J=0,le=0,q=0;q<5;q++)J^=(V=L[oe+5*q]).high,le^=V.low;var ue=m[oe];ue.high=J,ue.low=le}for(oe=0;oe<5;oe++){var he=m[(oe+4)%5],ce=m[(oe+1)%5],pe=ce.high,fe=ce.low;for(J=he.high^(pe<<1|fe>>>31),le=he.low^(fe<<1|pe>>>31),q=0;q<5;q++)(V=L[oe+5*q]).high^=J,V.low^=le}for(var Ee=1;Ee<25;Ee++){var _e=(V=L[Ee]).high,Te=V.low,De=w[Ee];De<32?(J=_e<<De|Te>>>32-De,le=Te<<De|_e>>>32-De):(J=Te<<De-32|_e>>>64-De,le=_e<<De-32|Te>>>64-De);var be=m[g[Ee]];be.high=J,be.low=le}var de=m[0],we=L[0];for(de.high=we.high,de.low=we.low,oe=0;oe<5;oe++)for(q=0;q<5;q++){var Ye=m[Ee=oe+5*q],ze=m[(oe+1)%5+5*q],He=m[(oe+2)%5+5*q];(V=L[Ee]).high=Ye.high^~ze.high&He.high,V.low=Ye.low^~ze.low&He.low}var V,Ne=x[j];(V=L[0]).high^=Ne.high,V.low^=Ne.low}},_doFinalize:function(){var T=this._data,D=T.words,M=8*T.sigBytes,N=32*this.blockSize;D[M>>>5]|=1<<24-M%32,D[(C.ceil((M+1)/N)*N>>>5)-1]|=128,T.sigBytes=4*D.length,this._process();for(var I=this._state,P=this.cfg.outputLength/8,V=P/8,j=[],oe=0;oe<V;oe++){var J=I[oe],le=J.high,q=J.low;le=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8),j.push(q=16711935&(q<<8|q>>>24)|4278255360&(q<<24|q>>>8)),j.push(le)}return new k.init(j,P)},clone:function(){for(var T=h.clone.call(this),D=T._state=this._state.slice(0),L=0;L<25;L++)D[L]=D[L].clone();return T}});b.SHA3=h._createHelper(_),b.HmacSHA3=h._createHmacHelper(_)}(Math),B.SHA3)},6787:function(Ge,G,F){var C,b,S,k,h,f,u,B;Ge.exports=(B=F(7585),F(401),F(3351),S=(b=(C=B).x64).Word,k=b.WordArray,u=(h=C.algo).SHA384=(f=h.SHA512).extend({_doReset:function(){this._hash=new k.init([new S.init(3418070365,3238371032),new S.init(1654270250,914150663),new S.init(2438529370,812702999),new S.init(355462360,4144912697),new S.init(1731405415,4290775857),new S.init(2394180231,1750603025),new S.init(3675008525,1694076839),new S.init(1203062813,3204075428)])},_doFinalize:function(){var p=f._doFinalize.call(this);return p.sigBytes-=16,p}}),C.SHA384=f._createHelper(u),C.HmacSHA384=f._createHmacHelper(u),B.SHA384)},3351:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(401),function(){var C=B,S=C.lib.Hasher,k=C.x64,h=k.Word,f=k.WordArray,u=C.algo;function p(){return h.create.apply(h,arguments)}var w=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],g=[];!function(){for(var m=0;m<80;m++)g[m]=p()}();var x=u.SHA512=S.extend({_doReset:function(){this._hash=new f.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(m,_){for(var T=this._hash.words,D=T[0],L=T[1],M=T[2],N=T[3],I=T[4],P=T[5],V=T[6],j=T[7],oe=D.high,J=D.low,le=L.high,q=L.low,ue=M.high,he=M.low,ce=N.high,pe=N.low,fe=I.high,Ee=I.low,_e=P.high,Te=P.low,De=V.high,be=V.low,de=j.high,we=j.low,Ye=oe,ze=J,He=le,Ne=q,ye=ue,ee=he,ie=ce,$=pe,se=fe,K=Ee,te=_e,X=Te,me=De,R=be,H=de,Z=we,Ae=0;Ae<80;Ae++){var Ke,Re,ht=g[Ae];if(Ae<16)Re=ht.high=0|m[_+2*Ae],Ke=ht.low=0|m[_+2*Ae+1];else{var Et=g[Ae-15],Ft=Et.high,ln=Et.low,bn=(ln>>>1|Ft<<31)^(ln>>>8|Ft<<24)^(ln>>>7|Ft<<25),Er=g[Ae-2],xt=Er.high,ni=Er.low,Fr=(ni>>>19|xt<<13)^(ni<<3|xt>>>29)^(ni>>>6|xt<<26),Kn=g[Ae-7],ri=g[Ae-16],Ko=ri.low;ht.high=Re=(Re=(Re=((Ft>>>1|ln<<31)^(Ft>>>8|ln<<24)^Ft>>>7)+Kn.high+((Ke=bn+Kn.low)>>>0<bn>>>0?1:0))+((xt>>>19|ni<<13)^(xt<<3|ni>>>29)^xt>>>6)+((Ke+=Fr)>>>0<Fr>>>0?1:0))+ri.high+((Ke+=Ko)>>>0<Ko>>>0?1:0),ht.low=Ke}var Or,$r=se&te^~se&me,Wi=K&X^~K&R,So=Ye&He^Ye&ye^He&ye,ml=(ze>>>28|Ye<<4)^(ze<<30|Ye>>>2)^(ze<<25|Ye>>>7),Oa=w[Ae],Pa=Oa.low,Lo=H+((se>>>14|K<<18)^(se>>>18|K<<14)^(se<<23|K>>>9))+((Or=Z+((K>>>14|se<<18)^(K>>>18|se<<14)^(K<<23|se>>>9)))>>>0<Z>>>0?1:0),Fa=ml+(ze&Ne^ze&ee^Ne&ee);H=me,Z=R,me=te,R=X,te=se,X=K,se=ie+(Lo=(Lo=(Lo=Lo+$r+((Or+=Wi)>>>0<Wi>>>0?1:0))+Oa.high+((Or+=Pa)>>>0<Pa>>>0?1:0))+Re+((Or+=Ke)>>>0<Ke>>>0?1:0))+((K=$+Or|0)>>>0<$>>>0?1:0)|0,ie=ye,$=ee,ye=He,ee=Ne,He=Ye,Ne=ze,Ye=Lo+(((Ye>>>28|ze<<4)^(Ye<<30|ze>>>2)^(Ye<<25|ze>>>7))+So+(Fa>>>0<ml>>>0?1:0))+((ze=Or+Fa|0)>>>0<Or>>>0?1:0)|0}J=D.low=J+ze,D.high=oe+Ye+(J>>>0<ze>>>0?1:0),q=L.low=q+Ne,L.high=le+He+(q>>>0<Ne>>>0?1:0),he=M.low=he+ee,M.high=ue+ye+(he>>>0<ee>>>0?1:0),pe=N.low=pe+$,N.high=ce+ie+(pe>>>0<$>>>0?1:0),Ee=I.low=Ee+K,I.high=fe+se+(Ee>>>0<K>>>0?1:0),Te=P.low=Te+X,P.high=_e+te+(Te>>>0<X>>>0?1:0),be=V.low=be+R,V.high=De+me+(be>>>0<R>>>0?1:0),we=j.low=we+Z,j.high=de+H+(we>>>0<Z>>>0?1:0)},_doFinalize:function(){var m=this._data,_=m.words,T=8*this._nDataBytes,D=8*m.sigBytes;return _[D>>>5]|=128<<24-D%32,_[30+(D+128>>>10<<5)]=Math.floor(T/4294967296),_[31+(D+128>>>10<<5)]=T,m.sigBytes=4*_.length,this._process(),this._hash.toX32()},clone:function(){var m=S.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:32});C.SHA512=S._createHelper(x),C.HmacSHA512=S._createHmacHelper(x)}(),B.SHA512)},7243:function(Ge,G,F){var B;Ge.exports=(B=F(7585),F(8319),F(9493),F(7865),F(3057),function(){var C=B,b=C.lib,S=b.WordArray,k=b.BlockCipher,h=C.algo,f=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],w=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=h.DES=k.extend({_doReset:function(){for(var L=this._key.words,M=[],N=0;N<56;N++){var I=f[N]-1;M[N]=L[I>>>5]>>>31-I%32&1}for(var P=this._subKeys=[],V=0;V<16;V++){var j=P[V]=[],oe=p[V];for(N=0;N<24;N++)j[N/6|0]|=M[(u[N]-1+oe)%28]<<31-N%6,j[4+(N/6|0)]|=M[28+(u[N+24]-1+oe)%28]<<31-N%6;for(j[0]=j[0]<<1|j[0]>>>31,N=1;N<7;N++)j[N]=j[N]>>>4*(N-1)+3;j[7]=j[7]<<5|j[7]>>>27}var J=this._invSubKeys=[];for(N=0;N<16;N++)J[N]=P[15-N]},encryptBlock:function(D,L){this._doCryptBlock(D,L,this._subKeys)},decryptBlock:function(D,L){this._doCryptBlock(D,L,this._invSubKeys)},_doCryptBlock:function(D,L,M){this._lBlock=D[L],this._rBlock=D[L+1],m.call(this,4,252645135),m.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),m.call(this,1,1431655765);for(var N=0;N<16;N++){for(var I=M[N],P=this._lBlock,V=this._rBlock,j=0,oe=0;oe<8;oe++)j|=w[oe][((V^I[oe])&g[oe])>>>0];this._lBlock=V,this._rBlock=P^j}var J=this._lBlock;this._lBlock=this._rBlock,this._rBlock=J,m.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),D[L]=this._lBlock,D[L+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function m(D,L){var M=(this._lBlock>>>D^this._rBlock)&L;this._rBlock^=M,this._lBlock^=M<<D}function _(D,L){var M=(this._rBlock>>>D^this._lBlock)&L;this._lBlock^=M,this._rBlock^=M<<D}C.DES=k._createHelper(x);var T=h.TripleDES=k.extend({_doReset:function(){var L=this._key.words;if(2!==L.length&&4!==L.length&&L.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var M=L.slice(0,2),N=L.length<4?L.slice(0,2):L.slice(2,4),I=L.length<6?L.slice(0,2):L.slice(4,6);this._des1=x.createEncryptor(S.create(M)),this._des2=x.createEncryptor(S.create(N)),this._des3=x.createEncryptor(S.create(I))},encryptBlock:function(D,L){this._des1.encryptBlock(D,L),this._des2.decryptBlock(D,L),this._des3.encryptBlock(D,L)},decryptBlock:function(D,L){this._des3.decryptBlock(D,L),this._des2.encryptBlock(D,L),this._des1.decryptBlock(D,L)},keySize:6,ivSize:2,blockSize:2});C.TripleDES=k._createHelper(T)}(),B.TripleDES)},401:function(Ge,G,F){var S,k,h,f,B;Ge.exports=(B=F(7585),k=(S=B.lib).Base,h=S.WordArray,(f=B.x64={}).Word=k.extend({init:function(w,g){this.high=w,this.low=g}}),f.WordArray=k.extend({init:function(w,g){w=this.words=w||[],this.sigBytes=null!=g?g:8*w.length},toX32:function(){for(var w=this.words,g=w.length,x=[],m=0;m<g;m++){var _=w[m];x.push(_.high),x.push(_.low)}return h.create(x,this.sigBytes)},clone:function(){for(var w=k.clone.call(this),g=w.words=this.words.slice(0),x=g.length,m=0;m<x;m++)g[m]=g[m].clone();return w}}),B)},9069:Ge=>{"use strict";var B,G="object"==typeof Reflect?Reflect:null,F=G&&"function"==typeof G.apply?G.apply:function(I,P,V){return Function.prototype.apply.call(I,P,V)};B=G&&"function"==typeof G.ownKeys?G.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var b=Number.isNaN||function(I){return I!=I};function S(){S.init.call(this)}Ge.exports=S,Ge.exports.once=function D(N,I){return new Promise(function(P,V){function j(J){N.removeListener(I,oe),V(J)}function oe(){"function"==typeof N.removeListener&&N.removeListener("error",j),P([].slice.call(arguments))}M(N,I,oe,{once:!0}),"error"!==I&&function L(N,I,P){"function"==typeof N.on&&M(N,"error",I,P)}(N,j,{once:!0})})},S.EventEmitter=S,S.prototype._events=void 0,S.prototype._eventsCount=0,S.prototype._maxListeners=void 0;var k=10;function h(N){if("function"!=typeof N)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}function f(N){return void 0===N._maxListeners?S.defaultMaxListeners:N._maxListeners}function u(N,I,P,V){var j,oe,J;if(h(P),void 0===(oe=N._events)?(oe=N._events=Object.create(null),N._eventsCount=0):(void 0!==oe.newListener&&(N.emit("newListener",I,P.listener?P.listener:P),oe=N._events),J=oe[I]),void 0===J)J=oe[I]=P,++N._eventsCount;else if("function"==typeof J?J=oe[I]=V?[P,J]:[J,P]:V?J.unshift(P):J.push(P),(j=f(N))>0&&J.length>j&&!J.warned){J.warned=!0;var le=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");le.name="MaxListenersExceededWarning",le.emitter=N,le.type=I,le.count=J.length,function C(N){console&&console.warn&&console.warn(N)}(le)}return N}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(N,I,P){var V={fired:!1,wrapFn:void 0,target:N,type:I,listener:P},j=p.bind(V);return j.listener=P,V.wrapFn=j,j}function g(N,I,P){var V=N._events;if(void 0===V)return[];var j=V[I];return void 0===j?[]:"function"==typeof j?P?[j.listener||j]:[j]:P?function T(N){for(var I=new Array(N.length),P=0;P<I.length;++P)I[P]=N[P].listener||N[P];return I}(j):m(j,j.length)}function x(N){var I=this._events;if(void 0!==I){var P=I[N];if("function"==typeof P)return 1;if(void 0!==P)return P.length}return 0}function m(N,I){for(var P=new Array(I),V=0;V<I;++V)P[V]=N[V];return P}function M(N,I,P,V){if("function"==typeof N.on)V.once?N.once(I,P):N.on(I,P);else{if("function"!=typeof N.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N);N.addEventListener(I,function j(oe){V.once&&N.removeEventListener(I,j),P(oe)})}}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(N){if("number"!=typeof N||N<0||b(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");k=N}}),S.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||b(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},S.prototype.getMaxListeners=function(){return f(this)},S.prototype.emit=function(I){for(var P=[],V=1;V<arguments.length;V++)P.push(arguments[V]);var j="error"===I,oe=this._events;if(void 0!==oe)j=j&&void 0===oe.error;else if(!j)return!1;if(j){var J;if(P.length>0&&(J=P[0]),J instanceof Error)throw J;var le=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw le.context=J,le}var q=oe[I];if(void 0===q)return!1;if("function"==typeof q)F(q,this,P);else{var ue=q.length,he=m(q,ue);for(V=0;V<ue;++V)F(he[V],this,P)}return!0},S.prototype.on=S.prototype.addListener=function(I,P){return u(this,I,P,!1)},S.prototype.prependListener=function(I,P){return u(this,I,P,!0)},S.prototype.once=function(I,P){return h(P),this.on(I,w(this,I,P)),this},S.prototype.prependOnceListener=function(I,P){return h(P),this.prependListener(I,w(this,I,P)),this},S.prototype.off=S.prototype.removeListener=function(I,P){var V,j,oe,J,le;if(h(P),void 0===(j=this._events))return this;if(void 0===(V=j[I]))return this;if(V===P||V.listener===P)0==--this._eventsCount?this._events=Object.create(null):(delete j[I],j.removeListener&&this.emit("removeListener",I,V.listener||P));else if("function"!=typeof V){for(oe=-1,J=V.length-1;J>=0;J--)if(V[J]===P||V[J].listener===P){le=V[J].listener,oe=J;break}if(oe<0)return this;0===oe?V.shift():function _(N,I){for(;I+1<N.length;I++)N[I]=N[I+1];N.pop()}(V,oe),1===V.length&&(j[I]=V[0]),void 0!==j.removeListener&&this.emit("removeListener",I,le||P)}return this},S.prototype.removeAllListeners=function(I){var P,V,j;if(void 0===(V=this._events))return this;if(void 0===V.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==V[I]&&(0==--this._eventsCount?this._events=Object.create(null):delete V[I]),this;if(0===arguments.length){var J,oe=Object.keys(V);for(j=0;j<oe.length;++j)"removeListener"!==(J=oe[j])&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(P=V[I]))this.removeListener(I,P);else if(void 0!==P)for(j=P.length-1;j>=0;j--)this.removeListener(I,P[j]);return this},S.prototype.listeners=function(I){return g(this,I,!0)},S.prototype.rawListeners=function(I){return g(this,I,!1)},S.listenerCount=function(N,I){return"function"==typeof N.listenerCount?N.listenerCount(I):x.call(N,I)},S.prototype.listenerCount=x,S.prototype.eventNames=function(){return this._eventsCount>0?B(this._events):[]}},6809:Ge=>{"use strict";var G=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,F=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,B=/\s|\uFEFF|\xA0/,C=/\r?\n[\x20\x09]+/g,b=/[;,"]/,S=/[;,"]|\s/,k=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/;function f(x){return x.replace(F,"")}function u(x){return B.test(x)}function p(x,m){for(;u(x[m]);)m++;return m}function w(x){return S.test(x)||!k.test(x)}Ge.exports=(()=>{class x{constructor(_){this.refs=[],_&&this.parse(_)}rel(_){for(var T=[],D=_.toLowerCase(),L=0;L<this.refs.length;L++)this.refs[L].rel.toLowerCase()===D&&T.push(this.refs[L]);return T}get(_,T){_=_.toLowerCase();for(var D=[],L=0;L<this.refs.length;L++)this.refs[L][_]===T&&D.push(this.refs[L]);return D}set(_){return this.refs.push(_),this}has(_,T){_=_.toLowerCase();for(var D=0;D<this.refs.length;D++)if(this.refs[D][_]===T)return!0;return!1}parse(_,M){for(var D=1,L=(_=f(_=(M=M||0)?_.slice(M):_).replace(C,"")).length,N=(M=0,null);M<L;)if(1===D){if(u(_[M])){M++;continue}if("<"!==_[M])throw new Error('Unexpected character "'+_[M]+'" at offset '+M);if(null!=N&&(null!=N.rel?this.refs.push(...x.expandRelations(N)):this.refs.push(N)),-1===(I=_.indexOf(">",M)))throw new Error("Expected end of URI delimiter at offset "+M);N={uri:_.slice(M+1,I)},M=I,D=2,M++}else if(2===D){if(u(_[M])){M++;continue}if(";"===_[M])D=4,M++;else{if(","!==_[M])throw new Error('Unexpected character "'+_[M]+'" at offset '+M);D=1,M++}}else{if(4!==D)throw new Error('Unknown parser state "'+D+'"');if(";"===_[M]||u(_[M])){M++;continue}if(-1===(I=_.indexOf("=",M)))throw new Error("Expected attribute delimiter at offset "+M);var P=f(_.slice(M,I)).toLowerCase(),V="";if('"'===_[M=p(_,M=I+1)])for(M++;M<L;){if('"'===_[M]){M++;break}"\\"===_[M]&&M++,V+=_[M],M++}else{for(var I=M+1;!b.test(_[I])&&I<L;)I++;V=_.slice(M,I),M=I}switch(N[P]&&x.isSingleOccurenceAttr(P)||("*"===P[P.length-1]?N[P]=x.parseExtendedValue(V):(V="type"===P?V.toLowerCase():V,null!=N[P]?Array.isArray(N[P])?N[P].push(V):N[P]=[N[P],V]:N[P]=V)),_[M]){case",":D=1;break;case";":D=4}M++}return null!=N&&(null!=N.rel?this.refs.push(...x.expandRelations(N)):this.refs.push(N)),N=null,this}toString(){for(var _=[],T="",D=null,L=0;L<this.refs.length;L++)D=this.refs[L],T=Object.keys(this.refs[L]).reduce(function(M,N){return"uri"===N?M:M+"; "+x.formatAttribute(N,D[N])},"<"+D.uri+">"),_.push(T);return _.join(", ")}}return x.isCompatibleEncoding=function(m){return G.test(m)},x.parse=function(m,_){return(new x).parse(m,_)},x.isSingleOccurenceAttr=function(m){return"rel"===m||"type"===m||"media"===m||"title"===m||"title*"===m},x.isTokenAttr=function(m){return"rel"===m||"type"===m||"anchor"===m},x.escapeQuotes=function(m){return m.replace(/"/g,'\\"')},x.expandRelations=function(m){return m.rel.split(" ").map(function(T){var D=Object.assign({},m);return D.rel=T,D})},x.parseExtendedValue=function(m){var _=/([^']+)?(?:'([^']+)')?(.+)/.exec(m);return{language:_[2].toLowerCase(),encoding:x.isCompatibleEncoding(_[1])?null:_[1].toLowerCase(),value:x.isCompatibleEncoding(_[1])?decodeURIComponent(_[3]):_[3]}},x.formatExtendedAttribute=function(m,_){var T=(_.encoding||"utf-8").toUpperCase();return m+"="+T+"'"+(_.language||"en")+"'"+(Buffer.isBuffer(_.value)&&x.isCompatibleEncoding(T)?_.value.toString(T):Buffer.isBuffer(_.value)?_.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(_.value))},x.formatAttribute=function(m,_){return Array.isArray(_)?_.map(T=>x.formatAttribute(m,T)).join("; "):"*"===m[m.length-1]||"string"!=typeof _?x.formatExtendedAttribute(m,_):(x.isTokenAttr(m)?_=w(_)?'"'+x.escapeQuotes(_)+'"':x.escapeQuotes(_):w(_)&&(_='"'+(_=(_=encodeURIComponent(_)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),m+"="+_)},x})()},4918:(Ge,G,F)=>{"use strict";var B=F(8926).default;const{isArray:C,isObject:b,isString:S}=F(2353),{asArray:k}=F(4249),{prependBase:h}=F(4920),f=F(3327),u=F(9522);function w(x){throw new f("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:x})}function g({context:x,base:m}){if(!x)return;const _=x["@context"];if(S(_))x["@context"]=h(m,_);else if(C(_))for(let T=0;T<_.length;++T){const D=_[T];S(D)?_[T]=h(m,D):b(D)&&g({context:{"@context":D},base:m})}else if(b(_))for(const T in _)g({context:_[T],base:m})}Ge.exports=class{constructor({sharedCache:m}){this.perOpCache=new Map,this.sharedCache=m}resolve({activeCtx:m,context:_,documentLoader:T,base:D,cycles:L=new Set}){var M=this;return B(function*(){_&&b(_)&&_["@context"]&&(_=_["@context"]),_=k(_);const N=[];for(const I of _){if(S(I)){let j=M._get(I);j||(j=yield M._resolveRemoteContext({activeCtx:m,url:I,documentLoader:T,base:D,cycles:L})),C(j)?N.push(...j):N.push(j);continue}if(null===I){N.push(new u({document:null}));continue}b(I)||w(_);const P=JSON.stringify(I);let V=M._get(P);V||(V=new u({document:I}),M._cacheResolvedContext({key:P,resolved:V,tag:"static"})),N.push(V)}return N})()}_get(m){let _=this.perOpCache.get(m);if(!_){const T=this.sharedCache.get(m);T&&(_=T.get("static"),_&&this.perOpCache.set(m,_))}return _}_cacheResolvedContext({key:m,resolved:_,tag:T}){if(this.perOpCache.set(m,_),void 0!==T){let D=this.sharedCache.get(m);D||(D=new Map,this.sharedCache.set(m,D)),D.set(T,_)}return _}_resolveRemoteContext({activeCtx:m,url:_,documentLoader:T,base:D,cycles:L}){var M=this;return B(function*(){_=h(D,_);const{context:N,remoteDoc:I}=yield M._fetchContext({activeCtx:m,url:_,documentLoader:T,cycles:L});g({context:N,base:D=I.documentUrl||_});const P=yield M.resolve({activeCtx:m,context:N,documentLoader:T,base:D,cycles:L});return M._cacheResolvedContext({key:_,resolved:P,tag:I.tag}),P})()}_fetchContext({activeCtx:m,url:_,documentLoader:T,cycles:D}){return B(function*(){if(D.size>10)throw new f("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===m.processingMode?"loading remote context failed":"context overflow",max:10});if(D.has(_))throw new f("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===m.processingMode?"recursive context inclusion":"context overflow",url:_});let L,M;D.add(_);try{M=yield T(_),L=M.document||null,S(L)&&(L=JSON.parse(L))}catch(N){throw new f("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:_,cause:N})}if(!b(L))throw new f("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:_});return L="@context"in L?{"@context":L["@context"]}:{"@context":{}},M.contextUrl&&(C(L["@context"])||(L["@context"]=[L["@context"]]),L["@context"].push(M.contextUrl)),{context:L,remoteDoc:M}})()}}},3327:Ge=>{"use strict";Ge.exports=class extends Error{constructor(F="An unspecified JSON-LD error occurred.",B="jsonld.Error",C={}){super(F),this.name=B,this.message=F,this.details=C}}},779:Ge=>{"use strict";Ge.exports=G=>{class F{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(F,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(F.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:F}),F.compact=function(B,C){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):G.compact(B,C)},F.expand=function(B){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):G.expand(B)},F.flatten=function(B){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):G.flatten(B)},F}},3865:(Ge,G,F)=>{"use strict";Ge.exports=F(4308).NQuads},2210:(Ge,G,F)=>{"use strict";var B=F(8926).default;Ge.exports=class{constructor(){this._requests={}}wrapLoader(b){const S=this;return S._loader=b,function(){return S.add.apply(S,arguments)}}add(b){var S=this;return B(function*(){let k=S._requests[b];if(k)return Promise.resolve(k);k=S._requests[b]=S._loader(b);try{return yield k}finally{delete S._requests[b]}})()}}},9522:(Ge,G,F)=>{"use strict";const B=F(7073);Ge.exports=class{constructor({document:S}){this.document=S,this.cache=new B({max:10})}getProcessed(S){return this.cache.get(S)}setProcessed(S,k){this.cache.set(S,k)}}},9857:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(3327),{isArray:b,isObject:S,isString:k,isUndefined:h}=F(2353),{isList:f,isValue:u,isGraph:p,isSimpleGraph:w,isSubjectReference:g}=F(9094),{expandIri:x,getContextValue:m,isKeyword:_,process:T,processingMode:D}=F(2134),{removeBase:L,prependBase:M}=F(4920),{addValue:N,asArray:I,compareShortestLeast:P}=F(4249),V={};function oe(J,le,q){if("@nest"!==x(J,le,{vocab:!0},q))throw new C("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ge.exports=V,V.compact=function(){var J=B(function*({activeCtx:le,activeProperty:q=null,element:ue,options:he={},compactionMap:ce=(()=>{})}){if(b(ue)){let fe=[];for(let Ee=0;Ee<ue.length;++Ee){let _e=yield V.compact({activeCtx:le,activeProperty:q,element:ue[Ee],options:he,compactionMap:ce});null===_e&&(_e=yield ce({unmappedValue:ue[Ee],activeCtx:le,activeProperty:q,parent:ue,index:Ee,options:he}),void 0===_e)||fe.push(_e)}return he.compactArrays&&1===fe.length&&0===(m(le,q,"@container")||[]).length&&(fe=fe[0]),fe}const pe=m(le,q,"@context");if(h(pe)||(le=yield T({activeCtx:le,localCtx:pe,propagate:!0,overrideProtected:!0,options:he})),S(ue)){if(he.link&&"@id"in ue&&he.link.hasOwnProperty(ue["@id"])){const we=he.link[ue["@id"]];for(let Ye=0;Ye<we.length;++Ye)if(we[Ye].expanded===ue)return we[Ye].compacted}if(u(ue)||g(ue)){const we=V.compactValue({activeCtx:le,activeProperty:q,value:ue,options:he});return he.link&&g(ue)&&(he.link.hasOwnProperty(ue["@id"])||(he.link[ue["@id"]]=[]),he.link[ue["@id"]].push({expanded:ue,compacted:we})),we}if(f(ue)&&(m(le,q,"@container")||[]).includes("@list"))return V.compact({activeCtx:le,activeProperty:q,element:ue["@list"],options:he,compactionMap:ce});const fe="@reverse"===q,Ee={},_e=le;!u(ue)&&!g(ue)&&(le=le.revertToPreviousContext());const Te=m(_e,q,"@context");h(Te)||(le=yield T({activeCtx:le,localCtx:Te,propagate:!0,overrideProtected:!0,options:he})),he.link&&"@id"in ue&&(he.link.hasOwnProperty(ue["@id"])||(he.link[ue["@id"]]=[]),he.link[ue["@id"]].push({expanded:ue,compacted:Ee}));let De=ue["@type"]||[];De.length>1&&(De=Array.from(De).sort());const be=le;for(const we of De){const Ye=V.compactIri({activeCtx:be,iri:we,relativeTo:{vocab:!0}}),ze=m(_e,Ye,"@context");h(ze)||(le=yield T({activeCtx:le,localCtx:ze,options:he,propagate:!1}))}const de=Object.keys(ue).sort();for(const we of de){const Ye=ue[we];if("@id"!==we)if("@type"!==we)if("@reverse"!==we)if("@preserve"!==we)if("@index"!==we)if("@graph"!==we&&"@list"!==we&&"@included"!==we&&_(we)){const ze=V.compactIri({activeCtx:le,iri:we,relativeTo:{vocab:!0}});N(Ee,ze,Ye)}else{if(!b(Ye))throw new C("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Ye.length){const ze=V.compactIri({activeCtx:le,iri:we,value:Ye,relativeTo:{vocab:!0},reverse:fe}),He=le.mappings.has(ze)?le.mappings.get(ze)["@nest"]:null;let Ne=Ee;He&&(oe(le,He,he),S(Ee[He])||(Ee[He]={}),Ne=Ee[He]),N(Ne,ze,Ye,{propertyIsArray:!0})}for(const ze of Ye){const He=V.compactIri({activeCtx:le,iri:we,value:ze,relativeTo:{vocab:!0},reverse:fe}),Ne=le.mappings.has(He)?le.mappings.get(He)["@nest"]:null;let ye=Ee;Ne&&(oe(le,Ne,he),S(Ee[Ne])||(Ee[Ne]={}),ye=Ee[Ne]);const ee=m(le,He,"@container")||[],ie=p(ze),$=f(ze);let se;$?se=ze["@list"]:ie&&(se=ze["@graph"]);let K=yield V.compact({activeCtx:le,activeProperty:He,element:$||ie?se:ze,options:he,compactionMap:ce});if($){if(b(K)||(K=[K]),ee.includes("@list")){N(ye,He,K,{valueIsArray:!0,allowDuplicate:!0});continue}K={[V.compactIri({activeCtx:le,iri:"@list",relativeTo:{vocab:!0}})]:K},"@index"in ze&&(K[V.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=ze["@index"])}if(ie)if(ee.includes("@graph")&&(ee.includes("@id")||ee.includes("@index")&&w(ze))){let te;ye.hasOwnProperty(He)?te=ye[He]:ye[He]=te={};const X=(ee.includes("@id")?ze["@id"]:ze["@index"])||V.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}});N(te,X,K,{propertyIsArray:!he.compactArrays||ee.includes("@set")})}else ee.includes("@graph")&&w(ze)?(b(K)&&K.length>1&&(K={"@included":K}),N(ye,He,K,{propertyIsArray:!he.compactArrays||ee.includes("@set")})):(b(K)&&1===K.length&&he.compactArrays&&(K=K[0]),K={[V.compactIri({activeCtx:le,iri:"@graph",relativeTo:{vocab:!0}})]:K},"@id"in ze&&(K[V.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=ze["@id"]),"@index"in ze&&(K[V.compactIri({activeCtx:le,iri:"@index",relativeTo:{vocab:!0}})]=ze["@index"]),N(ye,He,K,{propertyIsArray:!he.compactArrays||ee.includes("@set")}));else if(ee.includes("@language")||ee.includes("@index")||ee.includes("@id")||ee.includes("@type")){let te,X;if(ye.hasOwnProperty(He)?te=ye[He]:ye[He]=te={},ee.includes("@language"))u(K)&&(K=K["@value"]),X=ze["@language"];else if(ee.includes("@index")){const me=m(le,He,"@index")||"@index",R=V.compactIri({activeCtx:le,iri:me,relativeTo:{vocab:!0}});if("@index"===me)X=ze["@index"],delete K[R];else{let H;if([X,...H]=I(K[me]||[]),k(X))switch(H.length){case 0:delete K[me];break;case 1:K[me]=H[0];break;default:K[me]=H}else X=null}}else if(ee.includes("@id")){const me=V.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}});X=K[me],delete K[me]}else if(ee.includes("@type")){const me=V.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}});let R;switch([X,...R]=I(K[me]||[]),R.length){case 0:delete K[me];break;case 1:K[me]=R[0];break;default:K[me]=R}1===Object.keys(K).length&&"@id"in ze&&(K=yield V.compact({activeCtx:le,activeProperty:He,element:{"@id":ze["@id"]},options:he,compactionMap:ce}))}X||(X=V.compactIri({activeCtx:le,iri:"@none",relativeTo:{vocab:!0}})),N(te,X,K,{propertyIsArray:ee.includes("@set")})}else{const te=!he.compactArrays||ee.includes("@set")||ee.includes("@list")||b(K)&&0===K.length||"@list"===we||"@graph"===we;N(ye,He,K,{propertyIsArray:te})}}}else{if((m(le,q,"@container")||[]).includes("@index"))continue;const He=V.compactIri({activeCtx:le,iri:we,relativeTo:{vocab:!0}});N(Ee,He,Ye)}else{const ze=yield V.compact({activeCtx:le,activeProperty:q,element:Ye,options:he,compactionMap:ce});b(ze)&&0===ze.length||N(Ee,we,ze)}else{const ze=yield V.compact({activeCtx:le,activeProperty:"@reverse",element:Ye,options:he,compactionMap:ce});for(const He in ze)if(le.mappings.has(He)&&le.mappings.get(He).reverse){const Ne=ze[He],ee=(m(le,He,"@container")||[]).includes("@set")||!he.compactArrays;N(Ee,He,Ne,{propertyIsArray:ee}),delete ze[He]}if(Object.keys(ze).length>0){const He=V.compactIri({activeCtx:le,iri:we,relativeTo:{vocab:!0}});N(Ee,He,ze)}}else{let ze=I(Ye).map(ie=>V.compactIri({activeCtx:_e,iri:ie,relativeTo:{vocab:!0}}));1===ze.length&&(ze=ze[0]);const He=V.compactIri({activeCtx:le,iri:"@type",relativeTo:{vocab:!0}}),ee=(m(le,He,"@container")||[]).includes("@set")&&D(le,1.1)||b(ze)&&0===Ye.length;N(Ee,He,ze,{propertyIsArray:ee})}else{let ze=I(Ye).map(Ne=>V.compactIri({activeCtx:le,iri:Ne,relativeTo:{vocab:!1},base:he.base}));1===ze.length&&(ze=ze[0]),Ee[V.compactIri({activeCtx:le,iri:"@id",relativeTo:{vocab:!0}})]=ze}}return Ee}return ue});return function(le){return J.apply(this,arguments)}}(),V.compactIri=({activeCtx:J,iri:le,value:q=null,relativeTo:ue={vocab:!1},reverse:he=!1,base:ce=null})=>{if(null===le)return le;J.isPropertyTermScoped&&J.previousContext&&(J=J.previousContext);const pe=J.getInverse();if(_(le)&&le in pe&&"@none"in pe[le]&&"@type"in pe[le]["@none"]&&"@none"in pe[le]["@none"]["@type"])return pe[le]["@none"]["@type"]["@none"];if(ue.vocab&&le in pe){const De=J["@language"]||"@none",be=[];S(q)&&"@index"in q&&!("@graph"in q)&&be.push("@index","@index@set"),S(q)&&"@preserve"in q&&(q=q["@preserve"][0]),p(q)?("@index"in q&&be.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in q&&be.push("@graph@id","@graph@id@set"),be.push("@graph","@graph@set","@set"),"@index"in q||be.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in q||be.push("@graph@id","@graph@id@set")):S(q)&&!u(q)&&be.push("@id","@id@set","@type","@set@type");let de="@language",we="@null";if(he)de="@type",we="@reverse",be.push("@set");else if(f(q)){"@index"in q||be.push("@list");const ze=q["@list"];if(0===ze.length)de="@any",we="@none";else{let He=0===ze.length?De:null,Ne=null;for(let ye=0;ye<ze.length;++ye){const ee=ze[ye];let ie="@none",$="@none";if(u(ee)?"@direction"in ee?ie=`${(ee["@language"]||"").toLowerCase()}_${ee["@direction"]}`:"@language"in ee?ie=ee["@language"].toLowerCase():"@type"in ee?$=ee["@type"]:ie="@null":$="@id",null===He?He=ie:ie!==He&&u(ee)&&(He="@none"),null===Ne?Ne=$:$!==Ne&&(Ne="@none"),"@none"===He&&"@none"===Ne)break}He=He||"@none",Ne=Ne||"@none","@none"!==Ne?(de="@type",we=Ne):we=He}}else{if(u(q))if("@language"in q&&!("@index"in q)){be.push("@language","@language@set"),we=q["@language"];const ze=q["@direction"];ze&&(we=`${we}_${ze}`)}else"@direction"in q&&!("@index"in q)?we=`_${q["@direction"]}`:"@type"in q&&(de="@type",we=q["@type"]);else de="@type",we="@id";be.push("@set")}be.push("@none"),S(q)&&!("@index"in q)&&be.push("@index","@index@set"),u(q)&&1===Object.keys(q).length&&be.push("@language","@language@set");const Ye=function j(J,le,q,ue,he,ce){null===ce&&(ce="@null");const pe=[];if(("@id"===ce||"@reverse"===ce)&&S(q)&&"@id"in q){"@reverse"===ce&&pe.push("@reverse");const Ee=V.compactIri({activeCtx:J,iri:q["@id"],relativeTo:{vocab:!0}});J.mappings.has(Ee)&&J.mappings.get(Ee)&&J.mappings.get(Ee)["@id"]===q["@id"]?pe.push.apply(pe,["@vocab","@id"]):pe.push.apply(pe,["@id","@vocab"])}else{pe.push(ce);const Ee=pe.find(_e=>_e.includes("_"));Ee&&pe.push(Ee.replace(/^[^_]+_/,"_"))}pe.push("@none");const fe=J.inverse[le];for(const Ee of ue){if(!(Ee in fe))continue;const _e=fe[Ee][he];for(const Te of pe)if(Te in _e)return _e[Te]}return null}(J,le,q,be,de,we);if(null!==Ye)return Ye}if(ue.vocab&&"@vocab"in J){const De=J["@vocab"];if(0===le.indexOf(De)&&le!==De){const be=le.substr(De.length);if(!J.mappings.has(be))return be}}let fe=null;const Ee=[];let _e=J.fastCurieMap;const Te=le.length-1;for(let De=0;De<Te&&le[De]in _e;++De)_e=_e[le[De]],""in _e&&Ee.push(_e[""][0]);for(let De=Ee.length-1;De>=0;--De){const be=Ee[De],de=be.terms;for(const we of de){const Ye=we+":"+le.substr(be.iri.length);J.mappings.get(we)._prefix&&(!J.mappings.has(Ye)||null===q&&J.mappings.get(Ye)["@id"]===le)&&(null===fe||P(Ye,fe)<0)&&(fe=Ye)}}if(null!==fe)return fe;for(const[De,be]of J.mappings)if(be&&be._prefix&&le.startsWith(De+":"))throw new C(`Absolute IRI "${le}" confused with prefix "${De}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:J});return ue.vocab?le:"@base"in J?J["@base"]?L(M(ce,J["@base"]),le):le:L(ce,le)},V.compactValue=({activeCtx:J,activeProperty:le,value:q,options:ue})=>{if(u(q)){const fe=m(J,le,"@type"),Ee=m(J,le,"@language"),_e=m(J,le,"@direction"),Te=m(J,le,"@container")||[],De="@index"in q&&!Te.includes("@index");if(!De&&"@none"!==fe&&(q["@type"]===fe||"@language"in q&&q["@language"]===Ee&&"@direction"in q&&q["@direction"]===_e||"@language"in q&&q["@language"]===Ee||"@direction"in q&&q["@direction"]===_e))return q["@value"];const be=Object.keys(q).length,de=1===be||2===be&&"@index"in q&&!De,we="@language"in J,Ye=k(q["@value"]),ze=J.mappings.has(le)&&null===J.mappings.get(le)["@language"];if(de&&"@none"!==fe&&(!we||!Ye||ze))return q["@value"];const He={};return De&&(He[V.compactIri({activeCtx:J,iri:"@index",relativeTo:{vocab:!0}})]=q["@index"]),"@type"in q?He[V.compactIri({activeCtx:J,iri:"@type",relativeTo:{vocab:!0}})]=V.compactIri({activeCtx:J,iri:q["@type"],relativeTo:{vocab:!0}}):"@language"in q&&(He[V.compactIri({activeCtx:J,iri:"@language",relativeTo:{vocab:!0}})]=q["@language"]),"@direction"in q&&(He[V.compactIri({activeCtx:J,iri:"@direction",relativeTo:{vocab:!0}})]=q["@direction"]),He[V.compactIri({activeCtx:J,iri:"@value",relativeTo:{vocab:!0}})]=q["@value"],He}const he=x(J,le,{vocab:!0},ue),ce=m(J,le,"@type"),pe=V.compactIri({activeCtx:J,iri:q["@id"],relativeTo:{vocab:"@vocab"===ce},base:ue.base});return"@id"===ce||"@vocab"===ce||"@graph"===he?pe:{[V.compactIri({activeCtx:J,iri:"@id",relativeTo:{vocab:!0}})]:pe}}},313:Ge=>{"use strict";const G="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F="http://www.w3.org/2001/XMLSchema#";Ge.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:G,RDF_LIST:G+"List",RDF_FIRST:G+"first",RDF_REST:G+"rest",RDF_NIL:G+"nil",RDF_TYPE:G+"type",RDF_PLAIN_LITERAL:G+"PlainLiteral",RDF_XML_LITERAL:G+"XMLLiteral",RDF_JSON_LITERAL:G+"JSON",RDF_OBJECT:G+"object",RDF_LANGSTRING:G+"langString",XSD:F,XSD_BOOLEAN:F+"boolean",XSD_DOUBLE:F+"double",XSD_INTEGER:F+"integer",XSD_STRING:F+"string"}},2134:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(4249),b=F(3327),{isArray:S,isObject:k,isString:h,isUndefined:f}=F(2353),{isAbsolute:u,isRelative:p,prependBase:w}=F(4920),{asArray:g,compareShortestLeast:x}=F(4249),m=new Map,T=/^@[a-zA-Z]+$/,D={};function L(N,I,P,V,j,oe){if(null===I||!h(I)||D.isKeyword(I))return I;if(I.match(T))return null;if(V&&V.hasOwnProperty(I)&&!0!==j.get(I)&&D.createTermDefinition({activeCtx:N,localCtx:V,term:I,defined:j,options:oe}),(P=P||{}).vocab){const le=N.mappings.get(I);if(null===le)return null;if(k(le)&&"@id"in le)return le["@id"]}const J=I.indexOf(":");if(J>0){const le=I.substr(0,J),q=I.substr(J+1);if("_"===le||0===q.indexOf("//"))return I;V&&V.hasOwnProperty(le)&&D.createTermDefinition({activeCtx:N,localCtx:V,term:le,defined:j,options:oe});const ue=N.mappings.get(le);if(ue&&ue._prefix)return ue["@id"]+q;if(u(I))return I}if(P.vocab&&"@vocab"in N)return N["@vocab"]+I;if(P.base&&"@base"in N){if(N["@base"])return w(w(oe.base,N["@base"]),I)}else if(P.base)return w(oe.base,I);return I}function M(N,I){if(!N||"object"!=typeof N||!I||"object"!=typeof I)return N===I;const P=Array.isArray(N);if(P!==Array.isArray(I))return!1;if(P){if(N.length!==I.length)return!1;for(let oe=0;oe<N.length;++oe)if(!M(N[oe],I[oe]))return!1;return!0}const V=Object.keys(N),j=Object.keys(I);if(V.length!==j.length)return!1;for(const oe in N){let J=N[oe],le=I[oe];if("@container"===oe&&Array.isArray(J)&&Array.isArray(le)&&(J=J.slice().sort(),le=le.slice().sort()),!M(J,le))return!1}return!0}Ge.exports=D,D.process=function(){var N=B(function*({activeCtx:I,localCtx:P,options:V,propagate:j=!0,overrideProtected:oe=!1,cycles:J=new Set}){if(k(P)&&"@context"in P&&S(P["@context"])&&(P=P["@context"]),0===g(P).length)return I;const q=yield V.contextResolver.resolve({activeCtx:I,context:P,documentLoader:V.documentLoader,base:V.base});k(q[0].document)&&"boolean"==typeof q[0].document["@propagate"]&&(j=q[0].document["@propagate"]);let ue=I;!j&&!ue.previousContext&&(ue=ue.clone(),ue.previousContext=I);for(const he of q){let{document:ce}=he;if(I=ue,null===ce){if(!oe&&0!==Object.keys(I.protected).length){const Ee=V&&V.protectedMode||"error";if("error"===Ee)throw new b("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===Ee){console.warn("WARNING: invalid context nullification");const _e=he.getProcessed(I);if(_e){ue=I=_e;continue}const Te=I;ue=I=D.getInitialContext(V).clone();for(const[De,be]of Object.entries(Te.protected))be&&(I.mappings[De]=C.clone(Te.mappings[De]));I.protected=C.clone(Te.protected),he.setProcessed(Te,ue);continue}throw new b("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,protectedMode:Ee})}ue=I=D.getInitialContext(V).clone();continue}const pe=he.getProcessed(I);if(pe){ue=I=pe;continue}if(k(ce)&&"@context"in ce&&(ce=ce["@context"]),!k(ce))throw new b("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ce});ue=ue.clone();const fe=new Map;if("@version"in ce){if(1.1!==ce["@version"])throw new b("Unsupported JSON-LD version: "+ce["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ce});if(I.processingMode&&"json-ld-1.0"===I.processingMode)throw new b("@version: "+ce["@version"]+" not compatible with "+I.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ce});ue.processingMode="json-ld-1.1",ue["@version"]=ce["@version"],fe.set("@version",!0)}if(ue.processingMode=ue.processingMode||I.processingMode,"@base"in ce){let Ee=ce["@base"];if(null!==Ee&&!u(Ee)){if(!p(Ee))throw new b('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ce});Ee=w(ue["@base"],Ee)}ue["@base"]=Ee,fe.set("@base",!0)}if("@vocab"in ce){const Ee=ce["@vocab"];if(null===Ee)delete ue["@vocab"];else{if(!h(Ee))throw new b('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ce});if(!u(Ee)&&D.processingMode(ue,1))throw new b('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ce});ue["@vocab"]=L(ue,Ee,{vocab:!0,base:!0},void 0,void 0,V)}fe.set("@vocab",!0)}if("@language"in ce){const Ee=ce["@language"];if(null===Ee)delete ue["@language"];else{if(!h(Ee))throw new b('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ce});ue["@language"]=Ee.toLowerCase()}fe.set("@language",!0)}if("@direction"in ce){const Ee=ce["@direction"];if("json-ld-1.0"===I.processingMode)throw new b("Invalid JSON-LD syntax; @direction not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ce});if(null===Ee)delete ue["@direction"];else{if("ltr"!==Ee&&"rtl"!==Ee)throw new b('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ce});ue["@direction"]=Ee}fe.set("@direction",!0)}if("@propagate"in ce){const Ee=ce["@propagate"];if("json-ld-1.0"===I.processingMode)throw new b("Invalid JSON-LD syntax; @propagate not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ce});if("boolean"!=typeof Ee)throw new b("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:P});fe.set("@propagate",!0)}if("@import"in ce){const Ee=ce["@import"];if("json-ld-1.0"===I.processingMode)throw new b("Invalid JSON-LD syntax; @import not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ce});if(!h(Ee))throw new b("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:P});const _e=yield V.contextResolver.resolve({activeCtx:I,context:Ee,documentLoader:V.documentLoader,base:V.base});if(1!==_e.length)throw new b("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:P});const Te=_e[0].getProcessed(I);if(Te)ce=Te;else{const De=_e[0].document;if("@import"in De)throw new b("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:P});for(const be in De)ce.hasOwnProperty(be)||(ce[be]=De[be]);_e[0].setProcessed(I,ce)}fe.set("@import",!0)}fe.set("@protected",ce["@protected"]||!1);for(const Ee in ce)if(D.createTermDefinition({activeCtx:ue,localCtx:ce,term:Ee,defined:fe,options:V,overrideProtected:oe}),k(ce[Ee])&&"@context"in ce[Ee]){const _e=ce[Ee]["@context"];let Te=!0;if(h(_e)){const De=w(V.base,_e);J.has(De)?Te=!1:J.add(De)}if(Te)try{yield D.process({activeCtx:ue.clone(),localCtx:ce[Ee]["@context"],overrideProtected:!0,options:V,cycles:J})}catch(De){throw new b("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ce[Ee]["@context"],term:Ee})}}he.setProcessed(I,ue)}return ue});return function(I){return N.apply(this,arguments)}}(),D.createTermDefinition=({activeCtx:N,localCtx:I,term:P,defined:V,options:j,overrideProtected:oe=!1})=>{if(V.has(P)){if(V.get(P))return;throw new b("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:I,term:P})}let J;if(V.set(P,!1),I.hasOwnProperty(P)&&(J=I[P]),"@type"===P&&k(J)&&"@set"===(J["@container"]||"@set")&&D.processingMode(N,1.1)){const fe=["@container","@id","@protected"],Ee=Object.keys(J);if(0===Ee.length||Ee.some(_e=>!fe.includes(_e)))throw new b("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:P})}else{if(D.isKeyword(P))throw new b("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:P});if(P.match(T))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:P});if(""===P)throw new b("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:I})}const le=N.mappings.get(P);N.mappings.has(P)&&N.mappings.delete(P);let q=!1;if((h(J)||null===J)&&(q=!0,J={"@id":J}),!k(J))throw new b("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:I});const ue={};N.mappings.set(P,ue),ue.reverse=!1;const he=["@container","@id","@language","@reverse","@type"];D.processingMode(N,1.1)&&he.push("@context","@direction","@index","@nest","@prefix","@protected");for(const fe in J)if(!he.includes(fe))throw new b("Invalid JSON-LD syntax; a term definition must not contain "+fe,"jsonld.SyntaxError",{code:"invalid term definition",context:I});const ce=P.indexOf(":");if(ue._termHasColon=ce>0,"@reverse"in J){if("@id"in J)throw new b("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});if("@nest"in J)throw new b("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});const fe=J["@reverse"];if(!h(fe))throw new b("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(!D.isKeyword(fe)&&fe.match(T))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:fe}),void(le?N.mappings.set(P,le):N.mappings.delete(P));const Ee=L(N,fe,{vocab:!0,base:!1},I,V,j);if(!u(Ee))throw new b("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});ue["@id"]=Ee,ue.reverse=!0}else if("@id"in J){let fe=J["@id"];if(fe&&!h(fe))throw new b("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(null===fe)ue["@id"]=null;else{if(!D.isKeyword(fe)&&fe.match(T))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:fe}),void(le?N.mappings.set(P,le):N.mappings.delete(P));if(fe!==P){if(fe=L(N,fe,{vocab:!0,base:!1},I,V,j),!u(fe)&&!D.isKeyword(fe))throw new b("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(P.match(/(?::[^:])|\//)&&L(N,P,{vocab:!0,base:!1},I,new Map(V).set(P,!0),j)!==fe)throw new b("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});ue["@id"]=fe,ue._prefix=q&&!ue._termHasColon&&fe.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ue))if(ue._termHasColon){const fe=P.substr(0,ce);if(I.hasOwnProperty(fe)&&D.createTermDefinition({activeCtx:N,localCtx:I,term:fe,defined:V,options:j}),N.mappings.has(fe)){const Ee=P.substr(ce+1);ue["@id"]=N.mappings.get(fe)["@id"]+Ee}else ue["@id"]=P}else if("@type"===P)ue["@id"]=P;else{if(!("@vocab"in N))throw new b("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I,term:P});ue["@id"]=N["@vocab"]+P}if((!0===J["@protected"]||!0===V.get("@protected")&&!1!==J["@protected"])&&(N.protected[P]=!0,ue.protected=!0),V.set(P,!0),"@type"in J){let fe=J["@type"];if(!h(fe))throw new b("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if("@json"===fe||"@none"===fe){if(D.processingMode(N,1))throw new b(`Invalid JSON-LD syntax; an @context @type value must not be "${fe}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else if("@id"!==fe&&"@vocab"!==fe){if(fe=L(N,fe,{vocab:!0,base:!1},I,V,j),!u(fe))throw new b("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if(0===fe.indexOf("_:"))throw new b("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}ue["@type"]=fe}if("@container"in J){const fe=h(J["@container"])?[J["@container"]]:J["@container"]||[],Ee=["@list","@set","@index","@language"];let _e=!0;const Te=fe.includes("@set");if(D.processingMode(N,1.1)){if(Ee.push("@graph","@id","@type"),fe.includes("@list")){if(1!==fe.length)throw new b("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else if(fe.includes("@graph")){if(fe.some(De=>"@graph"!==De&&"@id"!==De&&"@index"!==De&&"@set"!==De))throw new b("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else _e&=fe.length<=(Te?2:1);if(fe.includes("@type")&&(ue["@type"]=ue["@type"]||"@id",!["@id","@vocab"].includes(ue["@type"])))throw new b("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else _e&=!S(J["@container"]),_e&=fe.length<=1;if(_e&=fe.every(De=>Ee.includes(De)),_e&=!(Te&&fe.includes("@list")),!_e)throw new b("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ee.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:I});if(ue.reverse&&!fe.every(De=>["@index","@set"].includes(De)))throw new b("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});ue["@container"]=fe}if("@index"in J){if(!("@container"in J)||!ue["@container"].includes("@index"))throw new b(`Invalid JSON-LD syntax; @index without @index in @container: "${J["@index"]}" on term "${P}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});if(!h(J["@index"])||0===J["@index"].indexOf("@"))throw new b(`Invalid JSON-LD syntax; @index must expand to an IRI: "${J["@index"]}" on term "${P}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});ue["@index"]=J["@index"]}if("@context"in J&&(ue["@context"]=J["@context"]),"@language"in J&&!("@type"in J)){let fe=J["@language"];if(null!==fe&&!h(fe))throw new b("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:I});null!==fe&&(fe=fe.toLowerCase()),ue["@language"]=fe}if("@prefix"in J){if(P.match(/:|\//))throw new b("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:I});if(D.isKeyword(ue["@id"]))throw new b("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:I});if("boolean"!=typeof J["@prefix"])throw new b("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:I});ue._prefix=!0===J["@prefix"]}if("@direction"in J){const fe=J["@direction"];if(null!==fe&&"ltr"!==fe&&"rtl"!==fe)throw new b('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:I});ue["@direction"]=fe}if("@nest"in J){const fe=J["@nest"];if(!h(fe)||"@nest"!==fe&&0===fe.indexOf("@"))throw new b("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:I});ue["@nest"]=fe}const pe=ue["@id"];if("@context"===pe||"@preserve"===pe)throw new b("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:I});if(le&&le.protected&&!oe&&(N.protected[P]=!0,ue.protected=!0,!M(le,ue))){const fe=j&&j.protectedMode||"error";if("error"===fe)throw new b(`Invalid JSON-LD syntax; tried to redefine "${P}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:I,term:P});if("warn"===fe)return void console.warn("WARNING: protected term redefinition",{term:P});throw new b("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:I,term:P,protectedMode:fe})}},D.expandIri=(N,I,P,V)=>L(N,I,P,void 0,void 0,V),D.getInitialContext=N=>{const I=JSON.stringify({processingMode:N.processingMode}),P=m.get(I);if(P)return P;const V={processingMode:N.processingMode,mappings:new Map,inverse:null,getInverse:function j(){const ue=this;if(ue.inverse)return ue.inverse;const he=ue.inverse={},ce=ue.fastCurieMap={},pe={},fe=(ue["@language"]||"@none").toLowerCase(),Ee=ue["@direction"],_e=ue.mappings,Te=[..._e.keys()].sort(x);for(const De of Te){const be=_e.get(De);if(null===be)continue;let de=be["@container"]||"@none";if(de=[].concat(de).sort().join(""),null===be["@id"])continue;const we=g(be["@id"]);for(const Ye of we){let ze=he[Ye];const He=D.isKeyword(Ye);if(ze)!He&&!be._termHasColon&&pe[Ye].push(De);else if(he[Ye]=ze={},!He&&!be._termHasColon){pe[Ye]=[De];const Ne={iri:Ye,terms:pe[Ye]};Ye[0]in ce?ce[Ye[0]].push(Ne):ce[Ye[0]]=[Ne]}if(ze[de]||(ze[de]={"@language":{},"@type":{},"@any":{}}),ze=ze[de],J(De,ze["@any"],"@none"),be.reverse)J(De,ze["@type"],"@reverse");else if("@none"===be["@type"])J(De,ze["@any"],"@none"),J(De,ze["@language"],"@none"),J(De,ze["@type"],"@none");else if("@type"in be)J(De,ze["@type"],be["@type"]);else if("@language"in be&&"@direction"in be){const Ne=be["@language"],ye=be["@direction"];J(De,ze["@language"],Ne&&ye?`${Ne}_${ye}`.toLowerCase():Ne?Ne.toLowerCase():ye?`_${ye}`:"@null")}else"@language"in be?J(De,ze["@language"],(be["@language"]||"@null").toLowerCase()):"@direction"in be?J(De,ze["@language"],be["@direction"]?`_${be["@direction"]}`:"@none"):Ee?(J(De,ze["@language"],`_${Ee}`),J(De,ze["@language"],"@none"),J(De,ze["@type"],"@none")):(J(De,ze["@language"],fe),J(De,ze["@language"],"@none"),J(De,ze["@type"],"@none"))}}for(const De in ce)oe(ce,De,1);return he},clone:function le(){const ue={};return ue.mappings=C.clone(this.mappings),ue.clone=this.clone,ue.inverse=null,ue.getInverse=this.getInverse,ue.protected=C.clone(this.protected),this.previousContext&&(ue.previousContext=this.previousContext.clone()),ue.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(ue["@base"]=this["@base"]),"@language"in this&&(ue["@language"]=this["@language"]),"@vocab"in this&&(ue["@vocab"]=this["@vocab"]),ue},revertToPreviousContext:function q(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===m.size&&m.clear(),m.set(I,V),V;function oe(ue,he,ce){const pe=ue[he],fe=ue[he]={};let Ee,_e;for(const Te of pe)Ee=Te.iri,_e=ce>=Ee.length?"":Ee[ce],_e in fe?fe[_e].push(Te):fe[_e]=[Te];for(const Te in fe)""!==Te&&oe(fe,Te,ce+1)}function J(ue,he,ce){he.hasOwnProperty(ce)||(he[ce]=ue)}},D.getContextValue=(N,I,P)=>{if(null===I)return"@context"===P?void 0:null;if(N.mappings.has(I)){const V=N.mappings.get(I);if(f(P))return V;if(V.hasOwnProperty(P))return V[P]}return"@language"===P&&P in N||"@direction"===P&&P in N?N[P]:"@context"!==P?null:void 0},D.processingMode=(N,I)=>I.toString()>="1.1"?!N.processingMode||N.processingMode>="json-ld-"+I.toString():"json-ld-1.0"===N.processingMode,D.isKeyword=N=>{if(!h(N)||"@"!==N[0])return!1;switch(N){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},8719:(Ge,G,F)=>{"use strict";var B=F(8926).default;const{parseLinkHeader:C,buildHeaders:b}=F(4249),{LINK_HEADER_CONTEXT:S}=F(313),k=F(3327),h=F(2210),{prependBase:f}=F(4920),u=/(^|(\r\n))link:/i;function p(w,g,x){const m=new(w=w||XMLHttpRequest);return new Promise((_,T)=>{m.onload=()=>_(m),m.onerror=D=>T(D),m.open("GET",g,!0);for(const D in x)m.setRequestHeader(D,x[D]);m.send()})}Ge.exports=({secure:w,headers:g={},xhr:x}={headers:{}})=>{return g=b(g),(new h).wrapLoader(_);function _(D){return T.apply(this,arguments)}function T(){return(T=B(function*(D){if(0!==D.indexOf("http:")&&0!==D.indexOf("https:"))throw new k('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:D});if(w&&0!==D.indexOf("https"))throw new k('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:D});let L;try{L=yield p(x,D,g)}catch(V){throw new k("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:D,cause:V})}if(L.status>=400)throw new k("URL could not be dereferenced: "+L.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:D,httpStatusCode:L.status});let M={contextUrl:null,documentUrl:D,document:L.response},N=null;const I=L.getResponseHeader("Content-Type");let P;if(u.test(L.getAllResponseHeaders())&&(P=L.getResponseHeader("Link")),P&&"application/ld+json"!==I){const V=C(P),j=V[S];if(Array.isArray(j))throw new k("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:D});j&&(M.contextUrl=j.target),N=V.alternate,N&&"application/ld+json"==N.type&&!(I||"").match(/^application\/(\w*\+)?json$/)&&(M=yield _(f(D,N.target)))}return M})).apply(this,arguments)}}},554:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(3327),{isArray:b,isObject:S,isEmptyObject:k,isString:h,isUndefined:f}=F(2353),{isList:u,isValue:p,isGraph:w,isSubject:g}=F(9094),{expandIri:x,getContextValue:m,isKeyword:_,process:T,processingMode:D}=F(2134),{isAbsolute:L}=F(4920),{addValue:M,asArray:N,getValues:I,validateTypeValue:P}=F(4249),V={};Ge.exports=V;const j=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function oe(ce){return J.apply(this,arguments)}function J(){return(J=B(function*({activeCtx:ce,activeProperty:pe,expandedActiveProperty:fe,element:Ee,expandedParent:_e,options:Te={},insideList:De,typeKey:be,typeScopedContext:de,expansionMap:we}){const Ye=Object.keys(Ee).sort(),ze=[];let He;const Ne=Ee[be]&&"@json"===x(ce,b(Ee[be])?Ee[be][0]:Ee[be],{vocab:!0},Te);for(const ye of Ye){let ie,ee=Ee[ye];if("@context"===ye)continue;let $=x(ce,ye,{vocab:!0},Te);if((null===$||!L($)&&!_($))&&($=we({unmappedProperty:ye,activeCtx:ce,activeProperty:pe,parent:Ee,options:Te,insideList:De,value:ee,expandedParent:_e}),void 0===$))continue;if(_($)){if("@reverse"===fe)throw new C("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:ee});if($ in _e&&"@included"!==$&&"@type"!==$)throw new C("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:$})}if("@id"===$){if(!h(ee)){if(!Te.isFrame)throw new C('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:ee});if(S(ee)){if(!k(ee))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:ee})}else{if(!b(ee))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:ee});if(!ee.every(X=>h(X)))throw new C('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:ee})}}M(_e,"@id",N(ee).map(X=>h(X)?x(ce,X,{base:!0},Te):X),{propertyIsArray:Te.isFrame});continue}if("@type"===$){S(ee)&&(ee=Object.fromEntries(Object.entries(ee).map(([X,me])=>[x(de,X,{vocab:!0}),N(me).map(R=>x(de,R,{base:!0,vocab:!0}))]))),P(ee,Te.isFrame),M(_e,"@type",N(ee).map(X=>h(X)?x(de,X,{base:!0,vocab:!0},Te):X),{propertyIsArray:Te.isFrame});continue}if("@included"===$&&D(ce,1.1)){const X=N(yield V.expand({activeCtx:ce,activeProperty:pe,element:ee,options:Te,expansionMap:we}));if(!X.every(me=>g(me)))throw new C("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:ee});M(_e,"@included",X,{propertyIsArray:!0});continue}if("@graph"===$&&!S(ee)&&!b(ee))throw new C('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:ee});if("@value"===$){He=ee,Ne&&D(ce,1.1)?_e["@value"]=ee:M(_e,"@value",ee,{propertyIsArray:Te.isFrame});continue}if("@language"===$){if(null===ee)continue;if(!h(ee)&&!Te.isFrame)throw new C('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:ee});ee=N(ee).map(X=>h(X)?X.toLowerCase():X);for(const X of ee)h(X)&&!X.match(j)&&console.warn(`@language must be valid BCP47: ${X}`);M(_e,"@language",ee,{propertyIsArray:Te.isFrame});continue}if("@direction"===$){if(!h(ee)&&!Te.isFrame)throw new C('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:ee});ee=N(ee);for(const X of ee)if(h(X)&&"ltr"!==X&&"rtl"!==X)throw new C('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:ee});M(_e,"@direction",ee,{propertyIsArray:Te.isFrame});continue}if("@index"===$){if(!h(ee))throw new C('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:ee});M(_e,"@index",ee);continue}if("@reverse"===$){if(!S(ee))throw new C('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:ee});if(ie=yield V.expand({activeCtx:ce,activeProperty:"@reverse",element:ee,options:Te,expansionMap:we}),"@reverse"in ie)for(const me in ie["@reverse"])M(_e,me,ie["@reverse"][me],{propertyIsArray:!0});let X=_e["@reverse"]||null;for(const me in ie){if("@reverse"===me)continue;null===X&&(X=_e["@reverse"]={}),M(X,me,[],{propertyIsArray:!0});const R=ie[me];for(let H=0;H<R.length;++H){const Z=R[H];if(p(Z)||u(Z))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ie});M(X,me,Z,{propertyIsArray:!0})}}continue}if("@nest"===$){ze.push(ye);continue}let se=ce;const K=m(ce,ye,"@context");f(K)||(se=yield T({activeCtx:ce,localCtx:K,propagate:!0,overrideProtected:!0,options:Te}));const te=m(se,ye,"@container")||[];if(te.includes("@language")&&S(ee))ie=q(se,ee,m(se,ye,"@direction"),Te);else if(te.includes("@index")&&S(ee)){const X=te.includes("@graph"),me=m(se,ye,"@index")||"@index",R="@index"!==me&&x(ce,me,{vocab:!0},Te);ie=yield ue({activeCtx:se,options:Te,activeProperty:ye,value:ee,expansionMap:we,asGraph:X,indexKey:me,propertyIndex:R})}else if(te.includes("@id")&&S(ee)){const X=te.includes("@graph");ie=yield ue({activeCtx:se,options:Te,activeProperty:ye,value:ee,expansionMap:we,asGraph:X,indexKey:"@id"})}else if(te.includes("@type")&&S(ee))ie=yield ue({activeCtx:se.revertToPreviousContext(),options:Te,activeProperty:ye,value:ee,expansionMap:we,asGraph:!1,indexKey:"@type"});else{const X="@list"===$;if(X||"@set"===$){let me=pe;X&&"@graph"===fe&&(me=null),ie=yield V.expand({activeCtx:se,activeProperty:me,element:ee,options:Te,insideList:X,expansionMap:we})}else ie="@json"===m(ce,ye,"@type")?{"@type":"@json","@value":ee}:yield V.expand({activeCtx:se,activeProperty:ye,element:ee,options:Te,insideList:!1,expansionMap:we})}if(null!==ie||"@value"===$||(ie=we({unmappedValue:ee,expandedProperty:$,activeCtx:se,activeProperty:pe,parent:Ee,options:Te,insideList:De,key:ye,expandedParent:_e}),void 0!==ie)){if("@list"!==$&&!u(ie)&&te.includes("@list")&&(ie={"@list":N(ie)}),te.includes("@graph")&&!te.some(X=>"@id"===X||"@index"===X)&&(ie=N(ie).map(X=>({"@graph":N(X)}))),se.mappings.has(ye)&&se.mappings.get(ye).reverse){const X=_e["@reverse"]=_e["@reverse"]||{};ie=N(ie);for(let me=0;me<ie.length;++me){const R=ie[me];if(p(R)||u(R))throw new C('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ie});M(X,$,R,{propertyIsArray:!0})}continue}M(_e,$,ie,{propertyIsArray:!0})}}if("@value"in _e&&("@json"!==_e["@type"]||!D(ce,1.1))&&(S(He)||b(He))&&!Te.isFrame)throw new C('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:He});for(const ye of ze){const ee=b(Ee[ye])?Ee[ye]:[Ee[ye]];for(const ie of ee){if(!S(ie)||Object.keys(ie).some($=>"@value"===x(ce,$,{vocab:!0},Te)))throw new C("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ie});yield oe({activeCtx:ce,activeProperty:pe,expandedActiveProperty:fe,element:ie,expandedParent:_e,options:Te,insideList:De,typeScopedContext:de,typeKey:be,expansionMap:we})}}})).apply(this,arguments)}function le({activeCtx:ce,activeProperty:pe,value:fe,options:Ee}){if(null==fe)return null;const _e=x(ce,pe,{vocab:!0},Ee);if("@id"===_e)return x(ce,fe,{base:!0},Ee);if("@type"===_e)return x(ce,fe,{vocab:!0,base:!0},Ee);const Te=m(ce,pe,"@type");if(("@id"===Te||"@graph"===_e)&&h(fe))return{"@id":x(ce,fe,{base:!0},Ee)};if("@vocab"===Te&&h(fe))return{"@id":x(ce,fe,{vocab:!0,base:!0},Ee)};if(_(_e))return fe;const De={};if(Te&&!["@id","@vocab","@none"].includes(Te))De["@type"]=Te;else if(h(fe)){const be=m(ce,pe,"@language");null!==be&&(De["@language"]=be);const de=m(ce,pe,"@direction");null!==de&&(De["@direction"]=de)}return["boolean","number","string"].includes(typeof fe)||(fe=fe.toString()),De["@value"]=fe,De}function q(ce,pe,fe,Ee){const _e=[],Te=Object.keys(pe).sort();for(const De of Te){const be=x(ce,De,{vocab:!0},Ee);let de=pe[De];b(de)||(de=[de]);for(const we of de){if(null===we)continue;if(!h(we))throw new C("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:pe});const Ye={"@value":we};"@none"!==be&&(Ye["@language"]=De.toLowerCase()),fe&&(Ye["@direction"]=fe),_e.push(Ye)}}return _e}function ue(ce){return he.apply(this,arguments)}function he(){return(he=B(function*({activeCtx:ce,options:pe,activeProperty:fe,value:Ee,expansionMap:_e,asGraph:Te,indexKey:De,propertyIndex:be}){const de=[],we=Object.keys(Ee).sort(),Ye="@type"===De;for(let ze of we){if(Ye){const ye=m(ce,ze,"@context");f(ye)||(ce=yield T({activeCtx:ce,localCtx:ye,propagate:!1,options:pe}))}let Ne,He=Ee[ze];b(He)||(He=[He]),He=yield V.expand({activeCtx:ce,activeProperty:fe,element:He,options:pe,insideList:!1,insideIndex:!0,expansionMap:_e}),Ne=be?"@none"===ze?"@none":le({activeCtx:ce,activeProperty:De,value:ze,options:pe}):x(ce,ze,{vocab:!0},pe),"@id"===De?ze=x(ce,ze,{base:!0},pe):Ye&&(ze=Ne);for(let ye of He){if(Te&&!w(ye)&&(ye={"@graph":[ye]}),"@type"===De)"@none"===Ne||(ye["@type"]=ye["@type"]?[ze].concat(ye["@type"]):[ze]);else{if(p(ye)&&!["@language","@type","@index"].includes(De))throw new C(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${De}".`,"jsonld.SyntaxError",{code:"invalid value object",value:ye});be?"@none"!==Ne&&M(ye,be,Ne,{propertyIsArray:!0,prependValue:!0}):"@none"!==Ne&&!(De in ye)&&(ye[De]=ze)}de.push(ye)}}return de})).apply(this,arguments)}V.expand=function(){var ce=B(function*({activeCtx:pe,activeProperty:fe=null,element:Ee,options:_e={},insideList:Te=!1,insideIndex:De=!1,typeScopedContext:be=null,expansionMap:de=(()=>{})}){if(null==Ee)return null;if("@default"===fe&&(_e=Object.assign({},_e,{isFrame:!1})),!b(Ee)&&!S(Ee)){if(!Te&&(null===fe||"@graph"===x(pe,fe,{vocab:!0},_e))){const ie=yield de({unmappedValue:Ee,activeCtx:pe,activeProperty:fe,options:_e,insideList:Te});return void 0===ie?null:ie}return le({activeCtx:pe,activeProperty:fe,value:Ee,options:_e})}if(b(Ee)){let ie=[];const $=m(pe,fe,"@container")||[];Te=Te||$.includes("@list");for(let se=0;se<Ee.length;++se){let K=yield V.expand({activeCtx:pe,activeProperty:fe,element:Ee[se],options:_e,expansionMap:de,insideIndex:De,typeScopedContext:be});Te&&b(K)&&(K={"@list":K}),(null!==K||(K=yield de({unmappedValue:Ee[se],activeCtx:pe,activeProperty:fe,parent:Ee,index:se,options:_e,expandedParent:ie,insideList:Te}),void 0!==K))&&(b(K)?ie=ie.concat(K):ie.push(K))}return ie}const we=x(pe,fe,{vocab:!0},_e),Ye=m(pe,fe,"@context");be=be||(pe.previousContext?pe:null);let ze=Object.keys(Ee).sort(),He=!De;if(He&&be&&ze.length<=2&&!ze.includes("@context"))for(const ie of ze){const $=x(be,ie,{vocab:!0},_e);if("@value"===$){He=!1,pe=be;break}if("@id"===$&&1===ze.length){He=!1;break}}He&&(pe=pe.revertToPreviousContext()),f(Ye)||(pe=yield T({activeCtx:pe,localCtx:Ye,propagate:!0,overrideProtected:!0,options:_e})),"@context"in Ee&&(pe=yield T({activeCtx:pe,localCtx:Ee["@context"],options:_e})),be=pe;let Ne=null;for(const ie of ze)if("@type"===x(pe,ie,{vocab:!0},_e)){Ne=Ne||ie;const se=Ee[ie],K=Array.isArray(se)?se.length>1?se.slice().sort():se:[se];for(const te of K){const X=m(be,te,"@context");f(X)||(pe=yield T({activeCtx:pe,localCtx:X,options:_e,propagate:!1}))}}let ye={};yield oe({activeCtx:pe,activeProperty:fe,expandedActiveProperty:we,element:Ee,expandedParent:ye,options:_e,insideList:Te,typeKey:Ne,typeScopedContext:be,expansionMap:de}),ze=Object.keys(ye);let ee=ze.length;if("@value"in ye){if("@type"in ye&&("@language"in ye||"@direction"in ye))throw new C('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ye});let ie=ee-1;if("@type"in ye&&(ie-=1),"@index"in ye&&(ie-=1),"@language"in ye&&(ie-=1),"@direction"in ye&&(ie-=1),0!==ie)throw new C('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ye});const $=null===ye["@value"]?[]:N(ye["@value"]),se=I(ye,"@type");if(!D(pe,1.1)||!se.includes("@json")||1!==se.length)if(0===$.length){const K=yield de({unmappedValue:ye,activeCtx:pe,activeProperty:fe,element:Ee,options:_e,insideList:Te});ye=void 0!==K?K:null}else{if(!$.every(K=>h(K)||k(K))&&"@language"in ye)throw new C("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:ye});if(!se.every(K=>L(K)&&!(h(K)&&0===K.indexOf("_:"))||k(K)))throw new C('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:ye})}}else if("@type"in ye&&!b(ye["@type"]))ye["@type"]=[ye["@type"]];else if("@set"in ye||"@list"in ye){if(ee>1&&(2!==ee||!("@index"in ye)))throw new C('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:ye});"@set"in ye&&(ye=ye["@set"],ze=Object.keys(ye),ee=ze.length)}else if(1===ee&&"@language"in ye){const ie=yield de(ye,{unmappedValue:ye,activeCtx:pe,activeProperty:fe,element:Ee,options:_e,insideList:Te});ye=void 0!==ie?ie:null}if(S(ye)&&!_e.keepFreeFloatingNodes&&!Te&&(null===fe||"@graph"===we)&&(0===ee||"@value"in ye||"@list"in ye||1===ee&&"@id"in ye)){const ie=yield de({unmappedValue:ye,activeCtx:pe,activeProperty:fe,element:Ee,options:_e,insideList:Te});ye=void 0!==ie?ie:null}return ye});return function(pe){return ce.apply(this,arguments)}}()},7613:(Ge,G,F)=>{"use strict";const{isSubjectReference:B}=F(9094),{createMergedNodeMap:C}=F(5057),b={};Ge.exports=b,b.flatten=S=>{const k=C(S),h=[],f=Object.keys(k).sort();for(let u=0;u<f.length;++u){const p=k[f[u]];B(p)||h.push(p)}return h}},1938:(Ge,G,F)=>{"use strict";const{isKeyword:B}=F(2134),C=F(9094),b=F(2353),S=F(4249),k=F(4920),h=F(3327),{createNodeMap:f,mergeNodeMapGraphs:u}=F(5057),p={};function w(P){const V={};for(const j in P)void 0!==P[j]&&(V["@"+j]=[P[j]]);return[V]}function g(P,V,j){for(let oe=j.length-1;oe>=0;--oe){const J=j[oe];if(J.graph===V&&J.subject["@id"]===P["@id"])return!0}return!1}function x(P,V,j){const oe="@"+j;let J=oe in P?P[oe][0]:V[j];if("embed"===j)if(!0===J)J="@once";else if(!1===J)J="@never";else if("@always"!==J&&"@never"!==J&&"@link"!==J&&"@first"!==J&&"@last"!==J&&"@once"!==J)throw new h("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:P});return J}function m(P){if(!b.isArray(P)||1!==P.length||!b.isObject(P[0]))throw new h("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:P});if("@id"in P[0])for(const V of S.asArray(P[0]["@id"]))if(!b.isObject(V)&&!k.isAbsolute(V)||b.isString(V)&&0===V.indexOf("_:"))throw new h("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:P});if("@type"in P[0])for(const V of S.asArray(P[0]["@type"]))if(!b.isObject(V)&&!k.isAbsolute(V)||b.isString(V)&&0===V.indexOf("_:"))throw new h("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:P})}function T(P,V,j,oe){let J=!0,le=!1;for(const q in j){let ue=!1;const he=S.getValues(V,q),ce=0===S.getValues(j,q).length;if("@id"===q){if(b.isEmptyObject(j["@id"][0]||{})?ue=!0:j["@id"].length>=0&&(ue=j["@id"].includes(he[0])),!oe.requireAll)return ue}else if("@type"===q){if(J=!1,ce){if(he.length>0)return!1;ue=!0}else if(1===j["@type"].length&&b.isEmptyObject(j["@type"][0]))ue=he.length>0;else for(const pe of j["@type"])ue=!(!b.isObject(pe)||!("@default"in pe))||ue||he.some(fe=>fe===pe);if(!oe.requireAll)return ue}else{if(B(q))continue;{const pe=S.getValues(j,q)[0];let fe=!1;if(pe&&(m([pe]),fe="@default"in pe),J=!1,0===he.length&&fe)continue;if(he.length>0&&ce)return!1;if(void 0===pe){if(he.length>0)return!1;ue=!0}else if(C.isList(pe)){const Ee=pe["@list"][0];if(C.isList(he[0])){const _e=he[0]["@list"];C.isValue(Ee)?ue=_e.some(Te=>I(Ee,Te)):(C.isSubject(Ee)||C.isSubjectReference(Ee))&&(ue=_e.some(Te=>N(P,Ee,Te,oe)))}}else ue=C.isValue(pe)?he.some(Ee=>I(pe,Ee)):C.isSubjectReference(pe)?he.some(Ee=>N(P,pe,Ee,oe)):!!b.isObject(pe)&&he.length>0}}if(!ue&&oe.requireAll)return!1;le=le||ue}return J||le}function D(P,V){const j=P.uniqueEmbeds[P.graph],oe=j[V],J=oe.parent,le=oe.property,q={"@id":V};if(b.isArray(J)){for(let he=0;he<J.length;++he)if(S.compareValues(J[he],q)){J[he]=q;break}}else{const he=b.isArray(J[le]);S.removeValue(J,le,q,{propertyIsArray:he}),S.addValue(J,le,q,{propertyIsArray:he})}const ue=he=>{const ce=Object.keys(j);for(const pe of ce)pe in j&&b.isObject(j[pe].parent)&&j[pe].parent["@id"]===he&&(delete j[pe],ue(pe))};ue(V)}function L(P,V){if(b.isArray(P))return P.map(j=>L(j,V));if(b.isObject(P)){if("@preserve"in P)return P["@preserve"][0];if(C.isValue(P))return P;if(C.isList(P))return P["@list"]=L(P["@list"],V),P;if("@id"in P){const j=P["@id"];if(V.link.hasOwnProperty(j)){const oe=V.link[j].indexOf(P);if(-1!==oe)return V.link[j][oe];V.link[j].push(P)}else V.link[j]=[P]}for(const j in P)"@id"===j&&V.bnodesToClear.includes(P[j])?delete P["@id"]:P[j]=L(P[j],V)}return P}function M(P,V,j){b.isObject(P)?S.addValue(P,V,j,{propertyIsArray:!0}):P.push(j)}function N(P,V,j,oe){if(!("@id"in j))return!1;const J=P.subjects[j["@id"]];return J&&T(P,J,V,oe)}function I(P,V){const j=V["@value"],oe=V["@type"],J=V["@language"],le=P["@value"]?b.isArray(P["@value"])?P["@value"]:[P["@value"]]:[],q=P["@type"]?b.isArray(P["@type"])?P["@type"]:[P["@type"]]:[],ue=P["@language"]?b.isArray(P["@language"])?P["@language"]:[P["@language"]]:[];return 0===le.length&&0===q.length&&0===ue.length||!(!le.includes(j)&&!b.isEmptyObject(le[0])||!(!oe&&0===q.length||q.includes(oe)||oe&&b.isEmptyObject(q[0]))||!(!J&&0===ue.length||ue.includes(J)||J&&b.isEmptyObject(ue[0])))}Ge.exports=p,p.frameMergedOrDefault=(P,V,j)=>{const oe={options:j,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},J=new S.IdentifierIssuer("_:b");f(P,oe.graphMap,"@default",J),j.merged&&(oe.graphMap["@merged"]=u(oe.graphMap),oe.graph="@merged"),oe.subjects=oe.graphMap[oe.graph];const le=[];return p.frame(oe,Object.keys(oe.subjects).sort(),V,le),j.pruneBlankNodeIdentifiers&&(j.bnodesToClear=Object.keys(oe.bnodeMap).filter(q=>1===oe.bnodeMap[q].length)),j.link={},L(le,j)},p.frame=(P,V,j,oe,J=null)=>{m(j);const le=P.options,q={embed:x(j=j[0],le,"embed"),explicit:x(j,le,"explicit"),requireAll:x(j,le,"requireAll")};P.link.hasOwnProperty(P.graph)||(P.link[P.graph]={});const ue=P.link[P.graph],he=function _(P,V,j,oe){const J={};for(const le of V){const q=P.graphMap[P.graph][le];T(P,q,j,oe)&&(J[le]=q)}return J}(P,V,j,q),ce=Object.keys(he).sort();for(const pe of ce){const fe=he[pe];if(null===J?P.uniqueEmbeds={[P.graph]:{}}:P.uniqueEmbeds[P.graph]=P.uniqueEmbeds[P.graph]||{},"@link"===q.embed&&pe in ue){M(oe,J,ue[pe]);continue}const Ee={"@id":pe};if(0===pe.indexOf("_:")&&S.addValue(P.bnodeMap,pe,Ee,{propertyIsArray:!0}),ue[pe]=Ee,("@first"===q.embed||"@last"===q.embed)&&P.is11)throw new h("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:j});if(P.embedded||!P.uniqueEmbeds[P.graph].hasOwnProperty(pe)){if(P.embedded&&("@never"===q.embed||g(fe,P.graph,P.subjectStack))){M(oe,J,Ee);continue}if(P.embedded&&("@first"==q.embed||"@once"==q.embed)&&P.uniqueEmbeds[P.graph].hasOwnProperty(pe)){M(oe,J,Ee);continue}if("@last"===q.embed&&pe in P.uniqueEmbeds[P.graph]&&D(P,pe),P.uniqueEmbeds[P.graph][pe]={parent:oe,property:J},P.subjectStack.push({subject:fe,graph:P.graph}),pe in P.graphMap){let _e=!1,Te=null;"@graph"in j?(Te=j["@graph"][0],_e=!("@merged"===pe||"@default"===pe),b.isObject(Te)||(Te={})):(_e="@merged"!==P.graph,Te={}),_e&&p.frame(ar($t({},P),{graph:pe,embedded:!1}),Object.keys(P.graphMap[pe]).sort(),[Te],Ee,"@graph")}"@included"in j&&p.frame(ar($t({},P),{embedded:!1}),V,j["@included"],Ee,"@included");for(const _e of Object.keys(fe).sort())if(B(_e)){if(Ee[_e]=S.clone(fe[_e]),"@type"===_e)for(const Te of fe["@type"])0===Te.indexOf("_:")&&S.addValue(P.bnodeMap,Te,Ee,{propertyIsArray:!0})}else if(!q.explicit||_e in j)for(const Te of fe[_e]){const De=_e in j?j[_e]:w(q);if(C.isList(Te)){const be=j[_e]&&j[_e][0]&&j[_e][0]["@list"]?j[_e][0]["@list"]:w(q),de={"@list":[]};M(Ee,_e,de);const we=Te["@list"];for(const Ye of we)C.isSubjectReference(Ye)?p.frame(ar($t({},P),{embedded:!0}),[Ye["@id"]],be,de,"@list"):M(de,"@list",S.clone(Ye))}else C.isSubjectReference(Te)?p.frame(ar($t({},P),{embedded:!0}),[Te["@id"]],De,Ee,_e):I(De[0],Te)&&M(Ee,_e,S.clone(Te))}for(const _e of Object.keys(j).sort()){if("@type"===_e){if(!b.isObject(j[_e][0])||!("@default"in j[_e][0]))continue}else if(B(_e))continue;const Te=j[_e][0]||{};if(!x(Te,le,"omitDefault")&&!(_e in Ee)){let be="@null";"@default"in Te&&(be=S.clone(Te["@default"])),b.isArray(be)||(be=[be]),Ee[_e]=[{"@preserve":be}]}}for(const _e of Object.keys(j["@reverse"]||{}).sort()){const Te=j["@reverse"][_e];for(const De of Object.keys(P.subjects))S.getValues(P.subjects[De],_e).some(de=>de["@id"]===pe)&&(Ee["@reverse"]=Ee["@reverse"]||{},S.addValue(Ee["@reverse"],_e,[],{propertyIsArray:!0}),p.frame(ar($t({},P),{embedded:!0}),[De],Te,Ee["@reverse"][_e],J))}M(oe,J,Ee),P.subjectStack.pop()}}},p.cleanupNull=(P,V)=>{if(b.isArray(P))return P.map(oe=>p.cleanupNull(oe,V)).filter(oe=>oe);if("@null"===P)return null;if(b.isObject(P)){if("@id"in P){const j=P["@id"];if(V.link.hasOwnProperty(j)){const oe=V.link[j].indexOf(P);if(-1!==oe)return V.link[j][oe];V.link[j].push(P)}else V.link[j]=[P]}for(const j in P)P[j]=p.cleanupNull(P[j],V)}return P}},2216:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(3327),b=F(9094),S=F(2353),k=F(4249),{RDF_LIST:h,RDF_FIRST:f,RDF_REST:u,RDF_NIL:p,RDF_TYPE:w,RDF_JSON_LITERAL:g,XSD_BOOLEAN:x,XSD_DOUBLE:m,XSD_INTEGER:_,XSD_STRING:T}=F(313),D=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,L={};function M(N,I,P){if(N.termType.endsWith("Node"))return{"@id":N.value};const V={"@value":N.value};if(N.language)V["@language"]=N.language;else{let j=N.datatype.value;if(j||(j=T),j===g){j="@json";try{V["@value"]=JSON.parse(V["@value"])}catch(oe){throw new C("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:V["@value"],cause:oe})}}if(I){if(j===x)"true"===V["@value"]?V["@value"]=!0:"false"===V["@value"]&&(V["@value"]=!1);else if(S.isNumeric(V["@value"]))if(j===_){const oe=parseInt(V["@value"],10);oe.toFixed(0)===V["@value"]&&(V["@value"]=oe)}else j===m&&(V["@value"]=parseFloat(V["@value"]));[x,_,m,T].includes(j)||(V["@type"]=j)}else if("i18n-datatype"===P&&j.startsWith("https://www.w3.org/ns/i18n#")){const[,oe,J]=j.split(/[#_]/);oe.length>0&&(V["@language"]=oe,oe.match(D)||console.warn(`@language must be valid BCP47: ${oe}`)),V["@direction"]=J}else j!==T&&(V["@type"]=j)}return V}Ge.exports=L,L.fromRDF=function(){var N=B(function*(I,{useRdfType:P=!1,useNativeTypes:V=!1,rdfDirection:j=null}){const oe={},J={"@default":oe},le={};for(const he of I){const ce="DefaultGraph"===he.graph.termType?"@default":he.graph.value;ce in J||(J[ce]={}),"@default"!==ce&&!(ce in oe)&&(oe[ce]={"@id":ce});const pe=J[ce],fe=he.subject.value,Ee=he.predicate.value,_e=he.object;fe in pe||(pe[fe]={"@id":fe});const Te=pe[fe],De=_e.termType.endsWith("Node");if(De&&!(_e.value in pe)&&(pe[_e.value]={"@id":_e.value}),Ee===w&&!P&&De){k.addValue(Te,"@type",_e.value,{propertyIsArray:!0});continue}const be=M(_e,V,j);if(k.addValue(Te,Ee,be,{propertyIsArray:!0}),De)if(_e.value===p){const de=pe[_e.value];"usages"in de||(de.usages=[]),de.usages.push({node:Te,property:Ee,value:be})}else le[_e.value]=!(_e.value in le)&&{node:Te,property:Ee,value:be}}for(const he in J){const ce=J[he];if(!(p in ce))continue;const pe=ce[p];if(pe.usages){for(let fe of pe.usages){let Ee=fe.node,_e=fe.property,Te=fe.value;const De=[],be=[];let de=Object.keys(Ee).length;for(;_e===u&&S.isObject(le[Ee["@id"]])&&S.isArray(Ee[f])&&1===Ee[f].length&&S.isArray(Ee[u])&&1===Ee[u].length&&(3===de||4===de&&S.isArray(Ee["@type"])&&1===Ee["@type"].length&&Ee["@type"][0]===h)&&(De.push(Ee[f][0]),be.push(Ee["@id"]),fe=le[Ee["@id"]],Ee=fe.node,_e=fe.property,Te=fe.value,de=Object.keys(Ee).length,b.isBlankNode(Ee)););delete Te["@id"],Te["@list"]=De.reverse();for(const we of be)delete ce[we]}delete pe.usages}}const q=[],ue=Object.keys(oe).sort();for(const he of ue){const ce=oe[he];if(he in J){const pe=ce["@graph"]=[],fe=J[he],Ee=Object.keys(fe).sort();for(const _e of Ee){const Te=fe[_e];b.isSubjectReference(Te)||pe.push(Te)}}b.isSubjectReference(ce)||q.push(ce)}return q});return function(I,P){return N.apply(this,arguments)}}()},9094:(Ge,G,F)=>{"use strict";const B=F(2353),C={};Ge.exports=C,C.isSubject=b=>!(!B.isObject(b)||"@value"in b||"@set"in b||"@list"in b)&&(Object.keys(b).length>1||!("@id"in b)),C.isSubjectReference=b=>B.isObject(b)&&1===Object.keys(b).length&&"@id"in b,C.isValue=b=>B.isObject(b)&&"@value"in b,C.isList=b=>B.isObject(b)&&"@list"in b,C.isGraph=b=>B.isObject(b)&&"@graph"in b&&1===Object.keys(b).filter(S=>"@id"!==S&&"@index"!==S).length,C.isSimpleGraph=b=>C.isGraph(b)&&!("@id"in b),C.isBlankNode=b=>!!B.isObject(b)&&("@id"in b?0===b["@id"].indexOf("_:"):0===Object.keys(b).length||!("@value"in b||"@set"in b||"@list"in b))},5049:(Ge,G,F)=>{var B=F(8926).default;const C=F(4308),b=F(2363),S=F(4249),k=F(4918),h=S.IdentifierIssuer,f=F(3327),u=F(7073),p=F(3865),{expand:w}=F(554),{flatten:g}=F(7613),{fromRDF:x}=F(2216),{toRDF:m}=F(5671),{frameMergedOrDefault:_,cleanupNull:T}=F(1938),{isArray:D,isObject:L,isString:M}=F(2353),{isSubjectReference:N}=F(9094),{expandIri:I,getInitialContext:P,process:V,processingMode:j}=F(2134),{compact:oe,compactIri:J}=F(9857),{createNodeMap:le,createMergedNodeMap:q,mergeNodeMaps:ue}=F(5057),he=function(pe){const fe={},_e=new u({max:100});function Te(De,we){var Ye=we,{documentLoader:be=pe.documentLoader}=Ye,de=Gg(Ye,["documentLoader"]);return Object.assign({},{documentLoader:be},de,De)}return pe.compact=function(){var De=B(function*(be,de,we){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===de)throw new f("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===be)return null;let Ye;(we=Te(we,{base:M(be)?be:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new h("_:b"),contextResolver:new k({sharedCache:_e})})).link&&(we.skipExpansion=!0),we.compactToRelative||delete we.base,Ye=we.skipExpansion?be:yield pe.expand(be,we);const ze=yield pe.processContext(P(we),de,we);let He=yield oe({activeCtx:ze,element:Ye,options:we,compactionMap:we.compactionMap});we.compactArrays&&!we.graph&&D(He)?1===He.length?He=He[0]:0===He.length&&(He={}):we.graph&&L(He)&&(He=[He]),L(de)&&"@context"in de&&(de=de["@context"]),de=S.clone(de),D(de)||(de=[de]);const Ne=de;de=[];for(let ee=0;ee<Ne.length;++ee)(!L(Ne[ee])||Object.keys(Ne[ee]).length>0)&&de.push(Ne[ee]);const ye=de.length>0;if(1===de.length&&(de=de[0]),D(He)){const ee=J({activeCtx:ze,iri:"@graph",relativeTo:{vocab:!0}}),ie=He;He={},ye&&(He["@context"]=de),He[ee]=ie}else if(L(He)&&ye){const ee=He;He={"@context":de};for(const ie in ee)He[ie]=ee[ie]}return He});return function(be,de,we){return De.apply(this,arguments)}}(),pe.expand=function(){var De=B(function*(be,de){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(de=Te(de,{keepFreeFloatingNodes:!1,contextResolver:new k({sharedCache:_e})})).expansionMap&&(de.expansionMap=void 0);const we={},Ye=[];if("expandContext"in de){const ye=S.clone(de.expandContext);we.expandContext=L(ye)&&"@context"in ye?ye:{"@context":ye},Ye.push(we.expandContext)}let ze;if(M(be)){const ye=yield pe.get(be,de);ze=ye.documentUrl,we.input=ye.document,ye.contextUrl&&(we.remoteContext={"@context":ye.contextUrl},Ye.push(we.remoteContext))}else we.input=S.clone(be);"base"in de||(de.base=ze||"");let He=P(de);for(const ye of Ye)He=yield V({activeCtx:He,localCtx:ye,options:de});let Ne=yield w({activeCtx:He,element:we.input,options:de,expansionMap:de.expansionMap});return L(Ne)&&"@graph"in Ne&&1===Object.keys(Ne).length?Ne=Ne["@graph"]:null===Ne&&(Ne=[]),D(Ne)||(Ne=[Ne]),Ne});return function(be,de){return De.apply(this,arguments)}}(),pe.flatten=function(){var De=B(function*(be,de,we){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");de="function"==typeof de?null:de||null,we=Te(we,{base:M(be)?be:"",contextResolver:new k({sharedCache:_e})});const Ye=yield pe.expand(be,we),ze=g(Ye);return null===de?ze:(we.graph=!0,we.skipExpansion=!0,yield pe.compact(ze,de,we))});return function(be,de,we){return De.apply(this,arguments)}}(),pe.frame=function(){var De=B(function*(be,de,we){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(we=Te(we,{base:M(be)?be:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new k({sharedCache:_e})}),M(de)){const se=yield pe.get(de,we);if(de=se.document,se.contextUrl){let K=de["@context"];K?D(K)?K.push(se.contextUrl):K=[K,se.contextUrl]:K=se.contextUrl,de["@context"]=K}}const Ye=de&&de["@context"]||{},ze=yield pe.processContext(P(we),Ye,we);we.hasOwnProperty("omitGraph")||(we.omitGraph=j(ze,1.1)),we.hasOwnProperty("pruneBlankNodeIdentifiers")||(we.pruneBlankNodeIdentifiers=j(ze,1.1));const He=yield pe.expand(be,we),Ne=$t({},we);Ne.isFrame=!0,Ne.keepFreeFloatingNodes=!0;const ye=yield pe.expand(de,Ne),ee=Object.keys(de).map(se=>I(ze,se,{vocab:!0}));Ne.merged=!ee.includes("@graph"),Ne.is11=j(ze,1.1);const ie=_(He,ye,Ne);Ne.graph=!we.omitGraph,Ne.skipExpansion=!0,Ne.link={},Ne.framing=!0;let $=yield pe.compact(ie,Ye,Ne);return Ne.link={},$=T($,Ne),$});return function(be,de,we){return De.apply(this,arguments)}}(),pe.link=function(){var De=B(function*(be,de,we){const Ye={};return de&&(Ye["@context"]=de),Ye["@embed"]="@link",pe.frame(be,Ye,we)});return function(be,de,we){return De.apply(this,arguments)}}(),pe.normalize=pe.canonize=function(){var De=B(function*(be,de){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(de=Te(de,{base:M(be)?be:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new k({sharedCache:_e})}))){if("application/n-quads"!==de.inputFormat&&"application/nquads"!==de.inputFormat)throw new f("Unknown canonicalization input format.","jsonld.CanonizeError");const ze=p.parse(be);return C.canonize(ze,de)}const we=$t({},de);delete we.format,we.produceGeneralizedRdf=!1;const Ye=yield pe.toRDF(be,we);return C.canonize(Ye,de)});return function(be,de){return De.apply(this,arguments)}}(),pe.fromRDF=function(){var De=B(function*(be,de){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");de=Te(de,{format:M(be)?"application/n-quads":void 0});const{format:we}=de;let{rdfParser:Ye}=de;if(we){if(Ye=Ye||fe[we],!Ye)throw new f("Unknown input format.","jsonld.UnknownFormat",{format:we})}else Ye=()=>be;const ze=yield Ye(be);return x(ze,de)});return function(be,de){return De.apply(this,arguments)}}(),pe.toRDF=function(){var De=B(function*(be,de){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let we;we=(de=Te(de,{base:M(be)?be:"",skipExpansion:!1,contextResolver:new k({sharedCache:_e})})).skipExpansion?be:yield pe.expand(be,de);const Ye=m(we,de);if(de.format){if("application/n-quads"===de.format||"application/nquads"===de.format)return p.serialize(Ye);throw new f("Unknown output format.","jsonld.UnknownFormat",{format:de.format})}return Ye});return function(be,de){return De.apply(this,arguments)}}(),pe.createNodeMap=function(){var De=B(function*(be,de){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");de=Te(de,{base:M(be)?be:"",contextResolver:new k({sharedCache:_e})});const we=yield pe.expand(be,de);return q(we,de)});return function(be,de){return De.apply(this,arguments)}}(),pe.merge=function(){var De=B(function*(be,de,we){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!D(be))throw new TypeError('Could not merge, "docs" must be an array.');de="function"==typeof de?null:de||null,we=Te(we,{contextResolver:new k({sharedCache:_e})});const Ye=yield Promise.all(be.map(se=>{const K=$t({},we);return pe.expand(se,K)}));let ze=!0;"mergeNodes"in we&&(ze=we.mergeNodes);const He=we.issuer||new h("_:b"),Ne={"@default":{}};for(let se=0;se<Ye.length;++se){const K=S.relabelBlankNodes(Ye[se],{issuer:new h("_:b"+se+"-")}),te=ze||0===se?Ne:{"@default":{}};if(le(K,te,"@default",He),te!==Ne)for(const X in te){const me=te[X];if(!(X in Ne)){Ne[X]=me;continue}const R=Ne[X];for(const H in me)H in R||(R[H]=me[H])}}const ye=ue(Ne),ee=[],ie=Object.keys(ye).sort();for(let se=0;se<ie.length;++se){const K=ye[ie[se]];N(K)||ee.push(K)}return null===de?ee:(we.graph=!0,we.skipExpansion=!0,yield pe.compact(ee,de,we))});return function(be,de,we){return De.apply(this,arguments)}}(),Object.defineProperty(pe,"documentLoader",{get:()=>pe._documentLoader,set:De=>pe._documentLoader=De}),pe.documentLoader=function(){var De=B(function*(be){throw new f("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:be})});return function(be){return De.apply(this,arguments)}}(),pe.get=function(){var De=B(function*(be,de){let we;we="function"==typeof de.documentLoader?de.documentLoader:pe.documentLoader;const Ye=yield we(be);try{if(!Ye.document)throw new f("No remote document found at the given URL.","jsonld.NullRemoteDocument");M(Ye.document)&&(Ye.document=JSON.parse(Ye.document))}catch(ze){throw new f("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ze,remoteDoc:Ye})}return Ye});return function(be,de){return De.apply(this,arguments)}}(),pe.processContext=function(){var De=B(function*(be,de,we){return we=Te(we,{base:"",contextResolver:new k({sharedCache:_e})}),null===de?P(we):(de=S.clone(de),L(de)&&"@context"in de||(de={"@context":de}),V({activeCtx:be,localCtx:de,options:we}))});return function(be,de,we){return De.apply(this,arguments)}}(),pe.getContextValue=F(2134).getContextValue,pe.documentLoaders={},pe.useDocumentLoader=function(De){if(!(De in pe.documentLoaders))throw new f('Unknown document loader type: "'+De+'"',"jsonld.UnknownDocumentLoader",{type:De});pe.documentLoader=pe.documentLoaders[De].apply(pe,Array.prototype.slice.call(arguments,1))},pe.registerRDFParser=function(De,be){fe[De]=be},pe.unregisterRDFParser=function(De){delete fe[De]},pe.registerRDFParser("application/n-quads",p.parse),pe.registerRDFParser("application/nquads",p.parse),pe.url=F(4920),pe.util=S,Object.assign(pe,S),pe.promises=pe,pe.RequestQueue=F(2210),pe.JsonLdProcessor=F(779)(pe),b.setupGlobals(pe),b.setupDocumentLoaders(pe),pe},ce=function(){return he(function(){return ce()})};he(ce),Ge.exports=ce},5057:(Ge,G,F)=>{"use strict";const{isKeyword:B}=F(2134),C=F(9094),b=F(2353),S=F(4249),k=F(3327),h={};Ge.exports=h,h.createMergedNodeMap=(f,u)=>{const p=(u=u||{}).issuer||new S.IdentifierIssuer("_:b"),w={"@default":{}};return h.createNodeMap(f,w,"@default",p),h.mergeNodeMaps(w)},h.createNodeMap=(f,u,p,w,g,x)=>{if(b.isArray(f)){for(const D of f)h.createNodeMap(D,u,p,w,void 0,x);return}if(!b.isObject(f))return void(x&&x.push(f));if(C.isValue(f)){if("@type"in f){let D=f["@type"];0===D.indexOf("_:")&&(f["@type"]=D=w.getId(D))}return void(x&&x.push(f))}if(x&&C.isList(f)){const D=[];return h.createNodeMap(f["@list"],u,p,w,g,D),void x.push({"@list":D})}if("@type"in f){const D=f["@type"];for(const L of D)0===L.indexOf("_:")&&w.getId(L)}b.isUndefined(g)&&(g=C.isBlankNode(f)?w.getId(f["@id"]):f["@id"]),x&&x.push({"@id":g});const m=u[p],_=m[g]=m[g]||{};_["@id"]=g;const T=Object.keys(f).sort();for(let D of T){if("@id"===D)continue;if("@reverse"===D){const M={"@id":g},N=f["@reverse"];for(const I in N){const P=N[I];for(const V of P){let j=V["@id"];C.isBlankNode(V)&&(j=w.getId(j)),h.createNodeMap(V,u,p,w,j),S.addValue(m[j],I,M,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===D){g in u||(u[g]={}),h.createNodeMap(f[D],u,g,w);continue}if("@included"===D){h.createNodeMap(f[D],u,p,w);continue}if("@type"!==D&&B(D)){if("@index"===D&&D in _&&(f[D]!==_[D]||f[D]["@id"]!==_[D]["@id"]))throw new k("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:_});_[D]=f[D];continue}const L=f[D];if(0===D.indexOf("_:")&&(D=w.getId(D)),0!==L.length)for(let M of L)if("@type"===D&&(M=0===M.indexOf("_:")?w.getId(M):M),C.isSubject(M)||C.isSubjectReference(M)){if("@id"in M&&!M["@id"])continue;const N=C.isBlankNode(M)?w.getId(M["@id"]):M["@id"];S.addValue(_,D,{"@id":N},{propertyIsArray:!0,allowDuplicate:!1}),h.createNodeMap(M,u,p,w,N)}else if(C.isValue(M))S.addValue(_,D,M,{propertyIsArray:!0,allowDuplicate:!1});else if(C.isList(M)){const N=[];h.createNodeMap(M["@list"],u,p,w,g,N),M={"@list":N},S.addValue(_,D,M,{propertyIsArray:!0,allowDuplicate:!1})}else h.createNodeMap(M,u,p,w,g),S.addValue(_,D,M,{propertyIsArray:!0,allowDuplicate:!1});else S.addValue(_,D,[],{propertyIsArray:!0})}},h.mergeNodeMapGraphs=f=>{const u={};for(const p of Object.keys(f).sort())for(const w of Object.keys(f[p]).sort()){const g=f[p][w];w in u||(u[w]={"@id":w});const x=u[w];for(const m of Object.keys(g).sort())if(B(m)&&"@type"!==m)x[m]=S.clone(g[m]);else for(const _ of g[m])S.addValue(x,m,S.clone(_),{propertyIsArray:!0,allowDuplicate:!1})}return u},h.mergeNodeMaps=f=>{const u=f["@default"],p=Object.keys(f).sort();for(const w of p){if("@default"===w)continue;const g=f[w];let x=u[w];x?"@graph"in x||(x["@graph"]=[]):u[w]=x={"@id":w,"@graph":[]};const m=x["@graph"];for(const _ of Object.keys(g).sort()){const T=g[_];C.isSubjectReference(T)||m.push(T)}}return u}},2363:(Ge,G,F)=>{"use strict";const B=F(8719),C={};Ge.exports=C,C.setupDocumentLoaders=function(b){"undefined"!=typeof XMLHttpRequest&&(b.documentLoaders.xhr=B,b.useDocumentLoader("xhr"))},C.setupGlobals=function(b){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:b.JsonLdProcessor})}},5671:(Ge,G,F)=>{"use strict";const{createNodeMap:B}=F(5057),{isKeyword:C}=F(2134),b=F(9094),S=F(5423),k=F(2353),h=F(4249),{RDF_FIRST:f,RDF_REST:u,RDF_NIL:p,RDF_TYPE:w,RDF_JSON_LITERAL:g,RDF_LANGSTRING:x,XSD_BOOLEAN:m,XSD_DOUBLE:_,XSD_INTEGER:T,XSD_STRING:D}=F(313),{isAbsolute:L}=F(4920),M={};function N(V,j,oe,J,le){const q=Object.keys(j).sort();for(const ue of q){const he=j[ue],ce=Object.keys(he).sort();for(let pe of ce){const fe=he[pe];if("@type"===pe)pe=w;else if(C(pe))continue;for(const Ee of fe){const _e={termType:ue.startsWith("_:")?"BlankNode":"NamedNode",value:ue};if(!L(ue))continue;const Te={termType:pe.startsWith("_:")?"BlankNode":"NamedNode",value:pe};if(!L(pe)||"BlankNode"===Te.termType&&!le.produceGeneralizedRdf)continue;const De=P(Ee,J,V,oe,le.rdfDirection);De&&V.push({subject:_e,predicate:Te,object:De,graph:oe})}}}}function P(V,j,oe,J,le){const q={};if(b.isValue(V)){q.termType="Literal",q.value=void 0,q.datatype={termType:"NamedNode"};let ue=V["@value"];const he=V["@type"]||null;"@json"===he?(q.value=S(ue),q.datatype.value=g):k.isBoolean(ue)?(q.value=ue.toString(),q.datatype.value=he||m):k.isDouble(ue)||he===_?(k.isDouble(ue)||(ue=parseFloat(ue)),q.value=ue.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),q.datatype.value=he||_):k.isNumber(ue)?(q.value=ue.toFixed(0),q.datatype.value=he||T):"i18n-datatype"===le&&"@direction"in V?(q.datatype.value="https://www.w3.org/ns/i18n#"+(V["@language"]||"")+`_${V["@direction"]}`,q.value=ue):"@language"in V?(q.value=ue,q.datatype.value=he||x,q.language=V["@language"]):(q.value=ue,q.datatype.value=he||D)}else if(b.isList(V)){const ue=function I(V,j,oe,J,le){const q={termType:"NamedNode",value:f},ue={termType:"NamedNode",value:u},he={termType:"NamedNode",value:p},ce=V.pop(),pe=ce?{termType:"BlankNode",value:j.getId()}:he;let fe=pe;for(const Ee of V){const _e=P(Ee,j,oe,J,le),Te={termType:"BlankNode",value:j.getId()};oe.push({subject:fe,predicate:q,object:_e,graph:J}),oe.push({subject:fe,predicate:ue,object:Te,graph:J}),fe=Te}if(ce){const Ee=P(ce,j,oe,J,le);oe.push({subject:fe,predicate:q,object:Ee,graph:J}),oe.push({subject:fe,predicate:ue,object:he,graph:J})}return pe}(V["@list"],j,oe,J,le);q.termType=ue.termType,q.value=ue.value}else{const ue=k.isObject(V)?V["@id"]:V;q.termType=ue.startsWith("_:")?"BlankNode":"NamedNode",q.value=ue}return"NamedNode"!==q.termType||L(q.value)?q:null}Ge.exports=M,M.toRDF=(V,j)=>{const oe=new h.IdentifierIssuer("_:b"),J={"@default":{}};B(V,J,"@default",oe);const le=[],q=Object.keys(J).sort();for(const ue of q){let he;if("@default"===ue)he={termType:"DefaultGraph",value:""};else{if(!L(ue))continue;he=ue.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},he.value=ue}N(le,J[ue],he,oe,j)}return le}},2353:Ge=>{"use strict";const G={};Ge.exports=G,G.isArray=Array.isArray,G.isBoolean=F=>"boolean"==typeof F||"[object Boolean]"===Object.prototype.toString.call(F),G.isDouble=F=>G.isNumber(F)&&(-1!==String(F).indexOf(".")||Math.abs(F)>=1e21),G.isEmptyObject=F=>G.isObject(F)&&0===Object.keys(F).length,G.isNumber=F=>"number"==typeof F||"[object Number]"===Object.prototype.toString.call(F),G.isNumeric=F=>!isNaN(parseFloat(F))&&isFinite(F),G.isObject=F=>"[object Object]"===Object.prototype.toString.call(F),G.isString=F=>"string"==typeof F||"[object String]"===Object.prototype.toString.call(F),G.isUndefined=F=>void 0===F},4920:(Ge,G,F)=>{"use strict";const B=F(2353),C={};Ge.exports=C,C.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},C.parse=(S,k)=>{const h={},f=C.parsers[k||"full"],u=f.regex.exec(S);let p=f.keys.length;for(;p--;)h[f.keys[p]]=void 0===u[p]?null:u[p];return("https"===h.scheme&&"443"===h.port||"http"===h.scheme&&"80"===h.port)&&(h.href=h.href.replace(":"+h.port,""),h.authority=h.authority.replace(":"+h.port,""),h.port=null),h.normalizedPath=C.removeDotSegments(h.path),h},C.prependBase=(S,k)=>{if(null===S||C.isAbsolute(k))return k;(!S||B.isString(S))&&(S=C.parse(S||""));const h=C.parse(k),f={protocol:S.protocol||""};if(null!==h.authority)f.authority=h.authority,f.path=h.path,f.query=h.query;else if(f.authority=S.authority,""===h.path)f.path=S.path,f.query=null!==h.query?h.query:S.query;else{if(0===h.path.indexOf("/"))f.path=h.path;else{let p=S.path;p=p.substr(0,p.lastIndexOf("/")+1),(p.length>0||S.authority)&&"/"!==p.substr(-1)&&(p+="/"),p+=h.path,f.path=p}f.query=h.query}""!==h.path&&(f.path=C.removeDotSegments(f.path));let u=f.protocol;return null!==f.authority&&(u+="//"+f.authority),u+=f.path,null!==f.query&&(u+="?"+f.query),null!==h.fragment&&(u+="#"+h.fragment),""===u&&(u="./"),u},C.removeBase=(S,k)=>{if(null===S)return k;(!S||B.isString(S))&&(S=C.parse(S||""));let h="";if(""!==S.href?h+=(S.protocol||"")+"//"+(S.authority||""):k.indexOf("//")&&(h+="//"),0!==k.indexOf(h))return k;const f=C.parse(k.substr(h.length)),u=S.normalizedPath.split("/"),p=f.normalizedPath.split("/"),w=f.fragment||f.query?0:1;for(;u.length>0&&p.length>w&&u[0]===p[0];)u.shift(),p.shift();let g="";if(u.length>0){u.pop();for(let x=0;x<u.length;++x)g+="../"}return g+=p.join("/"),null!==f.query&&(g+="?"+f.query),null!==f.fragment&&(g+="#"+f.fragment),""===g&&(g="./"),g},C.removeDotSegments=S=>{if(0===S.length)return"";const k=S.split("/"),h=[];for(;k.length>0;){const f=k.shift(),u=0===k.length;"."!==f?".."!==f?h.push(f):(h.pop(),u&&h.push("")):u&&h.push("")}return"/"===S[0]&&h.length>0&&""!==h[0]&&h.unshift(""),1===h.length&&""===h[0]?"/":h.join("/")};const b=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;C.isAbsolute=S=>B.isString(S)&&b.test(S),C.isRelative=S=>B.isString(S)},4249:(Ge,G,F)=>{"use strict";const B=F(9094),C=F(2353),b=F(4308).IdentifierIssuer,S=F(3327),k=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,h=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,f=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,u_headers_accept="application/ld+json, application/json",p={};function w(g,x){if(C.isArray(x))for(let m=0;m<x.length;++m)x[m]=w(g,x[m]);else if(B.isList(x))x["@list"]=w(g,x["@list"]);else if(C.isObject(x)){B.isBlankNode(x)&&(x["@id"]=g.getId(x["@id"]));const m=Object.keys(x).sort();for(let _=0;_<m.length;++_){const T=m[_];"@id"!==T&&(x[T]=w(g,x[T]))}}return x}Ge.exports=p,p.IdentifierIssuer=b,p.clone=function(g){if(g&&"object"==typeof g){let x;if(C.isArray(g)){x=[];for(let m=0;m<g.length;++m)x[m]=p.clone(g[m])}else if(g instanceof Map){x=new Map;for(const[m,_]of g)x.set(m,p.clone(_))}else if(g instanceof Set){x=new Set;for(const m of g)x.add(p.clone(m))}else if(C.isObject(g)){x={};for(const m in g)x[m]=p.clone(g[m])}else x=g.toString();return x}return g},p.asArray=function(g){return Array.isArray(g)?g:[g]},p.buildHeaders=(g={})=>{if(Object.keys(g).some(m=>"accept"===m.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+u_headers_accept+'" is supported.');return Object.assign({Accept:u_headers_accept},g)},p.parseLinkHeader=g=>{const x={},m=g.match(k);for(let _=0;_<m.length;++_){let T=m[_].match(h);if(!T)continue;const D={target:T[1]},L=T[2];for(;T=f.exec(L);)D[T[1]]=void 0===T[2]?T[3]:T[2];const M=D.rel||"";Array.isArray(x[M])?x[M].push(D):x[M]=x.hasOwnProperty(M)?[x[M],D]:D}return x},p.validateTypeValue=(g,x)=>{if(!(C.isString(g)||C.isArray(g)&&g.every(m=>C.isString(m)))){if(x&&C.isObject(g))switch(Object.keys(g).length){case 0:return;case 1:if("@default"in g&&p.asArray(g["@default"]).every(m=>C.isString(m)))return}throw new S('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:g})}},p.hasProperty=(g,x)=>{if(g.hasOwnProperty(x)){const m=g[x];return!C.isArray(m)||m.length>0}return!1},p.hasValue=(g,x,m)=>{if(p.hasProperty(g,x)){let _=g[x];const T=B.isList(_);if(C.isArray(_)||T){T&&(_=_["@list"]);for(let D=0;D<_.length;++D)if(p.compareValues(m,_[D]))return!0}else if(!C.isArray(m))return p.compareValues(m,_)}return!1},p.addValue=(g,x,m,_)=>{if("propertyIsArray"in(_=_||{})||(_.propertyIsArray=!1),"valueIsArray"in _||(_.valueIsArray=!1),"allowDuplicate"in _||(_.allowDuplicate=!0),"prependValue"in _||(_.prependValue=!1),_.valueIsArray)g[x]=m;else if(C.isArray(m)){0===m.length&&_.propertyIsArray&&!g.hasOwnProperty(x)&&(g[x]=[]),_.prependValue&&(m=m.concat(g[x]),g[x]=[]);for(let T=0;T<m.length;++T)p.addValue(g,x,m[T],_)}else if(g.hasOwnProperty(x)){const T=!_.allowDuplicate&&p.hasValue(g,x,m);!C.isArray(g[x])&&(!T||_.propertyIsArray)&&(g[x]=[g[x]]),T||(_.prependValue?g[x].unshift(m):g[x].push(m))}else g[x]=_.propertyIsArray?[m]:m},p.getValues=(g,x)=>[].concat(g[x]||[]),p.removeProperty=(g,x)=>{delete g[x]},p.removeValue=(g,x,m,_)=>{"propertyIsArray"in(_=_||{})||(_.propertyIsArray=!1);const T=p.getValues(g,x).filter(D=>!p.compareValues(D,m));0===T.length?p.removeProperty(g,x):g[x]=1!==T.length||_.propertyIsArray?T:T[0]},p.relabelBlankNodes=(g,x)=>w((x=x||{}).issuer||new b("_:b"),g),p.compareValues=(g,x)=>!!(g===x||B.isValue(g)&&B.isValue(x)&&g["@value"]===x["@value"]&&g["@type"]===x["@type"]&&g["@language"]===x["@language"]&&g["@index"]===x["@index"])||!!(C.isObject(g)&&"@id"in g&&C.isObject(x)&&"@id"in x)&&g["@id"]===x["@id"],p.compareShortestLeast=(g,x)=>g.length<x.length?-1:x.length<g.length?1:g===x?0:g<x?-1:1},5650:Ge=>{Ge.exports=function G(F,B,C){function b(h,f){if(!B[h]){if(!F[h]){if(S)return S(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var w=B[h]={exports:{}};F[h][0].call(w.exports,function(g){return b(F[h][1][g]||g)},w,w.exports,G,F,B,C)}return B[h].exports}for(var S=void 0,k=0;k<C.length;k++)b(C[k]);return b}({1:[function(G,F,B){"use strict";var C=G("./utils"),b=G("./support"),S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";B.encode=function(k){for(var h,f,u,w,g,x,m=[],_=0,T=k.length,D=T,L="string"!==C.getTypeOf(k);_<k.length;)D=T-_,u=L?(h=k[_++],f=_<T?k[_++]:0,_<T?k[_++]:0):(h=k.charCodeAt(_++),f=_<T?k.charCodeAt(_++):0,_<T?k.charCodeAt(_++):0),w=(3&h)<<4|f>>4,g=1<D?(15&f)<<2|u>>6:64,x=2<D?63&u:64,m.push(S.charAt(h>>2)+S.charAt(w)+S.charAt(g)+S.charAt(x));return m.join("")},B.decode=function(k){var h,f,u,p,w,g,x=0,m=0,_="data:";if(k.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var T,D=3*(k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(k.charAt(k.length-1)===S.charAt(64)&&D--,k.charAt(k.length-2)===S.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=b.uint8array?new Uint8Array(0|D):new Array(0|D);x<k.length;)h=S.indexOf(k.charAt(x++))<<2|(p=S.indexOf(k.charAt(x++)))>>4,f=(15&p)<<4|(w=S.indexOf(k.charAt(x++)))>>2,u=(3&w)<<6|(g=S.indexOf(k.charAt(x++))),T[m++]=h,64!==w&&(T[m++]=f),64!==g&&(T[m++]=u);return T}},{"./support":30,"./utils":32}],2:[function(G,F,B){"use strict";var C=G("./external"),b=G("./stream/DataWorker"),S=G("./stream/Crc32Probe"),k=G("./stream/DataLengthProbe");function h(f,u,p,w,g){this.compressedSize=f,this.uncompressedSize=u,this.crc32=p,this.compression=w,this.compressedContent=g}h.prototype={getContentWorker:function(){var f=new b(C.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new k("data_length")),u=this;return f.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new b(C.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(f,u,p){return f.pipe(new S).pipe(new k("uncompressedSize")).pipe(u.compressWorker(p)).pipe(new k("compressedSize")).withStreamInfo("compression",u)},F.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(G,F,B){"use strict";var C=G("./stream/GenericWorker");B.STORE={magic:"\0\0",compressWorker:function(b){return new C("STORE compression")},uncompressWorker:function(){return new C("STORE decompression")}},B.DEFLATE=G("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(G,F,B){"use strict";var C=G("./utils"),b=function(){for(var S,k=[],h=0;h<256;h++){S=h;for(var f=0;f<8;f++)S=1&S?3988292384^S>>>1:S>>>1;k[h]=S}return k}();F.exports=function(S,k){return void 0!==S&&S.length?"string"!==C.getTypeOf(S)?function(h,f,u,p){var w=b,g=0+u;h^=-1;for(var x=0;x<g;x++)h=h>>>8^w[255&(h^f[x])];return-1^h}(0|k,S,S.length):function(h,f,u,p){var w=b,g=0+u;h^=-1;for(var x=0;x<g;x++)h=h>>>8^w[255&(h^f.charCodeAt(x))];return-1^h}(0|k,S,S.length):0}},{"./utils":32}],5:[function(G,F,B){"use strict";B.base64=!1,B.binary=!1,B.dir=!1,B.createFolders=!0,B.date=null,B.compression=null,B.compressionOptions=null,B.comment=null,B.unixPermissions=null,B.dosPermissions=null},{}],6:[function(G,F,B){"use strict";var C;C="undefined"!=typeof Promise?Promise:G("lie"),F.exports={Promise:C}},{lie:37}],7:[function(G,F,B){"use strict";var C="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,b=G("pako"),S=G("./utils"),k=G("./stream/GenericWorker"),h=C?"uint8array":"array";function f(u,p){k.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=p,this.meta={}}B.magic="\b\0",S.inherits(f,k),f.prototype.processChunk=function(u){this.meta=u.meta,null===this._pako&&this._createPako(),this._pako.push(S.transformTo(h,u.data),!1)},f.prototype.flush=function(){k.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){k.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(p){u.push({data:p,meta:u.meta})}},B.compressWorker=function(u){return new f("Deflate",u)},B.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(G,F,B){"use strict";function C(w,g){var x,m="";for(x=0;x<g;x++)m+=String.fromCharCode(255&w),w>>>=8;return m}function b(w,g,x,m,_,T){var D,L,M=w.file,N=w.compression,I=T!==h.utf8encode,P=S.transformTo("string",T(M.name)),V=S.transformTo("string",h.utf8encode(M.name)),j=M.comment,oe=S.transformTo("string",T(j)),J=S.transformTo("string",h.utf8encode(j)),le=V.length!==M.name.length,q=J.length!==j.length,ue="",he="",ce="",pe=M.dir,fe=M.date,Ee={crc32:0,compressedSize:0,uncompressedSize:0};g&&!x||(Ee.crc32=w.crc32,Ee.compressedSize=w.compressedSize,Ee.uncompressedSize=w.uncompressedSize);var _e=0;g&&(_e|=8),I||!le&&!q||(_e|=2048);var de,Ye,Te=0,De=0;pe&&(Te|=16),"UNIX"===_?(De=798,Te|=(Ye=de=M.unixPermissions,de||(Ye=pe?16893:33204),(65535&Ye)<<16)):(De=20,Te|=function(de){return 63&(de||0)}(M.dosPermissions)),D=fe.getUTCHours(),D<<=6,D|=fe.getUTCMinutes(),D<<=5,D|=fe.getUTCSeconds()/2,L=fe.getUTCFullYear()-1980,L<<=4,L|=fe.getUTCMonth()+1,L<<=5,L|=fe.getUTCDate(),le&&(he=C(1,1)+C(f(P),4)+V,ue+="up"+C(he.length,2)+he),q&&(ce=C(1,1)+C(f(oe),4)+J,ue+="uc"+C(ce.length,2)+ce);var be="";return be+="\n\0",be+=C(_e,2),be+=N.magic,be+=C(D,2),be+=C(L,2),be+=C(Ee.crc32,4),be+=C(Ee.compressedSize,4),be+=C(Ee.uncompressedSize,4),be+=C(P.length,2),be+=C(ue.length,2),{fileRecord:u.LOCAL_FILE_HEADER+be+P+ue,dirRecord:u.CENTRAL_FILE_HEADER+C(De,2)+be+C(oe.length,2)+"\0\0\0\0"+C(Te,4)+C(m,4)+P+ue+oe}}var S=G("../utils"),k=G("../stream/GenericWorker"),h=G("../utf8"),f=G("../crc32"),u=G("../signature");function p(w,g,x,m){k.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=x,this.encodeFileName=m,this.streamFiles=w,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}S.inherits(p,k),p.prototype.push=function(w){var g=w.meta.percent||0,x=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(w):(this.bytesWritten+=w.data.length,k.prototype.push.call(this,{data:w.data,meta:{currentFile:this.currentFile,percent:x?(g+100*(x-m-1))/x:100}}))},p.prototype.openedSource=function(w){this.currentSourceOffset=this.bytesWritten,this.currentFile=w.file.name;var g=this.streamFiles&&!w.file.dir;if(g){var x=b(w,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(w){this.accumulate=!1;var m,g=this.streamFiles&&!w.file.dir,x=b(w,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),g)this.push({data:(m=w,u.DATA_DESCRIPTOR+C(m.crc32,4)+C(m.compressedSize,4)+C(m.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var w=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var _,T,D,N,m=(_=this.dirRecords.length,T=this.bytesWritten-w,D=w,N=S.transformTo("string",(0,this.encodeFileName)(this.zipComment)),u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+C(_,2)+C(_,2)+C(T,4)+C(D,4)+C(N.length,2)+N);this.push({data:m,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(w){this._sources.push(w);var g=this;return w.on("data",function(x){g.processChunk(x)}),w.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),w.on("error",function(x){g.error(x)}),this},p.prototype.resume=function(){return!!k.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(w){var g=this._sources;if(!k.prototype.error.call(this,w))return!1;for(var x=0;x<g.length;x++)try{g[x].error(w)}catch(m){}return!0},p.prototype.lock=function(){k.prototype.lock.call(this);for(var w=this._sources,g=0;g<w.length;g++)w[g].lock()},F.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(G,F,B){"use strict";var C=G("../compressions"),b=G("./ZipFileWorker");B.generateWorker=function(S,k,h){var f=new b(k.streamFiles,h,k.platform,k.encodeFileName),u=0;try{S.forEach(function(p,w){u++;var g=function(T,D){var L=T||D,M=C[L];if(!M)throw new Error(L+" is not a valid compression method !");return M}(w.options.compression,k.compression),m=w.dir,_=w.date;w._compressWorker(g,w.options.compressionOptions||k.compressionOptions||{}).withStreamInfo("file",{name:p,dir:m,date:_,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(f)}),f.entriesCount=u}catch(p){f.error(p)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(G,F,B){"use strict";function C(){if(!(this instanceof C))return new C;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new C;for(var S in this)"function"!=typeof this[S]&&(b[S]=this[S]);return b}}(C.prototype=G("./object")).loadAsync=G("./load"),C.support=G("./support"),C.defaults=G("./defaults"),C.version="3.10.0",C.loadAsync=function(b,S){return(new C).loadAsync(b,S)},C.external=G("./external"),F.exports=C},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(G,F,B){"use strict";var C=G("./utils"),b=G("./external"),S=G("./utf8"),k=G("./zipEntries"),h=G("./stream/Crc32Probe"),f=G("./nodejsUtils");function u(p){return new b.Promise(function(w,g){var x=p.decompressed.getContentWorker().pipe(new h);x.on("error",function(m){g(m)}).on("end",function(){x.streamInfo.crc32!==p.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):w()}).resume()})}F.exports=function(p,w){var g=this;return w=C.extend(w||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:S.utf8decode}),f.isNode&&f.isStream(p)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):C.prepareContent("the loaded zip file",p,!0,w.optimizedBinaryString,w.base64).then(function(x){var m=new k(w);return m.load(x),m}).then(function(x){var m=[b.Promise.resolve(x)],_=x.files;if(w.checkCRC32)for(var T=0;T<_.length;T++)m.push(u(_[T]));return b.Promise.all(m)}).then(function(x){for(var m=x.shift(),_=m.files,T=0;T<_.length;T++){var D=_[T],L=D.fileNameStr,M=C.resolve(D.fileNameStr);g.file(M,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:w.createFolders}),D.dir||(g.file(M).unsafeOriginalName=L)}return m.zipComment.length&&(g.comment=m.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(G,F,B){"use strict";var C=G("../utils"),b=G("../stream/GenericWorker");function S(k,h){b.call(this,"Nodejs stream input adapter for "+k),this._upstreamEnded=!1,this._bindStream(h)}C.inherits(S,b),S.prototype._bindStream=function(k){var h=this;(this._stream=k).pause(),k.on("data",function(f){h.push({data:f,meta:{percent:0}})}).on("error",function(f){h.isPaused?this.generatedError=f:h.error(f)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},S.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},S.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},F.exports=S},{"../stream/GenericWorker":28,"../utils":32}],13:[function(G,F,B){"use strict";var C=G("readable-stream").Readable;function b(S,k,h){C.call(this,k),this._helper=S;var f=this;S.on("data",function(u,p){f.push(u)||f._helper.pause(),h&&h(p)}).on("error",function(u){f.emit("error",u)}).on("end",function(){f.push(null)})}G("../utils").inherits(b,C),b.prototype._read=function(){this._helper.resume()},F.exports=b},{"../utils":32,"readable-stream":16}],14:[function(G,F,B){"use strict";F.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(C,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(C,b);if("number"==typeof C)throw new Error('The "data" argument must not be a number');return new Buffer(C,b)},allocBuffer:function(C){if(Buffer.alloc)return Buffer.alloc(C);var b=new Buffer(C);return b.fill(0),b},isBuffer:function(C){return Buffer.isBuffer(C)},isStream:function(C){return C&&"function"==typeof C.on&&"function"==typeof C.pause&&"function"==typeof C.resume}}},{}],15:[function(G,F,B){"use strict";function C(M,N,I){var P,V=S.getTypeOf(N),j=S.extend(I||{},f);j.date=j.date||new Date,null!==j.compression&&(j.compression=j.compression.toUpperCase()),"string"==typeof j.unixPermissions&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(M=_(M)),j.createFolders&&(P=m(M))&&T.call(this,P,!0),I&&void 0!==I.binary||(j.binary=!("string"===V&&!1===j.binary&&!1===j.base64)),(N instanceof u&&0===N.uncompressedSize||j.dir||!N||0===N.length)&&(j.base64=!1,j.binary=!0,N="",j.compression="STORE",V="string");var J;J=N instanceof u||N instanceof k?N:g.isNode&&g.isStream(N)?new x(M,N):S.prepareContent(M,N,j.binary,j.optimizedBinaryString,j.base64);var le=new p(M,J,j);this.files[M]=le}var b=G("./utf8"),S=G("./utils"),k=G("./stream/GenericWorker"),h=G("./stream/StreamHelper"),f=G("./defaults"),u=G("./compressedObject"),p=G("./zipObject"),w=G("./generate"),g=G("./nodejsUtils"),x=G("./nodejs/NodejsStreamInputAdapter"),m=function(M){"/"===M.slice(-1)&&(M=M.substring(0,M.length-1));var N=M.lastIndexOf("/");return 0<N?M.substring(0,N):""},_=function(M){return"/"!==M.slice(-1)&&(M+="/"),M},T=function(M,N){return N=void 0!==N?N:f.createFolders,M=_(M),this.files[M]||C.call(this,M,null,{dir:!0,createFolders:N}),this.files[M]};function D(M){return"[object RegExp]"===Object.prototype.toString.call(M)}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var N,I,P;for(N in this.files)P=this.files[N],(I=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&M(I,P)},filter:function(M){var N=[];return this.forEach(function(I,P){M(I,P)&&N.push(P)}),N},file:function(M,N,I){if(1!==arguments.length)return C.call(this,M=this.root+M,N,I),this;if(D(M)){var P=M;return this.filter(function(j,oe){return!oe.dir&&P.test(j)})}var V=this.files[this.root+M];return V&&!V.dir?V:null},folder:function(M){if(!M)return this;if(D(M))return this.filter(function(V,j){return j.dir&&M.test(V)});var I=T.call(this,this.root+M),P=this.clone();return P.root=I.name,P},remove:function(M){var N=this.files[M=this.root+M];if(N||("/"!==M.slice(-1)&&(M+="/"),N=this.files[M]),N&&!N.dir)delete this.files[M];else for(var I=this.filter(function(V,j){return j.name.slice(0,M.length)===M}),P=0;P<I.length;P++)delete this.files[I[P].name];return this},generate:function(M){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var N,I={};try{if((I=S.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),"binarystring"===I.type&&(I.type="string"),!I.type)throw new Error("No output type specified.");S.checkSupport(I.type),"darwin"!==I.platform&&"freebsd"!==I.platform&&"linux"!==I.platform&&"sunos"!==I.platform||(I.platform="UNIX"),"win32"===I.platform&&(I.platform="DOS"),N=w.generateWorker(this,I,I.comment||this.comment||"")}catch(V){(N=new k("error")).error(V)}return new h(N,I.type||"string",I.mimeType)},generateAsync:function(M,N){return this.generateInternalStream(M).accumulate(N)},generateNodeStream:function(M,N){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(N)}};F.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(G,F,B){F.exports=G("stream")},{stream:void 0}],17:[function(G,F,B){"use strict";var C=G("./DataReader");function b(S){C.call(this,S);for(var k=0;k<this.data.length;k++)S[k]=255&S[k]}G("../utils").inherits(b,C),b.prototype.byteAt=function(S){return this.data[this.zero+S]},b.prototype.lastIndexOfSignature=function(S){for(var k=S.charCodeAt(0),h=S.charCodeAt(1),f=S.charCodeAt(2),u=S.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===k&&this.data[p+1]===h&&this.data[p+2]===f&&this.data[p+3]===u)return p-this.zero;return-1},b.prototype.readAndCheckSignature=function(S){var k=S.charCodeAt(0),h=S.charCodeAt(1),f=S.charCodeAt(2),u=S.charCodeAt(3),p=this.readData(4);return k===p[0]&&h===p[1]&&f===p[2]&&u===p[3]},b.prototype.readData=function(S){if(this.checkOffset(S),0===S)return[];var k=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,k},F.exports=b},{"../utils":32,"./DataReader":18}],18:[function(G,F,B){"use strict";var C=G("../utils");function b(S){this.data=S,this.length=S.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(S){this.checkIndex(this.index+S)},checkIndex:function(S){if(this.length<this.zero+S||S<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+S+"). Corrupted zip ?")},setIndex:function(S){this.checkIndex(S),this.index=S},skip:function(S){this.setIndex(this.index+S)},byteAt:function(S){},readInt:function(S){var k,h=0;for(this.checkOffset(S),k=this.index+S-1;k>=this.index;k--)h=(h<<8)+this.byteAt(k);return this.index+=S,h},readString:function(S){return C.transformTo("string",this.readData(S))},readData:function(S){},lastIndexOfSignature:function(S){},readAndCheckSignature:function(S){},readDate:function(){var S=this.readInt(4);return new Date(Date.UTC(1980+(S>>25&127),(S>>21&15)-1,S>>16&31,S>>11&31,S>>5&63,(31&S)<<1))}},F.exports=b},{"../utils":32}],19:[function(G,F,B){"use strict";var C=G("./Uint8ArrayReader");function b(S){C.call(this,S)}G("../utils").inherits(b,C),b.prototype.readData=function(S){this.checkOffset(S);var k=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,k},F.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(G,F,B){"use strict";var C=G("./DataReader");function b(S){C.call(this,S)}G("../utils").inherits(b,C),b.prototype.byteAt=function(S){return this.data.charCodeAt(this.zero+S)},b.prototype.lastIndexOfSignature=function(S){return this.data.lastIndexOf(S)-this.zero},b.prototype.readAndCheckSignature=function(S){return S===this.readData(4)},b.prototype.readData=function(S){this.checkOffset(S);var k=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,k},F.exports=b},{"../utils":32,"./DataReader":18}],21:[function(G,F,B){"use strict";var C=G("./ArrayReader");function b(S){C.call(this,S)}G("../utils").inherits(b,C),b.prototype.readData=function(S){if(this.checkOffset(S),0===S)return new Uint8Array(0);var k=this.data.subarray(this.zero+this.index,this.zero+this.index+S);return this.index+=S,k},F.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(G,F,B){"use strict";var C=G("../utils"),b=G("../support"),S=G("./ArrayReader"),k=G("./StringReader"),h=G("./NodeBufferReader"),f=G("./Uint8ArrayReader");F.exports=function(u){var p=C.getTypeOf(u);return C.checkSupport(p),"string"!==p||b.uint8array?"nodebuffer"===p?new h(u):b.uint8array?new f(C.transformTo("uint8array",u)):new S(C.transformTo("array",u)):new k(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(G,F,B){"use strict";B.LOCAL_FILE_HEADER="PK\x03\x04",B.CENTRAL_FILE_HEADER="PK\x01\x02",B.CENTRAL_DIRECTORY_END="PK\x05\x06",B.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",B.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",B.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(G,F,B){"use strict";var C=G("./GenericWorker"),b=G("../utils");function S(k){C.call(this,"ConvertWorker to "+k),this.destType=k}b.inherits(S,C),S.prototype.processChunk=function(k){this.push({data:b.transformTo(this.destType,k.data),meta:k.meta})},F.exports=S},{"../utils":32,"./GenericWorker":28}],25:[function(G,F,B){"use strict";var C=G("./GenericWorker"),b=G("../crc32");function S(){C.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}G("../utils").inherits(S,C),S.prototype.processChunk=function(k){this.streamInfo.crc32=b(k.data,this.streamInfo.crc32||0),this.push(k)},F.exports=S},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(G,F,B){"use strict";var C=G("../utils"),b=G("./GenericWorker");function S(k){b.call(this,"DataLengthProbe for "+k),this.propName=k,this.withStreamInfo(k,0)}C.inherits(S,b),S.prototype.processChunk=function(k){k&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+k.data.length),b.prototype.processChunk.call(this,k)},F.exports=S},{"../utils":32,"./GenericWorker":28}],27:[function(G,F,B){"use strict";var C=G("../utils"),b=G("./GenericWorker");function S(k){b.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,k.then(function(f){h.dataIsReady=!0,h.data=f,h.max=f&&f.length||0,h.type=C.getTypeOf(f),h.isPaused||h._tickAndRepeat()},function(f){h.error(f)})}C.inherits(S,b),S.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},S.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,C.delay(this._tickAndRepeat,[],this)),!0)},S.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(C.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},S.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var k=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":k=this.data.substring(this.index,h);break;case"uint8array":k=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":k=this.data.slice(this.index,h)}return this.index=h,this.push({data:k,meta:{percent:this.max?this.index/this.max*100:0}})},F.exports=S},{"../utils":32,"./GenericWorker":28}],28:[function(G,F,B){"use strict";function C(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}C.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,S){return this._listeners[b].push(S),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,S){if(this._listeners[b])for(var k=0;k<this._listeners[b].length;k++)this._listeners[b][k].call(this,S)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var S=this;return b.on("data",function(k){S.processChunk(k)}),b.on("end",function(){S.end()}),b.on("error",function(k){S.error(k)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,S){return this.extraStreamInfo[b]=S,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},F.exports=C},{}],29:[function(G,F,B){"use strict";var C=G("../utils"),b=G("./ConvertWorker"),S=G("./GenericWorker"),k=G("../base64"),h=G("../support"),f=G("../external"),u=null;if(h.nodestream)try{u=G("../nodejs/NodejsStreamOutputAdapter")}catch(g){}function w(g,x,m){var _=x;switch(x){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=x,this._mimeType=m,C.checkSupport(_),this._worker=g.pipe(new b(_)),g.lock()}catch(T){this._worker=new S("error"),this._worker.error(T)}}w.prototype={accumulate:function(g){return function p(g,x){return new f.Promise(function(m,_){var T=[],D=g._internalType,L=g._outputType,M=g._mimeType;g.on("data",function(N,I){T.push(N),x&&x(I)}).on("error",function(N){T=[],_(N)}).on("end",function(){try{var N=function(I,P,V){switch(I){case"blob":return C.newBlob(C.transformTo("arraybuffer",P),V);case"base64":return k.encode(P);default:return C.transformTo(I,P)}}(L,function(I,P){var V,j=0,oe=null,J=0;for(V=0;V<P.length;V++)J+=P[V].length;switch(I){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(oe=new Uint8Array(J),V=0;V<P.length;V++)oe.set(P[V],j),j+=P[V].length;return oe;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+I+"'")}}(D,T),M);m(N)}catch(I){_(I)}T=[]}).resume()})}(this,g)},on:function(g,x){var m=this;return this._worker.on(g,"data"===g?function(_){x.call(m,_.data,_.meta)}:function(){C.delay(x,arguments,m)}),this},resume:function(){return C.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(C.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},g)}},F.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(G,F,B){"use strict";if(B.base64=!0,B.array=!0,B.string=!0,B.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,B.nodebuffer="undefined"!=typeof Buffer,B.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)B.blob=!1;else{var C=new ArrayBuffer(0);try{B.blob=0===new Blob([C],{type:"application/zip"}).size}catch(S){try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(C),B.blob=0===b.getBlob("application/zip").size}catch(k){B.blob=!1}}}try{B.nodestream=!!G("readable-stream").Readable}catch(S){B.nodestream=!1}},{"readable-stream":16}],31:[function(G,F,B){"use strict";for(var C=G("./utils"),b=G("./support"),S=G("./nodejsUtils"),k=G("./stream/GenericWorker"),h=new Array(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function u(){k.call(this,"utf-8 decode"),this.leftOver=null}function p(){k.call(this,"utf-8 encode")}h[254]=h[254]=1,B.utf8encode=function(w){return b.nodebuffer?S.newBufferFrom(w,"utf-8"):function(g){var x,m,_,T,D,L=g.length,M=0;for(T=0;T<L;T++)55296==(64512&(m=g.charCodeAt(T)))&&T+1<L&&56320==(64512&(_=g.charCodeAt(T+1)))&&(m=65536+(m-55296<<10)+(_-56320),T++),M+=m<128?1:m<2048?2:m<65536?3:4;for(x=b.uint8array?new Uint8Array(M):new Array(M),T=D=0;D<M;T++)55296==(64512&(m=g.charCodeAt(T)))&&T+1<L&&56320==(64512&(_=g.charCodeAt(T+1)))&&(m=65536+(m-55296<<10)+(_-56320),T++),m<128?x[D++]=m:(m<2048?x[D++]=192|m>>>6:(m<65536?x[D++]=224|m>>>12:(x[D++]=240|m>>>18,x[D++]=128|m>>>12&63),x[D++]=128|m>>>6&63),x[D++]=128|63&m);return x}(w)},B.utf8decode=function(w){return b.nodebuffer?C.transformTo("nodebuffer",w).toString("utf-8"):function(g){var x,m,_,T,D=g.length,L=new Array(2*D);for(x=m=0;x<D;)if((_=g[x++])<128)L[m++]=_;else if(4<(T=h[_]))L[m++]=65533,x+=T-1;else{for(_&=2===T?31:3===T?15:7;1<T&&x<D;)_=_<<6|63&g[x++],T--;1<T?L[m++]=65533:_<65536?L[m++]=_:(L[m++]=55296|(_-=65536)>>10&1023,L[m++]=56320|1023&_)}return L.length!==m&&(L.subarray?L=L.subarray(0,m):L.length=m),C.applyFromCharCode(L)}(w=C.transformTo(b.uint8array?"uint8array":"array",w))},C.inherits(u,k),u.prototype.processChunk=function(w){var g=C.transformTo(b.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var x=g;(g=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),g.set(x,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var m=function(T,D){var L;for((D=D||T.length)>T.length&&(D=T.length),L=D-1;0<=L&&128==(192&T[L]);)L--;return L<0||0===L?D:L+h[T[L]]>D?L:D}(g),_=g;m!==g.length&&(b.uint8array?(_=g.subarray(0,m),this.leftOver=g.subarray(m,g.length)):(_=g.slice(0,m),this.leftOver=g.slice(m,g.length))),this.push({data:B.utf8decode(_),meta:w.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:B.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},B.Utf8DecodeWorker=u,C.inherits(p,k),p.prototype.processChunk=function(w){this.push({data:B.utf8encode(w.data),meta:w.meta})},B.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(G,F,B){"use strict";var C=G("./support"),b=G("./base64"),S=G("./nodejsUtils"),k=G("./external");function h(x){return x}function f(x,m){for(var _=0;_<x.length;++_)m[_]=255&x.charCodeAt(_);return m}G("setimmediate"),B.newBlob=function(x,m){B.checkSupport("blob");try{return new Blob([x],{type:m})}catch(T){try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(x),_.getBlob(m)}catch(D){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(x,m,_){var T=[],D=0,L=x.length;if(L<=_)return String.fromCharCode.apply(null,x);for(;D<L;)T.push(String.fromCharCode.apply(null,"array"===m||"nodebuffer"===m?x.slice(D,Math.min(D+_,L)):x.subarray(D,Math.min(D+_,L)))),D+=_;return T.join("")},stringifyByChar:function(x){for(var m="",_=0;_<x.length;_++)m+=String.fromCharCode(x[_]);return m},applyCanBeUsed:{uint8array:function(){try{return C.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(x){return!1}}(),nodebuffer:function(){try{return C.nodebuffer&&1===String.fromCharCode.apply(null,S.allocBuffer(1)).length}catch(x){return!1}}()}};function p(x){var m=65536,_=B.getTypeOf(x),T=!0;if("uint8array"===_?T=u.applyCanBeUsed.uint8array:"nodebuffer"===_&&(T=u.applyCanBeUsed.nodebuffer),T)for(;1<m;)try{return u.stringifyByChunk(x,_,m)}catch(D){m=Math.floor(m/2)}return u.stringifyByChar(x)}function w(x,m){for(var _=0;_<x.length;_++)m[_]=x[_];return m}B.applyFromCharCode=p;var g={};g.string={string:h,array:function(x){return f(x,new Array(x.length))},arraybuffer:function(x){return g.string.uint8array(x).buffer},uint8array:function(x){return f(x,new Uint8Array(x.length))},nodebuffer:function(x){return f(x,S.allocBuffer(x.length))}},g.array={string:p,array:h,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return S.newBufferFrom(x)}},g.arraybuffer={string:function(x){return p(new Uint8Array(x))},array:function(x){return w(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:h,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return S.newBufferFrom(new Uint8Array(x))}},g.uint8array={string:p,array:function(x){return w(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:h,nodebuffer:function(x){return S.newBufferFrom(x)}},g.nodebuffer={string:p,array:function(x){return w(x,new Array(x.length))},arraybuffer:function(x){return g.nodebuffer.uint8array(x).buffer},uint8array:function(x){return w(x,new Uint8Array(x.length))},nodebuffer:h},B.transformTo=function(x,m){if(m=m||"",!x)return m;B.checkSupport(x);var _=B.getTypeOf(m);return g[_][x](m)},B.resolve=function(x){for(var m=x.split("/"),_=[],T=0;T<m.length;T++){var D=m[T];"."===D||""===D&&0!==T&&T!==m.length-1||(".."===D?_.pop():_.push(D))}return _.join("/")},B.getTypeOf=function(x){return"string"==typeof x?"string":"[object Array]"===Object.prototype.toString.call(x)?"array":C.nodebuffer&&S.isBuffer(x)?"nodebuffer":C.uint8array&&x instanceof Uint8Array?"uint8array":C.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},B.checkSupport=function(x){if(!C[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},B.MAX_VALUE_16BITS=65535,B.MAX_VALUE_32BITS=-1,B.pretty=function(x){var m,_,T="";for(_=0;_<(x||"").length;_++)T+="\\x"+((m=x.charCodeAt(_))<16?"0":"")+m.toString(16).toUpperCase();return T},B.delay=function(x,m,_){setImmediate(function(){x.apply(_||null,m||[])})},B.inherits=function(x,m){function _(){}_.prototype=m.prototype,x.prototype=new _},B.extend=function(){var x,m,_={};for(x=0;x<arguments.length;x++)for(m in arguments[x])arguments[x].hasOwnProperty(m)&&void 0===_[m]&&(_[m]=arguments[x][m]);return _},B.prepareContent=function(x,m,_,T,D){return k.Promise.resolve(m).then(function(L){return C.blob&&(L instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L)))&&"undefined"!=typeof FileReader?new k.Promise(function(M,N){var I=new FileReader;I.onload=function(P){M(P.target.result)},I.onerror=function(P){N(P.target.error)},I.readAsArrayBuffer(L)}):L}).then(function(L){var N,M=B.getTypeOf(L);return M?("arraybuffer"===M?L=B.transformTo("uint8array",L):"string"===M&&(D?L=b.decode(L):_&&!0!==T&&(L=f(N=L,C.uint8array?new Uint8Array(N.length):new Array(N.length)))),L):k.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(G,F,B){"use strict";var C=G("./reader/readerFor"),b=G("./utils"),S=G("./signature"),k=G("./zipEntry"),h=(G("./utf8"),G("./support"));function f(u){this.files=[],this.loadOptions=u}f.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(p)+", expected "+b.pretty(u)+")")}},isSignature:function(u,p){var w=this.reader.index;this.reader.setIndex(u);var g=this.reader.readString(4)===p;return this.reader.setIndex(w),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),w=b.transformTo(h.uint8array?"uint8array":"array",u);this.zipComment=this.loadOptions.decodeFileName(w)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,p,w,g=this.zip64EndOfCentralSize-44;0<g;)u=this.reader.readInt(2),p=this.reader.readInt(4),w=this.reader.readData(p),this.zip64ExtensibleData[u]={id:u,length:p,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,p;for(u=0;u<this.files.length;u++)this.reader.setIndex((p=this.files[u]).localHeaderOffset),this.checkSignature(S.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(S.CENTRAL_FILE_HEADER);)(u=new k({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(S.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,S.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var p=u;if(this.checkSignature(S.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,S.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var g=p-w;if(0<g)this.isSignature(p,S.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(u){this.reader=C(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},F.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(G,F,B){"use strict";var C=G("./reader/readerFor"),b=G("./utils"),S=G("./compressedObject"),k=G("./crc32"),h=G("./utf8"),f=G("./compressions"),u=G("./support");function p(w,g){this.options=w,this.loadOptions=g}p.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(w){var g,x;if(w.skip(22),this.fileNameLength=w.readInt(2),x=w.readInt(2),this.fileName=w.readData(this.fileNameLength),w.skip(x),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(g=function(m){for(var _ in f)if(f.hasOwnProperty(_)&&f[_].magic===m)return f[_];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new S(this.compressedSize,this.uncompressedSize,this.crc32,g,w.readData(this.compressedSize))},readCentralPart:function(w){this.versionMadeBy=w.readInt(2),w.skip(2),this.bitFlag=w.readInt(2),this.compressionMethod=w.readString(2),this.date=w.readDate(),this.crc32=w.readInt(4),this.compressedSize=w.readInt(4),this.uncompressedSize=w.readInt(4);var g=w.readInt(2);if(this.extraFieldsLength=w.readInt(2),this.fileCommentLength=w.readInt(2),this.diskNumberStart=w.readInt(2),this.internalFileAttributes=w.readInt(2),this.externalFileAttributes=w.readInt(4),this.localHeaderOffset=w.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");w.skip(g),this.readExtraFields(w),this.parseZIP64ExtraField(w),this.fileComment=w.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var w=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==w&&(this.dosPermissions=63&this.externalFileAttributes),3==w&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(w){if(this.extraFields[1]){var g=C(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(w){var g,x,m,_=w.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});w.index+4<_;)g=w.readInt(2),x=w.readInt(2),m=w.readData(x),this.extraFields[g]={id:g,length:x,value:m};w.setIndex(_)},handleUTF8:function(){var w=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(null!==g)this.fileNameStr=g;else{var x=b.transformTo(w,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var m=this.findExtraFieldUnicodeComment();if(null!==m)this.fileCommentStr=m;else{var _=b.transformTo(w,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var w=this.extraFields[28789];if(w){var g=C(w.value);return 1!==g.readInt(1)||k(this.fileName)!==g.readInt(4)?null:h.utf8decode(g.readData(w.length-5))}return null},findExtraFieldUnicodeComment:function(){var w=this.extraFields[25461];if(w){var g=C(w.value);return 1!==g.readInt(1)||k(this.fileComment)!==g.readInt(4)?null:h.utf8decode(g.readData(w.length-5))}return null}},F.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(G,F,B){"use strict";function C(g,x,m){this.name=g,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=x,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var b=G("./stream/StreamHelper"),S=G("./stream/DataWorker"),k=G("./utf8"),h=G("./compressedObject"),f=G("./stream/GenericWorker");C.prototype={internalStream:function(g){var x=null,m="string";try{if(!g)throw new Error("No output type specified.");var _="string"===(m=g.toLowerCase())||"text"===m;"binarystring"!==m&&"text"!==m||(m="string"),x=this._decompressWorker();var T=!this._dataBinary;T&&!_&&(x=x.pipe(new k.Utf8EncodeWorker)),!T&&_&&(x=x.pipe(new k.Utf8DecodeWorker))}catch(D){(x=new f("error")).error(D)}return new b(x,m,"")},async:function(g,x){return this.internalStream(g).accumulate(x)},nodeStream:function(g,x){return this.internalStream(g||"nodebuffer").toNodejsStream(x)},_compressWorker:function(g,x){if(this._data instanceof h&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new k.Utf8EncodeWorker)),h.createWorkerFrom(m,g,x)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof f?this._data:new S(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<u.length;w++)C.prototype[u[w]]=p;F.exports=C},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(G,F,B){(function(C){"use strict";var b,S,k=C.MutationObserver||C.WebKitMutationObserver;if(k){var h=0,f=new k(g),u=C.document.createTextNode("");f.observe(u,{characterData:!0}),b=function(){u.data=h=++h%2}}else if(C.setImmediate||void 0===C.MessageChannel)b="document"in C&&"onreadystatechange"in C.document.createElement("script")?function(){var x=C.document.createElement("script");x.onreadystatechange=function(){g(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},C.document.documentElement.appendChild(x)}:function(){setTimeout(g,0)};else{var p=new C.MessageChannel;p.port1.onmessage=g,b=function(){p.port2.postMessage(0)}}var w=[];function g(){var x,m;S=!0;for(var _=w.length;_;){for(m=w,w=[],x=-1;++x<_;)m[x]();_=w.length}S=!1}F.exports=function(x){1!==w.push(x)||S||b()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(G,F,B){"use strict";var C=G("immediate");function b(){}var S={},k=["REJECTED"],h=["FULFILLED"],f=["PENDING"];function u(_){if("function"!=typeof _)throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,_!==b&&x(this,_)}function p(_,T,D){this.promise=_,"function"==typeof T&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),"function"==typeof D&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function w(_,T,D){C(function(){var L;try{L=T(D)}catch(M){return S.reject(_,M)}L===_?S.reject(_,new TypeError("Cannot resolve promise with itself")):S.resolve(_,L)})}function g(_){var T=_&&_.then;if(_&&("object"==typeof _||"function"==typeof _)&&"function"==typeof T)return function(){T.apply(_,arguments)}}function x(_,T){var D=!1;function L(I){D||(D=!0,S.reject(_,I))}function M(I){D||(D=!0,S.resolve(_,I))}var N=m(function(){T(M,L)});"error"===N.status&&L(N.value)}function m(_,T){var D={};try{D.value=_(T),D.status="success"}catch(L){D.status="error",D.value=L}return D}(F.exports=u).prototype.finally=function(_){if("function"!=typeof _)return this;var T=this.constructor;return this.then(function(D){return T.resolve(_()).then(function(){return D})},function(D){return T.resolve(_()).then(function(){throw D})})},u.prototype.catch=function(_){return this.then(null,_)},u.prototype.then=function(_,T){if("function"!=typeof _&&this.state===h||"function"!=typeof T&&this.state===k)return this;var D=new this.constructor(b);return this.state!==f?w(D,this.state===h?_:T,this.outcome):this.queue.push(new p(D,_,T)),D},p.prototype.callFulfilled=function(_){S.resolve(this.promise,_)},p.prototype.otherCallFulfilled=function(_){w(this.promise,this.onFulfilled,_)},p.prototype.callRejected=function(_){S.reject(this.promise,_)},p.prototype.otherCallRejected=function(_){w(this.promise,this.onRejected,_)},S.resolve=function(_,T){var D=m(g,T);if("error"===D.status)return S.reject(_,D.value);var L=D.value;if(L)x(_,L);else{_.state=h,_.outcome=T;for(var M=-1,N=_.queue.length;++M<N;)_.queue[M].callFulfilled(T)}return _},S.reject=function(_,T){_.state=k,_.outcome=T;for(var D=-1,L=_.queue.length;++D<L;)_.queue[D].callRejected(T);return _},u.resolve=function(_){return _ instanceof this?_:S.resolve(new this(b),_)},u.reject=function(_){var T=new this(b);return S.reject(T,_)},u.all=function(_){var T=this;if("[object Array]"!==Object.prototype.toString.call(_))return this.reject(new TypeError("must be an array"));var D=_.length,L=!1;if(!D)return this.resolve([]);for(var M=new Array(D),N=0,I=-1,P=new this(b);++I<D;)V(_[I],I);return P;function V(j,oe){T.resolve(j).then(function(J){M[oe]=J,++N!==D||L||(L=!0,S.resolve(P,M))},function(J){L||(L=!0,S.reject(P,J))})}},u.race=function(_){if("[object Array]"!==Object.prototype.toString.call(_))return this.reject(new TypeError("must be an array"));var D=_.length,L=!1;if(!D)return this.resolve([]);for(var M=-1,N=new this(b);++M<D;)this.resolve(_[M]).then(function(P){L||(L=!0,S.resolve(N,P))},function(P){L||(L=!0,S.reject(N,P))});return N}},{immediate:36}],38:[function(G,F,B){"use strict";var C={};(0,G("./lib/utils/common").assign)(C,G("./lib/deflate"),G("./lib/inflate"),G("./lib/zlib/constants")),F.exports=C},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(G,F,B){"use strict";var C=G("./zlib/deflate"),b=G("./utils/common"),S=G("./utils/strings"),k=G("./zlib/messages"),h=G("./zlib/zstream"),f=Object.prototype.toString;function x(_){if(!(this instanceof x))return new x(_);this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},_||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var D=C.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(0!==D)throw new Error(k[D]);if(T.header&&C.deflateSetHeader(this.strm,T.header),T.dictionary){var L;if(L="string"==typeof T.dictionary?S.string2buf(T.dictionary):"[object ArrayBuffer]"===f.call(T.dictionary)?new Uint8Array(T.dictionary):T.dictionary,0!==(D=C.deflateSetDictionary(this.strm,L)))throw new Error(k[D]);this._dict_set=!0}}function m(_,T){var D=new x(T);if(D.push(_,!0),D.err)throw D.msg||k[D.err];return D.result}x.prototype.push=function(_,T){var D,L,M=this.strm,N=this.options.chunkSize;if(this.ended)return!1;L=T===~~T?T:!0===T?4:0,M.input="string"==typeof _?S.string2buf(_):"[object ArrayBuffer]"===f.call(_)?new Uint8Array(_):_,M.next_in=0,M.avail_in=M.input.length;do{if(0===M.avail_out&&(M.output=new b.Buf8(N),M.next_out=0,M.avail_out=N),1!==(D=C.deflate(M,L))&&0!==D)return this.onEnd(D),!(this.ended=!0);0!==M.avail_out&&(0!==M.avail_in||4!==L&&2!==L)||this.onData("string"===this.options.to?S.buf2binstring(b.shrinkBuf(M.output,M.next_out)):b.shrinkBuf(M.output,M.next_out))}while((0<M.avail_in||0===M.avail_out)&&1!==D);return 4===L?(D=C.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,0===D):2!==L||(this.onEnd(0),!(M.avail_out=0))},x.prototype.onData=function(_){this.chunks.push(_)},x.prototype.onEnd=function(_){0===_&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},B.Deflate=x,B.deflate=m,B.deflateRaw=function(_,T){return(T=T||{}).raw=!0,m(_,T)},B.gzip=function(_,T){return(T=T||{}).gzip=!0,m(_,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(G,F,B){"use strict";var C=G("./zlib/inflate"),b=G("./utils/common"),S=G("./utils/strings"),k=G("./zlib/constants"),h=G("./zlib/messages"),f=G("./zlib/zstream"),u=G("./zlib/gzheader"),p=Object.prototype.toString;function w(x){if(!(this instanceof w))return new w(x);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},x||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,0===m.windowBits&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||x&&x.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&0==(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var _=C.inflateInit2(this.strm,m.windowBits);if(_!==k.Z_OK)throw new Error(h[_]);this.header=new u,C.inflateGetHeader(this.strm,this.header)}function g(x,m){var _=new w(m);if(_.push(x,!0),_.err)throw _.msg||h[_.err];return _.result}w.prototype.push=function(x,m){var _,T,D,L,M,N,I=this.strm,P=this.options.chunkSize,V=this.options.dictionary,j=!1;if(this.ended)return!1;T=m===~~m?m:!0===m?k.Z_FINISH:k.Z_NO_FLUSH,I.input="string"==typeof x?S.binstring2buf(x):"[object ArrayBuffer]"===p.call(x)?new Uint8Array(x):x,I.next_in=0,I.avail_in=I.input.length;do{if(0===I.avail_out&&(I.output=new b.Buf8(P),I.next_out=0,I.avail_out=P),(_=C.inflate(I,k.Z_NO_FLUSH))===k.Z_NEED_DICT&&V&&(N="string"==typeof V?S.string2buf(V):"[object ArrayBuffer]"===p.call(V)?new Uint8Array(V):V,_=C.inflateSetDictionary(this.strm,N)),_===k.Z_BUF_ERROR&&!0===j&&(_=k.Z_OK,j=!1),_!==k.Z_STREAM_END&&_!==k.Z_OK)return this.onEnd(_),!(this.ended=!0);I.next_out&&(0!==I.avail_out&&_!==k.Z_STREAM_END&&(0!==I.avail_in||T!==k.Z_FINISH&&T!==k.Z_SYNC_FLUSH)||("string"===this.options.to?(D=S.utf8border(I.output,I.next_out),L=I.next_out-D,M=S.buf2string(I.output,D),I.next_out=L,I.avail_out=P-L,L&&b.arraySet(I.output,I.output,D,L,0),this.onData(M)):this.onData(b.shrinkBuf(I.output,I.next_out)))),0===I.avail_in&&0===I.avail_out&&(j=!0)}while((0<I.avail_in||0===I.avail_out)&&_!==k.Z_STREAM_END);return _===k.Z_STREAM_END&&(T=k.Z_FINISH),T===k.Z_FINISH?(_=C.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===k.Z_OK):T!==k.Z_SYNC_FLUSH||(this.onEnd(k.Z_OK),!(I.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===k.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},B.Inflate=w,B.inflate=g,B.inflateRaw=function(x,m){return(m=m||{}).raw=!0,g(x,m)},B.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(G,F,B){"use strict";var C="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;B.assign=function(k){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var f=h.shift();if(f){if("object"!=typeof f)throw new TypeError(f+"must be non-object");for(var u in f)f.hasOwnProperty(u)&&(k[u]=f[u])}}return k},B.shrinkBuf=function(k,h){return k.length===h?k:k.subarray?k.subarray(0,h):(k.length=h,k)};var b={arraySet:function(k,h,f,u,p){if(h.subarray&&k.subarray)k.set(h.subarray(f,f+u),p);else for(var w=0;w<u;w++)k[p+w]=h[f+w]},flattenChunks:function(k){var h,f,u,p,w,g;for(h=u=0,f=k.length;h<f;h++)u+=k[h].length;for(g=new Uint8Array(u),h=p=0,f=k.length;h<f;h++)g.set(w=k[h],p),p+=w.length;return g}},S={arraySet:function(k,h,f,u,p){for(var w=0;w<u;w++)k[p+w]=h[f+w]},flattenChunks:function(k){return[].concat.apply([],k)}};B.setTyped=function(k){k?(B.Buf8=Uint8Array,B.Buf16=Uint16Array,B.Buf32=Int32Array,B.assign(B,b)):(B.Buf8=Array,B.Buf16=Array,B.Buf32=Array,B.assign(B,S))},B.setTyped(C)},{}],42:[function(G,F,B){"use strict";var C=G("./common"),b=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch(u){b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){S=!1}for(var k=new C.Buf8(256),h=0;h<256;h++)k[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function f(u,p){if(p<65537&&(u.subarray&&S||!u.subarray&&b))return String.fromCharCode.apply(null,C.shrinkBuf(u,p));for(var w="",g=0;g<p;g++)w+=String.fromCharCode(u[g]);return w}k[254]=k[254]=1,B.string2buf=function(u){var p,w,g,x,m,_=u.length,T=0;for(x=0;x<_;x++)55296==(64512&(w=u.charCodeAt(x)))&&x+1<_&&56320==(64512&(g=u.charCodeAt(x+1)))&&(w=65536+(w-55296<<10)+(g-56320),x++),T+=w<128?1:w<2048?2:w<65536?3:4;for(p=new C.Buf8(T),x=m=0;m<T;x++)55296==(64512&(w=u.charCodeAt(x)))&&x+1<_&&56320==(64512&(g=u.charCodeAt(x+1)))&&(w=65536+(w-55296<<10)+(g-56320),x++),w<128?p[m++]=w:(w<2048?p[m++]=192|w>>>6:(w<65536?p[m++]=224|w>>>12:(p[m++]=240|w>>>18,p[m++]=128|w>>>12&63),p[m++]=128|w>>>6&63),p[m++]=128|63&w);return p},B.buf2binstring=function(u){return f(u,u.length)},B.binstring2buf=function(u){for(var p=new C.Buf8(u.length),w=0,g=p.length;w<g;w++)p[w]=u.charCodeAt(w);return p},B.buf2string=function(u,p){var w,g,x,m,_=p||u.length,T=new Array(2*_);for(w=g=0;w<_;)if((x=u[w++])<128)T[g++]=x;else if(4<(m=k[x]))T[g++]=65533,w+=m-1;else{for(x&=2===m?31:3===m?15:7;1<m&&w<_;)x=x<<6|63&u[w++],m--;1<m?T[g++]=65533:x<65536?T[g++]=x:(T[g++]=55296|(x-=65536)>>10&1023,T[g++]=56320|1023&x)}return f(T,g)},B.utf8border=function(u,p){var w;for((p=p||u.length)>u.length&&(p=u.length),w=p-1;0<=w&&128==(192&u[w]);)w--;return w<0||0===w?p:w+k[u[w]]>p?w:p}},{"./common":41}],43:[function(G,F,B){"use strict";F.exports=function(C,b,S,k){for(var h=65535&C|0,f=C>>>16&65535|0,u=0;0!==S;){for(S-=u=2e3<S?2e3:S;f=f+(h=h+b[k++]|0)|0,--u;);h%=65521,f%=65521}return h|f<<16|0}},{}],44:[function(G,F,B){"use strict";F.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(G,F,B){"use strict";var C=function(){for(var b,S=[],k=0;k<256;k++){b=k;for(var h=0;h<8;h++)b=1&b?3988292384^b>>>1:b>>>1;S[k]=b}return S}();F.exports=function(b,S,k,h){var f=C,u=h+k;b^=-1;for(var p=h;p<u;p++)b=b>>>8^f[255&(b^S[p])];return-1^b}},{}],46:[function(G,F,B){"use strict";var C,b=G("../utils/common"),S=G("./trees"),k=G("./adler32"),h=G("./crc32"),f=G("./messages"),g=-2,j=258,oe=262;function pe($,se){return $.msg=f[se],se}function fe($){return($<<1)-(4<$?9:0)}function Ee($){for(var se=$.length;0<=--se;)$[se]=0}function _e($){var se=$.state,K=se.pending;K>$.avail_out&&(K=$.avail_out),0!==K&&(b.arraySet($.output,se.pending_buf,se.pending_out,K,$.next_out),$.next_out+=K,se.pending_out+=K,$.total_out+=K,$.avail_out-=K,se.pending-=K,0===se.pending&&(se.pending_out=0))}function Te($,se){S._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,se),$.block_start=$.strstart,_e($.strm)}function De($,se){$.pending_buf[$.pending++]=se}function be($,se){$.pending_buf[$.pending++]=se>>>8&255,$.pending_buf[$.pending++]=255&se}function de($,se){var K,te,X=$.max_chain_length,me=$.strstart,R=$.prev_length,H=$.nice_match,Z=$.strstart>$.w_size-oe?$.strstart-($.w_size-oe):0,Ae=$.window,Ke=$.w_mask,Re=$.prev,ht=$.strstart+j,Et=Ae[me+R-1],Ft=Ae[me+R];$.prev_length>=$.good_match&&(X>>=2),H>$.lookahead&&(H=$.lookahead);do{if(Ae[(K=se)+R]===Ft&&Ae[K+R-1]===Et&&Ae[K]===Ae[me]&&Ae[++K]===Ae[me+1]){me+=2,K++;do{}while(Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&Ae[++me]===Ae[++K]&&me<ht);if(te=j-(ht-me),me=ht-j,R<te){if($.match_start=se,H<=(R=te))break;Et=Ae[me+R-1],Ft=Ae[me+R]}}}while((se=Re[se&Ke])>Z&&0!=--X);return R<=$.lookahead?R:$.lookahead}function we($){var se,K,te,X,me,R,H,Z,Ae,Ke,Re=$.w_size;do{if(X=$.window_size-$.lookahead-$.strstart,$.strstart>=Re+(Re-oe)){for(b.arraySet($.window,$.window,Re,Re,0),$.match_start-=Re,$.strstart-=Re,$.block_start-=Re,se=K=$.hash_size;te=$.head[--se],$.head[se]=Re<=te?te-Re:0,--K;);for(se=K=Re;te=$.prev[--se],$.prev[se]=Re<=te?te-Re:0,--K;);X+=Re}if(0===$.strm.avail_in)break;if(H=$.window,Z=$.strstart+$.lookahead,Ke=void 0,(Ae=X)<(Ke=(R=$.strm).avail_in)&&(Ke=Ae),K=0===Ke?0:(R.avail_in-=Ke,b.arraySet(H,R.input,R.next_in,Ke,Z),1===R.state.wrap?R.adler=k(R.adler,H,Ke,Z):2===R.state.wrap&&(R.adler=h(R.adler,H,Ke,Z)),R.next_in+=Ke,R.total_in+=Ke,Ke),$.lookahead+=K,$.lookahead+$.insert>=3)for($.ins_h=$.window[me=$.strstart-$.insert],$.ins_h=($.ins_h<<$.hash_shift^$.window[me+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[me+3-1])&$.hash_mask,$.prev[me&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=me,me++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<oe&&0!==$.strm.avail_in)}function Ye($,se){for(var K,te;;){if($.lookahead<oe){if(we($),$.lookahead<oe&&0===se)return 1;if(0===$.lookahead)break}if(K=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,K=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),0!==K&&$.strstart-K<=$.w_size-oe&&($.match_length=de($,K)),$.match_length>=3)if(te=S._tr_tally($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,K=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,0!=--$.match_length;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else te=S._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(te&&(Te($,!1),0===$.strm.avail_out))return 1}return $.insert=$.strstart<2?$.strstart:2,4===se?(Te($,!0),0===$.strm.avail_out?3:4):$.last_lit&&(Te($,!1),0===$.strm.avail_out)?1:2}function ze($,se){for(var K,te,X;;){if($.lookahead<oe){if(we($),$.lookahead<oe&&0===se)return 1;if(0===$.lookahead)break}if(K=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,K=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,0!==K&&$.prev_length<$.max_lazy_match&&$.strstart-K<=$.w_size-oe&&($.match_length=de($,K),$.match_length<=5&&(1===$.strategy||3===$.match_length&&4096<$.strstart-$.match_start)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){for(X=$.strstart+$.lookahead-3,te=S._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=X&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,K=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),0!=--$.prev_length;);if($.match_available=0,$.match_length=2,$.strstart++,te&&(Te($,!1),0===$.strm.avail_out))return 1}else if($.match_available){if((te=S._tr_tally($,0,$.window[$.strstart-1]))&&Te($,!1),$.strstart++,$.lookahead--,0===$.strm.avail_out)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(te=S._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,4===se?(Te($,!0),0===$.strm.avail_out?3:4):$.last_lit&&(Te($,!1),0===$.strm.avail_out)?1:2}function He($,se,K,te,X){this.good_length=$,this.max_lazy=se,this.nice_length=K,this.max_chain=te,this.func=X}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(1146),this.dyn_dtree=new b.Buf16(122),this.bl_tree=new b.Buf16(78),Ee(this.dyn_ltree),Ee(this.dyn_dtree),Ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(16),this.heap=new b.Buf16(573),Ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(573),Ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye($){var se;return $&&$.state?($.total_in=$.total_out=0,$.data_type=2,(se=$.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?42:113,$.adler=2===se.wrap?0:1,se.last_flush=0,S._tr_init(se),0):pe($,g)}function ee($){var K,se=ye($);return 0===se&&((K=$.state).window_size=2*K.w_size,Ee(K.head),K.max_lazy_match=C[K.level].max_lazy,K.good_match=C[K.level].good_length,K.nice_match=C[K.level].nice_length,K.max_chain_length=C[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=2,K.match_available=0,K.ins_h=0),se}function ie($,se,K,te,X,me){if(!$)return g;var R=1;if(-1===se&&(se=6),te<0?(R=0,te=-te):15<te&&(R=2,te-=16),X<1||9<X||8!==K||te<8||15<te||se<0||9<se||me<0||4<me)return pe($,g);8===te&&(te=9);var H=new Ne;return($.state=H).strm=$,H.wrap=R,H.gzhead=null,H.w_bits=te,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=X+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+3-1)/3),H.window=new b.Buf8(2*H.w_size),H.head=new b.Buf16(H.hash_size),H.prev=new b.Buf16(H.w_size),H.lit_bufsize=1<<X+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new b.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=se,H.strategy=me,H.method=K,ee($)}C=[new He(0,0,0,0,function($,se){var K=65535;for(K>$.pending_buf_size-5&&(K=$.pending_buf_size-5);;){if($.lookahead<=1){if(we($),0===$.lookahead&&0===se)return 1;if(0===$.lookahead)break}$.strstart+=$.lookahead,$.lookahead=0;var te=$.block_start+K;if((0===$.strstart||$.strstart>=te)&&($.lookahead=$.strstart-te,$.strstart=te,Te($,!1),0===$.strm.avail_out)||$.strstart-$.block_start>=$.w_size-oe&&(Te($,!1),0===$.strm.avail_out))return 1}return $.insert=0,4===se?(Te($,!0),0===$.strm.avail_out?3:4):($.strstart>$.block_start&&Te($,!1),1)}),new He(4,4,8,4,Ye),new He(4,5,16,8,Ye),new He(4,6,32,32,Ye),new He(4,4,16,16,ze),new He(8,16,32,32,ze),new He(8,16,128,128,ze),new He(8,32,128,256,ze),new He(32,128,258,1024,ze),new He(32,258,258,4096,ze)],B.deflateInit=function($,se){return ie($,se,8,15,8,0)},B.deflateInit2=ie,B.deflateReset=ee,B.deflateResetKeep=ye,B.deflateSetHeader=function($,se){return $&&$.state?2!==$.state.wrap?g:($.state.gzhead=se,0):g},B.deflate=function($,se){var K,te,X,me;if(!$||!$.state||5<se||se<0)return $?pe($,g):g;if(te=$.state,!$.output||!$.input&&0!==$.avail_in||666===te.status&&4!==se)return pe($,0===$.avail_out?-5:g);if(te.strm=$,K=te.last_flush,te.last_flush=se,42===te.status)if(2===te.wrap)$.adler=0,De(te,31),De(te,139),De(te,8),te.gzhead?(De(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),De(te,255&te.gzhead.time),De(te,te.gzhead.time>>8&255),De(te,te.gzhead.time>>16&255),De(te,te.gzhead.time>>24&255),De(te,9===te.level?2:2<=te.strategy||te.level<2?4:0),De(te,255&te.gzhead.os),te.gzhead.extra&&te.gzhead.extra.length&&(De(te,255&te.gzhead.extra.length),De(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&($.adler=h($.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=69):(De(te,0),De(te,0),De(te,0),De(te,0),De(te,0),De(te,9===te.level?2:2<=te.strategy||te.level<2?4:0),De(te,3),te.status=113);else{var R=8+(te.w_bits-8<<4)<<8;R|=(2<=te.strategy||te.level<2?0:te.level<6?1:6===te.level?2:3)<<6,0!==te.strstart&&(R|=32),R+=31-R%31,te.status=113,be(te,R),0!==te.strstart&&(be(te,$.adler>>>16),be(te,65535&$.adler)),$.adler=1}if(69===te.status)if(te.gzhead.extra){for(X=te.pending;te.gzindex<(65535&te.gzhead.extra.length)&&(te.pending!==te.pending_buf_size||(te.gzhead.hcrc&&te.pending>X&&($.adler=h($.adler,te.pending_buf,te.pending-X,X)),_e($),X=te.pending,te.pending!==te.pending_buf_size));)De(te,255&te.gzhead.extra[te.gzindex]),te.gzindex++;te.gzhead.hcrc&&te.pending>X&&($.adler=h($.adler,te.pending_buf,te.pending-X,X)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=73)}else te.status=73;if(73===te.status)if(te.gzhead.name){X=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>X&&($.adler=h($.adler,te.pending_buf,te.pending-X,X)),_e($),X=te.pending,te.pending===te.pending_buf_size)){me=1;break}me=te.gzindex<te.gzhead.name.length?255&te.gzhead.name.charCodeAt(te.gzindex++):0,De(te,me)}while(0!==me);te.gzhead.hcrc&&te.pending>X&&($.adler=h($.adler,te.pending_buf,te.pending-X,X)),0===me&&(te.gzindex=0,te.status=91)}else te.status=91;if(91===te.status)if(te.gzhead.comment){X=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>X&&($.adler=h($.adler,te.pending_buf,te.pending-X,X)),_e($),X=te.pending,te.pending===te.pending_buf_size)){me=1;break}me=te.gzindex<te.gzhead.comment.length?255&te.gzhead.comment.charCodeAt(te.gzindex++):0,De(te,me)}while(0!==me);te.gzhead.hcrc&&te.pending>X&&($.adler=h($.adler,te.pending_buf,te.pending-X,X)),0===me&&(te.status=103)}else te.status=103;if(103===te.status&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&_e($),te.pending+2<=te.pending_buf_size&&(De(te,255&$.adler),De(te,$.adler>>8&255),$.adler=0,te.status=113)):te.status=113),0!==te.pending){if(_e($),0===$.avail_out)return te.last_flush=-1,0}else if(0===$.avail_in&&fe(se)<=fe(K)&&4!==se)return pe($,-5);if(666===te.status&&0!==$.avail_in)return pe($,-5);if(0!==$.avail_in||0!==te.lookahead||0!==se&&666!==te.status){var H=2===te.strategy?function(Z,Ae){for(var Ke;;){if(0===Z.lookahead&&(we(Z),0===Z.lookahead)){if(0===Ae)return 1;break}if(Z.match_length=0,Ke=S._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++,Ke&&(Te(Z,!1),0===Z.strm.avail_out))return 1}return Z.insert=0,4===Ae?(Te(Z,!0),0===Z.strm.avail_out?3:4):Z.last_lit&&(Te(Z,!1),0===Z.strm.avail_out)?1:2}(te,se):3===te.strategy?function(Z,Ae){for(var Ke,Re,ht,Et,Ft=Z.window;;){if(Z.lookahead<=j){if(we(Z),Z.lookahead<=j&&0===Ae)return 1;if(0===Z.lookahead)break}if(Z.match_length=0,Z.lookahead>=3&&0<Z.strstart&&(Re=Ft[ht=Z.strstart-1])===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]){Et=Z.strstart+j;do{}while(Re===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]&&Re===Ft[++ht]&&ht<Et);Z.match_length=j-(Et-ht),Z.match_length>Z.lookahead&&(Z.match_length=Z.lookahead)}if(Z.match_length>=3?(Ke=S._tr_tally(Z,1,Z.match_length-3),Z.lookahead-=Z.match_length,Z.strstart+=Z.match_length,Z.match_length=0):(Ke=S._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++),Ke&&(Te(Z,!1),0===Z.strm.avail_out))return 1}return Z.insert=0,4===Ae?(Te(Z,!0),0===Z.strm.avail_out?3:4):Z.last_lit&&(Te(Z,!1),0===Z.strm.avail_out)?1:2}(te,se):C[te.level].func(te,se);if(3!==H&&4!==H||(te.status=666),1===H||3===H)return 0===$.avail_out&&(te.last_flush=-1),0;if(2===H&&(1===se?S._tr_align(te):5!==se&&(S._tr_stored_block(te,0,0,!1),3===se&&(Ee(te.head),0===te.lookahead&&(te.strstart=0,te.block_start=0,te.insert=0))),_e($),0===$.avail_out))return te.last_flush=-1,0}return 4!==se?0:te.wrap<=0?1:(2===te.wrap?(De(te,255&$.adler),De(te,$.adler>>8&255),De(te,$.adler>>16&255),De(te,$.adler>>24&255),De(te,255&$.total_in),De(te,$.total_in>>8&255),De(te,$.total_in>>16&255),De(te,$.total_in>>24&255)):(be(te,$.adler>>>16),be(te,65535&$.adler)),_e($),0<te.wrap&&(te.wrap=-te.wrap),0!==te.pending?0:1)},B.deflateEnd=function($){var se;return $&&$.state?42!==(se=$.state.status)&&69!==se&&73!==se&&91!==se&&103!==se&&113!==se&&666!==se?pe($,g):($.state=null,113===se?pe($,-3):0):g},B.deflateSetDictionary=function($,se){var K,te,X,me,R,H,Z,Ae,Ke=se.length;if(!$||!$.state||2===(me=(K=$.state).wrap)||1===me&&42!==K.status||K.lookahead)return g;for(1===me&&($.adler=k($.adler,se,Ke,0)),K.wrap=0,Ke>=K.w_size&&(0===me&&(Ee(K.head),K.strstart=0,K.block_start=0,K.insert=0),Ae=new b.Buf8(K.w_size),b.arraySet(Ae,se,Ke-K.w_size,K.w_size,0),se=Ae,Ke=K.w_size),R=$.avail_in,H=$.next_in,Z=$.input,$.avail_in=Ke,$.next_in=0,$.input=se,we(K);K.lookahead>=3;){for(te=K.strstart,X=K.lookahead-2;K.ins_h=(K.ins_h<<K.hash_shift^K.window[te+3-1])&K.hash_mask,K.prev[te&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=te,te++,--X;);K.strstart=te,K.lookahead=2,we(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=2,K.match_available=0,$.next_in=H,$.input=Z,$.avail_in=R,K.wrap=me,0},B.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(G,F,B){"use strict";F.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(G,F,B){"use strict";F.exports=function(C,b){var S,k,h,f,u,p,w,g,x,m,_,T,D,L,M,N,I,P,V,j,oe,J,le,q,ue;q=C.input,h=(k=C.next_in)+(C.avail_in-5),ue=C.output,u=(f=C.next_out)-(b-C.avail_out),p=f+(C.avail_out-257),w=(S=C.state).dmax,g=S.wsize,x=S.whave,m=S.wnext,_=S.window,T=S.hold,D=S.bits,L=S.lencode,M=S.distcode,N=(1<<S.lenbits)-1,I=(1<<S.distbits)-1;e:do{D<15&&(T+=q[k++]<<D,T+=q[k++]<<(D+=8),D+=8),P=L[T&N];t:for(;;){if(T>>>=V=P>>>24,D-=V,0==(V=P>>>16&255))ue[f++]=65535&P;else{if(!(16&V)){if(0==(64&V)){P=L[(65535&P)+(T&(1<<V)-1)];continue t}if(32&V){S.mode=12;break e}C.msg="invalid literal/length code",S.mode=30;break e}j=65535&P,(V&=15)&&(D<V&&(T+=q[k++]<<D,D+=8),j+=T&(1<<V)-1,T>>>=V,D-=V),D<15&&(T+=q[k++]<<D,T+=q[k++]<<(D+=8),D+=8),P=M[T&I];n:for(;;){if(T>>>=V=P>>>24,D-=V,!(16&(V=P>>>16&255))){if(0==(64&V)){P=M[(65535&P)+(T&(1<<V)-1)];continue n}C.msg="invalid distance code",S.mode=30;break e}if(oe=65535&P,D<(V&=15)&&(T+=q[k++]<<D,(D+=8)<V&&(T+=q[k++]<<D,D+=8)),w<(oe+=T&(1<<V)-1)){C.msg="invalid distance too far back",S.mode=30;break e}if(T>>>=V,D-=V,(V=f-u)<oe){if(x<(V=oe-V)&&S.sane){C.msg="invalid distance too far back",S.mode=30;break e}if(le=_,(J=0)===m){if(J+=g-V,V<j){for(j-=V;ue[f++]=_[J++],--V;);J=f-oe,le=ue}}else if(m<V){if(J+=g+m-V,(V-=m)<j){for(j-=V;ue[f++]=_[J++],--V;);if(J=0,m<j){for(j-=V=m;ue[f++]=_[J++],--V;);J=f-oe,le=ue}}}else if(J+=m-V,V<j){for(j-=V;ue[f++]=_[J++],--V;);J=f-oe,le=ue}for(;2<j;)ue[f++]=le[J++],ue[f++]=le[J++],ue[f++]=le[J++],j-=3;j&&(ue[f++]=le[J++],1<j&&(ue[f++]=le[J++]))}else{for(J=f-oe;ue[f++]=ue[J++],ue[f++]=ue[J++],ue[f++]=ue[J++],2<(j-=3););j&&(ue[f++]=ue[J++],1<j&&(ue[f++]=ue[J++]))}break}}break}}while(k<h&&f<p);k-=j=D>>3,T&=(1<<(D-=j<<3))-1,C.next_in=k,C.next_out=f,C.avail_in=k<h?h-k+5:5-(k-h),C.avail_out=f<p?p-f+257:257-(f-p),S.hold=T,S.bits=D}},{}],49:[function(G,F,B){"use strict";var C=G("../utils/common"),b=G("./adler32"),S=G("./crc32"),k=G("./inffast"),h=G("./inftrees"),w=-2;function _(J){return(J>>>24&255)+(J>>>8&65280)+((65280&J)<<8)+((255&J)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new C.Buf16(320),this.work=new C.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(J){var le;return J&&J.state?(J.total_in=J.total_out=(le=J.state).total=0,J.msg="",le.wrap&&(J.adler=1&le.wrap),le.mode=1,le.last=0,le.havedict=0,le.dmax=32768,le.head=null,le.hold=0,le.bits=0,le.lencode=le.lendyn=new C.Buf32(852),le.distcode=le.distdyn=new C.Buf32(592),le.sane=1,le.back=-1,0):w}function L(J){var le;return J&&J.state?((le=J.state).wsize=0,le.whave=0,le.wnext=0,D(J)):w}function M(J,le){var q,ue;return J&&J.state?(ue=J.state,le<0?(q=0,le=-le):(q=1+(le>>4),le<48&&(le&=15)),le&&(le<8||15<le)?w:(null!==ue.window&&ue.wbits!==le&&(ue.window=null),ue.wrap=q,ue.wbits=le,L(J))):w}function N(J,le){var q,ue;return J?(ue=new T,(J.state=ue).window=null,0!==(q=M(J,le))&&(J.state=null),q):w}var I,P,V=!0;function j(J){if(V){var le;for(I=new C.Buf32(512),P=new C.Buf32(32),le=0;le<144;)J.lens[le++]=8;for(;le<256;)J.lens[le++]=9;for(;le<280;)J.lens[le++]=7;for(;le<288;)J.lens[le++]=8;for(h(1,J.lens,0,288,I,0,J.work,{bits:9}),le=0;le<32;)J.lens[le++]=5;h(2,J.lens,0,32,P,0,J.work,{bits:5}),V=!1}J.lencode=I,J.lenbits=9,J.distcode=P,J.distbits=5}function oe(J,le,q,ue){var he,ce=J.state;return null===ce.window&&(ce.wsize=1<<ce.wbits,ce.wnext=0,ce.whave=0,ce.window=new C.Buf8(ce.wsize)),ue>=ce.wsize?(C.arraySet(ce.window,le,q-ce.wsize,ce.wsize,0),ce.wnext=0,ce.whave=ce.wsize):(ue<(he=ce.wsize-ce.wnext)&&(he=ue),C.arraySet(ce.window,le,q-ue,he,ce.wnext),(ue-=he)?(C.arraySet(ce.window,le,q-ue,ue,0),ce.wnext=ue,ce.whave=ce.wsize):(ce.wnext+=he,ce.wnext===ce.wsize&&(ce.wnext=0),ce.whave<ce.wsize&&(ce.whave+=he))),0}B.inflateReset=L,B.inflateReset2=M,B.inflateResetKeep=D,B.inflateInit=function(J){return N(J,15)},B.inflateInit2=N,B.inflate=function(J,le){var q,ue,he,ce,pe,fe,Ee,_e,Te,De,be,de,we,Ye,ze,He,Ne,ye,ee,ie,$,se,K,te,X=0,me=new C.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!J||!J.state||!J.output||!J.input&&0!==J.avail_in)return w;12===(q=J.state).mode&&(q.mode=13),pe=J.next_out,he=J.output,ce=J.next_in,ue=J.input,_e=q.hold,Te=q.bits,De=fe=J.avail_in,be=Ee=J.avail_out,se=0;e:for(;;)switch(q.mode){case 1:if(0===q.wrap){q.mode=13;break}for(;Te<16;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(2&q.wrap&&35615===_e){me[q.check=0]=255&_e,me[1]=_e>>>8&255,q.check=S(q.check,me,2,0),Te=_e=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&_e)<<8)+(_e>>8))%31){J.msg="incorrect header check",q.mode=30;break}if(8!=(15&_e)){J.msg="unknown compression method",q.mode=30;break}if(Te-=4,$=8+(15&(_e>>>=4)),0===q.wbits)q.wbits=$;else if($>q.wbits){J.msg="invalid window size",q.mode=30;break}q.dmax=1<<$,J.adler=q.check=1,q.mode=512&_e?10:12,Te=_e=0;break;case 2:for(;Te<16;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(q.flags=_e,8!=(255&q.flags)){J.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){J.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=_e>>8&1),512&q.flags&&(me[0]=255&_e,me[1]=_e>>>8&255,q.check=S(q.check,me,2,0)),Te=_e=0,q.mode=3;case 3:for(;Te<32;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}q.head&&(q.head.time=_e),512&q.flags&&(me[0]=255&_e,me[1]=_e>>>8&255,me[2]=_e>>>16&255,me[3]=_e>>>24&255,q.check=S(q.check,me,4,0)),Te=_e=0,q.mode=4;case 4:for(;Te<16;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}q.head&&(q.head.xflags=255&_e,q.head.os=_e>>8),512&q.flags&&(me[0]=255&_e,me[1]=_e>>>8&255,q.check=S(q.check,me,2,0)),Te=_e=0,q.mode=5;case 5:if(1024&q.flags){for(;Te<16;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}q.length=_e,q.head&&(q.head.extra_len=_e),512&q.flags&&(me[0]=255&_e,me[1]=_e>>>8&255,q.check=S(q.check,me,2,0)),Te=_e=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(fe<(de=q.length)&&(de=fe),de&&(q.head&&($=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),C.arraySet(q.head.extra,ue,ce,de,$)),512&q.flags&&(q.check=S(q.check,ue,de,ce)),fe-=de,ce+=de,q.length-=de),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(0===fe)break e;for(de=0;$=ue[ce+de++],q.head&&$&&q.length<65536&&(q.head.name+=String.fromCharCode($)),$&&de<fe;);if(512&q.flags&&(q.check=S(q.check,ue,de,ce)),fe-=de,ce+=de,$)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(0===fe)break e;for(de=0;$=ue[ce+de++],q.head&&$&&q.length<65536&&(q.head.comment+=String.fromCharCode($)),$&&de<fe;);if(512&q.flags&&(q.check=S(q.check,ue,de,ce)),fe-=de,ce+=de,$)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;Te<16;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(_e!==(65535&q.check)){J.msg="header crc mismatch",q.mode=30;break}Te=_e=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),J.adler=q.check=0,q.mode=12;break;case 10:for(;Te<32;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}J.adler=q.check=_(_e),Te=_e=0,q.mode=11;case 11:if(0===q.havedict)return J.next_out=pe,J.avail_out=Ee,J.next_in=ce,J.avail_in=fe,q.hold=_e,q.bits=Te,2;J.adler=q.check=1,q.mode=12;case 12:if(5===le||6===le)break e;case 13:if(q.last){_e>>>=7&Te,Te-=7&Te,q.mode=27;break}for(;Te<3;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}switch(q.last=1&_e,Te-=1,3&(_e>>>=1)){case 0:q.mode=14;break;case 1:if(j(q),q.mode=20,6!==le)break;_e>>>=2,Te-=2;break e;case 2:q.mode=17;break;case 3:J.msg="invalid block type",q.mode=30}_e>>>=2,Te-=2;break;case 14:for(_e>>>=7&Te,Te-=7&Te;Te<32;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if((65535&_e)!=(_e>>>16^65535)){J.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&_e,Te=_e=0,q.mode=15,6===le)break e;case 15:q.mode=16;case 16:if(de=q.length){if(fe<de&&(de=fe),Ee<de&&(de=Ee),0===de)break e;C.arraySet(he,ue,ce,de,pe),fe-=de,ce+=de,Ee-=de,pe+=de,q.length-=de;break}q.mode=12;break;case 17:for(;Te<14;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(q.nlen=257+(31&_e),Te-=5,q.ndist=1+(31&(_e>>>=5)),Te-=5,q.ncode=4+(15&(_e>>>=5)),_e>>>=4,Te-=4,286<q.nlen||30<q.ndist){J.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;Te<3;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}q.lens[R[q.have++]]=7&_e,_e>>>=3,Te-=3}for(;q.have<19;)q.lens[R[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,se=h(0,q.lens,0,19,q.lencode,0,q.work,K={bits:q.lenbits}),q.lenbits=K.bits,se){J.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;He=(X=q.lencode[_e&(1<<q.lenbits)-1])>>>16&255,Ne=65535&X,!((ze=X>>>24)<=Te);){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(Ne<16)_e>>>=ze,Te-=ze,q.lens[q.have++]=Ne;else{if(16===Ne){for(te=ze+2;Te<te;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(_e>>>=ze,Te-=ze,0===q.have){J.msg="invalid bit length repeat",q.mode=30;break}$=q.lens[q.have-1],de=3+(3&_e),_e>>>=2,Te-=2}else if(17===Ne){for(te=ze+3;Te<te;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}Te-=ze,$=0,de=3+(7&(_e>>>=ze)),_e>>>=3,Te-=3}else{for(te=ze+7;Te<te;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}Te-=ze,$=0,de=11+(127&(_e>>>=ze)),_e>>>=7,Te-=7}if(q.have+de>q.nlen+q.ndist){J.msg="invalid bit length repeat",q.mode=30;break}for(;de--;)q.lens[q.have++]=$}}if(30===q.mode)break;if(0===q.lens[256]){J.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,se=h(1,q.lens,0,q.nlen,q.lencode,0,q.work,K={bits:q.lenbits}),q.lenbits=K.bits,se){J.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,se=h(2,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,K={bits:q.distbits}),q.distbits=K.bits,se){J.msg="invalid distances set",q.mode=30;break}if(q.mode=20,6===le)break e;case 20:q.mode=21;case 21:if(6<=fe&&258<=Ee){J.next_out=pe,J.avail_out=Ee,J.next_in=ce,J.avail_in=fe,q.hold=_e,q.bits=Te,k(J,be),pe=J.next_out,he=J.output,Ee=J.avail_out,ce=J.next_in,ue=J.input,fe=J.avail_in,_e=q.hold,Te=q.bits,12===q.mode&&(q.back=-1);break}for(q.back=0;He=(X=q.lencode[_e&(1<<q.lenbits)-1])>>>16&255,Ne=65535&X,!((ze=X>>>24)<=Te);){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(He&&0==(240&He)){for(ye=ze,ee=He,ie=Ne;He=(X=q.lencode[ie+((_e&(1<<ye+ee)-1)>>ye)])>>>16&255,Ne=65535&X,!(ye+(ze=X>>>24)<=Te);){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}_e>>>=ye,Te-=ye,q.back+=ye}if(_e>>>=ze,Te-=ze,q.back+=ze,q.length=Ne,0===He){q.mode=26;break}if(32&He){q.back=-1,q.mode=12;break}if(64&He){J.msg="invalid literal/length code",q.mode=30;break}q.extra=15&He,q.mode=22;case 22:if(q.extra){for(te=q.extra;Te<te;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}q.length+=_e&(1<<q.extra)-1,_e>>>=q.extra,Te-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;He=(X=q.distcode[_e&(1<<q.distbits)-1])>>>16&255,Ne=65535&X,!((ze=X>>>24)<=Te);){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(0==(240&He)){for(ye=ze,ee=He,ie=Ne;He=(X=q.distcode[ie+((_e&(1<<ye+ee)-1)>>ye)])>>>16&255,Ne=65535&X,!(ye+(ze=X>>>24)<=Te);){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}_e>>>=ye,Te-=ye,q.back+=ye}if(_e>>>=ze,Te-=ze,q.back+=ze,64&He){J.msg="invalid distance code",q.mode=30;break}q.offset=Ne,q.extra=15&He,q.mode=24;case 24:if(q.extra){for(te=q.extra;Te<te;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}q.offset+=_e&(1<<q.extra)-1,_e>>>=q.extra,Te-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){J.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(0===Ee)break e;if(q.offset>(de=be-Ee)){if((de=q.offset-de)>q.whave&&q.sane){J.msg="invalid distance too far back",q.mode=30;break}we=de>q.wnext?q.wsize-(de-=q.wnext):q.wnext-de,de>q.length&&(de=q.length),Ye=q.window}else Ye=he,we=pe-q.offset,de=q.length;for(Ee<de&&(de=Ee),Ee-=de,q.length-=de;he[pe++]=Ye[we++],--de;);0===q.length&&(q.mode=21);break;case 26:if(0===Ee)break e;he[pe++]=q.length,Ee--,q.mode=21;break;case 27:if(q.wrap){for(;Te<32;){if(0===fe)break e;fe--,_e|=ue[ce++]<<Te,Te+=8}if(J.total_out+=be-=Ee,q.total+=be,be&&(J.adler=q.check=q.flags?S(q.check,he,be,pe-be):b(q.check,he,be,pe-be)),be=Ee,(q.flags?_e:_(_e))!==q.check){J.msg="incorrect data check",q.mode=30;break}Te=_e=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;Te<32;){if(0===fe)break e;fe--,_e+=ue[ce++]<<Te,Te+=8}if(_e!==(4294967295&q.total)){J.msg="incorrect length check",q.mode=30;break}Te=_e=0}q.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;default:return w}return J.next_out=pe,J.avail_out=Ee,J.next_in=ce,J.avail_in=fe,q.hold=_e,q.bits=Te,(q.wsize||be!==J.avail_out&&q.mode<30&&(q.mode<27||4!==le))&&oe(J,J.output,J.next_out,be-J.avail_out)?(q.mode=31,-4):(be-=J.avail_out,J.total_in+=De-=J.avail_in,J.total_out+=be,q.total+=be,q.wrap&&be&&(J.adler=q.check=q.flags?S(q.check,he,be,J.next_out-be):b(q.check,he,be,J.next_out-be)),J.data_type=q.bits+(q.last?64:0)+(12===q.mode?128:0)+(20===q.mode||15===q.mode?256:0),(0==De&&0===be||4===le)&&0===se&&(se=-5),se)},B.inflateEnd=function(J){if(!J||!J.state)return w;var le=J.state;return le.window&&(le.window=null),J.state=null,0},B.inflateGetHeader=function(J,le){var q;return J&&J.state?0==(2&(q=J.state).wrap)?w:((q.head=le).done=!1,0):w},B.inflateSetDictionary=function(J,le){var q,ue=le.length;return J&&J.state?0!==(q=J.state).wrap&&11!==q.mode?w:11===q.mode&&b(1,le,ue,0)!==q.check?-3:oe(J,le,ue,ue)?(q.mode=31,-4):(q.havedict=1,0):w},B.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(G,F,B){"use strict";var C=G("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],S=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];F.exports=function(f,u,p,w,g,x,m,_){var T,D,L,M,N,I,P,V,j,oe=_.bits,J=0,le=0,q=0,ue=0,he=0,ce=0,pe=0,fe=0,Ee=0,_e=0,Te=null,De=0,be=new C.Buf16(16),de=new C.Buf16(16),we=null,Ye=0;for(J=0;J<=15;J++)be[J]=0;for(le=0;le<w;le++)be[u[p+le]]++;for(he=oe,ue=15;1<=ue&&0===be[ue];ue--);if(ue<he&&(he=ue),0===ue)return g[x++]=20971520,g[x++]=20971520,_.bits=1,0;for(q=1;q<ue&&0===be[q];q++);for(he<q&&(he=q),J=fe=1;J<=15;J++)if(fe<<=1,(fe-=be[J])<0)return-1;if(0<fe&&(0===f||1!==ue))return-1;for(de[1]=0,J=1;J<15;J++)de[J+1]=de[J]+be[J];for(le=0;le<w;le++)0!==u[p+le]&&(m[de[u[p+le]]++]=le);if(I=0===f?(Te=we=m,19):1===f?(Te=b,De-=257,we=S,Ye-=257,256):(Te=k,we=h,-1),J=q,N=x,pe=le=_e=0,L=-1,M=(Ee=1<<(ce=he))-1,1===f&&852<Ee||2===f&&592<Ee)return 1;for(;;){for(P=J-pe,j=m[le]<I?(V=0,m[le]):m[le]>I?(V=we[Ye+m[le]],Te[De+m[le]]):(V=96,0),T=1<<J-pe,q=D=1<<ce;g[N+(_e>>pe)+(D-=T)]=P<<24|V<<16|j|0,0!==D;);for(T=1<<J-1;_e&T;)T>>=1;if(0!==T?(_e&=T-1,_e+=T):_e=0,le++,0==--be[J]){if(J===ue)break;J=u[p+m[le]]}if(he<J&&(_e&M)!==L){for(0===pe&&(pe=he),N+=q,fe=1<<(ce=J-pe);ce+pe<ue&&!((fe-=be[ce+pe])<=0);)ce++,fe<<=1;if(Ee+=1<<ce,1===f&&852<Ee||2===f&&592<Ee)return 1;g[L=_e&M]=he<<24|ce<<16|N-x|0}}return 0!==_e&&(g[N+_e]=J-pe<<24|64<<16|0),_.bits=he,0}},{"../utils/common":41}],51:[function(G,F,B){"use strict";F.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(G,F,B){"use strict";var C=G("../utils/common");function k(X){for(var me=X.length;0<=--me;)X[me]=0}var u=256,p=286,w=30,m=15,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=new Array(576);k(oe);var J=new Array(60);k(J);var le=new Array(512);k(le);var q=new Array(256);k(q);var ue=new Array(29);k(ue);var he,ce,pe,fe=new Array(w);function Ee(X,me,R,H,Z){this.static_tree=X,this.extra_bits=me,this.extra_base=R,this.elems=H,this.max_length=Z,this.has_stree=X&&X.length}function _e(X,me){this.dyn_tree=X,this.max_code=0,this.stat_desc=me}function Te(X){return X<256?le[X]:le[256+(X>>>7)]}function De(X,me){X.pending_buf[X.pending++]=255&me,X.pending_buf[X.pending++]=me>>>8&255}function be(X,me,R){X.bi_valid>16-R?(X.bi_buf|=me<<X.bi_valid&65535,De(X,X.bi_buf),X.bi_buf=me>>16-X.bi_valid,X.bi_valid+=R-16):(X.bi_buf|=me<<X.bi_valid&65535,X.bi_valid+=R)}function de(X,me,R){be(X,R[2*me],R[2*me+1])}function we(X,me){for(var R=0;R|=1&X,X>>>=1,R<<=1,0<--me;);return R>>>1}function Ye(X,me,R){var H,Z,Ae=new Array(16),Ke=0;for(H=1;H<=m;H++)Ae[H]=Ke=Ke+R[H-1]<<1;for(Z=0;Z<=me;Z++){var Re=X[2*Z+1];0!==Re&&(X[2*Z]=we(Ae[Re]++,Re))}}function ze(X){var me;for(me=0;me<p;me++)X.dyn_ltree[2*me]=0;for(me=0;me<w;me++)X.dyn_dtree[2*me]=0;for(me=0;me<19;me++)X.bl_tree[2*me]=0;X.dyn_ltree[512]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function He(X){8<X.bi_valid?De(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function Ne(X,me,R,H){var Z=2*me,Ae=2*R;return X[Z]<X[Ae]||X[Z]===X[Ae]&&H[me]<=H[R]}function ye(X,me,R){for(var H=X.heap[R],Z=R<<1;Z<=X.heap_len&&(Z<X.heap_len&&Ne(me,X.heap[Z+1],X.heap[Z],X.depth)&&Z++,!Ne(me,H,X.heap[Z],X.depth));)X.heap[R]=X.heap[Z],R=Z,Z<<=1;X.heap[R]=H}function ee(X,me,R){var H,Z,Ae,Ke,Re=0;if(0!==X.last_lit)for(;H=X.pending_buf[X.d_buf+2*Re]<<8|X.pending_buf[X.d_buf+2*Re+1],Z=X.pending_buf[X.l_buf+Re],Re++,0===H?de(X,Z,me):(de(X,(Ae=q[Z])+u+1,me),0!==(Ke=I[Ae])&&be(X,Z-=ue[Ae],Ke),de(X,Ae=Te(--H),R),0!==(Ke=P[Ae])&&be(X,H-=fe[Ae],Ke)),Re<X.last_lit;);de(X,256,me)}function ie(X,me){var R,H,Z,Ae=me.dyn_tree,Ke=me.stat_desc.static_tree,Re=me.stat_desc.has_stree,ht=me.stat_desc.elems,Et=-1;for(X.heap_len=0,X.heap_max=573,R=0;R<ht;R++)0!==Ae[2*R]?(X.heap[++X.heap_len]=Et=R,X.depth[R]=0):Ae[2*R+1]=0;for(;X.heap_len<2;)Ae[2*(Z=X.heap[++X.heap_len]=Et<2?++Et:0)]=1,X.depth[Z]=0,X.opt_len--,Re&&(X.static_len-=Ke[2*Z+1]);for(me.max_code=Et,R=X.heap_len>>1;1<=R;R--)ye(X,Ae,R);for(Z=ht;R=X.heap[1],X.heap[1]=X.heap[X.heap_len--],ye(X,Ae,1),H=X.heap[1],X.heap[--X.heap_max]=R,X.heap[--X.heap_max]=H,Ae[2*Z]=Ae[2*R]+Ae[2*H],X.depth[Z]=(X.depth[R]>=X.depth[H]?X.depth[R]:X.depth[H])+1,Ae[2*R+1]=Ae[2*H+1]=Z,X.heap[1]=Z++,ye(X,Ae,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],function(Ft,ln){var Ie,bn,Er,xt,ni,zi,Fr=ln.dyn_tree,Kn=ln.max_code,ua=ln.stat_desc.static_tree,Ss=ln.stat_desc.has_stree,ri=ln.stat_desc.extra_bits,Rr=ln.stat_desc.extra_base,Ko=ln.stat_desc.max_length,$r=0;for(xt=0;xt<=m;xt++)Ft.bl_count[xt]=0;for(Fr[2*Ft.heap[Ft.heap_max]+1]=0,Ie=Ft.heap_max+1;Ie<573;Ie++)Ko<(xt=Fr[2*Fr[2*(bn=Ft.heap[Ie])+1]+1]+1)&&(xt=Ko,$r++),Fr[2*bn+1]=xt,Kn<bn||(Ft.bl_count[xt]++,ni=0,Rr<=bn&&(ni=ri[bn-Rr]),Ft.opt_len+=(zi=Fr[2*bn])*(xt+ni),Ss&&(Ft.static_len+=zi*(ua[2*bn+1]+ni)));if(0!==$r){do{for(xt=Ko-1;0===Ft.bl_count[xt];)xt--;Ft.bl_count[xt]--,Ft.bl_count[xt+1]+=2,Ft.bl_count[Ko]--,$r-=2}while(0<$r);for(xt=Ko;0!==xt;xt--)for(bn=Ft.bl_count[xt];0!==bn;)Kn<(Er=Ft.heap[--Ie])||(Fr[2*Er+1]!==xt&&(Ft.opt_len+=(xt-Fr[2*Er+1])*Fr[2*Er],Fr[2*Er+1]=xt),bn--)}}(X,me),Ye(Ae,Et,X.bl_count)}function $(X,me,R){var H,Z,Ae=-1,Ke=me[1],Re=0,ht=7,Et=4;for(0===Ke&&(ht=138,Et=3),me[2*(R+1)+1]=65535,H=0;H<=R;H++)Z=Ke,Ke=me[2*(H+1)+1],++Re<ht&&Z===Ke||(Re<Et?X.bl_tree[2*Z]+=Re:0!==Z?(Z!==Ae&&X.bl_tree[2*Z]++,X.bl_tree[32]++):Re<=10?X.bl_tree[34]++:X.bl_tree[36]++,Ae=Z,Et=(Re=0)===Ke?(ht=138,3):Z===Ke?(ht=6,3):(ht=7,4))}function se(X,me,R){var H,Z,Ae=-1,Ke=me[1],Re=0,ht=7,Et=4;for(0===Ke&&(ht=138,Et=3),H=0;H<=R;H++)if(Z=Ke,Ke=me[2*(H+1)+1],!(++Re<ht&&Z===Ke)){if(Re<Et)for(;de(X,Z,X.bl_tree),0!=--Re;);else 0!==Z?(Z!==Ae&&(de(X,Z,X.bl_tree),Re--),de(X,16,X.bl_tree),be(X,Re-3,2)):Re<=10?(de(X,17,X.bl_tree),be(X,Re-3,3)):(de(X,18,X.bl_tree),be(X,Re-11,7));Ae=Z,Et=(Re=0)===Ke?(ht=138,3):Z===Ke?(ht=6,3):(ht=7,4)}}k(fe);var K=!1;function te(X,me,R,H){var Z,Ae,Ke;be(X,0+(H?1:0),3),Ae=me,Ke=R,He(Z=X),De(Z,Ke),De(Z,~Ke),C.arraySet(Z.pending_buf,Z.window,Ae,Ke,Z.pending),Z.pending+=Ke}B._tr_init=function(X){K||(function(){var me,R,H,Z,Ae,Ke=new Array(16);for(Z=H=0;Z<28;Z++)for(ue[Z]=H,me=0;me<1<<I[Z];me++)q[H++]=Z;for(q[H-1]=Z,Z=Ae=0;Z<16;Z++)for(fe[Z]=Ae,me=0;me<1<<P[Z];me++)le[Ae++]=Z;for(Ae>>=7;Z<w;Z++)for(fe[Z]=Ae<<7,me=0;me<1<<P[Z]-7;me++)le[256+Ae++]=Z;for(R=0;R<=m;R++)Ke[R]=0;for(me=0;me<=143;)oe[2*me+1]=8,me++,Ke[8]++;for(;me<=255;)oe[2*me+1]=9,me++,Ke[9]++;for(;me<=279;)oe[2*me+1]=7,me++,Ke[7]++;for(;me<=287;)oe[2*me+1]=8,me++,Ke[8]++;for(Ye(oe,287,Ke),me=0;me<w;me++)J[2*me+1]=5,J[2*me]=we(me,5);he=new Ee(oe,I,257,p,m),ce=new Ee(J,P,0,w,m),pe=new Ee(new Array(0),V,0,19,7)}(),K=!0),X.l_desc=new _e(X.dyn_ltree,he),X.d_desc=new _e(X.dyn_dtree,ce),X.bl_desc=new _e(X.bl_tree,pe),X.bi_buf=0,X.bi_valid=0,ze(X)},B._tr_stored_block=te,B._tr_flush_block=function(X,me,R,H){var Z,Ae,Ke=0;0<X.level?(2===X.strm.data_type&&(X.strm.data_type=function(Re){var ht,Et=4093624447;for(ht=0;ht<=31;ht++,Et>>>=1)if(1&Et&&0!==Re.dyn_ltree[2*ht])return 0;if(0!==Re.dyn_ltree[18]||0!==Re.dyn_ltree[20]||0!==Re.dyn_ltree[26])return 1;for(ht=32;ht<u;ht++)if(0!==Re.dyn_ltree[2*ht])return 1;return 0}(X)),ie(X,X.l_desc),ie(X,X.d_desc),Ke=function(Re){var ht;for($(Re,Re.dyn_ltree,Re.l_desc.max_code),$(Re,Re.dyn_dtree,Re.d_desc.max_code),ie(Re,Re.bl_desc),ht=18;3<=ht&&0===Re.bl_tree[2*j[ht]+1];ht--);return Re.opt_len+=3*(ht+1)+5+5+4,ht}(X),(Ae=X.static_len+3+7>>>3)<=(Z=X.opt_len+3+7>>>3)&&(Z=Ae)):Z=Ae=R+5,R+4<=Z&&-1!==me?te(X,me,R,H):4===X.strategy||Ae===Z?(be(X,2+(H?1:0),3),ee(X,oe,J)):(be(X,4+(H?1:0),3),function(Re,ht,Et,Ft){var ln;for(be(Re,ht-257,5),be(Re,Et-1,5),be(Re,Ft-4,4),ln=0;ln<Ft;ln++)be(Re,Re.bl_tree[2*j[ln]+1],3);se(Re,Re.dyn_ltree,ht-1),se(Re,Re.dyn_dtree,Et-1)}(X,X.l_desc.max_code+1,X.d_desc.max_code+1,Ke+1),ee(X,X.dyn_ltree,X.dyn_dtree)),ze(X),H&&He(X)},B._tr_tally=function(X,me,R){return X.pending_buf[X.d_buf+2*X.last_lit]=me>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&me,X.pending_buf[X.l_buf+X.last_lit]=255&R,X.last_lit++,0===me?X.dyn_ltree[2*R]++:(X.matches++,me--,X.dyn_ltree[2*(q[R]+u+1)]++,X.dyn_dtree[2*Te(me)]++),X.last_lit===X.lit_bufsize-1},B._tr_align=function(X){var me;be(X,2,3),de(X,256,oe),16===(me=X).bi_valid?(De(me,me.bi_buf),me.bi_buf=0,me.bi_valid=0):8<=me.bi_valid&&(me.pending_buf[me.pending++]=255&me.bi_buf,me.bi_buf>>=8,me.bi_valid-=8)}},{"../utils/common":41}],53:[function(G,F,B){"use strict";F.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(G,F,B){(function(C){!function(b,S){"use strict";if(!b.setImmediate){var k,h,f,u,p=1,w={},g=!1,x=b.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(b);m=m&&m.setTimeout?m:b,k="[object process]"==={}.toString.call(b.process)?function(L){process.nextTick(function(){T(L)})}:function(){if(b.postMessage&&!b.importScripts){var L=!0,M=b.onmessage;return b.onmessage=function(){L=!1},b.postMessage("","*"),b.onmessage=M,L}}()?(u="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",D,!1):b.attachEvent("onmessage",D),function(L){b.postMessage(u+L,"*")}):b.MessageChannel?((f=new MessageChannel).port1.onmessage=function(L){T(L.data)},function(L){f.port2.postMessage(L)}):x&&"onreadystatechange"in x.createElement("script")?(h=x.documentElement,function(L){var M=x.createElement("script");M.onreadystatechange=function(){T(L),M.onreadystatechange=null,h.removeChild(M),M=null},h.appendChild(M)}):function(L){setTimeout(T,0,L)},m.setImmediate=function(L){"function"!=typeof L&&(L=new Function(""+L));for(var M=new Array(arguments.length-1),N=0;N<M.length;N++)M[N]=arguments[N+1];return w[p]={callback:L,args:M},k(p),p++},m.clearImmediate=_}function _(L){delete w[L]}function T(L){if(g)setTimeout(T,0,L);else{var M=w[L];if(M){g=!0;try{!function(N){var I=N.callback,P=N.args;switch(P.length){case 0:I();break;case 1:I(P[0]);break;case 2:I(P[0],P[1]);break;case 3:I(P[0],P[1],P[2]);break;default:I.apply(undefined,P)}}(M)}finally{_(L),g=!1}}}}function D(L){L.source===b&&"string"==typeof L.data&&0===L.data.indexOf(u)&&T(+L.data.slice(u.length))}}("undefined"==typeof self?void 0===C?this:C:self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},7073:(Ge,G,F)=>{"use strict";const B=F(7245),C=Symbol("max"),b=Symbol("length"),S=Symbol("lengthCalculator"),k=Symbol("allowStale"),h=Symbol("maxAge"),f=Symbol("dispose"),u=Symbol("noDisposeOnSet"),p=Symbol("lruList"),w=Symbol("cache"),g=Symbol("updateAgeOnGet"),x=()=>1,_=(I,P,V)=>{const j=I[w].get(P);if(j){const oe=j.value;if(T(I,oe)){if(L(I,j),!I[k])return}else V&&(I[g]&&(j.value.now=Date.now()),I[p].unshiftNode(j));return oe.value}},T=(I,P)=>{if(!P||!P.maxAge&&!I[h])return!1;const V=Date.now()-P.now;return P.maxAge?V>P.maxAge:I[h]&&V>I[h]},D=I=>{if(I[b]>I[C])for(let P=I[p].tail;I[b]>I[C]&&null!==P;){const V=P.prev;L(I,P),P=V}},L=(I,P)=>{if(P){const V=P.value;I[f]&&I[f](V.key,V.value),I[b]-=V.length,I[w].delete(V.key),I[p].removeNode(P)}};class M{constructor(P,V,j,oe,J){this.key=P,this.value=V,this.length=j,this.now=oe,this.maxAge=J||0}}const N=(I,P,V,j)=>{let oe=V.value;T(I,oe)&&(L(I,V),I[k]||(oe=void 0)),oe&&P.call(j,oe.value,oe.key,I)};Ge.exports=class m{constructor(P){if("number"==typeof P&&(P={max:P}),P||(P={}),P.max&&("number"!=typeof P.max||P.max<0))throw new TypeError("max must be a non-negative number");this[C]=P.max||1/0;const j=P.length||x;if(this[S]="function"!=typeof j?x:j,this[k]=P.stale||!1,P.maxAge&&"number"!=typeof P.maxAge)throw new TypeError("maxAge must be a number");this[h]=P.maxAge||0,this[f]=P.dispose,this[u]=P.noDisposeOnSet||!1,this[g]=P.updateAgeOnGet||!1,this.reset()}set max(P){if("number"!=typeof P||P<0)throw new TypeError("max must be a non-negative number");this[C]=P||1/0,D(this)}get max(){return this[C]}set allowStale(P){this[k]=!!P}get allowStale(){return this[k]}set maxAge(P){if("number"!=typeof P)throw new TypeError("maxAge must be a non-negative number");this[h]=P,D(this)}get maxAge(){return this[h]}set lengthCalculator(P){"function"!=typeof P&&(P=x),P!==this[S]&&(this[S]=P,this[b]=0,this[p].forEach(V=>{V.length=this[S](V.value,V.key),this[b]+=V.length})),D(this)}get lengthCalculator(){return this[S]}get length(){return this[b]}get itemCount(){return this[p].length}rforEach(P,V){V=V||this;for(let j=this[p].tail;null!==j;){const oe=j.prev;N(this,P,j,V),j=oe}}forEach(P,V){V=V||this;for(let j=this[p].head;null!==j;){const oe=j.next;N(this,P,j,V),j=oe}}keys(){return this[p].toArray().map(P=>P.key)}values(){return this[p].toArray().map(P=>P.value)}reset(){this[f]&&this[p]&&this[p].length&&this[p].forEach(P=>this[f](P.key,P.value)),this[w]=new Map,this[p]=new B,this[b]=0}dump(){return this[p].map(P=>!T(this,P)&&{k:P.key,v:P.value,e:P.now+(P.maxAge||0)}).toArray().filter(P=>P)}dumpLru(){return this[p]}set(P,V,j){if((j=j||this[h])&&"number"!=typeof j)throw new TypeError("maxAge must be a number");const oe=j?Date.now():0,J=this[S](V,P);if(this[w].has(P)){if(J>this[C])return L(this,this[w].get(P)),!1;const ue=this[w].get(P).value;return this[f]&&(this[u]||this[f](P,ue.value)),ue.now=oe,ue.maxAge=j,ue.value=V,this[b]+=J-ue.length,ue.length=J,this.get(P),D(this),!0}const le=new M(P,V,J,oe,j);return le.length>this[C]?(this[f]&&this[f](P,V),!1):(this[b]+=le.length,this[p].unshift(le),this[w].set(P,this[p].head),D(this),!0)}has(P){if(!this[w].has(P))return!1;const V=this[w].get(P).value;return!T(this,V)}get(P){return _(this,P,!0)}peek(P){return _(this,P,!1)}pop(){const P=this[p].tail;return P?(L(this,P),P.value):null}del(P){L(this,this[w].get(P))}load(P){this.reset();const V=Date.now();for(let j=P.length-1;j>=0;j--){const oe=P[j],J=oe.e||0;if(0===J)this.set(oe.k,oe.v);else{const le=J-V;le>0&&this.set(oe.k,oe.v,le)}}}prune(){this[w].forEach((P,V)=>_(this,V,!1))}}},2364:Ge=>{"use strict";function G(){this._types=Object.create(null),this._extensions=Object.create(null);for(let F=0;F<arguments.length;F++)this.define(arguments[F]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}G.prototype.define=function(F,B){for(let C in F){let b=F[C].map(function(S){return S.toLowerCase()});C=C.toLowerCase();for(let S=0;S<b.length;S++){const k=b[S];if("*"!==k[0]){if(!B&&k in this._types)throw new Error('Attempt to change mapping for "'+k+'" extension from "'+this._types[k]+'" to "'+C+'". Pass `force=true` to allow this, otherwise remove "'+k+'" from the list of extensions for "'+C+'".');this._types[k]=C}}if(B||!this._extensions[C]){const S=b[0];this._extensions[C]="*"!==S[0]?S:S.substr(1)}}},G.prototype.getType=function(F){let B=(F=String(F)).replace(/^.*[/\\]/,"").toLowerCase(),C=B.replace(/^.*\./,"").toLowerCase();return(C.length<B.length-1||!(B.length<F.length))&&this._types[C]||null},G.prototype.getExtension=function(F){return(F=/^\s*([^;\s]*)/.test(F)&&RegExp.$1)&&this._extensions[F.toLowerCase()]||null},Ge.exports=G},9365:(Ge,G,F)=>{"use strict";let B=F(2364);Ge.exports=new B(F(2061),F(758))},758:Ge=>{Ge.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},2061:Ge=>{Ge.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},6643:Ge=>{let G;Ge.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):F=>(G||(G=Promise.resolve())).then(F).catch(B=>setTimeout(()=>{throw B},0))},4308:(Ge,G,F)=>{Ge.exports=F(1358)},4512:Ge=>{"use strict";Ge.exports=class BK{constructor(F,B=new Map,C=0){this.prefix=F,this._existing=B,this.counter=C}clone(){const{prefix:F,_existing:B,counter:C}=this;return new BK(F,new Map(B),C)}getId(F){const B=F&&this._existing.get(F);if(B)return B;const C=this.prefix+this.counter;return this.counter++,F&&this._existing.set(F,C),C}hasId(F){return this._existing.has(F)}getOldIds(){return[...this._existing.keys()]}}},7510:(Ge,G,F)=>{"use strict";var B=F(8926).default;F(6563);const C=self.crypto||self.msCrypto;Ge.exports=class{constructor(S){if(!C||!C.subtle)throw new Error("crypto.subtle not found.");if("sha256"===S)this.algorithm={name:"SHA-256"};else{if("sha1"!==S)throw new Error(`Unsupport algorithm "${S}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(S){this._content+=S}digest(){var S=this;return B(function*(){const k=(new TextEncoder).encode(S._content),h=new Uint8Array(yield C.subtle.digest(S.algorithm,k));let f="";for(let u=0;u<h.length;++u)f+=h[u].toString(16).padStart(2,"0");return f})()}}},5090:Ge=>{"use strict";const B="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",C="http://www.w3.org/2001/XMLSchema#string",b="NamedNode",S="BlankNode",k="Literal",h="DefaultGraph",f={};function u(m,_){return m.subject.termType===_.subject.termType&&m.object.termType===_.object.termType&&m.subject.value===_.subject.value&&m.predicate.value===_.predicate.value&&m.object.value===_.object.value&&(m.object.termType!==k||m.object.datatype.termType===_.object.datatype.termType&&m.object.language===_.object.language&&m.object.datatype.value===_.object.datatype.value)}f.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,f.empty=new RegExp("^[ \\t]*$"),f.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),Ge.exports=class qR{static parse(_){const T=[],D={},L=_.split(f.eoln);let M=0;for(const N of L){if(M++,f.empty.test(N))continue;const I=N.match(f.quad);if(null===I)throw new Error("N-Quads parse error on line "+M+".");const P={subject:null,predicate:null,object:null,graph:null};if(P.subject=void 0!==I[1]?{termType:b,value:I[1]}:{termType:S,value:I[2]},P.predicate={termType:b,value:I[3]},void 0!==I[4]?P.object={termType:b,value:I[4]}:void 0!==I[5]?P.object={termType:S,value:I[5]}:(P.object={termType:k,value:void 0,datatype:{termType:b}},void 0!==I[7]?P.object.datatype.value=I[7]:void 0!==I[8]?(P.object.datatype.value=B,P.object.language=I[8]):P.object.datatype.value=C,P.object.value=I[6].replace(g,function(_,T,D,L){if(T)switch(T){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(D)return String.fromCharCode(parseInt(D,16));if(L)throw new Error("Unsupported U escape")})),P.graph=void 0!==I[9]?{termType:b,value:I[9]}:void 0!==I[10]?{termType:S,value:I[10]}:{termType:h,value:""},P.graph.value in D){let V=!0;const j=D[P.graph.value];for(const oe of j)if(u(oe,P)){V=!1;break}V&&(j.push(P),T.push(P))}else D[P.graph.value]=[P],T.push(P)}return T}static serialize(_){Array.isArray(_)||(_=qR.legacyDatasetToQuads(_));const T=[];for(const D of _)T.push(qR.serializeQuad(D));return T.sort().join("")}static serializeQuad(_){const T=_.subject,L=_.object,M=_.graph;let N="";return N+=T.termType===b?`<${T.value}>`:`${T.value}`,N+=` <${_.predicate.value}> `,L.termType===b?N+=`<${L.value}>`:L.termType===S?N+=L.value:(N+=`"${function w(m){return m.replace(p,function(_){switch(_){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(L.value)}"`,L.datatype.value===B?L.language&&(N+=`@${L.language}`):L.datatype.value!==C&&(N+=`^^<${L.datatype.value}>`)),M.termType===b?N+=` <${M.value}>`:M.termType===S&&(N+=` ${M.value}`),N+=" .\n",N}static legacyDatasetToQuads(_){const T=[],D={"blank node":S,IRI:b,literal:k};for(const L in _)_[L].forEach(N=>{const I={};for(const P in N){const V=N[P],j={termType:D[V.type],value:V.value};j.termType===k&&(j.datatype={termType:b},"datatype"in V&&(j.datatype.value=V.datatype),"language"in V?("datatype"in V||(j.datatype.value=B),j.language=V.language):"datatype"in V||(j.datatype.value=C)),I[P]=j}I.graph="@default"===L?{termType:h,value:""}:{termType:L.startsWith("_:")?S:b,value:L},T.push(I)});return T}};const p=/["\\\n\r]/g,g=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},5067:Ge=>{"use strict";Ge.exports=class{constructor(F){this.current=F.sort(),this.done=!1,this.dir=new Map;for(let B=0;B<F.length;++B)this.dir.set(F[B],!0)}hasNext(){return!this.done}next(){const{current:F,dir:B}=this,C=F.slice();let b=null,S=0;const k=F.length;for(let h=0;h<k;++h){const f=F[h],u=B.get(f);(null===b||f>b)&&(u&&h>0&&f>F[h-1]||!u&&h<k-1&&f>F[h+1])&&(b=f,S=h)}if(null===b)this.done=!0;else{const h=B.get(b)?S-1:S+1;F[S]=F[h],F[h]=b;for(const f of F)f>b&&B.set(f,!B.get(f))}return C}}},4103:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(4512),b=F(7510),S=F(5067),k=F(5090);function h(f,u){return f.hash<u.hash?-1:f.hash>u.hash?1:0}Ge.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new C("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(u){var p=this;return B(function*(){p.quads=u;for(const D of u)p._addBlankNodeQuadInfo({quad:D,component:D.subject}),p._addBlankNodeQuadInfo({quad:D,component:D.object}),p._addBlankNodeQuadInfo({quad:D,component:D.graph});const w=new Map,g=[...p.blankNodeInfo.keys()];let x=0;for(const D of g)++x%100==0&&(yield p._yield()),yield p._hashAndTrackBlankNode({id:D,hashToBlankNodes:w});const m=[...w.keys()].sort(),_=[];for(const D of m){const L=w.get(D);L.length>1?_.push(L):p.canonicalIssuer.getId(L[0])}for(const D of _){const L=[];for(const M of D){if(p.canonicalIssuer.hasId(M))continue;const N=new C("_:b");N.getId(M);const I=yield p.hashNDegreeQuads(M,N);L.push(I)}L.sort(h);for(const M of L){const N=M.issuer.getOldIds();for(const I of N)p.canonicalIssuer.getId(I)}}const T=[];for(const D of p.quads){const L=$t({},D);L.subject=p._useCanonicalId({component:L.subject}),L.object=p._useCanonicalId({component:L.object}),L.graph=p._useCanonicalId({component:L.graph}),T.push(k.serializeQuad(L))}return T.sort(),T.join("")})()}hashFirstDegreeQuads(u){var p=this;return B(function*(){const w=[],g=p.blankNodeInfo.get(u),x=g.quads;for(const _ of x){const T={subject:null,predicate:_.predicate,object:null,graph:null};T.subject=p.modifyFirstDegreeComponent(u,_.subject,"subject"),T.object=p.modifyFirstDegreeComponent(u,_.object,"object"),T.graph=p.modifyFirstDegreeComponent(u,_.graph,"graph"),w.push(k.serializeQuad(T))}w.sort();const m=new b(p.hashAlgorithm);for(const _ of w)m.update(_);return g.hash=yield m.digest(),g.hash})()}hashRelatedBlankNode(u,p,w,g){var x=this;return B(function*(){let m;m=x.canonicalIssuer.hasId(u)?x.canonicalIssuer.getId(u):w.hasId(u)?w.getId(u):x.blankNodeInfo.get(u).hash;const _=new b(x.hashAlgorithm);return _.update(g),"g"!==g&&_.update(x.getRelatedPredicate(p)),_.update(m),_.digest()})()}hashNDegreeQuads(u,p){var w=this;return B(function*(){const g=new b(w.hashAlgorithm),x=yield w.createHashToRelated(u,p),m=[...x.keys()].sort();for(const _ of m){g.update(_);let D,T="";const L=new S(x.get(_));let M=0;for(;L.hasNext();){const N=L.next();++M%3==0&&(yield w._yield());let I=p.clone(),P="";const V=[];let j=!1;for(const oe of N)if(w.canonicalIssuer.hasId(oe)?P+=w.canonicalIssuer.getId(oe):(I.hasId(oe)||V.push(oe),P+=I.getId(oe)),0!==T.length&&P>T){j=!0;break}if(!j){for(const oe of V){const J=yield w.hashNDegreeQuads(oe,I);if(P+=I.getId(oe),P+=`<${J.hash}>`,I=J.issuer,0!==T.length&&P>T){j=!0;break}}j||(0===T.length||P<T)&&(T=P,D=I)}}g.update(T),p=D}return{hash:yield g.digest(),issuer:p}})()}modifyFirstDegreeComponent(u,p){return"BlankNode"!==p.termType?p:{termType:"BlankNode",value:p.value===u?"_:a":"_:z"}}getRelatedPredicate(u){return`<${u.predicate.value}>`}createHashToRelated(u,p){var w=this;return B(function*(){const g=new Map,x=w.blankNodeInfo.get(u).quads;let m=0;for(const _ of x)++m%100==0&&(yield w._yield()),yield Promise.all([w._addRelatedBlankNodeHash({quad:_,component:_.subject,position:"s",id:u,issuer:p,hashToRelated:g}),w._addRelatedBlankNodeHash({quad:_,component:_.object,position:"o",id:u,issuer:p,hashToRelated:g}),w._addRelatedBlankNodeHash({quad:_,component:_.graph,position:"g",id:u,issuer:p,hashToRelated:g})]);return g})()}_hashAndTrackBlankNode({id:u,hashToBlankNodes:p}){var w=this;return B(function*(){const g=yield w.hashFirstDegreeQuads(u),x=p.get(g);x?x.push(u):p.set(g,[u])})()}_addBlankNodeQuadInfo({quad:u,component:p}){if("BlankNode"!==p.termType)return;const w=p.value,g=this.blankNodeInfo.get(w);g?g.quads.add(u):this.blankNodeInfo.set(w,{quads:new Set([u]),hash:null})}_addRelatedBlankNodeHash({quad:u,component:p,position:w,id:g,issuer:x,hashToRelated:m}){var _=this;return B(function*(){if("BlankNode"!==p.termType||p.value===g)return;const T=p.value,D=yield _.hashRelatedBlankNode(T,u,x,w),L=m.get(D);L?L.push(T):m.set(D,[T])})()}_useCanonicalId({component:u}){return"BlankNode"!==u.termType||u.value.startsWith(this.canonicalIssuer.prefix)?u:{termType:"BlankNode",value:this.canonicalIssuer.getId(u.value)}}_yield(){return B(function*(){return new Promise(u=>setImmediate(u))})()}}},526:(Ge,G,F)=>{"use strict";const B=F(4512),C=F(7510),b=F(5067),S=F(5090);function k(h,f){return h.hash<f.hash?-1:h.hash>f.hash?1:0}Ge.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new B("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(f){this.quads=f;for(const m of f)this._addBlankNodeQuadInfo({quad:m,component:m.subject}),this._addBlankNodeQuadInfo({quad:m,component:m.object}),this._addBlankNodeQuadInfo({quad:m,component:m.graph});const u=new Map,p=[...this.blankNodeInfo.keys()];for(const m of p)this._hashAndTrackBlankNode({id:m,hashToBlankNodes:u});const w=[...u.keys()].sort(),g=[];for(const m of w){const _=u.get(m);_.length>1?g.push(_):this.canonicalIssuer.getId(_[0])}for(const m of g){const _=[];for(const T of m){if(this.canonicalIssuer.hasId(T))continue;const D=new B("_:b");D.getId(T);const L=this.hashNDegreeQuads(T,D);_.push(L)}_.sort(k);for(const T of _){const D=T.issuer.getOldIds();for(const L of D)this.canonicalIssuer.getId(L)}}const x=[];for(const m of this.quads){const _=$t({},m);_.subject=this._useCanonicalId({component:_.subject}),_.object=this._useCanonicalId({component:_.object}),_.graph=this._useCanonicalId({component:_.graph}),x.push(S.serializeQuad(_))}return x.sort(),x.join("")}hashFirstDegreeQuads(f){const u=[],p=this.blankNodeInfo.get(f),w=p.quads;for(const x of w){const m={subject:null,predicate:x.predicate,object:null,graph:null};m.subject=this.modifyFirstDegreeComponent(f,x.subject,"subject"),m.object=this.modifyFirstDegreeComponent(f,x.object,"object"),m.graph=this.modifyFirstDegreeComponent(f,x.graph,"graph"),u.push(S.serializeQuad(m))}u.sort();const g=new C(this.hashAlgorithm);for(const x of u)g.update(x);return p.hash=g.digest(),p.hash}hashRelatedBlankNode(f,u,p,w){let g;g=this.canonicalIssuer.hasId(f)?this.canonicalIssuer.getId(f):p.hasId(f)?p.getId(f):this.blankNodeInfo.get(f).hash;const x=new C(this.hashAlgorithm);return x.update(w),"g"!==w&&x.update(this.getRelatedPredicate(u)),x.update(g),x.digest()}hashNDegreeQuads(f,u){const p=new C(this.hashAlgorithm),w=this.createHashToRelated(f,u),g=[...w.keys()].sort();for(const x of g){p.update(x);let _,m="";const T=new b(w.get(x));for(;T.hasNext();){const D=T.next();let L=u.clone(),M="";const N=[];let I=!1;for(const P of D)if(this.canonicalIssuer.hasId(P)?M+=this.canonicalIssuer.getId(P):(L.hasId(P)||N.push(P),M+=L.getId(P)),0!==m.length&&M>m){I=!0;break}if(!I){for(const P of N){const V=this.hashNDegreeQuads(P,L);if(M+=L.getId(P),M+=`<${V.hash}>`,L=V.issuer,0!==m.length&&M>m){I=!0;break}}I||(0===m.length||M<m)&&(m=M,_=L)}}p.update(m),u=_}return{hash:p.digest(),issuer:u}}modifyFirstDegreeComponent(f,u){return"BlankNode"!==u.termType?u:{termType:"BlankNode",value:u.value===f?"_:a":"_:z"}}getRelatedPredicate(f){return`<${f.predicate.value}>`}createHashToRelated(f,u){const p=new Map,w=this.blankNodeInfo.get(f).quads;for(const g of w)this._addRelatedBlankNodeHash({quad:g,component:g.subject,position:"s",id:f,issuer:u,hashToRelated:p}),this._addRelatedBlankNodeHash({quad:g,component:g.object,position:"o",id:f,issuer:u,hashToRelated:p}),this._addRelatedBlankNodeHash({quad:g,component:g.graph,position:"g",id:f,issuer:u,hashToRelated:p});return p}_hashAndTrackBlankNode({id:f,hashToBlankNodes:u}){const p=this.hashFirstDegreeQuads(f),w=u.get(p);w?w.push(f):u.set(p,[f])}_addBlankNodeQuadInfo({quad:f,component:u}){if("BlankNode"!==u.termType)return;const p=u.value,w=this.blankNodeInfo.get(p);w?w.quads.add(f):this.blankNodeInfo.set(p,{quads:new Set([f]),hash:null})}_addRelatedBlankNodeHash({quad:f,component:u,position:p,id:w,issuer:g,hashToRelated:x}){if("BlankNode"!==u.termType||u.value===w)return;const m=u.value,_=this.hashRelatedBlankNode(m,f,g,p),T=x.get(_);T?T.push(m):x.set(_,[m])}_useCanonicalId({component:f}){return"BlankNode"!==f.termType||f.value.startsWith(this.canonicalIssuer.prefix)?f:{termType:"BlankNode",value:this.canonicalIssuer.getId(f.value)}}}},1359:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(4103);Ge.exports=class extends C{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(S,k,h){return"BlankNode"!==k.termType?k:"graph"===h?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:k.value===S?"_:a":"_:z"}}getRelatedPredicate(S){return S.predicate.value}createHashToRelated(S,k){var h=this;return B(function*(){const f=new Map,u=h.blankNodeInfo.get(S).quads;let p=0;for(const w of u){let g,x;if("BlankNode"===w.subject.termType&&w.subject.value!==S)x=w.subject.value,g="p";else{if("BlankNode"!==w.object.termType||w.object.value===S)continue;x=w.object.value,g="r"}++p%100==0&&(yield h._yield());const m=yield h.hashRelatedBlankNode(x,w,k,g),_=f.get(m);_?_.push(x):f.set(m,[x])}return f})()}}},7492:(Ge,G,F)=>{"use strict";const B=F(526);Ge.exports=class extends B{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(b,S,k){return"BlankNode"!==S.termType?S:"graph"===k?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:S.value===b?"_:a":"_:z"}}getRelatedPredicate(b){return b.predicate.value}createHashToRelated(b,S){const k=new Map,h=this.blankNodeInfo.get(b).quads;for(const f of h){let u,p;if("BlankNode"===f.subject.termType&&f.subject.value!==b)p=f.subject.value,u="p";else{if("BlankNode"!==f.object.termType||f.object.value===b)continue;p=f.object.value,u="r"}const w=this.hashRelatedBlankNode(p,f,S,u),g=k.get(w);g?g.push(p):k.set(w,[p])}return k}}},1358:(Ge,G,F)=>{"use strict";var B=F(8926).default;const C=F(4103),b=F(1359),S=F(526),k=F(7492);let h;try{h=F(7670)}catch(u){}const f={};Ge.exports=f,f.NQuads=F(5090),f.IdentifierIssuer=F(4512),f._rdfCanonizeNative=function(u){return u&&(h=u),h},f.canonize=function(){var u=B(function*(p,w){if(Array.isArray(p)||(p=f.NQuads.legacyDatasetToQuads(p)),w.useNative){if(!h)throw new Error("rdf-canonize-native not available");return new Promise((g,x)=>h.canonize(p,w,(m,_)=>m?x(m):g(_)))}if("URDNA2015"===w.algorithm)return new C(w).main(p);if("URGNA2012"===w.algorithm)return new b(w).main(p);throw"algorithm"in w?new Error("Invalid RDF Dataset Canonicalization algorithm: "+w.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(p,w){return u.apply(this,arguments)}}(),f._canonizeSync=function(u,p){if(Array.isArray(u)||(u=f.NQuads.legacyDatasetToQuads(u)),p.useNative){if(h)return h.canonizeSync(u,p);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===p.algorithm)return new S(p).main(u);if("URGNA2012"===p.algorithm)return new k(p).main(u);throw"algorithm"in p?new Error("Invalid RDF Dataset Canonicalization algorithm: "+p.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},6563:function(){!function(Ge,G){"use strict";if(!Ge.setImmediate){var S,F=1,B={},C=!1,b=Ge.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(Ge);T=T&&T.setTimeout?T:Ge,"[object process]"==={}.toString.call(Ge.process)?function p(){S=function(D){process.nextTick(function(){u(D)})}}():function w(){if(Ge.postMessage&&!Ge.importScripts){var D=!0,L=Ge.onmessage;return Ge.onmessage=function(){D=!1},Ge.postMessage("","*"),Ge.onmessage=L,D}}()?function g(){var D="setImmediate$"+Math.random()+"$",L=function(M){M.source===Ge&&"string"==typeof M.data&&0===M.data.indexOf(D)&&u(+M.data.slice(D.length))};Ge.addEventListener?Ge.addEventListener("message",L,!1):Ge.attachEvent("onmessage",L),S=function(M){Ge.postMessage(D+M,"*")}}():Ge.MessageChannel?function x(){var D=new MessageChannel;D.port1.onmessage=function(L){u(L.data)},S=function(L){D.port2.postMessage(L)}}():b&&"onreadystatechange"in b.createElement("script")?function m(){var D=b.documentElement;S=function(L){var M=b.createElement("script");M.onreadystatechange=function(){u(L),M.onreadystatechange=null,D.removeChild(M),M=null},D.appendChild(M)}}():function _(){S=function(D){setTimeout(u,0,D)}}(),T.setImmediate=function k(D){"function"!=typeof D&&(D=new Function(""+D));for(var L=new Array(arguments.length-1),M=0;M<L.length;M++)L[M]=arguments[M+1];var N={callback:D,args:L};return B[F]=N,S(F),F++},T.clearImmediate=h}function h(D){delete B[D]}function u(D){if(C)setTimeout(u,0,D);else{var L=B[D];if(L){C=!0;try{!function f(D){var L=D.callback,M=D.args;switch(M.length){case 0:L();break;case 1:L(M[0]);break;case 2:L(M[0],M[1]);break;case 3:L(M[0],M[1],M[2]);break;default:L.apply(void 0,M)}}(L)}finally{h(D),C=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self)},5753:Ge=>{var G,F,B;Ge.exports=(G=Math.floor,F=Math.abs,B=Math.pow,function C(b,S,k){function h(p,w){if(!S[p]){if(!b[p]){if(f)return f(p,!0);var x=new Error("Cannot find module '"+p+"'");throw x.code="MODULE_NOT_FOUND",x}var m=S[p]={exports:{}};b[p][0].call(m.exports,function(_){return h(b[p][1][_]||_)},m,m.exports,C,b,S,k)}return S[p].exports}for(var f=void 0,u=0;u<k.length;u++)h(k[u]);return h}({1:[function(C,b,S){"use strict";function k(L){var M=L.length;if(0<M%4)throw new Error("Invalid string. Length must be a multiple of 4");var N=L.indexOf("=");return-1===N&&(N=M),[N,N===M?0:4-N%4]}function u(L){return g[63&L>>18]+g[63&L>>12]+g[63&L>>6]+g[63&L]}function p(L,M,N){for(var P=[],V=M;V<N;V+=3)P.push(u((16711680&L[V]<<16)+(65280&L[V+1]<<8)+(255&L[V+2])));return P.join("")}S.byteLength=function(L){var M=k(L),I=M[1];return 3*(M[0]+I)/4-I},S.toByteArray=function f(L){var M,N,I=k(L),P=I[0],V=I[1],j=new m(function h(L,M,N){return 3*(M+N)/4-N}(0,P,V)),oe=0,J=0<V?P-4:P;for(N=0;N<J;N+=4)M=x[L.charCodeAt(N)]<<18|x[L.charCodeAt(N+1)]<<12|x[L.charCodeAt(N+2)]<<6|x[L.charCodeAt(N+3)],j[oe++]=255&M>>16,j[oe++]=255&M>>8,j[oe++]=255&M;return 2===V&&(M=x[L.charCodeAt(N)]<<2|x[L.charCodeAt(N+1)]>>4,j[oe++]=255&M),1===V&&(M=x[L.charCodeAt(N)]<<10|x[L.charCodeAt(N+1)]<<4|x[L.charCodeAt(N+2)]>>2,j[oe++]=255&M>>8,j[oe++]=255&M),j},S.fromByteArray=function w(L){for(var M,N=L.length,I=N%3,P=[],V=16383,j=0,oe=N-I;j<oe;j+=V)P.push(p(L,j,j+V>oe?oe:j+V));return 1===I?P.push(g[(M=L[N-1])>>2]+g[63&M<<4]+"=="):2===I&&P.push(g[(M=(L[N-2]<<8)+L[N-1])>>10]+g[63&M>>4]+g[63&M<<2]+"="),P.join("")};for(var g=[],x=[],m="undefined"==typeof Uint8Array?Array:Uint8Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,D=_.length;T<D;++T)g[T]=_[T],x[_.charCodeAt(T)]=T;x[45]=62,x[95]=63},{}],2:[function(){},{}],3:[function(C,b,S){(function(){(function(){"use strict";var k=String.fromCharCode,h=Math.min;function f(R){if(2147483647<R)throw new RangeError('The value "'+R+'" is invalid for option "size"');var H=new Uint8Array(R);return H.__proto__=u.prototype,H}function u(R,H,Z){if("number"==typeof R){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return x(R)}return p(R,H,Z)}function p(R,H,Z){if("string"==typeof R)return function m(R,H){if(("string"!=typeof H||""===H)&&(H="utf8"),!u.isEncoding(H))throw new TypeError("Unknown encoding: "+H);var Z=0|M(R,H),Ae=f(Z),Ke=Ae.write(R,H);return Ke!==Z&&(Ae=Ae.slice(0,Ke)),Ae}(R,H);if(ArrayBuffer.isView(R))return _(R);if(null==R)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(se(R,ArrayBuffer)||R&&se(R.buffer,ArrayBuffer))return function T(R,H,Z){if(0>H||R.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<H+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var Ae;return(Ae=void 0===H&&void 0===Z?new Uint8Array(R):void 0===Z?new Uint8Array(R,H):new Uint8Array(R,H,Z)).__proto__=u.prototype,Ae}(R,H,Z);if("number"==typeof R)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ae=R.valueOf&&R.valueOf();if(null!=Ae&&Ae!==R)return u.from(Ae,H,Z);var Ke=function D(R){if(u.isBuffer(R)){var H=0|L(R.length),Z=f(H);return 0===Z.length||R.copy(Z,0,0,H),Z}return void 0===R.length?"Buffer"===R.type&&Array.isArray(R.data)?_(R.data):void 0:"number"!=typeof R.length||K(R.length)?f(0):_(R)}(R);if(Ke)return Ke;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof R[Symbol.toPrimitive])return u.from(R[Symbol.toPrimitive]("string"),H,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function w(R){if("number"!=typeof R)throw new TypeError('"size" argument must be of type number');if(0>R)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function x(R){return w(R),f(0>R?0:0|L(R))}function _(R){for(var H=0>R.length?0:0|L(R.length),Z=f(H),Ae=0;Ae<H;Ae+=1)Z[Ae]=255&R[Ae];return Z}function L(R){if(R>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|R}function M(R,H){if(u.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||se(R,ArrayBuffer))return R.byteLength;if("string"!=typeof R)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var Z=R.length,Ae=2<arguments.length&&!0===arguments[2];if(!Ae&&0===Z)return 0;for(var Ke=!1;;)switch(H){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Ne(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Z;case"hex":return Z>>>1;case"base64":return ie(R).length;default:if(Ke)return Ae?-1:Ne(R).length;H=(""+H).toLowerCase(),Ke=!0}}function N(R,H,Z){var Ae=!1;if((void 0===H||0>H)&&(H=0),H>this.length||((void 0===Z||Z>this.length)&&(Z=this.length),0>=Z)||(Z>>>=0)<=(H>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return _e(this,H,Z);case"utf8":case"utf-8":return ce(this,H,Z);case"ascii":return fe(this,H,Z);case"latin1":case"binary":return Ee(this,H,Z);case"base64":return he(this,H,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,H,Z);default:if(Ae)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),Ae=!0}}function I(R,H,Z){var Ae=R[H];R[H]=R[Z],R[Z]=Ae}function P(R,H,Z,Ae,Ke){if(0===R.length)return-1;if("string"==typeof Z?(Ae=Z,Z=0):2147483647<Z?Z=2147483647:-2147483648>Z&&(Z=-2147483648),K(Z=+Z)&&(Z=Ke?0:R.length-1),0>Z&&(Z=R.length+Z),Z>=R.length){if(Ke)return-1;Z=R.length-1}else if(0>Z){if(!Ke)return-1;Z=0}if("string"==typeof H&&(H=u.from(H,Ae)),u.isBuffer(H))return 0===H.length?-1:V(R,H,Z,Ae,Ke);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?Ke?Uint8Array.prototype.indexOf.call(R,H,Z):Uint8Array.prototype.lastIndexOf.call(R,H,Z):V(R,[H],Z,Ae,Ke);throw new TypeError("val must be string, number or Buffer")}function V(R,H,Z,Ae,Ke){function Re(xt,ni){return 1===ht?xt[ni]:xt.readUInt16BE(ni*ht)}var ln,ht=1,Et=R.length,Ft=H.length;if(void 0!==Ae&&("ucs2"===(Ae=(Ae+"").toLowerCase())||"ucs-2"===Ae||"utf16le"===Ae||"utf-16le"===Ae)){if(2>R.length||2>H.length)return-1;ht=2,Et/=2,Ft/=2,Z/=2}if(Ke){var Ie=-1;for(ln=Z;ln<Et;ln++)if(Re(R,ln)!==Re(H,-1===Ie?0:ln-Ie))-1!==Ie&&(ln-=ln-Ie),Ie=-1;else if(-1===Ie&&(Ie=ln),ln-Ie+1===Ft)return Ie*ht}else for(Z+Ft>Et&&(Z=Et-Ft),ln=Z;0<=ln;ln--){for(var bn=!0,Er=0;Er<Ft;Er++)if(Re(R,ln+Er)!==Re(H,Er)){bn=!1;break}if(bn)return ln}return-1}function j(R,H,Z,Ae){var Ke=R.length-(Z=+Z||0);Ae?(Ae=+Ae)>Ke&&(Ae=Ke):Ae=Ke;var Re=H.length;Ae>Re/2&&(Ae=Re/2);for(var ht,Et=0;Et<Ae;++Et){if(K(ht=parseInt(H.substr(2*Et,2),16)))return Et;R[Z+Et]=ht}return Et}function oe(R,H,Z,Ae){return $(Ne(H,R.length-Z),R,Z,Ae)}function J(R,H,Z,Ae){return $(function ye(R){for(var H=[],Z=0;Z<R.length;++Z)H.push(255&R.charCodeAt(Z));return H}(H),R,Z,Ae)}function le(R,H,Z,Ae){return J(R,H,Z,Ae)}function q(R,H,Z,Ae){return $(ie(H),R,Z,Ae)}function ue(R,H,Z,Ae){return $(function ee(R,H){for(var Z,Ae,Re=[],ht=0;ht<R.length&&!(0>(H-=2));++ht)Ae=(Z=R.charCodeAt(ht))>>8,Re.push(Z%256),Re.push(Ae);return Re}(H,R.length-Z),R,Z,Ae)}function he(R,H,Z){return te.fromByteArray(0===H&&Z===R.length?R:R.slice(H,Z))}function ce(R,H,Z){Z=h(R.length,Z);for(var Ae=[],Ke=H;Ke<Z;){var Ft,ln,Ie,bn,Re=R[Ke],ht=null,Et=239<Re?4:223<Re?3:191<Re?2:1;Ke+Et<=Z&&(1===Et?128>Re&&(ht=Re):2===Et?128==(192&(Ft=R[Ke+1]))&&127<(bn=(31&Re)<<6|63&Ft)&&(ht=bn):3===Et?(ln=R[Ke+2],128==(192&(Ft=R[Ke+1]))&&128==(192&ln)&&2047<(bn=(15&Re)<<12|(63&Ft)<<6|63&ln)&&(55296>bn||57343<bn)&&(ht=bn)):4===Et&&(ln=R[Ke+2],Ie=R[Ke+3],128==(192&(Ft=R[Ke+1]))&&128==(192&ln)&&128==(192&Ie)&&65535<(bn=(15&Re)<<18|(63&Ft)<<12|(63&ln)<<6|63&Ie)&&1114112>bn&&(ht=bn))),null===ht?(ht=65533,Et=1):65535<ht&&(Ae.push(55296|1023&(ht-=65536)>>>10),ht=56320|1023&ht),Ae.push(ht),Ke+=Et}return function pe(R){var H=R.length;if(H<=4096)return k.apply(String,R);for(var Z="",Ae=0;Ae<H;)Z+=k.apply(String,R.slice(Ae,Ae+=4096));return Z}(Ae)}function fe(R,H,Z){var Ae="";Z=h(R.length,Z);for(var Ke=H;Ke<Z;++Ke)Ae+=k(127&R[Ke]);return Ae}function Ee(R,H,Z){var Ae="";Z=h(R.length,Z);for(var Ke=H;Ke<Z;++Ke)Ae+=k(R[Ke]);return Ae}function _e(R,H,Z){var Ae=R.length;(!H||0>H)&&(H=0),(!Z||0>Z||Z>Ae)&&(Z=Ae);for(var Ke="",Re=H;Re<Z;++Re)Ke+=He(R[Re]);return Ke}function Te(R,H,Z){for(var Ae=R.slice(H,Z),Ke="",Re=0;Re<Ae.length;Re+=2)Ke+=k(Ae[Re]+256*Ae[Re+1]);return Ke}function De(R,H,Z){if(R%1!=0||0>R)throw new RangeError("offset is not uint");if(R+H>Z)throw new RangeError("Trying to access beyond buffer length")}function be(R,H,Z,Ae,Ke,Re){if(!u.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Ke||H<Re)throw new RangeError('"value" argument is out of bounds');if(Z+Ae>R.length)throw new RangeError("Index out of range")}function de(R,H,Z,Ae){if(Z+Ae>R.length)throw new RangeError("Index out of range");if(0>Z)throw new RangeError("Index out of range")}function we(R,H,Z,Ae,Ke){return H=+H,Z>>>=0,Ke||de(R,0,Z,4),X.write(R,H,Z,Ae,23,4),Z+4}function Ye(R,H,Z,Ae,Ke){return H=+H,Z>>>=0,Ke||de(R,0,Z,8),X.write(R,H,Z,Ae,52,8),Z+8}function He(R){return 16>R?"0"+R.toString(16):R.toString(16)}function Ne(R,H){H=H||1/0;for(var Z,Ae=R.length,Ke=null,Re=[],ht=0;ht<Ae;++ht){if(55295<(Z=R.charCodeAt(ht))&&57344>Z){if(!Ke){if(56319<Z){-1<(H-=3)&&Re.push(239,191,189);continue}if(ht+1===Ae){-1<(H-=3)&&Re.push(239,191,189);continue}Ke=Z;continue}if(56320>Z){-1<(H-=3)&&Re.push(239,191,189),Ke=Z;continue}Z=65536+(Ke-55296<<10|Z-56320)}else Ke&&-1<(H-=3)&&Re.push(239,191,189);if(Ke=null,128>Z){if(0>(H-=1))break;Re.push(Z)}else if(2048>Z){if(0>(H-=2))break;Re.push(192|Z>>6,128|63&Z)}else if(65536>Z){if(0>(H-=3))break;Re.push(224|Z>>12,128|63&Z>>6,128|63&Z)}else{if(!(1114112>Z))throw new Error("Invalid code point");if(0>(H-=4))break;Re.push(240|Z>>18,128|63&Z>>12,128|63&Z>>6,128|63&Z)}}return Re}function ie(R){return te.toByteArray(function ze(R){if(2>(R=(R=R.split("=")[0]).trim().replace(me,"")).length)return"";for(;R.length%4!=0;)R+="=";return R}(R))}function $(R,H,Z,Ae){for(var Ke=0;Ke<Ae&&!(Ke+Z>=H.length||Ke>=R.length);++Ke)H[Ke+Z]=R[Ke];return Ke}function se(R,H){return R instanceof H||null!=R&&null!=R.constructor&&null!=R.constructor.name&&R.constructor.name===H.name}function K(R){return R!=R}var te=C("base64-js"),X=C("ieee754");S.Buffer=u,S.SlowBuffer=function(R){return+R!=R&&(R=0),u.alloc(+R)},S.INSPECT_MAX_BYTES=50,S.kMaxLength=2147483647,(u.TYPED_ARRAY_SUPPORT=function(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===R.foo()}catch(H){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){return u.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){return u.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(R,H,Z){return p(R,H,Z)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(R,H,Z){return function g(R,H,Z){return w(R),0>=R||void 0===H?f(R):"string"==typeof Z?f(R).fill(H,Z):f(R).fill(H)}(R,H,Z)},u.allocUnsafe=function(R){return x(R)},u.allocUnsafeSlow=function(R){return x(R)},u.isBuffer=function(R){return null!=R&&!0===R._isBuffer&&R!==u.prototype},u.compare=function(R,H){if(se(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),se(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),!u.isBuffer(R)||!u.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===H)return 0;for(var Z=R.length,Ae=H.length,Ke=0,Re=h(Z,Ae);Ke<Re;++Ke)if(R[Ke]!==H[Ke]){Z=R[Ke],Ae=H[Ke];break}return Z<Ae?-1:Ae<Z?1:0},u.isEncoding=function(R){switch((R+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(R,H){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(0===R.length)return u.alloc(0);var Z;if(void 0===H)for(H=0,Z=0;Z<R.length;++Z)H+=R[Z].length;var Ae=u.allocUnsafe(H),Ke=0;for(Z=0;Z<R.length;++Z){var Re=R[Z];if(se(Re,Uint8Array)&&(Re=u.from(Re)),!u.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(Ae,Ke),Ke+=Re.length}return Ae},u.byteLength=M,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<R;H+=2)I(this,H,H+1);return this},u.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<R;H+=4)I(this,H,H+3),I(this,H+1,H+2);return this},u.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<R;H+=8)I(this,H,H+7),I(this,H+1,H+6),I(this,H+2,H+5),I(this,H+3,H+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var R=this.length;return 0===R?"":0===arguments.length?ce(this,0,R):N.apply(this,arguments)},u.prototype.equals=function(R){if(!u.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||0===u.compare(this,R)},u.prototype.inspect=function(){var R="",H=S.INSPECT_MAX_BYTES;return R=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(R+=" ... "),"<Buffer "+R+">"},u.prototype.compare=function(R,H,Z,Ae,Ke){if(se(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(void 0===H&&(H=0),void 0===Z&&(Z=R?R.length:0),void 0===Ae&&(Ae=0),void 0===Ke&&(Ke=this.length),0>H||Z>R.length||0>Ae||Ke>this.length)throw new RangeError("out of range index");if(Ae>=Ke&&H>=Z)return 0;if(Ae>=Ke)return-1;if(H>=Z)return 1;if(this===R)return 0;for(var Re=(Ke>>>=0)-(Ae>>>=0),ht=(Z>>>=0)-(H>>>=0),Et=h(Re,ht),Ft=this.slice(Ae,Ke),ln=R.slice(H,Z),Ie=0;Ie<Et;++Ie)if(Ft[Ie]!==ln[Ie]){Re=Ft[Ie],ht=ln[Ie];break}return Re<ht?-1:ht<Re?1:0},u.prototype.includes=function(R,H,Z){return-1!==this.indexOf(R,H,Z)},u.prototype.indexOf=function(R,H,Z){return P(this,R,H,Z,!0)},u.prototype.lastIndexOf=function(R,H,Z){return P(this,R,H,Z,!1)},u.prototype.write=function(R,H,Z,Ae){if(void 0===H)Ae="utf8",Z=this.length,H=0;else if(void 0===Z&&"string"==typeof H)Ae=H,Z=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(Z)?(Z>>>=0,void 0===Ae&&(Ae="utf8")):(Ae=Z,Z=void 0)}var Ke=this.length-H;if((void 0===Z||Z>Ke)&&(Z=Ke),0<R.length&&(0>Z||0>H)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var Re=!1;;)switch(Ae){case"hex":return j(this,R,H,Z);case"utf8":case"utf-8":return oe(this,R,H,Z);case"ascii":return J(this,R,H,Z);case"latin1":case"binary":return le(this,R,H,Z);case"base64":return q(this,R,H,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,R,H,Z);default:if(Re)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),Re=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(R,H){var Z=this.length;0>(R=~~R)?0>(R+=Z)&&(R=0):R>Z&&(R=Z),0>(H=void 0===H?Z:~~H)?0>(H+=Z)&&(H=0):H>Z&&(H=Z),H<R&&(H=R);var Ae=this.subarray(R,H);return Ae.__proto__=u.prototype,Ae},u.prototype.readUIntLE=function(R,H,Z){R>>>=0,H>>>=0,Z||De(R,H,this.length);for(var Ae=this[R],Ke=1,Re=0;++Re<H&&(Ke*=256);)Ae+=this[R+Re]*Ke;return Ae},u.prototype.readUIntBE=function(R,H,Z){R>>>=0,H>>>=0,Z||De(R,H,this.length);for(var Ae=this[R+--H],Ke=1;0<H&&(Ke*=256);)Ae+=this[R+--H]*Ke;return Ae},u.prototype.readUInt8=function(R,H){return R>>>=0,H||De(R,1,this.length),this[R]},u.prototype.readUInt16LE=function(R,H){return R>>>=0,H||De(R,2,this.length),this[R]|this[R+1]<<8},u.prototype.readUInt16BE=function(R,H){return R>>>=0,H||De(R,2,this.length),this[R]<<8|this[R+1]},u.prototype.readUInt32LE=function(R,H){return R>>>=0,H||De(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},u.prototype.readUInt32BE=function(R,H){return R>>>=0,H||De(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},u.prototype.readIntLE=function(R,H,Z){R>>>=0,H>>>=0,Z||De(R,H,this.length);for(var Ae=this[R],Ke=1,Re=0;++Re<H&&(Ke*=256);)Ae+=this[R+Re]*Ke;return Ae>=(Ke*=128)&&(Ae-=B(2,8*H)),Ae},u.prototype.readIntBE=function(R,H,Z){R>>>=0,H>>>=0,Z||De(R,H,this.length);for(var Ae=H,Ke=1,Re=this[R+--Ae];0<Ae&&(Ke*=256);)Re+=this[R+--Ae]*Ke;return Re>=(Ke*=128)&&(Re-=B(2,8*H)),Re},u.prototype.readInt8=function(R,H){return R>>>=0,H||De(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},u.prototype.readInt16LE=function(R,H){R>>>=0,H||De(R,2,this.length);var Z=this[R]|this[R+1]<<8;return 32768&Z?4294901760|Z:Z},u.prototype.readInt16BE=function(R,H){R>>>=0,H||De(R,2,this.length);var Z=this[R+1]|this[R]<<8;return 32768&Z?4294901760|Z:Z},u.prototype.readInt32LE=function(R,H){return R>>>=0,H||De(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},u.prototype.readInt32BE=function(R,H){return R>>>=0,H||De(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},u.prototype.readFloatLE=function(R,H){return R>>>=0,H||De(R,4,this.length),X.read(this,R,!0,23,4)},u.prototype.readFloatBE=function(R,H){return R>>>=0,H||De(R,4,this.length),X.read(this,R,!1,23,4)},u.prototype.readDoubleLE=function(R,H){return R>>>=0,H||De(R,8,this.length),X.read(this,R,!0,52,8)},u.prototype.readDoubleBE=function(R,H){return R>>>=0,H||De(R,8,this.length),X.read(this,R,!1,52,8)},u.prototype.writeUIntLE=function(R,H,Z,Ae){R=+R,H>>>=0,Z>>>=0,Ae||be(this,R,H,Z,B(2,8*Z)-1,0);var Re=1,ht=0;for(this[H]=255&R;++ht<Z&&(Re*=256);)this[H+ht]=255&R/Re;return H+Z},u.prototype.writeUIntBE=function(R,H,Z,Ae){R=+R,H>>>=0,Z>>>=0,Ae||be(this,R,H,Z,B(2,8*Z)-1,0);var Re=Z-1,ht=1;for(this[H+Re]=255&R;0<=--Re&&(ht*=256);)this[H+Re]=255&R/ht;return H+Z},u.prototype.writeUInt8=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,1,255,0),this[H]=255&R,H+1},u.prototype.writeUInt16LE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,2,65535,0),this[H]=255&R,this[H+1]=R>>>8,H+2},u.prototype.writeUInt16BE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,2,65535,0),this[H]=R>>>8,this[H+1]=255&R,H+2},u.prototype.writeUInt32LE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,4,4294967295,0),this[H+3]=R>>>24,this[H+2]=R>>>16,this[H+1]=R>>>8,this[H]=255&R,H+4},u.prototype.writeUInt32BE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,4,4294967295,0),this[H]=R>>>24,this[H+1]=R>>>16,this[H+2]=R>>>8,this[H+3]=255&R,H+4},u.prototype.writeIntLE=function(R,H,Z,Ae){if(R=+R,H>>>=0,!Ae){var Ke=B(2,8*Z-1);be(this,R,H,Z,Ke-1,-Ke)}var Re=0,ht=1,Et=0;for(this[H]=255&R;++Re<Z&&(ht*=256);)0>R&&0===Et&&0!==this[H+Re-1]&&(Et=1),this[H+Re]=255&(R/ht>>0)-Et;return H+Z},u.prototype.writeIntBE=function(R,H,Z,Ae){if(R=+R,H>>>=0,!Ae){var Ke=B(2,8*Z-1);be(this,R,H,Z,Ke-1,-Ke)}var Re=Z-1,ht=1,Et=0;for(this[H+Re]=255&R;0<=--Re&&(ht*=256);)0>R&&0===Et&&0!==this[H+Re+1]&&(Et=1),this[H+Re]=255&(R/ht>>0)-Et;return H+Z},u.prototype.writeInt8=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,1,127,-128),0>R&&(R=255+R+1),this[H]=255&R,H+1},u.prototype.writeInt16LE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,2,32767,-32768),this[H]=255&R,this[H+1]=R>>>8,H+2},u.prototype.writeInt16BE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,2,32767,-32768),this[H]=R>>>8,this[H+1]=255&R,H+2},u.prototype.writeInt32LE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,4,2147483647,-2147483648),this[H]=255&R,this[H+1]=R>>>8,this[H+2]=R>>>16,this[H+3]=R>>>24,H+4},u.prototype.writeInt32BE=function(R,H,Z){return R=+R,H>>>=0,Z||be(this,R,H,4,2147483647,-2147483648),0>R&&(R=4294967295+R+1),this[H]=R>>>24,this[H+1]=R>>>16,this[H+2]=R>>>8,this[H+3]=255&R,H+4},u.prototype.writeFloatLE=function(R,H,Z){return we(this,R,H,!0,Z)},u.prototype.writeFloatBE=function(R,H,Z){return we(this,R,H,!1,Z)},u.prototype.writeDoubleLE=function(R,H,Z){return Ye(this,R,H,!0,Z)},u.prototype.writeDoubleBE=function(R,H,Z){return Ye(this,R,H,!1,Z)},u.prototype.copy=function(R,H,Z,Ae){if(!u.isBuffer(R))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),Ae||0===Ae||(Ae=this.length),H>=R.length&&(H=R.length),H||(H=0),0<Ae&&Ae<Z&&(Ae=Z),Ae===Z||0===R.length||0===this.length)return 0;if(0>H)throw new RangeError("targetStart out of bounds");if(0>Z||Z>=this.length)throw new RangeError("Index out of range");if(0>Ae)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),R.length-H<Ae-Z&&(Ae=R.length-H+Z);var Ke=Ae-Z;if(this===R&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(H,Z,Ae);else if(this===R&&Z<H&&H<Ae)for(var Re=Ke-1;0<=Re;--Re)R[Re+H]=this[Re+Z];else Uint8Array.prototype.set.call(R,this.subarray(Z,Ae),H);return Ke},u.prototype.fill=function(R,H,Z,Ae){if("string"==typeof R){if("string"==typeof H?(Ae=H,H=0,Z=this.length):"string"==typeof Z&&(Ae=Z,Z=this.length),void 0!==Ae&&"string"!=typeof Ae)throw new TypeError("encoding must be a string");if("string"==typeof Ae&&!u.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(1===R.length){var Ke=R.charCodeAt(0);("utf8"===Ae&&128>Ke||"latin1"===Ae)&&(R=Ke)}}else"number"==typeof R&&(R&=255);if(0>H||this.length<H||this.length<Z)throw new RangeError("Out of range index");if(Z<=H)return this;var Re;if(H>>>=0,Z=void 0===Z?this.length:Z>>>0,R||(R=0),"number"==typeof R)for(Re=H;Re<Z;++Re)this[Re]=R;else{var ht=u.isBuffer(R)?R:u.from(R,Ae),Et=ht.length;if(0===Et)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(Re=0;Re<Z-H;++Re)this[Re+H]=ht[Re%Et]}return this};var me=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,C("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(C,b,S){(function(k){(function(){S.formatArgs=function(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+b.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;u.splice(1,0,p,"color: inherit");let w=0,g=0;u[0].replace(/%[a-zA-Z%]/g,x=>{"%%"===x||(w++,"%c"===x&&(g=w))}),u.splice(g,0,p)},S.save=function(u){try{u?S.storage.setItem("debug",u):S.storage.removeItem("debug")}catch(p){}},S.load=function h(){let u;try{u=S.storage.getItem("debug")}catch(p){}return!u&&void 0!==k&&"env"in k&&(u=k.env.DEBUG),u},S.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},S.storage=function(){try{return localStorage}catch(u){}}(),S.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],S.log=console.debug||console.log||(()=>{}),b.exports=C("./common")(S);const{formatters:f}=b.exports;f.j=function(u){try{return JSON.stringify(u)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}).call(this)}).call(this,C("_process"))},{"./common":5,_process:12}],5:[function(C,b){b.exports=function(S){function k(u){function p(...x){if(!p.enabled)return;const m=p,_=+new Date;m.diff=_-(w||_),m.prev=w,m.curr=_,w=_,x[0]=k.coerce(x[0]),"string"!=typeof x[0]&&x.unshift("%O");let D=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(M,N)=>{if("%%"===M)return"%";D++;const I=k.formatters[N];return"function"==typeof I&&(M=I.call(m,x[D]),x.splice(D,1),D--),M}),k.formatArgs.call(m,x),(m.log||k.log).apply(m,x)}let w,g=null;return p.namespace=u,p.useColors=k.useColors(),p.color=k.selectColor(u),p.extend=h,p.destroy=k.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>null===g?k.enabled(u):g,set:x=>{g=x}}),"function"==typeof k.init&&k.init(p),p}function h(u,p){const w=k(this.namespace+(void 0===p?":":p)+u);return w.log=this.log,w}function f(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}return k.debug=k,k.default=k,k.coerce=function(u){return u instanceof Error?u.stack||u.message:u},k.disable=function(){const u=[...k.names.map(f),...k.skips.map(f).map(p=>"-"+p)].join(",");return k.enable(""),u},k.enable=function(u){let p;k.save(u),k.names=[],k.skips=[];const w=("string"==typeof u?u:"").split(/[\s,]+/),g=w.length;for(p=0;p<g;p++)w[p]&&("-"===(u=w[p].replace(/\*/g,".*?"))[0]?k.skips.push(new RegExp("^"+u.substr(1)+"$")):k.names.push(new RegExp("^"+u+"$")))},k.enabled=function(u){if("*"===u[u.length-1])return!0;let p,w;for(p=0,w=k.skips.length;p<w;p++)if(k.skips[p].test(u))return!1;for(p=0,w=k.names.length;p<w;p++)if(k.names[p].test(u))return!0;return!1},k.humanize=C("ms"),k.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(S).forEach(u=>{k[u]=S[u]}),k.names=[],k.skips=[],k.formatters={},k.selectColor=function(u){let p=0;for(let w=0;w<u.length;w++)p=(p<<5)-p+u.charCodeAt(w),p|=0;return k.colors[F(p)%k.colors.length]},k.enable(k.load()),k}},{ms:11}],6:[function(C,b){"use strict";function S(k,h){for(const f in h)Object.defineProperty(k,f,{value:h[f],enumerable:!0,configurable:!0});return k}b.exports=function(k,h,f){if(!k||"string"==typeof k)throw new TypeError("Please pass an Error to err-code");f||(f={}),"object"==typeof h&&(f=h,h=""),h&&(f.code=h);try{return S(k,f)}catch(u){f.message=k.message,f.stack=k.stack;const p=function(){};return p.prototype=Object.create(Object.getPrototypeOf(k)),S(new p,f)}}},{}],7:[function(C,b){"use strict";function k(){k.init.call(this)}function h(j){if("function"!=typeof j)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}function f(j){return void 0===j._maxListeners?k.defaultMaxListeners:j._maxListeners}function u(j,oe,J,le){var q,ue,he;if(h(J),void 0===(ue=j._events)?(ue=j._events=Object.create(null),j._eventsCount=0):(void 0!==ue.newListener&&(j.emit("newListener",oe,J.listener?J.listener:J),ue=j._events),he=ue[oe]),void 0===he)he=ue[oe]=J,++j._eventsCount;else if("function"==typeof he?he=ue[oe]=le?[J,he]:[he,J]:le?he.unshift(J):he.push(J),0<(q=f(j))&&he.length>q&&!he.warned){he.warned=!0;var ce=new Error("Possible EventEmitter memory leak detected. "+he.length+" "+oe+" listeners added. Use emitter.setMaxListeners() to increase limit");ce.name="MaxListenersExceededWarning",ce.emitter=j,ce.type=oe,ce.count=he.length,function S(j){console&&console.warn&&console.warn(j)}(ce)}return j}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(j,oe,J){var le={fired:!1,wrapFn:void 0,target:j,type:oe,listener:J},q=p.bind(le);return q.listener=J,le.wrapFn=q,q}function g(j,oe,J){var le=j._events;if(void 0===le)return[];var q=le[oe];return void 0===q?[]:"function"==typeof q?J?[q.listener||q]:[q]:J?function T(j){for(var oe=Array(j.length),J=0;J<oe.length;++J)oe[J]=j[J].listener||j[J];return oe}(q):m(q,q.length)}function x(j){var oe=this._events;if(void 0!==oe){var J=oe[j];if("function"==typeof J)return 1;if(void 0!==J)return J.length}return 0}function m(j,oe){for(var J=Array(oe),le=0;le<oe;++le)J[le]=j[le];return J}function L(j,oe,J,le){if("function"==typeof j.on)le.once?j.once(oe,J):j.on(oe,J);else{if("function"!=typeof j.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j);j.addEventListener(oe,function q(ue){le.once&&j.removeEventListener(oe,q),J(ue)})}}var M,N="object"==typeof Reflect?Reflect:null,I=N&&"function"==typeof N.apply?N.apply:function(j,oe,J){return Function.prototype.apply.call(j,oe,J)};M=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:function(j){return Object.getOwnPropertyNames(j)};var P=Number.isNaN||function(j){return j!=j};b.exports=k,b.exports.once=function(j,oe){return new Promise(function(J,le){function q(he){j.removeListener(oe,ue),le(he)}function ue(){"function"==typeof j.removeListener&&j.removeListener("error",q),J([].slice.call(arguments))}L(j,oe,ue,{once:!0}),"error"!==oe&&function D(j,oe,J){"function"==typeof j.on&&L(j,"error",oe,J)}(j,q,{once:!0})})},k.EventEmitter=k,k.prototype._events=void 0,k.prototype._eventsCount=0,k.prototype._maxListeners=void 0;var V=10;Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(j){if("number"!=typeof j||0>j||P(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");V=j}}),k.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},k.prototype.setMaxListeners=function(j){if("number"!=typeof j||0>j||P(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this},k.prototype.getMaxListeners=function(){return f(this)},k.prototype.emit=function(j){for(var oe=[],J=1;J<arguments.length;J++)oe.push(arguments[J]);var le="error"===j,q=this._events;if(void 0!==q)le=le&&void 0===q.error;else if(!le)return!1;if(le){var ue;if(0<oe.length&&(ue=oe[0]),ue instanceof Error)throw ue;var he=new Error("Unhandled error."+(ue?" ("+ue.message+")":""));throw he.context=ue,he}var ce=q[j];if(void 0===ce)return!1;if("function"==typeof ce)I(ce,this,oe);else{var pe=ce.length,fe=m(ce,pe);for(J=0;J<pe;++J)I(fe[J],this,oe)}return!0},k.prototype.on=k.prototype.addListener=function(j,oe){return u(this,j,oe,!1)},k.prototype.prependListener=function(j,oe){return u(this,j,oe,!0)},k.prototype.once=function(j,oe){return h(oe),this.on(j,w(this,j,oe)),this},k.prototype.prependOnceListener=function(j,oe){return h(oe),this.prependListener(j,w(this,j,oe)),this},k.prototype.off=k.prototype.removeListener=function(j,oe){var J,le,q,ue,he;if(h(oe),void 0===(le=this._events))return this;if(void 0===(J=le[j]))return this;if(J===oe||J.listener===oe)0==--this._eventsCount?this._events=Object.create(null):(delete le[j],le.removeListener&&this.emit("removeListener",j,J.listener||oe));else if("function"!=typeof J){for(q=-1,ue=J.length-1;0<=ue;ue--)if(J[ue]===oe||J[ue].listener===oe){he=J[ue].listener,q=ue;break}if(0>q)return this;0===q?J.shift():function _(j,oe){for(;oe+1<j.length;oe++)j[oe]=j[oe+1];j.pop()}(J,q),1===J.length&&(le[j]=J[0]),void 0!==le.removeListener&&this.emit("removeListener",j,he||oe)}return this},k.prototype.removeAllListeners=function(j){var oe,J,le;if(void 0===(J=this._events))return this;if(void 0===J.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==J[j]&&(0==--this._eventsCount?this._events=Object.create(null):delete J[j]),this;if(0===arguments.length){var q,ue=Object.keys(J);for(le=0;le<ue.length;++le)"removeListener"!==(q=ue[le])&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(oe=J[j]))this.removeListener(j,oe);else if(void 0!==oe)for(le=oe.length-1;0<=le;le--)this.removeListener(j,oe[le]);return this},k.prototype.listeners=function(j){return g(this,j,!0)},k.prototype.rawListeners=function(j){return g(this,j,!1)},k.listenerCount=function(j,oe){return"function"==typeof j.listenerCount?j.listenerCount(oe):x.call(j,oe)},k.prototype.listenerCount=x,k.prototype.eventNames=function(){return 0<this._eventsCount?M(this._events):[]}},{}],8:[function(C,b){b.exports=function(){if("undefined"==typeof globalThis)return null;var S={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return S.RTCPeerConnection?S:null}},{}],9:[function(C,b,S){S.read=function(k,h,f,u,p){var w,g,x=8*p-u-1,m=(1<<x)-1,_=m>>1,T=-7,D=f?p-1:0,L=f?-1:1,M=k[h+D];for(D+=L,w=M&(1<<-T)-1,M>>=-T,T+=x;0<T;w=256*w+k[h+D],D+=L,T-=8);for(g=w&(1<<-T)-1,w>>=-T,T+=u;0<T;g=256*g+k[h+D],D+=L,T-=8);if(0===w)w=1-_;else{if(w===m)return g?NaN:1/0*(M?-1:1);g+=B(2,u),w-=_}return(M?-1:1)*g*B(2,w-u)},S.write=function(k,h,f,u,p,w){var g,x,m,_=Math.LN2,T=Math.log,D=8*w-p-1,L=(1<<D)-1,M=L>>1,N=23===p?B(2,-24)-B(2,-77):0,I=u?0:w-1,P=u?1:-1,V=0>h||0===h&&0>1/h?1:0;for(h=F(h),isNaN(h)||h===1/0?(x=isNaN(h)?1:0,g=L):(g=G(T(h)/_),1>h*(m=B(2,-g))&&(g--,m*=2),2<=(h+=1<=g+M?N/m:N*B(2,1-M))*m&&(g++,m/=2),g+M>=L?(x=0,g=L):1<=g+M?(x=(h*m-1)*B(2,p),g+=M):(x=h*B(2,M-1)*B(2,p),g=0));8<=p;k[f+I]=255&x,I+=P,x/=256,p-=8);for(g=g<<p|x,D+=p;0<D;k[f+I]=255&g,I+=P,g/=256,D-=8);k[f+I-P]|=128*V}},{}],10:[function(C,b){b.exports="function"==typeof Object.create?function(S,k){k&&(S.super_=k,S.prototype=Object.create(k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,k){if(k){S.super_=k;var h=function(){};h.prototype=k.prototype,S.prototype=new h,S.prototype.constructor=S}}},{}],11:[function(C,b){var S=Math.round;function u(w,g,x,m){return S(w/x)+" "+m+(g>=1.5*x?"s":"")}b.exports=function(w,g){g=g||{};var x=typeof w;if("string"==x&&0<w.length)return function k(w){if(!(100<(w+="").length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(g){var x=parseFloat(g[1]),m=(g[2]||"ms").toLowerCase();return"years"===m||"year"===m||"yrs"===m||"yr"===m||"y"===m?315576e5*x:"weeks"===m||"week"===m||"w"===m?6048e5*x:"days"===m||"day"===m||"d"===m?864e5*x:"hours"===m||"hour"===m||"hrs"===m||"hr"===m||"h"===m?36e5*x:"minutes"===m||"minute"===m||"mins"===m||"min"===m||"m"===m?6e4*x:"seconds"===m||"second"===m||"secs"===m||"sec"===m||"s"===m?1e3*x:"milliseconds"===m||"millisecond"===m||"msecs"===m||"msec"===m||"ms"===m?x:void 0}}}(w);if("number"===x&&isFinite(w))return g.long?function f(w){var g=F(w);return 864e5<=g?u(w,g,864e5,"day"):36e5<=g?u(w,g,36e5,"hour"):6e4<=g?u(w,g,6e4,"minute"):1e3<=g?u(w,g,1e3,"second"):w+" ms"}(w):function h(w){var g=F(w);return 864e5<=g?S(w/864e5)+"d":36e5<=g?S(w/36e5)+"h":6e4<=g?S(w/6e4)+"m":1e3<=g?S(w/1e3)+"s":w+"ms"}(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))}},{}],12:[function(C,b){function S(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}function h(N){if(x===setTimeout)return setTimeout(N,0);if((x===S||!x)&&setTimeout)return x=setTimeout,setTimeout(N,0);try{return x(N,0)}catch(I){try{return x.call(null,N,0)}catch(P){return x.call(this,N,0)}}}function u(){L&&T&&(L=!1,T.length?D=T.concat(D):M=-1,D.length&&p())}function p(){if(!L){var N=h(u);L=!0;for(var I=D.length;I;){for(T=D,D=[];++M<I;)T&&T[M].run();M=-1,I=D.length}T=null,L=!1,function f(N){if(m===clearTimeout)return clearTimeout(N);if((m===k||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(N);try{return m(N)}catch(I){try{return m.call(null,N)}catch(P){return m.call(this,N)}}}(N)}}function w(N,I){this.fun=N,this.array=I}function g(){}var x,m,_=b.exports={};!function(){try{x="function"==typeof setTimeout?setTimeout:S}catch(N){x=S}try{m="function"==typeof clearTimeout?clearTimeout:k}catch(N){m=k}}();var T,D=[],L=!1,M=-1;_.nextTick=function(N){var I=Array(arguments.length-1);if(1<arguments.length)for(var P=1;P<arguments.length;P++)I[P-1]=arguments[P];D.push(new w(N,I)),1!==D.length||L||h(p)},w.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=g,_.addListener=g,_.once=g,_.off=g,_.removeListener=g,_.removeAllListeners=g,_.emit=g,_.prependListener=g,_.prependOnceListener=g,_.listeners=function(){return[]},_.binding=function(){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],13:[function(C,b){(function(S){(function(){let k;b.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?S:window):h=>(k||(k=Promise.resolve())).then(h).catch(f=>setTimeout(()=>{throw f},0))}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],14:[function(C,b){(function(S,k){(function(){"use strict";var h=C("safe-buffer").Buffer,f=k.crypto||k.msCrypto;b.exports=f&&f.getRandomValues?function(u,p){if(u>4294967295)throw new RangeError("requested too many random bytes");var w=h.allocUnsafe(u);if(0<u)if(65536<u)for(var g=0;g<u;g+=65536)f.getRandomValues(w.slice(g,g+65536));else f.getRandomValues(w);return"function"==typeof p?S.nextTick(function(){p(null,w)}):w}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,C("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{_process:12,"safe-buffer":30}],15:[function(C,b){"use strict";function k(g,x,m){m||(m=Error);var T=function(D){function L(M,N,I){return D.call(this,function _(D,L,M){return"string"==typeof x?x:x(D,L,M)}(M,N,I))||this}return function S(g,x){g.prototype=Object.create(x.prototype),g.prototype.constructor=g,g.__proto__=x}(L,D),L}(m);T.prototype.name=m.name,T.prototype.code=g,w[g]=T}function h(g,x){if(Array.isArray(g)){var m=g.length;return g=g.map(function(_){return _+""}),2<m?"one of ".concat(x," ").concat(g.slice(0,m-1).join(", "),", or ")+g[m-1]:2===m?"one of ".concat(x," ").concat(g[0]," or ").concat(g[1]):"of ".concat(x," ").concat(g[0])}return"of ".concat(x," ").concat(g+"")}var w={};k("ERR_INVALID_OPT_VALUE",function(g,x){return'The value "'+x+'" is invalid for option "'+g+'"'},TypeError),k("ERR_INVALID_ARG_TYPE",function(g,x,m){var _,T;if("string"==typeof x&&function f(g,x,m){return g.substr(!m||0>m?0:+m,x.length)===x}(x,"not ")?(_="must not be",x=x.replace(/^not /,"")):_="must be",function u(g,x,m){return(void 0===m||m>g.length)&&(m=g.length),g.substring(m-x.length,m)===x}(g," argument"))T="The ".concat(g," ").concat(_," ").concat(h(x,"type"));else{var D=function p(g,x,m){return"number"!=typeof m&&(m=0),!(m+x.length>g.length)&&-1!==g.indexOf(x,m)}(g,".")?"property":"argument";T='The "'.concat(g,'" ').concat(D," ").concat(_," ").concat(h(x,"type"))}return T+". Received type ".concat(typeof m)},TypeError),k("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),k("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),k("ERR_STREAM_PREMATURE_CLOSE","Premature close"),k("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),k("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),k("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),k("ERR_STREAM_WRITE_AFTER_END","write after end"),k("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),k("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),k("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),b.exports.codes=w},{}],16:[function(C,b){(function(S){(function(){"use strict";function k(_){return this instanceof k?(p.call(this,_),w.call(this,_),this.allowHalfOpen=!0,void(_&&(!1===_.readable&&(this.readable=!1),!1===_.writable&&(this.writable=!1),!1===_.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h))))):new k(_)}function h(){this._writableState.ended||S.nextTick(f,this)}function f(_){_.end()}var u=Object.keys||function(_){var T=[];for(var D in _)T.push(D);return T};b.exports=k;var p=C("./_stream_readable"),w=C("./_stream_writable");C("inherits")(k,p);for(var g,x=u(w.prototype),m=0;m<x.length;m++)k.prototype[g=x[m]]||(k.prototype[g]=w.prototype[g]);Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=_,this._writableState.destroyed=_)}})}).call(this)}).call(this,C("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(C,b){"use strict";function S(h){return this instanceof S?void k.call(this,h):new S(h)}b.exports=S;var k=C("./_stream_transform");C("inherits")(S,k),S.prototype._transform=function(h,f,u){u(null,h)}},{"./_stream_transform":19,inherits:10}],18:[function(C,b){(function(S,k){(function(){"use strict";function p(R,H,Z){pe=pe||C("./_stream_duplex"),"boolean"!=typeof Z&&(Z=H instanceof pe),this.objectMode=!!(R=R||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=ee(this,R,"readableHighWaterMark",Z),this.buffer=new He,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(!we&&(we=C("string_decoder/").StringDecoder),this.decoder=new we(R.encoding),this.encoding=R.encoding)}function w(R){if(pe=pe||C("./_stream_duplex"),!(this instanceof w))return new w(R);this._readableState=new p(R,this,this instanceof pe),this.readable=!0,R&&("function"==typeof R.read&&(this._read=R.read),"function"==typeof R.destroy&&(this._destroy=R.destroy)),Te.call(this)}function g(R,H,Z,Ae,Ke){fe("readableAddChunk",H);var ht,Re=R._readableState;if(null===H)Re.reading=!1,function D(R,H){if(fe("onEofChunk"),!H.ended){if(H.decoder){var Z=H.decoder.end();Z&&Z.length&&(H.buffer.push(Z),H.length+=H.objectMode?1:Z.length)}H.ended=!0,H.sync?L(R):(H.needReadable=!1,!H.emittedReadable&&(H.emittedReadable=!0,M(R)))}}(R,Re);else if(Ke||(ht=function m(R,H){var Z;return function f(R){return De.isBuffer(R)||R instanceof be}(H)||"string"==typeof H||void 0===H||R.objectMode||(Z=new $("chunk",["string","Buffer","Uint8Array"],H)),Z}(Re,H)),ht)X(R,ht);else if(Re.objectMode||H&&0<H.length)if("string"==typeof H||Re.objectMode||Object.getPrototypeOf(H)===De.prototype||(H=function h(R){return De.from(R)}(H)),Ae)Re.endEmitted?X(R,new te):x(R,Re,H,!0);else if(Re.ended)X(R,new se);else{if(Re.destroyed)return!1;Re.reading=!1,Re.decoder&&!Z?(H=Re.decoder.write(H),Re.objectMode||0!==H.length?x(R,Re,H,!1):N(R,Re)):x(R,Re,H,!1)}else Ae||(Re.reading=!1,N(R,Re));return!Re.ended&&(Re.length<Re.highWaterMark||0===Re.length)}function x(R,H,Z,Ae){H.flowing&&0===H.length&&!H.sync?(H.awaitDrain=0,R.emit("data",Z)):(H.length+=H.objectMode?1:Z.length,Ae?H.buffer.unshift(Z):H.buffer.push(Z),H.needReadable&&L(R)),N(R,H)}function T(R,H){return 0>=R||0===H.length&&H.ended?0:H.objectMode?1:R==R?(R>H.highWaterMark&&(H.highWaterMark=function _(R){return 1073741824<=R?R=1073741824:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}(R)),R<=H.length?R:H.ended?H.length:(H.needReadable=!0,0)):H.flowing&&H.length?H.buffer.head.data.length:H.length}function L(R){var H=R._readableState;fe("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(fe("emitReadable",H.flowing),H.emittedReadable=!0,S.nextTick(M,R))}function M(R){var H=R._readableState;fe("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(R.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,le(R)}function N(R,H){H.readingMore||(H.readingMore=!0,S.nextTick(I,R,H))}function I(R,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&0===H.length);){var Z=H.length;if(fe("maybeReadMore read 0"),R.read(0),Z===H.length)break}H.readingMore=!1}function V(R){var H=R._readableState;H.readableListening=0<R.listenerCount("readable"),H.resumeScheduled&&!H.paused?H.flowing=!0:0<R.listenerCount("data")&&R.resume()}function j(R){fe("readable nexttick read 0"),R.read(0)}function J(R,H){fe("resume",H.reading),H.reading||R.read(0),H.resumeScheduled=!1,R.emit("resume"),le(R),H.flowing&&!H.reading&&R.read(0)}function le(R){var H=R._readableState;for(fe("flow",H.flowing);H.flowing&&null!==R.read(););}function q(R,H){return 0===H.length?null:(H.objectMode?Z=H.buffer.shift():!R||R>=H.length?(Z=H.decoder?H.buffer.join(""):1===H.buffer.length?H.buffer.first():H.buffer.concat(H.length),H.buffer.clear()):Z=H.buffer.consume(R,H.decoder),Z);var Z}function ue(R){var H=R._readableState;fe("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,S.nextTick(he,H,R))}function he(R,H){if(fe("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&0===R.length&&(R.endEmitted=!0,H.readable=!1,H.emit("end"),R.autoDestroy)){var Z=H._writableState;(!Z||Z.autoDestroy&&Z.finished)&&H.destroy()}}function ce(R,H){for(var Z=0,Ae=R.length;Z<Ae;Z++)if(R[Z]===H)return Z;return-1}var pe;b.exports=w,w.ReadableState=p,C("events");var fe,_e=function(R,H){return R.listeners(H).length},Te=C("./internal/streams/stream"),De=C("buffer").Buffer,be=k.Uint8Array||function(){},de=C("util");fe=de&&de.debuglog?de.debuglog("stream"):function(){};var we,Ye,ze,He=C("./internal/streams/buffer_list"),Ne=C("./internal/streams/destroy"),ee=C("./internal/streams/state").getHighWaterMark,ie=C("../errors").codes,$=ie.ERR_INVALID_ARG_TYPE,se=ie.ERR_STREAM_PUSH_AFTER_EOF,K=ie.ERR_METHOD_NOT_IMPLEMENTED,te=ie.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;C("inherits")(w,Te);var X=Ne.errorOrDestroy,me=["error","close","destroy","pause","resume"];Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),w.prototype.destroy=Ne.destroy,w.prototype._undestroy=Ne.undestroy,w.prototype._destroy=function(R,H){H(R)},w.prototype.push=function(R,H){var Z,Ae=this._readableState;return Ae.objectMode?Z=!0:"string"==typeof R&&((H=H||Ae.defaultEncoding)!==Ae.encoding&&(R=De.from(R,H),H=""),Z=!0),g(this,R,H,!1,Z)},w.prototype.unshift=function(R){return g(this,R,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(R){we||(we=C("string_decoder/").StringDecoder);var H=new we(R);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var Z=this._readableState.buffer.head,Ae="";null!==Z;)Ae+=H.write(Z.data),Z=Z.next;return this._readableState.buffer.clear(),""!==Ae&&this._readableState.buffer.push(Ae),this._readableState.length=Ae.length,this},w.prototype.read=function(R){fe("read",R),R=parseInt(R,10);var H=this._readableState,Z=R;if(0!==R&&(H.emittedReadable=!1),0===R&&H.needReadable&&((0===H.highWaterMark?0<H.length:H.length>=H.highWaterMark)||H.ended))return fe("read: emitReadable",H.length,H.ended),0===H.length&&H.ended?ue(this):L(this),null;if(0===(R=T(R,H))&&H.ended)return 0===H.length&&ue(this),null;var Ke,Ae=H.needReadable;return fe("need readable",Ae),(0===H.length||H.length-R<H.highWaterMark)&&fe("length less than watermark",Ae=!0),H.ended||H.reading?fe("reading or ended",Ae=!1):Ae&&(fe("do read"),H.reading=!0,H.sync=!0,0===H.length&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,!H.reading&&(R=T(Z,H))),null===(Ke=0<R?q(R,H):null)?(H.needReadable=H.length<=H.highWaterMark,R=0):(H.length-=R,H.awaitDrain=0),0===H.length&&(!H.ended&&(H.needReadable=!0),Z!==R&&H.ended&&ue(this)),null!==Ke&&this.emit("data",Ke),Ke},w.prototype._read=function(){X(this,new K("_read()"))},w.prototype.pipe=function(R,H){function Z(Fr,Kn){fe("onunpipe"),Fr===Ie&&Kn&&!1===Kn.hasUnpiped&&(Kn.hasUnpiped=!0,function Ke(){fe("cleanup"),R.removeListener("close",Et),R.removeListener("finish",Ft),R.removeListener("drain",ni),R.removeListener("error",ht),R.removeListener("unpipe",Z),Ie.removeListener("end",Ae),Ie.removeListener("end",ln),Ie.removeListener("data",Re),zi=!0,bn.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&ni()}())}function Ae(){fe("onend"),R.end()}function Re(Fr){fe("ondata");var Kn=R.write(Fr);fe("dest.write",Kn),!1===Kn&&((1===bn.pipesCount&&bn.pipes===R||1<bn.pipesCount&&-1!==ce(bn.pipes,R))&&!zi&&(fe("false write response, pause",bn.awaitDrain),bn.awaitDrain++),Ie.pause())}function ht(Fr){fe("onerror",Fr),ln(),R.removeListener("error",ht),0===_e(R,"error")&&X(R,Fr)}function Et(){R.removeListener("finish",Ft),ln()}function Ft(){fe("onfinish"),R.removeListener("close",Et),ln()}function ln(){fe("unpipe"),Ie.unpipe(R)}var Ie=this,bn=this._readableState;switch(bn.pipesCount){case 0:bn.pipes=R;break;case 1:bn.pipes=[bn.pipes,R];break;default:bn.pipes.push(R)}bn.pipesCount+=1,fe("pipe count=%d opts=%j",bn.pipesCount,H);var xt=H&&!1===H.end||R===S.stdout||R===S.stderr?ln:Ae;bn.endEmitted?S.nextTick(xt):Ie.once("end",xt),R.on("unpipe",Z);var ni=function P(R){return function(){var H=R._readableState;fe("pipeOnDrain",H.awaitDrain),H.awaitDrain&&H.awaitDrain--,0===H.awaitDrain&&_e(R,"data")&&(H.flowing=!0,le(R))}}(Ie);R.on("drain",ni);var zi=!1;return Ie.on("data",Re),function u(R,H,Z){return"function"==typeof R.prependListener?R.prependListener(H,Z):void(R._events&&R._events[H]?Array.isArray(R._events[H])?R._events[H].unshift(Z):R._events[H]=[Z,R._events[H]]:R.on(H,Z))}(R,"error",ht),R.once("close",Et),R.once("finish",Ft),R.emit("pipe",Ie),bn.flowing||(fe("pipe resume"),Ie.resume()),R},w.prototype.unpipe=function(R){var H=this._readableState,Z={hasUnpiped:!1};if(0===H.pipesCount)return this;if(1===H.pipesCount)return R&&R!==H.pipes||(R||(R=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,R&&R.emit("unpipe",this,Z)),this;if(!R){var Ae=H.pipes,Ke=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var Re=0;Re<Ke;Re++)Ae[Re].emit("unpipe",this,{hasUnpiped:!1});return this}var ht=ce(H.pipes,R);return-1===ht||(H.pipes.splice(ht,1),H.pipesCount-=1,1===H.pipesCount&&(H.pipes=H.pipes[0]),R.emit("unpipe",this,Z)),this},w.prototype.addListener=w.prototype.on=function(R,H){var Z=Te.prototype.on.call(this,R,H),Ae=this._readableState;return"data"===R?(Ae.readableListening=0<this.listenerCount("readable"),!1!==Ae.flowing&&this.resume()):"readable"==R&&!Ae.endEmitted&&!Ae.readableListening&&(Ae.readableListening=Ae.needReadable=!0,Ae.flowing=!1,Ae.emittedReadable=!1,fe("on readable",Ae.length,Ae.reading),Ae.length?L(this):!Ae.reading&&S.nextTick(j,this)),Z},w.prototype.removeListener=function(R,H){var Z=Te.prototype.removeListener.call(this,R,H);return"readable"===R&&S.nextTick(V,this),Z},w.prototype.removeAllListeners=function(R){var H=Te.prototype.removeAllListeners.apply(this,arguments);return("readable"===R||void 0===R)&&S.nextTick(V,this),H},w.prototype.resume=function(){var R=this._readableState;return R.flowing||(fe("resume"),R.flowing=!R.readableListening,function oe(R,H){H.resumeScheduled||(H.resumeScheduled=!0,S.nextTick(J,R,H))}(this,R)),R.paused=!1,this},w.prototype.pause=function(){return fe("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(fe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(R){var H=this,Z=this._readableState,Ae=!1;for(var Ke in R.on("end",function(){if(fe("wrapped end"),Z.decoder&&!Z.ended){var ht=Z.decoder.end();ht&&ht.length&&H.push(ht)}H.push(null)}),R.on("data",function(ht){fe("wrapped data"),Z.decoder&&(ht=Z.decoder.write(ht)),Z.objectMode&&null==ht||!(Z.objectMode||ht&&ht.length)||H.push(ht)||(Ae=!0,R.pause())}),R)void 0===this[Ke]&&"function"==typeof R[Ke]&&(this[Ke]=function(ht){return function(){return R[ht].apply(R,arguments)}}(Ke));for(var Re=0;Re<me.length;Re++)R.on(me[Re],this.emit.bind(this,me[Re]));return this._read=function(ht){fe("wrapped _read",ht),Ae&&(Ae=!1,R.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===Ye&&(Ye=C("./internal/streams/async_iterator")),Ye(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),w._fromList=q,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(R,H){return void 0===ze&&(ze=C("./internal/streams/from")),ze(w,R,H)})}).call(this)}).call(this,C("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(C,b){"use strict";function S(_,T){var D=this._transformState;D.transforming=!1;var L=D.writecb;if(null===L)return this.emit("error",new w);D.writechunk=null,D.writecb=null,null!=T&&this.push(T),L(_);var M=this._readableState;M.reading=!1,(M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}function k(_){return this instanceof k?(m.call(this,_),this._transformState={afterTransform:S.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&("function"==typeof _.transform&&(this._transform=_.transform),"function"==typeof _.flush&&(this._flush=_.flush)),void this.on("prefinish",h)):new k(_)}function h(){var _=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(T,D){f(_,T,D)})}function f(_,T,D){if(T)return _.emit("error",T);if(null!=D&&_.push(D),_._writableState.length)throw new x;if(_._transformState.transforming)throw new g;return _.push(null)}b.exports=k;var u=C("../errors").codes,p=u.ERR_METHOD_NOT_IMPLEMENTED,w=u.ERR_MULTIPLE_CALLBACK,g=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=u.ERR_TRANSFORM_WITH_LENGTH_0,m=C("./_stream_duplex");C("inherits")(k,m),k.prototype.push=function(_,T){return this._transformState.needTransform=!1,m.prototype.push.call(this,_,T)},k.prototype._transform=function(_,T,D){D(new p("_transform()"))},k.prototype._write=function(_,T,D){var L=this._transformState;if(L.writecb=D,L.writechunk=_,L.writeencoding=T,!L.transforming){var M=this._readableState;(L.needTransform||M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}},k.prototype._read=function(){var _=this._transformState;null===_.writechunk||_.transforming?_.needTransform=!0:(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform))},k.prototype._destroy=function(_,T){m.prototype._destroy.call(this,_,function(D){T(D)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(C,b){(function(S,k){(function(){"use strict";function h(se){var K=this;this.next=null,this.entry=null,this.finish=function(){!function ue(se,K,te){var X=se.entry;for(se.entry=null;X;){var me=X.callback;K.pendingcb--,me(te),X=X.next}K.corkedRequestsFree.next=se}(K,se)}}function p(){}function w(se,K,te){he=he||C("./_stream_duplex"),"boolean"!=typeof te&&(te=K instanceof he),this.objectMode=!!(se=se||{}).objectMode,te&&(this.objectMode=this.objectMode||!!se.writableObjectMode),this.highWaterMark=De(this,se,"writableHighWaterMark",te),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===se.decodeStrings),this.defaultEncoding=se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(me){!function N(se,K){var te=se._writableState,X=te.sync,me=te.writecb;if("function"!=typeof me)throw new Ye;if(function M(se){se.writing=!1,se.writecb=null,se.length-=se.writelen,se.writelen=0}(te),K)!function L(se,K,te,X,me){--K.pendingcb,te?(S.nextTick(me,X),S.nextTick(le,se,K),se._writableState.errorEmitted=!0,ie(se,X)):(me(X),se._writableState.errorEmitted=!0,ie(se,X),le(se,K))}(se,te,X,K,me);else{var R=j(te)||se.destroyed;R||te.corked||te.bufferProcessing||!te.bufferedRequest||V(se,te),X?S.nextTick(I,se,te,R,me):I(se,te,R,me)}}(K,me)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==se.emitClose,this.autoDestroy=!!se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function g(se){var K=this instanceof(he=he||C("./_stream_duplex"));return K||$.call(g,this)?(this._writableState=new w(se,this,K),this.writable=!0,se&&("function"==typeof se.write&&(this._write=se.write),"function"==typeof se.writev&&(this._writev=se.writev),"function"==typeof se.destroy&&(this._destroy=se.destroy),"function"==typeof se.final&&(this._final=se.final)),void pe.call(this)):new g(se)}function T(se,K,te,X,me,R){if(!te){var H=function _(se,K,te){return se.objectMode||!1===se.decodeStrings||"string"!=typeof K||(K=fe.from(K,te)),K}(K,X,me);X!==H&&(te=!0,me="buffer",X=H)}var Z=K.objectMode?1:X.length;K.length+=Z;var Ae=K.length<K.highWaterMark;if(Ae||(K.needDrain=!0),K.writing||K.corked){var Ke=K.lastBufferedRequest;K.lastBufferedRequest={chunk:X,encoding:me,isBuf:te,callback:R,next:null},Ke?Ke.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else D(se,K,!1,Z,X,me,R);return Ae}function D(se,K,te,X,me,R,H){K.writelen=X,K.writecb=H,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new He("write")):te?se._writev(me,K.onwrite):se._write(me,R,K.onwrite),K.sync=!1}function I(se,K,te,X){te||function P(se,K){0===K.length&&K.needDrain&&(K.needDrain=!1,se.emit("drain"))}(se,K),K.pendingcb--,X(),le(se,K)}function V(se,K){K.bufferProcessing=!0;var te=K.bufferedRequest;if(se._writev&&te&&te.next){var me=Array(K.bufferedRequestCount),R=K.corkedRequestsFree;R.entry=te;for(var H=0,Z=!0;te;)me[H]=te,te.isBuf||(Z=!1),te=te.next,H+=1;me.allBuffers=Z,D(se,K,!0,K.length,me,"",R.finish),K.pendingcb++,K.lastBufferedRequest=null,R.next?(K.corkedRequestsFree=R.next,R.next=null):K.corkedRequestsFree=new h(K),K.bufferedRequestCount=0}else{for(;te;){var Ae=te.chunk;if(D(se,K,!1,K.objectMode?1:Ae.length,Ae,te.encoding,te.callback),te=te.next,K.bufferedRequestCount--,K.writing)break}null===te&&(K.lastBufferedRequest=null)}K.bufferedRequest=te,K.bufferProcessing=!1}function j(se){return se.ending&&0===se.length&&null===se.bufferedRequest&&!se.finished&&!se.writing}function oe(se,K){se._final(function(te){K.pendingcb--,te&&ie(se,te),K.prefinished=!0,se.emit("prefinish"),le(se,K)})}function le(se,K){var te=j(K);if(te&&(function J(se,K){K.prefinished||K.finalCalled||("function"!=typeof se._final||K.destroyed?(K.prefinished=!0,se.emit("prefinish")):(K.pendingcb++,K.finalCalled=!0,S.nextTick(oe,se,K)))}(se,K),0===K.pendingcb&&(K.finished=!0,se.emit("finish"),K.autoDestroy))){var X=se._readableState;(!X||X.autoDestroy&&X.endEmitted)&&se.destroy()}return te}var he;b.exports=g,g.WritableState=w;var $,ce={deprecate:C("util-deprecate")},pe=C("./internal/streams/stream"),fe=C("buffer").Buffer,Ee=k.Uint8Array||function(){},_e=C("./internal/streams/destroy"),De=C("./internal/streams/state").getHighWaterMark,be=C("../errors").codes,de=be.ERR_INVALID_ARG_TYPE,we=be.ERR_METHOD_NOT_IMPLEMENTED,Ye=be.ERR_MULTIPLE_CALLBACK,ze=be.ERR_STREAM_CANNOT_PIPE,He=be.ERR_STREAM_DESTROYED,Ne=be.ERR_STREAM_NULL_VALUES,ye=be.ERR_STREAM_WRITE_AFTER_END,ee=be.ERR_UNKNOWN_ENCODING,ie=_e.errorOrDestroy;C("inherits")(g,pe),w.prototype.getBuffer=function(){for(var se=this.bufferedRequest,K=[];se;)K.push(se),se=se.next;return K},function(){try{Object.defineProperty(w.prototype,"buffer",{get:ce.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(se){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(se){return!!$.call(this,se)||this===g&&se&&se._writableState instanceof w}})):$=function(se){return se instanceof this},g.prototype.pipe=function(){ie(this,new ze)},g.prototype.write=function(se,K,te){var X=this._writableState,me=!1,R=!X.objectMode&&function u(se){return fe.isBuffer(se)||se instanceof Ee}(se);return R&&!fe.isBuffer(se)&&(se=function f(se){return fe.from(se)}(se)),"function"==typeof K&&(te=K,K=null),R?K="buffer":!K&&(K=X.defaultEncoding),"function"!=typeof te&&(te=p),X.ending?function x(se,K){var te=new ye;ie(se,te),S.nextTick(K,te)}(this,te):(R||function m(se,K,te,X){var me;return null===te?me=new Ne:"string"!=typeof te&&!K.objectMode&&(me=new de("chunk",["string","Buffer"],te)),!me||(ie(se,me),S.nextTick(X,me),!1)}(this,X,se,te))&&(X.pendingcb++,me=T(this,X,R,se,K,te)),me},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var se=this._writableState;se.corked&&(se.corked--,!se.writing&&!se.corked&&!se.bufferProcessing&&se.bufferedRequest&&V(this,se))},g.prototype.setDefaultEncoding=function(se){if("string"==typeof se&&(se=se.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((se+"").toLowerCase())))throw new ee(se);return this._writableState.defaultEncoding=se,this},Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(se,K,te){te(new we("_write()"))},g.prototype._writev=null,g.prototype.end=function(se,K,te){var X=this._writableState;return"function"==typeof se?(te=se,se=null,K=null):"function"==typeof K&&(te=K,K=null),null!=se&&this.write(se,K),X.corked&&(X.corked=1,this.uncork()),X.ending||function q(se,K,te){K.ending=!0,le(se,K),te&&(K.finished?S.nextTick(te):se.once("finish",te)),K.ended=!0,se.writable=!1}(this,X,te),this},Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(se){this._writableState&&(this._writableState.destroyed=se)}}),g.prototype.destroy=_e.destroy,g.prototype._undestroy=_e.undestroy,g.prototype._destroy=function(se,K){K(se)}}).call(this)}).call(this,C("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(C,b){(function(S){(function(){"use strict";function k(P,V,j){return V in P?Object.defineProperty(P,V,{value:j,enumerable:!0,configurable:!0,writable:!0}):P[V]=j,P}function h(P,V){return{value:P,done:V}}function f(P){var V=P[x];if(null!==V){var j=P[M].read();null!==j&&(P[D]=null,P[x]=null,P[m]=null,V(h(j,!1)))}}function u(P){S.nextTick(f,P)}var w,g=C("./end-of-stream"),x=Symbol("lastResolve"),m=Symbol("lastReject"),_=Symbol("error"),T=Symbol("ended"),D=Symbol("lastPromise"),L=Symbol("handlePromise"),M=Symbol("stream"),N=Object.getPrototypeOf(function(){}),I=Object.setPrototypeOf((k(w={get stream(){return this[M]},next:function(){var P=this,V=this[_];if(null!==V)return Promise.reject(V);if(this[T])return Promise.resolve(h(void 0,!0));if(this[M].destroyed)return new Promise(function(le,q){S.nextTick(function(){P[_]?q(P[_]):le(h(void 0,!0))})});var j,oe=this[D];if(oe)j=new Promise(function p(P,V){return function(j,oe){P.then(function(){return V[T]?void j(h(void 0,!0)):void V[L](j,oe)},oe)}}(oe,this));else{var J=this[M].read();if(null!==J)return Promise.resolve(h(J,!1));j=new Promise(this[L])}return this[D]=j,j}},Symbol.asyncIterator,function(){return this}),k(w,"return",function(){var P=this;return new Promise(function(V,j){P[M].destroy(null,function(oe){return oe?void j(oe):void V(h(void 0,!0))})})}),w),N);b.exports=function(P){var V,j=Object.create(I,(k(V={},M,{value:P,writable:!0}),k(V,x,{value:null,writable:!0}),k(V,m,{value:null,writable:!0}),k(V,_,{value:null,writable:!0}),k(V,T,{value:P._readableState.endEmitted,writable:!0}),k(V,L,{value:function(oe,J){var le=j[M].read();le?(j[D]=null,j[x]=null,j[m]=null,oe(h(le,!1))):(j[x]=oe,j[m]=J)},writable:!0}),V));return j[D]=null,g(P,function(oe){if(oe&&"ERR_STREAM_PREMATURE_CLOSE"!==oe.code){var J=j[m];return null!==J&&(j[D]=null,j[x]=null,j[m]=null,J(oe)),void(j[_]=oe)}var le=j[x];null!==le&&(j[D]=null,j[x]=null,j[m]=null,le(h(void 0,!0))),j[T]=!0}),P.on("readable",u.bind(null,j)),j}}).call(this)}).call(this,C("_process"))},{"./end-of-stream":24,_process:12}],22:[function(C,b){"use strict";function S(D,L){var M=Object.keys(D);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(D);L&&(N=N.filter(function(I){return Object.getOwnPropertyDescriptor(D,I).enumerable})),M.push.apply(M,N)}return M}function h(D,L,M){return L in D?Object.defineProperty(D,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):D[L]=M,D}function u(D,L){for(var M,N=0;N<L.length;N++)(M=L[N]).enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(D,M.key,M)}function w(D,L,M){x.prototype.copy.call(D,L,M)}var x=C("buffer").Buffer,_=C("util").inspect,T=_&&_.custom||"inspect";b.exports=function(){function D(){(function f(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}return function p(D,L,M){return L&&u(D.prototype,L),M&&u(D,M),D}(D,[{key:"push",value:function(L){var M={data:L,next:null};0<this.length?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(L){var M={data:L,next:this.head};0===this.length&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(0!==this.length){var L=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,L}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(L){if(0===this.length)return"";for(var M=this.head,N=""+M.data;M=M.next;)N+=L+M.data;return N}},{key:"concat",value:function(L){if(0===this.length)return x.alloc(0);for(var M=x.allocUnsafe(L>>>0),N=this.head,I=0;N;)w(N.data,M,I),I+=N.data.length,N=N.next;return M}},{key:"consume",value:function(L,M){var N;return L<this.head.data.length?(N=this.head.data.slice(0,L),this.head.data=this.head.data.slice(L)):N=L===this.head.data.length?this.shift():M?this._getString(L):this._getBuffer(L),N}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(L){var M=this.head,N=1,I=M.data;for(L-=I.length;M=M.next;){var P=M.data,V=L>P.length?P.length:L;if(I+=V===P.length?P:P.slice(0,L),0==(L-=V)){V===P.length?(++N,this.head=M.next?M.next:this.tail=null):(this.head=M,M.data=P.slice(V));break}++N}return this.length-=N,I}},{key:"_getBuffer",value:function(L){var M=x.allocUnsafe(L),N=this.head,I=1;for(N.data.copy(M),L-=N.data.length;N=N.next;){var P=N.data,V=L>P.length?P.length:L;if(P.copy(M,M.length-L,0,V),0==(L-=V)){V===P.length?(++I,this.head=N.next?N.next:this.tail=null):(this.head=N,N.data=P.slice(V));break}++I}return this.length-=I,M}},{key:T,value:function(L,M){return _(this,function k(D){for(var L,M=1;M<arguments.length;M++)L=null==arguments[M]?{}:arguments[M],M%2?S(Object(L),!0).forEach(function(N){h(D,N,L[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(L)):S(Object(L)).forEach(function(N){Object.defineProperty(D,N,Object.getOwnPropertyDescriptor(L,N))});return D}({},M,{depth:0,customInspect:!1}))}}]),D}()},{buffer:3,util:2}],23:[function(C,b){(function(S){(function(){"use strict";function k(u,p){f(u,p),h(u)}function h(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function f(u,p){u.emit("error",p)}b.exports={destroy:function(u,p){var w=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(p?p(u):u&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,S.nextTick(f,this,u)):S.nextTick(f,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(m){!p&&m?w._writableState?w._writableState.errorEmitted?S.nextTick(h,w):(w._writableState.errorEmitted=!0,S.nextTick(k,w,m)):S.nextTick(k,w,m):p?(S.nextTick(h,w),p(m)):S.nextTick(h,w)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,p){var w=u._readableState,g=u._writableState;w&&w.autoDestroy||g&&g.autoDestroy?u.destroy(p):u.emit("error",p)}}}).call(this)}).call(this,C("_process"))},{_process:12}],24:[function(C,b){"use strict";function k(){}var u=C("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;b.exports=function f(p,w,g){if("function"==typeof w)return f(p,null,w);w||(w={}),g=function S(p){var w=!1;return function(){if(!w){w=!0;for(var g=arguments.length,x=Array(g),m=0;m<g;m++)x[m]=arguments[m];p.apply(this,x)}}}(g||k);var x=w.readable||!1!==w.readable&&p.readable,m=w.writable||!1!==w.writable&&p.writable,_=function(){p.writable||D()},T=p._writableState&&p._writableState.finished,D=function(){m=!1,T=!0,x||g.call(p)},L=p._readableState&&p._readableState.endEmitted,M=function(){x=!1,L=!0,m||g.call(p)},N=function(V){g.call(p,V)},I=function(){var V;return x&&!L?(p._readableState&&p._readableState.ended||(V=new u),g.call(p,V)):m&&!T?(p._writableState&&p._writableState.ended||(V=new u),g.call(p,V)):void 0},P=function(){p.req.on("finish",D)};return function h(p){return p.setHeader&&"function"==typeof p.abort}(p)?(p.on("complete",D),p.on("abort",I),p.req?P():p.on("request",P)):m&&!p._writableState&&(p.on("end",_),p.on("close",_)),p.on("end",M),p.on("finish",D),!1!==w.error&&p.on("error",N),p.on("close",I),function(){p.removeListener("complete",D),p.removeListener("abort",I),p.removeListener("request",P),p.req&&p.req.removeListener("finish",D),p.removeListener("end",_),p.removeListener("close",_),p.removeListener("finish",D),p.removeListener("end",M),p.removeListener("error",N),p.removeListener("close",I)}}},{"../../../errors":15}],25:[function(C,b){b.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(C,b){"use strict";function k(T){if(T)throw T}function f(T,D,L,M){M=function S(T){var D=!1;return function(){D||(D=!0,T.apply(void 0,arguments))}}(M);var N=!1;T.on("close",function(){N=!0}),void 0===g&&(g=C("./end-of-stream")),g(T,{readable:D,writable:L},function(P){return P?M(P):(N=!0,void M())});var I=!1;return function(P){if(!N)return I?void 0:(I=!0,function h(T){return T.setHeader&&"function"==typeof T.abort}(T)?T.abort():"function"==typeof T.destroy?T.destroy():void M(P||new _("pipe")))}}function u(T){T()}function p(T,D){return T.pipe(D)}function w(T){return T.length&&"function"==typeof T[T.length-1]?T.pop():k}var g,x=C("../../../errors").codes,m=x.ERR_MISSING_ARGS,_=x.ERR_STREAM_DESTROYED;b.exports=function(){for(var T=arguments.length,D=Array(T),L=0;L<T;L++)D[L]=arguments[L];var M=w(D);if(Array.isArray(D[0])&&(D=D[0]),2>D.length)throw new m("streams");var N,I=D.map(function(P,V){var j=V<D.length-1;return f(P,j,0<V,function(oe){N||(N=oe),oe&&I.forEach(u),j||(I.forEach(u),M(N))})});return D.reduce(p)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(C,b){"use strict";var k=C("../../../errors").codes.ERR_INVALID_OPT_VALUE;b.exports={getHighWaterMark:function(h,f,u,p){var w=function S(h,f,u){return null==h.highWaterMark?f?h[u]:null:h.highWaterMark}(f,p,u);if(null!=w){if(!isFinite(w)||G(w)!==w||0>w)throw new k(p?u:"highWaterMark",w);return G(w)}return h.objectMode?16:16384}}},{"../../../errors":15}],28:[function(C,b){b.exports=C("events").EventEmitter},{events:7}],29:[function(C,b,S){(S=b.exports=C("./lib/_stream_readable.js")).Stream=S,S.Readable=S,S.Writable=C("./lib/_stream_writable.js"),S.Duplex=C("./lib/_stream_duplex.js"),S.Transform=C("./lib/_stream_transform.js"),S.PassThrough=C("./lib/_stream_passthrough.js"),S.finished=C("./lib/internal/streams/end-of-stream.js"),S.pipeline=C("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(C,b,S){function k(p,w){for(var g in p)w[g]=p[g]}function h(p,w,g){return u(p,w,g)}var f=C("buffer"),u=f.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?b.exports=f:(k(f,S),S.Buffer=h),h.prototype=Object.create(u.prototype),k(u,h),h.from=function(p,w,g){if("number"==typeof p)throw new TypeError("Argument must not be a number");return u(p,w,g)},h.alloc=function(p,w,g){if("number"!=typeof p)throw new TypeError("Argument must be a number");var x=u(p);return void 0===w?x.fill(0):"string"==typeof g?x.fill(w,g):x.fill(w),x},h.allocUnsafe=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return u(p)},h.allocUnsafeSlow=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return f.SlowBuffer(p)}},{buffer:3}],31:[function(C,b,S){"use strict";function f(I){var P;switch(this.encoding=function h(I){var P=function k(I){if(!I)return"utf8";for(var P;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(P)return;I=(""+I).toLowerCase(),P=!0}}(I);if("string"!=typeof P&&(M.isEncoding===N||!N(I)))throw new Error("Unknown encoding: "+I);return P||I}(I),this.encoding){case"utf16le":this.text=x,this.end=m,P=4;break;case"utf8":this.fillLast=g,P=4;break;case"base64":this.text=_,this.end=T,P=3;break;default:return this.write=D,void(this.end=L)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(P)}function u(I){return 127>=I?0:I>>5==6?2:I>>4==14?3:I>>3==30?4:I>>6==2?-1:-2}function g(I){var P=this.lastTotal-this.lastNeed,V=function w(I,P){if(128!=(192&P[0]))return I.lastNeed=0,"\ufffd";if(1<I.lastNeed&&1<P.length){if(128!=(192&P[1]))return I.lastNeed=1,"\ufffd";if(2<I.lastNeed&&2<P.length&&128!=(192&P[2]))return I.lastNeed=2,"\ufffd"}}(this,I);return void 0===V?this.lastNeed<=I.length?(I.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(I.copy(this.lastChar,P,0,I.length),void(this.lastNeed-=I.length)):V}function x(I,P){if((I.length-P)%2==0){var V=I.toString("utf16le",P);if(V){var j=V.charCodeAt(V.length-1);if(55296<=j&&56319>=j)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],V.slice(0,-1)}return V}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",P,I.length-1)}function m(I){var P=I&&I.length?this.write(I):"";return this.lastNeed?P+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):P}function _(I,P){var V=(I.length-P)%3;return 0==V?I.toString("base64",P):(this.lastNeed=3-V,this.lastTotal=3,1==V?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",P,I.length-V))}function T(I){var P=I&&I.length?this.write(I):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function D(I){return I.toString(this.encoding)}function L(I){return I&&I.length?this.write(I):""}var M=C("safe-buffer").Buffer,N=M.isEncoding||function(I){switch((I=""+I)&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};S.StringDecoder=f,f.prototype.write=function(I){if(0===I.length)return"";var P,V;if(this.lastNeed){if(void 0===(P=this.fillLast(I)))return"";V=this.lastNeed,this.lastNeed=0}else V=0;return V<I.length?P?P+this.text(I,V):this.text(I,V):P||""},f.prototype.end=function(I){var P=I&&I.length?this.write(I):"";return this.lastNeed?P+"\ufffd":P},f.prototype.text=function(I,P){var V=function p(I,P,V){var j=P.length-1;if(j<V)return 0;var oe=u(P[j]);return 0<=oe?(0<oe&&(I.lastNeed=oe-1),oe):--j<V||-2===oe?0:0<=(oe=u(P[j]))?(0<oe&&(I.lastNeed=oe-2),oe):--j<V||-2===oe?0:0<=(oe=u(P[j]))?(0<oe&&(2===oe?oe=0:I.lastNeed=oe-3),oe):0}(this,I,P);if(!this.lastNeed)return I.toString("utf8",P);this.lastTotal=V;var j=I.length-(V-this.lastNeed);return I.copy(this.lastChar,0,j),I.toString("utf8",P,j)},f.prototype.fillLast=function(I){return this.lastNeed<=I.length?(I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),void(this.lastNeed-=I.length))}},{"safe-buffer":30}],32:[function(C,b){(function(S){(function(){function k(h){try{if(!S.localStorage)return!1}catch(u){return!1}var f=S.localStorage[h];return null!=f&&"true"===(f+"").toLowerCase()}b.exports=function(h,f){if(k("noDeprecation"))return h;var p=!1;return function u(){if(!p){if(k("throwDeprecation"))throw new Error(f);k("traceDeprecation")?console.trace(f):console.warn(f),p=!0}return h.apply(this,arguments)}}}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],"/":[function(C,b){function S(T){return T.replace(/a=ice-options:trickle\s\n/g,"")}const h=C("debug")("simple-peer"),f=C("get-browser-rtc"),u=C("randombytes"),p=C("readable-stream"),w=C("queue-microtask"),g=C("err-code"),{Buffer:x}=C("buffer"),m=65536;class _ extends p.Duplex{constructor(D){if(super(D=Object.assign({allowHalfOpen:!1},D)),this._id=u(4).toString("hex").slice(0,7),this._debug("new peer %o",D),this.channelName=D.initiator?D.channelName||u(20).toString("hex"):null,this.initiator=D.initiator||!1,this.channelConfig=D.channelConfig||_.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},_.config,D.config),this.offerOptions=D.offerOptions||{},this.answerOptions=D.answerOptions||{},this.sdpTransform=D.sdpTransform||(L=>L),this.streams=D.streams||(D.stream?[D.stream]:[]),this.trickle=void 0===D.trickle||D.trickle,this.allowHalfTrickle=void 0!==D.allowHalfTrickle&&D.allowHalfTrickle,this.iceCompleteTimeout=D.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=D.wrtc&&"object"==typeof D.wrtc?D.wrtc:f(),!this._wrtc)throw g("undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(L){return void this.destroy(g(L,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=L=>{this._onIceCandidate(L)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(L=>{this.destroy(g(L,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=L=>{this._setupData(L)},this.streams&&this.streams.forEach(L=>{this.addStream(L)}),this._pc.ontrack=L=>{this._onTrack(L)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(D){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof D)try{D=JSON.parse(D)}catch(L){D={}}this._debug("signal()"),D.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),D.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(D.transceiverRequest.kind,D.transceiverRequest.init)),D.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(D.candidate):this._pendingCandidates.push(D.candidate)),D.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(D)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(L=>{this._addIceCandidate(L)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(L=>{this.destroy(g(L,"ERR_SET_REMOTE_DESCRIPTION"))}),D.sdp||D.candidate||D.renegotiate||D.transceiverRequest||this.destroy(g(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(D){const L=new this._wrtc.RTCIceCandidate(D);this._pc.addIceCandidate(L).catch(M=>{!L.address||L.address.endsWith(".local")?function k(T){console.warn(T)}("Ignoring unsupported ICE candidate."):this.destroy(g(M,"ERR_ADD_ICE_CANDIDATE"))})}send(D){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(D)}}addTransceiver(D,L){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(D,L),this._needsNegotiation()}catch(M){this.destroy(g(M,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:D,init:L}})}}addStream(D){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),D.getTracks().forEach(L=>{this.addTrack(L,D)})}}addTrack(D,L){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const M=this._senderMap.get(D)||new Map;let N=M.get(L);if(N)throw N.removed?g(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):g(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");N=this._pc.addTrack(D,L),M.set(L,N),this._senderMap.set(D,M),this._needsNegotiation()}replaceTrack(D,L,M){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const N=this._senderMap.get(D),I=N?N.get(M):null;if(!I)throw g(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");L&&this._senderMap.set(L,N),null==I.replaceTrack?this.destroy(g(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):I.replaceTrack(L)}removeTrack(D,L){if(this.destroying)return;if(this.destroyed)throw g(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const M=this._senderMap.get(D),N=M?M.get(L):null;if(!N)throw g(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{N.removed=!0,this._pc.removeTrack(N)}catch(I){"NS_ERROR_UNEXPECTED"===I.name?this._sendersAwaitingStable.push(N):this.destroy(g(I,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(D){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),D.getTracks().forEach(L=>{this.removeTrack(L,D)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,w(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw g(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(D){this._destroy(D,()=>{})}_destroy(D,L){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",D&&(D.message||D)),w(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",D&&(D.message||D)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(M){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(M){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,D&&this.emit("error",D),this.emit("close"),L()}))}_setupData(D){if(!D.channel)return this.destroy(g(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=D.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=m),this.channelName=this._channel.label,this._channel.onmessage=M=>{this._onChannelMessage(M)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=M=>{const N=M.error instanceof Error?M.error:new Error(`Datachannel error: ${M.message} ${M.filename}:${M.lineno}:${M.colno}`);this.destroy(g(N,"ERR_DATA_CHANNEL"))};let L=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(L&&this._onChannelClose(),L=!0):L=!1},5e3)}_read(){}_write(D,L,M){if(this.destroyed)return M(g(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(D)}catch(N){return this.destroy(g(N,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>m?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=M):M(null)}else this._debug("write before connect"),this._chunk=D,this._cb=M}_onFinish(){if(!this.destroyed){const D=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?D():this.once("connect",D)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(D=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(D.sdp=S(D.sdp)),D.sdp=this.sdpTransform(D.sdp);const L=()=>{if(!this.destroyed){const M=this._pc.localDescription||D;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp})}};this._pc.setLocalDescription(D).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?L():this.once("_iceComplete",L))}).catch(M=>{this.destroy(g(M,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(D=>{this.destroy(g(D,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(D=>{D.mid||!D.sender.track||D.requested||(D.requested=!0,this.addTransceiver(D.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(D=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(D.sdp=S(D.sdp)),D.sdp=this.sdpTransform(D.sdp);const L=()=>{if(!this.destroyed){const M=this._pc.localDescription||D;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(D).then(()=>{this.destroyed||(this.trickle||this._iceComplete?L():this.once("_iceComplete",L))}).catch(M=>{this.destroy(g(M,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(D=>{this.destroy(g(D,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(g(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const D=this._pc.iceConnectionState,L=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",D,L),this.emit("iceStateChange",D,L),("connected"===D||"completed"===D)&&(this._pcReady=!0,this._maybeReady()),"failed"===D&&this.destroy(g(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===D&&this.destroy(g(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(D){const L=M=>("[object Array]"===Object.prototype.toString.call(M.values)&&M.values.forEach(N=>{Object.assign(M,N)}),M);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(M=>{const N=[];M.forEach(I=>{N.push(L(I))}),D(null,N)},M=>D(M)):0<this._pc.getStats.length?this._pc.getStats(M=>{if(this.destroyed)return;const N=[];M.result().forEach(I=>{const P={};I.names().forEach(V=>{P[V]=I.stat(V)}),P.id=I.id,P.type=I.type,P.timestamp=I.timestamp,N.push(L(P))}),D(null,N)},M=>D(M)):D(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const D=()=>{this.destroyed||this.getStats((L,M)=>{if(this.destroyed)return;L&&(M=[]);const N={},I={},P={};let V=!1;M.forEach(oe=>{("remotecandidate"===oe.type||"remote-candidate"===oe.type)&&(N[oe.id]=oe),("localcandidate"===oe.type||"local-candidate"===oe.type)&&(I[oe.id]=oe),("candidatepair"===oe.type||"candidate-pair"===oe.type)&&(P[oe.id]=oe)});const j=oe=>{V=!0;let J=I[oe.localCandidateId];J&&(J.ip||J.address)?(this.localAddress=J.ip||J.address,this.localPort=+J.port):J&&J.ipAddress?(this.localAddress=J.ipAddress,this.localPort=+J.portNumber):"string"==typeof oe.googLocalAddress&&(J=oe.googLocalAddress.split(":"),this.localAddress=J[0],this.localPort=+J[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let le=N[oe.remoteCandidateId];le&&(le.ip||le.address)?(this.remoteAddress=le.ip||le.address,this.remotePort=+le.port):le&&le.ipAddress?(this.remoteAddress=le.ipAddress,this.remotePort=+le.portNumber):"string"==typeof oe.googRemoteAddress&&(le=oe.googRemoteAddress.split(":"),this.remoteAddress=le[0],this.remotePort=+le[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(M.forEach(oe=>{"transport"===oe.type&&oe.selectedCandidatePairId&&j(P[oe.selectedCandidatePairId]),("googCandidatePair"===oe.type&&"true"===oe.googActiveConnection||("candidatepair"===oe.type||"candidate-pair"===oe.type)&&oe.selected)&&j(oe)}),V||Object.keys(P).length&&!Object.keys(I).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(J){return this.destroy(g(J,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const oe=this._cb;this._cb=null,oe(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(D,100)})};D()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>m)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(D=>{this._pc.removeTrack(D),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(D){this.destroyed||(D.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:D.candidate.candidate,sdpMLineIndex:D.candidate.sdpMLineIndex,sdpMid:D.candidate.sdpMid}}):!D.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),D.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(D){if(this.destroyed)return;let L=D.data;L instanceof ArrayBuffer&&(L=x.from(L)),this.push(L)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const D=this._cb;this._cb=null,D(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(D){this.destroyed||D.streams.forEach(L=>{this._debug("on track"),this.emit("track",D.track,L),this._remoteTracks.push({track:D.track,stream:L}),this._remoteStreams.some(M=>M.id===L.id)||(this._remoteStreams.push(L),w(()=>{this._debug("on stream"),this.emit("stream",L)}))})}_debug(){const D=[].slice.call(arguments);D[0]="["+this._id+"] "+D[0],h.apply(null,D)}}_.WEBRTC_SUPPORT=!!f(),_.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},_.channelConfig={},b.exports=_},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/"))},1464:(Ge,G,F)=>{"use strict";F.r(G),F.d(G,{NIL:()=>ie,parse:()=>M,stringify:()=>w,v1:()=>D,v3:()=>be,v4:()=>we,v5:()=>ee,validate:()=>h,version:()=>se});var B,C=new Uint8Array(16);function b(){if(!B&&!(B="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(C)}const S=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,h=function k(K){return"string"==typeof K&&S.test(K)};for(var f=[],u=0;u<256;++u)f.push((u+256).toString(16).substr(1));const w=function p(K){var te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,X=(f[K[te+0]]+f[K[te+1]]+f[K[te+2]]+f[K[te+3]]+"-"+f[K[te+4]]+f[K[te+5]]+"-"+f[K[te+6]]+f[K[te+7]]+"-"+f[K[te+8]]+f[K[te+9]]+"-"+f[K[te+10]]+f[K[te+11]]+f[K[te+12]]+f[K[te+13]]+f[K[te+14]]+f[K[te+15]]).toLowerCase();if(!h(X))throw TypeError("Stringified UUID is invalid");return X};var g,x,m=0,_=0;const D=function T(K,te,X){var me=te&&X||0,R=te||new Array(16),H=(K=K||{}).node||g,Z=void 0!==K.clockseq?K.clockseq:x;if(null==H||null==Z){var Ae=K.random||(K.rng||b)();null==H&&(H=g=[1|Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]]),null==Z&&(Z=x=16383&(Ae[6]<<8|Ae[7]))}var Ke=void 0!==K.msecs?K.msecs:Date.now(),Re=void 0!==K.nsecs?K.nsecs:_+1,ht=Ke-m+(Re-_)/1e4;if(ht<0&&void 0===K.clockseq&&(Z=Z+1&16383),(ht<0||Ke>m)&&void 0===K.nsecs&&(Re=0),Re>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=Ke,_=Re,x=Z;var Et=(1e4*(268435455&(Ke+=122192928e5))+Re)%4294967296;R[me++]=Et>>>24&255,R[me++]=Et>>>16&255,R[me++]=Et>>>8&255,R[me++]=255&Et;var Ft=Ke/4294967296*1e4&268435455;R[me++]=Ft>>>8&255,R[me++]=255&Ft,R[me++]=Ft>>>24&15|16,R[me++]=Ft>>>16&255,R[me++]=Z>>>8|128,R[me++]=255&Z;for(var ln=0;ln<6;++ln)R[me+ln]=H[ln];return te||w(R)},M=function L(K){if(!h(K))throw TypeError("Invalid UUID");var te,X=new Uint8Array(16);return X[0]=(te=parseInt(K.slice(0,8),16))>>>24,X[1]=te>>>16&255,X[2]=te>>>8&255,X[3]=255&te,X[4]=(te=parseInt(K.slice(9,13),16))>>>8,X[5]=255&te,X[6]=(te=parseInt(K.slice(14,18),16))>>>8,X[7]=255&te,X[8]=(te=parseInt(K.slice(19,23),16))>>>8,X[9]=255&te,X[10]=(te=parseInt(K.slice(24,36),16))/1099511627776&255,X[11]=te/4294967296&255,X[12]=te>>>24&255,X[13]=te>>>16&255,X[14]=te>>>8&255,X[15]=255&te,X};function V(K,te,X){function me(R,H,Z,Ae){if("string"==typeof R&&(R=function N(K){K=unescape(encodeURIComponent(K));for(var te=[],X=0;X<K.length;++X)te.push(K.charCodeAt(X));return te}(R)),"string"==typeof H&&(H=M(H)),16!==H.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var Ke=new Uint8Array(16+R.length);if(Ke.set(H),Ke.set(R,H.length),(Ke=X(Ke))[6]=15&Ke[6]|te,Ke[8]=63&Ke[8]|128,Z){Ae=Ae||0;for(var Re=0;Re<16;++Re)Z[Ae+Re]=Ke[Re];return Z}return w(Ke)}try{me.name=K}catch(R){}return me.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",me.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",me}function J(K){return 14+(K+64>>>9<<4)+1}function ue(K,te){var X=(65535&K)+(65535&te);return(K>>16)+(te>>16)+(X>>16)<<16|65535&X}function ce(K,te,X,me,R,H){return ue(function he(K,te){return K<<te|K>>>32-te}(ue(ue(te,K),ue(me,H)),R),X)}function pe(K,te,X,me,R,H,Z){return ce(te&X|~te&me,K,te,R,H,Z)}function fe(K,te,X,me,R,H,Z){return ce(te&me|X&~me,K,te,R,H,Z)}function Ee(K,te,X,me,R,H,Z){return ce(te^X^me,K,te,R,H,Z)}function _e(K,te,X,me,R,H,Z){return ce(X^(te|~me),K,te,R,H,Z)}const be=V("v3",48,function j(K){if("string"==typeof K){var te=unescape(encodeURIComponent(K));K=new Uint8Array(te.length);for(var X=0;X<te.length;++X)K[X]=te.charCodeAt(X)}return function oe(K){for(var te=[],X=32*K.length,me="0123456789abcdef",R=0;R<X;R+=8){var H=K[R>>5]>>>R%32&255,Z=parseInt(me.charAt(H>>>4&15)+me.charAt(15&H),16);te.push(Z)}return te}(function le(K,te){K[te>>5]|=128<<te%32,K[J(te)-1]=te;for(var X=1732584193,me=-271733879,R=-1732584194,H=271733878,Z=0;Z<K.length;Z+=16){var Ae=X,Ke=me,Re=R,ht=H;X=pe(X,me,R,H,K[Z],7,-680876936),H=pe(H,X,me,R,K[Z+1],12,-389564586),R=pe(R,H,X,me,K[Z+2],17,606105819),me=pe(me,R,H,X,K[Z+3],22,-1044525330),X=pe(X,me,R,H,K[Z+4],7,-176418897),H=pe(H,X,me,R,K[Z+5],12,1200080426),R=pe(R,H,X,me,K[Z+6],17,-1473231341),me=pe(me,R,H,X,K[Z+7],22,-45705983),X=pe(X,me,R,H,K[Z+8],7,1770035416),H=pe(H,X,me,R,K[Z+9],12,-1958414417),R=pe(R,H,X,me,K[Z+10],17,-42063),me=pe(me,R,H,X,K[Z+11],22,-1990404162),X=pe(X,me,R,H,K[Z+12],7,1804603682),H=pe(H,X,me,R,K[Z+13],12,-40341101),R=pe(R,H,X,me,K[Z+14],17,-1502002290),X=fe(X,me=pe(me,R,H,X,K[Z+15],22,1236535329),R,H,K[Z+1],5,-165796510),H=fe(H,X,me,R,K[Z+6],9,-1069501632),R=fe(R,H,X,me,K[Z+11],14,643717713),me=fe(me,R,H,X,K[Z],20,-373897302),X=fe(X,me,R,H,K[Z+5],5,-701558691),H=fe(H,X,me,R,K[Z+10],9,38016083),R=fe(R,H,X,me,K[Z+15],14,-660478335),me=fe(me,R,H,X,K[Z+4],20,-405537848),X=fe(X,me,R,H,K[Z+9],5,568446438),H=fe(H,X,me,R,K[Z+14],9,-1019803690),R=fe(R,H,X,me,K[Z+3],14,-187363961),me=fe(me,R,H,X,K[Z+8],20,1163531501),X=fe(X,me,R,H,K[Z+13],5,-1444681467),H=fe(H,X,me,R,K[Z+2],9,-51403784),R=fe(R,H,X,me,K[Z+7],14,1735328473),X=Ee(X,me=fe(me,R,H,X,K[Z+12],20,-1926607734),R,H,K[Z+5],4,-378558),H=Ee(H,X,me,R,K[Z+8],11,-2022574463),R=Ee(R,H,X,me,K[Z+11],16,1839030562),me=Ee(me,R,H,X,K[Z+14],23,-35309556),X=Ee(X,me,R,H,K[Z+1],4,-1530992060),H=Ee(H,X,me,R,K[Z+4],11,1272893353),R=Ee(R,H,X,me,K[Z+7],16,-155497632),me=Ee(me,R,H,X,K[Z+10],23,-1094730640),X=Ee(X,me,R,H,K[Z+13],4,681279174),H=Ee(H,X,me,R,K[Z],11,-358537222),R=Ee(R,H,X,me,K[Z+3],16,-722521979),me=Ee(me,R,H,X,K[Z+6],23,76029189),X=Ee(X,me,R,H,K[Z+9],4,-640364487),H=Ee(H,X,me,R,K[Z+12],11,-421815835),R=Ee(R,H,X,me,K[Z+15],16,530742520),X=_e(X,me=Ee(me,R,H,X,K[Z+2],23,-995338651),R,H,K[Z],6,-198630844),H=_e(H,X,me,R,K[Z+7],10,1126891415),R=_e(R,H,X,me,K[Z+14],15,-1416354905),me=_e(me,R,H,X,K[Z+5],21,-57434055),X=_e(X,me,R,H,K[Z+12],6,1700485571),H=_e(H,X,me,R,K[Z+3],10,-1894986606),R=_e(R,H,X,me,K[Z+10],15,-1051523),me=_e(me,R,H,X,K[Z+1],21,-2054922799),X=_e(X,me,R,H,K[Z+8],6,1873313359),H=_e(H,X,me,R,K[Z+15],10,-30611744),R=_e(R,H,X,me,K[Z+6],15,-1560198380),me=_e(me,R,H,X,K[Z+13],21,1309151649),X=_e(X,me,R,H,K[Z+4],6,-145523070),H=_e(H,X,me,R,K[Z+11],10,-1120210379),R=_e(R,H,X,me,K[Z+2],15,718787259),me=_e(me,R,H,X,K[Z+9],21,-343485551),X=ue(X,Ae),me=ue(me,Ke),R=ue(R,Re),H=ue(H,ht)}return[X,me,R,H]}(function q(K){if(0===K.length)return[];for(var te=8*K.length,X=new Uint32Array(J(te)),me=0;me<te;me+=8)X[me>>5]|=(255&K[me/8])<<me%32;return X}(K),8*K.length))}),we=function de(K,te,X){var me=(K=K||{}).random||(K.rng||b)();if(me[6]=15&me[6]|64,me[8]=63&me[8]|128,te){X=X||0;for(var R=0;R<16;++R)te[X+R]=me[R];return te}return w(me)};function Ye(K,te,X,me){switch(K){case 0:return te&X^~te&me;case 1:case 3:return te^X^me;case 2:return te&X^te&me^X&me}}function ze(K,te){return K<<te|K>>>32-te}const ee=V("v5",80,function He(K){var te=[1518500249,1859775393,2400959708,3395469782],X=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof K){var me=unescape(encodeURIComponent(K));K=[];for(var R=0;R<me.length;++R)K.push(me.charCodeAt(R))}else Array.isArray(K)||(K=Array.prototype.slice.call(K));K.push(128);for(var Z=Math.ceil((K.length/4+2)/16),Ae=new Array(Z),Ke=0;Ke<Z;++Ke){for(var Re=new Uint32Array(16),ht=0;ht<16;++ht)Re[ht]=K[64*Ke+4*ht]<<24|K[64*Ke+4*ht+1]<<16|K[64*Ke+4*ht+2]<<8|K[64*Ke+4*ht+3];Ae[Ke]=Re}Ae[Z-1][14]=8*(K.length-1)/Math.pow(2,32),Ae[Z-1][14]=Math.floor(Ae[Z-1][14]),Ae[Z-1][15]=8*(K.length-1)&4294967295;for(var Et=0;Et<Z;++Et){for(var Ft=new Uint32Array(80),ln=0;ln<16;++ln)Ft[ln]=Ae[Et][ln];for(var Ie=16;Ie<80;++Ie)Ft[Ie]=ze(Ft[Ie-3]^Ft[Ie-8]^Ft[Ie-14]^Ft[Ie-16],1);for(var bn=X[0],Er=X[1],xt=X[2],ni=X[3],zi=X[4],Fr=0;Fr<80;++Fr){var Kn=Math.floor(Fr/20),ua=ze(bn,5)+Ye(Kn,Er,xt,ni)+zi+te[Kn]+Ft[Fr]>>>0;zi=ni,ni=xt,xt=ze(Er,30)>>>0,Er=bn,bn=ua}X[0]=X[0]+bn>>>0,X[1]=X[1]+Er>>>0,X[2]=X[2]+xt>>>0,X[3]=X[3]+ni>>>0,X[4]=X[4]+zi>>>0}return[X[0]>>24&255,X[0]>>16&255,X[0]>>8&255,255&X[0],X[1]>>24&255,X[1]>>16&255,X[1]>>8&255,255&X[1],X[2]>>24&255,X[2]>>16&255,X[2]>>8&255,255&X[2],X[3]>>24&255,X[3]>>16&255,X[3]>>8&255,255&X[3],X[4]>>24&255,X[4]>>16&255,X[4]>>8&255,255&X[4]]}),ie="00000000-0000-0000-0000-000000000000",se=function $(K){if(!h(K))throw TypeError("Invalid UUID");return parseInt(K.substr(14,1),16)}},2626:Ge=>{"use strict";Ge.exports=function(G){G.prototype[Symbol.iterator]=function*(){for(let F=this.head;F;F=F.next)yield F.value}}},7245:(Ge,G,F)=>{"use strict";function B(h){var f=this;if(f instanceof B||(f=new B),f.tail=null,f.head=null,f.length=0,h&&"function"==typeof h.forEach)h.forEach(function(w){f.push(w)});else if(arguments.length>0)for(var u=0,p=arguments.length;u<p;u++)f.push(arguments[u]);return f}function C(h,f,u){var p=f===h.head?new k(u,null,f,h):new k(u,f,f.next,h);return null===p.next&&(h.tail=p),null===p.prev&&(h.head=p),h.length++,p}function b(h,f){h.tail=new k(f,h.tail,null,h),h.head||(h.head=h.tail),h.length++}function S(h,f){h.head=new k(f,null,h.head,h),h.tail||(h.tail=h.head),h.length++}function k(h,f,u,p){if(!(this instanceof k))return new k(h,f,u,p);this.list=p,this.value=h,f?(f.next=this,this.prev=f):this.prev=null,u?(u.prev=this,this.next=u):this.next=null}Ge.exports=B,B.Node=k,B.create=B,B.prototype.removeNode=function(h){if(h.list!==this)throw new Error("removing node which does not belong to this list");var f=h.next,u=h.prev;return f&&(f.prev=u),u&&(u.next=f),h===this.head&&(this.head=f),h===this.tail&&(this.tail=u),h.list.length--,h.next=null,h.prev=null,h.list=null,f},B.prototype.unshiftNode=function(h){if(h!==this.head){h.list&&h.list.removeNode(h);var f=this.head;h.list=this,h.next=f,f&&(f.prev=h),this.head=h,this.tail||(this.tail=h),this.length++}},B.prototype.pushNode=function(h){if(h!==this.tail){h.list&&h.list.removeNode(h);var f=this.tail;h.list=this,h.prev=f,f&&(f.next=h),this.tail=h,this.head||(this.head=h),this.length++}},B.prototype.push=function(){for(var h=0,f=arguments.length;h<f;h++)b(this,arguments[h]);return this.length},B.prototype.unshift=function(){for(var h=0,f=arguments.length;h<f;h++)S(this,arguments[h]);return this.length},B.prototype.pop=function(){if(this.tail){var h=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,h}},B.prototype.shift=function(){if(this.head){var h=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,h}},B.prototype.forEach=function(h,f){f=f||this;for(var u=this.head,p=0;null!==u;p++)h.call(f,u.value,p,this),u=u.next},B.prototype.forEachReverse=function(h,f){f=f||this;for(var u=this.tail,p=this.length-1;null!==u;p--)h.call(f,u.value,p,this),u=u.prev},B.prototype.get=function(h){for(var f=0,u=this.head;null!==u&&f<h;f++)u=u.next;if(f===h&&null!==u)return u.value},B.prototype.getReverse=function(h){for(var f=0,u=this.tail;null!==u&&f<h;f++)u=u.prev;if(f===h&&null!==u)return u.value},B.prototype.map=function(h,f){f=f||this;for(var u=new B,p=this.head;null!==p;)u.push(h.call(f,p.value,this)),p=p.next;return u},B.prototype.mapReverse=function(h,f){f=f||this;for(var u=new B,p=this.tail;null!==p;)u.push(h.call(f,p.value,this)),p=p.prev;return u},B.prototype.reduce=function(h,f){var u,p=this.head;if(arguments.length>1)u=f;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");p=this.head.next,u=this.head.value}for(var w=0;null!==p;w++)u=h(u,p.value,w),p=p.next;return u},B.prototype.reduceReverse=function(h,f){var u,p=this.tail;if(arguments.length>1)u=f;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");p=this.tail.prev,u=this.tail.value}for(var w=this.length-1;null!==p;w--)u=h(u,p.value,w),p=p.prev;return u},B.prototype.toArray=function(){for(var h=new Array(this.length),f=0,u=this.head;null!==u;f++)h[f]=u.value,u=u.next;return h},B.prototype.toArrayReverse=function(){for(var h=new Array(this.length),f=0,u=this.tail;null!==u;f++)h[f]=u.value,u=u.prev;return h},B.prototype.slice=function(h,f){(f=f||this.length)<0&&(f+=this.length),(h=h||0)<0&&(h+=this.length);var u=new B;if(f<h||f<0)return u;h<0&&(h=0),f>this.length&&(f=this.length);for(var p=0,w=this.head;null!==w&&p<h;p++)w=w.next;for(;null!==w&&p<f;p++,w=w.next)u.push(w.value);return u},B.prototype.sliceReverse=function(h,f){(f=f||this.length)<0&&(f+=this.length),(h=h||0)<0&&(h+=this.length);var u=new B;if(f<h||f<0)return u;h<0&&(h=0),f>this.length&&(f=this.length);for(var p=this.length,w=this.tail;null!==w&&p>f;p--)w=w.prev;for(;null!==w&&p>h;p--,w=w.prev)u.push(w.value);return u},B.prototype.splice=function(h,f,...u){h>this.length&&(h=this.length-1),h<0&&(h=this.length+h);for(var p=0,w=this.head;null!==w&&p<h;p++)w=w.next;var g=[];for(p=0;w&&p<f;p++)g.push(w.value),w=this.removeNode(w);for(null===w&&(w=this.tail),w!==this.head&&w!==this.tail&&(w=w.prev),p=0;p<u.length;p++)w=C(this,w,u[p]);return g},B.prototype.reverse=function(){for(var h=this.head,f=this.tail,u=h;null!==u;u=u.prev){var p=u.prev;u.prev=u.next,u.next=p}return this.head=f,this.tail=h,this};try{F(2626)(B)}catch(h){}},8926:Ge=>{function G(B,C,b,S,k,h,f){try{var u=B[h](f),p=u.value}catch(w){return void b(w)}u.done?C(p):Promise.resolve(p).then(S,k)}Ge.exports=function F(B){return function(){var C=this,b=arguments;return new Promise(function(S,k){var h=B.apply(C,b);function f(p){G(h,S,k,f,u,"next",p)}function u(p){G(h,S,k,f,u,"throw",p)}f(void 0)})}},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},2480:()=>{},7670:()=>{},6188:(Ge,G,F)=>{"use strict";F.r(G),F.d(G,{CompactEncrypt:()=>Lx,CompactSign:()=>Tf,EmbeddedJWK:()=>vv,EncryptJWT:()=>Bx,FlattenedEncrypt:()=>Bo,FlattenedSign:()=>Gu,GeneralEncrypt:()=>_l,GeneralSign:()=>yv,SignJWT:()=>Xd,UnsecuredJWT:()=>tm,base64url:()=>C,calculateJwkThumbprint:()=>Ux,compactDecrypt:()=>ii,compactVerify:()=>ks,createLocalJWKSet:()=>Uo,createRemoteJWKSet:()=>Rf,decodeJwt:()=>jo,decodeProtectedHeader:()=>qc,errors:()=>B,exportJWK:()=>Mi,exportPKCS8:()=>Co,exportSPKI:()=>Ti,flattenedDecrypt:()=>xn,flattenedVerify:()=>ho,generalDecrypt:()=>Jo,generalVerify:()=>Cn,generateKeyPair:()=>Is,generateSecret:()=>fo,importJWK:()=>Q,importPKCS8:()=>O,importSPKI:()=>Zg,importX509:()=>v,jwtDecrypt:()=>Jr,jwtVerify:()=>Nx});var B={};F.r(B),F.d(B,{JOSEAlgNotAllowed:()=>le,JOSEError:()=>j,JOSENotSupported:()=>q,JWEDecryptionFailed:()=>ue,JWEInvalid:()=>he,JWKInvalid:()=>fe,JWKSInvalid:()=>Ee,JWKSMultipleMatchingKeys:()=>Te,JWKSNoMatchingKey:()=>_e,JWKSTimeout:()=>De,JWSInvalid:()=>ce,JWSSignatureVerificationFailed:()=>be,JWTClaimValidationFailed:()=>oe,JWTExpired:()=>J,JWTInvalid:()=>pe});var C={};F.r(C),F.d(C,{decode:()=>qu,encode:()=>Qd});var b=F(5861);const S=crypto,k=re=>re instanceof CryptoKey,f=function(){var re=(0,b.Z)(function*(ae,ve){const Se=`SHA-${ae.slice(-3)}`;return new Uint8Array(yield S.subtle.digest(Se,ve))});return function(ve,Se){return re.apply(this,arguments)}}(),u=new TextEncoder,p=new TextDecoder,w=2**32;function g(...re){const ae=re.reduce((Ze,{length:ft})=>Ze+ft,0),ve=new Uint8Array(ae);let Se=0;return re.forEach(Ze=>{ve.set(Ze,Se),Se+=Ze.length}),ve}function x(re,ae){return g(u.encode(re),new Uint8Array([0]),ae)}function m(re,ae,ve){if(ae<0||ae>=w)throw new RangeError(`value must be >= 0 and <= ${w-1}. Received ${ae}`);re.set([ae>>>24,ae>>>16,ae>>>8,255&ae],ve)}function _(re){const ae=Math.floor(re/w),ve=re%w,Se=new Uint8Array(8);return m(Se,ae,0),m(Se,ve,4),Se}function T(re){const ae=new Uint8Array(4);return m(ae,re),ae}function D(re){return g(T(re.length),re)}function L(re,ae,ve){return M.apply(this,arguments)}function M(){return(M=(0,b.Z)(function*(re,ae,ve){const Se=Math.ceil((ae>>3)/32),Ze=new Uint8Array(32*Se);for(let ft=0;ft<Se;ft++){const wt=new Uint8Array(4+re.length+ve.length);wt.set(T(ft+1)),wt.set(re,4),wt.set(ve,4+re.length),Ze.set(yield f("sha256",wt),32*ft)}return Ze.slice(0,ae>>3)})).apply(this,arguments)}const N=re=>{let ae=re;"string"==typeof ae&&(ae=u.encode(ae));const Se=[];for(let Ze=0;Ze<ae.length;Ze+=32768)Se.push(String.fromCharCode.apply(null,ae.subarray(Ze,Ze+32768)));return btoa(Se.join(""))},I=re=>N(re).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),P=re=>{const ae=atob(re),ve=new Uint8Array(ae.length);for(let Se=0;Se<ae.length;Se++)ve[Se]=ae.charCodeAt(Se);return ve},V=re=>{let ae=re;ae instanceof Uint8Array&&(ae=p.decode(ae)),ae=ae.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return P(ae)}catch(ve){throw new TypeError("The input to be decoded is not correctly encoded.")}};class j extends Error{constructor(ae){var ve;super(ae),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(ve=Error.captureStackTrace)||void 0===ve||ve.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class oe extends j{constructor(ae,ve="unspecified",Se="unspecified"){super(ae),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=ve,this.reason=Se}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class J extends j{constructor(ae,ve="unspecified",Se="unspecified"){super(ae),this.code="ERR_JWT_EXPIRED",this.claim=ve,this.reason=Se}static get code(){return"ERR_JWT_EXPIRED"}}class le extends j{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class q extends j{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class ue extends j{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class he extends j{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class ce extends j{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class pe extends j{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class fe extends j{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Ee extends j{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class _e extends j{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class Te extends j{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class De extends j{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class be extends j{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const de=S.getRandomValues.bind(S);function we(re){switch(re){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new q(`Unsupported JWE Algorithm: ${re}`)}}const Ye=re=>de(new Uint8Array(we(re)>>3)),He=(re,ae)=>{if(ae.length<<3!==we(re))throw new he("Invalid Initialization Vector length")},ye=(re,ae)=>{if(re.length<<3!==ae)throw new he("Invalid Content Encryption Key length")},ie=(re,ae)=>{if(!(re instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(ae instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(re.length!==ae.length)throw new TypeError("Input buffers must have the same length");const ve=re.length;let Se=0,Ze=-1;for(;++Ze<ve;)Se|=re[Ze]^ae[Ze];return 0===Se};function $(){return"function"==typeof WebSocketPair}function se(){try{return void 0!==process.versions.node}catch(re){return!1}}function K(re,ae="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${ae} must be ${re}`)}function te(re,ae){return re.name===ae}function X(re){return parseInt(re.name.slice(4),10)}function R(re,ae){if(ae.length&&!ae.some(ve=>re.usages.includes(ve))){let ve="CryptoKey does not support this operation, its usages must include ";if(ae.length>2){const Se=ae.pop();ve+=`one of ${ae.join(", ")}, or ${Se}.`}else ve+=2===ae.length?`one of ${ae[0]} or ${ae[1]}.`:`${ae[0]}.`;throw new TypeError(ve)}}function Z(re,ae,...ve){switch(ae){case"A128GCM":case"A192GCM":case"A256GCM":{if(!te(re.algorithm,"AES-GCM"))throw K("AES-GCM");const Se=parseInt(ae.slice(1,4),10);if(re.algorithm.length!==Se)throw K(Se,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!te(re.algorithm,"AES-KW"))throw K("AES-KW");const Se=parseInt(ae.slice(1,4),10);if(re.algorithm.length!==Se)throw K(Se,"algorithm.length");break}case"ECDH":if(!te(re.algorithm,"ECDH"))throw K("ECDH");break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!te(re.algorithm,"PBKDF2"))throw K("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!te(re.algorithm,"RSA-OAEP"))throw K("RSA-OAEP");const Se=parseInt(ae.slice(9),10)||1;if(X(re.algorithm.hash)!==Se)throw K(`SHA-${Se}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}R(re,ve)}const Ae=(re,...ae)=>{let ve="Key must be ";if(ae.length>2){const Se=ae.pop();ve+=`one of type ${ae.join(", ")}, or ${Se}.`}else ve+=2===ae.length?`one of type ${ae[0]} or ${ae[1]}.`:`of type ${ae[0]}.`;return null==re?ve+=` Received ${re}`:"function"==typeof re&&re.name?ve+=` Received function ${re.name}`:"object"==typeof re&&null!=re&&re.constructor&&re.constructor.name&&(ve+=` Received an instance of ${re.constructor.name}`),ve},Ke=re=>k(re),Re=["CryptoKey"];function Et(){return(Et=(0,b.Z)(function*(re,ae,ve,Se,Ze,ft){if(!(ae instanceof Uint8Array))throw new TypeError(Ae(ae,"Uint8Array"));const wt=parseInt(re.slice(1,4),10),It=yield S.subtle.importKey("raw",ae.subarray(wt>>3),"AES-CBC",!1,["decrypt"]),Nt=yield S.subtle.importKey("raw",ae.subarray(0,wt>>3),{hash:"SHA-"+(wt<<1),name:"HMAC"},!1,["sign"]),Dn=g(ft,Se,ve,_(ft.length<<3)),Kt=new Uint8Array((yield S.subtle.sign("HMAC",Nt,Dn)).slice(0,wt>>3));let Wt,en;try{Wt=ie(Ze,Kt)}catch(Rs){}if(!Wt)throw new ue;try{en=new Uint8Array(yield S.subtle.decrypt({iv:Se,name:"AES-CBC"},It,ve))}catch(Rs){}if(!en)throw new ue;return en})).apply(this,arguments)}function ln(){return(ln=(0,b.Z)(function*(re,ae,ve,Se,Ze,ft){let wt;ae instanceof Uint8Array?wt=yield S.subtle.importKey("raw",ae,"AES-GCM",!1,["decrypt"]):(Z(ae,re,"decrypt"),wt=ae);try{return new Uint8Array(yield S.subtle.decrypt({additionalData:ft,iv:Se,name:"AES-GCM",tagLength:128},wt,g(ve,Ze)))}catch(It){throw new ue}})).apply(this,arguments)}const bn=function(){var re=(0,b.Z)(function*(ae,ve,Se,Ze,ft,wt){if(!(k(ve)||ve instanceof Uint8Array))throw new TypeError(Ae(ve,...Re,"Uint8Array"));switch(He(ae,Ze),ae){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return ve instanceof Uint8Array&&ye(ve,parseInt(ae.slice(-3),10)),function ht(re,ae,ve,Se,Ze,ft){return Et.apply(this,arguments)}(ae,ve,Se,Ze,ft,wt);case"A128GCM":case"A192GCM":case"A256GCM":return ve instanceof Uint8Array&&ye(ve,parseInt(ae.slice(1,4),10)),function Ft(re,ae,ve,Se,Ze,ft){return ln.apply(this,arguments)}(ae,ve,Se,Ze,ft,wt);default:throw new q("Unsupported JWE Content Encryption Algorithm")}});return function(ve,Se,Ze,ft,wt,It){return re.apply(this,arguments)}}(),Er=function(){var re=(0,b.Z)(function*(){throw new q('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')});return function(){return re.apply(this,arguments)}}(),xt=function(){var re=(0,b.Z)(function*(){throw new q('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')});return function(){return re.apply(this,arguments)}}(),zi=(...re)=>{const ae=re.filter(Boolean);if(0===ae.length||1===ae.length)return!0;let ve;for(const Se of ae){const Ze=Object.keys(Se);if(ve&&0!==ve.size)for(const ft of Ze){if(ve.has(ft))return!1;ve.add(ft)}else ve=new Set(Ze)}return!0};function Kn(re){if(!function Fr(re){return"object"==typeof re&&null!==re}(re)||"[object Object]"!==Object.prototype.toString.call(re))return!1;if(null===Object.getPrototypeOf(re))return!0;let ae=re;for(;null!==Object.getPrototypeOf(ae);)ae=Object.getPrototypeOf(ae);return Object.getPrototypeOf(re)===ae}const Ss=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function ri(re,ae){if(re.algorithm.length!==parseInt(ae.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${ae}`)}function Rr(re,ae,ve){if(k(re))return Z(re,ae,ve),re;if(re instanceof Uint8Array)return S.subtle.importKey("raw",re,"AES-KW",!0,[ve]);throw new TypeError(Ae(re,...Re,"Uint8Array"))}const Ko=function(){var re=(0,b.Z)(function*(ae,ve,Se){const Ze=yield Rr(ve,ae,"wrapKey");ri(Ze,ae);const ft=yield S.subtle.importKey("raw",Se,...Ss);return new Uint8Array(yield S.subtle.wrapKey("raw",ft,Ze,"AES-KW"))});return function(ve,Se,Ze){return re.apply(this,arguments)}}(),$r=function(){var re=(0,b.Z)(function*(ae,ve,Se){const Ze=yield Rr(ve,ae,"unwrapKey");ri(Ze,ae);const ft=yield S.subtle.unwrapKey("raw",Se,Ze,"AES-KW",...Ss);return new Uint8Array(yield S.subtle.exportKey("raw",ft))});return function(ve,Se,Ze){return re.apply(this,arguments)}}();function Wi(re,ae,ve,Se){return So.apply(this,arguments)}function So(){return(So=(0,b.Z)(function*(re,ae,ve,Se,Ze=new Uint8Array(0),ft=new Uint8Array(0)){if(!k(re))throw new TypeError(Ae(re,...Re));if(Z(re,"ECDH"),!k(ae))throw new TypeError(Ae(ae,...Re));Z(ae,"ECDH","deriveBits");const wt=g(D(u.encode(ve)),D(Ze),D(ft),T(Se));return L(new Uint8Array(yield S.subtle.deriveBits({name:"ECDH",public:re},ae,Math.ceil(parseInt(ae.algorithm.namedCurve.slice(-3),10)/8)<<3)),Se,wt)})).apply(this,arguments)}function Vc(re){return gl.apply(this,arguments)}function gl(){return(gl=(0,b.Z)(function*(re){if(!k(re))throw new TypeError(Ae(re,...Re));return S.subtle.generateKey(re.algorithm,!0,["deriveBits"])})).apply(this,arguments)}function ml(re){if(!k(re))throw new TypeError(Ae(re,...Re));return["P-256","P-384","P-521"].includes(re.algorithm.namedCurve)}function uo(re){if(!(re instanceof Uint8Array)||re.length<8)throw new he("PBES2 Salt Input must be 8 or more octets")}function Go(re,ae){if(re instanceof Uint8Array)return S.subtle.importKey("raw",re,"PBKDF2",!1,["deriveBits"]);if(k(re))return Z(re,ae,"deriveBits","deriveKey"),re;throw new TypeError(Ae(re,...Re,"Uint8Array"))}function Oa(re,ae,ve,Se){return yl.apply(this,arguments)}function yl(){return(yl=(0,b.Z)(function*(re,ae,ve,Se){uo(re);const Ze=x(ae,re),ft=parseInt(ae.slice(13,16),10),wt={hash:`SHA-${ae.slice(8,11)}`,iterations:ve,name:"PBKDF2",salt:Ze},It={length:ft,name:"AES-KW"},Nt=yield Go(Se,ae);if(Nt.usages.includes("deriveBits"))return new Uint8Array(yield S.subtle.deriveBits(wt,Nt,ft));if(Nt.usages.includes("deriveKey"))return S.subtle.deriveKey(wt,Nt,It,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')})).apply(this,arguments)}const Pa=function(){var re=(0,b.Z)(function*(ae,ve,Se,Ze=2048,ft=de(new Uint8Array(16))){const wt=yield Oa(ft,ae,Ze,ve);return{encryptedKey:yield Ko(ae.slice(-6),wt,Se),p2c:Ze,p2s:I(ft)}});return function(ve,Se,Ze){return re.apply(this,arguments)}}(),Or=function(){var re=(0,b.Z)(function*(ae,ve,Se,Ze,ft){const wt=yield Oa(ft,ae,Ze,ve);return $r(ae.slice(-6),wt,Se)});return function(ve,Se,Ze,ft,wt){return re.apply(this,arguments)}}();function Lo(re){switch(re){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new q(`alg ${re} is not supported either by JOSE or your javascript runtime`)}}const Fa=(re,ae)=>{if(re.startsWith("RS")||re.startsWith("PS")){const{modulusLength:ve}=ae.algorithm;if("number"!=typeof ve||ve<2048)throw new TypeError(`${re} requires key modulusLength to be 2048 bits or larger`)}},zc=function(){var re=(0,b.Z)(function*(ae,ve,Se){if(!k(ve))throw new TypeError(Ae(ve,...Re));if(Z(ve,ae,"encrypt","wrapKey"),Fa(ae,ve),ve.usages.includes("encrypt"))return new Uint8Array(yield S.subtle.encrypt(Lo(ae),ve,Se));if(ve.usages.includes("wrapKey")){const Ze=yield S.subtle.importKey("raw",Se,...Ss);return new Uint8Array(yield S.subtle.wrapKey("raw",Ze,ve,Lo(ae)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')});return function(ve,Se,Ze){return re.apply(this,arguments)}}(),Cf=function(){var re=(0,b.Z)(function*(ae,ve,Se){if(!k(ve))throw new TypeError(Ae(ve,...Re));if(Z(ve,ae,"decrypt","unwrapKey"),Fa(ae,ve),ve.usages.includes("decrypt"))return new Uint8Array(yield S.subtle.decrypt(Lo(ae),ve,Se));if(ve.usages.includes("unwrapKey")){const Ze=yield S.subtle.unwrapKey("raw",Se,ve,Lo(ae),...Ss);return new Uint8Array(yield S.subtle.exportKey("raw",Ze))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')});return function(ve,Se,Ze){return re.apply(this,arguments)}}();function vl(re){switch(re){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new q(`Unsupported JWE Algorithm: ${re}`)}}const Na=re=>de(new Uint8Array(vl(re)>>3)),$u=(re,ae)=>`-----BEGIN ${ae}-----\n${(re.match(/.{1,64}/g)||[]).join("\n")}\n-----END ${ae}-----`,Cs=function(){var re=(0,b.Z)(function*(ae,ve,Se){if(!k(Se))throw new TypeError(Ae(Se,...Re));if(!Se.extractable)throw new TypeError("CryptoKey is not extractable");if(Se.type!==ae)throw new TypeError(`key is not a ${ae} key`);return $u(N(new Uint8Array(yield S.subtle.exportKey(ve,Se))),`${ae.toUpperCase()} KEY`)});return function(ve,Se,Ze){return re.apply(this,arguments)}}(),hi=re=>Cs("public","spki",re),Yn=re=>Cs("private","pkcs8",re),Es=(re,ae,ve=0)=>{0===ve&&(ae.unshift(ae.length),ae.unshift(6));let Se=re.indexOf(ae[0],ve);if(-1===Se)return!1;const Ze=re.subarray(Se,Se+ae.length);return Ze.length===ae.length&&(Ze.every((ft,wt)=>ft===ae[wt])||Es(re,ae,Se+1))},qo=re=>{switch(!0){case Es(re,[42,134,72,206,61,3,1,7]):return"P-256";case Es(re,[43,129,4,0,34]):return"P-384";case Es(re,[43,129,4,0,35]):return"P-521";case($()||se())&&Es(re,[43,101,112]):return"Ed25519";case se()&&Es(re,[43,101,113]):return"Ed448";default:throw new q("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Ef=function(){var re=(0,b.Z)(function*(ae,ve,Se,Ze,ft){var wt;let It,Nt;const Dn=new Uint8Array(atob(Se.replace(ae,"")).split("").map(Wt=>Wt.charCodeAt(0))),Kt="spki"===ve;switch(Ze){case"PS256":case"PS384":case"PS512":It={name:"RSA-PSS",hash:`SHA-${Ze.slice(-3)}`},Nt=Kt?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":It={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${Ze.slice(-3)}`},Nt=Kt?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":It={name:"RSA-OAEP",hash:`SHA-${parseInt(Ze.slice(-3),10)||1}`},Nt=Kt?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":It={name:"ECDSA",namedCurve:"P-256"},Nt=Kt?["verify"]:["sign"];break;case"ES384":It={name:"ECDSA",namedCurve:"P-384"},Nt=Kt?["verify"]:["sign"];break;case"ES512":It={name:"ECDSA",namedCurve:"P-521"},Nt=Kt?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":It={name:"ECDH",namedCurve:qo(Dn)},Nt=Kt?[]:["deriveBits"];break;case($()||se())&&"EdDSA":const Wt=qo(Dn).toUpperCase();It={name:`NODE-${Wt}`,namedCurve:`NODE-${Wt}`},Nt=Kt?["verify"]:["sign"];break;default:throw new q('Invalid or unsupported "alg" (Algorithm) value')}return S.subtle.importKey(ve,Dn,It,null!==(wt=null==ft?void 0:ft.extractable)&&void 0!==wt&&wt,Nt)});return function(ve,Se,Ze,ft,wt){return re.apply(this,arguments)}}(),Di=(re,ae,ve)=>Ef(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",re,ae,ve),Gd=(re,ae,ve)=>Ef(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",re,ae,ve),Jl=function(){var re=(0,b.Z)(function*(ae){var ve,Se;const{algorithm:Ze,keyUsages:ft}=function qd(re){let ae,ve;switch(re.kty){case"oct":switch(re.alg){case"HS256":case"HS384":case"HS512":ae={name:"HMAC",hash:`SHA-${re.alg.slice(-3)}`},ve=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new q(`${re.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":ae={name:"AES-GCM"},ve=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":ae={name:"AES-KW"},ve=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":ae={name:"PBKDF2"},ve=["deriveBits"];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(re.alg){case"PS256":case"PS384":case"PS512":ae={name:"RSA-PSS",hash:`SHA-${re.alg.slice(-3)}`},ve=re.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":ae={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${re.alg.slice(-3)}`},ve=re.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":ae={name:"RSA-OAEP",hash:`SHA-${parseInt(re.alg.slice(-3),10)||1}`},ve=re.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(re.alg){case"ES256":ae={name:"ECDSA",namedCurve:"P-256"},ve=re.d?["sign"]:["verify"];break;case"ES384":ae={name:"ECDSA",namedCurve:"P-384"},ve=re.d?["sign"]:["verify"];break;case"ES512":ae={name:"ECDSA",namedCurve:"P-521"},ve=re.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":ae={name:"ECDH",namedCurve:re.crv},ve=re.d?["deriveBits"]:[];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case($()||se())&&"OKP":if("EdDSA"!==re.alg)throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(re.crv){case"Ed25519":ae={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},ve=re.d?["sign"]:["verify"];break;case se()&&"Ed448":ae={name:"NODE-ED448",namedCurve:"NODE-ED448"},ve=re.d?["sign"]:["verify"];break;default:throw new q('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new q('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:ae,keyUsages:ve}}(ae),wt=[Ze,null!==(ve=ae.ext)&&void 0!==ve&&ve,null!==(Se=ae.key_ops)&&void 0!==Se?Se:ft];if("PBKDF2"===Ze.name)return S.subtle.importKey("raw",V(ae.k),...wt);const It=$t({},ae);return delete It.alg,S.subtle.importKey("jwk",It,...wt)});return function(ve){return re.apply(this,arguments)}}();function Af(re){let ae=[],ve=0;for(;ve<re.length;){let Se=Jd(re.subarray(ve));ae.push(Se),ve+=Se.byteLength}return ae}function Jd(re){let ae=0,ve=31&re[0];if(ae++,31===ve){for(ve=0;re[ae]>=128;)ve=128*ve+re[ae]-128,ae++;ve=128*ve+re[ae]-128,ae++}let Se=0;if(re[ae]<128)Se=re[ae],ae++;else{let ft=127&re[ae];ae++,Se=0;for(let wt=0;wt<ft;wt++)Se=256*Se+re[ae],ae++}if(128===Se){for(Se=0;0!==re[ae+Se]||0!==re[ae+Se+1];)Se++;const ft=ae+Se+2;return{byteLength:ft,contents:re.subarray(ae,ae+Se),raw:re.subarray(0,ft)}}const Ze=ae+Se;return{byteLength:Ze,contents:re.subarray(ae,Ze),raw:re.subarray(0,Ze)}}function Jg(re){const ae=re.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),ve=P(ae);return $u(function kf(re){const ae=Af(Af(Jd(re).contents)[0].contents);return N(ae[160===ae[0].raw[0]?6:5].raw)}(ve),"PUBLIC KEY")}function Zg(re,ae,ve){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,b.Z)(function*(re,ae,ve){if("string"!=typeof re||0!==re.indexOf("-----BEGIN PUBLIC KEY-----"))throw new TypeError('"spki" must be SPKI formatted string');return Gd(re,ae,ve)})).apply(this,arguments)}function v(re,ae,ve){return y.apply(this,arguments)}function y(){return(y=(0,b.Z)(function*(re,ae,ve){if("string"!=typeof re||0!==re.indexOf("-----BEGIN CERTIFICATE-----"))throw new TypeError('"x509" must be X.509 formatted string');const Se=Jg(re);return Gd(Se,ae,ve)})).apply(this,arguments)}function O(re,ae,ve){return z.apply(this,arguments)}function z(){return(z=(0,b.Z)(function*(re,ae,ve){if("string"!=typeof re||0!==re.indexOf("-----BEGIN PRIVATE KEY-----"))throw new TypeError('"pkcs8" must be PCKS8 formatted string');return Di(re,ae,ve)})).apply(this,arguments)}function Q(re,ae,ve){return ge.apply(this,arguments)}function ge(){return(ge=(0,b.Z)(function*(re,ae,ve){if(!Kn(re))throw new TypeError("JWK must be an object");if(ae||(ae=re.alg),"string"!=typeof ae||!ae)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(re.kty){case"oct":if("string"!=typeof re.k||!re.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=ve||(ve=!0!==re.ext),ve?Jl(ar($t({},re),{alg:ae,ext:!1})):V(re.k);case"RSA":if(void 0!==re.oth)throw new q('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Jl(ar($t({},re),{alg:ae}));default:throw new q('Unsupported "kty" (Key Type) Parameter value')}})).apply(this,arguments)}const Fe=(re,ae,ve)=>{re.startsWith("HS")||"dir"===re||re.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(re)?(re=>{if(!(re instanceof Uint8Array)){if(!Ke(re))throw new TypeError(Ae(re,...Re,"Uint8Array"));if("secret"!==re.type)throw new TypeError(`${Re.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(ae):((re,ae)=>{if(!Ke(re))throw new TypeError(Ae(re,...Re));if("secret"===re.type)throw new TypeError(`${Re.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===ae&&"public"===re.type)throw new TypeError(`${Re.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===ae&&"public"===re.type)throw new TypeError(`${Re.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(re.algorithm&&"verify"===ae&&"private"===re.type)throw new TypeError(`${Re.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(re.algorithm&&"encrypt"===ae&&"private"===re.type)throw new TypeError(`${Re.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(ae,ve)};function Ve(){return(Ve=(0,b.Z)(function*(re,ae,ve,Se,Ze){if(!(ve instanceof Uint8Array))throw new TypeError(Ae(ve,"Uint8Array"));const ft=parseInt(re.slice(1,4),10),wt=yield S.subtle.importKey("raw",ve.subarray(ft>>3),"AES-CBC",!1,["encrypt"]),It=yield S.subtle.importKey("raw",ve.subarray(0,ft>>3),{hash:"SHA-"+(ft<<1),name:"HMAC"},!1,["sign"]),Nt=new Uint8Array(yield S.subtle.encrypt({iv:Se,name:"AES-CBC"},wt,ae)),Dn=g(Ze,Se,Nt,_(Ze.length<<3));return{ciphertext:Nt,tag:new Uint8Array((yield S.subtle.sign("HMAC",It,Dn)).slice(0,ft>>3))}})).apply(this,arguments)}function rt(){return(rt=(0,b.Z)(function*(re,ae,ve,Se,Ze){let ft;ve instanceof Uint8Array?ft=yield S.subtle.importKey("raw",ve,"AES-GCM",!1,["encrypt"]):(Z(ve,re,"encrypt"),ft=ve);const wt=new Uint8Array(yield S.subtle.encrypt({additionalData:Ze,iv:Se,name:"AES-GCM",tagLength:128},ft,ae)),It=wt.slice(-16);return{ciphertext:wt.slice(0,-16),tag:It}})).apply(this,arguments)}const ct=function(){var re=(0,b.Z)(function*(ae,ve,Se,Ze,ft){if(!(k(Se)||Se instanceof Uint8Array))throw new TypeError(Ae(Se,...Re,"Uint8Array"));switch(He(ae,Ze),ae){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return Se instanceof Uint8Array&&ye(Se,parseInt(ae.slice(-3),10)),function qe(re,ae,ve,Se,Ze){return Ve.apply(this,arguments)}(ae,ve,Se,Ze,ft);case"A128GCM":case"A192GCM":case"A256GCM":return Se instanceof Uint8Array&&ye(Se,parseInt(ae.slice(1,4),10)),function et(re,ae,ve,Se,Ze){return rt.apply(this,arguments)}(ae,ve,Se,Ze,ft);default:throw new q("Unsupported JWE Content Encryption Algorithm")}});return function(ve,Se,Ze,ft,wt){return re.apply(this,arguments)}}();function pt(re,ae,ve,Se){return Me.apply(this,arguments)}function Me(){return(Me=(0,b.Z)(function*(re,ae,ve,Se){const Ze=re.slice(0,7);Se||(Se=Ye(Ze));const{ciphertext:ft,tag:wt}=yield ct(Ze,ve,ae,Se,new Uint8Array(0));return{encryptedKey:ft,iv:I(Se),tag:I(wt)}})).apply(this,arguments)}function Oe(re,ae,ve,Se,Ze){return Je.apply(this,arguments)}function Je(){return(Je=(0,b.Z)(function*(re,ae,ve,Se,Ze){const ft=re.slice(0,7);return bn(ft,ae,ve,Se,Ze,new Uint8Array(0))})).apply(this,arguments)}function dt(){return(dt=(0,b.Z)(function*(re,ae,ve,Se){switch(Fe(re,ae,"decrypt"),re){case"dir":if(void 0!==ve)throw new he("Encountered unexpected JWE Encrypted Key");return ae;case"ECDH-ES":if(void 0!==ve)throw new he("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Kn(Se.epk))throw new he('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ml(ae))throw new q("ECDH with the provided key is not allowed or not supported by your javascript runtime");const Ze=yield Q(Se.epk,re);let ft,wt;if(void 0!==Se.apu){if("string"!=typeof Se.apu)throw new he('JOSE Header "apu" (Agreement PartyUInfo) invalid');ft=V(Se.apu)}if(void 0!==Se.apv){if("string"!=typeof Se.apv)throw new he('JOSE Header "apv" (Agreement PartyVInfo) invalid');wt=V(Se.apv)}const It=yield Wi(Ze,ae,"ECDH-ES"===re?Se.enc:re,"ECDH-ES"===re?vl(Se.enc):parseInt(re.slice(-5,-2),10),ft,wt);if("ECDH-ES"===re)return It;if(void 0===ve)throw new he("JWE Encrypted Key missing");return $r(re.slice(-6),It,ve)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===ve)throw new he("JWE Encrypted Key missing");return Cf(re,ae,ve);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(void 0===ve)throw new he("JWE Encrypted Key missing");if("number"!=typeof Se.p2c)throw new he('JOSE Header "p2c" (PBES2 Count) missing or invalid');if("string"!=typeof Se.p2s)throw new he('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return Or(re,ae,ve,Se.p2c,V(Se.p2s));case"A128KW":case"A192KW":case"A256KW":if(void 0===ve)throw new he("JWE Encrypted Key missing");return $r(re,ae,ve);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":if(void 0===ve)throw new he("JWE Encrypted Key missing");if("string"!=typeof Se.iv)throw new he('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof Se.tag)throw new he('JOSE Header "tag" (Authentication Tag) missing or invalid');return Oe(re,ae,ve,V(Se.iv),V(Se.tag));default:throw new q('Invalid or unsupported "alg" (JWE Algorithm) header value')}})).apply(this,arguments)}const mt=function $e(re,ae,ve,Se){return dt.apply(this,arguments)},Tt=function an(re,ae,ve,Se,Ze){if(void 0!==Ze.crit&&void 0===Se.crit)throw new re('"crit" (Critical) Header Parameter MUST be integrity protected');if(!Se||void 0===Se.crit)return new Set;if(!Array.isArray(Se.crit)||0===Se.crit.length||Se.crit.some(wt=>"string"!=typeof wt||0===wt.length))throw new re('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let ft;ft=void 0!==ve?new Map([...Object.entries(ve),...ae.entries()]):ae;for(const wt of Se.crit){if(!ft.has(wt))throw new q(`Extension Header Parameter "${wt}" is not recognized`);if(void 0===Ze[wt])throw new re(`Extension Header Parameter "${wt}" is missing`);if(ft.get(wt)&&void 0===Se[wt])throw new re(`Extension Header Parameter "${wt}" MUST be integrity protected`)}return new Set(Se.crit)},jt=(re,ae)=>{if(void 0!==ae&&(!Array.isArray(ae)||ae.some(ve=>"string"!=typeof ve)))throw new TypeError(`"${re}" option must be an array of strings`);if(ae)return new Set(ae)};function xn(re,ae,ve){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,b.Z)(function*(re,ae,ve){var Se;if(!Kn(re))throw new he("Flattened JWE must be an object");if(void 0===re.protected&&void 0===re.header&&void 0===re.unprotected)throw new he("JOSE Header missing");if("string"!=typeof re.iv)throw new he("JWE Initialization Vector missing or incorrect type");if("string"!=typeof re.ciphertext)throw new he("JWE Ciphertext missing or incorrect type");if("string"!=typeof re.tag)throw new he("JWE Authentication Tag missing or incorrect type");if(void 0!==re.protected&&"string"!=typeof re.protected)throw new he("JWE Protected Header incorrect type");if(void 0!==re.encrypted_key&&"string"!=typeof re.encrypted_key)throw new he("JWE Encrypted Key incorrect type");if(void 0!==re.aad&&"string"!=typeof re.aad)throw new he("JWE AAD incorrect type");if(void 0!==re.header&&!Kn(re.header))throw new he("JWE Shared Unprotected Header incorrect type");if(void 0!==re.unprotected&&!Kn(re.unprotected))throw new he("JWE Per-Recipient Unprotected Header incorrect type");let Ze;if(re.protected){const Jc=V(re.protected);try{Ze=JSON.parse(p.decode(Jc))}catch(Ua){throw new he("JWE Protected Header is invalid")}}if(!zi(Ze,re.header,re.unprotected))throw new he("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const ft=$t($t($t({},Ze),re.header),re.unprotected);if(Tt(he,new Map,null==ve?void 0:ve.crit,Ze,ft),void 0!==ft.zip){if(!Ze||!Ze.zip)throw new he('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==ft.zip)throw new q('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:wt,enc:It}=ft;if("string"!=typeof wt||!wt)throw new he("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof It||!It)throw new he("missing JWE Encryption Algorithm (enc) in JWE Header");const Nt=ve&&jt("keyManagementAlgorithms",ve.keyManagementAlgorithms),Dn=ve&&jt("contentEncryptionAlgorithms",ve.contentEncryptionAlgorithms);if(Nt&&!Nt.has(wt))throw new le('"alg" (Algorithm) Header Parameter not allowed');if(Dn&&!Dn.has(It))throw new le('"enc" (Encryption Algorithm) Header Parameter not allowed');let Kt;void 0!==re.encrypted_key&&(Kt=V(re.encrypted_key));let en,Wt=!1;"function"==typeof ae&&(ae=yield ae(Ze,re),Wt=!0);try{en=yield mt(wt,ae,Kt,ft)}catch(Jc){if(Jc instanceof TypeError)throw Jc;en=Na(It)}const Rs=V(re.iv),Eo=V(re.tag),jr=u.encode(null!==(Se=re.protected)&&void 0!==Se?Se:"");let Nr;Nr=void 0!==re.aad?g(jr,u.encode("."),u.encode(re.aad)):jr;let xl=yield bn(It,en,V(re.ciphertext),Rs,Eo,Nr);"DEF"===ft.zip&&(xl=yield((null==ve?void 0:ve.inflateRaw)||Er)(xl));const fa={plaintext:xl};return void 0!==re.protected&&(fa.protectedHeader=Ze),void 0!==re.aad&&(fa.additionalAuthenticatedData=V(re.aad)),void 0!==re.unprotected&&(fa.sharedUnprotectedHeader=re.unprotected),void 0!==re.header&&(fa.unprotectedHeader=re.header),Wt?ar($t({},fa),{key:ae}):fa})).apply(this,arguments)}function ii(re,ae,ve){return lr.apply(this,arguments)}function lr(){return(lr=(0,b.Z)(function*(re,ae,ve){if(re instanceof Uint8Array&&(re=p.decode(re)),"string"!=typeof re)throw new he("Compact JWE must be a string or Uint8Array");const{0:Se,1:Ze,2:ft,3:wt,4:It,length:Nt}=re.split(".");if(5!==Nt)throw new he("Invalid Compact JWE");const Dn=yield xn({ciphertext:wt,iv:ft||void 0,protected:Se||void 0,tag:It||void 0,encrypted_key:Ze||void 0},ae,ve),Kt={plaintext:Dn.plaintext,protectedHeader:Dn.protectedHeader};return"function"==typeof ae?ar($t({},Kt),{key:Dn.key}):Kt})).apply(this,arguments)}function Jo(re,ae,ve){return eo.apply(this,arguments)}function eo(){return(eo=(0,b.Z)(function*(re,ae,ve){if(!Kn(re))throw new he("General JWE must be an object");if(!Array.isArray(re.recipients)||!re.recipients.every(Kn))throw new he("JWE Recipients missing or incorrect type");if(!re.recipients.length)throw new he("JWE Recipients has no members");for(const Se of re.recipients)try{return yield xn({aad:re.aad,ciphertext:re.ciphertext,encrypted_key:Se.encrypted_key,header:Se.header,iv:re.iv,protected:re.protected,tag:re.tag,unprotected:re.unprotected},ae,ve)}catch(Ze){}throw new ue})).apply(this,arguments)}const xi=function(){var re=(0,b.Z)(function*(ae){if(ae instanceof Uint8Array)return{kty:"oct",k:I(ae)};if(!k(ae))throw new TypeError(Ae(ae,...Re,"Uint8Array"));if(!ae.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const It=yield S.subtle.exportKey("jwk",ae);return Gg(It,["ext","key_ops","alg","use"])});return function(ve){return re.apply(this,arguments)}}();function Ti(re){return $i.apply(this,arguments)}function $i(){return($i=(0,b.Z)(function*(re){return hi(re)})).apply(this,arguments)}function Co(re){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,b.Z)(function*(re){return Yn(re)})).apply(this,arguments)}function Mi(re){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,b.Z)(function*(re){return xi(re)})).apply(this,arguments)}function Ku(){return(Ku=(0,b.Z)(function*(re,ae,ve,Se,Ze={}){var Nt,Dn;let ft,wt,It;switch(Fe(re,ve,"encrypt"),re){case"dir":It=ve;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ml(ve))throw new q("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:Kt,apv:Wt}=Ze;let{epk:en}=Ze;en||(en=(yield Vc(ve)).privateKey);const{x:Rs,y:Eo,crv:jr,kty:Nr}=yield Mi(en),xl=yield Wi(ve,en,"ECDH-ES"===re?ae:re,"ECDH-ES"===re?vl(ae):parseInt(re.slice(-5,-2),10),Kt,Wt);if(wt={epk:{x:Rs,crv:jr,kty:Nr}},"EC"===Nr&&(wt.epk.y=Eo),Kt&&(wt.apu=I(Kt)),Wt&&(wt.apv=I(Wt)),"ECDH-ES"===re){It=xl;break}It=Se||Na(ae);const fa=re.slice(-6);ft=yield Ko(fa,xl,It);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":It=Se||Na(ae),ft=yield zc(re,ve,It);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{It=Se||Na(ae);const{p2c:Kt,p2s:Wt}=Ze;Nt=yield Pa(re,ve,It,Kt,Wt),({encryptedKey:ft}=Nt),wt=Gg(Nt,["encryptedKey"]);break}case"A128KW":case"A192KW":case"A256KW":It=Se||Na(ae),ft=yield Ko(re,ve,It);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{It=Se||Na(ae);const{iv:Kt}=Ze;Dn=yield pt(re,ve,It,Kt),({encryptedKey:ft}=Dn),wt=Gg(Dn,["encryptedKey"]);break}default:throw new q('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:It,encryptedKey:ft,parameters:wt}})).apply(this,arguments)}const $c=function Wc(re,ae,ve,Se){return Ku.apply(this,arguments)},kt=Symbol();class Bo{constructor(ae){if(!(ae instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=ae}setKeyManagementParameters(ae){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=ae,this}setProtectedHeader(ae){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=ae,this}setSharedUnprotectedHeader(ae){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=ae,this}setUnprotectedHeader(ae){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=ae,this}setAdditionalAuthenticatedData(ae){return this._aad=ae,this}setContentEncryptionKey(ae){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=ae,this}setInitializationVector(ae){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=ae,this}encrypt(ae,ve){var Se=this;return(0,b.Z)(function*(){if(!Se._protectedHeader&&!Se._unprotectedHeader&&!Se._sharedUnprotectedHeader)throw new he("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!zi(Se._protectedHeader,Se._unprotectedHeader,Se._sharedUnprotectedHeader))throw new he("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const Ze=$t($t($t({},Se._protectedHeader),Se._unprotectedHeader),Se._sharedUnprotectedHeader);if(Tt(he,new Map,null==ve?void 0:ve.crit,Se._protectedHeader,Ze),void 0!==Ze.zip){if(!Se._protectedHeader||!Se._protectedHeader.zip)throw new he('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==Ze.zip)throw new q('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:ft,enc:wt}=Ze;if("string"!=typeof ft||!ft)throw new he('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof wt||!wt)throw new he('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let It,Nt,Dn,Kt,Wt,en,Rs;if("dir"===ft){if(Se._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===ft&&Se._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let jr;({cek:Nt,encryptedKey:It,parameters:jr}=yield $c(ft,wt,ae,Se._cek,Se._keyManagementParameters)),jr&&(ve&&kt in ve?Se._unprotectedHeader?Se._unprotectedHeader=$t($t({},Se._unprotectedHeader),jr):Se.setUnprotectedHeader(jr):Se._protectedHeader?Se._protectedHeader=$t($t({},Se._protectedHeader),jr):Se.setProtectedHeader(jr))}if(Se._iv||(Se._iv=Ye(wt)),Kt=u.encode(Se._protectedHeader?I(JSON.stringify(Se._protectedHeader)):""),Se._aad?(Wt=I(Se._aad),Dn=g(Kt,u.encode("."),u.encode(Wt))):Dn=Kt,"DEF"===Ze.zip){const jr=yield((null==ve?void 0:ve.deflateRaw)||xt)(Se._plaintext);({ciphertext:en,tag:Rs}=yield ct(wt,jr,Nt,Se._iv,Dn))}else({ciphertext:en,tag:Rs}=yield ct(wt,Se._plaintext,Nt,Se._iv,Dn));const Eo={ciphertext:I(en),iv:I(Se._iv),tag:I(Rs)};return It&&(Eo.encrypted_key=I(It)),Wt&&(Eo.aad=Wt),Se._protectedHeader&&(Eo.protected=p.decode(Kt)),Se._sharedUnprotectedHeader&&(Eo.unprotected=Se._sharedUnprotectedHeader),Se._unprotectedHeader&&(Eo.header=Se._unprotectedHeader),Eo})()}}class mn{constructor(ae,ve,Se){this.parent=ae,this.key=ve,this.options=Se}setUnprotectedHeader(ae){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=ae,this}addRecipient(...ae){return this.parent.addRecipient(...ae)}encrypt(...ae){return this.parent.encrypt(...ae)}done(){return this.parent}}class _l{constructor(ae){this._recipients=[],this._plaintext=ae}addRecipient(ae,ve){const Se=new mn(this,ae,{crit:null==ve?void 0:ve.crit});return this._recipients.push(Se),Se}setProtectedHeader(ae){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=ae,this}setSharedUnprotectedHeader(ae){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=ae,this}setAdditionalAuthenticatedData(ae){return this._aad=ae,this}encrypt(ae){var ve=this;return(0,b.Z)(function*(){var Se,Ze,ft;if(!ve._recipients.length)throw new he("at least one recipient must be added");if(ae={deflateRaw:null==ae?void 0:ae.deflateRaw},1===ve._recipients.length){const[Dn]=ve._recipients,Kt=yield new Bo(ve._plaintext).setAdditionalAuthenticatedData(ve._aad).setProtectedHeader(ve._protectedHeader).setSharedUnprotectedHeader(ve._unprotectedHeader).setUnprotectedHeader(Dn.unprotectedHeader).encrypt(Dn.key,$t($t({},Dn.options),ae));let Wt={ciphertext:Kt.ciphertext,iv:Kt.iv,recipients:[{}],tag:Kt.tag};return Kt.aad&&(Wt.aad=Kt.aad),Kt.protected&&(Wt.protected=Kt.protected),Kt.unprotected&&(Wt.unprotected=Kt.unprotected),Kt.encrypted_key&&(Wt.recipients[0].encrypted_key=Kt.encrypted_key),Kt.header&&(Wt.recipients[0].header=Kt.header),Wt}let wt;for(let Dn=0;Dn<ve._recipients.length;Dn++){const Kt=ve._recipients[Dn];if(!zi(ve._protectedHeader,ve._unprotectedHeader,Kt.unprotectedHeader))throw new he("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const Wt=$t($t($t({},ve._protectedHeader),ve._unprotectedHeader),Kt.unprotectedHeader),{alg:en}=Wt;if("string"!=typeof en||!en)throw new he('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===en||"ECDH-ES"===en)throw new he('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof Wt.enc||!Wt.enc)throw new he('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(wt){if(wt!==Wt.enc)throw new he('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else wt=Wt.enc;if(Tt(he,new Map,Kt.options.crit,ve._protectedHeader,Wt),!(void 0===Wt.zip||ve._protectedHeader&&ve._protectedHeader.zip))throw new he('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const It=Na(wt);let Nt={ciphertext:"",iv:"",recipients:[],tag:""};for(let Dn=0;Dn<ve._recipients.length;Dn++){const Kt=ve._recipients[Dn],Wt={};Nt.recipients.push(Wt);const Rs=$t($t($t({},ve._protectedHeader),ve._unprotectedHeader),Kt.unprotectedHeader).alg.startsWith("PBES2")?2048+Dn:void 0;if(0===Dn){const Nr=yield new Bo(ve._plaintext).setAdditionalAuthenticatedData(ve._aad).setContentEncryptionKey(It).setProtectedHeader(ve._protectedHeader).setSharedUnprotectedHeader(ve._unprotectedHeader).setUnprotectedHeader(Kt.unprotectedHeader).setKeyManagementParameters({p2c:Rs}).encrypt(Kt.key,ar($t($t({},Kt.options),ae),{[kt]:!0}));Nt.ciphertext=Nr.ciphertext,Nt.iv=Nr.iv,Nt.tag=Nr.tag,Nr.aad&&(Nt.aad=Nr.aad),Nr.protected&&(Nt.protected=Nr.protected),Nr.unprotected&&(Nt.unprotected=Nr.unprotected),Wt.encrypted_key=Nr.encrypted_key,Nr.header&&(Wt.header=Nr.header);continue}const{encryptedKey:Eo,parameters:jr}=yield $c((null===(Se=Kt.unprotectedHeader)||void 0===Se?void 0:Se.alg)||(null===(Ze=ve._protectedHeader)||void 0===Ze?void 0:Ze.alg)||(null===(ft=ve._unprotectedHeader)||void 0===ft?void 0:ft.alg),wt,Kt.key,It,{p2c:Rs});Wt.encrypted_key=I(Eo),(Kt.unprotectedHeader||jr)&&(Wt.header=$t($t({},Kt.unprotectedHeader),jr))}return Nt})()}}function Yl(re,ae){const ve=`SHA-${re.slice(-3)}`;switch(re){case"HS256":case"HS384":case"HS512":return{hash:ve,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:ve,name:"RSA-PSS",saltLength:re.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:ve,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:ve,name:"ECDSA",namedCurve:ae.namedCurve};case($()||se())&&"EdDSA":const{namedCurve:Se}=ae;return{name:Se,namedCurve:Se};default:throw new q(`alg ${re} is not supported either by JOSE or your javascript runtime`)}}function Xl(re,ae,ve){if(k(ae))return function H(re,ae,...ve){switch(ae){case"HS256":case"HS384":case"HS512":{if(!te(re.algorithm,"HMAC"))throw K("HMAC");const Se=parseInt(ae.slice(2),10);if(X(re.algorithm.hash)!==Se)throw K(`SHA-${Se}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!te(re.algorithm,"RSASSA-PKCS1-v1_5"))throw K("RSASSA-PKCS1-v1_5");const Se=parseInt(ae.slice(2),10);if(X(re.algorithm.hash)!==Se)throw K(`SHA-${Se}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!te(re.algorithm,"RSA-PSS"))throw K("RSA-PSS");const Se=parseInt(ae.slice(2),10);if(X(re.algorithm.hash)!==Se)throw K(`SHA-${Se}`,"algorithm.hash");break}case se()&&"EdDSA":if("NODE-ED25519"!==re.algorithm.name&&"NODE-ED448"!==re.algorithm.name)throw K("NODE-ED25519 or NODE-ED448");break;case $()&&"EdDSA":if(!te(re.algorithm,"NODE-ED25519"))throw K("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!te(re.algorithm,"ECDSA"))throw K("ECDSA");const Se=function me(re){switch(re){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(ae);if(re.algorithm.namedCurve!==Se)throw K(Se,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}R(re,ve)}(ae,re,ve),ae;if(ae instanceof Uint8Array){if(!re.startsWith("HS"))throw new TypeError(Ae(ae,...Re));return S.subtle.importKey("raw",ae,{hash:`SHA-${re.slice(-3)}`,name:"HMAC"},!1,[ve])}throw new TypeError(Ae(ae,...Re,"Uint8Array"))}const Ql=function(){var re=(0,b.Z)(function*(ae,ve,Se,Ze){const ft=yield Xl(ae,ve,"verify");Fa(ae,ft);const wt=Yl(ae,ft.algorithm);try{return yield S.subtle.verify(wt,ft,Se,Ze)}catch(It){return!1}});return function(ve,Se,Ze,ft){return re.apply(this,arguments)}}();function ho(re,ae,ve){return As.apply(this,arguments)}function As(){return(As=(0,b.Z)(function*(re,ae,ve){var Se;if(!Kn(re))throw new ce("Flattened JWS must be an object");if(void 0===re.protected&&void 0===re.header)throw new ce('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==re.protected&&"string"!=typeof re.protected)throw new ce("JWS Protected Header incorrect type");if(void 0===re.payload)throw new ce("JWS Payload missing");if("string"!=typeof re.signature)throw new ce("JWS Signature missing or incorrect type");if(void 0!==re.header&&!Kn(re.header))throw new ce("JWS Unprotected Header incorrect type");let Ze={};if(re.protected){const Nr=V(re.protected);try{Ze=JSON.parse(p.decode(Nr))}catch(xl){throw new ce("JWS Protected Header is invalid")}}if(!zi(Ze,re.header))throw new ce("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const ft=$t($t({},Ze),re.header);let It=!0;if(Tt(ce,new Map([["b64",!0]]),null==ve?void 0:ve.crit,Ze,ft).has("b64")&&(It=Ze.b64,"boolean"!=typeof It))throw new ce('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:Nt}=ft;if("string"!=typeof Nt||!Nt)throw new ce('JWS "alg" (Algorithm) Header Parameter missing or invalid');const Dn=ve&&jt("algorithms",ve.algorithms);if(Dn&&!Dn.has(Nt))throw new le('"alg" (Algorithm) Header Parameter not allowed');if(It){if("string"!=typeof re.payload)throw new ce("JWS Payload must be a string")}else if("string"!=typeof re.payload&&!(re.payload instanceof Uint8Array))throw new ce("JWS Payload must be a string or an Uint8Array instance");let Kt=!1;"function"==typeof ae&&(ae=yield ae(Ze,re),Kt=!0),Fe(Nt,ae,"verify");const Wt=g(u.encode(null!==(Se=re.protected)&&void 0!==Se?Se:""),u.encode("."),"string"==typeof re.payload?u.encode(re.payload):re.payload),en=V(re.signature);if(!(yield Ql(Nt,ae,en,Wt)))throw new be;let Eo;Eo=It?V(re.payload):"string"==typeof re.payload?u.encode(re.payload):re.payload;const jr={payload:Eo};return void 0!==re.protected&&(jr.protectedHeader=Ze),void 0!==re.header&&(jr.unprotectedHeader=re.header),Kt?ar($t({},jr),{key:ae}):jr})).apply(this,arguments)}function ks(re,ae,ve){return qr.apply(this,arguments)}function qr(){return(qr=(0,b.Z)(function*(re,ae,ve){if(re instanceof Uint8Array&&(re=p.decode(re)),"string"!=typeof re)throw new ce("Compact JWS must be a string or Uint8Array");const{0:Se,1:Ze,2:ft,length:wt}=re.split(".");if(3!==wt)throw new ce("Invalid Compact JWS");const It=yield ho({payload:Ze,protected:Se,signature:ft},ae,ve),Nt={payload:It.payload,protectedHeader:It.protectedHeader};return"function"==typeof ae?ar($t({},Nt),{key:It.key}):Nt})).apply(this,arguments)}function Cn(re,ae,ve){return qs.apply(this,arguments)}function qs(){return(qs=(0,b.Z)(function*(re,ae,ve){if(!Kn(re))throw new ce("General JWS must be an object");if(!Array.isArray(re.signatures)||!re.signatures.every(Kn))throw new ce("JWS Signatures missing or incorrect type");for(const Se of re.signatures)try{return yield ho({header:Se.header,payload:re.payload,protected:Se.protected,signature:Se.signature},ae,ve)}catch(Ze){}throw new be})).apply(this,arguments)}const fi=re=>Math.floor(re.getTime()/1e3),Yg=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,Xg=re=>{const ae=Yg.exec(re);if(!ae)throw new TypeError("Invalid time period format");const ve=parseFloat(ae[1]);switch(ae[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(ve);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*ve);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*ve);case"day":case"days":case"d":return Math.round(86400*ve);case"week":case"weeks":case"w":return Math.round(604800*ve);default:return Math.round(31557600*ve)}},Js=re=>re.toLowerCase().replace(/^application\//,""),Qg=(re,ae,ve={})=>{const{typ:Se}=ve;if(Se&&("string"!=typeof re.typ||Js(re.typ)!==Js(Se)))throw new oe('unexpected "typ" JWT header value',"typ","check_failed");let Ze;try{Ze=JSON.parse(p.decode(ae))}catch(Wt){}if(!Kn(Ze))throw new pe("JWT Claims Set must be a top-level JSON object");const{issuer:ft}=ve;if(ft&&!(Array.isArray(ft)?ft:[ft]).includes(Ze.iss))throw new oe('unexpected "iss" claim value',"iss","check_failed");const{subject:wt}=ve;if(wt&&Ze.sub!==wt)throw new oe('unexpected "sub" claim value',"sub","check_failed");const{audience:It}=ve;if(It&&!((re,ae)=>"string"==typeof re?ae.includes(re):!!Array.isArray(re)&&ae.some(Set.prototype.has.bind(new Set(re))))(Ze.aud,"string"==typeof It?[It]:It))throw new oe('unexpected "aud" claim value',"aud","check_failed");let Nt;switch(typeof ve.clockTolerance){case"string":Nt=Xg(ve.clockTolerance);break;case"number":Nt=ve.clockTolerance;break;case"undefined":Nt=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:Dn}=ve,Kt=fi(Dn||new Date);if((void 0!==Ze.iat||ve.maxTokenAge)&&"number"!=typeof Ze.iat)throw new oe('"iat" claim must be a number',"iat","invalid");if(void 0!==Ze.nbf){if("number"!=typeof Ze.nbf)throw new oe('"nbf" claim must be a number',"nbf","invalid");if(Ze.nbf>Kt+Nt)throw new oe('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==Ze.exp){if("number"!=typeof Ze.exp)throw new oe('"exp" claim must be a number',"exp","invalid");if(Ze.exp<=Kt-Nt)throw new J('"exp" claim timestamp check failed',"exp","check_failed")}if(ve.maxTokenAge){const Wt=Kt-Ze.iat;if(Wt-Nt>("number"==typeof ve.maxTokenAge?ve.maxTokenAge:Xg(ve.maxTokenAge)))throw new J('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(Wt<0-Nt)throw new oe('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return Ze};function Nx(re,ae,ve){return gv.apply(this,arguments)}function gv(){return(gv=(0,b.Z)(function*(re,ae,ve){var Se;const Ze=yield ks(re,ae,ve);if((null===(Se=Ze.protectedHeader.crit)||void 0===Se?void 0:Se.includes("b64"))&&!1===Ze.protectedHeader.b64)throw new pe("JWTs MUST NOT use unencoded payload");const wt={payload:Qg(Ze.protectedHeader,Ze.payload,ve),protectedHeader:Ze.protectedHeader};return"function"==typeof ae?ar($t({},wt),{key:Ze.key}):wt})).apply(this,arguments)}function Jr(re,ae,ve){return mv.apply(this,arguments)}function mv(){return(mv=(0,b.Z)(function*(re,ae,ve){const Se=yield ii(re,ae,ve),Ze=Qg(Se.protectedHeader,Se.plaintext,ve),{protectedHeader:ft}=Se;if(void 0!==ft.iss&&ft.iss!==Ze.iss)throw new oe('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==ft.sub&&ft.sub!==Ze.sub)throw new oe('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==ft.aud&&JSON.stringify(ft.aud)!==JSON.stringify(Ze.aud))throw new oe('replicated "aud" claim header parameter mismatch',"aud","mismatch");const wt={payload:Ze,protectedHeader:ft};return"function"==typeof ae?ar($t({},wt),{key:Se.key}):wt})).apply(this,arguments)}class Lx{constructor(ae){this._flattened=new Bo(ae)}setContentEncryptionKey(ae){return this._flattened.setContentEncryptionKey(ae),this}setInitializationVector(ae){return this._flattened.setInitializationVector(ae),this}setProtectedHeader(ae){return this._flattened.setProtectedHeader(ae),this}setKeyManagementParameters(ae){return this._flattened.setKeyManagementParameters(ae),this}encrypt(ae,ve){var Se=this;return(0,b.Z)(function*(){const Ze=yield Se._flattened.encrypt(ae,ve);return[Ze.protected,Ze.encrypted_key,Ze.iv,Ze.ciphertext,Ze.tag].join(".")})()}}const Qr=function(){var re=(0,b.Z)(function*(ae,ve,Se){const Ze=yield Xl(ae,ve,"sign");Fa(ae,Ze);const ft=yield S.subtle.sign(Yl(ae,Ze.algorithm),Ze,Se);return new Uint8Array(ft)});return function(ve,Se,Ze){return re.apply(this,arguments)}}();class Gu{constructor(ae){if(!(ae instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=ae}setProtectedHeader(ae){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=ae,this}setUnprotectedHeader(ae){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=ae,this}sign(ae,ve){var Se=this;return(0,b.Z)(function*(){if(!Se._protectedHeader&&!Se._unprotectedHeader)throw new ce("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!zi(Se._protectedHeader,Se._unprotectedHeader))throw new ce("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const Ze=$t($t({},Se._protectedHeader),Se._unprotectedHeader);let wt=!0;if(Tt(ce,new Map([["b64",!0]]),null==ve?void 0:ve.crit,Se._protectedHeader,Ze).has("b64")&&(wt=Se._protectedHeader.b64,"boolean"!=typeof wt))throw new ce('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:It}=Ze;if("string"!=typeof It||!It)throw new ce('JWS "alg" (Algorithm) Header Parameter missing or invalid');Fe(It,ae,"sign");let Dn,Nt=Se._payload;wt&&(Nt=u.encode(I(Nt))),Dn=u.encode(Se._protectedHeader?I(JSON.stringify(Se._protectedHeader)):"");const Kt=g(Dn,u.encode("."),Nt),Wt=yield Qr(It,ae,Kt),en={signature:I(Wt),payload:""};return wt&&(en.payload=p.decode(Nt)),Se._unprotectedHeader&&(en.header=Se._unprotectedHeader),Se._protectedHeader&&(en.protected=p.decode(Dn)),en})()}}class Tf{constructor(ae){this._flattened=new Gu(ae)}setProtectedHeader(ae){return this._flattened.setProtectedHeader(ae),this}sign(ae,ve){var Se=this;return(0,b.Z)(function*(){const Ze=yield Se._flattened.sign(ae,ve);if(void 0===Ze.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${Ze.protected}.${Ze.payload}.${Ze.signature}`})()}}class em{constructor(ae,ve,Se){this.parent=ae,this.key=ve,this.options=Se}setProtectedHeader(ae){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=ae,this}setUnprotectedHeader(ae){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=ae,this}addSignature(...ae){return this.parent.addSignature(...ae)}sign(...ae){return this.parent.sign(...ae)}done(){return this.parent}}class yv{constructor(ae){this._signatures=[],this._payload=ae}addSignature(ae,ve){const Se=new em(this,ae,ve);return this._signatures.push(Se),Se}sign(){var ae=this;return(0,b.Z)(function*(){if(!ae._signatures.length)throw new ce("at least one signature must be added");const ve={signatures:[],payload:""};for(let Ze=0;Ze<ae._signatures.length;Ze++){const ft=ae._signatures[Ze],wt=new Gu(ae._payload);wt.setProtectedHeader(ft.protectedHeader),wt.setUnprotectedHeader(ft.unprotectedHeader);const Se=yield wt.sign(ft.key,ft.options),{payload:It}=Se,Nt=Gg(Se,["payload"]);if(0===Ze)ve.payload=It;else if(ve.payload!==It)throw new ce("inconsistent use of JWS Unencoded Payload Option (RFC7797)");ve.signatures.push(Nt)}return ve})()}}class ha{constructor(ae){if(!Kn(ae))throw new TypeError("JWT Claims Set MUST be an object");this._payload=ae}setIssuer(ae){return this._payload=ar($t({},this._payload),{iss:ae}),this}setSubject(ae){return this._payload=ar($t({},this._payload),{sub:ae}),this}setAudience(ae){return this._payload=ar($t({},this._payload),{aud:ae}),this}setJti(ae){return this._payload=ar($t({},this._payload),{jti:ae}),this}setNotBefore(ae){return this._payload=ar($t({},this._payload),"number"==typeof ae?{nbf:ae}:{nbf:fi(new Date)+Xg(ae)}),this}setExpirationTime(ae){return this._payload=ar($t({},this._payload),"number"==typeof ae?{exp:ae}:{exp:fi(new Date)+Xg(ae)}),this}setIssuedAt(ae){return this._payload=ar($t({},this._payload),void 0===ae?{iat:fi(new Date)}:{iat:ae}),this}}class Xd extends ha{setProtectedHeader(ae){return this._protectedHeader=ae,this}sign(ae,ve){var Se=this;return(0,b.Z)(function*(){var Ze;const ft=new Tf(u.encode(JSON.stringify(Se._payload)));if(ft.setProtectedHeader(Se._protectedHeader),Array.isArray(null===(Ze=Se._protectedHeader)||void 0===Ze?void 0:Ze.crit)&&Se._protectedHeader.crit.includes("b64")&&!1===Se._protectedHeader.b64)throw new pe("JWTs MUST NOT use unencoded payload");return ft.sign(ae,ve)})()}}class Bx extends ha{setProtectedHeader(ae){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=ae,this}setKeyManagementParameters(ae){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=ae,this}setContentEncryptionKey(ae){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=ae,this}setInitializationVector(ae){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=ae,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}encrypt(ae,ve){var Se=this;return(0,b.Z)(function*(){const Ze=new Lx(u.encode(JSON.stringify(Se._payload)));return Se._replicateIssuerAsHeader&&(Se._protectedHeader=ar($t({},Se._protectedHeader),{iss:Se._payload.iss})),Se._replicateSubjectAsHeader&&(Se._protectedHeader=ar($t({},Se._protectedHeader),{sub:Se._payload.sub})),Se._replicateAudienceAsHeader&&(Se._protectedHeader=ar($t({},Se._protectedHeader),{aud:Se._payload.aud})),Ze.setProtectedHeader(Se._protectedHeader),Se._iv&&Ze.setInitializationVector(Se._iv),Se._cek&&Ze.setContentEncryptionKey(Se._cek),Se._keyManagementParameters&&Ze.setKeyManagementParameters(Se._keyManagementParameters),Ze.encrypt(ae,ve)})()}}const Jt=(re,ae)=>{if("string"!=typeof re||!re)throw new fe(`${ae} missing or invalid`)};function Ux(re){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,b.Z)(function*(re,ae="sha256"){if(!Kn(re))throw new TypeError("JWK must be an object");if("sha256"!==ae&&"sha384"!==ae&&"sha512"!==ae)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let ve;switch(re.kty){case"EC":Jt(re.crv,'"crv" (Curve) Parameter'),Jt(re.x,'"x" (X Coordinate) Parameter'),Jt(re.y,'"y" (Y Coordinate) Parameter'),ve={crv:re.crv,kty:re.kty,x:re.x,y:re.y};break;case"OKP":Jt(re.crv,'"crv" (Subtype of Key Pair) Parameter'),Jt(re.x,'"x" (Public Key) Parameter'),ve={crv:re.crv,kty:re.kty,x:re.x};break;case"RSA":Jt(re.e,'"e" (Exponent) Parameter'),Jt(re.n,'"n" (Modulus) Parameter'),ve={e:re.e,kty:re.kty,n:re.n};break;case"oct":Jt(re.k,'"k" (Key Value) Parameter'),ve={k:re.k,kty:re.kty};break;default:throw new q('"kty" (Key Type) Parameter missing or unsupported')}const Se=u.encode(JSON.stringify(ve));return I(yield f(ae,Se))})).apply(this,arguments)}function vv(re,ae){return If.apply(this,arguments)}function If(){return(If=(0,b.Z)(function*(re,ae){const ve=$t($t({},re),ae.header);if(!Kn(ve.jwk))throw new ce('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const Se=yield Q(ar($t({},ve.jwk),{ext:!0}),ve.alg,!0);if(Se instanceof Uint8Array||"public"!==Se.type)throw new ce('"jwk" (JSON Web Key) Header Parameter must be a public key');return Se})).apply(this,arguments)}function _v(re){return re&&"object"==typeof re&&Array.isArray(re.keys)&&re.keys.every(bv)}function bv(re){return Kn(re)}class to{constructor(ae){if(this._cached=new WeakMap,!_v(ae))throw new Ee("JSON Web Key Set malformed");this._jwks=function bt(re){return"function"==typeof structuredClone?structuredClone(re):JSON.parse(JSON.stringify(re))}(ae)}getKey(ae,ve){var Se=this;return(0,b.Z)(function*(){const{alg:Ze,kid:ft}=$t($t({},ae),ve.header),wt=function En(re){switch("string"==typeof re&&re.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new q('Unsupported "alg" value for a JSON Web Key Set')}}(Ze),It=Se._jwks.keys.filter(Wt=>{let en=wt===Wt.kty;if(en&&"string"==typeof ft&&(en=ft===Wt.kid),en&&"string"==typeof Wt.alg&&(en=Ze===Wt.alg),en&&"string"==typeof Wt.use&&(en="sig"===Wt.use),en&&Array.isArray(Wt.key_ops)&&(en=Wt.key_ops.includes("verify")),en&&"EdDSA"===Ze&&(en="Ed25519"===Wt.crv||"Ed448"===Wt.crv),en)switch(Ze){case"ES256":en="P-256"===Wt.crv;break;case"ES256K":en="secp256k1"===Wt.crv;break;case"ES384":en="P-384"===Wt.crv;break;case"ES512":en="P-521"===Wt.crv}return en}),{0:Nt,length:Dn}=It;if(0===Dn)throw new _e;if(1!==Dn)throw new Te;const Kt=Se._cached.get(Nt)||Se._cached.set(Nt,{}).get(Nt);if(void 0===Kt[Ze]){const Wt=yield Q(ar($t({},Nt),{ext:!0}),Ze);if(Wt instanceof Uint8Array||"public"!==Wt.type)throw new Ee("JSON Web Key Set members must be public keys");Kt[Ze]=Wt}return Kt[Ze]})()}}function Uo(re){return to.prototype.getKey.bind(new to(re))}const Gc=function(){var re=(0,b.Z)(function*(ae,ve,Se){let Ze,ft,wt=!1;"function"==typeof AbortController&&(Ze=new AbortController,ft=setTimeout(()=>{wt=!0,Ze.abort()},ve));const It=yield fetch(ae.href,{signal:Ze?Ze.signal:void 0,redirect:"manual",headers:Se.headers}).catch(Nt=>{throw wt?new De:Nt});if(void 0!==ft&&clearTimeout(ft),200!==It.status)throw new j("Expected 200 OK from the JSON Web Key Set HTTP response");try{return yield It.json()}catch(Nt){throw new j("Failed to parse the JSON Web Key Set HTTP response as JSON")}});return function(ve,Se,Ze){return re.apply(this,arguments)}}();class Ms extends to{constructor(ae,ve){if(super({keys:[]}),this._jwks=void 0,!(ae instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(ae.href),this._options={agent:null==ve?void 0:ve.agent,headers:null==ve?void 0:ve.headers},this._timeoutDuration="number"==typeof(null==ve?void 0:ve.timeoutDuration)?null==ve?void 0:ve.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==ve?void 0:ve.cooldownDuration)?null==ve?void 0:ve.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==ve?void 0:ve.cacheMaxAge)?null==ve?void 0:ve.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}getKey(ae,ve){var Se=()=>super.getKey,Ze=this;return(0,b.Z)(function*(){(!Ze._jwks||!Ze.fresh())&&(yield Ze.reload());try{return yield Se().call(Ze,ae,ve)}catch(ft){if(ft instanceof _e&&!1===Ze.coolingDown())return yield Ze.reload(),Se().call(Ze,ae,ve);throw ft}})()}reload(){var ae=this;return(0,b.Z)(function*(){if(ae._pendingFetch&&$())return new Promise(ve=>{const Se=()=>{void 0===ae._pendingFetch?ve():setTimeout(Se,5)};Se()});ae._pendingFetch||(ae._pendingFetch=Gc(ae._url,ae._timeoutDuration,ae._options).then(ve=>{if(!_v(ve))throw new Ee("JSON Web Key Set malformed");ae._jwks={keys:ve.keys},ae._jwksTimestamp=Date.now(),ae._pendingFetch=void 0}).catch(ve=>{throw ae._pendingFetch=void 0,ve})),yield ae._pendingFetch})()}}function Rf(re,ae){return Ms.prototype.getKey.bind(new Ms(re,ae))}class tm extends ha{encode(){return`${I(JSON.stringify({alg:"none"}))}.${I(JSON.stringify(this._payload))}.`}static decode(ae,ve){if("string"!=typeof ae)throw new pe("Unsecured JWT must be a string");const{0:Se,1:Ze,2:ft,length:wt}=ae.split(".");if(3!==wt||""!==ft)throw new pe("Invalid Unsecured JWT");let It;try{if(It=JSON.parse(p.decode(V(Se))),"none"!==It.alg)throw new Error}catch(Dn){throw new pe("Invalid Unsecured JWT")}return{payload:Qg(It,V(Ze),ve),header:It}}}const Qd=I,qu=V;function qc(re){let ae;if("string"==typeof re){const ve=re.split(".");(3===ve.length||5===ve.length)&&([ae]=ve)}else if("object"==typeof re&&re){if(!("protected"in re))throw new TypeError("Token does not contain a Protected Header");ae=re.protected}try{if("string"!=typeof ae||!ae)throw new Error;const ve=JSON.parse(p.decode(qu(ae)));if(!Kn(ve))throw new Error;return ve}catch(ve){throw new TypeError("Invalid Token or Protected Header formatting")}}function jo(re){if("string"!=typeof re)throw new pe("JWTs must use Compact JWS serialization, JWT must be a string");const{1:ae,length:ve}=re.split(".");if(5===ve)throw new pe("Only JWTs using Compact JWS serialization can be decoded");if(3!==ve)throw new pe("Invalid JWT");if(!ae)throw new pe("JWTs must contain a payload");let Se,Ze;try{Se=qu(ae)}catch(ft){throw new pe("Failed to parse the base64url encoded payload")}try{Ze=JSON.parse(p.decode(Se))}catch(ft){throw new pe("Failed to parse the decoded payload as JSON")}if(!Kn(Ze))throw new pe("Invalid JWT Claims Set");return Ze}function jx(re,ae){return ds.apply(this,arguments)}function ds(){return(ds=(0,b.Z)(function*(re,ae){var ve;let Se,Ze,ft;switch(re){case"HS256":case"HS384":case"HS512":Se=parseInt(re.slice(-3),10),Ze={name:"HMAC",hash:`SHA-${Se}`,length:Se},ft=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return Se=parseInt(re.slice(-3),10),de(new Uint8Array(Se>>3));case"A128KW":case"A192KW":case"A256KW":Se=parseInt(re.slice(1,4),10),Ze={name:"AES-KW",length:Se},ft=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":Se=parseInt(re.slice(1,4),10),Ze={name:"AES-GCM",length:Se},ft=["encrypt","decrypt"];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return S.subtle.generateKey(Ze,null!==(ve=null==ae?void 0:ae.extractable)&&void 0!==ve&&ve,ft)})).apply(this,arguments)}function Zt(re){var ae;const ve=null!==(ae=null==re?void 0:re.modulusLength)&&void 0!==ae?ae:2048;if("number"!=typeof ve||ve<2048)throw new q("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return ve}function or(re,ae){return oi.apply(this,arguments)}function oi(){return(oi=(0,b.Z)(function*(re,ae){var ve,Se;let Ze,ft;switch(re){case"PS256":case"PS384":case"PS512":Ze={name:"RSA-PSS",hash:`SHA-${re.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Zt(ae)},ft=["sign","verify"];break;case"RS256":case"RS384":case"RS512":Ze={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${re.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Zt(ae)},ft=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":Ze={name:"RSA-OAEP",hash:`SHA-${parseInt(re.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Zt(ae)},ft=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":Ze={name:"ECDSA",namedCurve:"P-256"},ft=["sign","verify"];break;case"ES384":Ze={name:"ECDSA",namedCurve:"P-384"},ft=["sign","verify"];break;case"ES512":Ze={name:"ECDSA",namedCurve:"P-521"},ft=["sign","verify"];break;case($()||se())&&"EdDSA":switch(null==ae?void 0:ae.crv){case void 0:case"Ed25519":Ze={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},ft=["sign","verify"];break;case se()&&"Ed448":Ze={name:"NODE-ED448",namedCurve:"NODE-ED448"},ft=["sign","verify"];break;default:throw new q("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":Ze={name:"ECDH",namedCurve:null!==(ve=null==ae?void 0:ae.crv)&&void 0!==ve?ve:"P-256"},ft=["deriveKey","deriveBits"];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return S.subtle.generateKey(Ze,null!==(Se=null==ae?void 0:ae.extractable)&&void 0!==Se&&Se,ft)})).apply(this,arguments)}function Is(re,ae){return bl.apply(this,arguments)}function bl(){return(bl=(0,b.Z)(function*(re,ae){return or(re,ae)})).apply(this,arguments)}function fo(re,ae){return wl.apply(this,arguments)}function wl(){return(wl=(0,b.Z)(function*(re,ae){return jx(re,ae)})).apply(this,arguments)}},5861:(Ge,G,F)=>{"use strict";function B(b,S,k,h,f,u,p){try{var w=b[u](p),g=w.value}catch(x){return void k(x)}w.done?S(g):Promise.resolve(g).then(h,f)}function C(b){return function(){var S=this,k=arguments;return new Promise(function(h,f){var u=b.apply(S,k);function p(g){B(u,h,f,p,w,"next",g)}function w(g){B(u,h,f,p,w,"throw",g)}p(void 0)})}}F.d(G,{Z:()=>C})}},Ge=>{Ge(Ge.s=8829)}]);